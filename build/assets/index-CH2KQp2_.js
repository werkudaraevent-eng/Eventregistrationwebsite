function O0(r,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in r)){const u=Object.getOwnPropertyDescriptor(o,c);u&&Object.defineProperty(r,c,u.get?u:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=n(c);fetch(c.href,u)}})();var xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function $b(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var n=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var c=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(n,o,c.get?c:{enumerable:!0,get:function(){return r[o]}})}),n}var rf={exports:{}},zl={},sf={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function Gb(){if(Ep)return Rt;Ep=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),p=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),_=Symbol.iterator;function k(K){return K===null||typeof K!="object"?null:(K=_&&K[_]||K["@@iterator"],typeof K=="function"?K:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,O={};function L(K,ue,Ae){this.props=K,this.context=ue,this.refs=O,this.updater=Ae||T}L.prototype.isReactComponent={},L.prototype.setState=function(K,ue){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ue,"setState")},L.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function U(){}U.prototype=L.prototype;function z(K,ue,Ae){this.props=K,this.context=ue,this.refs=O,this.updater=Ae||T}var F=z.prototype=new U;F.constructor=z,D(F,L.prototype),F.isPureReactComponent=!0;var $=Array.isArray,se=Object.prototype.hasOwnProperty,Y={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function X(K,ue,Ae){var Te,Fe={},ee=null,pe=null;if(ue!=null)for(Te in ue.ref!==void 0&&(pe=ue.ref),ue.key!==void 0&&(ee=""+ue.key),ue)se.call(ue,Te)&&!V.hasOwnProperty(Te)&&(Fe[Te]=ue[Te]);var Ee=arguments.length-2;if(Ee===1)Fe.children=Ae;else if(1<Ee){for(var Le=Array(Ee),Xe=0;Xe<Ee;Xe++)Le[Xe]=arguments[Xe+2];Fe.children=Le}if(K&&K.defaultProps)for(Te in Ee=K.defaultProps,Ee)Fe[Te]===void 0&&(Fe[Te]=Ee[Te]);return{$$typeof:r,type:K,key:ee,ref:pe,props:Fe,_owner:Y.current}}function W(K,ue){return{$$typeof:r,type:K.type,key:ue,ref:K.ref,props:K.props,_owner:K._owner}}function ye(K){return typeof K=="object"&&K!==null&&K.$$typeof===r}function be(K){var ue={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Ae){return ue[Ae]})}var de=/\/+/g;function ve(K,ue){return typeof K=="object"&&K!==null&&K.key!=null?be(""+K.key):ue.toString(36)}function Ce(K,ue,Ae,Te,Fe){var ee=typeof K;(ee==="undefined"||ee==="boolean")&&(K=null);var pe=!1;if(K===null)pe=!0;else switch(ee){case"string":case"number":pe=!0;break;case"object":switch(K.$$typeof){case r:case e:pe=!0}}if(pe)return pe=K,Fe=Fe(pe),K=Te===""?"."+ve(pe,0):Te,$(Fe)?(Ae="",K!=null&&(Ae=K.replace(de,"$&/")+"/"),Ce(Fe,ue,Ae,"",function(Xe){return Xe})):Fe!=null&&(ye(Fe)&&(Fe=W(Fe,Ae+(!Fe.key||pe&&pe.key===Fe.key?"":(""+Fe.key).replace(de,"$&/")+"/")+K)),ue.push(Fe)),1;if(pe=0,Te=Te===""?".":Te+":",$(K))for(var Ee=0;Ee<K.length;Ee++){ee=K[Ee];var Le=Te+ve(ee,Ee);pe+=Ce(ee,ue,Ae,Le,Fe)}else if(Le=k(K),typeof Le=="function")for(K=Le.call(K),Ee=0;!(ee=K.next()).done;)ee=ee.value,Le=Te+ve(ee,Ee++),pe+=Ce(ee,ue,Ae,Le,Fe);else if(ee==="object")throw ue=String(K),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return pe}function ie(K,ue,Ae){if(K==null)return K;var Te=[],Fe=0;return Ce(K,Te,"","",function(ee){return ue.call(Ae,ee,Fe++)}),Te}function ce(K){if(K._status===-1){var ue=K._result;ue=ue(),ue.then(function(Ae){(K._status===0||K._status===-1)&&(K._status=1,K._result=Ae)},function(Ae){(K._status===0||K._status===-1)&&(K._status=2,K._result=Ae)}),K._status===-1&&(K._status=0,K._result=ue)}if(K._status===1)return K._result.default;throw K._result}var ge={current:null},te={transition:null},re={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:te,ReactCurrentOwner:Y};function fe(){throw Error("act(...) is not supported in production builds of React.")}return Rt.Children={map:ie,forEach:function(K,ue,Ae){ie(K,function(){ue.apply(this,arguments)},Ae)},count:function(K){var ue=0;return ie(K,function(){ue++}),ue},toArray:function(K){return ie(K,function(ue){return ue})||[]},only:function(K){if(!ye(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Rt.Component=L,Rt.Fragment=n,Rt.Profiler=c,Rt.PureComponent=z,Rt.StrictMode=o,Rt.Suspense=b,Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Rt.act=fe,Rt.cloneElement=function(K,ue,Ae){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Te=D({},K.props),Fe=K.key,ee=K.ref,pe=K._owner;if(ue!=null){if(ue.ref!==void 0&&(ee=ue.ref,pe=Y.current),ue.key!==void 0&&(Fe=""+ue.key),K.type&&K.type.defaultProps)var Ee=K.type.defaultProps;for(Le in ue)se.call(ue,Le)&&!V.hasOwnProperty(Le)&&(Te[Le]=ue[Le]===void 0&&Ee!==void 0?Ee[Le]:ue[Le])}var Le=arguments.length-2;if(Le===1)Te.children=Ae;else if(1<Le){Ee=Array(Le);for(var Xe=0;Xe<Le;Xe++)Ee[Xe]=arguments[Xe+2];Te.children=Ee}return{$$typeof:r,type:K.type,key:Fe,ref:ee,props:Te,_owner:pe}},Rt.createContext=function(K){return K={$$typeof:p,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:u,_context:K},K.Consumer=K},Rt.createElement=X,Rt.createFactory=function(K){var ue=X.bind(null,K);return ue.type=K,ue},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(K){return{$$typeof:x,render:K}},Rt.isValidElement=ye,Rt.lazy=function(K){return{$$typeof:A,_payload:{_status:-1,_result:K},_init:ce}},Rt.memo=function(K,ue){return{$$typeof:y,type:K,compare:ue===void 0?null:ue}},Rt.startTransition=function(K){var ue=te.transition;te.transition={};try{K()}finally{te.transition=ue}},Rt.unstable_act=fe,Rt.useCallback=function(K,ue){return ge.current.useCallback(K,ue)},Rt.useContext=function(K){return ge.current.useContext(K)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(K){return ge.current.useDeferredValue(K)},Rt.useEffect=function(K,ue){return ge.current.useEffect(K,ue)},Rt.useId=function(){return ge.current.useId()},Rt.useImperativeHandle=function(K,ue,Ae){return ge.current.useImperativeHandle(K,ue,Ae)},Rt.useInsertionEffect=function(K,ue){return ge.current.useInsertionEffect(K,ue)},Rt.useLayoutEffect=function(K,ue){return ge.current.useLayoutEffect(K,ue)},Rt.useMemo=function(K,ue){return ge.current.useMemo(K,ue)},Rt.useReducer=function(K,ue,Ae){return ge.current.useReducer(K,ue,Ae)},Rt.useRef=function(K){return ge.current.useRef(K)},Rt.useState=function(K){return ge.current.useState(K)},Rt.useSyncExternalStore=function(K,ue,Ae){return ge.current.useSyncExternalStore(K,ue,Ae)},Rt.useTransition=function(){return ge.current.useTransition()},Rt.version="18.3.1",Rt}var Sp;function P0(){return Sp||(Sp=1,sf.exports=Gb()),sf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function qb(){if(Ap)return zl;Ap=1;var r=P0(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function p(x,b,y){var A,_={},k=null,T=null;y!==void 0&&(k=""+y),b.key!==void 0&&(k=""+b.key),b.ref!==void 0&&(T=b.ref);for(A in b)o.call(b,A)&&!u.hasOwnProperty(A)&&(_[A]=b[A]);if(x&&x.defaultProps)for(A in b=x.defaultProps,b)_[A]===void 0&&(_[A]=b[A]);return{$$typeof:e,type:x,key:k,ref:T,props:_,_owner:c.current}}return zl.Fragment=n,zl.jsx=p,zl.jsxs=p,zl}var _p;function Xb(){return _p||(_p=1,rf.exports=qb()),rf.exports}var m=Xb(),wu={},of={exports:{}},vr={},af={exports:{}},lf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function Yb(){return Np||(Np=1,(function(r){function e(te,re){var fe=te.length;te.push(re);e:for(;0<fe;){var K=fe-1>>>1,ue=te[K];if(0<c(ue,re))te[K]=re,te[fe]=ue,fe=K;else break e}}function n(te){return te.length===0?null:te[0]}function o(te){if(te.length===0)return null;var re=te[0],fe=te.pop();if(fe!==re){te[0]=fe;e:for(var K=0,ue=te.length,Ae=ue>>>1;K<Ae;){var Te=2*(K+1)-1,Fe=te[Te],ee=Te+1,pe=te[ee];if(0>c(Fe,fe))ee<ue&&0>c(pe,Fe)?(te[K]=pe,te[ee]=fe,K=ee):(te[K]=Fe,te[Te]=fe,K=Te);else if(ee<ue&&0>c(pe,fe))te[K]=pe,te[ee]=fe,K=ee;else break e}}return re}function c(te,re){var fe=te.sortIndex-re.sortIndex;return fe!==0?fe:te.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var p=Date,x=p.now();r.unstable_now=function(){return p.now()-x}}var b=[],y=[],A=1,_=null,k=3,T=!1,D=!1,O=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(te){for(var re=n(y);re!==null;){if(re.callback===null)o(y);else if(re.startTime<=te)o(y),re.sortIndex=re.expirationTime,e(b,re);else break;re=n(y)}}function $(te){if(O=!1,F(te),!D)if(n(b)!==null)D=!0,ce(se);else{var re=n(y);re!==null&&ge($,re.startTime-te)}}function se(te,re){D=!1,O&&(O=!1,U(X),X=-1),T=!0;var fe=k;try{for(F(re),_=n(b);_!==null&&(!(_.expirationTime>re)||te&&!be());){var K=_.callback;if(typeof K=="function"){_.callback=null,k=_.priorityLevel;var ue=K(_.expirationTime<=re);re=r.unstable_now(),typeof ue=="function"?_.callback=ue:_===n(b)&&o(b),F(re)}else o(b);_=n(b)}if(_!==null)var Ae=!0;else{var Te=n(y);Te!==null&&ge($,Te.startTime-re),Ae=!1}return Ae}finally{_=null,k=fe,T=!1}}var Y=!1,V=null,X=-1,W=5,ye=-1;function be(){return!(r.unstable_now()-ye<W)}function de(){if(V!==null){var te=r.unstable_now();ye=te;var re=!0;try{re=V(!0,te)}finally{re?ve():(Y=!1,V=null)}}else Y=!1}var ve;if(typeof z=="function")ve=function(){z(de)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,ie=Ce.port2;Ce.port1.onmessage=de,ve=function(){ie.postMessage(null)}}else ve=function(){L(de,0)};function ce(te){V=te,Y||(Y=!0,ve())}function ge(te,re){X=L(function(){te(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){D||T||(D=!0,ce(se))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return n(b)},r.unstable_next=function(te){switch(k){case 1:case 2:case 3:var re=3;break;default:re=k}var fe=k;k=re;try{return te()}finally{k=fe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,re){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var fe=k;k=te;try{return re()}finally{k=fe}},r.unstable_scheduleCallback=function(te,re,fe){var K=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?K+fe:K):fe=K,te){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=fe+ue,te={id:A++,callback:re,priorityLevel:te,startTime:fe,expirationTime:ue,sortIndex:-1},fe>K?(te.sortIndex=fe,e(y,te),n(b)===null&&te===n(y)&&(O?(U(X),X=-1):O=!0,ge($,fe-K))):(te.sortIndex=ue,e(b,te),D||T||(D=!0,ce(se))),te},r.unstable_shouldYield=be,r.unstable_wrapCallback=function(te){var re=k;return function(){var fe=k;k=re;try{return te.apply(this,arguments)}finally{k=fe}}}})(lf)),lf}var Ip;function Kb(){return Ip||(Ip=1,af.exports=Yb()),af.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function Zb(){if(Tp)return vr;Tp=1;var r=P0(),e=Kb();function n(i){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+i,g=1;g<arguments.length;g++)l+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function u(i,l){p(i,l),p(i+"Capture",l)}function p(i,l){for(c[i]=l,i=0;i<l.length;i++)o.add(l[i])}var x=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},_={};function k(i){return b.call(_,i)?!0:b.call(A,i)?!1:y.test(i)?_[i]=!0:(A[i]=!0,!1)}function T(i,l,g,v){if(g!==null&&g.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return v?!1:g!==null?!g.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function D(i,l,g,v){if(l===null||typeof l>"u"||T(i,l,g,v))return!0;if(v)return!1;if(g!==null)switch(g.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function O(i,l,g,v,S,N,M){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=v,this.attributeNamespace=S,this.mustUseProperty=g,this.propertyName=i,this.type=l,this.sanitizeURL=N,this.removeEmptyString=M}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){L[i]=new O(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0];L[l]=new O(l,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){L[i]=new O(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){L[i]=new O(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){L[i]=new O(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){L[i]=new O(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){L[i]=new O(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){L[i]=new O(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){L[i]=new O(i,5,!1,i.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function z(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var l=i.replace(U,z);L[l]=new O(l,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var l=i.replace(U,z);L[l]=new O(l,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(U,z);L[l]=new O(l,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){L[i]=new O(i,1,!1,i.toLowerCase(),null,!1,!1)}),L.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){L[i]=new O(i,1,!1,i.toLowerCase(),null,!0,!0)});function F(i,l,g,v){var S=L.hasOwnProperty(l)?L[l]:null;(S!==null?S.type!==0:v||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(D(l,g,S,v)&&(g=null),v||S===null?k(l)&&(g===null?i.removeAttribute(l):i.setAttribute(l,""+g)):S.mustUseProperty?i[S.propertyName]=g===null?S.type===3?!1:"":g:(l=S.attributeName,v=S.attributeNamespace,g===null?i.removeAttribute(l):(S=S.type,g=S===3||S===4&&g===!0?"":""+g,v?i.setAttributeNS(v,l,g):i.setAttribute(l,g))))}var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),Y=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),ye=Symbol.for("react.provider"),be=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),te=Symbol.iterator;function re(i){return i===null||typeof i!="object"?null:(i=te&&i[te]||i["@@iterator"],typeof i=="function"?i:null)}var fe=Object.assign,K;function ue(i){if(K===void 0)try{throw Error()}catch(g){var l=g.stack.trim().match(/\n( *(at )?)/);K=l&&l[1]||""}return`
`+K+i}var Ae=!1;function Te(i,l){if(!i||Ae)return"";Ae=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(we){var v=we}Reflect.construct(i,[],l)}else{try{l.call()}catch(we){v=we}i.call(l.prototype)}else{try{throw Error()}catch(we){v=we}i()}}catch(we){if(we&&v&&typeof we.stack=="string"){for(var S=we.stack.split(`
`),N=v.stack.split(`
`),M=S.length-1,q=N.length-1;1<=M&&0<=q&&S[M]!==N[q];)q--;for(;1<=M&&0<=q;M--,q--)if(S[M]!==N[q]){if(M!==1||q!==1)do if(M--,q--,0>q||S[M]!==N[q]){var Q=`
`+S[M].replace(" at new "," at ");return i.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",i.displayName)),Q}while(1<=M&&0<=q);break}}}finally{Ae=!1,Error.prepareStackTrace=g}return(i=i?i.displayName||i.name:"")?ue(i):""}function Fe(i){switch(i.tag){case 5:return ue(i.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return i=Te(i.type,!1),i;case 11:return i=Te(i.type.render,!1),i;case 1:return i=Te(i.type,!0),i;default:return""}}function ee(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case Y:return"Portal";case W:return"Profiler";case X:return"StrictMode";case ve:return"Suspense";case Ce:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case be:return(i.displayName||"Context")+".Consumer";case ye:return(i._context.displayName||"Context")+".Provider";case de:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ie:return l=i.displayName||null,l!==null?l:ee(i.type)||"Memo";case ce:l=i._payload,i=i._init;try{return ee(i(l))}catch{}}return null}function pe(i){var l=i.type;switch(i.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=l.render,i=i.displayName||i.name||"",l.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ee(l);case 8:return l===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ee(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Le(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Xe(i){var l=Le(i)?"checked":"value",g=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),v=""+i[l];if(!i.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var S=g.get,N=g.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return S.call(this)},set:function(M){v=""+M,N.call(this,M)}}),Object.defineProperty(i,l,{enumerable:g.enumerable}),{getValue:function(){return v},setValue:function(M){v=""+M},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function tt(i){i._valueTracker||(i._valueTracker=Xe(i))}function vt(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var g=l.getValue(),v="";return i&&(v=Le(i)?i.checked?"true":"false":i.value),i=v,i!==g?(l.setValue(i),!0):!1}function nt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function on(i,l){var g=l.checked;return fe({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??i._wrapperState.initialChecked})}function je(i,l){var g=l.defaultValue==null?"":l.defaultValue,v=l.checked!=null?l.checked:l.defaultChecked;g=Ee(l.value!=null?l.value:g),i._wrapperState={initialChecked:v,initialValue:g,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Me(i,l){l=l.checked,l!=null&&F(i,"checked",l,!1)}function Je(i,l){Me(i,l);var g=Ee(l.value),v=l.type;if(g!=null)v==="number"?(g===0&&i.value===""||i.value!=g)&&(i.value=""+g):i.value!==""+g&&(i.value=""+g);else if(v==="submit"||v==="reset"){i.removeAttribute("value");return}l.hasOwnProperty("value")?ht(i,l.type,g):l.hasOwnProperty("defaultValue")&&ht(i,l.type,Ee(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(i.defaultChecked=!!l.defaultChecked)}function st(i,l,g){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var v=l.type;if(!(v!=="submit"&&v!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+i._wrapperState.initialValue,g||l===i.value||(i.value=l),i.defaultValue=l}g=i.name,g!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,g!==""&&(i.name=g)}function ht(i,l,g){(l!=="number"||nt(i.ownerDocument)!==i)&&(g==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+g&&(i.defaultValue=""+g))}var dr=Array.isArray;function ze(i,l,g,v){if(i=i.options,l){l={};for(var S=0;S<g.length;S++)l["$"+g[S]]=!0;for(g=0;g<i.length;g++)S=l.hasOwnProperty("$"+i[g].value),i[g].selected!==S&&(i[g].selected=S),S&&v&&(i[g].defaultSelected=!0)}else{for(g=""+Ee(g),l=null,S=0;S<i.length;S++){if(i[S].value===g){i[S].selected=!0,v&&(i[S].defaultSelected=!0);return}l!==null||i[S].disabled||(l=i[S])}l!==null&&(l.selected=!0)}}function ri(i,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return fe({},l,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Hi(i,l){var g=l.value;if(g==null){if(g=l.children,l=l.defaultValue,g!=null){if(l!=null)throw Error(n(92));if(dr(g)){if(1<g.length)throw Error(n(93));g=g[0]}l=g}l==null&&(l=""),g=l}i._wrapperState={initialValue:Ee(g)}}function Kn(i,l){var g=Ee(l.value),v=Ee(l.defaultValue);g!=null&&(g=""+g,g!==i.value&&(i.value=g),l.defaultValue==null&&i.defaultValue!==g&&(i.defaultValue=g)),v!=null&&(i.defaultValue=""+v)}function zn(i){var l=i.textContent;l===i._wrapperState.initialValue&&l!==""&&l!==null&&(i.value=l)}function Dn(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fr(i,l){return i==null||i==="http://www.w3.org/1999/xhtml"?Dn(l):i==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var St,It=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,g,v,S){MSApp.execUnsafeLocalFunction(function(){return i(l,g,v,S)})}:i})(function(i,l){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=l;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=St.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}});function Vn(i,l){if(l){var g=i.firstChild;if(g&&g===i.lastChild&&g.nodeType===3){g.nodeValue=l;return}}i.textContent=l}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Md=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(i){Md.forEach(function(l){l=l+i.charAt(0).toUpperCase()+i.substring(1),_i[l]=_i[i]})});function an(i,l,g){return l==null||typeof l=="boolean"||l===""?"":g||typeof l!="number"||l===0||_i.hasOwnProperty(i)&&_i[i]?(""+l).trim():l+"px"}function De(i,l){i=i.style;for(var g in l)if(l.hasOwnProperty(g)){var v=g.indexOf("--")===0,S=an(g,l[g],v);g==="float"&&(g="cssFloat"),v?i.setProperty(g,S):i[g]=S}}var xn=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bt(i,l){if(l){if(xn[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function qt(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $i=null;function Js(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ho=null,Tt=null,hr=null;function tl(i){if(i=_l(i)){if(typeof Ho!="function")throw Error(n(280));var l=i.stateNode;l&&(l=Oc(l),Ho(i.stateNode,i.type,l))}}function nl(i){Tt?hr?hr.push(i):hr=[i]:Tt=i}function fr(){if(Tt){var i=Tt,l=hr;if(hr=Tt=null,tl(i),l)for(i=0;i<l.length;i++)tl(l[i])}}function $o(i,l){return i(l)}function _n(){}var Ni=!1;function eo(i,l,g){if(Ni)return i(l,g);Ni=!0;try{return $o(i,l,g)}finally{Ni=!1,(Tt!==null||hr!==null)&&(_n(),fr())}}function Zn(i,l){var g=i.stateNode;if(g===null)return null;var v=Oc(g);if(v===null)return null;g=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(i=i.type,v=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!v;break e;default:i=!1}if(i)return null;if(g&&typeof g!="function")throw Error(n(231,l,typeof g));return g}var rl=!1;if(x)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){rl=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{rl=!1}function il(i,l,g,v,S,N,M,q,Q){var we=Array.prototype.slice.call(arguments,3);try{l.apply(g,we)}catch(Ie){this.onError(Ie)}}var Cn=!1,Ur=null,Wn=!1,Be=null,ds={onError:function(i){Cn=!0,Ur=i}};function sl(i,l,g,v,S,N,M,q,Q){Cn=!1,Ur=null,il.apply(ds,arguments)}function Qn(i,l,g,v,S,N,M,q,Q){if(sl.apply(this,arguments),Cn){if(Cn){var we=Ur;Cn=!1,Ur=null}else throw Error(n(198));Wn||(Wn=!0,Be=we)}}function gr(i){var l=i,g=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(g=l.return),i=l.return;while(i)}return l.tag===3?g:null}function to(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function no(i){if(gr(i)!==i)throw Error(n(188))}function zr(i){var l=i.alternate;if(!l){if(l=gr(i),l===null)throw Error(n(188));return l!==i?null:i}for(var g=i,v=l;;){var S=g.return;if(S===null)break;var N=S.alternate;if(N===null){if(v=S.return,v!==null){g=v;continue}break}if(S.child===N.child){for(N=S.child;N;){if(N===g)return no(S),i;if(N===v)return no(S),l;N=N.sibling}throw Error(n(188))}if(g.return!==v.return)g=S,v=N;else{for(var M=!1,q=S.child;q;){if(q===g){M=!0,g=S,v=N;break}if(q===v){M=!0,v=S,g=N;break}q=q.sibling}if(!M){for(q=N.child;q;){if(q===g){M=!0,g=N,v=S;break}if(q===v){M=!0,v=N,g=S;break}q=q.sibling}if(!M)throw Error(n(189))}}if(g.alternate!==v)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?i:l}function dc(i){return i=zr(i),i!==null?hc(i):null}function hc(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var l=hc(i);if(l!==null)return l;i=i.sibling}return null}var Er=e.unstable_scheduleCallback,Mn=e.unstable_cancelCallback,Xt=e.unstable_shouldYield,fc=e.unstable_requestPaint,zt=e.unstable_now,ol=e.unstable_getCurrentPriorityLevel,Se=e.unstable_ImmediatePriority,gc=e.unstable_UserBlockingPriority,$t=e.unstable_NormalPriority,hs=e.unstable_LowPriority,pc=e.unstable_IdlePriority,jt=null,bt=null;function Ot(i){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(jt,i,void 0,(i.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:wn,al=Math.log,ll=Math.LN2;function wn(i){return i>>>=0,i===0?32:31-(al(i)/ll|0)|0}var Sr=64,Go=4194304;function Gt(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ar(i,l){var g=i.pendingLanes;if(g===0)return 0;var v=0,S=i.suspendedLanes,N=i.pingedLanes,M=g&268435455;if(M!==0){var q=M&~S;q!==0?v=Gt(q):(N&=M,N!==0&&(v=Gt(N)))}else M=g&~S,M!==0?v=Gt(M):N!==0&&(v=Gt(N));if(v===0)return 0;if(l!==0&&l!==v&&(l&S)===0&&(S=v&-v,N=l&-l,S>=N||S===16&&(N&4194240)!==0))return l;if((v&4)!==0&&(v|=g&16),l=i.entangledLanes,l!==0)for(i=i.entanglements,l&=v;0<l;)g=31-ar(l),S=1<<g,v|=i[g],l&=~S;return v}function Ld(i,l){switch(i){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(i,l){for(var g=i.suspendedLanes,v=i.pingedLanes,S=i.expirationTimes,N=i.pendingLanes;0<N;){var M=31-ar(N),q=1<<M,Q=S[M];Q===-1?((q&g)===0||(q&v)!==0)&&(S[M]=Ld(q,l)):Q<=l&&(i.expiredLanes|=q),N&=~q}}function Vt(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Nn(){var i=Sr;return Sr<<=1,(Sr&4194240)===0&&(Sr=64),i}function ae(i){for(var l=[],g=0;31>g;g++)l.push(i);return l}function H(i,l,g){i.pendingLanes|=l,l!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,l=31-ar(l),i[l]=g}function et(i,l){var g=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l,l=i.entanglements;var v=i.eventTimes;for(i=i.expirationTimes;0<g;){var S=31-ar(g),N=1<<S;l[S]=0,v[S]=-1,i[S]=-1,g&=~N}}function fn(i,l){var g=i.entangledLanes|=l;for(i=i.entanglements;g;){var v=31-ar(g),S=1<<v;S&l|i[v]&l&&(i[v]|=l),g&=~S}}var Ct=0;function mc(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var qo,Jn,rt,Yt,cl,ul=!1,gs=[],_r=null,Vr=null,Ii=null,rn=new Map,ii=new Map,Hn=[],ct="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xc(i,l){switch(i){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":rn.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ii.delete(l.pointerId)}}function pt(i,l,g,v,S,N){return i===null||i.nativeEvent!==N?(i={blockedOn:l,domEventName:g,eventSystemFlags:v,nativeEvent:N,targetContainers:[S]},l!==null&&(l=_l(l),l!==null&&Jn(l)),i):(i.eventSystemFlags|=v,l=i.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),i)}function In(i,l,g,v,S){switch(l){case"focusin":return _r=pt(_r,i,l,g,v,S),!0;case"dragenter":return Vr=pt(Vr,i,l,g,v,S),!0;case"mouseover":return Ii=pt(Ii,i,l,g,v,S),!0;case"pointerover":var N=S.pointerId;return rn.set(N,pt(rn.get(N)||null,i,l,g,v,S)),!0;case"gotpointercapture":return N=S.pointerId,ii.set(N,pt(ii.get(N)||null,i,l,g,v,S)),!0}return!1}function wc(i){var l=fo(i.target);if(l!==null){var g=gr(l);if(g!==null){if(l=g.tag,l===13){if(l=to(g),l!==null){i.blockedOn=l,cl(i.priority,function(){rt(g)});return}}else if(l===3&&g.stateNode.current.memoizedState.isDehydrated){i.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ps(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var g=Xo(i.domEventName,i.eventSystemFlags,l[0],i.nativeEvent);if(g===null){g=i.nativeEvent;var v=new g.constructor(g.type,g);$i=v,g.target.dispatchEvent(v),$i=null}else return l=_l(g),l!==null&&Jn(l),i.blockedOn=g,!1;l.shift()}return!0}function dl(i,l,g){ps(i)&&g.delete(l)}function Gi(){ul=!1,_r!==null&&ps(_r)&&(_r=null),Vr!==null&&ps(Vr)&&(Vr=null),Ii!==null&&ps(Ii)&&(Ii=null),rn.forEach(dl),ii.forEach(dl)}function ro(i,l){i.blockedOn===l&&(i.blockedOn=null,ul||(ul=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gi)))}function si(i){function l(S){return ro(S,i)}if(0<gs.length){ro(gs[0],i);for(var g=1;g<gs.length;g++){var v=gs[g];v.blockedOn===i&&(v.blockedOn=null)}}for(_r!==null&&ro(_r,i),Vr!==null&&ro(Vr,i),Ii!==null&&ro(Ii,i),rn.forEach(l),ii.forEach(l),g=0;g<Hn.length;g++)v=Hn[g],v.blockedOn===i&&(v.blockedOn=null);for(;0<Hn.length&&(g=Hn[0],g.blockedOn===null);)wc(g),g.blockedOn===null&&Hn.shift()}var Wr=$.ReactCurrentBatchConfig,Ti=!0;function yc(i,l,g,v){var S=Ct,N=Wr.transition;Wr.transition=null;try{Ct=1,qi(i,l,g,v)}finally{Ct=S,Wr.transition=N}}function io(i,l,g,v){var S=Ct,N=Wr.transition;Wr.transition=null;try{Ct=4,qi(i,l,g,v)}finally{Ct=S,Wr.transition=N}}function qi(i,l,g,v){if(Ti){var S=Xo(i,l,g,v);if(S===null)qd(i,l,v,Tn,g),xc(i,v);else if(In(S,i,l,g,v))v.stopPropagation();else if(xc(i,v),l&4&&-1<ct.indexOf(i)){for(;S!==null;){var N=_l(S);if(N!==null&&qo(N),N=Xo(i,l,g,v),N===null&&qd(i,l,v,Tn,g),N===S)break;S=N}S!==null&&v.stopPropagation()}else qd(i,l,v,null,g)}}var Tn=null;function Xo(i,l,g,v){if(Tn=null,i=Js(v),i=fo(i),i!==null)if(l=gr(i),l===null)i=null;else if(g=l.tag,g===13){if(i=to(l),i!==null)return i;i=null}else if(g===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null);return Tn=i,null}function hl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ol()){case Se:return 1;case gc:return 4;case $t:case hs:return 16;case pc:return 536870912;default:return 16}default:return 16}}var oi=null,fl=null,Yo=null;function vc(){if(Yo)return Yo;var i,l=fl,g=l.length,v,S="value"in oi?oi.value:oi.textContent,N=S.length;for(i=0;i<g&&l[i]===S[i];i++);var M=g-i;for(v=1;v<=M&&l[g-v]===S[N-v];v++);return Yo=S.slice(i,1<v?1-v:void 0)}function Dt(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function so(){return!0}function oo(){return!1}function gn(i){function l(g,v,S,N,M){this._reactName=g,this._targetInst=S,this.type=v,this.nativeEvent=N,this.target=M,this.currentTarget=null;for(var q in i)i.hasOwnProperty(q)&&(g=i[q],this[q]=g?g(N):N[q]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?so:oo,this.isPropagationStopped=oo,this}return fe(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=so)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=so)},persist:function(){},isPersistent:so}),l}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xe=gn(ms),wt=fe({},ms,{view:0,detail:0}),Rn=gn(wt),xs,Ko,ao,Zo=fe({},wt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ao&&(ao&&i.type==="mousemove"?(xs=i.screenX-ao.screenX,Ko=i.screenY-ao.screenY):Ko=xs=0,ao=i),xs)},movementY:function(i){return"movementY"in i?i.movementY:Ko}}),bc=gn(Zo),gl=fe({},Zo,{dataTransfer:0}),yn=gn(gl),pl=fe({},wt,{relatedTarget:0}),Kt=gn(pl),Qo=fe({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),Xi=gn(Qo),Wt=fe({},ms,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ot=gn(Wt),Bd=fe({},ms,{data:0}),Ht=gn(Bd),Yi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ws={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hr(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=Fd[i])?!!l[i]:!1}function lo(){return Hr}var Cc=fe({},wt,{key:function(i){if(i.key){var l=Yi[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=Dt(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ws[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lo,charCode:function(i){return i.type==="keypress"?Dt(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Dt(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ml=gn(Cc),Ec=fe({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xl=gn(Ec),Ud=fe({},wt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lo}),ys=gn(Ud),wl=fe({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),zd=gn(wl),co=fe({},Zo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Vd=gn(co),Ri=[9,13,27,32],vs=x&&"CompositionEvent"in window,Ln=null;x&&"documentMode"in document&&(Ln=document.documentMode);var Sc=x&&"TextEvent"in window&&!Ln,Nr=x&&(!vs||Ln&&8<Ln&&11>=Ln),Ac=" ",Jo=!1;function _c(i,l){switch(i){case"keyup":return Ri.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $n=!1;function Wd(i,l){switch(i){case"compositionend":return yl(l);case"keypress":return l.which!==32?null:(Jo=!0,Ac);case"textInput":return i=l.data,i===Ac&&Jo?null:i;default:return null}}function vl(i,l){if($n)return i==="compositionend"||!vs&&_c(i,l)?(i=vc(),Yo=fl=oi=null,$n=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Nr&&l.locale!=="ko"?null:l.data;default:return null}}var uo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!uo[i.type]:l==="textarea"}function ho(i,l,g,v){nl(v),l=Tc(l,"onChange"),0<l.length&&(g=new xe("onChange","change",null,g,v),i.push({event:g,listeners:l}))}var P=null,t=null;function s(i){F1(i,0)}function a(i){var l=na(i);if(vt(l))return i}function d(i,l){if(i==="change")return l}var h=!1;if(x){var f;if(x){var w="oninput"in document;if(!w){var C=document.createElement("div");C.setAttribute("oninput","return;"),w=typeof C.oninput=="function"}f=w}else f=!1;h=f&&(!document.documentMode||9<document.documentMode)}function E(){P&&(P.detachEvent("onpropertychange",I),t=P=null)}function I(i){if(i.propertyName==="value"&&a(t)){var l=[];ho(l,t,i,Js(i)),eo(s,l)}}function j(i,l,g){i==="focusin"?(E(),P=l,t=g,P.attachEvent("onpropertychange",I)):i==="focusout"&&E()}function B(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return a(t)}function G(i,l){if(i==="click")return a(l)}function Z(i,l){if(i==="input"||i==="change")return a(l)}function J(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var oe=typeof Object.is=="function"?Object.is:J;function me(i,l){if(oe(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var g=Object.keys(i),v=Object.keys(l);if(g.length!==v.length)return!1;for(v=0;v<g.length;v++){var S=g[v];if(!b.call(l,S)||!oe(i[S],l[S]))return!1}return!0}function ke(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Oe(i,l){var g=ke(i);i=0;for(var v;g;){if(g.nodeType===3){if(v=i+g.textContent.length,i<=l&&v>=l)return{node:g,offset:l-i};i=v}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=ke(g)}}function Ne(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?Ne(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function At(){for(var i=window,l=nt();l instanceof i.HTMLIFrameElement;){try{var g=typeof l.contentWindow.location.href=="string"}catch{g=!1}if(g)i=l.contentWindow;else break;l=nt(i.document)}return l}function mt(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function er(i){var l=At(),g=i.focusedElem,v=i.selectionRange;if(l!==g&&g&&g.ownerDocument&&Ne(g.ownerDocument.documentElement,g)){if(v!==null&&mt(g)){if(l=v.start,i=v.end,i===void 0&&(i=l),"selectionStart"in g)g.selectionStart=l,g.selectionEnd=Math.min(i,g.value.length);else if(i=(l=g.ownerDocument||document)&&l.defaultView||window,i.getSelection){i=i.getSelection();var S=g.textContent.length,N=Math.min(v.start,S);v=v.end===void 0?N:Math.min(v.end,S),!i.extend&&N>v&&(S=v,v=N,N=S),S=Oe(g,N);var M=Oe(g,v);S&&M&&(i.rangeCount!==1||i.anchorNode!==S.node||i.anchorOffset!==S.offset||i.focusNode!==M.node||i.focusOffset!==M.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),i.removeAllRanges(),N>v?(i.addRange(l),i.extend(M.node,M.offset)):(l.setEnd(M.node,M.offset),i.addRange(l)))}}for(l=[],i=g;i=i.parentNode;)i.nodeType===1&&l.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<l.length;g++)i=l[g],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Ir=x&&"documentMode"in document&&11>=document.documentMode,vn=null,Ft=null,ln=null,Gn=!1;function Ki(i,l,g){var v=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Gn||vn==null||vn!==nt(v)||(v=vn,"selectionStart"in v&&mt(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ln&&me(ln,v)||(ln=v,v=Tc(Ft,"onSelect"),0<v.length&&(l=new xe("onSelect","select",null,l,g),i.push({event:l,listeners:v}),l.target=vn)))}function ai(i,l){var g={};return g[i.toLowerCase()]=l.toLowerCase(),g["Webkit"+i]="webkit"+l,g["Moz"+i]="moz"+l,g}var bs={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionend:ai("Transition","TransitionEnd")},bl={},k1={};x&&(k1=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function Nc(i){if(bl[i])return bl[i];if(!bs[i])return i;var l=bs[i],g;for(g in l)if(l.hasOwnProperty(g)&&g in k1)return bl[i]=l[g];return i}var O1=Nc("animationend"),P1=Nc("animationiteration"),j1=Nc("animationstart"),D1=Nc("transitionend"),M1=new Map,L1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(i,l){M1.set(i,l),u(l,[i])}for(var Hd=0;Hd<L1.length;Hd++){var $d=L1[Hd],eb=$d.toLowerCase(),tb=$d[0].toUpperCase()+$d.slice(1);Cs(eb,"on"+tb)}Cs(O1,"onAnimationEnd"),Cs(P1,"onAnimationIteration"),Cs(j1,"onAnimationStart"),Cs("dblclick","onDoubleClick"),Cs("focusin","onFocus"),Cs("focusout","onBlur"),Cs(D1,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function B1(i,l,g){var v=i.type||"unknown-event";i.currentTarget=g,Qn(v,l,void 0,i),i.currentTarget=null}function F1(i,l){l=(l&4)!==0;for(var g=0;g<i.length;g++){var v=i[g],S=v.event;v=v.listeners;e:{var N=void 0;if(l)for(var M=v.length-1;0<=M;M--){var q=v[M],Q=q.instance,we=q.currentTarget;if(q=q.listener,Q!==N&&S.isPropagationStopped())break e;B1(S,q,we),N=Q}else for(M=0;M<v.length;M++){if(q=v[M],Q=q.instance,we=q.currentTarget,q=q.listener,Q!==N&&S.isPropagationStopped())break e;B1(S,q,we),N=Q}}}if(Wn)throw i=Be,Wn=!1,Be=null,i}function en(i,l){var g=l[Jd];g===void 0&&(g=l[Jd]=new Set);var v=i+"__bubble";g.has(v)||(U1(l,i,2,!1),g.add(v))}function Gd(i,l,g){var v=0;l&&(v|=4),U1(g,i,v,l)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function El(i){if(!i[Ic]){i[Ic]=!0,o.forEach(function(g){g!=="selectionchange"&&(nb.has(g)||Gd(g,!1,i),Gd(g,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[Ic]||(l[Ic]=!0,Gd("selectionchange",!1,l))}}function U1(i,l,g,v){switch(hl(l)){case 1:var S=yc;break;case 4:S=io;break;default:S=qi}g=S.bind(null,l,g,i),S=void 0,!rl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),v?S!==void 0?i.addEventListener(l,g,{capture:!0,passive:S}):i.addEventListener(l,g,!0):S!==void 0?i.addEventListener(l,g,{passive:S}):i.addEventListener(l,g,!1)}function qd(i,l,g,v,S){var N=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var M=v.tag;if(M===3||M===4){var q=v.stateNode.containerInfo;if(q===S||q.nodeType===8&&q.parentNode===S)break;if(M===4)for(M=v.return;M!==null;){var Q=M.tag;if((Q===3||Q===4)&&(Q=M.stateNode.containerInfo,Q===S||Q.nodeType===8&&Q.parentNode===S))return;M=M.return}for(;q!==null;){if(M=fo(q),M===null)return;if(Q=M.tag,Q===5||Q===6){v=N=M;continue e}q=q.parentNode}}v=v.return}eo(function(){var we=N,Ie=Js(g),Re=[];e:{var _e=M1.get(i);if(_e!==void 0){var Ue=xe,He=i;switch(i){case"keypress":if(Dt(g)===0)break e;case"keydown":case"keyup":Ue=ml;break;case"focusin":He="focus",Ue=Kt;break;case"focusout":He="blur",Ue=Kt;break;case"beforeblur":case"afterblur":Ue=Kt;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=ys;break;case O1:case P1:case j1:Ue=Xi;break;case D1:Ue=zd;break;case"scroll":Ue=Rn;break;case"wheel":Ue=Vd;break;case"copy":case"cut":case"paste":Ue=ot;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=xl}var Ye=(l&4)!==0,bn=!Ye&&i==="scroll",le=Ye?_e!==null?_e+"Capture":null:_e;Ye=[];for(var ne=we,he;ne!==null;){he=ne;var Pe=he.stateNode;if(he.tag===5&&Pe!==null&&(he=Pe,le!==null&&(Pe=Zn(ne,le),Pe!=null&&Ye.push(Sl(ne,Pe,he)))),bn)break;ne=ne.return}0<Ye.length&&(_e=new Ue(_e,He,null,g,Ie),Re.push({event:_e,listeners:Ye}))}}if((l&7)===0){e:{if(_e=i==="mouseover"||i==="pointerover",Ue=i==="mouseout"||i==="pointerout",_e&&g!==$i&&(He=g.relatedTarget||g.fromElement)&&(fo(He)||He[Zi]))break e;if((Ue||_e)&&(_e=Ie.window===Ie?Ie:(_e=Ie.ownerDocument)?_e.defaultView||_e.parentWindow:window,Ue?(He=g.relatedTarget||g.toElement,Ue=we,He=He?fo(He):null,He!==null&&(bn=gr(He),He!==bn||He.tag!==5&&He.tag!==6)&&(He=null)):(Ue=null,He=we),Ue!==He)){if(Ye=bc,Pe="onMouseLeave",le="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(Ye=xl,Pe="onPointerLeave",le="onPointerEnter",ne="pointer"),bn=Ue==null?_e:na(Ue),he=He==null?_e:na(He),_e=new Ye(Pe,ne+"leave",Ue,g,Ie),_e.target=bn,_e.relatedTarget=he,Pe=null,fo(Ie)===we&&(Ye=new Ye(le,ne+"enter",He,g,Ie),Ye.target=he,Ye.relatedTarget=bn,Pe=Ye),bn=Pe,Ue&&He)t:{for(Ye=Ue,le=He,ne=0,he=Ye;he;he=ea(he))ne++;for(he=0,Pe=le;Pe;Pe=ea(Pe))he++;for(;0<ne-he;)Ye=ea(Ye),ne--;for(;0<he-ne;)le=ea(le),he--;for(;ne--;){if(Ye===le||le!==null&&Ye===le.alternate)break t;Ye=ea(Ye),le=ea(le)}Ye=null}else Ye=null;Ue!==null&&z1(Re,_e,Ue,Ye,!1),He!==null&&bn!==null&&z1(Re,bn,He,Ye,!0)}}e:{if(_e=we?na(we):window,Ue=_e.nodeName&&_e.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&_e.type==="file")var Ke=d;else if(Pt(_e))if(h)Ke=Z;else{Ke=B;var at=j}else(Ue=_e.nodeName)&&Ue.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(Ke=G);if(Ke&&(Ke=Ke(i,we))){ho(Re,Ke,g,Ie);break e}at&&at(i,_e,we),i==="focusout"&&(at=_e._wrapperState)&&at.controlled&&_e.type==="number"&&ht(_e,"number",_e.value)}switch(at=we?na(we):window,i){case"focusin":(Pt(at)||at.contentEditable==="true")&&(vn=at,Ft=we,ln=null);break;case"focusout":ln=Ft=vn=null;break;case"mousedown":Gn=!0;break;case"contextmenu":case"mouseup":case"dragend":Gn=!1,Ki(Re,g,Ie);break;case"selectionchange":if(Ir)break;case"keydown":case"keyup":Ki(Re,g,Ie)}var lt;if(vs)e:{switch(i){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else $n?_c(i,g)&&(gt="onCompositionEnd"):i==="keydown"&&g.keyCode===229&&(gt="onCompositionStart");gt&&(Nr&&g.locale!=="ko"&&($n||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&$n&&(lt=vc()):(oi=Ie,fl="value"in oi?oi.value:oi.textContent,$n=!0)),at=Tc(we,gt),0<at.length&&(gt=new Ht(gt,i,null,g,Ie),Re.push({event:gt,listeners:at}),lt?gt.data=lt:(lt=yl(g),lt!==null&&(gt.data=lt)))),(lt=Sc?Wd(i,g):vl(i,g))&&(we=Tc(we,"onBeforeInput"),0<we.length&&(Ie=new Ht("onBeforeInput","beforeinput",null,g,Ie),Re.push({event:Ie,listeners:we}),Ie.data=lt))}F1(Re,l)})}function Sl(i,l,g){return{instance:i,listener:l,currentTarget:g}}function Tc(i,l){for(var g=l+"Capture",v=[];i!==null;){var S=i,N=S.stateNode;S.tag===5&&N!==null&&(S=N,N=Zn(i,g),N!=null&&v.unshift(Sl(i,N,S)),N=Zn(i,l),N!=null&&v.push(Sl(i,N,S))),i=i.return}return v}function ea(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function z1(i,l,g,v,S){for(var N=l._reactName,M=[];g!==null&&g!==v;){var q=g,Q=q.alternate,we=q.stateNode;if(Q!==null&&Q===v)break;q.tag===5&&we!==null&&(q=we,S?(Q=Zn(g,N),Q!=null&&M.unshift(Sl(g,Q,q))):S||(Q=Zn(g,N),Q!=null&&M.push(Sl(g,Q,q)))),g=g.return}M.length!==0&&i.push({event:l,listeners:M})}var rb=/\r\n?/g,ib=/\u0000|\uFFFD/g;function V1(i){return(typeof i=="string"?i:""+i).replace(rb,`
`).replace(ib,"")}function Rc(i,l,g){if(l=V1(l),V1(i)!==l&&g)throw Error(n(425))}function kc(){}var Xd=null,Yd=null;function Kd(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Zd=typeof setTimeout=="function"?setTimeout:void 0,sb=typeof clearTimeout=="function"?clearTimeout:void 0,W1=typeof Promise=="function"?Promise:void 0,ob=typeof queueMicrotask=="function"?queueMicrotask:typeof W1<"u"?function(i){return W1.resolve(null).then(i).catch(ab)}:Zd;function ab(i){setTimeout(function(){throw i})}function Qd(i,l){var g=l,v=0;do{var S=g.nextSibling;if(i.removeChild(g),S&&S.nodeType===8)if(g=S.data,g==="/$"){if(v===0){i.removeChild(S),si(l);return}v--}else g!=="$"&&g!=="$?"&&g!=="$!"||v++;g=S}while(g);si(l)}function Es(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return i}function H1(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var g=i.data;if(g==="$"||g==="$!"||g==="$?"){if(l===0)return i;l--}else g==="/$"&&l++}i=i.previousSibling}return null}var ta=Math.random().toString(36).slice(2),ki="__reactFiber$"+ta,Al="__reactProps$"+ta,Zi="__reactContainer$"+ta,Jd="__reactEvents$"+ta,lb="__reactListeners$"+ta,cb="__reactHandles$"+ta;function fo(i){var l=i[ki];if(l)return l;for(var g=i.parentNode;g;){if(l=g[Zi]||g[ki]){if(g=l.alternate,l.child!==null||g!==null&&g.child!==null)for(i=H1(i);i!==null;){if(g=i[ki])return g;i=H1(i)}return l}i=g,g=i.parentNode}return null}function _l(i){return i=i[ki]||i[Zi],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function na(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Oc(i){return i[Al]||null}var eh=[],ra=-1;function Ss(i){return{current:i}}function tn(i){0>ra||(i.current=eh[ra],eh[ra]=null,ra--)}function Zt(i,l){ra++,eh[ra]=i.current,i.current=l}var As={},tr=Ss(As),pr=Ss(!1),go=As;function ia(i,l){var g=i.type.contextTypes;if(!g)return As;var v=i.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===l)return v.__reactInternalMemoizedMaskedChildContext;var S={},N;for(N in g)S[N]=l[N];return v&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=l,i.__reactInternalMemoizedMaskedChildContext=S),S}function mr(i){return i=i.childContextTypes,i!=null}function Pc(){tn(pr),tn(tr)}function $1(i,l,g){if(tr.current!==As)throw Error(n(168));Zt(tr,l),Zt(pr,g)}function G1(i,l,g){var v=i.stateNode;if(l=l.childContextTypes,typeof v.getChildContext!="function")return g;v=v.getChildContext();for(var S in v)if(!(S in l))throw Error(n(108,pe(i)||"Unknown",S));return fe({},g,v)}function jc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||As,go=tr.current,Zt(tr,i),Zt(pr,pr.current),!0}function q1(i,l,g){var v=i.stateNode;if(!v)throw Error(n(169));g?(i=G1(i,l,go),v.__reactInternalMemoizedMergedChildContext=i,tn(pr),tn(tr),Zt(tr,i)):tn(pr),Zt(pr,g)}var Qi=null,Dc=!1,th=!1;function X1(i){Qi===null?Qi=[i]:Qi.push(i)}function ub(i){Dc=!0,X1(i)}function _s(){if(!th&&Qi!==null){th=!0;var i=0,l=Ct;try{var g=Qi;for(Ct=1;i<g.length;i++){var v=g[i];do v=v(!0);while(v!==null)}Qi=null,Dc=!1}catch(S){throw Qi!==null&&(Qi=Qi.slice(i+1)),Er(Se,_s),S}finally{Ct=l,th=!1}}return null}var sa=[],oa=0,Mc=null,Lc=0,$r=[],Gr=0,po=null,Ji=1,es="";function mo(i,l){sa[oa++]=Lc,sa[oa++]=Mc,Mc=i,Lc=l}function Y1(i,l,g){$r[Gr++]=Ji,$r[Gr++]=es,$r[Gr++]=po,po=i;var v=Ji;i=es;var S=32-ar(v)-1;v&=~(1<<S),g+=1;var N=32-ar(l)+S;if(30<N){var M=S-S%5;N=(v&(1<<M)-1).toString(32),v>>=M,S-=M,Ji=1<<32-ar(l)+S|g<<S|v,es=N+i}else Ji=1<<N|g<<S|v,es=i}function nh(i){i.return!==null&&(mo(i,1),Y1(i,1,0))}function rh(i){for(;i===Mc;)Mc=sa[--oa],sa[oa]=null,Lc=sa[--oa],sa[oa]=null;for(;i===po;)po=$r[--Gr],$r[Gr]=null,es=$r[--Gr],$r[Gr]=null,Ji=$r[--Gr],$r[Gr]=null}var Tr=null,Rr=null,sn=!1,li=null;function K1(i,l){var g=Kr(5,null,null,0);g.elementType="DELETED",g.stateNode=l,g.return=i,l=i.deletions,l===null?(i.deletions=[g],i.flags|=16):l.push(g)}function Z1(i,l){switch(i.tag){case 5:var g=i.type;return l=l.nodeType!==1||g.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(i.stateNode=l,Tr=i,Rr=Es(l.firstChild),!0):!1;case 6:return l=i.pendingProps===""||l.nodeType!==3?null:l,l!==null?(i.stateNode=l,Tr=i,Rr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(g=po!==null?{id:Ji,overflow:es}:null,i.memoizedState={dehydrated:l,treeContext:g,retryLane:1073741824},g=Kr(18,null,null,0),g.stateNode=l,g.return=i,i.child=g,Tr=i,Rr=null,!0):!1;default:return!1}}function ih(i){return(i.mode&1)!==0&&(i.flags&128)===0}function sh(i){if(sn){var l=Rr;if(l){var g=l;if(!Z1(i,l)){if(ih(i))throw Error(n(418));l=Es(g.nextSibling);var v=Tr;l&&Z1(i,l)?K1(v,g):(i.flags=i.flags&-4097|2,sn=!1,Tr=i)}}else{if(ih(i))throw Error(n(418));i.flags=i.flags&-4097|2,sn=!1,Tr=i}}}function Q1(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Tr=i}function Bc(i){if(i!==Tr)return!1;if(!sn)return Q1(i),sn=!0,!1;var l;if((l=i.tag!==3)&&!(l=i.tag!==5)&&(l=i.type,l=l!=="head"&&l!=="body"&&!Kd(i.type,i.memoizedProps)),l&&(l=Rr)){if(ih(i))throw J1(),Error(n(418));for(;l;)K1(i,l),l=Es(l.nextSibling)}if(Q1(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8){var g=i.data;if(g==="/$"){if(l===0){Rr=Es(i.nextSibling);break e}l--}else g!=="$"&&g!=="$!"&&g!=="$?"||l++}i=i.nextSibling}Rr=null}}else Rr=Tr?Es(i.stateNode.nextSibling):null;return!0}function J1(){for(var i=Rr;i;)i=Es(i.nextSibling)}function aa(){Rr=Tr=null,sn=!1}function oh(i){li===null?li=[i]:li.push(i)}var db=$.ReactCurrentBatchConfig;function Nl(i,l,g){if(i=g.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var v=g.stateNode}if(!v)throw Error(n(147,i));var S=v,N=""+i;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===N?l.ref:(l=function(M){var q=S.refs;M===null?delete q[N]:q[N]=M},l._stringRef=N,l)}if(typeof i!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,i))}return i}function Fc(i,l){throw i=Object.prototype.toString.call(l),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i))}function eg(i){var l=i._init;return l(i._payload)}function tg(i){function l(le,ne){if(i){var he=le.deletions;he===null?(le.deletions=[ne],le.flags|=16):he.push(ne)}}function g(le,ne){if(!i)return null;for(;ne!==null;)l(le,ne),ne=ne.sibling;return null}function v(le,ne){for(le=new Map;ne!==null;)ne.key!==null?le.set(ne.key,ne):le.set(ne.index,ne),ne=ne.sibling;return le}function S(le,ne){return le=js(le,ne),le.index=0,le.sibling=null,le}function N(le,ne,he){return le.index=he,i?(he=le.alternate,he!==null?(he=he.index,he<ne?(le.flags|=2,ne):he):(le.flags|=2,ne)):(le.flags|=1048576,ne)}function M(le){return i&&le.alternate===null&&(le.flags|=2),le}function q(le,ne,he,Pe){return ne===null||ne.tag!==6?(ne=Zh(he,le.mode,Pe),ne.return=le,ne):(ne=S(ne,he),ne.return=le,ne)}function Q(le,ne,he,Pe){var Ke=he.type;return Ke===V?Ie(le,ne,he.props.children,Pe,he.key):ne!==null&&(ne.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ce&&eg(Ke)===ne.type)?(Pe=S(ne,he.props),Pe.ref=Nl(le,ne,he),Pe.return=le,Pe):(Pe=cu(he.type,he.key,he.props,null,le.mode,Pe),Pe.ref=Nl(le,ne,he),Pe.return=le,Pe)}function we(le,ne,he,Pe){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==he.containerInfo||ne.stateNode.implementation!==he.implementation?(ne=Qh(he,le.mode,Pe),ne.return=le,ne):(ne=S(ne,he.children||[]),ne.return=le,ne)}function Ie(le,ne,he,Pe,Ke){return ne===null||ne.tag!==7?(ne=So(he,le.mode,Pe,Ke),ne.return=le,ne):(ne=S(ne,he),ne.return=le,ne)}function Re(le,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Zh(""+ne,le.mode,he),ne.return=le,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case se:return he=cu(ne.type,ne.key,ne.props,null,le.mode,he),he.ref=Nl(le,null,ne),he.return=le,he;case Y:return ne=Qh(ne,le.mode,he),ne.return=le,ne;case ce:var Pe=ne._init;return Re(le,Pe(ne._payload),he)}if(dr(ne)||re(ne))return ne=So(ne,le.mode,he,null),ne.return=le,ne;Fc(le,ne)}return null}function _e(le,ne,he,Pe){var Ke=ne!==null?ne.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return Ke!==null?null:q(le,ne,""+he,Pe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case se:return he.key===Ke?Q(le,ne,he,Pe):null;case Y:return he.key===Ke?we(le,ne,he,Pe):null;case ce:return Ke=he._init,_e(le,ne,Ke(he._payload),Pe)}if(dr(he)||re(he))return Ke!==null?null:Ie(le,ne,he,Pe,null);Fc(le,he)}return null}function Ue(le,ne,he,Pe,Ke){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return le=le.get(he)||null,q(ne,le,""+Pe,Ke);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case se:return le=le.get(Pe.key===null?he:Pe.key)||null,Q(ne,le,Pe,Ke);case Y:return le=le.get(Pe.key===null?he:Pe.key)||null,we(ne,le,Pe,Ke);case ce:var at=Pe._init;return Ue(le,ne,he,at(Pe._payload),Ke)}if(dr(Pe)||re(Pe))return le=le.get(he)||null,Ie(ne,le,Pe,Ke,null);Fc(ne,Pe)}return null}function He(le,ne,he,Pe){for(var Ke=null,at=null,lt=ne,gt=ne=0,Un=null;lt!==null&&gt<he.length;gt++){lt.index>gt?(Un=lt,lt=null):Un=lt.sibling;var Lt=_e(le,lt,he[gt],Pe);if(Lt===null){lt===null&&(lt=Un);break}i&&lt&&Lt.alternate===null&&l(le,lt),ne=N(Lt,ne,gt),at===null?Ke=Lt:at.sibling=Lt,at=Lt,lt=Un}if(gt===he.length)return g(le,lt),sn&&mo(le,gt),Ke;if(lt===null){for(;gt<he.length;gt++)lt=Re(le,he[gt],Pe),lt!==null&&(ne=N(lt,ne,gt),at===null?Ke=lt:at.sibling=lt,at=lt);return sn&&mo(le,gt),Ke}for(lt=v(le,lt);gt<he.length;gt++)Un=Ue(lt,le,gt,he[gt],Pe),Un!==null&&(i&&Un.alternate!==null&&lt.delete(Un.key===null?gt:Un.key),ne=N(Un,ne,gt),at===null?Ke=Un:at.sibling=Un,at=Un);return i&&lt.forEach(function(Ds){return l(le,Ds)}),sn&&mo(le,gt),Ke}function Ye(le,ne,he,Pe){var Ke=re(he);if(typeof Ke!="function")throw Error(n(150));if(he=Ke.call(he),he==null)throw Error(n(151));for(var at=Ke=null,lt=ne,gt=ne=0,Un=null,Lt=he.next();lt!==null&&!Lt.done;gt++,Lt=he.next()){lt.index>gt?(Un=lt,lt=null):Un=lt.sibling;var Ds=_e(le,lt,Lt.value,Pe);if(Ds===null){lt===null&&(lt=Un);break}i&&lt&&Ds.alternate===null&&l(le,lt),ne=N(Ds,ne,gt),at===null?Ke=Ds:at.sibling=Ds,at=Ds,lt=Un}if(Lt.done)return g(le,lt),sn&&mo(le,gt),Ke;if(lt===null){for(;!Lt.done;gt++,Lt=he.next())Lt=Re(le,Lt.value,Pe),Lt!==null&&(ne=N(Lt,ne,gt),at===null?Ke=Lt:at.sibling=Lt,at=Lt);return sn&&mo(le,gt),Ke}for(lt=v(le,lt);!Lt.done;gt++,Lt=he.next())Lt=Ue(lt,le,gt,Lt.value,Pe),Lt!==null&&(i&&Lt.alternate!==null&&lt.delete(Lt.key===null?gt:Lt.key),ne=N(Lt,ne,gt),at===null?Ke=Lt:at.sibling=Lt,at=Lt);return i&&lt.forEach(function(Hb){return l(le,Hb)}),sn&&mo(le,gt),Ke}function bn(le,ne,he,Pe){if(typeof he=="object"&&he!==null&&he.type===V&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case se:e:{for(var Ke=he.key,at=ne;at!==null;){if(at.key===Ke){if(Ke=he.type,Ke===V){if(at.tag===7){g(le,at.sibling),ne=S(at,he.props.children),ne.return=le,le=ne;break e}}else if(at.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===ce&&eg(Ke)===at.type){g(le,at.sibling),ne=S(at,he.props),ne.ref=Nl(le,at,he),ne.return=le,le=ne;break e}g(le,at);break}else l(le,at);at=at.sibling}he.type===V?(ne=So(he.props.children,le.mode,Pe,he.key),ne.return=le,le=ne):(Pe=cu(he.type,he.key,he.props,null,le.mode,Pe),Pe.ref=Nl(le,ne,he),Pe.return=le,le=Pe)}return M(le);case Y:e:{for(at=he.key;ne!==null;){if(ne.key===at)if(ne.tag===4&&ne.stateNode.containerInfo===he.containerInfo&&ne.stateNode.implementation===he.implementation){g(le,ne.sibling),ne=S(ne,he.children||[]),ne.return=le,le=ne;break e}else{g(le,ne);break}else l(le,ne);ne=ne.sibling}ne=Qh(he,le.mode,Pe),ne.return=le,le=ne}return M(le);case ce:return at=he._init,bn(le,ne,at(he._payload),Pe)}if(dr(he))return He(le,ne,he,Pe);if(re(he))return Ye(le,ne,he,Pe);Fc(le,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ne!==null&&ne.tag===6?(g(le,ne.sibling),ne=S(ne,he),ne.return=le,le=ne):(g(le,ne),ne=Zh(he,le.mode,Pe),ne.return=le,le=ne),M(le)):g(le,ne)}return bn}var la=tg(!0),ng=tg(!1),Uc=Ss(null),zc=null,ca=null,ah=null;function lh(){ah=ca=zc=null}function ch(i){var l=Uc.current;tn(Uc),i._currentValue=l}function uh(i,l,g){for(;i!==null;){var v=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),i===g)break;i=i.return}}function ua(i,l){zc=i,ah=ca=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&l)!==0&&(xr=!0),i.firstContext=null)}function qr(i){var l=i._currentValue;if(ah!==i)if(i={context:i,memoizedValue:l,next:null},ca===null){if(zc===null)throw Error(n(308));ca=i,zc.dependencies={lanes:0,firstContext:i}}else ca=ca.next=i;return l}var xo=null;function dh(i){xo===null?xo=[i]:xo.push(i)}function rg(i,l,g,v){var S=l.interleaved;return S===null?(g.next=g,dh(l)):(g.next=S.next,S.next=g),l.interleaved=g,ts(i,v)}function ts(i,l){i.lanes|=l;var g=i.alternate;for(g!==null&&(g.lanes|=l),g=i,i=i.return;i!==null;)i.childLanes|=l,g=i.alternate,g!==null&&(g.childLanes|=l),g=i,i=i.return;return g.tag===3?g.stateNode:null}var Ns=!1;function hh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ns(i,l){return{eventTime:i,lane:l,tag:0,payload:null,callback:null,next:null}}function Is(i,l,g){var v=i.updateQueue;if(v===null)return null;if(v=v.shared,(Mt&2)!==0){var S=v.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),v.pending=l,ts(i,g)}return S=v.interleaved,S===null?(l.next=l,dh(v)):(l.next=S.next,S.next=l),v.interleaved=l,ts(i,g)}function Vc(i,l,g){if(l=l.updateQueue,l!==null&&(l=l.shared,(g&4194240)!==0)){var v=l.lanes;v&=i.pendingLanes,g|=v,l.lanes=g,fn(i,g)}}function sg(i,l){var g=i.updateQueue,v=i.alternate;if(v!==null&&(v=v.updateQueue,g===v)){var S=null,N=null;if(g=g.firstBaseUpdate,g!==null){do{var M={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};N===null?S=N=M:N=N.next=M,g=g.next}while(g!==null);N===null?S=N=l:N=N.next=l}else S=N=l;g={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:N,shared:v.shared,effects:v.effects},i.updateQueue=g;return}i=g.lastBaseUpdate,i===null?g.firstBaseUpdate=l:i.next=l,g.lastBaseUpdate=l}function Wc(i,l,g,v){var S=i.updateQueue;Ns=!1;var N=S.firstBaseUpdate,M=S.lastBaseUpdate,q=S.shared.pending;if(q!==null){S.shared.pending=null;var Q=q,we=Q.next;Q.next=null,M===null?N=we:M.next=we,M=Q;var Ie=i.alternate;Ie!==null&&(Ie=Ie.updateQueue,q=Ie.lastBaseUpdate,q!==M&&(q===null?Ie.firstBaseUpdate=we:q.next=we,Ie.lastBaseUpdate=Q))}if(N!==null){var Re=S.baseState;M=0,Ie=we=Q=null,q=N;do{var _e=q.lane,Ue=q.eventTime;if((v&_e)===_e){Ie!==null&&(Ie=Ie.next={eventTime:Ue,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var He=i,Ye=q;switch(_e=l,Ue=g,Ye.tag){case 1:if(He=Ye.payload,typeof He=="function"){Re=He.call(Ue,Re,_e);break e}Re=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ye.payload,_e=typeof He=="function"?He.call(Ue,Re,_e):He,_e==null)break e;Re=fe({},Re,_e);break e;case 2:Ns=!0}}q.callback!==null&&q.lane!==0&&(i.flags|=64,_e=S.effects,_e===null?S.effects=[q]:_e.push(q))}else Ue={eventTime:Ue,lane:_e,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Ie===null?(we=Ie=Ue,Q=Re):Ie=Ie.next=Ue,M|=_e;if(q=q.next,q===null){if(q=S.shared.pending,q===null)break;_e=q,q=_e.next,_e.next=null,S.lastBaseUpdate=_e,S.shared.pending=null}}while(!0);if(Ie===null&&(Q=Re),S.baseState=Q,S.firstBaseUpdate=we,S.lastBaseUpdate=Ie,l=S.shared.interleaved,l!==null){S=l;do M|=S.lane,S=S.next;while(S!==l)}else N===null&&(S.shared.lanes=0);vo|=M,i.lanes=M,i.memoizedState=Re}}function og(i,l,g){if(i=l.effects,l.effects=null,i!==null)for(l=0;l<i.length;l++){var v=i[l],S=v.callback;if(S!==null){if(v.callback=null,v=g,typeof S!="function")throw Error(n(191,S));S.call(v)}}}var Il={},Oi=Ss(Il),Tl=Ss(Il),Rl=Ss(Il);function wo(i){if(i===Il)throw Error(n(174));return i}function fh(i,l){switch(Zt(Rl,l),Zt(Tl,i),Zt(Oi,Il),i=l.nodeType,i){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Fr(null,"");break;default:i=i===8?l.parentNode:l,l=i.namespaceURI||null,i=i.tagName,l=Fr(l,i)}tn(Oi),Zt(Oi,l)}function da(){tn(Oi),tn(Tl),tn(Rl)}function ag(i){wo(Rl.current);var l=wo(Oi.current),g=Fr(l,i.type);l!==g&&(Zt(Tl,i),Zt(Oi,g))}function gh(i){Tl.current===i&&(tn(Oi),tn(Tl))}var cn=Ss(0);function Hc(i){for(var l=i;l!==null;){if(l.tag===13){var g=l.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ph=[];function mh(){for(var i=0;i<ph.length;i++)ph[i]._workInProgressVersionPrimary=null;ph.length=0}var $c=$.ReactCurrentDispatcher,xh=$.ReactCurrentBatchConfig,yo=0,un=null,kn=null,Bn=null,Gc=!1,kl=!1,Ol=0,hb=0;function nr(){throw Error(n(321))}function wh(i,l){if(l===null)return!1;for(var g=0;g<l.length&&g<i.length;g++)if(!oe(i[g],l[g]))return!1;return!0}function yh(i,l,g,v,S,N){if(yo=N,un=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$c.current=i===null||i.memoizedState===null?mb:xb,i=g(v,S),kl){N=0;do{if(kl=!1,Ol=0,25<=N)throw Error(n(301));N+=1,Bn=kn=null,l.updateQueue=null,$c.current=wb,i=g(v,S)}while(kl)}if($c.current=Yc,l=kn!==null&&kn.next!==null,yo=0,Bn=kn=un=null,Gc=!1,l)throw Error(n(300));return i}function vh(){var i=Ol!==0;return Ol=0,i}function Pi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?un.memoizedState=Bn=i:Bn=Bn.next=i,Bn}function Xr(){if(kn===null){var i=un.alternate;i=i!==null?i.memoizedState:null}else i=kn.next;var l=Bn===null?un.memoizedState:Bn.next;if(l!==null)Bn=l,kn=i;else{if(i===null)throw Error(n(310));kn=i,i={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Bn===null?un.memoizedState=Bn=i:Bn=Bn.next=i}return Bn}function Pl(i,l){return typeof l=="function"?l(i):l}function bh(i){var l=Xr(),g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var v=kn,S=v.baseQueue,N=g.pending;if(N!==null){if(S!==null){var M=S.next;S.next=N.next,N.next=M}v.baseQueue=S=N,g.pending=null}if(S!==null){N=S.next,v=v.baseState;var q=M=null,Q=null,we=N;do{var Ie=we.lane;if((yo&Ie)===Ie)Q!==null&&(Q=Q.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),v=we.hasEagerState?we.eagerState:i(v,we.action);else{var Re={lane:Ie,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};Q===null?(q=Q=Re,M=v):Q=Q.next=Re,un.lanes|=Ie,vo|=Ie}we=we.next}while(we!==null&&we!==N);Q===null?M=v:Q.next=q,oe(v,l.memoizedState)||(xr=!0),l.memoizedState=v,l.baseState=M,l.baseQueue=Q,g.lastRenderedState=v}if(i=g.interleaved,i!==null){S=i;do N=S.lane,un.lanes|=N,vo|=N,S=S.next;while(S!==i)}else S===null&&(g.lanes=0);return[l.memoizedState,g.dispatch]}function Ch(i){var l=Xr(),g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=i;var v=g.dispatch,S=g.pending,N=l.memoizedState;if(S!==null){g.pending=null;var M=S=S.next;do N=i(N,M.action),M=M.next;while(M!==S);oe(N,l.memoizedState)||(xr=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),g.lastRenderedState=N}return[N,v]}function lg(){}function cg(i,l){var g=un,v=Xr(),S=l(),N=!oe(v.memoizedState,S);if(N&&(v.memoizedState=S,xr=!0),v=v.queue,Eh(hg.bind(null,g,v,i),[i]),v.getSnapshot!==l||N||Bn!==null&&Bn.memoizedState.tag&1){if(g.flags|=2048,jl(9,dg.bind(null,g,v,S,l),void 0,null),Fn===null)throw Error(n(349));(yo&30)!==0||ug(g,l,S)}return S}function ug(i,l,g){i.flags|=16384,i={getSnapshot:l,value:g},l=un.updateQueue,l===null?(l={lastEffect:null,stores:null},un.updateQueue=l,l.stores=[i]):(g=l.stores,g===null?l.stores=[i]:g.push(i))}function dg(i,l,g,v){l.value=g,l.getSnapshot=v,fg(l)&&gg(i)}function hg(i,l,g){return g(function(){fg(l)&&gg(i)})}function fg(i){var l=i.getSnapshot;i=i.value;try{var g=l();return!oe(i,g)}catch{return!0}}function gg(i){var l=ts(i,1);l!==null&&hi(l,i,1,-1)}function pg(i){var l=Pi();return typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:i},l.queue=i,i=i.dispatch=pb.bind(null,un,i),[l.memoizedState,i]}function jl(i,l,g,v){return i={tag:i,create:l,destroy:g,deps:v,next:null},l=un.updateQueue,l===null?(l={lastEffect:null,stores:null},un.updateQueue=l,l.lastEffect=i.next=i):(g=l.lastEffect,g===null?l.lastEffect=i.next=i:(v=g.next,g.next=i,i.next=v,l.lastEffect=i)),i}function mg(){return Xr().memoizedState}function qc(i,l,g,v){var S=Pi();un.flags|=i,S.memoizedState=jl(1|l,g,void 0,v===void 0?null:v)}function Xc(i,l,g,v){var S=Xr();v=v===void 0?null:v;var N=void 0;if(kn!==null){var M=kn.memoizedState;if(N=M.destroy,v!==null&&wh(v,M.deps)){S.memoizedState=jl(l,g,N,v);return}}un.flags|=i,S.memoizedState=jl(1|l,g,N,v)}function xg(i,l){return qc(8390656,8,i,l)}function Eh(i,l){return Xc(2048,8,i,l)}function wg(i,l){return Xc(4,2,i,l)}function yg(i,l){return Xc(4,4,i,l)}function vg(i,l){if(typeof l=="function")return i=i(),l(i),function(){l(null)};if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function bg(i,l,g){return g=g!=null?g.concat([i]):null,Xc(4,4,vg.bind(null,l,i),g)}function Sh(){}function Cg(i,l){var g=Xr();l=l===void 0?null:l;var v=g.memoizedState;return v!==null&&l!==null&&wh(l,v[1])?v[0]:(g.memoizedState=[i,l],i)}function Eg(i,l){var g=Xr();l=l===void 0?null:l;var v=g.memoizedState;return v!==null&&l!==null&&wh(l,v[1])?v[0]:(i=i(),g.memoizedState=[i,l],i)}function Sg(i,l,g){return(yo&21)===0?(i.baseState&&(i.baseState=!1,xr=!0),i.memoizedState=g):(oe(g,l)||(g=Nn(),un.lanes|=g,vo|=g,i.baseState=!0),l)}function fb(i,l){var g=Ct;Ct=g!==0&&4>g?g:4,i(!0);var v=xh.transition;xh.transition={};try{i(!1),l()}finally{Ct=g,xh.transition=v}}function Ag(){return Xr().memoizedState}function gb(i,l,g){var v=Os(i);if(g={lane:v,action:g,hasEagerState:!1,eagerState:null,next:null},_g(i))Ng(l,g);else if(g=rg(i,l,g,v),g!==null){var S=cr();hi(g,i,v,S),Ig(g,l,v)}}function pb(i,l,g){var v=Os(i),S={lane:v,action:g,hasEagerState:!1,eagerState:null,next:null};if(_g(i))Ng(l,S);else{var N=i.alternate;if(i.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var M=l.lastRenderedState,q=N(M,g);if(S.hasEagerState=!0,S.eagerState=q,oe(q,M)){var Q=l.interleaved;Q===null?(S.next=S,dh(l)):(S.next=Q.next,Q.next=S),l.interleaved=S;return}}catch{}finally{}g=rg(i,l,S,v),g!==null&&(S=cr(),hi(g,i,v,S),Ig(g,l,v))}}function _g(i){var l=i.alternate;return i===un||l!==null&&l===un}function Ng(i,l){kl=Gc=!0;var g=i.pending;g===null?l.next=l:(l.next=g.next,g.next=l),i.pending=l}function Ig(i,l,g){if((g&4194240)!==0){var v=l.lanes;v&=i.pendingLanes,g|=v,l.lanes=g,fn(i,g)}}var Yc={readContext:qr,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useInsertionEffect:nr,useLayoutEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useMutableSource:nr,useSyncExternalStore:nr,useId:nr,unstable_isNewReconciler:!1},mb={readContext:qr,useCallback:function(i,l){return Pi().memoizedState=[i,l===void 0?null:l],i},useContext:qr,useEffect:xg,useImperativeHandle:function(i,l,g){return g=g!=null?g.concat([i]):null,qc(4194308,4,vg.bind(null,l,i),g)},useLayoutEffect:function(i,l){return qc(4194308,4,i,l)},useInsertionEffect:function(i,l){return qc(4,2,i,l)},useMemo:function(i,l){var g=Pi();return l=l===void 0?null:l,i=i(),g.memoizedState=[i,l],i},useReducer:function(i,l,g){var v=Pi();return l=g!==void 0?g(l):l,v.memoizedState=v.baseState=l,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:l},v.queue=i,i=i.dispatch=gb.bind(null,un,i),[v.memoizedState,i]},useRef:function(i){var l=Pi();return i={current:i},l.memoizedState=i},useState:pg,useDebugValue:Sh,useDeferredValue:function(i){return Pi().memoizedState=i},useTransition:function(){var i=pg(!1),l=i[0];return i=fb.bind(null,i[1]),Pi().memoizedState=i,[l,i]},useMutableSource:function(){},useSyncExternalStore:function(i,l,g){var v=un,S=Pi();if(sn){if(g===void 0)throw Error(n(407));g=g()}else{if(g=l(),Fn===null)throw Error(n(349));(yo&30)!==0||ug(v,l,g)}S.memoizedState=g;var N={value:g,getSnapshot:l};return S.queue=N,xg(hg.bind(null,v,N,i),[i]),v.flags|=2048,jl(9,dg.bind(null,v,N,g,l),void 0,null),g},useId:function(){var i=Pi(),l=Fn.identifierPrefix;if(sn){var g=es,v=Ji;g=(v&~(1<<32-ar(v)-1)).toString(32)+g,l=":"+l+"R"+g,g=Ol++,0<g&&(l+="H"+g.toString(32)),l+=":"}else g=hb++,l=":"+l+"r"+g.toString(32)+":";return i.memoizedState=l},unstable_isNewReconciler:!1},xb={readContext:qr,useCallback:Cg,useContext:qr,useEffect:Eh,useImperativeHandle:bg,useInsertionEffect:wg,useLayoutEffect:yg,useMemo:Eg,useReducer:bh,useRef:mg,useState:function(){return bh(Pl)},useDebugValue:Sh,useDeferredValue:function(i){var l=Xr();return Sg(l,kn.memoizedState,i)},useTransition:function(){var i=bh(Pl)[0],l=Xr().memoizedState;return[i,l]},useMutableSource:lg,useSyncExternalStore:cg,useId:Ag,unstable_isNewReconciler:!1},wb={readContext:qr,useCallback:Cg,useContext:qr,useEffect:Eh,useImperativeHandle:bg,useInsertionEffect:wg,useLayoutEffect:yg,useMemo:Eg,useReducer:Ch,useRef:mg,useState:function(){return Ch(Pl)},useDebugValue:Sh,useDeferredValue:function(i){var l=Xr();return kn===null?l.memoizedState=i:Sg(l,kn.memoizedState,i)},useTransition:function(){var i=Ch(Pl)[0],l=Xr().memoizedState;return[i,l]},useMutableSource:lg,useSyncExternalStore:cg,useId:Ag,unstable_isNewReconciler:!1};function ci(i,l){if(i&&i.defaultProps){l=fe({},l),i=i.defaultProps;for(var g in i)l[g]===void 0&&(l[g]=i[g]);return l}return l}function Ah(i,l,g,v){l=i.memoizedState,g=g(v,l),g=g==null?l:fe({},l,g),i.memoizedState=g,i.lanes===0&&(i.updateQueue.baseState=g)}var Kc={isMounted:function(i){return(i=i._reactInternals)?gr(i)===i:!1},enqueueSetState:function(i,l,g){i=i._reactInternals;var v=cr(),S=Os(i),N=ns(v,S);N.payload=l,g!=null&&(N.callback=g),l=Is(i,N,S),l!==null&&(hi(l,i,S,v),Vc(l,i,S))},enqueueReplaceState:function(i,l,g){i=i._reactInternals;var v=cr(),S=Os(i),N=ns(v,S);N.tag=1,N.payload=l,g!=null&&(N.callback=g),l=Is(i,N,S),l!==null&&(hi(l,i,S,v),Vc(l,i,S))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var g=cr(),v=Os(i),S=ns(g,v);S.tag=2,l!=null&&(S.callback=l),l=Is(i,S,v),l!==null&&(hi(l,i,v,g),Vc(l,i,v))}};function Tg(i,l,g,v,S,N,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(v,N,M):l.prototype&&l.prototype.isPureReactComponent?!me(g,v)||!me(S,N):!0}function Rg(i,l,g){var v=!1,S=As,N=l.contextType;return typeof N=="object"&&N!==null?N=qr(N):(S=mr(l)?go:tr.current,v=l.contextTypes,N=(v=v!=null)?ia(i,S):As),l=new l(g,N),i.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Kc,i.stateNode=l,l._reactInternals=i,v&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=S,i.__reactInternalMemoizedMaskedChildContext=N),l}function kg(i,l,g,v){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(g,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(g,v),l.state!==i&&Kc.enqueueReplaceState(l,l.state,null)}function _h(i,l,g,v){var S=i.stateNode;S.props=g,S.state=i.memoizedState,S.refs={},hh(i);var N=l.contextType;typeof N=="object"&&N!==null?S.context=qr(N):(N=mr(l)?go:tr.current,S.context=ia(i,N)),S.state=i.memoizedState,N=l.getDerivedStateFromProps,typeof N=="function"&&(Ah(i,l,N,g),S.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&Kc.enqueueReplaceState(S,S.state,null),Wc(i,g,S,v),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308)}function ha(i,l){try{var g="",v=l;do g+=Fe(v),v=v.return;while(v);var S=g}catch(N){S=`
Error generating stack: `+N.message+`
`+N.stack}return{value:i,source:l,stack:S,digest:null}}function Nh(i,l,g){return{value:i,source:null,stack:g??null,digest:l??null}}function Ih(i,l){try{console.error(l.value)}catch(g){setTimeout(function(){throw g})}}var yb=typeof WeakMap=="function"?WeakMap:Map;function Og(i,l,g){g=ns(-1,g),g.tag=3,g.payload={element:null};var v=l.value;return g.callback=function(){ru||(ru=!0,Wh=v),Ih(i,l)},g}function Pg(i,l,g){g=ns(-1,g),g.tag=3;var v=i.type.getDerivedStateFromError;if(typeof v=="function"){var S=l.value;g.payload=function(){return v(S)},g.callback=function(){Ih(i,l)}}var N=i.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(g.callback=function(){Ih(i,l),typeof v!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),g}function jg(i,l,g){var v=i.pingCache;if(v===null){v=i.pingCache=new yb;var S=new Set;v.set(l,S)}else S=v.get(l),S===void 0&&(S=new Set,v.set(l,S));S.has(g)||(S.add(g),i=Pb.bind(null,i,l,g),l.then(i,i))}function Dg(i){do{var l;if((l=i.tag===13)&&(l=i.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return i;i=i.return}while(i!==null);return null}function Mg(i,l,g,v,S){return(i.mode&1)===0?(i===l?i.flags|=65536:(i.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(l=ns(-1,1),l.tag=2,Is(g,l,1))),g.lanes|=1),i):(i.flags|=65536,i.lanes=S,i)}var vb=$.ReactCurrentOwner,xr=!1;function lr(i,l,g,v){l.child=i===null?ng(l,null,g,v):la(l,i.child,g,v)}function Lg(i,l,g,v,S){g=g.render;var N=l.ref;return ua(l,S),v=yh(i,l,g,v,N,S),g=vh(),i!==null&&!xr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~S,rs(i,l,S)):(sn&&g&&nh(l),l.flags|=1,lr(i,l,v,S),l.child)}function Bg(i,l,g,v,S){if(i===null){var N=g.type;return typeof N=="function"&&!Kh(N)&&N.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(l.tag=15,l.type=N,Fg(i,l,N,v,S)):(i=cu(g.type,null,v,l,l.mode,S),i.ref=l.ref,i.return=l,l.child=i)}if(N=i.child,(i.lanes&S)===0){var M=N.memoizedProps;if(g=g.compare,g=g!==null?g:me,g(M,v)&&i.ref===l.ref)return rs(i,l,S)}return l.flags|=1,i=js(N,v),i.ref=l.ref,i.return=l,l.child=i}function Fg(i,l,g,v,S){if(i!==null){var N=i.memoizedProps;if(me(N,v)&&i.ref===l.ref)if(xr=!1,l.pendingProps=v=N,(i.lanes&S)!==0)(i.flags&131072)!==0&&(xr=!0);else return l.lanes=i.lanes,rs(i,l,S)}return Th(i,l,g,v,S)}function Ug(i,l,g){var v=l.pendingProps,S=v.children,N=i!==null?i.memoizedState:null;if(v.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(ga,kr),kr|=g;else{if((g&1073741824)===0)return i=N!==null?N.baseLanes|g:g,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:i,cachePool:null,transitions:null},l.updateQueue=null,Zt(ga,kr),kr|=i,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=N!==null?N.baseLanes:g,Zt(ga,kr),kr|=v}else N!==null?(v=N.baseLanes|g,l.memoizedState=null):v=g,Zt(ga,kr),kr|=v;return lr(i,l,S,g),l.child}function zg(i,l){var g=l.ref;(i===null&&g!==null||i!==null&&i.ref!==g)&&(l.flags|=512,l.flags|=2097152)}function Th(i,l,g,v,S){var N=mr(g)?go:tr.current;return N=ia(l,N),ua(l,S),g=yh(i,l,g,v,N,S),v=vh(),i!==null&&!xr?(l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~S,rs(i,l,S)):(sn&&v&&nh(l),l.flags|=1,lr(i,l,g,S),l.child)}function Vg(i,l,g,v,S){if(mr(g)){var N=!0;jc(l)}else N=!1;if(ua(l,S),l.stateNode===null)Qc(i,l),Rg(l,g,v),_h(l,g,v,S),v=!0;else if(i===null){var M=l.stateNode,q=l.memoizedProps;M.props=q;var Q=M.context,we=g.contextType;typeof we=="object"&&we!==null?we=qr(we):(we=mr(g)?go:tr.current,we=ia(l,we));var Ie=g.getDerivedStateFromProps,Re=typeof Ie=="function"||typeof M.getSnapshotBeforeUpdate=="function";Re||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(q!==v||Q!==we)&&kg(l,M,v,we),Ns=!1;var _e=l.memoizedState;M.state=_e,Wc(l,v,M,S),Q=l.memoizedState,q!==v||_e!==Q||pr.current||Ns?(typeof Ie=="function"&&(Ah(l,g,Ie,v),Q=l.memoizedState),(q=Ns||Tg(l,g,q,v,_e,Q,we))?(Re||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=Q),M.props=v,M.state=Q,M.context=we,v=q):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{M=l.stateNode,ig(i,l),q=l.memoizedProps,we=l.type===l.elementType?q:ci(l.type,q),M.props=we,Re=l.pendingProps,_e=M.context,Q=g.contextType,typeof Q=="object"&&Q!==null?Q=qr(Q):(Q=mr(g)?go:tr.current,Q=ia(l,Q));var Ue=g.getDerivedStateFromProps;(Ie=typeof Ue=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(q!==Re||_e!==Q)&&kg(l,M,v,Q),Ns=!1,_e=l.memoizedState,M.state=_e,Wc(l,v,M,S);var He=l.memoizedState;q!==Re||_e!==He||pr.current||Ns?(typeof Ue=="function"&&(Ah(l,g,Ue,v),He=l.memoizedState),(we=Ns||Tg(l,g,we,v,_e,He,Q)||!1)?(Ie||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(v,He,Q),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(v,He,Q)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||q===i.memoizedProps&&_e===i.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&_e===i.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=He),M.props=v,M.state=He,M.context=Q,v=we):(typeof M.componentDidUpdate!="function"||q===i.memoizedProps&&_e===i.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||q===i.memoizedProps&&_e===i.memoizedState||(l.flags|=1024),v=!1)}return Rh(i,l,g,v,N,S)}function Rh(i,l,g,v,S,N){zg(i,l);var M=(l.flags&128)!==0;if(!v&&!M)return S&&q1(l,g,!1),rs(i,l,N);v=l.stateNode,vb.current=l;var q=M&&typeof g.getDerivedStateFromError!="function"?null:v.render();return l.flags|=1,i!==null&&M?(l.child=la(l,i.child,null,N),l.child=la(l,null,q,N)):lr(i,l,q,N),l.memoizedState=v.state,S&&q1(l,g,!0),l.child}function Wg(i){var l=i.stateNode;l.pendingContext?$1(i,l.pendingContext,l.pendingContext!==l.context):l.context&&$1(i,l.context,!1),fh(i,l.containerInfo)}function Hg(i,l,g,v,S){return aa(),oh(S),l.flags|=256,lr(i,l,g,v),l.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Oh(i){return{baseLanes:i,cachePool:null,transitions:null}}function $g(i,l,g){var v=l.pendingProps,S=cn.current,N=!1,M=(l.flags&128)!==0,q;if((q=M)||(q=i!==null&&i.memoizedState===null?!1:(S&2)!==0),q?(N=!0,l.flags&=-129):(i===null||i.memoizedState!==null)&&(S|=1),Zt(cn,S&1),i===null)return sh(l),i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((l.mode&1)===0?l.lanes=1:i.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(M=v.children,i=v.fallback,N?(v=l.mode,N=l.child,M={mode:"hidden",children:M},(v&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=M):N=uu(M,v,0,null),i=So(i,v,g,null),N.return=l,i.return=l,N.sibling=i,l.child=N,l.child.memoizedState=Oh(g),l.memoizedState=kh,i):Ph(l,M));if(S=i.memoizedState,S!==null&&(q=S.dehydrated,q!==null))return bb(i,l,M,v,q,S,g);if(N){N=v.fallback,M=l.mode,S=i.child,q=S.sibling;var Q={mode:"hidden",children:v.children};return(M&1)===0&&l.child!==S?(v=l.child,v.childLanes=0,v.pendingProps=Q,l.deletions=null):(v=js(S,Q),v.subtreeFlags=S.subtreeFlags&14680064),q!==null?N=js(q,N):(N=So(N,M,g,null),N.flags|=2),N.return=l,v.return=l,v.sibling=N,l.child=v,v=N,N=l.child,M=i.child.memoizedState,M=M===null?Oh(g):{baseLanes:M.baseLanes|g,cachePool:null,transitions:M.transitions},N.memoizedState=M,N.childLanes=i.childLanes&~g,l.memoizedState=kh,v}return N=i.child,i=N.sibling,v=js(N,{mode:"visible",children:v.children}),(l.mode&1)===0&&(v.lanes=g),v.return=l,v.sibling=null,i!==null&&(g=l.deletions,g===null?(l.deletions=[i],l.flags|=16):g.push(i)),l.child=v,l.memoizedState=null,v}function Ph(i,l){return l=uu({mode:"visible",children:l},i.mode,0,null),l.return=i,i.child=l}function Zc(i,l,g,v){return v!==null&&oh(v),la(l,i.child,null,g),i=Ph(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function bb(i,l,g,v,S,N,M){if(g)return l.flags&256?(l.flags&=-257,v=Nh(Error(n(422))),Zc(i,l,M,v)):l.memoizedState!==null?(l.child=i.child,l.flags|=128,null):(N=v.fallback,S=l.mode,v=uu({mode:"visible",children:v.children},S,0,null),N=So(N,S,M,null),N.flags|=2,v.return=l,N.return=l,v.sibling=N,l.child=v,(l.mode&1)!==0&&la(l,i.child,null,M),l.child.memoizedState=Oh(M),l.memoizedState=kh,N);if((l.mode&1)===0)return Zc(i,l,M,null);if(S.data==="$!"){if(v=S.nextSibling&&S.nextSibling.dataset,v)var q=v.dgst;return v=q,N=Error(n(419)),v=Nh(N,v,void 0),Zc(i,l,M,v)}if(q=(M&i.childLanes)!==0,xr||q){if(v=Fn,v!==null){switch(M&-M){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(v.suspendedLanes|M))!==0?0:S,S!==0&&S!==N.retryLane&&(N.retryLane=S,ts(i,S),hi(v,i,S,-1))}return Yh(),v=Nh(Error(n(421))),Zc(i,l,M,v)}return S.data==="$?"?(l.flags|=128,l.child=i.child,l=jb.bind(null,i),S._reactRetry=l,null):(i=N.treeContext,Rr=Es(S.nextSibling),Tr=l,sn=!0,li=null,i!==null&&($r[Gr++]=Ji,$r[Gr++]=es,$r[Gr++]=po,Ji=i.id,es=i.overflow,po=l),l=Ph(l,v.children),l.flags|=4096,l)}function Gg(i,l,g){i.lanes|=l;var v=i.alternate;v!==null&&(v.lanes|=l),uh(i.return,l,g)}function jh(i,l,g,v,S){var N=i.memoizedState;N===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:g,tailMode:S}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=v,N.tail=g,N.tailMode=S)}function qg(i,l,g){var v=l.pendingProps,S=v.revealOrder,N=v.tail;if(lr(i,l,v.children,g),v=cn.current,(v&2)!==0)v=v&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Gg(i,g,l);else if(i.tag===19)Gg(i,g,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}v&=1}if(Zt(cn,v),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(g=l.child,S=null;g!==null;)i=g.alternate,i!==null&&Hc(i)===null&&(S=g),g=g.sibling;g=S,g===null?(S=l.child,l.child=null):(S=g.sibling,g.sibling=null),jh(l,!1,S,g,N);break;case"backwards":for(g=null,S=l.child,l.child=null;S!==null;){if(i=S.alternate,i!==null&&Hc(i)===null){l.child=S;break}i=S.sibling,S.sibling=g,g=S,S=i}jh(l,!0,g,null,N);break;case"together":jh(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Qc(i,l){(l.mode&1)===0&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=2)}function rs(i,l,g){if(i!==null&&(l.dependencies=i.dependencies),vo|=l.lanes,(g&l.childLanes)===0)return null;if(i!==null&&l.child!==i.child)throw Error(n(153));if(l.child!==null){for(i=l.child,g=js(i,i.pendingProps),l.child=g,g.return=l;i.sibling!==null;)i=i.sibling,g=g.sibling=js(i,i.pendingProps),g.return=l;g.sibling=null}return l.child}function Cb(i,l,g){switch(l.tag){case 3:Wg(l),aa();break;case 5:ag(l);break;case 1:mr(l.type)&&jc(l);break;case 4:fh(l,l.stateNode.containerInfo);break;case 10:var v=l.type._context,S=l.memoizedProps.value;Zt(Uc,v._currentValue),v._currentValue=S;break;case 13:if(v=l.memoizedState,v!==null)return v.dehydrated!==null?(Zt(cn,cn.current&1),l.flags|=128,null):(g&l.child.childLanes)!==0?$g(i,l,g):(Zt(cn,cn.current&1),i=rs(i,l,g),i!==null?i.sibling:null);Zt(cn,cn.current&1);break;case 19:if(v=(g&l.childLanes)!==0,(i.flags&128)!==0){if(v)return qg(i,l,g);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Zt(cn,cn.current),v)break;return null;case 22:case 23:return l.lanes=0,Ug(i,l,g)}return rs(i,l,g)}var Xg,Dh,Yg,Kg;Xg=function(i,l){for(var g=l.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===l)break;for(;g.sibling===null;){if(g.return===null||g.return===l)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Dh=function(){},Yg=function(i,l,g,v){var S=i.memoizedProps;if(S!==v){i=l.stateNode,wo(Oi.current);var N=null;switch(g){case"input":S=on(i,S),v=on(i,v),N=[];break;case"select":S=fe({},S,{value:void 0}),v=fe({},v,{value:void 0}),N=[];break;case"textarea":S=ri(i,S),v=ri(i,v),N=[];break;default:typeof S.onClick!="function"&&typeof v.onClick=="function"&&(i.onclick=kc)}Bt(g,v);var M;g=null;for(we in S)if(!v.hasOwnProperty(we)&&S.hasOwnProperty(we)&&S[we]!=null)if(we==="style"){var q=S[we];for(M in q)q.hasOwnProperty(M)&&(g||(g={}),g[M]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(c.hasOwnProperty(we)?N||(N=[]):(N=N||[]).push(we,null));for(we in v){var Q=v[we];if(q=S?.[we],v.hasOwnProperty(we)&&Q!==q&&(Q!=null||q!=null))if(we==="style")if(q){for(M in q)!q.hasOwnProperty(M)||Q&&Q.hasOwnProperty(M)||(g||(g={}),g[M]="");for(M in Q)Q.hasOwnProperty(M)&&q[M]!==Q[M]&&(g||(g={}),g[M]=Q[M])}else g||(N||(N=[]),N.push(we,g)),g=Q;else we==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,q=q?q.__html:void 0,Q!=null&&q!==Q&&(N=N||[]).push(we,Q)):we==="children"?typeof Q!="string"&&typeof Q!="number"||(N=N||[]).push(we,""+Q):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(c.hasOwnProperty(we)?(Q!=null&&we==="onScroll"&&en("scroll",i),N||q===Q||(N=[])):(N=N||[]).push(we,Q))}g&&(N=N||[]).push("style",g);var we=N;(l.updateQueue=we)&&(l.flags|=4)}},Kg=function(i,l,g,v){g!==v&&(l.flags|=4)};function Dl(i,l){if(!sn)switch(i.tailMode){case"hidden":l=i.tail;for(var g=null;l!==null;)l.alternate!==null&&(g=l),l=l.sibling;g===null?i.tail=null:g.sibling=null;break;case"collapsed":g=i.tail;for(var v=null;g!==null;)g.alternate!==null&&(v=g),g=g.sibling;v===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:v.sibling=null}}function rr(i){var l=i.alternate!==null&&i.alternate.child===i.child,g=0,v=0;if(l)for(var S=i.child;S!==null;)g|=S.lanes|S.childLanes,v|=S.subtreeFlags&14680064,v|=S.flags&14680064,S.return=i,S=S.sibling;else for(S=i.child;S!==null;)g|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=i,S=S.sibling;return i.subtreeFlags|=v,i.childLanes=g,l}function Eb(i,l,g){var v=l.pendingProps;switch(rh(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(l),null;case 1:return mr(l.type)&&Pc(),rr(l),null;case 3:return v=l.stateNode,da(),tn(pr),tn(tr),mh(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(i===null||i.child===null)&&(Bc(l)?l.flags|=4:i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,li!==null&&(Gh(li),li=null))),Dh(i,l),rr(l),null;case 5:gh(l);var S=wo(Rl.current);if(g=l.type,i!==null&&l.stateNode!=null)Yg(i,l,g,v,S),i.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!v){if(l.stateNode===null)throw Error(n(166));return rr(l),null}if(i=wo(Oi.current),Bc(l)){v=l.stateNode,g=l.type;var N=l.memoizedProps;switch(v[ki]=l,v[Al]=N,i=(l.mode&1)!==0,g){case"dialog":en("cancel",v),en("close",v);break;case"iframe":case"object":case"embed":en("load",v);break;case"video":case"audio":for(S=0;S<Cl.length;S++)en(Cl[S],v);break;case"source":en("error",v);break;case"img":case"image":case"link":en("error",v),en("load",v);break;case"details":en("toggle",v);break;case"input":je(v,N),en("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!N.multiple},en("invalid",v);break;case"textarea":Hi(v,N),en("invalid",v)}Bt(g,N),S=null;for(var M in N)if(N.hasOwnProperty(M)){var q=N[M];M==="children"?typeof q=="string"?v.textContent!==q&&(N.suppressHydrationWarning!==!0&&Rc(v.textContent,q,i),S=["children",q]):typeof q=="number"&&v.textContent!==""+q&&(N.suppressHydrationWarning!==!0&&Rc(v.textContent,q,i),S=["children",""+q]):c.hasOwnProperty(M)&&q!=null&&M==="onScroll"&&en("scroll",v)}switch(g){case"input":tt(v),st(v,N,!0);break;case"textarea":tt(v),zn(v);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(v.onclick=kc)}v=S,l.updateQueue=v,v!==null&&(l.flags|=4)}else{M=S.nodeType===9?S:S.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Dn(g)),i==="http://www.w3.org/1999/xhtml"?g==="script"?(i=M.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof v.is=="string"?i=M.createElement(g,{is:v.is}):(i=M.createElement(g),g==="select"&&(M=i,v.multiple?M.multiple=!0:v.size&&(M.size=v.size))):i=M.createElementNS(i,g),i[ki]=l,i[Al]=v,Xg(i,l,!1,!1),l.stateNode=i;e:{switch(M=qt(g,v),g){case"dialog":en("cancel",i),en("close",i),S=v;break;case"iframe":case"object":case"embed":en("load",i),S=v;break;case"video":case"audio":for(S=0;S<Cl.length;S++)en(Cl[S],i);S=v;break;case"source":en("error",i),S=v;break;case"img":case"image":case"link":en("error",i),en("load",i),S=v;break;case"details":en("toggle",i),S=v;break;case"input":je(i,v),S=on(i,v),en("invalid",i);break;case"option":S=v;break;case"select":i._wrapperState={wasMultiple:!!v.multiple},S=fe({},v,{value:void 0}),en("invalid",i);break;case"textarea":Hi(i,v),S=ri(i,v),en("invalid",i);break;default:S=v}Bt(g,S),q=S;for(N in q)if(q.hasOwnProperty(N)){var Q=q[N];N==="style"?De(i,Q):N==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&It(i,Q)):N==="children"?typeof Q=="string"?(g!=="textarea"||Q!=="")&&Vn(i,Q):typeof Q=="number"&&Vn(i,""+Q):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(c.hasOwnProperty(N)?Q!=null&&N==="onScroll"&&en("scroll",i):Q!=null&&F(i,N,Q,M))}switch(g){case"input":tt(i),st(i,v,!1);break;case"textarea":tt(i),zn(i);break;case"option":v.value!=null&&i.setAttribute("value",""+Ee(v.value));break;case"select":i.multiple=!!v.multiple,N=v.value,N!=null?ze(i,!!v.multiple,N,!1):v.defaultValue!=null&&ze(i,!!v.multiple,v.defaultValue,!0);break;default:typeof S.onClick=="function"&&(i.onclick=kc)}switch(g){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return rr(l),null;case 6:if(i&&l.stateNode!=null)Kg(i,l,i.memoizedProps,v);else{if(typeof v!="string"&&l.stateNode===null)throw Error(n(166));if(g=wo(Rl.current),wo(Oi.current),Bc(l)){if(v=l.stateNode,g=l.memoizedProps,v[ki]=l,(N=v.nodeValue!==g)&&(i=Tr,i!==null))switch(i.tag){case 3:Rc(v.nodeValue,g,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Rc(v.nodeValue,g,(i.mode&1)!==0)}N&&(l.flags|=4)}else v=(g.nodeType===9?g:g.ownerDocument).createTextNode(v),v[ki]=l,l.stateNode=v}return rr(l),null;case 13:if(tn(cn),v=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(sn&&Rr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)J1(),aa(),l.flags|=98560,N=!1;else if(N=Bc(l),v!==null&&v.dehydrated!==null){if(i===null){if(!N)throw Error(n(318));if(N=l.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[ki]=l}else aa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;rr(l),N=!1}else li!==null&&(Gh(li),li=null),N=!0;if(!N)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=g,l):(v=v!==null,v!==(i!==null&&i.memoizedState!==null)&&v&&(l.child.flags|=8192,(l.mode&1)!==0&&(i===null||(cn.current&1)!==0?On===0&&(On=3):Yh())),l.updateQueue!==null&&(l.flags|=4),rr(l),null);case 4:return da(),Dh(i,l),i===null&&El(l.stateNode.containerInfo),rr(l),null;case 10:return ch(l.type._context),rr(l),null;case 17:return mr(l.type)&&Pc(),rr(l),null;case 19:if(tn(cn),N=l.memoizedState,N===null)return rr(l),null;if(v=(l.flags&128)!==0,M=N.rendering,M===null)if(v)Dl(N,!1);else{if(On!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(M=Hc(i),M!==null){for(l.flags|=128,Dl(N,!1),v=M.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),l.subtreeFlags=0,v=g,g=l.child;g!==null;)N=g,i=v,N.flags&=14680066,M=N.alternate,M===null?(N.childLanes=0,N.lanes=i,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=M.childLanes,N.lanes=M.lanes,N.child=M.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=M.memoizedProps,N.memoizedState=M.memoizedState,N.updateQueue=M.updateQueue,N.type=M.type,i=M.dependencies,N.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),g=g.sibling;return Zt(cn,cn.current&1|2),l.child}i=i.sibling}N.tail!==null&&zt()>pa&&(l.flags|=128,v=!0,Dl(N,!1),l.lanes=4194304)}else{if(!v)if(i=Hc(M),i!==null){if(l.flags|=128,v=!0,g=i.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),Dl(N,!0),N.tail===null&&N.tailMode==="hidden"&&!M.alternate&&!sn)return rr(l),null}else 2*zt()-N.renderingStartTime>pa&&g!==1073741824&&(l.flags|=128,v=!0,Dl(N,!1),l.lanes=4194304);N.isBackwards?(M.sibling=l.child,l.child=M):(g=N.last,g!==null?g.sibling=M:l.child=M,N.last=M)}return N.tail!==null?(l=N.tail,N.rendering=l,N.tail=l.sibling,N.renderingStartTime=zt(),l.sibling=null,g=cn.current,Zt(cn,v?g&1|2:g&1),l):(rr(l),null);case 22:case 23:return Xh(),v=l.memoizedState!==null,i!==null&&i.memoizedState!==null!==v&&(l.flags|=8192),v&&(l.mode&1)!==0?(kr&1073741824)!==0&&(rr(l),l.subtreeFlags&6&&(l.flags|=8192)):rr(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function Sb(i,l){switch(rh(l),l.tag){case 1:return mr(l.type)&&Pc(),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return da(),tn(pr),tn(tr),mh(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 5:return gh(l),null;case 13:if(tn(cn),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(n(340));aa()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return tn(cn),null;case 4:return da(),null;case 10:return ch(l.type._context),null;case 22:case 23:return Xh(),null;case 24:return null;default:return null}}var Jc=!1,ir=!1,Ab=typeof WeakSet=="function"?WeakSet:Set,We=null;function fa(i,l){var g=i.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(v){pn(i,l,v)}else g.current=null}function Mh(i,l,g){try{g()}catch(v){pn(i,l,v)}}var Zg=!1;function _b(i,l){if(Xd=Ti,i=At(),mt(i)){if("selectionStart"in i)var g={start:i.selectionStart,end:i.selectionEnd};else e:{g=(g=i.ownerDocument)&&g.defaultView||window;var v=g.getSelection&&g.getSelection();if(v&&v.rangeCount!==0){g=v.anchorNode;var S=v.anchorOffset,N=v.focusNode;v=v.focusOffset;try{g.nodeType,N.nodeType}catch{g=null;break e}var M=0,q=-1,Q=-1,we=0,Ie=0,Re=i,_e=null;t:for(;;){for(var Ue;Re!==g||S!==0&&Re.nodeType!==3||(q=M+S),Re!==N||v!==0&&Re.nodeType!==3||(Q=M+v),Re.nodeType===3&&(M+=Re.nodeValue.length),(Ue=Re.firstChild)!==null;)_e=Re,Re=Ue;for(;;){if(Re===i)break t;if(_e===g&&++we===S&&(q=M),_e===N&&++Ie===v&&(Q=M),(Ue=Re.nextSibling)!==null)break;Re=_e,_e=Re.parentNode}Re=Ue}g=q===-1||Q===-1?null:{start:q,end:Q}}else g=null}g=g||{start:0,end:0}}else g=null;for(Yd={focusedElem:i,selectionRange:g},Ti=!1,We=l;We!==null;)if(l=We,i=l.child,(l.subtreeFlags&1028)!==0&&i!==null)i.return=l,We=i;else for(;We!==null;){l=We;try{var He=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Ye=He.memoizedProps,bn=He.memoizedState,le=l.stateNode,ne=le.getSnapshotBeforeUpdate(l.elementType===l.type?Ye:ci(l.type,Ye),bn);le.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var he=l.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Pe){pn(l,l.return,Pe)}if(i=l.sibling,i!==null){i.return=l.return,We=i;break}We=l.return}return He=Zg,Zg=!1,He}function Ml(i,l,g){var v=l.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var S=v=v.next;do{if((S.tag&i)===i){var N=S.destroy;S.destroy=void 0,N!==void 0&&Mh(l,g,N)}S=S.next}while(S!==v)}}function eu(i,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var g=l=l.next;do{if((g.tag&i)===i){var v=g.create;g.destroy=v()}g=g.next}while(g!==l)}}function Lh(i){var l=i.ref;if(l!==null){var g=i.stateNode;switch(i.tag){case 5:i=g;break;default:i=g}typeof l=="function"?l(i):l.current=i}}function Qg(i){var l=i.alternate;l!==null&&(i.alternate=null,Qg(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&(delete l[ki],delete l[Al],delete l[Jd],delete l[lb],delete l[cb])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Jg(i){return i.tag===5||i.tag===3||i.tag===4}function ep(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Jg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Bh(i,l,g){var v=i.tag;if(v===5||v===6)i=i.stateNode,l?g.nodeType===8?g.parentNode.insertBefore(i,l):g.insertBefore(i,l):(g.nodeType===8?(l=g.parentNode,l.insertBefore(i,g)):(l=g,l.appendChild(i)),g=g._reactRootContainer,g!=null||l.onclick!==null||(l.onclick=kc));else if(v!==4&&(i=i.child,i!==null))for(Bh(i,l,g),i=i.sibling;i!==null;)Bh(i,l,g),i=i.sibling}function Fh(i,l,g){var v=i.tag;if(v===5||v===6)i=i.stateNode,l?g.insertBefore(i,l):g.appendChild(i);else if(v!==4&&(i=i.child,i!==null))for(Fh(i,l,g),i=i.sibling;i!==null;)Fh(i,l,g),i=i.sibling}var qn=null,ui=!1;function Ts(i,l,g){for(g=g.child;g!==null;)tp(i,l,g),g=g.sibling}function tp(i,l,g){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(jt,g)}catch{}switch(g.tag){case 5:ir||fa(g,l);case 6:var v=qn,S=ui;qn=null,Ts(i,l,g),qn=v,ui=S,qn!==null&&(ui?(i=qn,g=g.stateNode,i.nodeType===8?i.parentNode.removeChild(g):i.removeChild(g)):qn.removeChild(g.stateNode));break;case 18:qn!==null&&(ui?(i=qn,g=g.stateNode,i.nodeType===8?Qd(i.parentNode,g):i.nodeType===1&&Qd(i,g),si(i)):Qd(qn,g.stateNode));break;case 4:v=qn,S=ui,qn=g.stateNode.containerInfo,ui=!0,Ts(i,l,g),qn=v,ui=S;break;case 0:case 11:case 14:case 15:if(!ir&&(v=g.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){S=v=v.next;do{var N=S,M=N.destroy;N=N.tag,M!==void 0&&((N&2)!==0||(N&4)!==0)&&Mh(g,l,M),S=S.next}while(S!==v)}Ts(i,l,g);break;case 1:if(!ir&&(fa(g,l),v=g.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=g.memoizedProps,v.state=g.memoizedState,v.componentWillUnmount()}catch(q){pn(g,l,q)}Ts(i,l,g);break;case 21:Ts(i,l,g);break;case 22:g.mode&1?(ir=(v=ir)||g.memoizedState!==null,Ts(i,l,g),ir=v):Ts(i,l,g);break;default:Ts(i,l,g)}}function np(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var g=i.stateNode;g===null&&(g=i.stateNode=new Ab),l.forEach(function(v){var S=Db.bind(null,i,v);g.has(v)||(g.add(v),v.then(S,S))})}}function di(i,l){var g=l.deletions;if(g!==null)for(var v=0;v<g.length;v++){var S=g[v];try{var N=i,M=l,q=M;e:for(;q!==null;){switch(q.tag){case 5:qn=q.stateNode,ui=!1;break e;case 3:qn=q.stateNode.containerInfo,ui=!0;break e;case 4:qn=q.stateNode.containerInfo,ui=!0;break e}q=q.return}if(qn===null)throw Error(n(160));tp(N,M,S),qn=null,ui=!1;var Q=S.alternate;Q!==null&&(Q.return=null),S.return=null}catch(we){pn(S,l,we)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)rp(l,i),l=l.sibling}function rp(i,l){var g=i.alternate,v=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(di(l,i),ji(i),v&4){try{Ml(3,i,i.return),eu(3,i)}catch(Ye){pn(i,i.return,Ye)}try{Ml(5,i,i.return)}catch(Ye){pn(i,i.return,Ye)}}break;case 1:di(l,i),ji(i),v&512&&g!==null&&fa(g,g.return);break;case 5:if(di(l,i),ji(i),v&512&&g!==null&&fa(g,g.return),i.flags&32){var S=i.stateNode;try{Vn(S,"")}catch(Ye){pn(i,i.return,Ye)}}if(v&4&&(S=i.stateNode,S!=null)){var N=i.memoizedProps,M=g!==null?g.memoizedProps:N,q=i.type,Q=i.updateQueue;if(i.updateQueue=null,Q!==null)try{q==="input"&&N.type==="radio"&&N.name!=null&&Me(S,N),qt(q,M);var we=qt(q,N);for(M=0;M<Q.length;M+=2){var Ie=Q[M],Re=Q[M+1];Ie==="style"?De(S,Re):Ie==="dangerouslySetInnerHTML"?It(S,Re):Ie==="children"?Vn(S,Re):F(S,Ie,Re,we)}switch(q){case"input":Je(S,N);break;case"textarea":Kn(S,N);break;case"select":var _e=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!N.multiple;var Ue=N.value;Ue!=null?ze(S,!!N.multiple,Ue,!1):_e!==!!N.multiple&&(N.defaultValue!=null?ze(S,!!N.multiple,N.defaultValue,!0):ze(S,!!N.multiple,N.multiple?[]:"",!1))}S[Al]=N}catch(Ye){pn(i,i.return,Ye)}}break;case 6:if(di(l,i),ji(i),v&4){if(i.stateNode===null)throw Error(n(162));S=i.stateNode,N=i.memoizedProps;try{S.nodeValue=N}catch(Ye){pn(i,i.return,Ye)}}break;case 3:if(di(l,i),ji(i),v&4&&g!==null&&g.memoizedState.isDehydrated)try{si(l.containerInfo)}catch(Ye){pn(i,i.return,Ye)}break;case 4:di(l,i),ji(i);break;case 13:di(l,i),ji(i),S=i.child,S.flags&8192&&(N=S.memoizedState!==null,S.stateNode.isHidden=N,!N||S.alternate!==null&&S.alternate.memoizedState!==null||(Vh=zt())),v&4&&np(i);break;case 22:if(Ie=g!==null&&g.memoizedState!==null,i.mode&1?(ir=(we=ir)||Ie,di(l,i),ir=we):di(l,i),ji(i),v&8192){if(we=i.memoizedState!==null,(i.stateNode.isHidden=we)&&!Ie&&(i.mode&1)!==0)for(We=i,Ie=i.child;Ie!==null;){for(Re=We=Ie;We!==null;){switch(_e=We,Ue=_e.child,_e.tag){case 0:case 11:case 14:case 15:Ml(4,_e,_e.return);break;case 1:fa(_e,_e.return);var He=_e.stateNode;if(typeof He.componentWillUnmount=="function"){v=_e,g=_e.return;try{l=v,He.props=l.memoizedProps,He.state=l.memoizedState,He.componentWillUnmount()}catch(Ye){pn(v,g,Ye)}}break;case 5:fa(_e,_e.return);break;case 22:if(_e.memoizedState!==null){op(Re);continue}}Ue!==null?(Ue.return=_e,We=Ue):op(Re)}Ie=Ie.sibling}e:for(Ie=null,Re=i;;){if(Re.tag===5){if(Ie===null){Ie=Re;try{S=Re.stateNode,we?(N=S.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(q=Re.stateNode,Q=Re.memoizedProps.style,M=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,q.style.display=an("display",M))}catch(Ye){pn(i,i.return,Ye)}}}else if(Re.tag===6){if(Ie===null)try{Re.stateNode.nodeValue=we?"":Re.memoizedProps}catch(Ye){pn(i,i.return,Ye)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===i)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===i)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===i)break e;Ie===Re&&(Ie=null),Re=Re.return}Ie===Re&&(Ie=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:di(l,i),ji(i),v&4&&np(i);break;case 21:break;default:di(l,i),ji(i)}}function ji(i){var l=i.flags;if(l&2){try{e:{for(var g=i.return;g!==null;){if(Jg(g)){var v=g;break e}g=g.return}throw Error(n(160))}switch(v.tag){case 5:var S=v.stateNode;v.flags&32&&(Vn(S,""),v.flags&=-33);var N=ep(i);Fh(i,N,S);break;case 3:case 4:var M=v.stateNode.containerInfo,q=ep(i);Bh(i,q,M);break;default:throw Error(n(161))}}catch(Q){pn(i,i.return,Q)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function Nb(i,l,g){We=i,ip(i)}function ip(i,l,g){for(var v=(i.mode&1)!==0;We!==null;){var S=We,N=S.child;if(S.tag===22&&v){var M=S.memoizedState!==null||Jc;if(!M){var q=S.alternate,Q=q!==null&&q.memoizedState!==null||ir;q=Jc;var we=ir;if(Jc=M,(ir=Q)&&!we)for(We=S;We!==null;)M=We,Q=M.child,M.tag===22&&M.memoizedState!==null?ap(S):Q!==null?(Q.return=M,We=Q):ap(S);for(;N!==null;)We=N,ip(N),N=N.sibling;We=S,Jc=q,ir=we}sp(i)}else(S.subtreeFlags&8772)!==0&&N!==null?(N.return=S,We=N):sp(i)}}function sp(i){for(;We!==null;){var l=We;if((l.flags&8772)!==0){var g=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:ir||eu(5,l);break;case 1:var v=l.stateNode;if(l.flags&4&&!ir)if(g===null)v.componentDidMount();else{var S=l.elementType===l.type?g.memoizedProps:ci(l.type,g.memoizedProps);v.componentDidUpdate(S,g.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var N=l.updateQueue;N!==null&&og(l,N,v);break;case 3:var M=l.updateQueue;if(M!==null){if(g=null,l.child!==null)switch(l.child.tag){case 5:g=l.child.stateNode;break;case 1:g=l.child.stateNode}og(l,M,g)}break;case 5:var q=l.stateNode;if(g===null&&l.flags&4){g=q;var Q=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&g.focus();break;case"img":Q.src&&(g.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var we=l.alternate;if(we!==null){var Ie=we.memoizedState;if(Ie!==null){var Re=Ie.dehydrated;Re!==null&&si(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ir||l.flags&512&&Lh(l)}catch(_e){pn(l,l.return,_e)}}if(l===i){We=null;break}if(g=l.sibling,g!==null){g.return=l.return,We=g;break}We=l.return}}function op(i){for(;We!==null;){var l=We;if(l===i){We=null;break}var g=l.sibling;if(g!==null){g.return=l.return,We=g;break}We=l.return}}function ap(i){for(;We!==null;){var l=We;try{switch(l.tag){case 0:case 11:case 15:var g=l.return;try{eu(4,l)}catch(Q){pn(l,g,Q)}break;case 1:var v=l.stateNode;if(typeof v.componentDidMount=="function"){var S=l.return;try{v.componentDidMount()}catch(Q){pn(l,S,Q)}}var N=l.return;try{Lh(l)}catch(Q){pn(l,N,Q)}break;case 5:var M=l.return;try{Lh(l)}catch(Q){pn(l,M,Q)}}}catch(Q){pn(l,l.return,Q)}if(l===i){We=null;break}var q=l.sibling;if(q!==null){q.return=l.return,We=q;break}We=l.return}}var Ib=Math.ceil,tu=$.ReactCurrentDispatcher,Uh=$.ReactCurrentOwner,Yr=$.ReactCurrentBatchConfig,Mt=0,Fn=null,En=null,Xn=0,kr=0,ga=Ss(0),On=0,Ll=null,vo=0,nu=0,zh=0,Bl=null,wr=null,Vh=0,pa=1/0,is=null,ru=!1,Wh=null,Rs=null,iu=!1,ks=null,su=0,Fl=0,Hh=null,ou=-1,au=0;function cr(){return(Mt&6)!==0?zt():ou!==-1?ou:ou=zt()}function Os(i){return(i.mode&1)===0?1:(Mt&2)!==0&&Xn!==0?Xn&-Xn:db.transition!==null?(au===0&&(au=Nn()),au):(i=Ct,i!==0||(i=window.event,i=i===void 0?16:hl(i.type)),i)}function hi(i,l,g,v){if(50<Fl)throw Fl=0,Hh=null,Error(n(185));H(i,g,v),((Mt&2)===0||i!==Fn)&&(i===Fn&&((Mt&2)===0&&(nu|=g),On===4&&Ps(i,Xn)),yr(i,v),g===1&&Mt===0&&(l.mode&1)===0&&(pa=zt()+500,Dc&&_s()))}function yr(i,l){var g=i.callbackNode;fs(i,l);var v=Ar(i,i===Fn?Xn:0);if(v===0)g!==null&&Mn(g),i.callbackNode=null,i.callbackPriority=0;else if(l=v&-v,i.callbackPriority!==l){if(g!=null&&Mn(g),l===1)i.tag===0?ub(cp.bind(null,i)):X1(cp.bind(null,i)),ob(function(){(Mt&6)===0&&_s()}),g=null;else{switch(mc(v)){case 1:g=Se;break;case 4:g=gc;break;case 16:g=$t;break;case 536870912:g=pc;break;default:g=$t}g=xp(g,lp.bind(null,i))}i.callbackPriority=l,i.callbackNode=g}}function lp(i,l){if(ou=-1,au=0,(Mt&6)!==0)throw Error(n(327));var g=i.callbackNode;if(ma()&&i.callbackNode!==g)return null;var v=Ar(i,i===Fn?Xn:0);if(v===0)return null;if((v&30)!==0||(v&i.expiredLanes)!==0||l)l=lu(i,v);else{l=v;var S=Mt;Mt|=2;var N=dp();(Fn!==i||Xn!==l)&&(is=null,pa=zt()+500,Co(i,l));do try{kb();break}catch(q){up(i,q)}while(!0);lh(),tu.current=N,Mt=S,En!==null?l=0:(Fn=null,Xn=0,l=On)}if(l!==0){if(l===2&&(S=Vt(i),S!==0&&(v=S,l=$h(i,S))),l===1)throw g=Ll,Co(i,0),Ps(i,v),yr(i,zt()),g;if(l===6)Ps(i,v);else{if(S=i.current.alternate,(v&30)===0&&!Tb(S)&&(l=lu(i,v),l===2&&(N=Vt(i),N!==0&&(v=N,l=$h(i,N))),l===1))throw g=Ll,Co(i,0),Ps(i,v),yr(i,zt()),g;switch(i.finishedWork=S,i.finishedLanes=v,l){case 0:case 1:throw Error(n(345));case 2:Eo(i,wr,is);break;case 3:if(Ps(i,v),(v&130023424)===v&&(l=Vh+500-zt(),10<l)){if(Ar(i,0)!==0)break;if(S=i.suspendedLanes,(S&v)!==v){cr(),i.pingedLanes|=i.suspendedLanes&S;break}i.timeoutHandle=Zd(Eo.bind(null,i,wr,is),l);break}Eo(i,wr,is);break;case 4:if(Ps(i,v),(v&4194240)===v)break;for(l=i.eventTimes,S=-1;0<v;){var M=31-ar(v);N=1<<M,M=l[M],M>S&&(S=M),v&=~N}if(v=S,v=zt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*Ib(v/1960))-v,10<v){i.timeoutHandle=Zd(Eo.bind(null,i,wr,is),v);break}Eo(i,wr,is);break;case 5:Eo(i,wr,is);break;default:throw Error(n(329))}}}return yr(i,zt()),i.callbackNode===g?lp.bind(null,i):null}function $h(i,l){var g=Bl;return i.current.memoizedState.isDehydrated&&(Co(i,l).flags|=256),i=lu(i,l),i!==2&&(l=wr,wr=g,l!==null&&Gh(l)),i}function Gh(i){wr===null?wr=i:wr.push.apply(wr,i)}function Tb(i){for(var l=i;;){if(l.flags&16384){var g=l.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var v=0;v<g.length;v++){var S=g[v],N=S.getSnapshot;S=S.value;try{if(!oe(N(),S))return!1}catch{return!1}}}if(g=l.child,l.subtreeFlags&16384&&g!==null)g.return=l,l=g;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ps(i,l){for(l&=~zh,l&=~nu,i.suspendedLanes|=l,i.pingedLanes&=~l,i=i.expirationTimes;0<l;){var g=31-ar(l),v=1<<g;i[g]=-1,l&=~v}}function cp(i){if((Mt&6)!==0)throw Error(n(327));ma();var l=Ar(i,0);if((l&1)===0)return yr(i,zt()),null;var g=lu(i,l);if(i.tag!==0&&g===2){var v=Vt(i);v!==0&&(l=v,g=$h(i,v))}if(g===1)throw g=Ll,Co(i,0),Ps(i,l),yr(i,zt()),g;if(g===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=l,Eo(i,wr,is),yr(i,zt()),null}function qh(i,l){var g=Mt;Mt|=1;try{return i(l)}finally{Mt=g,Mt===0&&(pa=zt()+500,Dc&&_s())}}function bo(i){ks!==null&&ks.tag===0&&(Mt&6)===0&&ma();var l=Mt;Mt|=1;var g=Yr.transition,v=Ct;try{if(Yr.transition=null,Ct=1,i)return i()}finally{Ct=v,Yr.transition=g,Mt=l,(Mt&6)===0&&_s()}}function Xh(){kr=ga.current,tn(ga)}function Co(i,l){i.finishedWork=null,i.finishedLanes=0;var g=i.timeoutHandle;if(g!==-1&&(i.timeoutHandle=-1,sb(g)),En!==null)for(g=En.return;g!==null;){var v=g;switch(rh(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Pc();break;case 3:da(),tn(pr),tn(tr),mh();break;case 5:gh(v);break;case 4:da();break;case 13:tn(cn);break;case 19:tn(cn);break;case 10:ch(v.type._context);break;case 22:case 23:Xh()}g=g.return}if(Fn=i,En=i=js(i.current,null),Xn=kr=l,On=0,Ll=null,zh=nu=vo=0,wr=Bl=null,xo!==null){for(l=0;l<xo.length;l++)if(g=xo[l],v=g.interleaved,v!==null){g.interleaved=null;var S=v.next,N=g.pending;if(N!==null){var M=N.next;N.next=S,v.next=M}g.pending=v}xo=null}return i}function up(i,l){do{var g=En;try{if(lh(),$c.current=Yc,Gc){for(var v=un.memoizedState;v!==null;){var S=v.queue;S!==null&&(S.pending=null),v=v.next}Gc=!1}if(yo=0,Bn=kn=un=null,kl=!1,Ol=0,Uh.current=null,g===null||g.return===null){On=1,Ll=l,En=null;break}e:{var N=i,M=g.return,q=g,Q=l;if(l=Xn,q.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var we=Q,Ie=q,Re=Ie.tag;if((Ie.mode&1)===0&&(Re===0||Re===11||Re===15)){var _e=Ie.alternate;_e?(Ie.updateQueue=_e.updateQueue,Ie.memoizedState=_e.memoizedState,Ie.lanes=_e.lanes):(Ie.updateQueue=null,Ie.memoizedState=null)}var Ue=Dg(M);if(Ue!==null){Ue.flags&=-257,Mg(Ue,M,q,N,l),Ue.mode&1&&jg(N,we,l),l=Ue,Q=we;var He=l.updateQueue;if(He===null){var Ye=new Set;Ye.add(Q),l.updateQueue=Ye}else He.add(Q);break e}else{if((l&1)===0){jg(N,we,l),Yh();break e}Q=Error(n(426))}}else if(sn&&q.mode&1){var bn=Dg(M);if(bn!==null){(bn.flags&65536)===0&&(bn.flags|=256),Mg(bn,M,q,N,l),oh(ha(Q,q));break e}}N=Q=ha(Q,q),On!==4&&(On=2),Bl===null?Bl=[N]:Bl.push(N),N=M;do{switch(N.tag){case 3:N.flags|=65536,l&=-l,N.lanes|=l;var le=Og(N,Q,l);sg(N,le);break e;case 1:q=Q;var ne=N.type,he=N.stateNode;if((N.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Rs===null||!Rs.has(he)))){N.flags|=65536,l&=-l,N.lanes|=l;var Pe=Pg(N,q,l);sg(N,Pe);break e}}N=N.return}while(N!==null)}fp(g)}catch(Ke){l=Ke,En===g&&g!==null&&(En=g=g.return);continue}break}while(!0)}function dp(){var i=tu.current;return tu.current=Yc,i===null?Yc:i}function Yh(){(On===0||On===3||On===2)&&(On=4),Fn===null||(vo&268435455)===0&&(nu&268435455)===0||Ps(Fn,Xn)}function lu(i,l){var g=Mt;Mt|=2;var v=dp();(Fn!==i||Xn!==l)&&(is=null,Co(i,l));do try{Rb();break}catch(S){up(i,S)}while(!0);if(lh(),Mt=g,tu.current=v,En!==null)throw Error(n(261));return Fn=null,Xn=0,On}function Rb(){for(;En!==null;)hp(En)}function kb(){for(;En!==null&&!Xt();)hp(En)}function hp(i){var l=mp(i.alternate,i,kr);i.memoizedProps=i.pendingProps,l===null?fp(i):En=l,Uh.current=null}function fp(i){var l=i;do{var g=l.alternate;if(i=l.return,(l.flags&32768)===0){if(g=Eb(g,l,kr),g!==null){En=g;return}}else{if(g=Sb(g,l),g!==null){g.flags&=32767,En=g;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{On=6,En=null;return}}if(l=l.sibling,l!==null){En=l;return}En=l=i}while(l!==null);On===0&&(On=5)}function Eo(i,l,g){var v=Ct,S=Yr.transition;try{Yr.transition=null,Ct=1,Ob(i,l,g,v)}finally{Yr.transition=S,Ct=v}return null}function Ob(i,l,g,v){do ma();while(ks!==null);if((Mt&6)!==0)throw Error(n(327));g=i.finishedWork;var S=i.finishedLanes;if(g===null)return null;if(i.finishedWork=null,i.finishedLanes=0,g===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var N=g.lanes|g.childLanes;if(et(i,N),i===Fn&&(En=Fn=null,Xn=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||iu||(iu=!0,xp($t,function(){return ma(),null})),N=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||N){N=Yr.transition,Yr.transition=null;var M=Ct;Ct=1;var q=Mt;Mt|=4,Uh.current=null,_b(i,g),rp(g,i),er(Yd),Ti=!!Xd,Yd=Xd=null,i.current=g,Nb(g),fc(),Mt=q,Ct=M,Yr.transition=N}else i.current=g;if(iu&&(iu=!1,ks=i,su=S),N=i.pendingLanes,N===0&&(Rs=null),Ot(g.stateNode),yr(i,zt()),l!==null)for(v=i.onRecoverableError,g=0;g<l.length;g++)S=l[g],v(S.value,{componentStack:S.stack,digest:S.digest});if(ru)throw ru=!1,i=Wh,Wh=null,i;return(su&1)!==0&&i.tag!==0&&ma(),N=i.pendingLanes,(N&1)!==0?i===Hh?Fl++:(Fl=0,Hh=i):Fl=0,_s(),null}function ma(){if(ks!==null){var i=mc(su),l=Yr.transition,g=Ct;try{if(Yr.transition=null,Ct=16>i?16:i,ks===null)var v=!1;else{if(i=ks,ks=null,su=0,(Mt&6)!==0)throw Error(n(331));var S=Mt;for(Mt|=4,We=i.current;We!==null;){var N=We,M=N.child;if((We.flags&16)!==0){var q=N.deletions;if(q!==null){for(var Q=0;Q<q.length;Q++){var we=q[Q];for(We=we;We!==null;){var Ie=We;switch(Ie.tag){case 0:case 11:case 15:Ml(8,Ie,N)}var Re=Ie.child;if(Re!==null)Re.return=Ie,We=Re;else for(;We!==null;){Ie=We;var _e=Ie.sibling,Ue=Ie.return;if(Qg(Ie),Ie===we){We=null;break}if(_e!==null){_e.return=Ue,We=_e;break}We=Ue}}}var He=N.alternate;if(He!==null){var Ye=He.child;if(Ye!==null){He.child=null;do{var bn=Ye.sibling;Ye.sibling=null,Ye=bn}while(Ye!==null)}}We=N}}if((N.subtreeFlags&2064)!==0&&M!==null)M.return=N,We=M;else e:for(;We!==null;){if(N=We,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:Ml(9,N,N.return)}var le=N.sibling;if(le!==null){le.return=N.return,We=le;break e}We=N.return}}var ne=i.current;for(We=ne;We!==null;){M=We;var he=M.child;if((M.subtreeFlags&2064)!==0&&he!==null)he.return=M,We=he;else e:for(M=ne;We!==null;){if(q=We,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:eu(9,q)}}catch(Ke){pn(q,q.return,Ke)}if(q===M){We=null;break e}var Pe=q.sibling;if(Pe!==null){Pe.return=q.return,We=Pe;break e}We=q.return}}if(Mt=S,_s(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(jt,i)}catch{}v=!0}return v}finally{Ct=g,Yr.transition=l}}return!1}function gp(i,l,g){l=ha(g,l),l=Og(i,l,1),i=Is(i,l,1),l=cr(),i!==null&&(H(i,1,l),yr(i,l))}function pn(i,l,g){if(i.tag===3)gp(i,i,g);else for(;l!==null;){if(l.tag===3){gp(l,i,g);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Rs===null||!Rs.has(v))){i=ha(g,i),i=Pg(l,i,1),l=Is(l,i,1),i=cr(),l!==null&&(H(l,1,i),yr(l,i));break}}l=l.return}}function Pb(i,l,g){var v=i.pingCache;v!==null&&v.delete(l),l=cr(),i.pingedLanes|=i.suspendedLanes&g,Fn===i&&(Xn&g)===g&&(On===4||On===3&&(Xn&130023424)===Xn&&500>zt()-Vh?Co(i,0):zh|=g),yr(i,l)}function pp(i,l){l===0&&((i.mode&1)===0?l=1:(l=Go,Go<<=1,(Go&130023424)===0&&(Go=4194304)));var g=cr();i=ts(i,l),i!==null&&(H(i,l,g),yr(i,g))}function jb(i){var l=i.memoizedState,g=0;l!==null&&(g=l.retryLane),pp(i,g)}function Db(i,l){var g=0;switch(i.tag){case 13:var v=i.stateNode,S=i.memoizedState;S!==null&&(g=S.retryLane);break;case 19:v=i.stateNode;break;default:throw Error(n(314))}v!==null&&v.delete(l),pp(i,g)}var mp;mp=function(i,l,g){if(i!==null)if(i.memoizedProps!==l.pendingProps||pr.current)xr=!0;else{if((i.lanes&g)===0&&(l.flags&128)===0)return xr=!1,Cb(i,l,g);xr=(i.flags&131072)!==0}else xr=!1,sn&&(l.flags&1048576)!==0&&Y1(l,Lc,l.index);switch(l.lanes=0,l.tag){case 2:var v=l.type;Qc(i,l),i=l.pendingProps;var S=ia(l,tr.current);ua(l,g),S=yh(null,l,v,i,S,g);var N=vh();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,mr(v)?(N=!0,jc(l)):N=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,hh(l),S.updater=Kc,l.stateNode=S,S._reactInternals=l,_h(l,v,i,g),l=Rh(null,l,v,!0,N,g)):(l.tag=0,sn&&N&&nh(l),lr(null,l,S,g),l=l.child),l;case 16:v=l.elementType;e:{switch(Qc(i,l),i=l.pendingProps,S=v._init,v=S(v._payload),l.type=v,S=l.tag=Lb(v),i=ci(v,i),S){case 0:l=Th(null,l,v,i,g);break e;case 1:l=Vg(null,l,v,i,g);break e;case 11:l=Lg(null,l,v,i,g);break e;case 14:l=Bg(null,l,v,ci(v.type,i),g);break e}throw Error(n(306,v,""))}return l;case 0:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:ci(v,S),Th(i,l,v,S,g);case 1:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:ci(v,S),Vg(i,l,v,S,g);case 3:e:{if(Wg(l),i===null)throw Error(n(387));v=l.pendingProps,N=l.memoizedState,S=N.element,ig(i,l),Wc(l,v,null,g);var M=l.memoizedState;if(v=M.element,N.isDehydrated)if(N={element:v,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=N,l.memoizedState=N,l.flags&256){S=ha(Error(n(423)),l),l=Hg(i,l,v,g,S);break e}else if(v!==S){S=ha(Error(n(424)),l),l=Hg(i,l,v,g,S);break e}else for(Rr=Es(l.stateNode.containerInfo.firstChild),Tr=l,sn=!0,li=null,g=ng(l,null,v,g),l.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(aa(),v===S){l=rs(i,l,g);break e}lr(i,l,v,g)}l=l.child}return l;case 5:return ag(l),i===null&&sh(l),v=l.type,S=l.pendingProps,N=i!==null?i.memoizedProps:null,M=S.children,Kd(v,S)?M=null:N!==null&&Kd(v,N)&&(l.flags|=32),zg(i,l),lr(i,l,M,g),l.child;case 6:return i===null&&sh(l),null;case 13:return $g(i,l,g);case 4:return fh(l,l.stateNode.containerInfo),v=l.pendingProps,i===null?l.child=la(l,null,v,g):lr(i,l,v,g),l.child;case 11:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:ci(v,S),Lg(i,l,v,S,g);case 7:return lr(i,l,l.pendingProps,g),l.child;case 8:return lr(i,l,l.pendingProps.children,g),l.child;case 12:return lr(i,l,l.pendingProps.children,g),l.child;case 10:e:{if(v=l.type._context,S=l.pendingProps,N=l.memoizedProps,M=S.value,Zt(Uc,v._currentValue),v._currentValue=M,N!==null)if(oe(N.value,M)){if(N.children===S.children&&!pr.current){l=rs(i,l,g);break e}}else for(N=l.child,N!==null&&(N.return=l);N!==null;){var q=N.dependencies;if(q!==null){M=N.child;for(var Q=q.firstContext;Q!==null;){if(Q.context===v){if(N.tag===1){Q=ns(-1,g&-g),Q.tag=2;var we=N.updateQueue;if(we!==null){we=we.shared;var Ie=we.pending;Ie===null?Q.next=Q:(Q.next=Ie.next,Ie.next=Q),we.pending=Q}}N.lanes|=g,Q=N.alternate,Q!==null&&(Q.lanes|=g),uh(N.return,g,l),q.lanes|=g;break}Q=Q.next}}else if(N.tag===10)M=N.type===l.type?null:N.child;else if(N.tag===18){if(M=N.return,M===null)throw Error(n(341));M.lanes|=g,q=M.alternate,q!==null&&(q.lanes|=g),uh(M,g,l),M=N.sibling}else M=N.child;if(M!==null)M.return=N;else for(M=N;M!==null;){if(M===l){M=null;break}if(N=M.sibling,N!==null){N.return=M.return,M=N;break}M=M.return}N=M}lr(i,l,S.children,g),l=l.child}return l;case 9:return S=l.type,v=l.pendingProps.children,ua(l,g),S=qr(S),v=v(S),l.flags|=1,lr(i,l,v,g),l.child;case 14:return v=l.type,S=ci(v,l.pendingProps),S=ci(v.type,S),Bg(i,l,v,S,g);case 15:return Fg(i,l,l.type,l.pendingProps,g);case 17:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:ci(v,S),Qc(i,l),l.tag=1,mr(v)?(i=!0,jc(l)):i=!1,ua(l,g),Rg(l,v,S),_h(l,v,S,g),Rh(null,l,v,!0,i,g);case 19:return qg(i,l,g);case 22:return Ug(i,l,g)}throw Error(n(156,l.tag))};function xp(i,l){return Er(i,l)}function Mb(i,l,g,v){this.tag=i,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(i,l,g,v){return new Mb(i,l,g,v)}function Kh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Lb(i){if(typeof i=="function")return Kh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===de)return 11;if(i===ie)return 14}return 2}function js(i,l){var g=i.alternate;return g===null?(g=Kr(i.tag,l,i.key,i.mode),g.elementType=i.elementType,g.type=i.type,g.stateNode=i.stateNode,g.alternate=i,i.alternate=g):(g.pendingProps=l,g.type=i.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=i.flags&14680064,g.childLanes=i.childLanes,g.lanes=i.lanes,g.child=i.child,g.memoizedProps=i.memoizedProps,g.memoizedState=i.memoizedState,g.updateQueue=i.updateQueue,l=i.dependencies,g.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},g.sibling=i.sibling,g.index=i.index,g.ref=i.ref,g}function cu(i,l,g,v,S,N){var M=2;if(v=i,typeof i=="function")Kh(i)&&(M=1);else if(typeof i=="string")M=5;else e:switch(i){case V:return So(g.children,S,N,l);case X:M=8,S|=8;break;case W:return i=Kr(12,g,l,S|2),i.elementType=W,i.lanes=N,i;case ve:return i=Kr(13,g,l,S),i.elementType=ve,i.lanes=N,i;case Ce:return i=Kr(19,g,l,S),i.elementType=Ce,i.lanes=N,i;case ge:return uu(g,S,N,l);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ye:M=10;break e;case be:M=9;break e;case de:M=11;break e;case ie:M=14;break e;case ce:M=16,v=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return l=Kr(M,g,l,S),l.elementType=i,l.type=v,l.lanes=N,l}function So(i,l,g,v){return i=Kr(7,i,v,l),i.lanes=g,i}function uu(i,l,g,v){return i=Kr(22,i,v,l),i.elementType=ge,i.lanes=g,i.stateNode={isHidden:!1},i}function Zh(i,l,g){return i=Kr(6,i,null,l),i.lanes=g,i}function Qh(i,l,g){return l=Kr(4,i.children!==null?i.children:[],i.key,l),l.lanes=g,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}function Bb(i,l,g,v,S){this.tag=l,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ae(0),this.expirationTimes=ae(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ae(0),this.identifierPrefix=v,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Jh(i,l,g,v,S,N,M,q,Q){return i=new Bb(i,l,g,q,Q),l===1?(l=1,N===!0&&(l|=8)):l=0,N=Kr(3,null,null,l),i.current=N,N.stateNode=i,N.memoizedState={element:v,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},hh(N),i}function Fb(i,l,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:v==null?null:""+v,children:i,containerInfo:l,implementation:g}}function wp(i){if(!i)return As;i=i._reactInternals;e:{if(gr(i)!==i||i.tag!==1)throw Error(n(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(mr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(i.tag===1){var g=i.type;if(mr(g))return G1(i,g,l)}return l}function yp(i,l,g,v,S,N,M,q,Q){return i=Jh(g,v,!0,i,S,N,M,q,Q),i.context=wp(null),g=i.current,v=cr(),S=Os(g),N=ns(v,S),N.callback=l??null,Is(g,N,S),i.current.lanes=S,H(i,S,v),yr(i,v),i}function du(i,l,g,v){var S=l.current,N=cr(),M=Os(S);return g=wp(g),l.context===null?l.context=g:l.pendingContext=g,l=ns(N,M),l.payload={element:i},v=v===void 0?null:v,v!==null&&(l.callback=v),i=Is(S,l,M),i!==null&&(hi(i,S,M,N),Vc(i,S,M)),M}function hu(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function vp(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var g=i.retryLane;i.retryLane=g!==0&&g<l?g:l}}function ef(i,l){vp(i,l),(i=i.alternate)&&vp(i,l)}function Ub(){return null}var bp=typeof reportError=="function"?reportError:function(i){console.error(i)};function tf(i){this._internalRoot=i}fu.prototype.render=tf.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(n(409));du(i,l,null,null)},fu.prototype.unmount=tf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;bo(function(){du(null,i,null,null)}),l[Zi]=null}};function fu(i){this._internalRoot=i}fu.prototype.unstable_scheduleHydration=function(i){if(i){var l=Yt();i={blockedOn:null,target:i,priority:l};for(var g=0;g<Hn.length&&l!==0&&l<Hn[g].priority;g++);Hn.splice(g,0,i),g===0&&wc(i)}};function nf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function gu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Cp(){}function zb(i,l,g,v,S){if(S){if(typeof v=="function"){var N=v;v=function(){var we=hu(M);N.call(we)}}var M=yp(l,v,i,0,null,!1,!1,"",Cp);return i._reactRootContainer=M,i[Zi]=M.current,El(i.nodeType===8?i.parentNode:i),bo(),M}for(;S=i.lastChild;)i.removeChild(S);if(typeof v=="function"){var q=v;v=function(){var we=hu(Q);q.call(we)}}var Q=Jh(i,0,!1,null,null,!1,!1,"",Cp);return i._reactRootContainer=Q,i[Zi]=Q.current,El(i.nodeType===8?i.parentNode:i),bo(function(){du(l,Q,g,v)}),Q}function pu(i,l,g,v,S){var N=g._reactRootContainer;if(N){var M=N;if(typeof S=="function"){var q=S;S=function(){var Q=hu(M);q.call(Q)}}du(l,M,i,S)}else M=zb(g,l,i,S,v);return hu(M)}qo=function(i){switch(i.tag){case 3:var l=i.stateNode;if(l.current.memoizedState.isDehydrated){var g=Gt(l.pendingLanes);g!==0&&(fn(l,g|1),yr(l,zt()),(Mt&6)===0&&(pa=zt()+500,_s()))}break;case 13:bo(function(){var v=ts(i,1);if(v!==null){var S=cr();hi(v,i,1,S)}}),ef(i,1)}},Jn=function(i){if(i.tag===13){var l=ts(i,134217728);if(l!==null){var g=cr();hi(l,i,134217728,g)}ef(i,134217728)}},rt=function(i){if(i.tag===13){var l=Os(i),g=ts(i,l);if(g!==null){var v=cr();hi(g,i,l,v)}ef(i,l)}},Yt=function(){return Ct},cl=function(i,l){var g=Ct;try{return Ct=i,l()}finally{Ct=g}},Ho=function(i,l,g){switch(l){case"input":if(Je(i,g),l=g.name,g.type==="radio"&&l!=null){for(g=i;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<g.length;l++){var v=g[l];if(v!==i&&v.form===i.form){var S=Oc(v);if(!S)throw Error(n(90));vt(v),Je(v,S)}}}break;case"textarea":Kn(i,g);break;case"select":l=g.value,l!=null&&ze(i,!!g.multiple,l,!1)}},$o=qh,_n=bo;var Vb={usingClientEntryPoint:!1,Events:[_l,na,Oc,nl,fr,qh]},Ul={findFiberByHostInstance:fo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wb={bundleType:Ul.bundleType,version:Ul.version,rendererPackageName:Ul.rendererPackageName,rendererConfig:Ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=dc(i),i===null?null:i.stateNode},findFiberByHostInstance:Ul.findFiberByHostInstance||Ub,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{jt=mu.inject(Wb),bt=mu}catch{}}return vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vb,vr.createPortal=function(i,l){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nf(l))throw Error(n(200));return Fb(i,l,null,g)},vr.createRoot=function(i,l){if(!nf(i))throw Error(n(299));var g=!1,v="",S=bp;return l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=Jh(i,1,!1,null,null,g,!1,v,S),i[Zi]=l.current,El(i.nodeType===8?i.parentNode:i),new tf(l)},vr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=dc(l),i=i===null?null:i.stateNode,i},vr.flushSync=function(i){return bo(i)},vr.hydrate=function(i,l,g){if(!gu(l))throw Error(n(200));return pu(null,i,l,!0,g)},vr.hydrateRoot=function(i,l,g){if(!nf(i))throw Error(n(405));var v=g!=null&&g.hydratedSources||null,S=!1,N="",M=bp;if(g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(N=g.identifierPrefix),g.onRecoverableError!==void 0&&(M=g.onRecoverableError)),l=yp(l,null,i,1,g??null,S,!1,N,M),i[Zi]=l.current,El(i),v)for(i=0;i<v.length;i++)g=v[i],S=g._getVersion,S=S(g._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[g,S]:l.mutableSourceEagerHydrationData.push(g,S);return new fu(l)},vr.render=function(i,l,g){if(!gu(l))throw Error(n(200));return pu(null,i,l,!1,g)},vr.unmountComponentAtNode=function(i){if(!gu(i))throw Error(n(40));return i._reactRootContainer?(bo(function(){pu(null,null,i,!1,function(){i._reactRootContainer=null,i[Zi]=null})}),!0):!1},vr.unstable_batchedUpdates=qh,vr.unstable_renderSubtreeIntoContainer=function(i,l,g,v){if(!gu(g))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return pu(i,l,g,!1,v)},vr.version="18.3.1-next-f1338f8080-20240426",vr}var Rp;function Lx(){if(Rp)return of.exports;Rp=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),of.exports=Zb(),of.exports}var kp;function Qb(){if(kp)return wu;kp=1;var r=Lx();return wu.createRoot=r.createRoot,wu.hydrateRoot=r.hydrateRoot,wu}var Jb=Qb(),R=P0();const Jt=sc(R),j0=O0({__proto__:null,default:Jt},[R]);function Op(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function Ga(...r){return e=>{let n=!1;const o=r.map(c=>{const u=Op(c,e);return!n&&typeof u=="function"&&(n=!0),u});if(n)return()=>{for(let c=0;c<o.length;c++){const u=o[c];typeof u=="function"?u():Op(r[c],null)}}}}function Ut(...r){return R.useCallback(Ga(...r),r)}var eC=Symbol.for("react.lazy"),Gu=j0[" use ".trim().toString()];function tC(r){return typeof r=="object"&&r!==null&&"then"in r}function Bx(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===eC&&"_payload"in r&&tC(r._payload)}function D0(r){const e=nC(r),n=R.forwardRef((o,c)=>{let{children:u,...p}=o;Bx(u)&&typeof Gu=="function"&&(u=Gu(u._payload));const x=R.Children.toArray(u),b=x.find(iC);if(b){const y=b.props.children,A=x.map(_=>_===b?R.Children.count(y)>1?R.Children.only(null):R.isValidElement(y)?y.props.children:null:_);return m.jsx(e,{...p,ref:c,children:R.isValidElement(y)?R.cloneElement(y,void 0,A):null})}return m.jsx(e,{...p,ref:c,children:u})});return n.displayName=`${r}.Slot`,n}var Fx=D0("Slot");function nC(r){const e=R.forwardRef((n,o)=>{let{children:c,...u}=n;if(Bx(c)&&typeof Gu=="function"&&(c=Gu(c._payload)),R.isValidElement(c)){const p=oC(c),x=sC(u,c.props);return c.type!==R.Fragment&&(x.ref=o?Ga(o,p):p),R.cloneElement(c,x)}return R.Children.count(c)>1?R.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var rC=Symbol("radix.slottable");function iC(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===rC}function sC(r,e){const n={...e};for(const o in e){const c=r[o],u=e[o];/^on[A-Z]/.test(o)?c&&u?n[o]=(...x)=>{const b=u(...x);return c(...x),b}:c&&(n[o]=c):o==="style"?n[o]={...c,...u}:o==="className"&&(n[o]=[c,u].filter(Boolean).join(" "))}return{...r,...n}}function oC(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function Ux(r){var e,n,o="";if(typeof r=="string"||typeof r=="number")o+=r;else if(typeof r=="object")if(Array.isArray(r)){var c=r.length;for(e=0;e<c;e++)r[e]&&(n=Ux(r[e]))&&(o&&(o+=" "),o+=n)}else for(n in r)r[n]&&(o&&(o+=" "),o+=n);return o}function zx(){for(var r,e,n=0,o="",c=arguments.length;n<c;n++)(r=arguments[n])&&(e=Ux(r))&&(o&&(o+=" "),o+=e);return o}const Pp=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,jp=zx,M0=(r,e)=>n=>{var o;if(e?.variants==null)return jp(r,n?.class,n?.className);const{variants:c,defaultVariants:u}=e,p=Object.keys(c).map(y=>{const A=n?.[y],_=u?.[y];if(A===null)return null;const k=Pp(A)||Pp(_);return c[y][k]}),x=n&&Object.entries(n).reduce((y,A)=>{let[_,k]=A;return k===void 0||(y[_]=k),y},{}),b=e==null||(o=e.compoundVariants)===null||o===void 0?void 0:o.reduce((y,A)=>{let{class:_,className:k,...T}=A;return Object.entries(T).every(D=>{let[O,L]=D;return Array.isArray(L)?L.includes({...u,...x}[O]):{...u,...x}[O]===L})?[...y,_,k]:y},[]);return jp(r,p,b,n?.class,n?.className)},L0="-",aC=r=>{const e=cC(r),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=r;return{getClassGroupId:p=>{const x=p.split(L0);return x[0]===""&&x.length!==1&&x.shift(),Vx(x,e)||lC(p)},getConflictingClassGroupIds:(p,x)=>{const b=n[p]||[];return x&&o[p]?[...b,...o[p]]:b}}},Vx=(r,e)=>{if(r.length===0)return e.classGroupId;const n=r[0],o=e.nextPart.get(n),c=o?Vx(r.slice(1),o):void 0;if(c)return c;if(e.validators.length===0)return;const u=r.join(L0);return e.validators.find(({validator:p})=>p(u))?.classGroupId},Dp=/^\[(.+)\]$/,lC=r=>{if(Dp.test(r)){const e=Dp.exec(r)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},cC=r=>{const{theme:e,classGroups:n}=r,o={nextPart:new Map,validators:[]};for(const c in n)n0(n[c],o,c,e);return o},n0=(r,e,n,o)=>{r.forEach(c=>{if(typeof c=="string"){const u=c===""?e:Mp(e,c);u.classGroupId=n;return}if(typeof c=="function"){if(uC(c)){n0(c(o),e,n,o);return}e.validators.push({validator:c,classGroupId:n});return}Object.entries(c).forEach(([u,p])=>{n0(p,Mp(e,u),n,o)})})},Mp=(r,e)=>{let n=r;return e.split(L0).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n},uC=r=>r.isThemeGetter,dC=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,o=new Map;const c=(u,p)=>{n.set(u,p),e++,e>r&&(e=0,o=n,n=new Map)};return{get(u){let p=n.get(u);if(p!==void 0)return p;if((p=o.get(u))!==void 0)return c(u,p),p},set(u,p){n.has(u)?n.set(u,p):c(u,p)}}},r0="!",i0=":",hC=i0.length,fC=r=>{const{prefix:e,experimentalParseClassName:n}=r;let o=c=>{const u=[];let p=0,x=0,b=0,y;for(let D=0;D<c.length;D++){let O=c[D];if(p===0&&x===0){if(O===i0){u.push(c.slice(b,D)),b=D+hC;continue}if(O==="/"){y=D;continue}}O==="["?p++:O==="]"?p--:O==="("?x++:O===")"&&x--}const A=u.length===0?c:c.substring(b),_=gC(A),k=_!==A,T=y&&y>b?y-b:void 0;return{modifiers:u,hasImportantModifier:k,baseClassName:_,maybePostfixModifierPosition:T}};if(e){const c=e+i0,u=o;o=p=>p.startsWith(c)?u(p.substring(c.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:p,maybePostfixModifierPosition:void 0}}if(n){const c=o;o=u=>n({className:u,parseClassName:c})}return o},gC=r=>r.endsWith(r0)?r.substring(0,r.length-1):r.startsWith(r0)?r.substring(1):r,pC=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const c=[];let u=[];return o.forEach(p=>{p[0]==="["||e[p]?(c.push(...u.sort(),p),u=[]):u.push(p)}),c.push(...u.sort()),c}},mC=r=>({cache:dC(r.cacheSize),parseClassName:fC(r),sortModifiers:pC(r),...aC(r)}),xC=/\s+/,wC=(r,e)=>{const{parseClassName:n,getClassGroupId:o,getConflictingClassGroupIds:c,sortModifiers:u}=e,p=[],x=r.trim().split(xC);let b="";for(let y=x.length-1;y>=0;y-=1){const A=x[y],{isExternal:_,modifiers:k,hasImportantModifier:T,baseClassName:D,maybePostfixModifierPosition:O}=n(A);if(_){b=A+(b.length>0?" "+b:b);continue}let L=!!O,U=o(L?D.substring(0,O):D);if(!U){if(!L){b=A+(b.length>0?" "+b:b);continue}if(U=o(D),!U){b=A+(b.length>0?" "+b:b);continue}L=!1}const z=u(k).join(":"),F=T?z+r0:z,$=F+U;if(p.includes($))continue;p.push($);const se=c(U,L);for(let Y=0;Y<se.length;++Y){const V=se[Y];p.push(F+V)}b=A+(b.length>0?" "+b:b)}return b};function yC(){let r=0,e,n,o="";for(;r<arguments.length;)(e=arguments[r++])&&(n=Wx(e))&&(o&&(o+=" "),o+=n);return o}const Wx=r=>{if(typeof r=="string")return r;let e,n="";for(let o=0;o<r.length;o++)r[o]&&(e=Wx(r[o]))&&(n&&(n+=" "),n+=e);return n};function vC(r,...e){let n,o,c,u=p;function p(b){const y=e.reduce((A,_)=>_(A),r());return n=mC(y),o=n.cache.get,c=n.cache.set,u=x,x(b)}function x(b){const y=o(b);if(y)return y;const A=wC(b,n);return c(b,A),A}return function(){return u(yC.apply(null,arguments))}}const Pn=r=>{const e=n=>n[r]||[];return e.isThemeGetter=!0,e},Hx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$x=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bC=/^\d+\/\d+$/,CC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,EC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,AC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_C=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xa=r=>bC.test(r),_t=r=>!!r&&!Number.isNaN(Number(r)),Ms=r=>!!r&&Number.isInteger(Number(r)),cf=r=>r.endsWith("%")&&_t(r.slice(0,-1)),ss=r=>CC.test(r),NC=()=>!0,IC=r=>EC.test(r)&&!SC.test(r),Gx=()=>!1,TC=r=>AC.test(r),RC=r=>_C.test(r),kC=r=>!$e(r)&&!Ge(r),OC=r=>qa(r,Yx,Gx),$e=r=>Hx.test(r),Ao=r=>qa(r,Kx,IC),uf=r=>qa(r,LC,_t),Lp=r=>qa(r,qx,Gx),PC=r=>qa(r,Xx,RC),yu=r=>qa(r,Zx,TC),Ge=r=>$x.test(r),Vl=r=>Xa(r,Kx),jC=r=>Xa(r,BC),Bp=r=>Xa(r,qx),DC=r=>Xa(r,Yx),MC=r=>Xa(r,Xx),vu=r=>Xa(r,Zx,!0),qa=(r,e,n)=>{const o=Hx.exec(r);return o?o[1]?e(o[1]):n(o[2]):!1},Xa=(r,e,n=!1)=>{const o=$x.exec(r);return o?o[1]?e(o[1]):n:!1},qx=r=>r==="position"||r==="percentage",Xx=r=>r==="image"||r==="url",Yx=r=>r==="length"||r==="size"||r==="bg-size",Kx=r=>r==="length",LC=r=>r==="number",BC=r=>r==="family-name",Zx=r=>r==="shadow",FC=()=>{const r=Pn("color"),e=Pn("font"),n=Pn("text"),o=Pn("font-weight"),c=Pn("tracking"),u=Pn("leading"),p=Pn("breakpoint"),x=Pn("container"),b=Pn("spacing"),y=Pn("radius"),A=Pn("shadow"),_=Pn("inset-shadow"),k=Pn("text-shadow"),T=Pn("drop-shadow"),D=Pn("blur"),O=Pn("perspective"),L=Pn("aspect"),U=Pn("ease"),z=Pn("animate"),F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],se=()=>[...$(),Ge,$e],Y=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto","contain","none"],X=()=>[Ge,$e,b],W=()=>[xa,"full","auto",...X()],ye=()=>[Ms,"none","subgrid",Ge,$e],be=()=>["auto",{span:["full",Ms,Ge,$e]},Ms,Ge,$e],de=()=>[Ms,"auto",Ge,$e],ve=()=>["auto","min","max","fr",Ge,$e],Ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ie=()=>["start","end","center","stretch","center-safe","end-safe"],ce=()=>["auto",...X()],ge=()=>[xa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...X()],te=()=>[r,Ge,$e],re=()=>[...$(),Bp,Lp,{position:[Ge,$e]}],fe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",DC,OC,{size:[Ge,$e]}],ue=()=>[cf,Vl,Ao],Ae=()=>["","none","full",y,Ge,$e],Te=()=>["",_t,Vl,Ao],Fe=()=>["solid","dashed","dotted","double"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pe=()=>[_t,cf,Bp,Lp],Ee=()=>["","none",D,Ge,$e],Le=()=>["none",_t,Ge,$e],Xe=()=>["none",_t,Ge,$e],tt=()=>[_t,Ge,$e],vt=()=>[xa,"full",...X()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ss],breakpoint:[ss],color:[NC],container:[ss],"drop-shadow":[ss],ease:["in","out","in-out"],font:[kC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ss],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ss],shadow:[ss],spacing:["px",_t],text:[ss],"text-shadow":[ss],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xa,$e,Ge,L]}],container:["container"],columns:[{columns:[_t,$e,Ge,x]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:se()}],overflow:[{overflow:Y()}],"overflow-x":[{"overflow-x":Y()}],"overflow-y":[{"overflow-y":Y()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[Ms,"auto",Ge,$e]}],basis:[{basis:[xa,"full","auto",x,...X()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_t,xa,"auto","initial","none",$e]}],grow:[{grow:["",_t,Ge,$e]}],shrink:[{shrink:["",_t,Ge,$e]}],order:[{order:[Ms,"first","last","none",Ge,$e]}],"grid-cols":[{"grid-cols":ye()}],"col-start-end":[{col:be()}],"col-start":[{"col-start":de()}],"col-end":[{"col-end":de()}],"grid-rows":[{"grid-rows":ye()}],"row-start-end":[{row:be()}],"row-start":[{"row-start":de()}],"row-end":[{"row-end":de()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ve()}],"auto-rows":[{"auto-rows":ve()}],gap:[{gap:X()}],"gap-x":[{"gap-x":X()}],"gap-y":[{"gap-y":X()}],"justify-content":[{justify:[...Ce(),"normal"]}],"justify-items":[{"justify-items":[...ie(),"normal"]}],"justify-self":[{"justify-self":["auto",...ie()]}],"align-content":[{content:["normal",...Ce()]}],"align-items":[{items:[...ie(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ie(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ce()}],"place-items":[{"place-items":[...ie(),"baseline"]}],"place-self":[{"place-self":["auto",...ie()]}],p:[{p:X()}],px:[{px:X()}],py:[{py:X()}],ps:[{ps:X()}],pe:[{pe:X()}],pt:[{pt:X()}],pr:[{pr:X()}],pb:[{pb:X()}],pl:[{pl:X()}],m:[{m:ce()}],mx:[{mx:ce()}],my:[{my:ce()}],ms:[{ms:ce()}],me:[{me:ce()}],mt:[{mt:ce()}],mr:[{mr:ce()}],mb:[{mb:ce()}],ml:[{ml:ce()}],"space-x":[{"space-x":X()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":X()}],"space-y-reverse":["space-y-reverse"],size:[{size:ge()}],w:[{w:[x,"screen",...ge()]}],"min-w":[{"min-w":[x,"screen","none",...ge()]}],"max-w":[{"max-w":[x,"screen","none","prose",{screen:[p]},...ge()]}],h:[{h:["screen","lh",...ge()]}],"min-h":[{"min-h":["screen","lh","none",...ge()]}],"max-h":[{"max-h":["screen","lh",...ge()]}],"font-size":[{text:["base",n,Vl,Ao]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,Ge,uf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",cf,$e]}],"font-family":[{font:[jC,$e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[c,Ge,$e]}],"line-clamp":[{"line-clamp":[_t,"none",Ge,uf]}],leading:[{leading:[u,...X()]}],"list-image":[{"list-image":["none",Ge,$e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ge,$e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:te()}],"text-color":[{text:te()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[_t,"from-font","auto",Ge,Ao]}],"text-decoration-color":[{decoration:te()}],"underline-offset":[{"underline-offset":[_t,"auto",Ge,$e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge,$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge,$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:fe()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ms,Ge,$e],radial:["",Ge,$e],conic:[Ms,Ge,$e]},MC,PC]}],"bg-color":[{bg:te()}],"gradient-from-pos":[{from:ue()}],"gradient-via-pos":[{via:ue()}],"gradient-to-pos":[{to:ue()}],"gradient-from":[{from:te()}],"gradient-via":[{via:te()}],"gradient-to":[{to:te()}],rounded:[{rounded:Ae()}],"rounded-s":[{"rounded-s":Ae()}],"rounded-e":[{"rounded-e":Ae()}],"rounded-t":[{"rounded-t":Ae()}],"rounded-r":[{"rounded-r":Ae()}],"rounded-b":[{"rounded-b":Ae()}],"rounded-l":[{"rounded-l":Ae()}],"rounded-ss":[{"rounded-ss":Ae()}],"rounded-se":[{"rounded-se":Ae()}],"rounded-ee":[{"rounded-ee":Ae()}],"rounded-es":[{"rounded-es":Ae()}],"rounded-tl":[{"rounded-tl":Ae()}],"rounded-tr":[{"rounded-tr":Ae()}],"rounded-br":[{"rounded-br":Ae()}],"rounded-bl":[{"rounded-bl":Ae()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Fe(),"hidden","none"]}],"divide-style":[{divide:[...Fe(),"hidden","none"]}],"border-color":[{border:te()}],"border-color-x":[{"border-x":te()}],"border-color-y":[{"border-y":te()}],"border-color-s":[{"border-s":te()}],"border-color-e":[{"border-e":te()}],"border-color-t":[{"border-t":te()}],"border-color-r":[{"border-r":te()}],"border-color-b":[{"border-b":te()}],"border-color-l":[{"border-l":te()}],"divide-color":[{divide:te()}],"outline-style":[{outline:[...Fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_t,Ge,$e]}],"outline-w":[{outline:["",_t,Vl,Ao]}],"outline-color":[{outline:te()}],shadow:[{shadow:["","none",A,vu,yu]}],"shadow-color":[{shadow:te()}],"inset-shadow":[{"inset-shadow":["none",_,vu,yu]}],"inset-shadow-color":[{"inset-shadow":te()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:te()}],"ring-offset-w":[{"ring-offset":[_t,Ao]}],"ring-offset-color":[{"ring-offset":te()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":te()}],"text-shadow":[{"text-shadow":["none",k,vu,yu]}],"text-shadow-color":[{"text-shadow":te()}],opacity:[{opacity:[_t,Ge,$e]}],"mix-blend":[{"mix-blend":[...ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_t]}],"mask-image-linear-from-pos":[{"mask-linear-from":pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":pe()}],"mask-image-linear-from-color":[{"mask-linear-from":te()}],"mask-image-linear-to-color":[{"mask-linear-to":te()}],"mask-image-t-from-pos":[{"mask-t-from":pe()}],"mask-image-t-to-pos":[{"mask-t-to":pe()}],"mask-image-t-from-color":[{"mask-t-from":te()}],"mask-image-t-to-color":[{"mask-t-to":te()}],"mask-image-r-from-pos":[{"mask-r-from":pe()}],"mask-image-r-to-pos":[{"mask-r-to":pe()}],"mask-image-r-from-color":[{"mask-r-from":te()}],"mask-image-r-to-color":[{"mask-r-to":te()}],"mask-image-b-from-pos":[{"mask-b-from":pe()}],"mask-image-b-to-pos":[{"mask-b-to":pe()}],"mask-image-b-from-color":[{"mask-b-from":te()}],"mask-image-b-to-color":[{"mask-b-to":te()}],"mask-image-l-from-pos":[{"mask-l-from":pe()}],"mask-image-l-to-pos":[{"mask-l-to":pe()}],"mask-image-l-from-color":[{"mask-l-from":te()}],"mask-image-l-to-color":[{"mask-l-to":te()}],"mask-image-x-from-pos":[{"mask-x-from":pe()}],"mask-image-x-to-pos":[{"mask-x-to":pe()}],"mask-image-x-from-color":[{"mask-x-from":te()}],"mask-image-x-to-color":[{"mask-x-to":te()}],"mask-image-y-from-pos":[{"mask-y-from":pe()}],"mask-image-y-to-pos":[{"mask-y-to":pe()}],"mask-image-y-from-color":[{"mask-y-from":te()}],"mask-image-y-to-color":[{"mask-y-to":te()}],"mask-image-radial":[{"mask-radial":[Ge,$e]}],"mask-image-radial-from-pos":[{"mask-radial-from":pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":pe()}],"mask-image-radial-from-color":[{"mask-radial-from":te()}],"mask-image-radial-to-color":[{"mask-radial-to":te()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":$()}],"mask-image-conic-pos":[{"mask-conic":[_t]}],"mask-image-conic-from-pos":[{"mask-conic-from":pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":pe()}],"mask-image-conic-from-color":[{"mask-conic-from":te()}],"mask-image-conic-to-color":[{"mask-conic-to":te()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:fe()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ge,$e]}],filter:[{filter:["","none",Ge,$e]}],blur:[{blur:Ee()}],brightness:[{brightness:[_t,Ge,$e]}],contrast:[{contrast:[_t,Ge,$e]}],"drop-shadow":[{"drop-shadow":["","none",T,vu,yu]}],"drop-shadow-color":[{"drop-shadow":te()}],grayscale:[{grayscale:["",_t,Ge,$e]}],"hue-rotate":[{"hue-rotate":[_t,Ge,$e]}],invert:[{invert:["",_t,Ge,$e]}],saturate:[{saturate:[_t,Ge,$e]}],sepia:[{sepia:["",_t,Ge,$e]}],"backdrop-filter":[{"backdrop-filter":["","none",Ge,$e]}],"backdrop-blur":[{"backdrop-blur":Ee()}],"backdrop-brightness":[{"backdrop-brightness":[_t,Ge,$e]}],"backdrop-contrast":[{"backdrop-contrast":[_t,Ge,$e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_t,Ge,$e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_t,Ge,$e]}],"backdrop-invert":[{"backdrop-invert":["",_t,Ge,$e]}],"backdrop-opacity":[{"backdrop-opacity":[_t,Ge,$e]}],"backdrop-saturate":[{"backdrop-saturate":[_t,Ge,$e]}],"backdrop-sepia":[{"backdrop-sepia":["",_t,Ge,$e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":X()}],"border-spacing-x":[{"border-spacing-x":X()}],"border-spacing-y":[{"border-spacing-y":X()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ge,$e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_t,"initial",Ge,$e]}],ease:[{ease:["linear","initial",U,Ge,$e]}],delay:[{delay:[_t,Ge,$e]}],animate:[{animate:["none",z,Ge,$e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[O,Ge,$e]}],"perspective-origin":[{"perspective-origin":se()}],rotate:[{rotate:Le()}],"rotate-x":[{"rotate-x":Le()}],"rotate-y":[{"rotate-y":Le()}],"rotate-z":[{"rotate-z":Le()}],scale:[{scale:Xe()}],"scale-x":[{"scale-x":Xe()}],"scale-y":[{"scale-y":Xe()}],"scale-z":[{"scale-z":Xe()}],"scale-3d":["scale-3d"],skew:[{skew:tt()}],"skew-x":[{"skew-x":tt()}],"skew-y":[{"skew-y":tt()}],transform:[{transform:[Ge,$e,"","none","gpu","cpu"]}],"transform-origin":[{origin:se()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:vt()}],"translate-x":[{"translate-x":vt()}],"translate-y":[{"translate-y":vt()}],"translate-z":[{"translate-z":vt()}],"translate-none":["translate-none"],accent:[{accent:te()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:te()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge,$e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge,$e]}],fill:[{fill:["none",...te()]}],"stroke-w":[{stroke:[_t,Vl,Ao,uf]}],stroke:[{stroke:["none",...te()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UC=vC(FC);function yt(...r){return UC(zx(r))}const zC=M0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),qe=R.forwardRef(({className:r,variant:e,size:n,asChild:o=!1,...c},u)=>{const p=o?Fx:"button";return m.jsx(p,{ref:u,"data-slot":"button",className:yt(zC({variant:e,size:n,className:r})),...c})});qe.displayName="Button";function ut({className:r,type:e,...n}){return m.jsx("input",{type:e,"data-slot":"input",className:yt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...n})}var Ya=Lx();const VC=sc(Ya);var WC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],HC=WC.reduce((r,e)=>{const n=D0(`Primitive.${e}`),o=R.forwardRef((c,u)=>{const{asChild:p,...x}=c,b=p?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(b,{...x,ref:u})});return o.displayName=`Primitive.${e}`,{...r,[e]:o}},{}),$C="Label",Qx=R.forwardRef((r,e)=>m.jsx(HC.label,{...r,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(r.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Qx.displayName=$C;var GC=Qx;function Qe({className:r,...e}){return m.jsx(GC,{"data-slot":"label",className:yt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...e})}function wi({className:r,...e}){return m.jsx("div",{"data-slot":"card",className:yt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...e})}function Vs({className:r,...e}){return m.jsx("div",{"data-slot":"card-header",className:yt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function Ws({className:r,...e}){return m.jsx("h4",{"data-slot":"card-title",className:yt("leading-none",r),...e})}function Wa({className:r,...e}){return m.jsx("p",{"data-slot":"card-description",className:yt("text-muted-foreground",r),...e})}function Bi({className:r,...e}){return m.jsx("div",{"data-slot":"card-content",className:yt("px-6 [&:last-child]:pb-6",r),...e})}function qC({className:r,...e}){return m.jsx("div",{"data-slot":"card-footer",className:yt("flex items-center px-6 pb-6 [.border-t]:pt-6",r),...e})}const XC=M0("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Ra({className:r,variant:e,...n}){return m.jsx("div",{"data-slot":"alert",role:"alert",className:yt(XC({variant:e}),r),...n})}function YC({className:r,...e}){return m.jsx("div",{"data-slot":"alert-title",className:yt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",r),...e})}function ka({className:r,...e}){return m.jsx("div",{"data-slot":"alert-description",className:yt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...e})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),Fp=r=>{const e=ZC(r);return e.charAt(0).toUpperCase()+e.slice(1)},Jx=(...r)=>r.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=R.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:u,iconNode:p,...x},b)=>R.createElement("svg",{ref:b,...QC,width:e,height:e,stroke:r,strokeWidth:o?Number(n)*24/Number(e):n,className:Jx("lucide",c),...x},[...p.map(([y,A])=>R.createElement(y,A)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(r,e)=>{const n=R.forwardRef(({className:o,...c},u)=>R.createElement(JC,{ref:u,iconNode:e,className:Jx(`lucide-${KC(Fp(r))}`,`lucide-${r}`,o),...c}));return n.displayName=Fp(r),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],tE=dt("align-center",eE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],rE=dt("align-left",nE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],sE=dt("align-right",iE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ew=dt("arrow-left",oE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],lE=dt("arrow-right",aE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],uE=dt("bold",cE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],hE=dt("calendar-days",dE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zl=dt("calendar",fE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Up=dt("camera",gE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mE=dt("chart-column",pE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],tw=dt("check",xE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],B0=dt("chevron-down",wE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],vE=dt("chevron-up",yE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qu=dt("circle-alert",bE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ko=dt("circle-check",CE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],SE=dt("circle-x",EE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_E=dt("circle",AE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],nw=dt("clock",NE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],rw=dt("database",IE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],iw=dt("download",TE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],kE=dt("ellipsis-vertical",RE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],PE=dt("eye",OE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],DE=dt("image",jE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],LE=dt("info",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],FE=dt("italic",BE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],zE=dt("link-2",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fi=dt("loader-circle",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zp=dt("lock",WE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],$E=dt("log-in",HE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],sw=dt("log-out",GE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],XE=dt("mail",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],F0=dt("map-pin",YE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"M5 12h14",key:"1ays0h"}]],ZE=dt("minus",KE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],JE=dt("move",QE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],ow=dt("palette",eS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Po=dt("plus",tS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],rS=dt("printer",nS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],aw=dt("qr-code",iS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],oS=dt("refresh-cw",sS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lw=dt("save",aS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],cw=dt("search",lS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],uS=dt("settings-2",cS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hS=dt("settings",dS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Vp=dt("shield",fS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],uw=dt("square-pen",gS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],oc=dt("trash-2",pS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dw=dt("triangle-alert",mS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],bu=dt("type",xS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],hd=dt("upload",wS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Xu=dt("users",yS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fd=dt("x",vS);var s0=function(r,e){return s0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(n[c]=o[c])},s0(r,e)};function hw(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s0(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qr=function(){return Qr=Object.assign||function(e){for(var n,o=1,c=arguments.length;o<c;o++){n=arguments[o];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},Qr.apply(this,arguments)};function qs(r,e){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(r);c<o.length;c++)e.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(r,o[c])&&(n[o[c]]=r[o[c]]);return n}function fw(r,e,n,o){var c=arguments.length,u=c<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,n):o,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,e,n,o);else for(var x=r.length-1;x>=0;x--)(p=r[x])&&(u=(c<3?p(u):c>3?p(e,n,u):p(e,n))||u);return c>3&&u&&Object.defineProperty(e,n,u),u}function gw(r,e){return function(n,o){e(n,o,r)}}function pw(r,e,n,o,c,u){function p(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var x=o.kind,b=x==="getter"?"get":x==="setter"?"set":"value",y=!e&&r?o.static?r:r.prototype:null,A=e||(y?Object.getOwnPropertyDescriptor(y,o.name):{}),_,k=!1,T=n.length-1;T>=0;T--){var D={};for(var O in o)D[O]=O==="access"?{}:o[O];for(var O in o.access)D.access[O]=o.access[O];D.addInitializer=function(U){if(k)throw new TypeError("Cannot add initializers after decoration has completed");u.push(p(U||null))};var L=(0,n[T])(x==="accessor"?{get:A.get,set:A.set}:A[b],D);if(x==="accessor"){if(L===void 0)continue;if(L===null||typeof L!="object")throw new TypeError("Object expected");(_=p(L.get))&&(A.get=_),(_=p(L.set))&&(A.set=_),(_=p(L.init))&&c.unshift(_)}else(_=p(L))&&(x==="field"?c.unshift(_):A[b]=_)}y&&Object.defineProperty(y,o.name,A),k=!0}function mw(r,e,n){for(var o=arguments.length>2,c=0;c<e.length;c++)n=o?e[c].call(r,n):e[c].call(r);return o?n:void 0}function xw(r){return typeof r=="symbol"?r:"".concat(r)}function ww(r,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function yw(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Ze(r,e,n,o){function c(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function x(A){try{y(o.next(A))}catch(_){p(_)}}function b(A){try{y(o.throw(A))}catch(_){p(_)}}function y(A){A.done?u(A.value):c(A.value).then(x,b)}y((o=o.apply(r,e||[])).next())})}function vw(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,p=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return p.next=x(0),p.throw=x(1),p.return=x(2),typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(y){return function(A){return b([y,A])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,c&&(u=y[0]&2?c.return:y[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,y[1])).done)return u;switch(c=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,c=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(A){y=[6,A],c=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var gd=Object.create?(function(r,e,n,o){o===void 0&&(o=n);var c=Object.getOwnPropertyDescriptor(e,n);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,o,c)}):(function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]});function bw(r,e){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&gd(e,r,n)}function Yu(r){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&r[e],o=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U0(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var o=n.call(r),c,u=[],p;try{for(;(e===void 0||e-- >0)&&!(c=o.next()).done;)u.push(c.value)}catch(x){p={error:x}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(p)throw p.error}}return u}function Cw(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(U0(arguments[e]));return r}function Ew(){for(var r=0,e=0,n=arguments.length;e<n;e++)r+=arguments[e].length;for(var o=Array(r),c=0,e=0;e<n;e++)for(var u=arguments[e],p=0,x=u.length;p<x;p++,c++)o[c]=u[p];return o}function z0(r,e,n){if(n||arguments.length===2)for(var o=0,c=e.length,u;o<c;o++)(u||!(o in e))&&(u||(u=Array.prototype.slice.call(e,0,o)),u[o]=e[o]);return r.concat(u||Array.prototype.slice.call(e))}function Ha(r){return this instanceof Ha?(this.v=r,this):new Ha(r)}function Sw(r,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(r,e||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),x("next"),x("throw"),x("return",p),c[Symbol.asyncIterator]=function(){return this},c;function p(T){return function(D){return Promise.resolve(D).then(T,_)}}function x(T,D){o[T]&&(c[T]=function(O){return new Promise(function(L,U){u.push([T,O,L,U])>1||b(T,O)})},D&&(c[T]=D(c[T])))}function b(T,D){try{y(o[T](D))}catch(O){k(u[0][3],O)}}function y(T){T.value instanceof Ha?Promise.resolve(T.value.v).then(A,_):k(u[0][2],T)}function A(T){b("next",T)}function _(T){b("throw",T)}function k(T,D){T(D),u.shift(),u.length&&b(u[0][0],u[0][1])}}function Aw(r){var e,n;return e={},o("next"),o("throw",function(c){throw c}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(c,u){e[c]=r[c]?function(p){return(n=!n)?{value:Ha(r[c](p)),done:!1}:u?u(p):p}:u}}function _w(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],n;return e?e.call(r):(r=typeof Yu=="function"?Yu(r):r[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(u){n[u]=r[u]&&function(p){return new Promise(function(x,b){p=r[u](p),c(x,b,p.done,p.value)})}}function c(u,p,x,b){Promise.resolve(b).then(function(y){u({value:y,done:x})},p)}}function Nw(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var bS=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},o0=function(r){return o0=Object.getOwnPropertyNames||function(e){var n=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[n.length]=o);return n},o0(r)};function Iw(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n=o0(r),o=0;o<n.length;o++)n[o]!=="default"&&gd(e,r,n[o]);return bS(e,r),e}function Tw(r){return r&&r.__esModule?r:{default:r}}function Rw(r,e,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(r):o?o.value:e.get(r)}function kw(r,e,n,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!c:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(r,n):c?c.value=n:e.set(r,n),n}function Ow(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function Pw(r,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var o,c;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=e[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=e[Symbol.dispose],n&&(c=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");c&&(o=function(){try{c.call(this)}catch(u){return Promise.reject(u)}}),r.stack.push({value:e,dispose:o,async:n})}else n&&r.stack.push({async:!0});return e}var CS=typeof SuppressedError=="function"?SuppressedError:function(r,e,n){var o=new Error(n);return o.name="SuppressedError",o.error=r,o.suppressed=e,o};function jw(r){function e(u){r.error=r.hasError?new CS(u,r.error,"An error was suppressed during disposal."):u,r.hasError=!0}var n,o=0;function c(){for(;n=r.stack.pop();)try{if(!n.async&&o===1)return o=0,r.stack.push(n),Promise.resolve().then(c);if(n.dispose){var u=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(u).then(c,function(p){return e(p),c()})}else o|=1}catch(p){e(p)}if(o===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return c()}function Dw(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,c,u,p){return o?e?".jsx":".js":c&&(!u||!p)?n:c+u+"."+p.toLowerCase()+"js"}):r}const ES={__extends:hw,__assign:Qr,__rest:qs,__decorate:fw,__param:gw,__esDecorate:pw,__runInitializers:mw,__propKey:xw,__setFunctionName:ww,__metadata:yw,__awaiter:Ze,__generator:vw,__createBinding:gd,__exportStar:bw,__values:Yu,__read:U0,__spread:Cw,__spreadArrays:Ew,__spreadArray:z0,__await:Ha,__asyncGenerator:Sw,__asyncDelegator:Aw,__asyncValues:_w,__makeTemplateObject:Nw,__importStar:Iw,__importDefault:Tw,__classPrivateFieldGet:Rw,__classPrivateFieldSet:kw,__classPrivateFieldIn:Ow,__addDisposableResource:Pw,__disposeResources:jw,__rewriteRelativeImportExtension:Dw},SS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Pw,get __assign(){return Qr},__asyncDelegator:Aw,__asyncGenerator:Sw,__asyncValues:_w,__await:Ha,__awaiter:Ze,__classPrivateFieldGet:Rw,__classPrivateFieldIn:Ow,__classPrivateFieldSet:kw,__createBinding:gd,__decorate:fw,__disposeResources:jw,__esDecorate:pw,__exportStar:bw,__extends:hw,__generator:vw,__importDefault:Tw,__importStar:Iw,__makeTemplateObject:Nw,__metadata:yw,__param:gw,__propKey:xw,__read:U0,__rest:qs,__rewriteRelativeImportExtension:Dw,__runInitializers:mw,__setFunctionName:ww,__spread:Cw,__spreadArray:z0,__spreadArrays:Ew,__values:Yu,default:ES},Symbol.toStringTag,{value:"Module"})),AS=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class V0 extends Error{constructor(e,n="FunctionsError",o){super(e),this.name=n,this.context=o}}class Wp extends V0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Hp extends V0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $p extends V0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var a0;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(a0||(a0={}));class _S{constructor(e,{headers:n={},customFetch:o,region:c=a0.Any}={}){this.url=e,this.headers=n,this.region=c,this.fetch=AS(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ze(this,arguments,void 0,function*(n,o={}){var c;try{const{headers:u,method:p,body:x,signal:b}=o;let y={},{region:A}=o;A||(A=this.region);const _=new URL(`${this.url}/${n}`);A&&A!=="any"&&(y["x-region"]=A,_.searchParams.set("forceFunctionRegion",A));let k;x&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&x instanceof Blob||x instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",k=x):typeof x=="string"?(y["Content-Type"]="text/plain",k=x):typeof FormData<"u"&&x instanceof FormData?k=x:(y["Content-Type"]="application/json",k=JSON.stringify(x)):k=x;const T=yield this.fetch(_.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:k,signal:b}).catch(U=>{throw U.name==="AbortError"?U:new Wp(U)}),D=T.headers.get("x-relay-error");if(D&&D==="true")throw new Hp(T);if(!T.ok)throw new $p(T);let O=((c=T.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),L;return O==="application/json"?L=yield T.json():O==="application/octet-stream"||O==="application/pdf"?L=yield T.blob():O==="text/event-stream"?L=T:O==="multipart/form-data"?L=yield T.formData():L=yield T.text(),{data:L,error:null,response:T}}catch(u){return u instanceof Error&&u.name==="AbortError"?{data:null,error:new Wp(u)}:{data:null,error:u,response:u instanceof $p||u instanceof Hp?u.context:void 0}}})}}var sr={};const Ka=$b(SS);var Cu={},Eu={},Su={},Au={},_u={},Nu={},Gp;function Mw(){if(Gp)return Nu;Gp=1,Object.defineProperty(Nu,"__esModule",{value:!0});class r extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Nu.default=r,Nu}var qp;function Lw(){if(qp)return _u;qp=1,Object.defineProperty(_u,"__esModule",{value:!0});const e=Ka.__importDefault(Mw());class n{constructor(c){var u,p;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(p=c.isMaybeSingle)!==null&&p!==void 0?p:!1,c.fetch?this.fetch=c.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let x=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async b=>{var y,A,_,k;let T=null,D=null,O=null,L=b.status,U=b.statusText;if(b.ok){if(this.method!=="HEAD"){const se=await b.text();se===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?D=se:D=JSON.parse(se))}const F=(A=this.headers.get("Prefer"))===null||A===void 0?void 0:A.match(/count=(exact|planned|estimated)/),$=(_=b.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");F&&$&&$.length>1&&(O=parseInt($[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(D)&&(D.length>1?(T={code:"PGRST116",details:`Results contain ${D.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},D=null,O=null,L=406,U="Not Acceptable"):D.length===1?D=D[0]:D=null)}else{const F=await b.text();try{T=JSON.parse(F),Array.isArray(T)&&b.status===404&&(D=[],T=null,L=200,U="OK")}catch{b.status===404&&F===""?(L=204,U="No Content"):T={message:F}}if(T&&this.isMaybeSingle&&(!((k=T?.details)===null||k===void 0)&&k.includes("0 rows"))&&(T=null,L=200,U="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:D,count:O,status:L,statusText:U}});return this.shouldThrowOnError||(x=x.catch(b=>{var y,A,_;return{error:{message:`${(y=b?.name)!==null&&y!==void 0?y:"FetchError"}: ${b?.message}`,details:`${(A=b?.stack)!==null&&A!==void 0?A:""}`,hint:"",code:`${(_=b?.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),x.then(c,u)}returns(){return this}overrideTypes(){return this}}return _u.default=n,_u}var Xp;function Bw(){if(Xp)return Au;Xp=1,Object.defineProperty(Au,"__esModule",{value:!0});const e=Ka.__importDefault(Lw());class n extends e.default{select(c){let u=!1;const p=(c??"*").split("").map(x=>/\s/.test(x)&&!u?"":(x==='"'&&(u=!u),x)).join("");return this.url.searchParams.set("select",p),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:u=!0,nullsFirst:p,foreignTable:x,referencedTable:b=x}={}){const y=b?`${b}.order`:"order",A=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${A?`${A},`:""}${c}.${u?"asc":"desc"}${p===void 0?"":p?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:u,referencedTable:p=u}={}){const x=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(x,`${c}`),this}range(c,u,{foreignTable:p,referencedTable:x=p}={}){const b=typeof x>"u"?"offset":`${x}.offset`,y=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(b,`${c}`),this.url.searchParams.set(y,`${u-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:u=!1,settings:p=!1,buffers:x=!1,wal:b=!1,format:y="text"}={}){var A;const _=[c?"analyze":null,u?"verbose":null,p?"settings":null,x?"buffers":null,b?"wal":null].filter(Boolean).join("|"),k=(A=this.headers.get("Accept"))!==null&&A!==void 0?A:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${k}"; options=${_};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}}return Au.default=n,Au}var Yp;function W0(){if(Yp)return Su;Yp=1,Object.defineProperty(Su,"__esModule",{value:!0});const e=Ka.__importDefault(Bw()),n=new RegExp("[,()]");class o extends e.default{eq(u,p){return this.url.searchParams.append(u,`eq.${p}`),this}neq(u,p){return this.url.searchParams.append(u,`neq.${p}`),this}gt(u,p){return this.url.searchParams.append(u,`gt.${p}`),this}gte(u,p){return this.url.searchParams.append(u,`gte.${p}`),this}lt(u,p){return this.url.searchParams.append(u,`lt.${p}`),this}lte(u,p){return this.url.searchParams.append(u,`lte.${p}`),this}like(u,p){return this.url.searchParams.append(u,`like.${p}`),this}likeAllOf(u,p){return this.url.searchParams.append(u,`like(all).{${p.join(",")}}`),this}likeAnyOf(u,p){return this.url.searchParams.append(u,`like(any).{${p.join(",")}}`),this}ilike(u,p){return this.url.searchParams.append(u,`ilike.${p}`),this}ilikeAllOf(u,p){return this.url.searchParams.append(u,`ilike(all).{${p.join(",")}}`),this}ilikeAnyOf(u,p){return this.url.searchParams.append(u,`ilike(any).{${p.join(",")}}`),this}is(u,p){return this.url.searchParams.append(u,`is.${p}`),this}in(u,p){const x=Array.from(new Set(p)).map(b=>typeof b=="string"&&n.test(b)?`"${b}"`:`${b}`).join(",");return this.url.searchParams.append(u,`in.(${x})`),this}contains(u,p){return typeof p=="string"?this.url.searchParams.append(u,`cs.${p}`):Array.isArray(p)?this.url.searchParams.append(u,`cs.{${p.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(p)}`),this}containedBy(u,p){return typeof p=="string"?this.url.searchParams.append(u,`cd.${p}`):Array.isArray(p)?this.url.searchParams.append(u,`cd.{${p.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(p)}`),this}rangeGt(u,p){return this.url.searchParams.append(u,`sr.${p}`),this}rangeGte(u,p){return this.url.searchParams.append(u,`nxl.${p}`),this}rangeLt(u,p){return this.url.searchParams.append(u,`sl.${p}`),this}rangeLte(u,p){return this.url.searchParams.append(u,`nxr.${p}`),this}rangeAdjacent(u,p){return this.url.searchParams.append(u,`adj.${p}`),this}overlaps(u,p){return typeof p=="string"?this.url.searchParams.append(u,`ov.${p}`):this.url.searchParams.append(u,`ov.{${p.join(",")}}`),this}textSearch(u,p,{config:x,type:b}={}){let y="";b==="plain"?y="pl":b==="phrase"?y="ph":b==="websearch"&&(y="w");const A=x===void 0?"":`(${x})`;return this.url.searchParams.append(u,`${y}fts${A}.${p}`),this}match(u){return Object.entries(u).forEach(([p,x])=>{this.url.searchParams.append(p,`eq.${x}`)}),this}not(u,p,x){return this.url.searchParams.append(u,`not.${p}.${x}`),this}or(u,{foreignTable:p,referencedTable:x=p}={}){const b=x?`${x}.or`:"or";return this.url.searchParams.append(b,`(${u})`),this}filter(u,p,x){return this.url.searchParams.append(u,`${p}.${x}`),this}}return Su.default=o,Su}var Kp;function Fw(){if(Kp)return Eu;Kp=1,Object.defineProperty(Eu,"__esModule",{value:!0});const e=Ka.__importDefault(W0());class n{constructor(c,{headers:u={},schema:p,fetch:x}){this.url=c,this.headers=new Headers(u),this.schema=p,this.fetch=x}select(c,u){const{head:p=!1,count:x}=u??{},b=p?"HEAD":"GET";let y=!1;const A=(c??"*").split("").map(_=>/\s/.test(_)&&!y?"":(_==='"'&&(y=!y),_)).join("");return this.url.searchParams.set("select",A),x&&this.headers.append("Prefer",`count=${x}`),new e.default({method:b,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(c,{count:u,defaultToNull:p=!0}={}){var x;const b="POST";if(u&&this.headers.append("Prefer",`count=${u}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const y=c.reduce((A,_)=>A.concat(Object.keys(_)),[]);if(y.length>0){const A=[...new Set(y)].map(_=>`"${_}"`);this.url.searchParams.set("columns",A.join(","))}}return new e.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}upsert(c,{onConflict:u,ignoreDuplicates:p=!1,count:x,defaultToNull:b=!0}={}){var y;const A="POST";if(this.headers.append("Prefer",`resolution=${p?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),x&&this.headers.append("Prefer",`count=${x}`),b||this.headers.append("Prefer","missing=default"),Array.isArray(c)){const _=c.reduce((k,T)=>k.concat(Object.keys(T)),[]);if(_.length>0){const k=[...new Set(_)].map(T=>`"${T}"`);this.url.searchParams.set("columns",k.join(","))}}return new e.default({method:A,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(c,{count:u}={}){var p;const x="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}delete({count:c}={}){var u;const p="DELETE";return c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Eu.default=n,Eu}var Zp;function NS(){if(Zp)return Cu;Zp=1,Object.defineProperty(Cu,"__esModule",{value:!0});const r=Ka,e=r.__importDefault(Fw()),n=r.__importDefault(W0());class o{constructor(u,{headers:p={},schema:x,fetch:b}={}){this.url=u,this.headers=new Headers(p),this.schemaName=x,this.fetch=b}from(u){const p=new URL(`${this.url}/${u}`);return new e.default(p,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,p={},{head:x=!1,get:b=!1,count:y}={}){var A;let _;const k=new URL(`${this.url}/rpc/${u}`);let T;x||b?(_=x?"HEAD":"GET",Object.entries(p).filter(([O,L])=>L!==void 0).map(([O,L])=>[O,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([O,L])=>{k.searchParams.append(O,L)})):(_="POST",T=p);const D=new Headers(this.headers);return y&&D.set("Prefer",`count=${y}`),new n.default({method:_,url:k,headers:D,schema:this.schemaName,body:T,fetch:(A=this.fetch)!==null&&A!==void 0?A:fetch})}}return Cu.default=o,Cu}var Qp;function IS(){if(Qp)return sr;Qp=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.PostgrestError=sr.PostgrestBuilder=sr.PostgrestTransformBuilder=sr.PostgrestFilterBuilder=sr.PostgrestQueryBuilder=sr.PostgrestClient=void 0;const r=Ka,e=r.__importDefault(NS());sr.PostgrestClient=e.default;const n=r.__importDefault(Fw());sr.PostgrestQueryBuilder=n.default;const o=r.__importDefault(W0());sr.PostgrestFilterBuilder=o.default;const c=r.__importDefault(Bw());sr.PostgrestTransformBuilder=c.default;const u=r.__importDefault(Lw());sr.PostgrestBuilder=u.default;const p=r.__importDefault(Mw());return sr.PostgrestError=p.default,sr.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:c.default,PostgrestBuilder:u.default,PostgrestError:p.default},sr}var Uw=IS();const zw=sc(Uw),TS=O0({__proto__:null,default:zw},[Uw]),{PostgrestClient:RS,PostgrestQueryBuilder:x6,PostgrestFilterBuilder:w6,PostgrestTransformBuilder:y6,PostgrestBuilder:v6,PostgrestError:b6}=zw||TS;class kS{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const o=this.getWebSocketConstructor();return new o(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const OS="2.79.0",PS=`realtime-js/${OS}`,jS="1.0.0",l0=1e4,DS=1e3,MS=100;var Xl;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Xl||(Xl={}));var jn;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(jn||(jn={}));var xi;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(xi||(xi={}));var c0;(function(r){r.websocket="websocket"})(c0||(c0={}));var To;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(To||(To={}));class LS{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),o=new TextDecoder;return this._decodeBroadcast(e,n,o)}_decodeBroadcast(e,n,o){const c=n.getUint8(1),u=n.getUint8(2);let p=this.HEADER_LENGTH+2;const x=o.decode(e.slice(p,p+c));p=p+c;const b=o.decode(e.slice(p,p+u));p=p+u;const y=JSON.parse(o.decode(e.slice(p,e.byteLength)));return{ref:null,topic:x,event:b,payload:y}}}class Vw{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Qt||(Qt={}));const Jp=(r,e,n={})=>{var o;const c=(o=n.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((u,p)=>(u[p]=BS(p,r,e,c),u),{}):{}},BS=(r,e,n,o)=>{const c=e.find(x=>x.name===r),u=c?.type,p=n[r];return u&&!o.includes(u)?Ww(u,p):u0(p)},Ww=(r,e)=>{if(r.charAt(0)==="_"){const n=r.slice(1,r.length);return VS(e,n)}switch(r){case Qt.bool:return FS(e);case Qt.float4:case Qt.float8:case Qt.int2:case Qt.int4:case Qt.int8:case Qt.numeric:case Qt.oid:return US(e);case Qt.json:case Qt.jsonb:return zS(e);case Qt.timestamp:return WS(e);case Qt.abstime:case Qt.date:case Qt.daterange:case Qt.int4range:case Qt.int8range:case Qt.money:case Qt.reltime:case Qt.text:case Qt.time:case Qt.timestamptz:case Qt.timetz:case Qt.tsrange:case Qt.tstzrange:return u0(e);default:return u0(e)}},u0=r=>r,FS=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},US=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},zS=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},VS=(r,e)=>{if(typeof r!="string")return r;const n=r.length-1,o=r[n];if(r[0]==="{"&&o==="}"){let u;const p=r.slice(1,n);try{u=JSON.parse("["+p+"]")}catch{u=p?p.split(","):[]}return u.map(x=>Ww(e,x))}return r},WS=r=>typeof r=="string"?r.replace(" ","T"):r,Hw=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class df{constructor(e,n,o={},c=l0){this.channel=e,this.event=n,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var o;return this._hasReceived(e)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var em;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(em||(em={}));class Yl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:u,onLeave:p,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yl.syncState(this.state,c,u,p),this.pendingDiffs.forEach(b=>{this.state=Yl.syncDiff(this.state,b,u,p)}),this.pendingDiffs=[],x()}),this.channel._on(o.diff,{},c=>{const{onJoin:u,onLeave:p,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Yl.syncDiff(this.state,c,u,p),x())}),this.onJoin((c,u,p)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:u,newPresences:p})}),this.onLeave((c,u,p)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:u,leftPresences:p})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,o,c){const u=this.cloneDeep(e),p=this.transformState(n),x={},b={};return this.map(u,(y,A)=>{p[y]||(b[y]=A)}),this.map(p,(y,A)=>{const _=u[y];if(_){const k=A.map(L=>L.presence_ref),T=_.map(L=>L.presence_ref),D=A.filter(L=>T.indexOf(L.presence_ref)<0),O=_.filter(L=>k.indexOf(L.presence_ref)<0);D.length>0&&(x[y]=D),O.length>0&&(b[y]=O)}else x[y]=A}),this.syncDiff(u,{joins:x,leaves:b},o,c)}static syncDiff(e,n,o,c){const{joins:u,leaves:p}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(u,(x,b)=>{var y;const A=(y=e[x])!==null&&y!==void 0?y:[];if(e[x]=this.cloneDeep(b),A.length>0){const _=e[x].map(T=>T.presence_ref),k=A.filter(T=>_.indexOf(T.presence_ref)<0);e[x].unshift(...k)}o(x,A,b)}),this.map(p,(x,b)=>{let y=e[x];if(!y)return;const A=b.map(_=>_.presence_ref);y=y.filter(_=>A.indexOf(_.presence_ref)<0),e[x]=y,c(x,y,b),y.length===0&&delete e[x]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(o=>n(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,o)=>{const c=e[o];return"metas"in c?n[o]=c.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[o]=c,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tm;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(tm||(tm={}));var Kl;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Kl||(Kl={}));var as;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(as||(as={}));class H0{constructor(e,n={config:{}},o){var c,u;if(this.topic=e,this.params=n,this.socket=o,this.bindings={},this.state=jn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new df(this,xi.join,this.params,this.timeout),this.rejoinTimer=new Vw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(p=>p.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jn.closed,this.socket._remove(this)}),this._onError(p=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,p),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",p=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,p),this.state=jn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xi.reply,{},(p,x)=>{this._trigger(this._replyEventName(x),p)}),this.presence=new Yl(this),this.broadcastEndpointURL=Hw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var o,c,u;if(this.socket.isConnected()||this.socket.connect(),this.state==jn.closed){const{config:{broadcast:p,presence:x,private:b}}=this.params,y=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(T=>T.filter))!==null&&c!==void 0?c:[],A=!!this.bindings[Kl.PRESENCE]&&this.bindings[Kl.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,_={},k={broadcast:p,presence:Object.assign(Object.assign({},x),{enabled:A}),postgres_changes:y,private:b};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(T=>e?.(as.CHANNEL_ERROR,T)),this._onClose(()=>e?.(as.CLOSED)),this.updateJoinPayload(Object.assign({config:k},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:T})=>{var D;if(this.socket.setAuth(),T===void 0){e?.(as.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,L=(D=O?.length)!==null&&D!==void 0?D:0,U=[];for(let z=0;z<L;z++){const F=O[z],{filter:{event:$,schema:se,table:Y,filter:V}}=F,X=T&&T[z];if(X&&X.event===$&&X.schema===se&&X.table===Y&&X.filter===V)U.push(Object.assign(Object.assign({},F),{id:X.id}));else{this.unsubscribe(),this.state=jn.errored,e?.(as.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(as.SUBSCRIBED);return}}).receive("error",T=>{this.state=jn.errored,e?.(as.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e?.(as.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,o){return this.state===jn.joined&&e===Kl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,o)}async httpSend(e,n,o={}){var c;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const p={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},x=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);if(x.status===202)return{success:!0};let b=x.statusText;try{const y=await x.json();b=y.error||y.message||b}catch{}return Promise.reject(new Error(b))}async send(e,n={}){var o,c;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:p}=e,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:p,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=y.body)===null||c===void 0?void 0:c.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var p,x,b;const y=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((b=(x=(p=this.params)===null||p===void 0?void 0:p.config)===null||x===void 0?void 0:x.broadcast)===null||b===void 0)&&b.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xi.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new df(this,xi.leave,{},e),o.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jn.closed,this.bindings={}}async _fetchWithTimeout(e,n,o){const c=new AbortController,u=setTimeout(()=>c.abort(),o),p=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(u),p}_push(e,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new df(this,e,n,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>MS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,o){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,o){var c,u;const p=e.toLocaleLowerCase(),{close:x,error:b,leave:y,join:A}=xi;if(o&&[x,b,y,A].indexOf(p)>=0&&o!==this._joinRef())return;let k=this._onMessage(p,n,o);if(n&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(p)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(T=>{var D,O,L;return((D=T.filter)===null||D===void 0?void 0:D.event)==="*"||((L=(O=T.filter)===null||O===void 0?void 0:O.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===p}).map(T=>T.callback(k,o)):(u=this.bindings[p])===null||u===void 0||u.filter(T=>{var D,O,L,U,z,F;if(["broadcast","presence","postgres_changes"].includes(p))if("id"in T){const $=T.id,se=(D=T.filter)===null||D===void 0?void 0:D.event;return $&&((O=n.ids)===null||O===void 0?void 0:O.includes($))&&(se==="*"||se?.toLocaleLowerCase()===((L=n.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const $=(z=(U=T?.filter)===null||U===void 0?void 0:U.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return $==="*"||$===((F=n?.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===p}).map(T=>{if(typeof k=="object"&&"ids"in k){const D=k.data,{schema:O,table:L,commit_timestamp:U,type:z,errors:F}=D;k=Object.assign(Object.assign({},{schema:O,table:L,commit_timestamp:U,eventType:z,new:{},old:{},errors:F}),this._getPayloadRecords(D))}T.callback(k,o)})}_isClosed(){return this.state===jn.closed}_isJoined(){return this.state===jn.joined}_isJoining(){return this.state===jn.joining}_isLeaving(){return this.state===jn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,o){const c=e.toLocaleLowerCase(),u={type:c,filter:n,callback:o};return this.bindings[c]?this.bindings[c].push(u):this.bindings[c]=[u],this}_off(e,n){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var u;return!(((u=c.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&H0.isEqual(c.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const o in e)if(e[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xi.close,{},e)}_onError(e){this._on(xi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Jp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Jp(e.columns,e.old_record)),n}}const hf=()=>{},Iu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},HS=[1e3,2e3,5e3,1e4],$S=1e4,GS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qS{constructor(e,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=l0,this.transport=null,this.heartbeatIntervalMs=Iu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hf,this.ref=0,this.reconnectTimer=null,this.logger=hf,this.conn=null,this.sendBuffer=[],this.serializer=new LS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...u)=>c(...u):(...u)=>fetch(...u),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${c0.websocket}`,this.httpEndpoint=Hw(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kS.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jS}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,o){this.logger(e,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Xl.connecting:return To.Connecting;case Xl.open:return To.Open;case Xl.closing:return To.Closing;default:return To.Closed}}isConnected(){return this.connectionState()===To.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const o=`realtime:${e}`,c=this.getChannels().find(u=>u.topic===o);if(c)return c;{const u=new H0(`realtime:${e}`,n,this);return this.channels.push(u),u}}push(e){const{topic:n,event:o,payload:c,ref:u}=e,p=()=>{this.encode(e,x=>{var b;(b=this.conn)===null||b===void 0||b.send(x)})};this.log("push",`${n} ${o} (${u})`,c),this.isConnected()?p():this.sendBuffer.push(p)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(DS,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Iu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:c,payload:u,ref:p}=n,x=p?`(${p})`:"",b=u.status||"";this.log("receive",`${b} ${o} ${c} ${x}`.trim(),u),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(c,u,p)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(xi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const o=e.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${e}${o}${c}`}_workerObjectUrl(e){let n;if(e)n=e;else{const o=new Blob([GS],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const c={access_token:n,version:PS};n&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(xi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(n)}catch(c){this.log("error",`error in ${e} callback`,c)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Vw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Iu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,o,c,u,p,x,b,y,A;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=e?.timeout)!==null&&o!==void 0?o:l0,this.heartbeatIntervalMs=(c=e?.heartbeatIntervalMs)!==null&&c!==void 0?c:Iu.HEARTBEAT_INTERVAL,this.worker=(u=e?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(p=e?.accessToken)!==null&&p!==void 0?p:null,this.heartbeatCallback=(x=e?.heartbeatCallback)!==null&&x!==void 0?x:hf,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=e?.reconnectAfterMs)!==null&&b!==void 0?b:(_=>HS[_-1]||$S),this.encode=(y=e?.encode)!==null&&y!==void 0?y:((_,k)=>k(JSON.stringify(_))),this.decode=(A=e?.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class $0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function dn(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class XS extends $0{constructor(e,n,o){super(e),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class d0 extends $0{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const G0=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),YS=()=>Response,h0=r=>{if(Array.isArray(r))return r.map(n=>h0(n));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([n,o])=>{const c=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[c]=h0(o)}),e},KS=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},ff=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},ZS=(r,e,n)=>Ze(void 0,void 0,void 0,function*(){const o=yield YS();r instanceof o&&!n?.noResolveJson?r.json().then(c=>{const u=r.status||500,p=c?.statusCode||u+"";e(new XS(ff(c),u,p))}).catch(c=>{e(new d0(ff(c),c))}):e(new d0(ff(r),r))}),QS=(r,e,n,o)=>{const c={method:r,headers:e?.headers||{}};return r==="GET"||!o?c:(KS(o)?(c.headers=Object.assign({"Content-Type":"application/json"},e?.headers),c.body=JSON.stringify(o)):c.body=o,e?.duplex&&(c.duplex=e.duplex),Object.assign(Object.assign({},c),n))};function ac(r,e,n,o,c,u){return Ze(this,void 0,void 0,function*(){return new Promise((p,x)=>{r(n,QS(e,o,c,u)).then(b=>{if(!b.ok)throw b;return o?.noResolveJson?b:b.json()}).then(b=>p(b)).catch(b=>ZS(b,x,o))})})}function Ql(r,e,n,o){return Ze(this,void 0,void 0,function*(){return ac(r,"GET",e,n,o)})}function mi(r,e,n,o,c){return Ze(this,void 0,void 0,function*(){return ac(r,"POST",e,o,c,n)})}function f0(r,e,n,o,c){return Ze(this,void 0,void 0,function*(){return ac(r,"PUT",e,o,c,n)})}function JS(r,e,n,o){return Ze(this,void 0,void 0,function*(){return ac(r,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function q0(r,e,n,o,c){return Ze(this,void 0,void 0,function*(){return ac(r,"DELETE",e,o,c,n)})}class eA{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dn(e))return{data:null,error:e};throw e}})}}var $w;class tA{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[$w]="BlobDownloadBuilder",this.promise=null}asStream(){return new eA(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ze(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(dn(e))return{data:null,error:e};throw e}})}}$w=Symbol.toStringTag;const nA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rA{constructor(e,n={},o,c){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=o,this.fetch=G0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,o,c){return Ze(this,void 0,void 0,function*(){try{let u;const p=Object.assign(Object.assign({},nm),c);let x=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(p.upsert)});const b=p.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",p.cacheControl),b&&u.append("metadata",this.encodeMetadata(b)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",p.cacheControl),b&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(b))):(u=o,x["cache-control"]=`max-age=${p.cacheControl}`,x["content-type"]=p.contentType,b&&(x["x-metadata"]=this.toBase64(this.encodeMetadata(b))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!p.duplex&&(p.duplex="half")),c?.headers&&(x=Object.assign(Object.assign({},x),c.headers));const y=this._removeEmptyFolders(n),A=this._getFinalPath(y),_=yield(e=="PUT"?f0:mi)(this.fetch,`${this.url}/object/${A}`,u,Object.assign({headers:x},p?.duplex?{duplex:p.duplex}:{}));return{data:{path:y,id:_.Id,fullPath:_.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(dn(u))return{data:null,error:u};throw u}})}upload(e,n,o){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,o)})}uploadToSignedUrl(e,n,o,c){return Ze(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(e),p=this._getFinalPath(u),x=new URL(this.url+`/object/upload/sign/${p}`);x.searchParams.set("token",n);try{let b;const y=Object.assign({upsert:nm.upsert},c),A=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&o instanceof Blob?(b=new FormData,b.append("cacheControl",y.cacheControl),b.append("",o)):typeof FormData<"u"&&o instanceof FormData?(b=o,b.append("cacheControl",y.cacheControl)):(b=o,A["cache-control"]=`max-age=${y.cacheControl}`,A["content-type"]=y.contentType);const _=yield f0(this.fetch,x.toString(),b,{headers:A});return{data:{path:u,fullPath:_.Key},error:null}}catch(b){if(this.shouldThrowOnError)throw b;if(dn(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(e,n){return Ze(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const c=Object.assign({},this.headers);n?.upsert&&(c["x-upsert"]="true");const u=yield mi(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:c}),p=new URL(this.url+u.url),x=p.searchParams.get("token");if(!x)throw new $0("No token returned by API");return{data:{signedUrl:p.toString(),path:e,token:x},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dn(o))return{data:null,error:o};throw o}})}update(e,n,o){return Ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,o)})}move(e,n,o){return Ze(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(dn(c))return{data:null,error:c};throw c}})}copy(e,n,o){return Ze(this,void 0,void 0,function*(){try{return{data:{path:(yield mi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(dn(c))return{data:null,error:c};throw c}})}createSignedUrl(e,n,o){return Ze(this,void 0,void 0,function*(){try{let c=this._getFinalPath(e),u=yield mi(this.fetch,`${this.url}/object/sign/${c}`,Object.assign({expiresIn:n},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const p=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${p}`)},{data:u,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(dn(c))return{data:null,error:c};throw c}})}createSignedUrls(e,n,o){return Ze(this,void 0,void 0,function*(){try{const c=yield mi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:c.map(p=>Object.assign(Object.assign({},p),{signedUrl:p.signedURL?encodeURI(`${this.url}${p.signedURL}${u}`):null})),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(dn(c))return{data:null,error:c};throw c}})}download(e,n){const c=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),p=u?`?${u}`:"",x=this._getFinalPath(e),b=()=>Ql(this.fetch,`${this.url}/${c}/${x}${p}`,{headers:this.headers,noResolveJson:!0});return new tA(b,this.shouldThrowOnError)}info(e){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const o=yield Ql(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:h0(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dn(o))return{data:null,error:o};throw o}})}exists(e){return Ze(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield JS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dn(o)&&o instanceof d0){const c=o.originalError;if([400,404].includes(c?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,n){const o=this._getFinalPath(e),c=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&c.push(u);const x=typeof n?.transform<"u"?"render/image":"object",b=this.transformOptsToQueryString(n?.transform||{});b!==""&&c.push(b);let y=c.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${x}/public/${o}${y}`)}}}remove(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}list(e,n,o){return Ze(this,void 0,void 0,function*(){try{const c=Object.assign(Object.assign(Object.assign({},nA),n),{prefix:e||""});return{data:yield mi(this.fetch,`${this.url}/object/list/${this.bucketId}`,c,{headers:this.headers},o),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(dn(c))return{data:null,error:c};throw c}})}listV2(e,n){return Ze(this,void 0,void 0,function*(){try{const o=Object.assign({},e);return{data:yield mi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dn(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Gw="2.79.0",qw={"X-Client-Info":`storage-js/${Gw}`};class iA{constructor(e,n={},o,c){this.shouldThrowOnError=!1;const u=new URL(e);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qw),n),this.fetch=G0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Ze(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Ql(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}getBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}createBucket(e){return Ze(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield mi(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(dn(c))return{data:null,error:c};throw c}})}updateBucket(e,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield f0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dn(o))return{data:null,error:o};throw o}})}emptyBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class sA{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qw),n),this.fetch=G0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}listBuckets(e){return Ze(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const o=n.toString(),c=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield Ql(this.fetch,c,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}}const X0={"X-Client-Info":`storage-js/${Gw}`,"Content-Type":"application/json"};class Xw extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function jr(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class gf extends Xw{constructor(e,n,o){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oA extends Xw{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var rm;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(rm||(rm={}));const Y0=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),aA=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},im=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),lA=(r,e,n)=>Ze(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!n?.noResolveJson){const c=r.status||500,u=r;if(typeof u.json=="function")u.json().then(p=>{const x=p?.statusCode||p?.code||c+"";e(new gf(im(p),c,x))}).catch(()=>{const p=c+"",x=u.statusText||`HTTP ${c} error`;e(new gf(x,c,p))});else{const p=c+"",x=u.statusText||`HTTP ${c} error`;e(new gf(x,c,p))}}else e(new oA(im(r),r))}),cA=(r,e,n,o)=>{const c={method:r,headers:e?.headers||{}};return o?(aA(o)?(c.headers=Object.assign({"Content-Type":"application/json"},e?.headers),c.body=JSON.stringify(o)):c.body=o,Object.assign(Object.assign({},c),n)):c};function uA(r,e,n,o,c,u){return Ze(this,void 0,void 0,function*(){return new Promise((p,x)=>{r(n,cA(e,o,c,u)).then(b=>{if(!b.ok)throw b;if(o?.noResolveJson)return b;const y=b.headers.get("content-type");return!y||!y.includes("application/json")?{}:b.json()}).then(b=>p(b)).catch(b=>lA(b,x,o))})})}function Dr(r,e,n,o,c){return Ze(this,void 0,void 0,function*(){return uA(r,"POST",e,o,c,n)})}class dA{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X0),n),this.fetch=Y0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ze(this,void 0,void 0,function*(){try{return{data:(yield Dr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Ze(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jr(o))return{data:null,error:o};throw o}})}listIndexes(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Ze(this,void 0,void 0,function*(){try{return{data:(yield Dr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(jr(o))return{data:null,error:o};throw o}})}}class hA{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X0),n),this.fetch=Y0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ze(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Dr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}getVectors(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}listVectors(e){return Ze(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Dr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}queryVectors(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Ze(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Dr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}}class fA{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},X0),n),this.fetch=Y0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:(yield Dr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}getBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ze(this,arguments,void 0,function*(e={}){try{return{data:yield Dr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:(yield Dr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}})}}class gA extends fA{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new pA(this.url,this.headers,e,this.fetch)}}class pA extends dA{constructor(e,n,o,c){super(e,n,c),this.vectorBucketName=o}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ze(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ze(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ze(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ze(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new mA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class mA extends hA{constructor(e,n,o,c,u){super(e,n,u),this.vectorBucketName=o,this.indexName=c}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ze(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ze(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ze(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ze(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ze(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class xA extends iA{constructor(e,n={},o,c){super(e,n,o,c)}from(e){return new rA(this.url,this.headers,e,this.fetch)}get vectors(){return new gA(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sA(this.url+"/iceberg",this.headers,this.fetch)}}const wA="2.79.0";let $l="";typeof Deno<"u"?$l="deno":typeof document<"u"?$l="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$l="react-native":$l="node";const yA={"X-Client-Info":`supabase-js-${$l}/${wA}`},vA={headers:yA},bA={schema:"public"},CA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},EA={},SA=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),AA=()=>Headers,_A=(r,e,n)=>{const o=SA(n),c=AA();return async(u,p)=>{var x;const b=(x=await e())!==null&&x!==void 0?x:r;let y=new c(p?.headers);return y.has("apikey")||y.set("apikey",r),y.has("Authorization")||y.set("Authorization",`Bearer ${b}`),o(u,Object.assign(Object.assign({},p),{headers:y}))}};function NA(r){return r.endsWith("/")?r:r+"/"}function IA(r,e){var n,o;const{db:c,auth:u,realtime:p,global:x}=r,{db:b,auth:y,realtime:A,global:_}=e,k={db:Object.assign(Object.assign({},b),c),auth:Object.assign(Object.assign({},y),u),realtime:Object.assign(Object.assign({},A),p),storage:{},global:Object.assign(Object.assign(Object.assign({},_),x),{headers:Object.assign(Object.assign({},(n=_?.headers)!==null&&n!==void 0?n:{}),(o=x?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return r.accessToken?k.accessToken=r.accessToken:delete k.accessToken,k}function TA(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(NA(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Yw="2.79.0",Ia=30*1e3,g0=3,pf=g0*Ia,RA="http://localhost:9999",kA="supabase.auth.token",OA={"X-Client-Info":`gotrue-js/${Yw}`},p0="X-Supabase-Api-Version",Kw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jA=600*1e3;class Jl extends Error{constructor(e,n,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function it(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class DA extends Jl{constructor(e,n,o){super(e,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function MA(r){return it(r)&&r.name==="AuthApiError"}class Ro extends Jl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Xs extends Jl{constructor(e,n,o,c){super(e,o,c),this.name=n,this.status=o}}class fi extends Xs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LA(r){return it(r)&&r.name==="AuthSessionMissingError"}class wa extends Xs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tu extends Xs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ru extends Xs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function BA(r){return it(r)&&r.name==="AuthImplicitGrantRedirectError"}class sm extends Xs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class m0 extends Xs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function mf(r){return it(r)&&r.name==="AuthRetryableFetchError"}class om extends Xs{constructor(e,n,o){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class x0 extends Xs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ku="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),am=` 	
\r=`.split(""),FA=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<am.length;e+=1)r[am[e].charCodeAt(0)]=-2;for(let e=0;e<Ku.length;e+=1)r[Ku[e].charCodeAt(0)]=e;return r})();function lm(r,e,n){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(Ku[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(Ku[o]),e.queuedBits-=6}}function Zw(r,e,n){const o=FA[r];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function cm(r){const e=[],n=p=>{e.push(String.fromCodePoint(p))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},u=p=>{VA(p,o,n)};for(let p=0;p<r.length;p+=1)Zw(r.charCodeAt(p),c,u);return e.join("")}function UA(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function zA(r,e){for(let n=0;n<r.length;n+=1){let o=r.charCodeAt(n);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(r.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}UA(o,e)}}function VA(r,e,n){if(e.utf8seq===0){if(r<=127){n(r);return}for(let o=1;o<6;o+=1)if((r>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Pa(r){const e=[],n={queue:0,queuedBits:0},o=c=>{e.push(c)};for(let c=0;c<r.length;c+=1)Zw(r.charCodeAt(c),n,o);return new Uint8Array(e)}function WA(r){const e=[];return zA(r,n=>e.push(n)),new Uint8Array(e)}function Oo(r){const e=[],n={queue:0,queuedBits:0},o=c=>{e.push(c)};return r.forEach(c=>lm(c,n,o)),lm(null,n,o),e.join("")}function HA(r){return Math.round(Date.now()/1e3)+r}function $A(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const or=()=>typeof window<"u"&&typeof document<"u",_o={tested:!1,writable:!1},Qw=()=>{if(!or())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_o.tested)return _o.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),_o.tested=!0,_o.writable=!0}catch{_o.tested=!0,_o.writable=!1}return _o.writable};function GA(r){const e={},n=new URL(r);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,u)=>{e[u]=c})}catch{}return n.searchParams.forEach((o,c)=>{e[c]=o}),e}const Jw=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),qA=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ta=async(r,e,n)=>{await r.setItem(e,JSON.stringify(n))},No=async(r,e)=>{const n=await r.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ls=async(r,e)=>{await r.removeItem(e)};class pd{constructor(){this.promise=new pd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}pd.promiseConstructor=Promise;function xf(r){const e=r.split(".");if(e.length!==3)throw new x0("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!PA.test(e[o]))throw new x0("JWT not in base64url format");return{header:JSON.parse(cm(e[0])),payload:JSON.parse(cm(e[1])),signature:Pa(e[2]),raw:{header:e[0],payload:e[1]}}}async function XA(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function YA(r,e){return new Promise((o,c)=>{(async()=>{for(let u=0;u<1/0;u++)try{const p=await r(u);if(!e(u,null,p)){o(p);return}}catch(p){if(!e(u,p)){c(p);return}}})()})}function KA(r){return("0"+r.toString(16)).substr(-2)}function ZA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let c="";for(let u=0;u<56;u++)c+=n.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(e),Array.from(e,KA).join("")}async function QA(r){const n=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(o);return Array.from(c).map(u=>String.fromCharCode(u)).join("")}async function JA(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const n=await QA(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ya(r,e,n=!1){const o=ZA();let c=o;n&&(c+="/PASSWORD_RECOVERY"),await Ta(r,`${e}-code-verifier`,c);const u=await JA(o);return[u,o===u?"plain":"s256"]}const e3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t3(r){const e=r.headers.get(p0);if(!e||!e.match(e3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function n3(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function r3(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const i3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function va(r){if(!i3.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wf(){const r={};return new Proxy(r,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function s3(r,e){return new Proxy(r,{get:(n,o,c)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,c)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,o,c)}})}function um(r){return JSON.parse(JSON.stringify(r))}const Io=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),o3=[502,503,504];async function dm(r){var e;if(!qA(r))throw new m0(Io(r),0);if(o3.includes(r.status))throw new m0(Io(r),r.status);let n;try{n=await r.json()}catch(u){throw new Ro(Io(u),u)}let o;const c=t3(r);if(c&&c.getTime()>=Kw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new om(Io(n),r.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new fi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,p)=>u&&typeof p=="string",!0))throw new om(Io(n),r.status,n.weak_password.reasons);throw new DA(Io(n),r.status||500,o)}const a3=(r,e,n,o)=>{const c={method:r,headers:e?.headers||{}};return r==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),n))};async function ft(r,e,n,o){var c;const u=Object.assign({},o?.headers);u[p0]||(u[p0]=Kw["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const p=(c=o?.query)!==null&&c!==void 0?c:{};o?.redirectTo&&(p.redirect_to=o.redirectTo);const x=Object.keys(p).length?"?"+new URLSearchParams(p).toString():"",b=await l3(r,e,n+x,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(b):{data:Object.assign({},b),error:null}}async function l3(r,e,n,o,c,u){const p=a3(e,o,c,u);let x;try{x=await r(n,Object.assign({},p))}catch(b){throw console.error(b),new m0(Io(b),0)}if(x.ok||await dm(x),o?.noResolveJson)return x;try{return await x.json()}catch(b){await dm(b)}}function gi(r){var e;let n=null;d3(r)&&(n=Object.assign({},r),r.expires_at||(n.expires_at=HA(r.expires_in)));const o=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:n,user:o},error:null}}function hm(r){const e=gi(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Us(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function c3(r){return{data:r,error:null}}function u3(r){const{action_link:e,email_otp:n,hashed_token:o,redirect_to:c,verification_type:u}=r,p=qs(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:e,email_otp:n,hashed_token:o,redirect_to:c,verification_type:u},b=Object.assign({},p);return{data:{properties:x,user:b},error:null}}function fm(r){return r}function d3(r){return r.access_token&&r.refresh_token&&r.expires_in}const yf=["global","local","others"];class h3{constructor({url:e="",headers:n={},fetch:o}){this.url=e,this.headers=n,this.fetch=Jw(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=yf[0]){if(yf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yf.join(", ")}`);try{return await ft(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(it(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,n={}){try{return await ft(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Us})}catch(o){if(it(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:n}=e,o=qs(e,["options"]),c=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(c.new_email=o?.newEmail,delete c.newEmail),await ft(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:u3,redirectTo:n?.redirectTo})}catch(n){if(it(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ft(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Us})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,o,c,u,p,x,b;try{const y={nextPage:null,lastPage:0,total:0},A=await ft(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=e?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:fm});if(A.error)throw A.error;const _=await A.json(),k=(p=A.headers.get("x-total-count"))!==null&&p!==void 0?p:0,T=(b=(x=A.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&b!==void 0?b:[];return T.length>0&&(T.forEach(D=>{const O=parseInt(D.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(D.split(";")[1].split("=")[1]);y[`${L}Page`]=O}),y.total=parseInt(k)),{data:Object.assign(Object.assign({},_),y),error:null}}catch(y){if(it(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){va(e);try{return await ft(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Us})}catch(n){if(it(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){va(e);try{return await ft(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Us})}catch(o){if(it(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,n=!1){va(e);try{return await ft(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Us})}catch(o){if(it(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){va(e.userId);try{const{data:n,error:o}=await ft(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:o}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _deleteFactor(e){va(e.userId),va(e.id);try{return{data:await ft(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,o,c,u,p,x,b;try{const y={nextPage:null,lastPage:0,total:0},A=await ft(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(c=e?.perPage)===null||c===void 0?void 0:c.toString())!==null&&u!==void 0?u:""},xform:fm});if(A.error)throw A.error;const _=await A.json(),k=(p=A.headers.get("x-total-count"))!==null&&p!==void 0?p:0,T=(b=(x=A.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&b!==void 0?b:[];return T.length>0&&(T.forEach(D=>{const O=parseInt(D.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(D.split(";")[1].split("=")[1]);y[`${L}Page`]=O}),y.total=parseInt(k)),{data:Object.assign(Object.assign({},_),y),error:null}}catch(y){if(it(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(e){try{return await ft(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ft(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ft(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(it(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await ft(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ft(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(it(n))return{data:null,error:n};throw n}}}function gm(r={}){return{getItem:e=>r[e]||null,setItem:(e,n)=>{r[e]=n},removeItem:e=>{delete r[e]}}}const ba={debug:!!(globalThis&&Qw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ey extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class f3 extends ey{}async function g3(r,e,n){ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),ba.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,c.name);try{return await n()}finally{ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,c.name)}}else{if(e===0)throw ba.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new f3(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(ba.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function p3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ty(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function m3(r){return parseInt(r,16)}function x3(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function w3(r){var e;const{chainId:n,domain:o,expirationTime:c,issuedAt:u=new Date,nonce:p,notBefore:x,requestId:b,resources:y,scheme:A,uri:_,version:k}=r;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(p&&p.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${p}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const T=ty(r.address),D=A?`${A}://${o}`:o,O=r.statement?`${r.statement}
`:"",L=`${D} wants you to sign in with your Ethereum account:
${T}

${O}`;let U=`URI: ${_}
Version: ${k}
Chain ID: ${n}${p?`
Nonce: ${p}`:""}
Issued At: ${u.toISOString()}`;if(c&&(U+=`
Expiration Time: ${c.toISOString()}`),x&&(U+=`
Not Before: ${x.toISOString()}`),b&&(U+=`
Request ID: ${b}`),y){let z=`
Resources:`;for(const F of y){if(!F||typeof F!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${F}`);z+=`
- ${F}`}U+=z}return`${L}
${U}`}class An extends Error{constructor({message:e,code:n,cause:o,name:c}){var u;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=c??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class Zu extends An{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function y3({error:r,options:e}){var n,o,c;const{publicKey:u}=e;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new An({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new An({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new An({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((c=u.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new An({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new An({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new An({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(x=>x.type==="public-key").length===0?new An({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new An({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const p=window.location.hostname;if(ny(p)){if(u.rp.id!==p)return new An({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new An({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new An({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new An({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new An({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function v3({error:r,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new An({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new An({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(ny(o)){if(n.rpId!==o)return new An({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new An({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new An({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new An({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class b3{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const C3=new b3;function E3(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:n,excludeCredentials:o}=r,c=qs(r,["challenge","user","excludeCredentials"]),u=Pa(e).buffer,p=Object.assign(Object.assign({},n),{id:Pa(n.id).buffer}),x=Object.assign(Object.assign({},c),{challenge:u,user:p});if(o&&o.length>0){x.excludeCredentials=new Array(o.length);for(let b=0;b<o.length;b++){const y=o[b];x.excludeCredentials[b]=Object.assign(Object.assign({},y),{id:Pa(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return x}function S3(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:n}=r,o=qs(r,["challenge","allowCredentials"]),c=Pa(e).buffer,u=Object.assign(Object.assign({},o),{challenge:c});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let p=0;p<n.length;p++){const x=n[p];u.allowCredentials[p]=Object.assign(Object.assign({},x),{id:Pa(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return u}function A3(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r;return{id:r.id,rawId:r.id,response:{attestationObject:Oo(new Uint8Array(r.response.attestationObject)),clientDataJSON:Oo(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function _3(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r,o=r.getClientExtensionResults(),c=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Oo(new Uint8Array(c.authenticatorData)),clientDataJSON:Oo(new Uint8Array(c.clientDataJSON)),signature:Oo(new Uint8Array(c.signature)),userHandle:c.userHandle?Oo(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ny(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function pm(){var r,e;return!!(or()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function N3(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Zu("Browser returned unexpected credential type",e)}:{data:null,error:new Zu("Empty credential response",e)}}catch(e){return{data:null,error:y3({error:e,options:r})}}}async function I3(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Zu("Browser returned unexpected credential type",e)}:{data:null,error:new Zu("Empty credential response",e)}}catch(e){return{data:null,error:v3({error:e,options:r})}}}const T3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},R3={userVerification:"preferred",hints:["security-key"]};function Qu(...r){const e=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),o={};for(const c of r)if(c)for(const u in c){const p=c[u];if(p!==void 0)if(Array.isArray(p))o[u]=p;else if(n(p))o[u]=p;else if(e(p)){const x=o[u];e(x)?o[u]=Qu(x,p):o[u]=Qu(p)}else o[u]=p}return o}function k3(r,e){return Qu(T3,r,e||{})}function O3(r,e){return Qu(R3,r,e||{})}class P3{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:o,signal:c},u){try{const{data:p,error:x}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!p)return{data:null,error:x};const b=c??C3.createNewAbortSignal();if(p.webauthn.type==="create"){const{user:y}=p.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(p.webauthn.type){case"create":{const y=k3(p.webauthn.credential_options.publicKey,u?.create),{data:A,error:_}=await N3({publicKey:y,signal:b});return A?{data:{factorId:e,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:A}},error:null}:{data:null,error:_}}case"request":{const y=O3(p.webauthn.credential_options.publicKey,u?.request),{data:A,error:_}=await I3(Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:y,signal:b}));return A?{data:{factorId:e,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:A}},error:null}:{data:null,error:_}}}}catch(p){return it(p)?{data:null,error:p}:{data:null,error:new Ro("Unexpected error in challenge",p)}}}async _verify({challengeId:e,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}},u){if(!n)return{data:null,error:new Jl("rpId is required for WebAuthn authentication")};try{if(!pm())return{data:null,error:new Ro("Browser does not support WebAuthn",null)};const{data:p,error:x}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:o},signal:c},{request:u});if(!p)return{data:null,error:x};const{webauthn:b}=p;return this._verify({factorId:e,challengeId:p.challengeId,webauthn:{type:b.type,rpId:n,rpOrigins:o,credential_response:b.credential_response}})}catch(p){return it(p)?{data:null,error:p}:{data:null,error:new Ro("Unexpected error in authenticate",p)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c},u){if(!n)return{data:null,error:new Jl("rpId is required for WebAuthn registration")};try{if(!pm())return{data:null,error:new Ro("Browser does not support WebAuthn",null)};const{data:p,error:x}=await this._enroll({friendlyName:e});if(!p)return await this.client.mfa.listFactors().then(A=>{var _;return(_=A.data)===null||_===void 0?void 0:_.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===e&&k.status!=="unverified")}).then(A=>A?this.client.mfa.unenroll({factorId:A?.id}):void 0),{data:null,error:x};const{data:b,error:y}=await this._challenge({factorId:p.id,friendlyName:p.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:c},{create:u});return b?this._verify({factorId:p.id,challengeId:b.challengeId,webauthn:{rpId:n,rpOrigins:o,type:b.webauthn.type,credential_response:b.webauthn.credential_response}}):{data:null,error:y}}catch(p){return it(p)?{data:null,error:p}:{data:null,error:new Ro("Unexpected error in register",p)}}}}p3();const j3={url:RA,storageKey:kA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function mm(r,e,n){return await n()}const Ca={};class ec{get jwks(){var e,n;return(n=(e=Ca[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ca[this.storageKey]=Object.assign(Object.assign({},Ca[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ca[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ca[this.storageKey]=Object.assign(Object.assign({},Ca[this.storageKey]),{cachedAt:e})}constructor(e){var n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ec.nextInstanceID,ec.nextInstanceID+=1,this.instanceID>0&&or()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const c=Object.assign(Object.assign({},j3),e);if(this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.persistSession=c.persistSession,this.storageKey=c.storageKey,this.autoRefreshToken=c.autoRefreshToken,this.admin=new h3({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Jw(c.fetch),this.lock=c.lock||mm,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:or()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=g3:this.lock=mm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new P3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Qw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gm(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=gm(this.memoryStorage)),or()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yw}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},o="none";if(or()&&(n=GA(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),or()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:u}=await this._getSessionFromURL(n,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),BA(u)){const b=(e=u.details)===null||e===void 0?void 0:e.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:p,redirectType:x}=c;return this._debug("#_initialize()","detected session in URL",p,"redirect type",x),await this._saveSession(p),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",p):await this._notifyAllSubscribers("SIGNED_IN",p)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return it(n)?this._returnResult({error:n}):this._returnResult({error:new Ro("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,o,c;try{const u=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=e?.options)===null||c===void 0?void 0:c.captchaToken}},xform:gi}),{data:p,error:x}=u;if(x||!p)return this._returnResult({data:{user:null,session:null},error:x});const b=p.session,y=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",b)),this._returnResult({data:{user:y,session:b},error:null})}catch(u){if(it(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(e){var n,o,c;try{let u;if("email"in e){const{email:A,password:_,options:k}=e;let T=null,D=null;this.flowType==="pkce"&&([T,D]=await ya(this.storage,this.storageKey)),u=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:A,password:_,data:(n=k?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:T,code_challenge_method:D},xform:gi})}else if("phone"in e){const{phone:A,password:_,options:k}=e;u=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:A,password:_,data:(o=k?.data)!==null&&o!==void 0?o:{},channel:(c=k?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:gi})}else throw new Tu("You must provide either an email or phone number and a password");const{data:p,error:x}=u;if(x||!p)return this._returnResult({data:{user:null,session:null},error:x});const b=p.session,y=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",b)),this._returnResult({data:{user:y,session:b},error:null})}catch(u){if(it(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(e){try{let n;if("email"in e){const{email:u,password:p,options:x}=e;n=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:p,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:hm})}else if("phone"in e){const{phone:u,password:p,options:x}=e;n=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:p,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:hm})}else throw new Tu("You must provide either an email or phone number and a password");const{data:o,error:c}=n;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const u=new wa;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,o,c,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,o,c,u,p,x,b,y,A,_,k;let T,D;if("message"in e)T=e.message,D=e.signature;else{const{chain:O,wallet:L,statement:U,options:z}=e;let F;if(or())if(typeof L=="object")F=L;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")F=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=L}const $=new URL((n=z?.url)!==null&&n!==void 0?n:window.location.href),se=await F.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!se||se.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=ty(se[0]);let V=(o=z?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!V){const W=await F.request({method:"eth_chainId"});V=m3(W)}const X={domain:$.host,address:Y,statement:U,uri:$.href,version:"1",chainId:V,nonce:(c=z?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(p=(u=z?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&p!==void 0?p:new Date,expirationTime:(x=z?.signInWithEthereum)===null||x===void 0?void 0:x.expirationTime,notBefore:(b=z?.signInWithEthereum)===null||b===void 0?void 0:b.notBefore,requestId:(y=z?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(A=z?.signInWithEthereum)===null||A===void 0?void 0:A.resources};T=w3(X),D=await F.request({method:"personal_sign",params:[x3(T),Y]})}try{const{data:O,error:L}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:D},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(k=e.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:gi});if(L)throw L;if(!O||!O.session||!O.user){const U=new wa;return this._returnResult({data:{user:null,session:null},error:U})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:L})}catch(O){if(it(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async signInWithSolana(e){var n,o,c,u,p,x,b,y,A,_,k,T;let D,O;if("message"in e)D=e.message,O=e.signature;else{const{chain:L,wallet:U,statement:z,options:F}=e;let $;if(or())if(typeof U=="object")$=U;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))$=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!F?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=U}const se=new URL((n=F?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in $&&$.signIn){const Y=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F?.signInWithSolana),{version:"1",domain:se.host,uri:se.href}),z?{statement:z}:null));let V;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")V=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)V=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)D=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),O=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");D=[`${se.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${se.href}`,`Issued At: ${(c=(o=F?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((u=F?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((p=F?.signInWithSolana)===null||p===void 0)&&p.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((x=F?.signInWithSolana)===null||x===void 0)&&x.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((b=F?.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((y=F?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((_=(A=F?.signInWithSolana)===null||A===void 0?void 0:A.resources)===null||_===void 0)&&_.length?["Resources",...F.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const Y=await $.signMessage(new TextEncoder().encode(D),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=Y}}try{const{data:L,error:U}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:D,signature:Oo(O)},!((k=e.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:gi});if(U)throw U;if(!L||!L.session||!L.user){const z=new wa;return this._returnResult({data:{user:null,session:null},error:z})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:U})}catch(L){if(it(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async _exchangeCodeForSession(e){const n=await No(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(n??"").split("/");try{const{data:u,error:p}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:gi});if(await Ls(this.storage,`${this.storageKey}-code-verifier`),p)throw p;if(!u||!u.session||!u.user){const x=new wa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:x})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:c??null}),error:p})}catch(u){if(it(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(e){try{const{options:n,provider:o,token:c,access_token:u,nonce:p}=e,x=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:u,nonce:p,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:gi}),{data:b,error:y}=x;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!b||!b.session||!b.user){const A=new wa;return this._returnResult({data:{user:null,session:null},error:A})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:b,error:y})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,o,c,u,p;try{if("email"in e){const{email:x,options:b}=e;let y=null,A=null;this.flowType==="pkce"&&([y,A]=await ya(this.storage,this.storageKey));const{error:_}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(n=b?.data)!==null&&n!==void 0?n:{},create_user:(o=b?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:y,code_challenge_method:A},redirectTo:b?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:x,options:b}=e,{data:y,error:A}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(c=b?.data)!==null&&c!==void 0?c:{},create_user:(u=b?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:b?.captchaToken},channel:(p=b?.channel)!==null&&p!==void 0?p:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:A})}throw new Tu("You must provide either an email or phone number.")}catch(x){if(it(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async verifyOtp(e){var n,o;try{let c,u;"options"in e&&(c=(n=e.options)===null||n===void 0?void 0:n.redirectTo,u=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:p,error:x}=await ft(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:c,xform:gi});if(x)throw x;if(!p)throw new Error("An error occurred on token verification.");const b=p.session,y=p.user;return b?.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),this._returnResult({data:{user:y,session:b},error:null})}catch(c){if(it(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(e){var n,o,c;try{let u=null,p=null;this.flowType==="pkce"&&([u,p]=await ya(this.storage,this.storageKey));const x=await ft(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=e?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:p}),headers:this.headers,xform:c3});return this._returnResult(x)}catch(u){if(it(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:o}=e;if(o)throw o;if(!n)throw new fi;const{error:c}=await ft(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(e){if(it(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:o,type:c,options:u}=e,{error:p}=await ft(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}else if("phone"in e){const{phone:o,type:c,options:u}=e,{data:p,error:x}=await ft(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:x})}throw new Tu("You must provide either an email or phone number and a type")}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await No(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<pf:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const p=await No(this.userStorage,this.storageKey+"-user");p?.user?e.user=p.user:e.user=wf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const p={value:this.suppressGetSessionWarning};e.user=s3(e.user,p),p.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:c,error:u}=await this._callRefreshToken(e.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Us}):await this._useSession(async n=>{var o,c,u;const{data:p,error:x}=n;if(x)throw x;return!(!((o=p.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fi}:await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0,xform:Us})})}catch(n){if(it(n))return LA(n)&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async o=>{const{data:c,error:u}=o;if(u)throw u;if(!c.session)throw new fi;const p=c.session;let x=null,b=null;this.flowType==="pkce"&&e.email!=null&&([x,b]=await ya(this.storage,this.storageKey));const{data:y,error:A}=await ft(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:x,code_challenge_method:b}),jwt:p.access_token,xform:Us});if(A)throw A;return p.user=y.user,await this._saveSession(p),await this._notifyAllSubscribers("USER_UPDATED",p),this._returnResult({data:{user:p.user},error:null})})}catch(o){if(it(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fi;const n=Date.now()/1e3;let o=n,c=!0,u=null;const{payload:p}=xf(e.access_token);if(p.exp&&(o=p.exp,c=o<=n),c){const{data:x,error:b}=await this._callRefreshToken(e.refresh_token);if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!x)return{data:{user:null,session:null},error:null};u=x}else{const{data:x,error:b}=await this._getUser(e.access_token);if(b)throw b;u={access_token:e.access_token,refresh_token:e.refresh_token,user:x.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(it(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var o;if(!e){const{data:p,error:x}=n;if(x)throw x;e=(o=p.session)!==null&&o!==void 0?o:void 0}if(!e?.refresh_token)throw new fi;const{data:c,error:u}=await this._callRefreshToken(e.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!or())throw new Ru("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ru(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ru("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sm("No code detected.");const{data:z,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:u,refresh_token:p,expires_in:x,expires_at:b,token_type:y}=e;if(!u||!x||!p||!y)throw new Ru("No session defined in URL");const A=Math.round(Date.now()/1e3),_=parseInt(x);let k=A+_;b&&(k=parseInt(b));const T=k-A;T*1e3<=Ia&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${_}s`);const D=k-_;A-D>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",D,k,A):A-D<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",D,k,A);const{data:O,error:L}=await this._getUser(u);if(L)throw L;const U={provider_token:o,provider_refresh_token:c,access_token:u,expires_in:_,expires_at:k,refresh_token:p,token_type:y,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:e.type},error:null})}catch(o){if(it(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await No(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:c,error:u}=n;if(u)return this._returnResult({error:u});const p=(o=c.session)===null||o===void 0?void 0:o.access_token;if(p){const{error:x}=await this.admin.signOut(p,e);if(x&&!(MA(x)&&(x.status===404||x.status===401||x.status===403)))return this._returnResult({error:x})}return e!=="others"&&(await this._removeSession(),await Ls(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=$A(),o={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async n=>{var o,c;try{const{data:{session:u},error:p}=n;if(p)throw p;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((c=this.stateChangeEmitters.get(e))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,n={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await ya(this.storage,this.storageKey,!0));try{return await ft(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(it(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var e;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:o,error:c}=await this._useSession(async u=>{var p,x,b,y,A;const{data:_,error:k}=u;if(k)throw k;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(p=e.options)===null||p===void 0?void 0:p.redirectTo,scopes:(x=e.options)===null||x===void 0?void 0:x.scopes,queryParams:(b=e.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await ft(this.fetch,"GET",T,{headers:this.headers,jwt:(A=(y=_.session)===null||y===void 0?void 0:y.access_token)!==null&&A!==void 0?A:void 0})});if(c)throw c;return or()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:e.provider,url:o?.url},error:null})}catch(o){if(it(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var o;try{const{error:c,data:{session:u}}=n;if(c)throw c;const{options:p,provider:x,token:b,access_token:y,nonce:A}=e,_=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:x,id_token:b,access_token:y,nonce:A,link_identity:!0,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:gi}),{data:k,error:T}=_;return T?this._returnResult({data:{user:null,session:null},error:T}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new wa}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:T}))}catch(c){if(it(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var o,c;const{data:u,error:p}=n;if(p)throw p;return await ft(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await YA(async c=>(c>0&&await XA(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await ft(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gi})),(c,u)=>{const p=200*Math.pow(2,c);return u&&mf(u)&&Date.now()+p-o<Ia})}catch(o){if(this._debug(n,"error",o),it(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",o),or()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await No(this.storage,this.storageKey);if(c&&this.userStorage){let p=await No(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!p&&(p={user:c.user},await Ta(this.userStorage,this.storageKey+"-user",p)),c.user=(e=p?.user)!==null&&e!==void 0?e:wf()}else if(c&&!c.user&&!c.user){const p=await No(this.storage,this.storageKey+"-user");p&&p?.user?(c.user=p.user,await Ls(this.storage,this.storageKey+"-user"),await Ta(this.storage,this.storageKey,c)):c.user=wf()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const u=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<pf;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${pf}s`),u){if(this.autoRefreshToken&&c.refresh_token){const{error:p}=await this._callRefreshToken(c.refresh_token);p&&(console.error(p),mf(p)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",p),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:p,error:x}=await this._getUser(c.access_token);!x&&p?.user?(c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(p){console.error("Error getting user data:",p),this._debug(o,"error getting user data, skipping SIGNED_IN notification",p)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var n,o;if(!e)throw new fi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new pd;const{data:u,error:p}=await this._refreshAccessToken(e);if(p)throw p;if(!u.session)throw new fi;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const x={data:u.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(u){if(this._debug(c,"error",u),it(u)){const p={data:null,error:u};return mf(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(p),p}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(e,n,o=!0){const c=`#_notifyAllSubscribers(${e})`;this._debug(c,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:n});const u=[],p=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(e,n)}catch(b){u.push(b)}});if(await Promise.all(p),u.length>0){for(let x=0;x<u.length;x+=1)console.error(u[x]);throw u[0]}}finally{this._debug(c,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await Ta(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const u=um(c);await Ta(this.storage,this.storageKey,u)}else{const c=um(n);await Ta(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),await Ls(this.storage,this.storageKey),await Ls(this.storage,this.storageKey+"-code-verifier"),await Ls(this.storage,this.storageKey+"-user"),this.userStorage&&await Ls(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&or()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ia);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-e)/Ia);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Ia}ms, refresh threshold is ${g0} ticks`),c<=g0&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ey)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!or()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,o){const c=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,p]=await ya(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(p)}`});c.push(x.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);c.push(u.toString())}return o?.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${c.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var o;const{data:c,error:u}=n;return u?this._returnResult({data:null,error:u}):await ft(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var o,c;const{data:u,error:p}=n;if(p)return this._returnResult({data:null,error:p});const x=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:b,error:y}=await ft(this.fetch,"POST",`${this.url}/factors`,{body:x,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(e.factorType==="totp"&&b.type==="totp"&&(!((c=b?.totp)===null||c===void 0)&&c.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),this._returnResult({data:b,error:null}))})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const p=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?A3(e.webauthn.credential_response):_3(e.webauthn.credential_response)})}:{code:e.code}),{data:x,error:b}=await ft(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:p,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return b?this._returnResult({data:null,error:b}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+x.expires_in},x)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",x),this._returnResult({data:x,error:b}))})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const p=await ft(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});if(p.error)return p;const{data:x}=p;if(x.type!=="webauthn")return{data:x,error:null};switch(x.webauthn.type){case"create":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:E3(x.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:S3(x.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const c={all:[],phone:[],totp:[],webauthn:[]};for(const u of(e=n?.factors)!==null&&e!==void 0?e:[])c.all.push(u),u.status==="verified"&&c[u.factor_type].push(u);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=xf(o.access_token);let p=null;u.aal&&(p=u.aal);let x=p;((n=(e=o.user.factors)===null||e===void 0?void 0:e.filter(A=>A.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const y=u.amr||[];return{data:{currentLevel:p,nextLevel:x,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;return c?this._returnResult({data:null,error:c}):o?await ft(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new fi})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new fi});const p=await ft(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:x=>({data:x,error:null})});return p.data&&p.data.redirect_url&&or()&&!n?.skipBrowserRedirect&&window.location.assign(p.data.redirect_url),p})}catch(o){if(it(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:c},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!c)return this._returnResult({data:null,error:new fi});const p=await ft(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:x=>({data:x,error:null})});return p.data&&p.data.redirect_url&&or()&&!n?.skipBrowserRedirect&&window.location.assign(p.data.redirect_url),p})}catch(o){if(it(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(e,n={keys:[]}){let o=n.keys.find(x=>x.kid===e);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(x=>x.kid===e),o&&this.jwks_cached_at+jA>c)return o;const{data:u,error:p}=await ft(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(p)throw p;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=c,o=u.keys.find(x=>x.kid===e),!o)?null:o}async getClaims(e,n={}){try{let o=e;if(!o){const{data:T,error:D}=await this.getSession();if(D||!T.session)return this._returnResult({data:null,error:D});o=T.session.access_token}const{header:c,payload:u,signature:p,raw:{header:x,payload:b}}=xf(o);n?.allowExpired||n3(u.exp);const y=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!y){const{error:T}=await this.getUser(o);if(T)throw T;return{data:{claims:u,header:c,signature:p},error:null}}const A=r3(c.alg),_=await crypto.subtle.importKey("jwk",y,A,!0,["verify"]);if(!await crypto.subtle.verify(A,_,p,WA(`${x}.${b}`)))throw new x0("Invalid JWT signature");return{data:{claims:u,header:c,signature:p},error:null}}catch(o){if(it(o))return this._returnResult({data:null,error:o});throw o}}}ec.nextInstanceID=0;const D3=ec;class M3 extends D3{constructor(e){super(e)}}class L3{constructor(e,n,o){var c,u,p;this.supabaseUrl=e,this.supabaseKey=n;const x=TA(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const b=`sb-${x.hostname.split(".")[0]}-auth-token`,y={db:bA,realtime:EA,auth:Object.assign(Object.assign({},CA),{storageKey:b}),global:vA},A=IA(o??{},y);this.storageKey=(c=A.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(u=A.global.headers)!==null&&u!==void 0?u:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(_,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((p=A.auth)!==null&&p!==void 0?p:{},this.headers,A.global.fetch),this.fetch=_A(n,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.rest=new RS(new URL("rest/v1",x).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new xA(this.storageUrl.href,this.headers,this.fetch,o?.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new _S(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,o)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(n=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:o,storage:c,userStorage:u,storageKey:p,flowType:x,lock:b,debug:y,throwOnError:A},_,k){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M3({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),_),storageKey:p,autoRefreshToken:e,persistSession:n,detectSessionInUrl:o,storage:c,userStorage:u,flowType:x,lock:b,debug:y,throwOnError:A,fetch:k,hasCustomAuthorizationHeader:Object.keys(this.headers).some(D=>D.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new qS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,o)=>{this._handleTokenChanged(n,"CLIENT",o?.access_token)})}_handleTokenChanged(e,n,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ry=(r,e,n)=>new L3(r,e,n);function B3(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}B3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iy="xtrognfmzyzqhsfvtgne",sy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0cm9nbmZtenl6cWhzZnZ0Z25lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExMjE1NDcsImV4cCI6MjA3NjY5NzU0N30.eHPZYU7pHDzseAF4UDtjHCqJO6_MYMZy8UpqL-YViCU",ti=ry(`https://${iy}.supabase.co`,sy);function F3({onAuthenticated:r,onBackToHome:e}){const[n,o]=R.useState(!1),[c,u]=R.useState(""),[p,x]=R.useState({email:"",password:""}),b=async y=>{y.preventDefault(),o(!0),u("");try{const{data:A,error:_}=await ti.auth.signInWithPassword({email:p.email,password:p.password});if(_||!A.session)throw new Error(_?.message||"Login failed");r(A.session.access_token)}catch(A){console.error("Login error:",A),u(A.message||"Invalid email or password. Please try again.")}finally{o(!1)}};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50"}),m.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-violet-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-pink-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),m.jsxs("div",{className:"w-full max-w-md relative z-10 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e&&m.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50 rounded-lg px-3 py-2 bg-white/60 backdrop-blur-sm","aria-label":"Go back to home page",children:[m.jsx(ew,{className:"h-4 w-4"}),"Back to Home"]}),m.jsxs(wi,{className:"shadow-xl border-0 glass-effect",children:[m.jsxs(Vs,{className:"space-y-6 pb-6",children:[m.jsx("div",{className:"flex justify-center",children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-20 h-20 gradient-primary rounded-3xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:m.jsx(Vp,{className:"h-10 w-10 text-white"})}),m.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-gradient-to-br from-emerald-400 to-emerald-500 rounded-full border-4 border-white flex items-center justify-center shadow-md",children:m.jsx(zp,{className:"h-4 w-4 text-white"})})]})}),m.jsxs("div",{className:"text-center space-y-2",children:[m.jsx(Ws,{className:"text-3xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Admin Portal"}),m.jsx(Wa,{className:"text-base text-gray-600",children:"Sign in to manage events and registrations"})]})]}),m.jsx(Bi,{children:m.jsxs("form",{onSubmit:b,className:"space-y-5",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Qe,{htmlFor:"email",className:"flex items-center gap-2",children:[m.jsx(XE,{className:"h-4 w-4 text-muted-foreground"}),"Email Address"]}),m.jsx(ut,{id:"email",type:"email",placeholder:"admin@example.com",value:p.email,onChange:y=>x(A=>({...A,email:y.target.value})),required:!0,className:"h-11",autoComplete:"email",autoFocus:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Qe,{htmlFor:"password",className:"flex items-center gap-2",children:[m.jsx(zp,{className:"h-4 w-4 text-muted-foreground"}),"Password"]}),m.jsx(ut,{id:"password",type:"password",placeholder:"Enter your password",value:p.password,onChange:y=>x(A=>({...A,password:y.target.value})),required:!0,className:"h-11",autoComplete:"current-password"})]}),c&&m.jsx(Ra,{variant:"destructive",children:m.jsx(ka,{children:c})}),m.jsx(qe,{type:"submit",className:"w-full h-12 text-base gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/40",disabled:n,children:n?m.jsxs(m.Fragment,{children:[m.jsx(Fi,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing in..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Vp,{className:"mr-2 h-5 w-5"}),"Sign In"]})})]})}),m.jsxs(qC,{className:"flex flex-col space-y-4 border-t pt-6",children:[m.jsx("div",{className:"w-full p-4 gradient-primary-soft border border-purple-200 rounded-xl",children:m.jsxs("p",{className:"text-sm text-purple-900 text-center",children:[m.jsx("span",{className:"font-semibold",children:"First time?"})," Contact your system administrator to set up your account."]})}),m.jsx("p",{className:"text-xs text-center text-gray-500",children:" This is a secure admin-only area. Unauthorized access is prohibited."})]})]}),m.jsx("div",{className:"mt-8 text-center",children:m.jsx("p",{className:"text-sm text-gray-600 bg-white/60 backdrop-blur-sm px-4 py-2 rounded-full inline-block",children:"Event Registration Management System"})})]})]})}function Et(r,e,{checkForDefaultPrevented:n=!0}={}){return function(c){if(r?.(c),n===!1||!c.defaultPrevented)return e?.(c)}}function U3(r,e){const n=R.createContext(e),o=u=>{const{children:p,...x}=u,b=R.useMemo(()=>x,Object.values(x));return m.jsx(n.Provider,{value:b,children:p})};o.displayName=r+"Provider";function c(u){const p=R.useContext(n);if(p)return p;if(e!==void 0)return e;throw new Error(`\`${u}\` must be used within \`${r}\``)}return[o,c]}function ni(r,e=[]){let n=[];function o(u,p){const x=R.createContext(p),b=n.length;n=[...n,p];const y=_=>{const{scope:k,children:T,...D}=_,O=k?.[r]?.[b]||x,L=R.useMemo(()=>D,Object.values(D));return m.jsx(O.Provider,{value:L,children:T})};y.displayName=u+"Provider";function A(_,k){const T=k?.[r]?.[b]||x,D=R.useContext(T);if(D)return D;if(p!==void 0)return p;throw new Error(`\`${_}\` must be used within \`${u}\``)}return[y,A]}const c=()=>{const u=n.map(p=>R.createContext(p));return function(x){const b=x?.[r]||u;return R.useMemo(()=>({[`__scope${r}`]:{...x,[r]:b}}),[x,b])}};return c.scopeName=r,[o,z3(c,...e)]}function z3(...r){const e=r[0];if(r.length===1)return e;const n=()=>{const o=r.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(u){const p=o.reduce((x,{useScope:b,scopeName:y})=>{const _=b(u)[`__scope${y}`];return{...x,..._}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:p}),[p])}};return n.scopeName=e.scopeName,n}function xm(r){const e=V3(r),n=R.forwardRef((o,c)=>{const{children:u,...p}=o,x=R.Children.toArray(u),b=x.find(H3);if(b){const y=b.props.children,A=x.map(_=>_===b?R.Children.count(y)>1?R.Children.only(null):R.isValidElement(y)?y.props.children:null:_);return m.jsx(e,{...p,ref:c,children:R.isValidElement(y)?R.cloneElement(y,void 0,A):null})}return m.jsx(e,{...p,ref:c,children:u})});return n.displayName=`${r}.Slot`,n}function V3(r){const e=R.forwardRef((n,o)=>{const{children:c,...u}=n;if(R.isValidElement(c)){const p=G3(c),x=$3(u,c.props);return c.type!==R.Fragment&&(x.ref=o?Ga(o,p):p),R.cloneElement(c,x)}return R.Children.count(c)>1?R.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var W3=Symbol("radix.slottable");function H3(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===W3}function $3(r,e){const n={...e};for(const o in e){const c=r[o],u=e[o];/^on[A-Z]/.test(o)?c&&u?n[o]=(...x)=>{const b=u(...x);return c(...x),b}:c&&(n[o]=c):o==="style"?n[o]={...c,...u}:o==="className"&&(n[o]=[c,u].filter(Boolean).join(" "))}return{...r,...n}}function G3(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function K0(r){const e=r+"CollectionProvider",[n,o]=ni(e),[c,u]=n(e,{collectionRef:{current:null},itemMap:new Map}),p=O=>{const{scope:L,children:U}=O,z=Jt.useRef(null),F=Jt.useRef(new Map).current;return m.jsx(c,{scope:L,itemMap:F,collectionRef:z,children:U})};p.displayName=e;const x=r+"CollectionSlot",b=xm(x),y=Jt.forwardRef((O,L)=>{const{scope:U,children:z}=O,F=u(x,U),$=Ut(L,F.collectionRef);return m.jsx(b,{ref:$,children:z})});y.displayName=x;const A=r+"CollectionItemSlot",_="data-radix-collection-item",k=xm(A),T=Jt.forwardRef((O,L)=>{const{scope:U,children:z,...F}=O,$=Jt.useRef(null),se=Ut(L,$),Y=u(A,U);return Jt.useEffect(()=>(Y.itemMap.set($,{ref:$,...F}),()=>void Y.itemMap.delete($))),m.jsx(k,{[_]:"",ref:se,children:z})});T.displayName=A;function D(O){const L=u(r+"CollectionConsumer",O);return Jt.useCallback(()=>{const z=L.collectionRef.current;if(!z)return[];const F=Array.from(z.querySelectorAll(`[${_}]`));return Array.from(L.itemMap.values()).sort((Y,V)=>F.indexOf(Y.ref.current)-F.indexOf(V.ref.current))},[L.collectionRef,L.itemMap])}return[{Provider:p,Slot:y,ItemSlot:T},D,o]}var Yn=globalThis?.document?R.useLayoutEffect:()=>{},q3=j0[" useId ".trim().toString()]||(()=>{}),X3=0;function Ui(r){const[e,n]=R.useState(q3());return Yn(()=>{n(o=>o??String(X3++))},[r]),r||(e?`radix-${e}`:"")}function Y3(r){const e=K3(r),n=R.forwardRef((o,c)=>{const{children:u,...p}=o,x=R.Children.toArray(u),b=x.find(Q3);if(b){const y=b.props.children,A=x.map(_=>_===b?R.Children.count(y)>1?R.Children.only(null):R.isValidElement(y)?y.props.children:null:_);return m.jsx(e,{...p,ref:c,children:R.isValidElement(y)?R.cloneElement(y,void 0,A):null})}return m.jsx(e,{...p,ref:c,children:u})});return n.displayName=`${r}.Slot`,n}function K3(r){const e=R.forwardRef((n,o)=>{const{children:c,...u}=n;if(R.isValidElement(c)){const p=e_(c),x=J3(u,c.props);return c.type!==R.Fragment&&(x.ref=o?Ga(o,p):p),R.cloneElement(c,x)}return R.Children.count(c)>1?R.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var Z3=Symbol("radix.slottable");function Q3(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Z3}function J3(r,e){const n={...e};for(const o in e){const c=r[o],u=e[o];/^on[A-Z]/.test(o)?c&&u?n[o]=(...x)=>{const b=u(...x);return c(...x),b}:c&&(n[o]=c):o==="style"?n[o]={...c,...u}:o==="className"&&(n[o]=[c,u].filter(Boolean).join(" "))}return{...r,...n}}function e_(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var t_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xt=t_.reduce((r,e)=>{const n=Y3(`Primitive.${e}`),o=R.forwardRef((c,u)=>{const{asChild:p,...x}=c,b=p?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(b,{...x,ref:u})});return o.displayName=`Primitive.${e}`,{...r,[e]:o}},{});function n_(r,e){r&&Ya.flushSync(()=>r.dispatchEvent(e))}function Hs(r){const e=R.useRef(r);return R.useEffect(()=>{e.current=r}),R.useMemo(()=>(...n)=>e.current?.(...n),[])}var r_=j0[" useInsertionEffect ".trim().toString()]||Yn;function bi({prop:r,defaultProp:e,onChange:n=()=>{},caller:o}){const[c,u,p]=i_({defaultProp:e,onChange:n}),x=r!==void 0,b=x?r:c;{const A=R.useRef(r!==void 0);R.useEffect(()=>{const _=A.current;_!==x&&console.warn(`${o} is changing from ${_?"controlled":"uncontrolled"} to ${x?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),A.current=x},[x,o])}const y=R.useCallback(A=>{if(x){const _=s_(A)?A(r):A;_!==r&&p.current?.(_)}else u(A)},[x,r,u,p]);return[b,y]}function i_({defaultProp:r,onChange:e}){const[n,o]=R.useState(r),c=R.useRef(n),u=R.useRef(e);return r_(()=>{u.current=e},[e]),R.useEffect(()=>{c.current!==n&&(u.current?.(n),c.current=n)},[n,c]),[n,o,u]}function s_(r){return typeof r=="function"}var o_=R.createContext(void 0);function lc(r){const e=R.useContext(o_);return r||e||"ltr"}var vf="rovingFocusGroup.onEntryFocus",a_={bubbles:!1,cancelable:!0},cc="RovingFocusGroup",[w0,oy,l_]=K0(cc),[c_,md]=ni(cc,[l_]),[u_,d_]=c_(cc),ay=R.forwardRef((r,e)=>m.jsx(w0.Provider,{scope:r.__scopeRovingFocusGroup,children:m.jsx(w0.Slot,{scope:r.__scopeRovingFocusGroup,children:m.jsx(h_,{...r,ref:e})})}));ay.displayName=cc;var h_=R.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:c=!1,dir:u,currentTabStopId:p,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:b,onEntryFocus:y,preventScrollOnEntryFocus:A=!1,..._}=r,k=R.useRef(null),T=Ut(e,k),D=lc(u),[O,L]=bi({prop:p,defaultProp:x??null,onChange:b,caller:cc}),[U,z]=R.useState(!1),F=Hs(y),$=oy(n),se=R.useRef(!1),[Y,V]=R.useState(0);return R.useEffect(()=>{const X=k.current;if(X)return X.addEventListener(vf,F),()=>X.removeEventListener(vf,F)},[F]),m.jsx(u_,{scope:n,orientation:o,dir:D,loop:c,currentTabStopId:O,onItemFocus:R.useCallback(X=>L(X),[L]),onItemShiftTab:R.useCallback(()=>z(!0),[]),onFocusableItemAdd:R.useCallback(()=>V(X=>X+1),[]),onFocusableItemRemove:R.useCallback(()=>V(X=>X-1),[]),children:m.jsx(xt.div,{tabIndex:U||Y===0?-1:0,"data-orientation":o,..._,ref:T,style:{outline:"none",...r.style},onMouseDown:Et(r.onMouseDown,()=>{se.current=!0}),onFocus:Et(r.onFocus,X=>{const W=!se.current;if(X.target===X.currentTarget&&W&&!U){const ye=new CustomEvent(vf,a_);if(X.currentTarget.dispatchEvent(ye),!ye.defaultPrevented){const be=$().filter(ce=>ce.focusable),de=be.find(ce=>ce.active),ve=be.find(ce=>ce.id===O),ie=[de,ve,...be].filter(Boolean).map(ce=>ce.ref.current);uy(ie,A)}}se.current=!1}),onBlur:Et(r.onBlur,()=>z(!1))})})}),ly="RovingFocusGroupItem",cy=R.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:c=!1,tabStopId:u,children:p,...x}=r,b=Ui(),y=u||b,A=d_(ly,n),_=A.currentTabStopId===y,k=oy(n),{onFocusableItemAdd:T,onFocusableItemRemove:D,currentTabStopId:O}=A;return R.useEffect(()=>{if(o)return T(),()=>D()},[o,T,D]),m.jsx(w0.ItemSlot,{scope:n,id:y,focusable:o,active:c,children:m.jsx(xt.span,{tabIndex:_?0:-1,"data-orientation":A.orientation,...x,ref:e,onMouseDown:Et(r.onMouseDown,L=>{o?A.onItemFocus(y):L.preventDefault()}),onFocus:Et(r.onFocus,()=>A.onItemFocus(y)),onKeyDown:Et(r.onKeyDown,L=>{if(L.key==="Tab"&&L.shiftKey){A.onItemShiftTab();return}if(L.target!==L.currentTarget)return;const U=p_(L,A.orientation,A.dir);if(U!==void 0){if(L.metaKey||L.ctrlKey||L.altKey||L.shiftKey)return;L.preventDefault();let F=k().filter($=>$.focusable).map($=>$.ref.current);if(U==="last")F.reverse();else if(U==="prev"||U==="next"){U==="prev"&&F.reverse();const $=F.indexOf(L.currentTarget);F=A.loop?m_(F,$+1):F.slice($+1)}setTimeout(()=>uy(F))}}),children:typeof p=="function"?p({isCurrentTabStop:_,hasTabStop:O!=null}):p})})});cy.displayName=ly;var f_={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function g_(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function p_(r,e,n){const o=g_(r.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return f_[o]}function uy(r,e=!1){const n=document.activeElement;for(const o of r)if(o===n||(o.focus({preventScroll:e}),document.activeElement!==n))return}function m_(r,e){return r.map((n,o)=>r[(e+o)%r.length])}var dy=ay,hy=cy;function x_(r,e){return R.useReducer((n,o)=>e[n][o]??n,r)}var Ys=r=>{const{present:e,children:n}=r,o=w_(e),c=typeof n=="function"?n({present:o.isPresent}):R.Children.only(n),u=Ut(o.ref,y_(c));return typeof n=="function"||o.isPresent?R.cloneElement(c,{ref:u}):null};Ys.displayName="Presence";function w_(r){const[e,n]=R.useState(),o=R.useRef(null),c=R.useRef(r),u=R.useRef("none"),p=r?"mounted":"unmounted",[x,b]=x_(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const y=ku(o.current);u.current=x==="mounted"?y:"none"},[x]),Yn(()=>{const y=o.current,A=c.current;if(A!==r){const k=u.current,T=ku(y);r?b("MOUNT"):T==="none"||y?.display==="none"?b("UNMOUNT"):b(A&&k!==T?"ANIMATION_OUT":"UNMOUNT"),c.current=r}},[r,b]),Yn(()=>{if(e){let y;const A=e.ownerDocument.defaultView??window,_=T=>{const O=ku(o.current).includes(CSS.escape(T.animationName));if(T.target===e&&O&&(b("ANIMATION_END"),!c.current)){const L=e.style.animationFillMode;e.style.animationFillMode="forwards",y=A.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=L)})}},k=T=>{T.target===e&&(u.current=ku(o.current))};return e.addEventListener("animationstart",k),e.addEventListener("animationcancel",_),e.addEventListener("animationend",_),()=>{A.clearTimeout(y),e.removeEventListener("animationstart",k),e.removeEventListener("animationcancel",_),e.removeEventListener("animationend",_)}}else b("ANIMATION_END")},[e,b]),{isPresent:["mounted","unmountSuspended"].includes(x),ref:R.useCallback(y=>{o.current=y?getComputedStyle(y):null,n(y)},[])}}function ku(r){return r?.animationName||"none"}function y_(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var xd="Tabs",[v_]=ni(xd,[md]),fy=md(),[b_,Z0]=v_(xd),gy=R.forwardRef((r,e)=>{const{__scopeTabs:n,value:o,onValueChange:c,defaultValue:u,orientation:p="horizontal",dir:x,activationMode:b="automatic",...y}=r,A=lc(x),[_,k]=bi({prop:o,onChange:c,defaultProp:u??"",caller:xd});return m.jsx(b_,{scope:n,baseId:Ui(),value:_,onValueChange:k,orientation:p,dir:A,activationMode:b,children:m.jsx(xt.div,{dir:A,"data-orientation":p,...y,ref:e})})});gy.displayName=xd;var py="TabsList",my=R.forwardRef((r,e)=>{const{__scopeTabs:n,loop:o=!0,...c}=r,u=Z0(py,n),p=fy(n);return m.jsx(dy,{asChild:!0,...p,orientation:u.orientation,dir:u.dir,loop:o,children:m.jsx(xt.div,{role:"tablist","aria-orientation":u.orientation,...c,ref:e})})});my.displayName=py;var xy="TabsTrigger",wy=R.forwardRef((r,e)=>{const{__scopeTabs:n,value:o,disabled:c=!1,...u}=r,p=Z0(xy,n),x=fy(n),b=by(p.baseId,o),y=Cy(p.baseId,o),A=o===p.value;return m.jsx(hy,{asChild:!0,...x,focusable:!c,active:A,children:m.jsx(xt.button,{type:"button",role:"tab","aria-selected":A,"aria-controls":y,"data-state":A?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:b,...u,ref:e,onMouseDown:Et(r.onMouseDown,_=>{!c&&_.button===0&&_.ctrlKey===!1?p.onValueChange(o):_.preventDefault()}),onKeyDown:Et(r.onKeyDown,_=>{[" ","Enter"].includes(_.key)&&p.onValueChange(o)}),onFocus:Et(r.onFocus,()=>{const _=p.activationMode!=="manual";!A&&!c&&_&&p.onValueChange(o)})})})});wy.displayName=xy;var yy="TabsContent",vy=R.forwardRef((r,e)=>{const{__scopeTabs:n,value:o,forceMount:c,children:u,...p}=r,x=Z0(yy,n),b=by(x.baseId,o),y=Cy(x.baseId,o),A=o===x.value,_=R.useRef(A);return R.useEffect(()=>{const k=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(k)},[]),m.jsx(Ys,{present:c||A,children:({present:k})=>m.jsx(xt.div,{"data-state":A?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":b,hidden:!k,id:y,tabIndex:0,...p,ref:e,style:{...r.style,animationDuration:_.current?"0s":void 0},children:k&&u})})});vy.displayName=yy;function by(r,e){return`${r}-trigger-${e}`}function Cy(r,e){return`${r}-content-${e}`}var C_=gy,E_=my,S_=wy,A_=vy;function __({className:r,...e}){return m.jsx(C_,{"data-slot":"tabs",className:yt("flex flex-col gap-2",r),...e})}function N_({className:r,...e}){return m.jsx(E_,{"data-slot":"tabs-list",className:yt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",r),...e})}function bf({className:r,...e}){return m.jsx(S_,{"data-slot":"tabs-trigger",className:yt("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...e})}function Cf({className:r,...e}){return m.jsx(A_,{"data-slot":"tabs-content",className:yt("flex-1 outline-none",r),...e})}function jo({className:r,...e}){return m.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:m.jsx("table",{"data-slot":"table",className:yt("w-full caption-bottom text-sm",r),...e})})}function Do({className:r,...e}){return m.jsx("thead",{"data-slot":"table-header",className:yt("[&_tr]:border-b",r),...e})}function Mo({className:r,...e}){return m.jsx("tbody",{"data-slot":"table-body",className:yt("[&_tr:last-child]:border-0",r),...e})}function ur({className:r,...e}){return m.jsx("tr",{"data-slot":"table-row",className:yt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...e})}function kt({className:r,...e}){return m.jsx("th",{"data-slot":"table-head",className:yt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...e})}function Nt({className:r,...e}){return m.jsx("td",{"data-slot":"table-cell",className:yt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...e})}function I_(r,e=globalThis?.document){const n=Hs(r);R.useEffect(()=>{const o=c=>{c.key==="Escape"&&n(c)};return e.addEventListener("keydown",o,{capture:!0}),()=>e.removeEventListener("keydown",o,{capture:!0})},[n,e])}var T_="DismissableLayer",y0="dismissableLayer.update",R_="dismissableLayer.pointerDownOutside",k_="dismissableLayer.focusOutside",wm,Ey=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Q0=R.forwardRef((r,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:p,onDismiss:x,...b}=r,y=R.useContext(Ey),[A,_]=R.useState(null),k=A?.ownerDocument??globalThis?.document,[,T]=R.useState({}),D=Ut(e,V=>_(V)),O=Array.from(y.layers),[L]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),U=O.indexOf(L),z=A?O.indexOf(A):-1,F=y.layersWithOutsidePointerEventsDisabled.size>0,$=z>=U,se=j_(V=>{const X=V.target,W=[...y.branches].some(ye=>ye.contains(X));!$||W||(c?.(V),p?.(V),V.defaultPrevented||x?.())},k),Y=D_(V=>{const X=V.target;[...y.branches].some(ye=>ye.contains(X))||(u?.(V),p?.(V),V.defaultPrevented||x?.())},k);return I_(V=>{z===y.layers.size-1&&(o?.(V),!V.defaultPrevented&&x&&(V.preventDefault(),x()))},k),R.useEffect(()=>{if(A)return n&&(y.layersWithOutsidePointerEventsDisabled.size===0&&(wm=k.body.style.pointerEvents,k.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(A)),y.layers.add(A),ym(),()=>{n&&y.layersWithOutsidePointerEventsDisabled.size===1&&(k.body.style.pointerEvents=wm)}},[A,k,n,y]),R.useEffect(()=>()=>{A&&(y.layers.delete(A),y.layersWithOutsidePointerEventsDisabled.delete(A),ym())},[A,y]),R.useEffect(()=>{const V=()=>T({});return document.addEventListener(y0,V),()=>document.removeEventListener(y0,V)},[]),m.jsx(xt.div,{...b,ref:D,style:{pointerEvents:F?$?"auto":"none":void 0,...r.style},onFocusCapture:Et(r.onFocusCapture,Y.onFocusCapture),onBlurCapture:Et(r.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:Et(r.onPointerDownCapture,se.onPointerDownCapture)})});Q0.displayName=T_;var O_="DismissableLayerBranch",P_=R.forwardRef((r,e)=>{const n=R.useContext(Ey),o=R.useRef(null),c=Ut(e,o);return R.useEffect(()=>{const u=o.current;if(u)return n.branches.add(u),()=>{n.branches.delete(u)}},[n.branches]),m.jsx(xt.div,{...r,ref:c})});P_.displayName=O_;function j_(r,e=globalThis?.document){const n=Hs(r),o=R.useRef(!1),c=R.useRef(()=>{});return R.useEffect(()=>{const u=x=>{if(x.target&&!o.current){let b=function(){Sy(R_,n,y,{discrete:!0})};const y={originalEvent:x};x.pointerType==="touch"?(e.removeEventListener("click",c.current),c.current=b,e.addEventListener("click",c.current,{once:!0})):b()}else e.removeEventListener("click",c.current);o.current=!1},p=window.setTimeout(()=>{e.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(p),e.removeEventListener("pointerdown",u),e.removeEventListener("click",c.current)}},[e,n]),{onPointerDownCapture:()=>o.current=!0}}function D_(r,e=globalThis?.document){const n=Hs(r),o=R.useRef(!1);return R.useEffect(()=>{const c=u=>{u.target&&!o.current&&Sy(k_,n,{originalEvent:u},{discrete:!1})};return e.addEventListener("focusin",c),()=>e.removeEventListener("focusin",c)},[e,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function ym(){const r=new CustomEvent(y0);document.dispatchEvent(r)}function Sy(r,e,n,{discrete:o}){const c=n.originalEvent.target,u=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:n});e&&c.addEventListener(r,e,{once:!0}),o?n_(c,u):c.dispatchEvent(u)}var Ef="focusScope.autoFocusOnMount",Sf="focusScope.autoFocusOnUnmount",vm={bubbles:!1,cancelable:!0},M_="FocusScope",J0=R.forwardRef((r,e)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:c,onUnmountAutoFocus:u,...p}=r,[x,b]=R.useState(null),y=Hs(c),A=Hs(u),_=R.useRef(null),k=Ut(e,O=>b(O)),T=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(o){let O=function(F){if(T.paused||!x)return;const $=F.target;x.contains($)?_.current=$:Fs(_.current,{select:!0})},L=function(F){if(T.paused||!x)return;const $=F.relatedTarget;$!==null&&(x.contains($)||Fs(_.current,{select:!0}))},U=function(F){if(document.activeElement===document.body)for(const se of F)se.removedNodes.length>0&&Fs(x)};document.addEventListener("focusin",O),document.addEventListener("focusout",L);const z=new MutationObserver(U);return x&&z.observe(x,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",O),document.removeEventListener("focusout",L),z.disconnect()}}},[o,x,T.paused]),R.useEffect(()=>{if(x){Cm.add(T);const O=document.activeElement;if(!x.contains(O)){const U=new CustomEvent(Ef,vm);x.addEventListener(Ef,y),x.dispatchEvent(U),U.defaultPrevented||(L_(V_(Ay(x)),{select:!0}),document.activeElement===O&&Fs(x))}return()=>{x.removeEventListener(Ef,y),setTimeout(()=>{const U=new CustomEvent(Sf,vm);x.addEventListener(Sf,A),x.dispatchEvent(U),U.defaultPrevented||Fs(O??document.body,{select:!0}),x.removeEventListener(Sf,A),Cm.remove(T)},0)}}},[x,y,A,T]);const D=R.useCallback(O=>{if(!n&&!o||T.paused)return;const L=O.key==="Tab"&&!O.altKey&&!O.ctrlKey&&!O.metaKey,U=document.activeElement;if(L&&U){const z=O.currentTarget,[F,$]=B_(z);F&&$?!O.shiftKey&&U===$?(O.preventDefault(),n&&Fs(F,{select:!0})):O.shiftKey&&U===F&&(O.preventDefault(),n&&Fs($,{select:!0})):U===z&&O.preventDefault()}},[n,o,T.paused]);return m.jsx(xt.div,{tabIndex:-1,...p,ref:k,onKeyDown:D})});J0.displayName=M_;function L_(r,{select:e=!1}={}){const n=document.activeElement;for(const o of r)if(Fs(o,{select:e}),document.activeElement!==n)return}function B_(r){const e=Ay(r),n=bm(e,r),o=bm(e.reverse(),r);return[n,o]}function Ay(r){const e=[],n=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const c=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||c?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bm(r,e){for(const n of r)if(!F_(n,{upTo:e}))return n}function F_(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function U_(r){return r instanceof HTMLInputElement&&"select"in r}function Fs(r,{select:e=!1}={}){if(r&&r.focus){const n=document.activeElement;r.focus({preventScroll:!0}),r!==n&&U_(r)&&e&&r.select()}}var Cm=z_();function z_(){let r=[];return{add(e){const n=r[0];e!==n&&n?.pause(),r=Em(r,e),r.unshift(e)},remove(e){r=Em(r,e),r[0]?.resume()}}}function Em(r,e){const n=[...r],o=n.indexOf(e);return o!==-1&&n.splice(o,1),n}function V_(r){return r.filter(e=>e.tagName!=="A")}var W_="Portal",e1=R.forwardRef((r,e)=>{const{container:n,...o}=r,[c,u]=R.useState(!1);Yn(()=>u(!0),[]);const p=n||c&&globalThis?.document?.body;return p?VC.createPortal(m.jsx(xt.div,{...o,ref:e}),p):null});e1.displayName=W_;var Af=0;function _y(){R.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??Sm()),document.body.insertAdjacentElement("beforeend",r[1]??Sm()),Af++,()=>{Af===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Af--}},[])}function Sm(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var Wu="right-scroll-bar-position",Hu="width-before-scroll-bar",H_="with-scroll-bars-hidden",$_="--removed-body-scroll-bar-size";function _f(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function G_(r,e){var n=R.useState(function(){return{value:r,callback:e,facade:{get current(){return n.value},set current(o){var c=n.value;c!==o&&(n.value=o,n.callback(o,c))}}}})[0];return n.callback=e,n.facade}var q_=typeof window<"u"?R.useLayoutEffect:R.useEffect,Am=new WeakMap;function X_(r,e){var n=G_(null,function(o){return r.forEach(function(c){return _f(c,o)})});return q_(function(){var o=Am.get(n);if(o){var c=new Set(o),u=new Set(r),p=n.current;c.forEach(function(x){u.has(x)||_f(x,null)}),u.forEach(function(x){c.has(x)||_f(x,p)})}Am.set(n,r)},[r]),n}function Y_(r){return r}function K_(r,e){e===void 0&&(e=Y_);var n=[],o=!1,c={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:r},useMedium:function(u){var p=e(u,o);return n.push(p),function(){n=n.filter(function(x){return x!==p})}},assignSyncMedium:function(u){for(o=!0;n.length;){var p=n;n=[],p.forEach(u)}n={push:function(x){return u(x)},filter:function(){return n}}},assignMedium:function(u){o=!0;var p=[];if(n.length){var x=n;n=[],x.forEach(u),p=n}var b=function(){var A=p;p=[],A.forEach(u)},y=function(){return Promise.resolve().then(b)};y(),n={push:function(A){p.push(A),y()},filter:function(A){return p=p.filter(A),n}}}};return c}function Z_(r){r===void 0&&(r={});var e=K_(null);return e.options=Qr({async:!0,ssr:!1},r),e}var Ny=function(r){var e=r.sideCar,n=qs(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=e.read();if(!o)throw new Error("Sidecar medium not found");return R.createElement(o,Qr({},n))};Ny.isSideCarExport=!0;function Q_(r,e){return r.useMedium(e),Ny}var Iy=Z_(),Nf=function(){},wd=R.forwardRef(function(r,e){var n=R.useRef(null),o=R.useState({onScrollCapture:Nf,onWheelCapture:Nf,onTouchMoveCapture:Nf}),c=o[0],u=o[1],p=r.forwardProps,x=r.children,b=r.className,y=r.removeScrollBar,A=r.enabled,_=r.shards,k=r.sideCar,T=r.noRelative,D=r.noIsolation,O=r.inert,L=r.allowPinchZoom,U=r.as,z=U===void 0?"div":U,F=r.gapMode,$=qs(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),se=k,Y=X_([n,e]),V=Qr(Qr({},$),c);return R.createElement(R.Fragment,null,A&&R.createElement(se,{sideCar:Iy,removeScrollBar:y,shards:_,noRelative:T,noIsolation:D,inert:O,setCallbacks:u,allowPinchZoom:!!L,lockRef:n,gapMode:F}),p?R.cloneElement(R.Children.only(x),Qr(Qr({},V),{ref:Y})):R.createElement(z,Qr({},V,{className:b,ref:Y}),x))});wd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wd.classNames={fullWidth:Hu,zeroRight:Wu};var J_=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eN(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=J_();return e&&r.setAttribute("nonce",e),r}function tN(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function nN(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var rN=function(){var r=0,e=null;return{add:function(n){r==0&&(e=eN())&&(tN(e,n),nN(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},iN=function(){var r=rN();return function(e,n){R.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&n])}},Ty=function(){var r=iN(),e=function(n){var o=n.styles,c=n.dynamic;return r(o,c),null};return e},sN={left:0,top:0,right:0,gap:0},If=function(r){return parseInt(r||"",10)||0},oN=function(r){var e=window.getComputedStyle(document.body),n=e[r==="padding"?"paddingLeft":"marginLeft"],o=e[r==="padding"?"paddingTop":"marginTop"],c=e[r==="padding"?"paddingRight":"marginRight"];return[If(n),If(o),If(c)]},aN=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return sN;var e=oN(r),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,o-n+e[2]-e[0])}},lN=Ty(),ja="data-scroll-locked",cN=function(r,e,n,o){var c=r.left,u=r.top,p=r.right,x=r.gap;return n===void 0&&(n="margin"),`
  .`.concat(H_,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(x,"px ").concat(o,`;
  }
  body[`).concat(ja,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(o,";"),n==="margin"&&`
    padding-left: `.concat(c,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(x,"px ").concat(o,`;
    `),n==="padding"&&"padding-right: ".concat(x,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wu,` {
    right: `).concat(x,"px ").concat(o,`;
  }
  
  .`).concat(Hu,` {
    margin-right: `).concat(x,"px ").concat(o,`;
  }
  
  .`).concat(Wu," .").concat(Wu,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(Hu," .").concat(Hu,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(ja,`] {
    `).concat($_,": ").concat(x,`px;
  }
`)},_m=function(){var r=parseInt(document.body.getAttribute(ja)||"0",10);return isFinite(r)?r:0},uN=function(){R.useEffect(function(){return document.body.setAttribute(ja,(_m()+1).toString()),function(){var r=_m()-1;r<=0?document.body.removeAttribute(ja):document.body.setAttribute(ja,r.toString())}},[])},dN=function(r){var e=r.noRelative,n=r.noImportant,o=r.gapMode,c=o===void 0?"margin":o;uN();var u=R.useMemo(function(){return aN(c)},[c]);return R.createElement(lN,{styles:cN(u,!e,c,n?"":"!important")})},v0=!1;if(typeof window<"u")try{var Ou=Object.defineProperty({},"passive",{get:function(){return v0=!0,!0}});window.addEventListener("test",Ou,Ou),window.removeEventListener("test",Ou,Ou)}catch{v0=!1}var Ea=v0?{passive:!1}:!1,hN=function(r){return r.tagName==="TEXTAREA"},Ry=function(r,e){if(!(r instanceof Element))return!1;var n=window.getComputedStyle(r);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!hN(r)&&n[e]==="visible")},fN=function(r){return Ry(r,"overflowY")},gN=function(r){return Ry(r,"overflowX")},Nm=function(r,e){var n=e.ownerDocument,o=e;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var c=ky(r,o);if(c){var u=Oy(r,o),p=u[1],x=u[2];if(p>x)return!0}o=o.parentNode}while(o&&o!==n.body);return!1},pN=function(r){var e=r.scrollTop,n=r.scrollHeight,o=r.clientHeight;return[e,n,o]},mN=function(r){var e=r.scrollLeft,n=r.scrollWidth,o=r.clientWidth;return[e,n,o]},ky=function(r,e){return r==="v"?fN(e):gN(e)},Oy=function(r,e){return r==="v"?pN(e):mN(e)},xN=function(r,e){return r==="h"&&e==="rtl"?-1:1},wN=function(r,e,n,o,c){var u=xN(r,window.getComputedStyle(e).direction),p=u*o,x=n.target,b=e.contains(x),y=!1,A=p>0,_=0,k=0;do{if(!x)break;var T=Oy(r,x),D=T[0],O=T[1],L=T[2],U=O-L-u*D;(D||U)&&ky(r,x)&&(_+=U,k+=D);var z=x.parentNode;x=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!b&&x!==document.body||b&&(e.contains(x)||e===x));return(A&&Math.abs(_)<1||!A&&Math.abs(k)<1)&&(y=!0),y},Pu=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},Im=function(r){return[r.deltaX,r.deltaY]},Tm=function(r){return r&&"current"in r?r.current:r},yN=function(r,e){return r[0]===e[0]&&r[1]===e[1]},vN=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},bN=0,Sa=[];function CN(r){var e=R.useRef([]),n=R.useRef([0,0]),o=R.useRef(),c=R.useState(bN++)[0],u=R.useState(Ty)[0],p=R.useRef(r);R.useEffect(function(){p.current=r},[r]),R.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(c));var O=z0([r.lockRef.current],(r.shards||[]).map(Tm),!0).filter(Boolean);return O.forEach(function(L){return L.classList.add("allow-interactivity-".concat(c))}),function(){document.body.classList.remove("block-interactivity-".concat(c)),O.forEach(function(L){return L.classList.remove("allow-interactivity-".concat(c))})}}},[r.inert,r.lockRef.current,r.shards]);var x=R.useCallback(function(O,L){if("touches"in O&&O.touches.length===2||O.type==="wheel"&&O.ctrlKey)return!p.current.allowPinchZoom;var U=Pu(O),z=n.current,F="deltaX"in O?O.deltaX:z[0]-U[0],$="deltaY"in O?O.deltaY:z[1]-U[1],se,Y=O.target,V=Math.abs(F)>Math.abs($)?"h":"v";if("touches"in O&&V==="h"&&Y.type==="range")return!1;var X=Nm(V,Y);if(!X)return!0;if(X?se=V:(se=V==="v"?"h":"v",X=Nm(V,Y)),!X)return!1;if(!o.current&&"changedTouches"in O&&(F||$)&&(o.current=se),!se)return!0;var W=o.current||se;return wN(W,L,O,W==="h"?F:$)},[]),b=R.useCallback(function(O){var L=O;if(!(!Sa.length||Sa[Sa.length-1]!==u)){var U="deltaY"in L?Im(L):Pu(L),z=e.current.filter(function(se){return se.name===L.type&&(se.target===L.target||L.target===se.shadowParent)&&yN(se.delta,U)})[0];if(z&&z.should){L.cancelable&&L.preventDefault();return}if(!z){var F=(p.current.shards||[]).map(Tm).filter(Boolean).filter(function(se){return se.contains(L.target)}),$=F.length>0?x(L,F[0]):!p.current.noIsolation;$&&L.cancelable&&L.preventDefault()}}},[]),y=R.useCallback(function(O,L,U,z){var F={name:O,delta:L,target:U,should:z,shadowParent:EN(U)};e.current.push(F),setTimeout(function(){e.current=e.current.filter(function($){return $!==F})},1)},[]),A=R.useCallback(function(O){n.current=Pu(O),o.current=void 0},[]),_=R.useCallback(function(O){y(O.type,Im(O),O.target,x(O,r.lockRef.current))},[]),k=R.useCallback(function(O){y(O.type,Pu(O),O.target,x(O,r.lockRef.current))},[]);R.useEffect(function(){return Sa.push(u),r.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:k}),document.addEventListener("wheel",b,Ea),document.addEventListener("touchmove",b,Ea),document.addEventListener("touchstart",A,Ea),function(){Sa=Sa.filter(function(O){return O!==u}),document.removeEventListener("wheel",b,Ea),document.removeEventListener("touchmove",b,Ea),document.removeEventListener("touchstart",A,Ea)}},[]);var T=r.removeScrollBar,D=r.inert;return R.createElement(R.Fragment,null,D?R.createElement(u,{styles:vN(c)}):null,T?R.createElement(dN,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function EN(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const SN=Q_(Iy,CN);var t1=R.forwardRef(function(r,e){return R.createElement(wd,Qr({},r,{ref:e,sideCar:SN}))});t1.classNames=wd.classNames;var AN=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},Aa=new WeakMap,ju=new WeakMap,Du={},Tf=0,Py=function(r){return r&&(r.host||Py(r.parentNode))},_N=function(r,e){return e.map(function(n){if(r.contains(n))return n;var o=Py(n);return o&&r.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",r,". Doing nothing"),null)}).filter(function(n){return!!n})},NN=function(r,e,n,o){var c=_N(e,Array.isArray(r)?r:[r]);Du[n]||(Du[n]=new WeakMap);var u=Du[n],p=[],x=new Set,b=new Set(c),y=function(_){!_||x.has(_)||(x.add(_),y(_.parentNode))};c.forEach(y);var A=function(_){!_||b.has(_)||Array.prototype.forEach.call(_.children,function(k){if(x.has(k))A(k);else try{var T=k.getAttribute(o),D=T!==null&&T!=="false",O=(Aa.get(k)||0)+1,L=(u.get(k)||0)+1;Aa.set(k,O),u.set(k,L),p.push(k),O===1&&D&&ju.set(k,!0),L===1&&k.setAttribute(n,"true"),D||k.setAttribute(o,"true")}catch(U){console.error("aria-hidden: cannot operate on ",k,U)}})};return A(e),x.clear(),Tf++,function(){p.forEach(function(_){var k=Aa.get(_)-1,T=u.get(_)-1;Aa.set(_,k),u.set(_,T),k||(ju.has(_)||_.removeAttribute(o),ju.delete(_)),T||_.removeAttribute(n)}),Tf--,Tf||(Aa=new WeakMap,Aa=new WeakMap,ju=new WeakMap,Du={})}},jy=function(r,e,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(r)?r:[r]),c=AN(r);return c?(o.push.apply(o,Array.from(c.querySelectorAll("[aria-live], script"))),NN(o,c,n,"aria-hidden")):function(){return null}};function IN(r){const e=TN(r),n=R.forwardRef((o,c)=>{const{children:u,...p}=o,x=R.Children.toArray(u),b=x.find(kN);if(b){const y=b.props.children,A=x.map(_=>_===b?R.Children.count(y)>1?R.Children.only(null):R.isValidElement(y)?y.props.children:null:_);return m.jsx(e,{...p,ref:c,children:R.isValidElement(y)?R.cloneElement(y,void 0,A):null})}return m.jsx(e,{...p,ref:c,children:u})});return n.displayName=`${r}.Slot`,n}function TN(r){const e=R.forwardRef((n,o)=>{const{children:c,...u}=n;if(R.isValidElement(c)){const p=PN(c),x=ON(u,c.props);return c.type!==R.Fragment&&(x.ref=o?Ga(o,p):p),R.cloneElement(c,x)}return R.Children.count(c)>1?R.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var RN=Symbol("radix.slottable");function kN(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===RN}function ON(r,e){const n={...e};for(const o in e){const c=r[o],u=e[o];/^on[A-Z]/.test(o)?c&&u?n[o]=(...x)=>{const b=u(...x);return c(...x),b}:c&&(n[o]=c):o==="style"?n[o]={...c,...u}:o==="className"&&(n[o]=[c,u].filter(Boolean).join(" "))}return{...r,...n}}function PN(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var yd="Dialog",[Dy]=ni(yd),[jN,Si]=Dy(yd),My=r=>{const{__scopeDialog:e,children:n,open:o,defaultOpen:c,onOpenChange:u,modal:p=!0}=r,x=R.useRef(null),b=R.useRef(null),[y,A]=bi({prop:o,defaultProp:c??!1,onChange:u,caller:yd});return m.jsx(jN,{scope:e,triggerRef:x,contentRef:b,contentId:Ui(),titleId:Ui(),descriptionId:Ui(),open:y,onOpenChange:A,onOpenToggle:R.useCallback(()=>A(_=>!_),[A]),modal:p,children:n})};My.displayName=yd;var Ly="DialogTrigger",By=R.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,c=Si(Ly,n),u=Ut(e,c.triggerRef);return m.jsx(xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":c.open,"aria-controls":c.contentId,"data-state":i1(c.open),...o,ref:u,onClick:Et(r.onClick,c.onOpenToggle)})});By.displayName=Ly;var n1="DialogPortal",[DN,Fy]=Dy(n1,{forceMount:void 0}),Uy=r=>{const{__scopeDialog:e,forceMount:n,children:o,container:c}=r,u=Si(n1,e);return m.jsx(DN,{scope:e,forceMount:n,children:R.Children.map(o,p=>m.jsx(Ys,{present:n||u.open,children:m.jsx(e1,{asChild:!0,container:c,children:p})}))})};Uy.displayName=n1;var Ju="DialogOverlay",zy=R.forwardRef((r,e)=>{const n=Fy(Ju,r.__scopeDialog),{forceMount:o=n.forceMount,...c}=r,u=Si(Ju,r.__scopeDialog);return u.modal?m.jsx(Ys,{present:o||u.open,children:m.jsx(LN,{...c,ref:e})}):null});zy.displayName=Ju;var MN=IN("DialogOverlay.RemoveScroll"),LN=R.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,c=Si(Ju,n);return m.jsx(t1,{as:MN,allowPinchZoom:!0,shards:[c.contentRef],children:m.jsx(xt.div,{"data-state":i1(c.open),...o,ref:e,style:{pointerEvents:"auto",...o.style}})})}),Lo="DialogContent",Vy=R.forwardRef((r,e)=>{const n=Fy(Lo,r.__scopeDialog),{forceMount:o=n.forceMount,...c}=r,u=Si(Lo,r.__scopeDialog);return m.jsx(Ys,{present:o||u.open,children:u.modal?m.jsx(BN,{...c,ref:e}):m.jsx(FN,{...c,ref:e})})});Vy.displayName=Lo;var BN=R.forwardRef((r,e)=>{const n=Si(Lo,r.__scopeDialog),o=R.useRef(null),c=Ut(e,n.contentRef,o);return R.useEffect(()=>{const u=o.current;if(u)return jy(u)},[]),m.jsx(Wy,{...r,ref:c,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Et(r.onCloseAutoFocus,u=>{u.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Et(r.onPointerDownOutside,u=>{const p=u.detail.originalEvent,x=p.button===0&&p.ctrlKey===!0;(p.button===2||x)&&u.preventDefault()}),onFocusOutside:Et(r.onFocusOutside,u=>u.preventDefault())})}),FN=R.forwardRef((r,e)=>{const n=Si(Lo,r.__scopeDialog),o=R.useRef(!1),c=R.useRef(!1);return m.jsx(Wy,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{r.onCloseAutoFocus?.(u),u.defaultPrevented||(o.current||n.triggerRef.current?.focus(),u.preventDefault()),o.current=!1,c.current=!1},onInteractOutside:u=>{r.onInteractOutside?.(u),u.defaultPrevented||(o.current=!0,u.detail.originalEvent.type==="pointerdown"&&(c.current=!0));const p=u.target;n.triggerRef.current?.contains(p)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&c.current&&u.preventDefault()}})}),Wy=R.forwardRef((r,e)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:c,onCloseAutoFocus:u,...p}=r,x=Si(Lo,n),b=R.useRef(null),y=Ut(e,b);return _y(),m.jsxs(m.Fragment,{children:[m.jsx(J0,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:c,onUnmountAutoFocus:u,children:m.jsx(Q0,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":i1(x.open),...p,ref:y,onDismiss:()=>x.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(UN,{titleId:x.titleId}),m.jsx(VN,{contentRef:b,descriptionId:x.descriptionId})]})]})}),r1="DialogTitle",Hy=R.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,c=Si(r1,n);return m.jsx(xt.h2,{id:c.titleId,...o,ref:e})});Hy.displayName=r1;var $y="DialogDescription",Gy=R.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,c=Si($y,n);return m.jsx(xt.p,{id:c.descriptionId,...o,ref:e})});Gy.displayName=$y;var qy="DialogClose",Xy=R.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,c=Si(qy,n);return m.jsx(xt.button,{type:"button",...o,ref:e,onClick:Et(r.onClick,()=>c.onOpenChange(!1))})});Xy.displayName=qy;function i1(r){return r?"open":"closed"}var Yy="DialogTitleWarning",[C6,Ky]=U3(Yy,{contentName:Lo,titleName:r1,docsSlug:"dialog"}),UN=({titleId:r})=>{const e=Ky(Yy),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return R.useEffect(()=>{r&&(document.getElementById(r)||console.error(n))},[n,r]),null},zN="DialogDescriptionWarning",VN=({contentRef:r,descriptionId:e})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ky(zN).contentName}}.`;return R.useEffect(()=>{const c=r.current?.getAttribute("aria-describedby");e&&c&&(document.getElementById(e)||console.warn(o))},[o,r,e]),null},WN=My,HN=By,$N=Uy,GN=zy,qN=Vy,XN=Hy,YN=Gy,KN=Xy;function Jr({...r}){return m.jsx(WN,{"data-slot":"dialog",...r})}function Zy({...r}){return m.jsx(HN,{"data-slot":"dialog-trigger",...r})}function ZN({...r}){return m.jsx($N,{"data-slot":"dialog-portal",...r})}const Qy=R.forwardRef(({className:r,...e},n)=>m.jsx(GN,{ref:n,"data-slot":"dialog-overlay",className:yt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...e}));Qy.displayName="DialogOverlay";function ei({className:r,children:e,...n}){return m.jsxs(ZN,{"data-slot":"dialog-portal",children:[m.jsx(Qy,{}),m.jsxs(qN,{"data-slot":"dialog-content",className:yt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...n,children:[e,m.jsxs(KN,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[m.jsx(fd,{}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function yi({className:r,...e}){return m.jsx("div",{"data-slot":"dialog-header",className:yt("flex flex-col gap-2 text-center sm:text-left",r),...e})}function ed({className:r,...e}){return m.jsx("div",{"data-slot":"dialog-footer",className:yt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...e})}function vi({className:r,...e}){return m.jsx(XN,{"data-slot":"dialog-title",className:yt("text-lg leading-none font-semibold",r),...e})}function tc({className:r,...e}){return m.jsx(YN,{"data-slot":"dialog-description",className:yt("text-muted-foreground text-sm",r),...e})}const QN=M0("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function JN({className:r,variant:e,asChild:n=!1,...o}){const c=n?Fx:"span";return m.jsx(c,{"data-slot":"badge",className:yt(QN({variant:e}),r),...o})}function Rm(r,[e,n]){return Math.min(n,Math.max(e,r))}const e4=["top","right","bottom","left"],$s=Math.min,Pr=Math.max,td=Math.round,Mu=Math.floor,zi=r=>({x:r,y:r}),t4={left:"right",right:"left",bottom:"top",top:"bottom"},n4={start:"end",end:"start"};function b0(r,e,n){return Pr(r,$s(e,n))}function ls(r,e){return typeof r=="function"?r(e):r}function cs(r){return r.split("-")[0]}function Za(r){return r.split("-")[1]}function s1(r){return r==="x"?"y":"x"}function o1(r){return r==="y"?"height":"width"}const r4=new Set(["top","bottom"]);function Li(r){return r4.has(cs(r))?"y":"x"}function a1(r){return s1(Li(r))}function i4(r,e,n){n===void 0&&(n=!1);const o=Za(r),c=a1(r),u=o1(c);let p=c==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[u]>e.floating[u]&&(p=nd(p)),[p,nd(p)]}function s4(r){const e=nd(r);return[C0(r),e,C0(e)]}function C0(r){return r.replace(/start|end/g,e=>n4[e])}const km=["left","right"],Om=["right","left"],o4=["top","bottom"],a4=["bottom","top"];function l4(r,e,n){switch(r){case"top":case"bottom":return n?e?Om:km:e?km:Om;case"left":case"right":return e?o4:a4;default:return[]}}function c4(r,e,n,o){const c=Za(r);let u=l4(cs(r),n==="start",o);return c&&(u=u.map(p=>p+"-"+c),e&&(u=u.concat(u.map(C0)))),u}function nd(r){return r.replace(/left|right|bottom|top/g,e=>t4[e])}function u4(r){return{top:0,right:0,bottom:0,left:0,...r}}function Jy(r){return typeof r!="number"?u4(r):{top:r,right:r,bottom:r,left:r}}function rd(r){const{x:e,y:n,width:o,height:c}=r;return{width:o,height:c,top:n,left:e,right:e+o,bottom:n+c,x:e,y:n}}function Pm(r,e,n){let{reference:o,floating:c}=r;const u=Li(e),p=a1(e),x=o1(p),b=cs(e),y=u==="y",A=o.x+o.width/2-c.width/2,_=o.y+o.height/2-c.height/2,k=o[x]/2-c[x]/2;let T;switch(b){case"top":T={x:A,y:o.y-c.height};break;case"bottom":T={x:A,y:o.y+o.height};break;case"right":T={x:o.x+o.width,y:_};break;case"left":T={x:o.x-c.width,y:_};break;default:T={x:o.x,y:o.y}}switch(Za(e)){case"start":T[p]-=k*(n&&y?-1:1);break;case"end":T[p]+=k*(n&&y?-1:1);break}return T}const d4=async(r,e,n)=>{const{placement:o="bottom",strategy:c="absolute",middleware:u=[],platform:p}=n,x=u.filter(Boolean),b=await(p.isRTL==null?void 0:p.isRTL(e));let y=await p.getElementRects({reference:r,floating:e,strategy:c}),{x:A,y:_}=Pm(y,o,b),k=o,T={},D=0;for(let O=0;O<x.length;O++){const{name:L,fn:U}=x[O],{x:z,y:F,data:$,reset:se}=await U({x:A,y:_,initialPlacement:o,placement:k,strategy:c,middlewareData:T,rects:y,platform:p,elements:{reference:r,floating:e}});A=z??A,_=F??_,T={...T,[L]:{...T[L],...$}},se&&D<=50&&(D++,typeof se=="object"&&(se.placement&&(k=se.placement),se.rects&&(y=se.rects===!0?await p.getElementRects({reference:r,floating:e,strategy:c}):se.rects),{x:A,y:_}=Pm(y,k,b)),O=-1)}return{x:A,y:_,placement:k,strategy:c,middlewareData:T}};async function nc(r,e){var n;e===void 0&&(e={});const{x:o,y:c,platform:u,rects:p,elements:x,strategy:b}=r,{boundary:y="clippingAncestors",rootBoundary:A="viewport",elementContext:_="floating",altBoundary:k=!1,padding:T=0}=ls(e,r),D=Jy(T),L=x[k?_==="floating"?"reference":"floating":_],U=rd(await u.getClippingRect({element:(n=await(u.isElement==null?void 0:u.isElement(L)))==null||n?L:L.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(x.floating)),boundary:y,rootBoundary:A,strategy:b})),z=_==="floating"?{x:o,y:c,width:p.floating.width,height:p.floating.height}:p.reference,F=await(u.getOffsetParent==null?void 0:u.getOffsetParent(x.floating)),$=await(u.isElement==null?void 0:u.isElement(F))?await(u.getScale==null?void 0:u.getScale(F))||{x:1,y:1}:{x:1,y:1},se=rd(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:x,rect:z,offsetParent:F,strategy:b}):z);return{top:(U.top-se.top+D.top)/$.y,bottom:(se.bottom-U.bottom+D.bottom)/$.y,left:(U.left-se.left+D.left)/$.x,right:(se.right-U.right+D.right)/$.x}}const h4=r=>({name:"arrow",options:r,async fn(e){const{x:n,y:o,placement:c,rects:u,platform:p,elements:x,middlewareData:b}=e,{element:y,padding:A=0}=ls(r,e)||{};if(y==null)return{};const _=Jy(A),k={x:n,y:o},T=a1(c),D=o1(T),O=await p.getDimensions(y),L=T==="y",U=L?"top":"left",z=L?"bottom":"right",F=L?"clientHeight":"clientWidth",$=u.reference[D]+u.reference[T]-k[T]-u.floating[D],se=k[T]-u.reference[T],Y=await(p.getOffsetParent==null?void 0:p.getOffsetParent(y));let V=Y?Y[F]:0;(!V||!await(p.isElement==null?void 0:p.isElement(Y)))&&(V=x.floating[F]||u.floating[D]);const X=$/2-se/2,W=V/2-O[D]/2-1,ye=$s(_[U],W),be=$s(_[z],W),de=ye,ve=V-O[D]-be,Ce=V/2-O[D]/2+X,ie=b0(de,Ce,ve),ce=!b.arrow&&Za(c)!=null&&Ce!==ie&&u.reference[D]/2-(Ce<de?ye:be)-O[D]/2<0,ge=ce?Ce<de?Ce-de:Ce-ve:0;return{[T]:k[T]+ge,data:{[T]:ie,centerOffset:Ce-ie-ge,...ce&&{alignmentOffset:ge}},reset:ce}}}),f4=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var n,o;const{placement:c,middlewareData:u,rects:p,initialPlacement:x,platform:b,elements:y}=e,{mainAxis:A=!0,crossAxis:_=!0,fallbackPlacements:k,fallbackStrategy:T="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:O=!0,...L}=ls(r,e);if((n=u.arrow)!=null&&n.alignmentOffset)return{};const U=cs(c),z=Li(x),F=cs(x)===x,$=await(b.isRTL==null?void 0:b.isRTL(y.floating)),se=k||(F||!O?[nd(x)]:s4(x)),Y=D!=="none";!k&&Y&&se.push(...c4(x,O,D,$));const V=[x,...se],X=await nc(e,L),W=[];let ye=((o=u.flip)==null?void 0:o.overflows)||[];if(A&&W.push(X[U]),_){const Ce=i4(c,p,$);W.push(X[Ce[0]],X[Ce[1]])}if(ye=[...ye,{placement:c,overflows:W}],!W.every(Ce=>Ce<=0)){var be,de;const Ce=(((be=u.flip)==null?void 0:be.index)||0)+1,ie=V[Ce];if(ie&&(!(_==="alignment"?z!==Li(ie):!1)||ye.every(te=>Li(te.placement)===z?te.overflows[0]>0:!0)))return{data:{index:Ce,overflows:ye},reset:{placement:ie}};let ce=(de=ye.filter(ge=>ge.overflows[0]<=0).sort((ge,te)=>ge.overflows[1]-te.overflows[1])[0])==null?void 0:de.placement;if(!ce)switch(T){case"bestFit":{var ve;const ge=(ve=ye.filter(te=>{if(Y){const re=Li(te.placement);return re===z||re==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(re=>re>0).reduce((re,fe)=>re+fe,0)]).sort((te,re)=>te[1]-re[1])[0])==null?void 0:ve[0];ge&&(ce=ge);break}case"initialPlacement":ce=x;break}if(c!==ce)return{reset:{placement:ce}}}return{}}}};function jm(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function Dm(r){return e4.some(e=>r[e]>=0)}const g4=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:n}=e,{strategy:o="referenceHidden",...c}=ls(r,e);switch(o){case"referenceHidden":{const u=await nc(e,{...c,elementContext:"reference"}),p=jm(u,n.reference);return{data:{referenceHiddenOffsets:p,referenceHidden:Dm(p)}}}case"escaped":{const u=await nc(e,{...c,altBoundary:!0}),p=jm(u,n.floating);return{data:{escapedOffsets:p,escaped:Dm(p)}}}default:return{}}}}},ev=new Set(["left","top"]);async function p4(r,e){const{placement:n,platform:o,elements:c}=r,u=await(o.isRTL==null?void 0:o.isRTL(c.floating)),p=cs(n),x=Za(n),b=Li(n)==="y",y=ev.has(p)?-1:1,A=u&&b?-1:1,_=ls(e,r);let{mainAxis:k,crossAxis:T,alignmentAxis:D}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return x&&typeof D=="number"&&(T=x==="end"?D*-1:D),b?{x:T*A,y:k*y}:{x:k*y,y:T*A}}const m4=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var n,o;const{x:c,y:u,placement:p,middlewareData:x}=e,b=await p4(e,r);return p===((n=x.offset)==null?void 0:n.placement)&&(o=x.arrow)!=null&&o.alignmentOffset?{}:{x:c+b.x,y:u+b.y,data:{...b,placement:p}}}}},x4=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:n,y:o,placement:c}=e,{mainAxis:u=!0,crossAxis:p=!1,limiter:x={fn:L=>{let{x:U,y:z}=L;return{x:U,y:z}}},...b}=ls(r,e),y={x:n,y:o},A=await nc(e,b),_=Li(cs(c)),k=s1(_);let T=y[k],D=y[_];if(u){const L=k==="y"?"top":"left",U=k==="y"?"bottom":"right",z=T+A[L],F=T-A[U];T=b0(z,T,F)}if(p){const L=_==="y"?"top":"left",U=_==="y"?"bottom":"right",z=D+A[L],F=D-A[U];D=b0(z,D,F)}const O=x.fn({...e,[k]:T,[_]:D});return{...O,data:{x:O.x-n,y:O.y-o,enabled:{[k]:u,[_]:p}}}}}},w4=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:n,y:o,placement:c,rects:u,middlewareData:p}=e,{offset:x=0,mainAxis:b=!0,crossAxis:y=!0}=ls(r,e),A={x:n,y:o},_=Li(c),k=s1(_);let T=A[k],D=A[_];const O=ls(x,e),L=typeof O=="number"?{mainAxis:O,crossAxis:0}:{mainAxis:0,crossAxis:0,...O};if(b){const F=k==="y"?"height":"width",$=u.reference[k]-u.floating[F]+L.mainAxis,se=u.reference[k]+u.reference[F]-L.mainAxis;T<$?T=$:T>se&&(T=se)}if(y){var U,z;const F=k==="y"?"width":"height",$=ev.has(cs(c)),se=u.reference[_]-u.floating[F]+($&&((U=p.offset)==null?void 0:U[_])||0)+($?0:L.crossAxis),Y=u.reference[_]+u.reference[F]+($?0:((z=p.offset)==null?void 0:z[_])||0)-($?L.crossAxis:0);D<se?D=se:D>Y&&(D=Y)}return{[k]:T,[_]:D}}}},y4=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var n,o;const{placement:c,rects:u,platform:p,elements:x}=e,{apply:b=()=>{},...y}=ls(r,e),A=await nc(e,y),_=cs(c),k=Za(c),T=Li(c)==="y",{width:D,height:O}=u.floating;let L,U;_==="top"||_==="bottom"?(L=_,U=k===(await(p.isRTL==null?void 0:p.isRTL(x.floating))?"start":"end")?"left":"right"):(U=_,L=k==="end"?"top":"bottom");const z=O-A.top-A.bottom,F=D-A.left-A.right,$=$s(O-A[L],z),se=$s(D-A[U],F),Y=!e.middlewareData.shift;let V=$,X=se;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(X=F),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(V=z),Y&&!k){const ye=Pr(A.left,0),be=Pr(A.right,0),de=Pr(A.top,0),ve=Pr(A.bottom,0);T?X=D-2*(ye!==0||be!==0?ye+be:Pr(A.left,A.right)):V=O-2*(de!==0||ve!==0?de+ve:Pr(A.top,A.bottom))}await b({...e,availableWidth:X,availableHeight:V});const W=await p.getDimensions(x.floating);return D!==W.width||O!==W.height?{reset:{rects:!0}}:{}}}};function vd(){return typeof window<"u"}function Qa(r){return tv(r)?(r.nodeName||"").toLowerCase():"#document"}function Mr(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Wi(r){var e;return(e=(tv(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function tv(r){return vd()?r instanceof Node||r instanceof Mr(r).Node:!1}function Ci(r){return vd()?r instanceof Element||r instanceof Mr(r).Element:!1}function Vi(r){return vd()?r instanceof HTMLElement||r instanceof Mr(r).HTMLElement:!1}function Mm(r){return!vd()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Mr(r).ShadowRoot}const v4=new Set(["inline","contents"]);function uc(r){const{overflow:e,overflowX:n,overflowY:o,display:c}=Ei(r);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!v4.has(c)}const b4=new Set(["table","td","th"]);function C4(r){return b4.has(Qa(r))}const E4=[":popover-open",":modal"];function bd(r){return E4.some(e=>{try{return r.matches(e)}catch{return!1}})}const S4=["transform","translate","scale","rotate","perspective"],A4=["transform","translate","scale","rotate","perspective","filter"],_4=["paint","layout","strict","content"];function l1(r){const e=c1(),n=Ci(r)?Ei(r):r;return S4.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||A4.some(o=>(n.willChange||"").includes(o))||_4.some(o=>(n.contain||"").includes(o))}function N4(r){let e=Gs(r);for(;Vi(e)&&!$a(e);){if(l1(e))return e;if(bd(e))return null;e=Gs(e)}return null}function c1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const I4=new Set(["html","body","#document"]);function $a(r){return I4.has(Qa(r))}function Ei(r){return Mr(r).getComputedStyle(r)}function Cd(r){return Ci(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Gs(r){if(Qa(r)==="html")return r;const e=r.assignedSlot||r.parentNode||Mm(r)&&r.host||Wi(r);return Mm(e)?e.host:e}function nv(r){const e=Gs(r);return $a(e)?r.ownerDocument?r.ownerDocument.body:r.body:Vi(e)&&uc(e)?e:nv(e)}function rc(r,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const c=nv(r),u=c===((o=r.ownerDocument)==null?void 0:o.body),p=Mr(c);if(u){const x=E0(p);return e.concat(p,p.visualViewport||[],uc(c)?c:[],x&&n?rc(x):[])}return e.concat(c,rc(c,[],n))}function E0(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function rv(r){const e=Ei(r);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const c=Vi(r),u=c?r.offsetWidth:n,p=c?r.offsetHeight:o,x=td(n)!==u||td(o)!==p;return x&&(n=u,o=p),{width:n,height:o,$:x}}function u1(r){return Ci(r)?r:r.contextElement}function Da(r){const e=u1(r);if(!Vi(e))return zi(1);const n=e.getBoundingClientRect(),{width:o,height:c,$:u}=rv(e);let p=(u?td(n.width):n.width)/o,x=(u?td(n.height):n.height)/c;return(!p||!Number.isFinite(p))&&(p=1),(!x||!Number.isFinite(x))&&(x=1),{x:p,y:x}}const T4=zi(0);function iv(r){const e=Mr(r);return!c1()||!e.visualViewport?T4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function R4(r,e,n){return e===void 0&&(e=!1),!n||e&&n!==Mr(r)?!1:e}function Bo(r,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const c=r.getBoundingClientRect(),u=u1(r);let p=zi(1);e&&(o?Ci(o)&&(p=Da(o)):p=Da(r));const x=R4(u,n,o)?iv(u):zi(0);let b=(c.left+x.x)/p.x,y=(c.top+x.y)/p.y,A=c.width/p.x,_=c.height/p.y;if(u){const k=Mr(u),T=o&&Ci(o)?Mr(o):o;let D=k,O=E0(D);for(;O&&o&&T!==D;){const L=Da(O),U=O.getBoundingClientRect(),z=Ei(O),F=U.left+(O.clientLeft+parseFloat(z.paddingLeft))*L.x,$=U.top+(O.clientTop+parseFloat(z.paddingTop))*L.y;b*=L.x,y*=L.y,A*=L.x,_*=L.y,b+=F,y+=$,D=Mr(O),O=E0(D)}}return rd({width:A,height:_,x:b,y})}function Ed(r,e){const n=Cd(r).scrollLeft;return e?e.left+n:Bo(Wi(r)).left+n}function sv(r,e){const n=r.getBoundingClientRect(),o=n.left+e.scrollLeft-Ed(r,n),c=n.top+e.scrollTop;return{x:o,y:c}}function k4(r){let{elements:e,rect:n,offsetParent:o,strategy:c}=r;const u=c==="fixed",p=Wi(o),x=e?bd(e.floating):!1;if(o===p||x&&u)return n;let b={scrollLeft:0,scrollTop:0},y=zi(1);const A=zi(0),_=Vi(o);if((_||!_&&!u)&&((Qa(o)!=="body"||uc(p))&&(b=Cd(o)),Vi(o))){const T=Bo(o);y=Da(o),A.x=T.x+o.clientLeft,A.y=T.y+o.clientTop}const k=p&&!_&&!u?sv(p,b):zi(0);return{width:n.width*y.x,height:n.height*y.y,x:n.x*y.x-b.scrollLeft*y.x+A.x+k.x,y:n.y*y.y-b.scrollTop*y.y+A.y+k.y}}function O4(r){return Array.from(r.getClientRects())}function P4(r){const e=Wi(r),n=Cd(r),o=r.ownerDocument.body,c=Pr(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),u=Pr(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let p=-n.scrollLeft+Ed(r);const x=-n.scrollTop;return Ei(o).direction==="rtl"&&(p+=Pr(e.clientWidth,o.clientWidth)-c),{width:c,height:u,x:p,y:x}}const Lm=25;function j4(r,e){const n=Mr(r),o=Wi(r),c=n.visualViewport;let u=o.clientWidth,p=o.clientHeight,x=0,b=0;if(c){u=c.width,p=c.height;const A=c1();(!A||A&&e==="fixed")&&(x=c.offsetLeft,b=c.offsetTop)}const y=Ed(o);if(y<=0){const A=o.ownerDocument,_=A.body,k=getComputedStyle(_),T=A.compatMode==="CSS1Compat"&&parseFloat(k.marginLeft)+parseFloat(k.marginRight)||0,D=Math.abs(o.clientWidth-_.clientWidth-T);D<=Lm&&(u-=D)}else y<=Lm&&(u+=y);return{width:u,height:p,x,y:b}}const D4=new Set(["absolute","fixed"]);function M4(r,e){const n=Bo(r,!0,e==="fixed"),o=n.top+r.clientTop,c=n.left+r.clientLeft,u=Vi(r)?Da(r):zi(1),p=r.clientWidth*u.x,x=r.clientHeight*u.y,b=c*u.x,y=o*u.y;return{width:p,height:x,x:b,y}}function Bm(r,e,n){let o;if(e==="viewport")o=j4(r,n);else if(e==="document")o=P4(Wi(r));else if(Ci(e))o=M4(e,n);else{const c=iv(r);o={x:e.x-c.x,y:e.y-c.y,width:e.width,height:e.height}}return rd(o)}function ov(r,e){const n=Gs(r);return n===e||!Ci(n)||$a(n)?!1:Ei(n).position==="fixed"||ov(n,e)}function L4(r,e){const n=e.get(r);if(n)return n;let o=rc(r,[],!1).filter(x=>Ci(x)&&Qa(x)!=="body"),c=null;const u=Ei(r).position==="fixed";let p=u?Gs(r):r;for(;Ci(p)&&!$a(p);){const x=Ei(p),b=l1(p);!b&&x.position==="fixed"&&(c=null),(u?!b&&!c:!b&&x.position==="static"&&!!c&&D4.has(c.position)||uc(p)&&!b&&ov(r,p))?o=o.filter(A=>A!==p):c=x,p=Gs(p)}return e.set(r,o),o}function B4(r){let{element:e,boundary:n,rootBoundary:o,strategy:c}=r;const p=[...n==="clippingAncestors"?bd(e)?[]:L4(e,this._c):[].concat(n),o],x=p[0],b=p.reduce((y,A)=>{const _=Bm(e,A,c);return y.top=Pr(_.top,y.top),y.right=$s(_.right,y.right),y.bottom=$s(_.bottom,y.bottom),y.left=Pr(_.left,y.left),y},Bm(e,x,c));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}}function F4(r){const{width:e,height:n}=rv(r);return{width:e,height:n}}function U4(r,e,n){const o=Vi(e),c=Wi(e),u=n==="fixed",p=Bo(r,!0,u,e);let x={scrollLeft:0,scrollTop:0};const b=zi(0);function y(){b.x=Ed(c)}if(o||!o&&!u)if((Qa(e)!=="body"||uc(c))&&(x=Cd(e)),o){const T=Bo(e,!0,u,e);b.x=T.x+e.clientLeft,b.y=T.y+e.clientTop}else c&&y();u&&!o&&c&&y();const A=c&&!o&&!u?sv(c,x):zi(0),_=p.left+x.scrollLeft-b.x-A.x,k=p.top+x.scrollTop-b.y-A.y;return{x:_,y:k,width:p.width,height:p.height}}function Rf(r){return Ei(r).position==="static"}function Fm(r,e){if(!Vi(r)||Ei(r).position==="fixed")return null;if(e)return e(r);let n=r.offsetParent;return Wi(r)===n&&(n=n.ownerDocument.body),n}function av(r,e){const n=Mr(r);if(bd(r))return n;if(!Vi(r)){let c=Gs(r);for(;c&&!$a(c);){if(Ci(c)&&!Rf(c))return c;c=Gs(c)}return n}let o=Fm(r,e);for(;o&&C4(o)&&Rf(o);)o=Fm(o,e);return o&&$a(o)&&Rf(o)&&!l1(o)?n:o||N4(r)||n}const z4=async function(r){const e=this.getOffsetParent||av,n=this.getDimensions,o=await n(r.floating);return{reference:U4(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function V4(r){return Ei(r).direction==="rtl"}const W4={convertOffsetParentRelativeRectToViewportRelativeRect:k4,getDocumentElement:Wi,getClippingRect:B4,getOffsetParent:av,getElementRects:z4,getClientRects:O4,getDimensions:F4,getScale:Da,isElement:Ci,isRTL:V4};function lv(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function H4(r,e){let n=null,o;const c=Wi(r);function u(){var x;clearTimeout(o),(x=n)==null||x.disconnect(),n=null}function p(x,b){x===void 0&&(x=!1),b===void 0&&(b=1),u();const y=r.getBoundingClientRect(),{left:A,top:_,width:k,height:T}=y;if(x||e(),!k||!T)return;const D=Mu(_),O=Mu(c.clientWidth-(A+k)),L=Mu(c.clientHeight-(_+T)),U=Mu(A),F={rootMargin:-D+"px "+-O+"px "+-L+"px "+-U+"px",threshold:Pr(0,$s(1,b))||1};let $=!0;function se(Y){const V=Y[0].intersectionRatio;if(V!==b){if(!$)return p();V?p(!1,V):o=setTimeout(()=>{p(!1,1e-7)},1e3)}V===1&&!lv(y,r.getBoundingClientRect())&&p(),$=!1}try{n=new IntersectionObserver(se,{...F,root:c.ownerDocument})}catch{n=new IntersectionObserver(se,F)}n.observe(r)}return p(!0),u}function $4(r,e,n,o){o===void 0&&(o={});const{ancestorScroll:c=!0,ancestorResize:u=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:x=typeof IntersectionObserver=="function",animationFrame:b=!1}=o,y=u1(r),A=c||u?[...y?rc(y):[],...rc(e)]:[];A.forEach(U=>{c&&U.addEventListener("scroll",n,{passive:!0}),u&&U.addEventListener("resize",n)});const _=y&&x?H4(y,n):null;let k=-1,T=null;p&&(T=new ResizeObserver(U=>{let[z]=U;z&&z.target===y&&T&&(T.unobserve(e),cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var F;(F=T)==null||F.observe(e)})),n()}),y&&!b&&T.observe(y),T.observe(e));let D,O=b?Bo(r):null;b&&L();function L(){const U=Bo(r);O&&!lv(O,U)&&n(),O=U,D=requestAnimationFrame(L)}return n(),()=>{var U;A.forEach(z=>{c&&z.removeEventListener("scroll",n),u&&z.removeEventListener("resize",n)}),_?.(),(U=T)==null||U.disconnect(),T=null,b&&cancelAnimationFrame(D)}}const G4=m4,q4=x4,X4=f4,Y4=y4,K4=g4,Um=h4,Z4=w4,Q4=(r,e,n)=>{const o=new Map,c={platform:W4,...n},u={...c.platform,_c:o};return d4(r,e,{...c,platform:u})};var J4=typeof document<"u",eI=function(){},$u=J4?R.useLayoutEffect:eI;function id(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let n,o,c;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(n=r.length,n!==e.length)return!1;for(o=n;o--!==0;)if(!id(r[o],e[o]))return!1;return!0}if(c=Object.keys(r),n=c.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(e,c[o]))return!1;for(o=n;o--!==0;){const u=c[o];if(!(u==="_owner"&&r.$$typeof)&&!id(r[u],e[u]))return!1}return!0}return r!==r&&e!==e}function cv(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function zm(r,e){const n=cv(r);return Math.round(e*n)/n}function kf(r){const e=R.useRef(r);return $u(()=>{e.current=r}),e}function tI(r){r===void 0&&(r={});const{placement:e="bottom",strategy:n="absolute",middleware:o=[],platform:c,elements:{reference:u,floating:p}={},transform:x=!0,whileElementsMounted:b,open:y}=r,[A,_]=R.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[k,T]=R.useState(o);id(k,o)||T(o);const[D,O]=R.useState(null),[L,U]=R.useState(null),z=R.useCallback(te=>{te!==Y.current&&(Y.current=te,O(te))},[]),F=R.useCallback(te=>{te!==V.current&&(V.current=te,U(te))},[]),$=u||D,se=p||L,Y=R.useRef(null),V=R.useRef(null),X=R.useRef(A),W=b!=null,ye=kf(b),be=kf(c),de=kf(y),ve=R.useCallback(()=>{if(!Y.current||!V.current)return;const te={placement:e,strategy:n,middleware:k};be.current&&(te.platform=be.current),Q4(Y.current,V.current,te).then(re=>{const fe={...re,isPositioned:de.current!==!1};Ce.current&&!id(X.current,fe)&&(X.current=fe,Ya.flushSync(()=>{_(fe)}))})},[k,e,n,be,de]);$u(()=>{y===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,_(te=>({...te,isPositioned:!1})))},[y]);const Ce=R.useRef(!1);$u(()=>(Ce.current=!0,()=>{Ce.current=!1}),[]),$u(()=>{if($&&(Y.current=$),se&&(V.current=se),$&&se){if(ye.current)return ye.current($,se,ve);ve()}},[$,se,ve,ye,W]);const ie=R.useMemo(()=>({reference:Y,floating:V,setReference:z,setFloating:F}),[z,F]),ce=R.useMemo(()=>({reference:$,floating:se}),[$,se]),ge=R.useMemo(()=>{const te={position:n,left:0,top:0};if(!ce.floating)return te;const re=zm(ce.floating,A.x),fe=zm(ce.floating,A.y);return x?{...te,transform:"translate("+re+"px, "+fe+"px)",...cv(ce.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:re,top:fe}},[n,x,ce.floating,A.x,A.y]);return R.useMemo(()=>({...A,update:ve,refs:ie,elements:ce,floatingStyles:ge}),[A,ve,ie,ce,ge])}const nI=r=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:r,fn(n){const{element:o,padding:c}=typeof r=="function"?r(n):r;return o&&e(o)?o.current!=null?Um({element:o.current,padding:c}).fn(n):{}:o?Um({element:o,padding:c}).fn(n):{}}}},rI=(r,e)=>({...G4(r),options:[r,e]}),iI=(r,e)=>({...q4(r),options:[r,e]}),sI=(r,e)=>({...Z4(r),options:[r,e]}),oI=(r,e)=>({...X4(r),options:[r,e]}),aI=(r,e)=>({...Y4(r),options:[r,e]}),lI=(r,e)=>({...K4(r),options:[r,e]}),cI=(r,e)=>({...nI(r),options:[r,e]});var uI="Arrow",uv=R.forwardRef((r,e)=>{const{children:n,width:o=10,height:c=5,...u}=r;return m.jsx(xt.svg,{...u,ref:e,width:o,height:c,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});uv.displayName=uI;var dI=uv;function Sd(r){const[e,n]=R.useState(void 0);return Yn(()=>{if(r){n({width:r.offsetWidth,height:r.offsetHeight});const o=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const u=c[0];let p,x;if("borderBoxSize"in u){const b=u.borderBoxSize,y=Array.isArray(b)?b[0]:b;p=y.inlineSize,x=y.blockSize}else p=r.offsetWidth,x=r.offsetHeight;n({width:p,height:x})});return o.observe(r,{box:"border-box"}),()=>o.unobserve(r)}else n(void 0)},[r]),e}var d1="Popper",[dv,hv]=ni(d1),[hI,fv]=dv(d1),gv=r=>{const{__scopePopper:e,children:n}=r,[o,c]=R.useState(null);return m.jsx(hI,{scope:e,anchor:o,onAnchorChange:c,children:n})};gv.displayName=d1;var pv="PopperAnchor",mv=R.forwardRef((r,e)=>{const{__scopePopper:n,virtualRef:o,...c}=r,u=fv(pv,n),p=R.useRef(null),x=Ut(e,p),b=R.useRef(null);return R.useEffect(()=>{const y=b.current;b.current=o?.current||p.current,y!==b.current&&u.onAnchorChange(b.current)}),o?null:m.jsx(xt.div,{...c,ref:x})});mv.displayName=pv;var h1="PopperContent",[fI,gI]=dv(h1),xv=R.forwardRef((r,e)=>{const{__scopePopper:n,side:o="bottom",sideOffset:c=0,align:u="center",alignOffset:p=0,arrowPadding:x=0,avoidCollisions:b=!0,collisionBoundary:y=[],collisionPadding:A=0,sticky:_="partial",hideWhenDetached:k=!1,updatePositionStrategy:T="optimized",onPlaced:D,...O}=r,L=fv(h1,n),[U,z]=R.useState(null),F=Ut(e,pe=>z(pe)),[$,se]=R.useState(null),Y=Sd($),V=Y?.width??0,X=Y?.height??0,W=o+(u!=="center"?"-"+u:""),ye=typeof A=="number"?A:{top:0,right:0,bottom:0,left:0,...A},be=Array.isArray(y)?y:[y],de=be.length>0,ve={padding:ye,boundary:be.filter(mI),altBoundary:de},{refs:Ce,floatingStyles:ie,placement:ce,isPositioned:ge,middlewareData:te}=tI({strategy:"fixed",placement:W,whileElementsMounted:(...pe)=>$4(...pe,{animationFrame:T==="always"}),elements:{reference:L.anchor},middleware:[rI({mainAxis:c+X,alignmentAxis:p}),b&&iI({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?sI():void 0,...ve}),b&&oI({...ve}),aI({...ve,apply:({elements:pe,rects:Ee,availableWidth:Le,availableHeight:Xe})=>{const{width:tt,height:vt}=Ee.reference,nt=pe.floating.style;nt.setProperty("--radix-popper-available-width",`${Le}px`),nt.setProperty("--radix-popper-available-height",`${Xe}px`),nt.setProperty("--radix-popper-anchor-width",`${tt}px`),nt.setProperty("--radix-popper-anchor-height",`${vt}px`)}}),$&&cI({element:$,padding:x}),xI({arrowWidth:V,arrowHeight:X}),k&&lI({strategy:"referenceHidden",...ve})]}),[re,fe]=vv(ce),K=Hs(D);Yn(()=>{ge&&K?.()},[ge,K]);const ue=te.arrow?.x,Ae=te.arrow?.y,Te=te.arrow?.centerOffset!==0,[Fe,ee]=R.useState();return Yn(()=>{U&&ee(window.getComputedStyle(U).zIndex)},[U]),m.jsx("div",{ref:Ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:ge?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Fe,"--radix-popper-transform-origin":[te.transformOrigin?.x,te.transformOrigin?.y].join(" "),...te.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:m.jsx(fI,{scope:n,placedSide:re,onArrowChange:se,arrowX:ue,arrowY:Ae,shouldHideArrow:Te,children:m.jsx(xt.div,{"data-side":re,"data-align":fe,...O,ref:F,style:{...O.style,animation:ge?void 0:"none"}})})})});xv.displayName=h1;var wv="PopperArrow",pI={top:"bottom",right:"left",bottom:"top",left:"right"},yv=R.forwardRef(function(e,n){const{__scopePopper:o,...c}=e,u=gI(wv,o),p=pI[u.placedSide];return m.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[p]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:m.jsx(dI,{...c,ref:n,style:{...c.style,display:"block"}})})});yv.displayName=wv;function mI(r){return r!==null}var xI=r=>({name:"transformOrigin",options:r,fn(e){const{placement:n,rects:o,middlewareData:c}=e,p=c.arrow?.centerOffset!==0,x=p?0:r.arrowWidth,b=p?0:r.arrowHeight,[y,A]=vv(n),_={start:"0%",center:"50%",end:"100%"}[A],k=(c.arrow?.x??0)+x/2,T=(c.arrow?.y??0)+b/2;let D="",O="";return y==="bottom"?(D=p?_:`${k}px`,O=`${-b}px`):y==="top"?(D=p?_:`${k}px`,O=`${o.floating.height+b}px`):y==="right"?(D=`${-b}px`,O=p?_:`${T}px`):y==="left"&&(D=`${o.floating.width+b}px`,O=p?_:`${T}px`),{data:{x:D,y:O}}}});function vv(r){const[e,n="center"]=r.split("-");return[e,n]}var wI=gv,yI=mv,vI=xv,bI=yv;function CI(r){const e=EI(r),n=R.forwardRef((o,c)=>{const{children:u,...p}=o,x=R.Children.toArray(u),b=x.find(AI);if(b){const y=b.props.children,A=x.map(_=>_===b?R.Children.count(y)>1?R.Children.only(null):R.isValidElement(y)?y.props.children:null:_);return m.jsx(e,{...p,ref:c,children:R.isValidElement(y)?R.cloneElement(y,void 0,A):null})}return m.jsx(e,{...p,ref:c,children:u})});return n.displayName=`${r}.Slot`,n}function EI(r){const e=R.forwardRef((n,o)=>{const{children:c,...u}=n;if(R.isValidElement(c)){const p=NI(c),x=_I(u,c.props);return c.type!==R.Fragment&&(x.ref=o?Ga(o,p):p),R.cloneElement(c,x)}return R.Children.count(c)>1?R.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var SI=Symbol("radix.slottable");function AI(r){return R.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===SI}function _I(r,e){const n={...e};for(const o in e){const c=r[o],u=e[o];/^on[A-Z]/.test(o)?c&&u?n[o]=(...x)=>{const b=u(...x);return c(...x),b}:c&&(n[o]=c):o==="style"?n[o]={...c,...u}:o==="className"&&(n[o]=[c,u].filter(Boolean).join(" "))}return{...r,...n}}function NI(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function Ad(r){const e=R.useRef({value:r,previous:r});return R.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var bv=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),II="VisuallyHidden",TI=R.forwardRef((r,e)=>m.jsx(xt.span,{...r,ref:e,style:{...bv,...r.style}}));TI.displayName=II;var RI=[" ","Enter","ArrowUp","ArrowDown"],kI=[" ","Enter"],Fo="Select",[_d,Nd,OI]=K0(Fo),[Ja]=ni(Fo,[OI,hv]),Id=hv(),[PI,Ks]=Ja(Fo),[jI,DI]=Ja(Fo),Cv=r=>{const{__scopeSelect:e,children:n,open:o,defaultOpen:c,onOpenChange:u,value:p,defaultValue:x,onValueChange:b,dir:y,name:A,autoComplete:_,disabled:k,required:T,form:D}=r,O=Id(e),[L,U]=R.useState(null),[z,F]=R.useState(null),[$,se]=R.useState(!1),Y=lc(y),[V,X]=bi({prop:o,defaultProp:c??!1,onChange:u,caller:Fo}),[W,ye]=bi({prop:p,defaultProp:x,onChange:b,caller:Fo}),be=R.useRef(null),de=L?D||!!L.closest("form"):!0,[ve,Ce]=R.useState(new Set),ie=Array.from(ve).map(ce=>ce.props.value).join(";");return m.jsx(wI,{...O,children:m.jsxs(PI,{required:T,scope:e,trigger:L,onTriggerChange:U,valueNode:z,onValueNodeChange:F,valueNodeHasChildren:$,onValueNodeHasChildrenChange:se,contentId:Ui(),value:W,onValueChange:ye,open:V,onOpenChange:X,dir:Y,triggerPointerDownPosRef:be,disabled:k,children:[m.jsx(_d.Provider,{scope:e,children:m.jsx(jI,{scope:r.__scopeSelect,onNativeOptionAdd:R.useCallback(ce=>{Ce(ge=>new Set(ge).add(ce))},[]),onNativeOptionRemove:R.useCallback(ce=>{Ce(ge=>{const te=new Set(ge);return te.delete(ce),te})},[]),children:n})}),de?m.jsxs(Hv,{"aria-hidden":!0,required:T,tabIndex:-1,name:A,autoComplete:_,value:W,onChange:ce=>ye(ce.target.value),disabled:k,form:D,children:[W===void 0?m.jsx("option",{value:""}):null,Array.from(ve)]},ie):null]})})};Cv.displayName=Fo;var Ev="SelectTrigger",Sv=R.forwardRef((r,e)=>{const{__scopeSelect:n,disabled:o=!1,...c}=r,u=Id(n),p=Ks(Ev,n),x=p.disabled||o,b=Ut(e,p.onTriggerChange),y=Nd(n),A=R.useRef("touch"),[_,k,T]=Gv(O=>{const L=y().filter(F=>!F.disabled),U=L.find(F=>F.value===p.value),z=qv(L,O,U);z!==void 0&&p.onValueChange(z.value)}),D=O=>{x||(p.onOpenChange(!0),T()),O&&(p.triggerPointerDownPosRef.current={x:Math.round(O.pageX),y:Math.round(O.pageY)})};return m.jsx(yI,{asChild:!0,...u,children:m.jsx(xt.button,{type:"button",role:"combobox","aria-controls":p.contentId,"aria-expanded":p.open,"aria-required":p.required,"aria-autocomplete":"none",dir:p.dir,"data-state":p.open?"open":"closed",disabled:x,"data-disabled":x?"":void 0,"data-placeholder":$v(p.value)?"":void 0,...c,ref:b,onClick:Et(c.onClick,O=>{O.currentTarget.focus(),A.current!=="mouse"&&D(O)}),onPointerDown:Et(c.onPointerDown,O=>{A.current=O.pointerType;const L=O.target;L.hasPointerCapture(O.pointerId)&&L.releasePointerCapture(O.pointerId),O.button===0&&O.ctrlKey===!1&&O.pointerType==="mouse"&&(D(O),O.preventDefault())}),onKeyDown:Et(c.onKeyDown,O=>{const L=_.current!=="";!(O.ctrlKey||O.altKey||O.metaKey)&&O.key.length===1&&k(O.key),!(L&&O.key===" ")&&RI.includes(O.key)&&(D(),O.preventDefault())})})})});Sv.displayName=Ev;var Av="SelectValue",_v=R.forwardRef((r,e)=>{const{__scopeSelect:n,className:o,style:c,children:u,placeholder:p="",...x}=r,b=Ks(Av,n),{onValueNodeHasChildrenChange:y}=b,A=u!==void 0,_=Ut(e,b.onValueNodeChange);return Yn(()=>{y(A)},[y,A]),m.jsx(xt.span,{...x,ref:_,style:{pointerEvents:"none"},children:$v(b.value)?m.jsx(m.Fragment,{children:p}):u})});_v.displayName=Av;var MI="SelectIcon",Nv=R.forwardRef((r,e)=>{const{__scopeSelect:n,children:o,...c}=r;return m.jsx(xt.span,{"aria-hidden":!0,...c,ref:e,children:o||""})});Nv.displayName=MI;var LI="SelectPortal",Iv=r=>m.jsx(e1,{asChild:!0,...r});Iv.displayName=LI;var Uo="SelectContent",Tv=R.forwardRef((r,e)=>{const n=Ks(Uo,r.__scopeSelect),[o,c]=R.useState();if(Yn(()=>{c(new DocumentFragment)},[]),!n.open){const u=o;return u?Ya.createPortal(m.jsx(Rv,{scope:r.__scopeSelect,children:m.jsx(_d.Slot,{scope:r.__scopeSelect,children:m.jsx("div",{children:r.children})})}),u):null}return m.jsx(kv,{...r,ref:e})});Tv.displayName=Uo;var pi=10,[Rv,Zs]=Ja(Uo),BI="SelectContentImpl",FI=CI("SelectContent.RemoveScroll"),kv=R.forwardRef((r,e)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:c,onEscapeKeyDown:u,onPointerDownOutside:p,side:x,sideOffset:b,align:y,alignOffset:A,arrowPadding:_,collisionBoundary:k,collisionPadding:T,sticky:D,hideWhenDetached:O,avoidCollisions:L,...U}=r,z=Ks(Uo,n),[F,$]=R.useState(null),[se,Y]=R.useState(null),V=Ut(e,pe=>$(pe)),[X,W]=R.useState(null),[ye,be]=R.useState(null),de=Nd(n),[ve,Ce]=R.useState(!1),ie=R.useRef(!1);R.useEffect(()=>{if(F)return jy(F)},[F]),_y();const ce=R.useCallback(pe=>{const[Ee,...Le]=de().map(vt=>vt.ref.current),[Xe]=Le.slice(-1),tt=document.activeElement;for(const vt of pe)if(vt===tt||(vt?.scrollIntoView({block:"nearest"}),vt===Ee&&se&&(se.scrollTop=0),vt===Xe&&se&&(se.scrollTop=se.scrollHeight),vt?.focus(),document.activeElement!==tt))return},[de,se]),ge=R.useCallback(()=>ce([X,F]),[ce,X,F]);R.useEffect(()=>{ve&&ge()},[ve,ge]);const{onOpenChange:te,triggerPointerDownPosRef:re}=z;R.useEffect(()=>{if(F){let pe={x:0,y:0};const Ee=Xe=>{pe={x:Math.abs(Math.round(Xe.pageX)-(re.current?.x??0)),y:Math.abs(Math.round(Xe.pageY)-(re.current?.y??0))}},Le=Xe=>{pe.x<=10&&pe.y<=10?Xe.preventDefault():F.contains(Xe.target)||te(!1),document.removeEventListener("pointermove",Ee),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",Le,{capture:!0})}}},[F,te,re]),R.useEffect(()=>{const pe=()=>te(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[te]);const[fe,K]=Gv(pe=>{const Ee=de().filter(tt=>!tt.disabled),Le=Ee.find(tt=>tt.ref.current===document.activeElement),Xe=qv(Ee,pe,Le);Xe&&setTimeout(()=>Xe.ref.current.focus())}),ue=R.useCallback((pe,Ee,Le)=>{const Xe=!ie.current&&!Le;(z.value!==void 0&&z.value===Ee||Xe)&&(W(pe),Xe&&(ie.current=!0))},[z.value]),Ae=R.useCallback(()=>F?.focus(),[F]),Te=R.useCallback((pe,Ee,Le)=>{const Xe=!ie.current&&!Le;(z.value!==void 0&&z.value===Ee||Xe)&&be(pe)},[z.value]),Fe=o==="popper"?S0:Ov,ee=Fe===S0?{side:x,sideOffset:b,align:y,alignOffset:A,arrowPadding:_,collisionBoundary:k,collisionPadding:T,sticky:D,hideWhenDetached:O,avoidCollisions:L}:{};return m.jsx(Rv,{scope:n,content:F,viewport:se,onViewportChange:Y,itemRefCallback:ue,selectedItem:X,onItemLeave:Ae,itemTextRefCallback:Te,focusSelectedItem:ge,selectedItemText:ye,position:o,isPositioned:ve,searchRef:fe,children:m.jsx(t1,{as:FI,allowPinchZoom:!0,children:m.jsx(J0,{asChild:!0,trapped:z.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:Et(c,pe=>{z.trigger?.focus({preventScroll:!0}),pe.preventDefault()}),children:m.jsx(Q0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:p,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:m.jsx(Fe,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:pe=>pe.preventDefault(),...U,...ee,onPlaced:()=>Ce(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...U.style},onKeyDown:Et(U.onKeyDown,pe=>{const Ee=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!Ee&&pe.key.length===1&&K(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let Xe=de().filter(tt=>!tt.disabled).map(tt=>tt.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(Xe=Xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const tt=pe.target,vt=Xe.indexOf(tt);Xe=Xe.slice(vt+1)}setTimeout(()=>ce(Xe)),pe.preventDefault()}})})})})})})});kv.displayName=BI;var UI="SelectItemAlignedPosition",Ov=R.forwardRef((r,e)=>{const{__scopeSelect:n,onPlaced:o,...c}=r,u=Ks(Uo,n),p=Zs(Uo,n),[x,b]=R.useState(null),[y,A]=R.useState(null),_=Ut(e,V=>A(V)),k=Nd(n),T=R.useRef(!1),D=R.useRef(!0),{viewport:O,selectedItem:L,selectedItemText:U,focusSelectedItem:z}=p,F=R.useCallback(()=>{if(u.trigger&&u.valueNode&&x&&y&&O&&L&&U){const V=u.trigger.getBoundingClientRect(),X=y.getBoundingClientRect(),W=u.valueNode.getBoundingClientRect(),ye=U.getBoundingClientRect();if(u.dir!=="rtl"){const tt=ye.left-X.left,vt=W.left-tt,nt=V.left-vt,on=V.width+nt,je=Math.max(on,X.width),Me=window.innerWidth-pi,Je=Rm(vt,[pi,Math.max(pi,Me-je)]);x.style.minWidth=on+"px",x.style.left=Je+"px"}else{const tt=X.right-ye.right,vt=window.innerWidth-W.right-tt,nt=window.innerWidth-V.right-vt,on=V.width+nt,je=Math.max(on,X.width),Me=window.innerWidth-pi,Je=Rm(vt,[pi,Math.max(pi,Me-je)]);x.style.minWidth=on+"px",x.style.right=Je+"px"}const be=k(),de=window.innerHeight-pi*2,ve=O.scrollHeight,Ce=window.getComputedStyle(y),ie=parseInt(Ce.borderTopWidth,10),ce=parseInt(Ce.paddingTop,10),ge=parseInt(Ce.borderBottomWidth,10),te=parseInt(Ce.paddingBottom,10),re=ie+ce+ve+te+ge,fe=Math.min(L.offsetHeight*5,re),K=window.getComputedStyle(O),ue=parseInt(K.paddingTop,10),Ae=parseInt(K.paddingBottom,10),Te=V.top+V.height/2-pi,Fe=de-Te,ee=L.offsetHeight/2,pe=L.offsetTop+ee,Ee=ie+ce+pe,Le=re-Ee;if(Ee<=Te){const tt=be.length>0&&L===be[be.length-1].ref.current;x.style.bottom="0px";const vt=y.clientHeight-O.offsetTop-O.offsetHeight,nt=Math.max(Fe,ee+(tt?Ae:0)+vt+ge),on=Ee+nt;x.style.height=on+"px"}else{const tt=be.length>0&&L===be[0].ref.current;x.style.top="0px";const nt=Math.max(Te,ie+O.offsetTop+(tt?ue:0)+ee)+Le;x.style.height=nt+"px",O.scrollTop=Ee-Te+O.offsetTop}x.style.margin=`${pi}px 0`,x.style.minHeight=fe+"px",x.style.maxHeight=de+"px",o?.(),requestAnimationFrame(()=>T.current=!0)}},[k,u.trigger,u.valueNode,x,y,O,L,U,u.dir,o]);Yn(()=>F(),[F]);const[$,se]=R.useState();Yn(()=>{y&&se(window.getComputedStyle(y).zIndex)},[y]);const Y=R.useCallback(V=>{V&&D.current===!0&&(F(),z?.(),D.current=!1)},[F,z]);return m.jsx(VI,{scope:n,contentWrapper:x,shouldExpandOnScrollRef:T,onScrollButtonChange:Y,children:m.jsx("div",{ref:b,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:$},children:m.jsx(xt.div,{...c,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...c.style}})})})});Ov.displayName=UI;var zI="SelectPopperPosition",S0=R.forwardRef((r,e)=>{const{__scopeSelect:n,align:o="start",collisionPadding:c=pi,...u}=r,p=Id(n);return m.jsx(vI,{...p,...u,ref:e,align:o,collisionPadding:c,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});S0.displayName=zI;var[VI,f1]=Ja(Uo,{}),A0="SelectViewport",Pv=R.forwardRef((r,e)=>{const{__scopeSelect:n,nonce:o,...c}=r,u=Zs(A0,n),p=f1(A0,n),x=Ut(e,u.onViewportChange),b=R.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),m.jsx(_d.Slot,{scope:n,children:m.jsx(xt.div,{"data-radix-select-viewport":"",role:"presentation",...c,ref:x,style:{position:"relative",flex:1,overflow:"hidden auto",...c.style},onScroll:Et(c.onScroll,y=>{const A=y.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:k}=p;if(k?.current&&_){const T=Math.abs(b.current-A.scrollTop);if(T>0){const D=window.innerHeight-pi*2,O=parseFloat(_.style.minHeight),L=parseFloat(_.style.height),U=Math.max(O,L);if(U<D){const z=U+T,F=Math.min(D,z),$=z-F;_.style.height=F+"px",_.style.bottom==="0px"&&(A.scrollTop=$>0?$:0,_.style.justifyContent="flex-end")}}}b.current=A.scrollTop})})})]})});Pv.displayName=A0;var jv="SelectGroup",[WI,HI]=Ja(jv),$I=R.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r,c=Ui();return m.jsx(WI,{scope:n,id:c,children:m.jsx(xt.div,{role:"group","aria-labelledby":c,...o,ref:e})})});$I.displayName=jv;var Dv="SelectLabel",GI=R.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r,c=HI(Dv,n);return m.jsx(xt.div,{id:c.id,...o,ref:e})});GI.displayName=Dv;var sd="SelectItem",[qI,Mv]=Ja(sd),Lv=R.forwardRef((r,e)=>{const{__scopeSelect:n,value:o,disabled:c=!1,textValue:u,...p}=r,x=Ks(sd,n),b=Zs(sd,n),y=x.value===o,[A,_]=R.useState(u??""),[k,T]=R.useState(!1),D=Ut(e,z=>b.itemRefCallback?.(z,o,c)),O=Ui(),L=R.useRef("touch"),U=()=>{c||(x.onValueChange(o),x.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(qI,{scope:n,value:o,disabled:c,textId:O,isSelected:y,onItemTextChange:R.useCallback(z=>{_(F=>F||(z?.textContent??"").trim())},[]),children:m.jsx(_d.ItemSlot,{scope:n,value:o,disabled:c,textValue:A,children:m.jsx(xt.div,{role:"option","aria-labelledby":O,"data-highlighted":k?"":void 0,"aria-selected":y&&k,"data-state":y?"checked":"unchecked","aria-disabled":c||void 0,"data-disabled":c?"":void 0,tabIndex:c?void 0:-1,...p,ref:D,onFocus:Et(p.onFocus,()=>T(!0)),onBlur:Et(p.onBlur,()=>T(!1)),onClick:Et(p.onClick,()=>{L.current!=="mouse"&&U()}),onPointerUp:Et(p.onPointerUp,()=>{L.current==="mouse"&&U()}),onPointerDown:Et(p.onPointerDown,z=>{L.current=z.pointerType}),onPointerMove:Et(p.onPointerMove,z=>{L.current=z.pointerType,c?b.onItemLeave?.():L.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Et(p.onPointerLeave,z=>{z.currentTarget===document.activeElement&&b.onItemLeave?.()}),onKeyDown:Et(p.onKeyDown,z=>{b.searchRef?.current!==""&&z.key===" "||(kI.includes(z.key)&&U(),z.key===" "&&z.preventDefault())})})})})});Lv.displayName=sd;var Gl="SelectItemText",Bv=R.forwardRef((r,e)=>{const{__scopeSelect:n,className:o,style:c,...u}=r,p=Ks(Gl,n),x=Zs(Gl,n),b=Mv(Gl,n),y=DI(Gl,n),[A,_]=R.useState(null),k=Ut(e,U=>_(U),b.onItemTextChange,U=>x.itemTextRefCallback?.(U,b.value,b.disabled)),T=A?.textContent,D=R.useMemo(()=>m.jsx("option",{value:b.value,disabled:b.disabled,children:T},b.value),[b.disabled,b.value,T]),{onNativeOptionAdd:O,onNativeOptionRemove:L}=y;return Yn(()=>(O(D),()=>L(D)),[O,L,D]),m.jsxs(m.Fragment,{children:[m.jsx(xt.span,{id:b.textId,...u,ref:k}),b.isSelected&&p.valueNode&&!p.valueNodeHasChildren?Ya.createPortal(u.children,p.valueNode):null]})});Bv.displayName=Gl;var Fv="SelectItemIndicator",Uv=R.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r;return Mv(Fv,n).isSelected?m.jsx(xt.span,{"aria-hidden":!0,...o,ref:e}):null});Uv.displayName=Fv;var _0="SelectScrollUpButton",zv=R.forwardRef((r,e)=>{const n=Zs(_0,r.__scopeSelect),o=f1(_0,r.__scopeSelect),[c,u]=R.useState(!1),p=Ut(e,o.onScrollButtonChange);return Yn(()=>{if(n.viewport&&n.isPositioned){let x=function(){const y=b.scrollTop>0;u(y)};const b=n.viewport;return x(),b.addEventListener("scroll",x),()=>b.removeEventListener("scroll",x)}},[n.viewport,n.isPositioned]),c?m.jsx(Wv,{...r,ref:p,onAutoScroll:()=>{const{viewport:x,selectedItem:b}=n;x&&b&&(x.scrollTop=x.scrollTop-b.offsetHeight)}}):null});zv.displayName=_0;var N0="SelectScrollDownButton",Vv=R.forwardRef((r,e)=>{const n=Zs(N0,r.__scopeSelect),o=f1(N0,r.__scopeSelect),[c,u]=R.useState(!1),p=Ut(e,o.onScrollButtonChange);return Yn(()=>{if(n.viewport&&n.isPositioned){let x=function(){const y=b.scrollHeight-b.clientHeight,A=Math.ceil(b.scrollTop)<y;u(A)};const b=n.viewport;return x(),b.addEventListener("scroll",x),()=>b.removeEventListener("scroll",x)}},[n.viewport,n.isPositioned]),c?m.jsx(Wv,{...r,ref:p,onAutoScroll:()=>{const{viewport:x,selectedItem:b}=n;x&&b&&(x.scrollTop=x.scrollTop+b.offsetHeight)}}):null});Vv.displayName=N0;var Wv=R.forwardRef((r,e)=>{const{__scopeSelect:n,onAutoScroll:o,...c}=r,u=Zs("SelectScrollButton",n),p=R.useRef(null),x=Nd(n),b=R.useCallback(()=>{p.current!==null&&(window.clearInterval(p.current),p.current=null)},[]);return R.useEffect(()=>()=>b(),[b]),Yn(()=>{x().find(A=>A.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[x]),m.jsx(xt.div,{"aria-hidden":!0,...c,ref:e,style:{flexShrink:0,...c.style},onPointerDown:Et(c.onPointerDown,()=>{p.current===null&&(p.current=window.setInterval(o,50))}),onPointerMove:Et(c.onPointerMove,()=>{u.onItemLeave?.(),p.current===null&&(p.current=window.setInterval(o,50))}),onPointerLeave:Et(c.onPointerLeave,()=>{b()})})}),XI="SelectSeparator",YI=R.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r;return m.jsx(xt.div,{"aria-hidden":!0,...o,ref:e})});YI.displayName=XI;var I0="SelectArrow",KI=R.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r,c=Id(n),u=Ks(I0,n),p=Zs(I0,n);return u.open&&p.position==="popper"?m.jsx(bI,{...c,...o,ref:e}):null});KI.displayName=I0;var ZI="SelectBubbleInput",Hv=R.forwardRef(({__scopeSelect:r,value:e,...n},o)=>{const c=R.useRef(null),u=Ut(o,c),p=Ad(e);return R.useEffect(()=>{const x=c.current;if(!x)return;const b=window.HTMLSelectElement.prototype,A=Object.getOwnPropertyDescriptor(b,"value").set;if(p!==e&&A){const _=new Event("change",{bubbles:!0});A.call(x,e),x.dispatchEvent(_)}},[p,e]),m.jsx(xt.select,{...n,style:{...bv,...n.style},ref:u,defaultValue:e})});Hv.displayName=ZI;function $v(r){return r===""||r===void 0}function Gv(r){const e=Hs(r),n=R.useRef(""),o=R.useRef(0),c=R.useCallback(p=>{const x=n.current+p;e(x),(function b(y){n.current=y,window.clearTimeout(o.current),y!==""&&(o.current=window.setTimeout(()=>b(""),1e3))})(x)},[e]),u=R.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return R.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,c,u]}function qv(r,e,n){const c=e.length>1&&Array.from(e).every(y=>y===e[0])?e[0]:e,u=n?r.indexOf(n):-1;let p=QI(r,Math.max(u,0));c.length===1&&(p=p.filter(y=>y!==n));const b=p.find(y=>y.textValue.toLowerCase().startsWith(c.toLowerCase()));return b!==n?b:void 0}function QI(r,e){return r.map((n,o)=>r[(e+o)%r.length])}var JI=Cv,eT=Sv,tT=_v,nT=Nv,rT=Iv,iT=Tv,sT=Pv,oT=Lv,aT=Bv,lT=Uv,cT=zv,uT=Vv;function Ma({...r}){return m.jsx(JI,{"data-slot":"select",...r})}function La({...r}){return m.jsx(tT,{"data-slot":"select-value",...r})}function Ba({className:r,size:e="default",children:n,...o}){return m.jsxs(eT,{"data-slot":"select-trigger","data-size":e,className:yt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...o,children:[n,m.jsx(nT,{asChild:!0,children:m.jsx(B0,{className:"size-4 opacity-50"})})]})}function Fa({className:r,children:e,position:n="popper",...o}){return m.jsx(rT,{children:m.jsxs(iT,{"data-slot":"select-content",className:yt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...o,children:[m.jsx(dT,{}),m.jsx(sT,{className:yt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),m.jsx(hT,{})]})})}function hn({className:r,children:e,...n}){return m.jsxs(oT,{"data-slot":"select-item",className:yt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...n,children:[m.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:m.jsx(lT,{children:m.jsx(tw,{className:"size-4"})})}),m.jsx(aT,{children:e})]})}function dT({className:r,...e}){return m.jsx(cT,{"data-slot":"select-scroll-up-button",className:yt("flex cursor-default items-center justify-center py-1",r),...e,children:m.jsx(vE,{className:"size-4"})})}function hT({className:r,...e}){return m.jsx(uT,{"data-slot":"select-scroll-down-button",className:yt("flex cursor-default items-center justify-center py-1",r),...e,children:m.jsx(B0,{className:"size-4"})})}var Td="Checkbox",[fT]=ni(Td),[gT,g1]=fT(Td);function pT(r){const{__scopeCheckbox:e,checked:n,children:o,defaultChecked:c,disabled:u,form:p,name:x,onCheckedChange:b,required:y,value:A="on",internal_do_not_use_render:_}=r,[k,T]=bi({prop:n,defaultProp:c??!1,onChange:b,caller:Td}),[D,O]=R.useState(null),[L,U]=R.useState(null),z=R.useRef(!1),F=D?!!p||!!D.closest("form"):!0,$={checked:k,disabled:u,setChecked:T,control:D,setControl:O,name:x,form:p,value:A,hasConsumerStoppedPropagationRef:z,required:y,defaultChecked:zs(c)?!1:c,isFormControl:F,bubbleInput:L,setBubbleInput:U};return m.jsx(gT,{scope:e,...$,children:mT(_)?_($):o})}var Xv="CheckboxTrigger",Yv=R.forwardRef(({__scopeCheckbox:r,onKeyDown:e,onClick:n,...o},c)=>{const{control:u,value:p,disabled:x,checked:b,required:y,setControl:A,setChecked:_,hasConsumerStoppedPropagationRef:k,isFormControl:T,bubbleInput:D}=g1(Xv,r),O=Ut(c,A),L=R.useRef(b);return R.useEffect(()=>{const U=u?.form;if(U){const z=()=>_(L.current);return U.addEventListener("reset",z),()=>U.removeEventListener("reset",z)}},[u,_]),m.jsx(xt.button,{type:"button",role:"checkbox","aria-checked":zs(b)?"mixed":b,"aria-required":y,"data-state":t2(b),"data-disabled":x?"":void 0,disabled:x,value:p,...o,ref:O,onKeyDown:Et(e,U=>{U.key==="Enter"&&U.preventDefault()}),onClick:Et(n,U=>{_(z=>zs(z)?!0:!z),D&&T&&(k.current=U.isPropagationStopped(),k.current||U.stopPropagation())})})});Yv.displayName=Xv;var Kv=R.forwardRef((r,e)=>{const{__scopeCheckbox:n,name:o,checked:c,defaultChecked:u,required:p,disabled:x,value:b,onCheckedChange:y,form:A,..._}=r;return m.jsx(pT,{__scopeCheckbox:n,checked:c,defaultChecked:u,disabled:x,required:p,onCheckedChange:y,name:o,form:A,value:b,internal_do_not_use_render:({isFormControl:k})=>m.jsxs(m.Fragment,{children:[m.jsx(Yv,{..._,ref:e,__scopeCheckbox:n}),k&&m.jsx(e2,{__scopeCheckbox:n})]})})});Kv.displayName=Td;var Zv="CheckboxIndicator",Qv=R.forwardRef((r,e)=>{const{__scopeCheckbox:n,forceMount:o,...c}=r,u=g1(Zv,n);return m.jsx(Ys,{present:o||zs(u.checked)||u.checked===!0,children:m.jsx(xt.span,{"data-state":t2(u.checked),"data-disabled":u.disabled?"":void 0,...c,ref:e,style:{pointerEvents:"none",...r.style}})})});Qv.displayName=Zv;var Jv="CheckboxBubbleInput",e2=R.forwardRef(({__scopeCheckbox:r,...e},n)=>{const{control:o,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:p,required:x,disabled:b,name:y,value:A,form:_,bubbleInput:k,setBubbleInput:T}=g1(Jv,r),D=Ut(n,T),O=Ad(u),L=Sd(o);R.useEffect(()=>{const z=k;if(!z)return;const F=window.HTMLInputElement.prototype,se=Object.getOwnPropertyDescriptor(F,"checked").set,Y=!c.current;if(O!==u&&se){const V=new Event("click",{bubbles:Y});z.indeterminate=zs(u),se.call(z,zs(u)?!1:u),z.dispatchEvent(V)}},[k,O,u,c]);const U=R.useRef(zs(u)?!1:u);return m.jsx(xt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??U.current,required:x,disabled:b,name:y,value:A,form:_,...e,tabIndex:-1,ref:D,style:{...e.style,...L,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});e2.displayName=Jv;function mT(r){return typeof r=="function"}function zs(r){return r==="indeterminate"}function t2(r){return zs(r)?"indeterminate":r?"checked":"unchecked"}function Vm({className:r,...e}){return m.jsx(Kv,{"data-slot":"checkbox",className:yt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:m.jsx(Qv,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:m.jsx(tw,{className:"size-3.5"})})})}const Rd="events",Qs="event_participants",el="event_agenda",p1="selected_event_id";function n2(){return"E"+Date.now()+Math.random().toString(36).substring(2,6).toUpperCase()}function m1(){return"P"+Date.now()+Math.random().toString(36).substring(2,9).toUpperCase()}function xT(){return"A"+Date.now()}function Lr(){try{const r=localStorage.getItem(Rd);return r?JSON.parse(r):[]}catch(r){return console.error("Error reading events from localStorage:",r),[]}}function Br(r){return Lr().find(n=>n.id===r)||null}function r2(r){const e=Lr();e.push(r),localStorage.setItem(Rd,JSON.stringify(e))}function zo(r,e){const n=Lr(),o=n.findIndex(c=>c.id===r);if(o===-1)throw new Error("Event not found");n[o]={...n[o],...e},localStorage.setItem(Rd,JSON.stringify(n))}function wT(r){const n=Lr().filter(u=>u.id!==r);localStorage.setItem(Rd,JSON.stringify(n));const o=br().filter(u=>u.eventId!==r);localStorage.setItem(Qs,JSON.stringify(o));const c=us().filter(u=>u.eventId!==r);localStorage.setItem(el,JSON.stringify(c)),i2()===r&&od()}function yT(r){localStorage.setItem(p1,r)}function i2(){return localStorage.getItem(p1)}function od(){localStorage.removeItem(p1)}function vT(){return"CF"+Date.now()+Math.random().toString(36).substring(2,6).toUpperCase()}function bT(r,e){const o=Lr().find(u=>u.id===r);if(!o)throw new Error("Event not found");const c={id:vT(),...e};return o.customFields||(o.customFields=[]),o.customFields.push(c),zo(r,{customFields:o.customFields}),c}function CT(r,e){const o=Lr().find(u=>u.id===r);if(!o||!o.customFields)throw new Error("Event or custom fields not found");o.customFields=o.customFields.filter(u=>u.id!==e),zo(r,{customFields:o.customFields}),br(r).forEach(u=>{u.customData&&u.customData[e]&&(delete u.customData[e],IT(u.id,{customData:u.customData}))})}function ET(r,e){const o=Lr().find(u=>u.id===r);if(!o||!o.customFields)throw new Error("Event or custom fields not found");const c=e.map((u,p)=>{const x=o.customFields.find(b=>b.id===u);if(!x)throw new Error(`Field ${u} not found`);return{...x,order:p}});zo(r,{customFields:c})}function x1(r){const e=Br(r),n={phone:!0,company:!0,position:!0,attendance:!0,registered:!0};return e?.columnVisibility||n}function ST(r,e){if(!Br(r))throw new Error("Event not found");const c={...x1(r),...e};zo(r,{columnVisibility:c})}function w1(r){const e=Br(r),n={logoAlignment:"center",logoSize:"medium",primaryColor:"#000000",backgroundColor:"#ffffff",fontFamily:"sans-serif"};return e?.branding||n}function AT(r,e){if(!Br(r))throw new Error("Event not found");const c={...w1(r),...e};zo(r,{branding:c})}function y1(r){const e=Br(r),n={size:"CR80",components:[{id:"1",type:"eventName",enabled:!0,order:0},{id:"2",type:"field",fieldName:"name",label:"Name",enabled:!0,order:1},{id:"3",type:"field",fieldName:"company",label:"Company",enabled:!0,order:2},{id:"4",type:"qrcode",enabled:!0,order:3}],fontSize:"medium",alignment:"center",backgroundColor:"#ffffff",logoSize:"medium",qrCodeSize:"medium"};return e?.badgeSettings||n}function _T(r,e){if(!Br(r))throw new Error("Event not found");const c={...y1(r),...e};zo(r,{badgeSettings:c})}function NT(){try{console.log("=".repeat(80)),console.log("[MIGRATION] Starting data migration to multi-event structure..."),console.log("=".repeat(80));const r=Lr(),e=br(),n=us(),o=e.filter(p=>!p.eventId),c=n.filter(p=>!p.eventId);if(o.length===0&&c.length===0){console.log("[MIGRATION]  All data already has event associations"),console.log("[MIGRATION] Current system state:",{totalEvents:r.length,totalParticipants:e.length,totalAgendaItems:n.length,dataIntegrityVerified:!0}),console.log("=".repeat(80));return}console.warn("[MIGRATION]  Found orphaned data without event associations:",{participants:o.length,agenda:c.length});let u=null;if(r.length===0?(console.log("[MIGRATION] Creating default event for orphaned data..."),u={id:n2(),name:"Default Event",startDate:new Date().toISOString().split("T")[0],endDate:"",location:"",description:"Auto-created event for existing data",createdAt:new Date().toISOString()},r2(u),console.log("[MIGRATION]  Created default event:",u.id)):(u=r[0],console.log("[MIGRATION] Using existing event for orphaned data:",u.id)),o.length>0){console.log("[MIGRATION] Migrating",o.length,"participants to event:",u.id);const p=e.map(x=>x.eventId?x:{...x,eventId:u.id});localStorage.setItem(Qs,JSON.stringify(p)),console.log("[MIGRATION]  Participants migrated successfully")}if(c.length>0){console.log("[MIGRATION] Migrating",c.length,"agenda items to event:",u.id);const p=n.map(x=>x.eventId?x:{...x,eventId:u.id});localStorage.setItem(el,JSON.stringify(p)),console.log("[MIGRATION]  Agenda items migrated successfully")}console.log("[MIGRATION]  Migration completed successfully! "),console.log("[MIGRATION] Final state:",{totalEvents:Lr().length,totalParticipants:br().length,totalAgendaItems:us().length,orphanedData:0}),console.log("=".repeat(80))}catch(r){console.error("[MIGRATION]  ERROR during migration:",r),console.log("=".repeat(80))}}function br(r){try{const e=localStorage.getItem(Qs),n=e?JSON.parse(e):[];return r?n.filter(o=>o.eventId===r):n}catch(e){return console.error("Error reading participants from localStorage:",e),[]}}function s2(r){const e=br();if(e.findIndex(o=>o.email===r.email&&o.eventId===r.eventId)>=0)throw new Error("Email already registered for this event");e.push(r),localStorage.setItem(Qs,JSON.stringify(e))}function IT(r,e){const n=br(),o=n.findIndex(c=>c.id===r);if(o===-1)throw new Error("Participant not found");n[o]={...n[o],...e},localStorage.setItem(Qs,JSON.stringify(n))}function TT(r){const n=br().filter(o=>o.id!==r);localStorage.setItem(Qs,JSON.stringify(n))}function RT(r){return br().find(n=>n.id===r)||null}function kT(r,e){console.log("[ATTENDANCE] Recording attendance for participant:",r,"at:",e);const n=br(),o=n.find(p=>p.id===r);if(!o)throw console.error("[ATTENDANCE] Participant not found:",r),new Error("Participant not found");o.attendance?.some(p=>p.agendaItem===e)&&console.warn("[ATTENDANCE] Participant already checked in to this session");const u={agendaItem:e,timestamp:new Date().toISOString()};o.attendance=o.attendance||[],o.attendance.push(u),console.log("[ATTENDANCE] Saving updated participant list to localStorage..."),localStorage.setItem(Qs,JSON.stringify(n)),console.log("[ATTENDANCE] Attendance recorded successfully!"),window.dispatchEvent(new CustomEvent("participantsUpdated",{detail:{participantId:r,agendaItem:e,timestamp:u.timestamp}}))}function us(r){try{const e=localStorage.getItem(el),n=e?JSON.parse(e):[];return r?n.filter(o=>o.eventId===r):n}catch(e){return console.error("Error reading agenda from localStorage:",e),[]}}function OT(r){const e=us();e.push(r),localStorage.setItem(el,JSON.stringify(e))}function PT(r,e){const n=us(),o=n.findIndex(c=>c.id===r);if(o===-1)throw new Error("Agenda item not found");n[o]={...n[o],...e},localStorage.setItem(el,JSON.stringify(n))}function jT(r){const n=us().filter(o=>o.id!==r);localStorage.setItem(el,JSON.stringify(n))}function DT(r,e){const n=br();let o=0,c=0;return r.forEach(u=>{try{if(!u.name||!u.email){c++;return}if(n.some(x=>x.email===u.email&&x.eventId===e)){c++;return}const p={id:m1(),eventId:e,name:u.name,email:u.email,phone:u.phone||"",company:u.company||"",position:u.position||"",registeredAt:new Date().toISOString(),attendance:[]};n.push(p),o++}catch{c++}}),localStorage.setItem(Qs,JSON.stringify(n)),{imported:o,failed:c}}function MT({eventId:r,onFieldsUpdated:e}){const[n,o]=R.useState(!1),[c,u]=R.useState([]),[p,x]=R.useState({phone:!0,company:!0,position:!0,attendance:!0,registered:!0}),[b,y]=R.useState({name:"",label:"",type:"text",required:!1,options:""});R.useEffect(()=>{A(),_()},[r]);const A=()=>{const U=Br(r);U?.customFields?u([...U.customFields].sort((z,F)=>z.order-F.order)):u([])},_=()=>{const U=x1(r);x(U)},k=(U,z)=>{const F={...p,[U]:z};x(F),ST(r,{[U]:z}),e()},T=()=>{if(!b.name.trim()||!b.label.trim()){alert("Please enter both field name and label");return}try{const U={name:b.name.toLowerCase().replace(/\s+/g,"_"),label:b.label,type:b.type,required:b.required,order:c.length,options:b.type==="select"&&b.options?b.options.split(",").map(z=>z.trim()).filter(Boolean):void 0};bT(r,U),y({name:"",label:"",type:"text",required:!1,options:""}),A(),e()}catch(U){console.error("Error adding field:",U),alert("Failed to add field")}},D=U=>{if(confirm("Are you sure you want to delete this field? All data in this field will be lost."))try{CT(r,U),A(),e()}catch(z){console.error("Error deleting field:",z),alert("Failed to delete field")}},O=(U,z)=>{const F=c.findIndex(V=>V.id===U);if(F===-1)return;const $=z==="up"?F-1:F+1;if($<0||$>=c.length)return;const se=[...c],[Y]=se.splice(F,1);se.splice($,0,Y);try{ET(r,se.map(V=>V.id)),A(),e()}catch(V){console.error("Error reordering fields:",V),alert("Failed to reorder fields")}},L=[{key:null,name:"ID",description:"Unique participant identifier",alwaysVisible:!0},{key:null,name:"Name",description:"Participant full name",alwaysVisible:!0},{key:null,name:"Email",description:"Email address",alwaysVisible:!0},{key:"phone",name:"Phone",description:"Phone number",alwaysVisible:!1},{key:"company",name:"Company",description:"Company name",alwaysVisible:!1},{key:"position",name:"Position",description:"Job title/position",alwaysVisible:!1},{key:"attendance",name:"Attendance",description:"Session check-ins and selected sessions",alwaysVisible:!1},{key:"registered",name:"Registered At",description:"Registration timestamp",alwaysVisible:!1}];return m.jsxs(m.Fragment,{children:[m.jsxs(qe,{onClick:()=>o(!0),variant:"outline",size:"sm",children:[m.jsx(uS,{className:"mr-2 h-4 w-4"}),"Manage Columns"]}),m.jsx(Jr,{open:n,onOpenChange:o,children:m.jsxs(ei,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[m.jsx(yi,{children:m.jsx(vi,{children:"Manage Participant Columns"})}),m.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"SYSTEM FIELDS"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"ID, Name, and Email are always visible. Toggle other fields to show/hide them in the participant table."}),m.jsx("div",{className:"border rounded-lg overflow-hidden",children:m.jsxs(jo,{children:[m.jsx(Do,{children:m.jsxs(ur,{children:[m.jsx(kt,{children:"Field Name"}),m.jsx(kt,{children:"Description"}),m.jsx(kt,{className:"w-32 text-center",children:"Visibility"})]})}),m.jsx(Mo,{children:L.map(U=>m.jsxs(ur,{children:[m.jsx(Nt,{className:"font-medium",children:U.name}),m.jsx(Nt,{className:"text-sm text-muted-foreground",children:U.description}),m.jsx(Nt,{className:"text-center",children:U.alwaysVisible?m.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Always Visible"}):m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(Vm,{checked:p[U.key],onCheckedChange:z=>k(U.key,z)}),m.jsx("span",{className:"text-xs text-muted-foreground",children:p[U.key]?"Visible":"Hidden"})]})})]},U.name))})]})})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"CUSTOM FIELDS"}),c.length===0?m.jsx("div",{className:"text-center py-8 border rounded-lg bg-muted/50",children:m.jsx("p",{className:"text-sm text-muted-foreground",children:"No custom fields yet. Add one below to get started."})}):m.jsx("div",{className:"border rounded-lg overflow-hidden",children:m.jsxs(jo,{children:[m.jsx(Do,{children:m.jsxs(ur,{children:[m.jsx(kt,{className:"w-10"}),m.jsx(kt,{children:"Label"}),m.jsx(kt,{children:"Field Name"}),m.jsx(kt,{children:"Type"}),m.jsx(kt,{className:"w-20",children:"Required"}),m.jsx(kt,{className:"w-24",children:"Actions"})]})}),m.jsx(Mo,{children:c.map((U,z)=>m.jsxs(ur,{children:[m.jsx(Nt,{children:m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx(qe,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>O(U.id,"up"),disabled:z===0,children:""}),m.jsx(qe,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>O(U.id,"down"),disabled:z===c.length-1,children:""})]})}),m.jsx(Nt,{className:"font-medium",children:U.label}),m.jsx(Nt,{className:"font-mono text-sm text-muted-foreground",children:U.name}),m.jsx(Nt,{children:m.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded capitalize",children:U.type})}),m.jsx(Nt,{children:U.required?m.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Yes"}):m.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:"No"})}),m.jsx(Nt,{children:m.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>D(U.id),className:"h-8 w-8 p-0 text-destructive",children:m.jsx(oc,{className:"h-4 w-4"})})})]},U.id))})]})})]}),m.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[m.jsx("h3",{className:"text-sm font-semibold mb-4",children:"Add New Custom Field"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"field-label",children:"Field Label *"}),m.jsx(ut,{id:"field-label",placeholder:"e.g., Dietary Preferences",value:b.label,onChange:U=>y({...b,label:U.target.value})}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Display name shown to users"})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"field-name",children:"Field Name *"}),m.jsx(ut,{id:"field-name",placeholder:"e.g., dietary_preferences",value:b.name,onChange:U=>y({...b,name:U.target.value})}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Internal identifier (lowercase, no spaces)"})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"field-type",children:"Field Type"}),m.jsxs(Ma,{value:b.type,onValueChange:U=>y({...b,type:U}),children:[m.jsx(Ba,{id:"field-type",children:m.jsx(La,{})}),m.jsxs(Fa,{children:[m.jsx(hn,{value:"text",children:"Text"}),m.jsx(hn,{value:"email",children:"Email"}),m.jsx(hn,{value:"tel",children:"Phone"}),m.jsx(hn,{value:"number",children:"Number"}),m.jsx(hn,{value:"textarea",children:"Long Text"}),m.jsx(hn,{value:"select",children:"Dropdown"})]})]})]}),b.type==="select"&&m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"field-options",children:"Options (comma-separated)"}),m.jsx(ut,{id:"field-options",placeholder:"Option 1, Option 2, Option 3",value:b.options,onChange:U=>y({...b,options:U.target.value})})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Vm,{id:"field-required",checked:b.required,onCheckedChange:U=>y({...b,required:U})}),m.jsx(Qe,{htmlFor:"field-required",className:"cursor-pointer",children:"Required field"})]})]}),m.jsxs(qe,{onClick:T,className:"mt-4",size:"sm",children:[m.jsx(Po,{className:"mr-2 h-4 w-4"}),"Add Field"]})]})]})]})})]})}function LT(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}Array(12).fill(0);let T0=1;class BT{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:o,...c}=e,u=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:T0++,p=this.toasts.find(b=>b.id===u),x=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),p?this.toasts=this.toasts.map(b=>b.id===u?(this.publish({...b,...e,id:u,title:o}),{...b,...e,id:u,dismissible:x,title:o}):b):this.addToast({title:o,...c,dismissible:x,id:u}),u},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(o=>o({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let o;n.loading!==void 0&&(o=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const c=Promise.resolve(e instanceof Function?e():e);let u=o!==void 0,p;const x=c.then(async y=>{if(p=["resolve",y],Jt.isValidElement(y))u=!1,this.create({id:o,type:"default",message:y});else if(UT(y)&&!y.ok){u=!1;const _=typeof n.error=="function"?await n.error(`HTTP error! status: ${y.status}`):n.error,k=typeof n.description=="function"?await n.description(`HTTP error! status: ${y.status}`):n.description,D=typeof _=="object"&&!Jt.isValidElement(_)?_:{message:_};this.create({id:o,type:"error",description:k,...D})}else if(y instanceof Error){u=!1;const _=typeof n.error=="function"?await n.error(y):n.error,k=typeof n.description=="function"?await n.description(y):n.description,D=typeof _=="object"&&!Jt.isValidElement(_)?_:{message:_};this.create({id:o,type:"error",description:k,...D})}else if(n.success!==void 0){u=!1;const _=typeof n.success=="function"?await n.success(y):n.success,k=typeof n.description=="function"?await n.description(y):n.description,D=typeof _=="object"&&!Jt.isValidElement(_)?_:{message:_};this.create({id:o,type:"success",description:k,...D})}}).catch(async y=>{if(p=["reject",y],n.error!==void 0){u=!1;const A=typeof n.error=="function"?await n.error(y):n.error,_=typeof n.description=="function"?await n.description(y):n.description,T=typeof A=="object"&&!Jt.isValidElement(A)?A:{message:A};this.create({id:o,type:"error",description:_,...T})}}).finally(()=>{u&&(this.dismiss(o),o=void 0),n.finally==null||n.finally.call(n)}),b=()=>new Promise((y,A)=>x.then(()=>p[0]==="reject"?A(p[1]):y(p[1])).catch(A));return typeof o!="string"&&typeof o!="number"?{unwrap:b}:Object.assign(o,{unwrap:b})},this.custom=(e,n)=>{const o=n?.id||T0++;return this.create({jsx:e(o),id:o,...n}),o},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Zr=new BT,FT=(r,e)=>{const n=e?.id||T0++;return Zr.addToast({title:r,...e,id:n}),n},UT=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",zT=FT,VT=()=>Zr.toasts,WT=()=>Zr.getActiveToasts(),Lu=Object.assign(zT,{success:Zr.success,info:Zr.info,warning:Zr.warning,error:Zr.error,custom:Zr.custom,message:Zr.message,promise:Zr.promise,dismiss:Zr.dismiss,loading:Zr.loading},{getHistory:VT,getToasts:WT});LT("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function HT({eventId:r,accessToken:e}){const[n,o]=R.useState([]),[c,u]=R.useState([]),[p,x]=R.useState([]),[b,y]=R.useState({phone:!0,company:!0,position:!0,attendance:!0,registered:!0}),[A,_]=R.useState(!0),[k,T]=R.useState(""),[D,O]=R.useState(!1),[L,U]=R.useState(!1),[z,F]=R.useState(!1),[$,se]=R.useState(new Date),Y=R.useRef(null),[V,X]=R.useState({name:"",email:"",phone:"",company:"",position:"",customData:{}}),W=async()=>{_(!0);try{console.log("[LOCAL] Fetching participants from localStorage for event:",r);const ce=br(r);console.log("[LOCAL] Found participants:",ce.length),o(ce),u(ce),se(new Date);const ge=Br(r);ge?.customFields?x([...ge.customFields].sort((re,fe)=>re.order-fe.order)):x([]);const te=x1(r);y(te)}catch(ce){console.error("[LOCAL] Error fetching participants:",ce)}finally{_(!1)}};R.useEffect(()=>{W()},[r,e]),R.useEffect(()=>{const ce=re=>{console.log("[PARTICIPANT AUTO-REFRESH] Storage event detected:",re.key),re.key==="event_participants"&&(console.log("[PARTICIPANT AUTO-REFRESH] Participant data changed, refreshing..."),W())},ge=re=>{console.log("[PARTICIPANT AUTO-REFRESH] Custom participantsUpdated event detected:",re.detail),W()};window.addEventListener("storage",ce),window.addEventListener("participantsUpdated",ge);const te=setInterval(()=>{console.log("[PARTICIPANT AUTO-REFRESH] Polling for updates..."),W()},3e3);return()=>{window.removeEventListener("storage",ce),window.removeEventListener("participantsUpdated",ge),clearInterval(te)}},[r]),R.useEffect(()=>{const ce=n.filter(ge=>ge.name.toLowerCase().includes(k.toLowerCase())||ge.email.toLowerCase().includes(k.toLowerCase())||ge.company.toLowerCase().includes(k.toLowerCase())||ge.id.toLowerCase().includes(k.toLowerCase()));u(ce)},[k,n]);const ye=async ce=>{ce.preventDefault(),U(!0);try{console.log("[LOCAL] Adding participant:",V);const ge={id:m1(),eventId:r,name:V.name,email:V.email,phone:V.phone||"",company:V.company||"",position:V.position||"",registeredAt:new Date().toISOString(),attendance:[],customData:V.customData||{}};s2(ge),console.log("[LOCAL] Participant added successfully"),Lu.success("Participant added successfully!"),X({name:"",email:"",phone:"",company:"",position:"",customData:{}}),O(!1),await W(),window.dispatchEvent(new Event("participantsUpdated"))}catch(ge){console.error("[LOCAL] Error adding participant:",ge),Lu.error(ge.message||"Failed to add participant")}finally{U(!1)}},be=async ce=>{const ge=ce.target.files?.[0];if(ge){F(!0);try{const re=(await ge.text()).split(`
`).filter(Ae=>Ae.trim());if(re.length<2)throw new Error("CSV file is empty or invalid");const fe=re[0].split(",").map(Ae=>Ae.trim().replace(/"/g,"").toLowerCase()),K=[];for(let Ae=1;Ae<re.length;Ae++){const Te=re[Ae].split(",").map(ee=>ee.trim().replace(/"/g,"")),Fe={};fe.forEach((ee,pe)=>{ee==="name"?Fe.name=Te[pe]:ee==="email"?Fe.email=Te[pe]:ee==="phone"?Fe.phone=Te[pe]:ee==="company"?Fe.company=Te[pe]:ee==="position"&&(Fe.position=Te[pe])}),Fe.name&&Fe.email&&K.push(Fe)}if(K.length===0)throw new Error("No valid participants found in CSV");console.log("[LOCAL] Bulk importing participants:",K.length);const ue=DT(K,r);alert(`Successfully imported ${ue.imported} participants. ${ue.failed} failed.`),await W()}catch(te){console.error("[LOCAL] Error importing CSV:",te),alert(te.message||"Failed to import CSV")}finally{F(!1),Y.current&&(Y.current.value="")}}},de=async ce=>{if(confirm("Are you sure you want to delete this participant?"))try{console.log("[LOCAL] Deleting participant:",ce),TT(ce),await W()}catch(ge){console.error("[LOCAL] Error deleting participant:",ge),alert("Failed to delete participant")}},ve=()=>{const ce=["ID","Name","Email","Phone","Company","Position"];p.forEach(ue=>ce.push(ue.label)),ce.push("Attendance Count","Registered At");const ge=n.map(ue=>{const Ae=[ue.id,ue.name,ue.email,ue.phone||"",ue.company||"",ue.position||""];return p.forEach(Te=>{Ae.push(ue.customData?.[Te.id]||"")}),Ae.push((ue.attendance||[]).length.toString()),Ae.push(new Date(ue.registeredAt).toLocaleString()),Ae}),te=[ce.join(","),...ge.map(ue=>ue.map(Ae=>`"${Ae}"`).join(","))].join(`
`),re=new Blob([te],{type:"text/csv"}),fe=window.URL.createObjectURL(re),K=document.createElement("a");K.href=fe,K.download=`participants-${new Date().toISOString().split("T")[0]}.csv`,K.click(),window.URL.revokeObjectURL(fe)},Ce=()=>{const ce=`Name,Email,Phone,Company,Position
"John Doe","john@example.com","+1234567890","Acme Inc","Manager"`,ge=new Blob([ce],{type:"text/csv"}),te=window.URL.createObjectURL(ge),re=document.createElement("a");re.href=te,re.download="participant-template.csv",re.click(),window.URL.revokeObjectURL(te)},ie=()=>{const ce=`${window.location.origin}${window.location.pathname}?register=${r}`;navigator.clipboard.writeText(ce).then(()=>{Lu.success("Registration URL copied to clipboard!")}).catch(()=>{Lu.error("Failed to copy URL")})};return A?m.jsx("div",{className:"flex items-center justify-center p-8",children:m.jsx(Fi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):m.jsxs(wi,{className:"border-0 shadow-xl bg-white",children:[m.jsx(Vs,{className:"border-b border-gray-100 bg-gradient-to-r from-purple-50 to-pink-50",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsxs(Ws,{className:"flex items-center gap-3 text-2xl",children:[m.jsx("div",{className:"w-10 h-10 gradient-primary rounded-xl flex items-center justify-center shadow-md shadow-purple-500/30",children:m.jsx(Xu,{className:"h-5 w-5 text-white"})}),"Participants Management"]}),m.jsxs(Wa,{className:"flex items-center gap-3 mt-2 text-base",children:[m.jsxs("span",{className:"bg-white px-3 py-1 rounded-full border border-purple-200",children:["Total: ",m.jsx("span",{className:"font-semibold text-purple-700",children:n.length})]}),m.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[m.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Auto-sync  Updated ",$.toLocaleTimeString()]})]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsxs(qe,{onClick:ie,variant:"outline",size:"sm",className:"border-purple-300 hover:border-purple-500 hover:bg-purple-50",children:[m.jsx(zE,{className:"mr-2 h-4 w-4"}),"Copy Registration URL"]}),m.jsx(MT,{eventId:r,onFieldsUpdated:W}),m.jsx("input",{type:"file",ref:Y,accept:".csv",onChange:be,className:"hidden"}),m.jsx(qe,{onClick:()=>Y.current?.click(),variant:"outline",size:"sm",disabled:z,className:"border-gray-300 hover:border-gray-400",children:z?m.jsxs(m.Fragment,{children:[m.jsx(Fi,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):m.jsxs(m.Fragment,{children:[m.jsx(hd,{className:"mr-2 h-4 w-4"}),"Import CSV"]})}),m.jsxs(qe,{onClick:ve,variant:"outline",size:"sm",className:"border-gray-300 hover:border-gray-400",children:[m.jsx(iw,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),m.jsxs(Jr,{open:D,onOpenChange:O,children:[m.jsx(Zy,{asChild:!0,children:m.jsxs(qe,{className:"gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:[m.jsx(Po,{className:"mr-2 h-4 w-4"}),"Add Participant"]})}),m.jsxs(ei,{children:[m.jsxs(yi,{children:[m.jsx(vi,{children:"Add Participant Manually"}),m.jsx(tc,{children:"Enter participant details to add them to the event"})]}),m.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"add-name",children:"Full Name *"}),m.jsx(ut,{id:"add-name",placeholder:"John Doe",value:V.name,onChange:ce=>X(ge=>({...ge,name:ce.target.value})),required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"add-email",children:"Email *"}),m.jsx(ut,{id:"add-email",type:"email",placeholder:"john@example.com",value:V.email,onChange:ce=>X(ge=>({...ge,email:ce.target.value})),required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"add-phone",children:"Phone"}),m.jsx(ut,{id:"add-phone",placeholder:"+1 (555) 000-0000",value:V.phone,onChange:ce=>X(ge=>({...ge,phone:ce.target.value}))})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"add-company",children:"Company"}),m.jsx(ut,{id:"add-company",placeholder:"Acme Inc.",value:V.company,onChange:ce=>X(ge=>({...ge,company:ce.target.value}))})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"add-position",children:"Position"}),m.jsx(ut,{id:"add-position",placeholder:"Software Engineer",value:V.position,onChange:ce=>X(ge=>({...ge,position:ce.target.value}))})]}),m.jsx(qe,{type:"submit",className:"w-full",disabled:L,children:L?m.jsxs(m.Fragment,{children:[m.jsx(Fi,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):"Add Participant"})]})]})]})]})]})}),m.jsxs(Bi,{className:"pt-6",children:[m.jsxs("div",{className:"mb-6 flex gap-3",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx(cw,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx(ut,{placeholder:"Search by name, email, company, or ID...",value:k,onChange:ce=>T(ce.target.value),className:"pl-12 h-12 bg-gray-50 border-gray-200 focus:bg-white focus:border-purple-300 transition-colors"})]}),m.jsx(qe,{onClick:Ce,variant:"outline",size:"sm",className:"border-gray-300 hover:border-gray-400",children:"Download Template"})]}),m.jsx("div",{className:"rounded-xl border border-gray-200 overflow-hidden bg-white shadow-sm",children:m.jsxs(jo,{children:[m.jsx(Do,{children:m.jsxs(ur,{children:[m.jsx(kt,{children:"ID"}),m.jsx(kt,{children:"Name"}),m.jsx(kt,{children:"Email"}),b.phone&&m.jsx(kt,{children:"Phone"}),b.company&&m.jsx(kt,{children:"Company"}),b.position&&m.jsx(kt,{children:"Position"}),p.map(ce=>m.jsx(kt,{children:ce.label},ce.id)),b.attendance&&m.jsx(kt,{children:"Attendance"}),b.registered&&m.jsx(kt,{children:"Registered"}),m.jsx(kt,{className:"text-right",children:"Actions"})]})}),m.jsx(Mo,{children:c.length===0?m.jsx(ur,{children:m.jsx(Nt,{colSpan:3+(b.phone?1:0)+(b.company?1:0)+(b.position?1:0)+p.length+(b.attendance?1:0)+(b.registered?1:0)+1,className:"text-center text-muted-foreground",children:"No participants found"})}):c.map(ce=>m.jsxs(ur,{children:[m.jsx(Nt,{className:"font-mono text-sm",children:ce.id}),m.jsx(Nt,{children:ce.name}),m.jsx(Nt,{children:ce.email}),b.phone&&m.jsx(Nt,{children:ce.phone||"-"}),b.company&&m.jsx(Nt,{children:ce.company||"-"}),b.position&&m.jsx(Nt,{children:ce.position||"-"}),p.map(ge=>m.jsx(Nt,{children:ce.customData?.[ge.id]||"-"},ge.id)),b.attendance&&m.jsx(Nt,{children:m.jsxs(JN,{variant:"secondary",children:[(ce.attendance||[]).length," sessions"]})}),b.registered&&m.jsx(Nt,{className:"text-sm text-muted-foreground",children:new Date(ce.registeredAt).toLocaleDateString()}),m.jsx(Nt,{className:"text-right",children:m.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>de(ce.id),children:m.jsx(oc,{className:"h-4 w-4 text-destructive"})})})]},ce.id))})]})})]})]})}function ic({className:r,...e}){return m.jsx("textarea",{"data-slot":"textarea",className:yt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...e})}function $T({eventId:r,accessToken:e}){const[n,o]=R.useState([]),[c,u]=R.useState([]),[p,x]=R.useState(!0),[b,y]=R.useState(!1),[A,_]=R.useState(!1),[k,T]=R.useState(null),[D,O]=R.useState(null),[L,U]=R.useState(null),[z,F]=R.useState(new Date),[$,se]=R.useState({right:0}),Y=R.useRef(null),V=R.useRef({}),[X,W]=R.useState({title:"",description:"",startTime:"",endTime:"",location:""});R.useEffect(()=>{const re=fe=>{Y.current&&!Y.current.contains(fe.target)&&U(null)};return document.addEventListener("mousedown",re),()=>document.removeEventListener("mousedown",re)},[]);const ye=R.useCallback(re=>{const fe=re.getBoundingClientRect(),K=window.innerHeight,ue=window.innerWidth,Ae=K-fe.bottom,Te=fe.top,Fe=150,ee={right:ue-fe.right};Ae<Fe&&Te>Ae?ee.bottom=K-fe.top+4:ee.top=fe.bottom+4,se(ee)},[]),be=async()=>{x(!0);try{console.log("[LOCAL] Fetching agenda from localStorage for event:",r);const re=us(r);o(re)}catch(re){console.error("[LOCAL] Error fetching agenda:",re)}finally{x(!1)}},de=async()=>{try{console.log("[LOCAL] Fetching participants from localStorage for event:",r);const re=br(r);u(re),F(new Date)}catch(re){console.error("[LOCAL] Error fetching participants:",re)}};R.useEffect(()=>{be(),de()},[r,e]),R.useEffect(()=>{const re=ue=>{console.log("[AGENDA AUTO-REFRESH] Storage event detected:",ue.key),ue.key==="event_participants"&&(console.log("[AGENDA AUTO-REFRESH] Participant data changed, refreshing..."),de()),ue.key==="event_agenda"&&(console.log("[AGENDA AUTO-REFRESH] Agenda data changed, refreshing..."),be())},fe=ue=>{console.log("[AGENDA AUTO-REFRESH] Custom participantsUpdated event detected:",ue.detail),de()};window.addEventListener("storage",re),window.addEventListener("participantsUpdated",fe);const K=setInterval(()=>{console.log("[AGENDA AUTO-REFRESH] Polling for participant updates..."),de()},3e3);return()=>{window.removeEventListener("storage",re),window.removeEventListener("participantsUpdated",fe),clearInterval(K)}},[r]);const ve=async re=>{re.preventDefault(),_(!0);try{if(console.log("[LOCAL] Saving agenda item:",X),D)PT(D.id,X);else{const fe={id:xT(),eventId:r,title:X.title,description:X.description,startTime:X.startTime,endTime:X.endTime,location:X.location,createdAt:new Date().toISOString()};OT(fe)}W({title:"",description:"",startTime:"",endTime:"",location:""}),O(null),y(!1),await be()}catch(fe){console.error("[LOCAL] Error saving agenda item:",fe),alert(D?"Failed to update agenda item":"Failed to create agenda item")}finally{_(!1)}},Ce=re=>{O(re),W({title:re.title,description:re.description,startTime:re.startTime,endTime:re.endTime,location:re.location}),y(!0)},ie=re=>{y(re),re||(O(null),W({title:"",description:"",startTime:"",endTime:"",location:""}))},ce=async re=>{if(confirm("Are you sure you want to delete this agenda item?"))try{console.log("[LOCAL] Deleting agenda item:",re),jT(re),await be()}catch(fe){console.error("Error deleting agenda item:",fe),alert("Failed to delete agenda item")}},ge=re=>re?new Date(re).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",te=re=>c.filter(fe=>fe.attendance&&fe.attendance.some(K=>K.agendaItem===re));return p?m.jsx("div",{className:"flex items-center justify-center p-8",children:m.jsx(Fi,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):m.jsxs(wi,{className:"border-0 shadow-xl bg-white",children:[m.jsx(Vs,{className:"border-b border-gray-100 bg-gradient-to-r from-purple-50 to-pink-50",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsxs(Ws,{className:"flex items-center gap-3 text-2xl",children:[m.jsx("div",{className:"w-10 h-10 gradient-primary rounded-xl flex items-center justify-center shadow-md shadow-purple-500/30",children:m.jsx(Zl,{className:"h-5 w-5 text-white"})}),"Event Agenda"]}),m.jsxs(Wa,{className:"flex items-center gap-3 mt-2 text-base",children:[m.jsx("span",{children:"Manage event schedule and sessions"}),m.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[m.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Auto-sync  Updated ",z.toLocaleTimeString()]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(qe,{variant:"outline",className:"border-gray-300 hover:border-gray-400",size:"sm",onClick:()=>{be(),de()},children:[m.jsx(oS,{className:"mr-2 h-4 w-4"}),"Refresh"]}),m.jsxs(Jr,{open:b,onOpenChange:ie,children:[m.jsx(Zy,{asChild:!0,children:m.jsxs(qe,{className:"gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:[m.jsx(Po,{className:"mr-2 h-4 w-4"}),"Add Session"]})}),m.jsxs(ei,{children:[m.jsxs(yi,{children:[m.jsx(vi,{children:D?"Edit Agenda Item":"Create Agenda Item"}),m.jsx(tc,{children:D?"Update the session details":"Add a new session or activity to the event schedule"})]}),m.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"title",children:"Session Title *"}),m.jsx(ut,{id:"title",placeholder:"Opening Ceremony",value:X.title,onChange:re=>W(fe=>({...fe,title:re.target.value})),required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"description",children:"Description"}),m.jsx(ic,{id:"description",placeholder:"Describe the session...",value:X.description,onChange:re=>W(fe=>({...fe,description:re.target.value})),rows:3})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"startTime",children:"Start Time *"}),m.jsx(ut,{id:"startTime",type:"datetime-local",value:X.startTime,onChange:re=>W(fe=>({...fe,startTime:re.target.value})),required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"endTime",children:"End Time"}),m.jsx(ut,{id:"endTime",type:"datetime-local",value:X.endTime,onChange:re=>W(fe=>({...fe,endTime:re.target.value}))})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"location",children:"Location"}),m.jsx(ut,{id:"location",placeholder:"Main Hall",value:X.location,onChange:re=>W(fe=>({...fe,location:re.target.value}))})]}),m.jsx(qe,{type:"submit",className:"w-full",disabled:A,children:A?m.jsxs(m.Fragment,{children:[m.jsx(Fi,{className:"mr-2 h-4 w-4 animate-spin"}),D?"Updating...":"Creating..."]}):D?"Update Session":"Create Session"})]})]})]})]})]})}),m.jsxs(Bi,{className:"overflow-visible",children:[n.length===0?m.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[m.jsx(Zl,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"No agenda items yet"}),m.jsx("p",{className:"text-sm",children:'Click "Add Session" to create the event schedule'})]}):m.jsx("div",{className:"rounded-md border overflow-visible",children:m.jsxs(jo,{children:[m.jsx(Do,{children:m.jsxs(ur,{children:[m.jsx(kt,{children:"Session"}),m.jsx(kt,{children:"Start Time"}),m.jsx(kt,{children:"End Time"}),m.jsx(kt,{children:"Location"}),m.jsx(kt,{className:"text-right",children:"Actions"})]})}),m.jsx(Mo,{children:n.sort((re,fe)=>new Date(re.startTime).getTime()-new Date(fe.startTime).getTime()).map(re=>m.jsxs(ur,{children:[m.jsx(Nt,{children:m.jsxs("div",{children:[m.jsx("div",{children:re.title}),re.description&&m.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:re.description})]})}),m.jsx(Nt,{children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(nw,{className:"h-4 w-4 text-muted-foreground"}),m.jsx("span",{className:"text-sm",children:ge(re.startTime)})]})}),m.jsx(Nt,{children:m.jsx("span",{className:"text-sm",children:ge(re.endTime)})}),m.jsx(Nt,{children:re.location?m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(F0,{className:"h-4 w-4 text-muted-foreground"}),m.jsx("span",{className:"text-sm",children:re.location})]}):m.jsx("span",{className:"text-muted-foreground",children:"-"})}),m.jsx(Nt,{className:"text-right",children:m.jsxs("div",{className:"flex gap-1 justify-end items-center",children:[m.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>T(re.title),title:"View Participants",children:m.jsx(Xu,{className:"h-4 w-4"})}),m.jsx("div",{className:"relative",children:m.jsx(qe,{ref:fe=>{V.current[re.id]=fe},variant:"ghost",size:"sm",title:"More options",onClick:fe=>{const K=L!==re.id;U(K?re.id:null),K&&fe.currentTarget&&ye(fe.currentTarget)},children:m.jsx(kE,{className:"h-4 w-4"})})})]})})]},re.id))})]})}),L&&m.jsx("div",{ref:Y,className:"fixed w-48 bg-popover border rounded-md shadow-xl p-1",style:{top:$.top,bottom:$.bottom,right:$.right,zIndex:9999,maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:n.find(re=>re.id===L)&&(()=>{const re=n.find(fe=>fe.id===L);return m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>{const fe=`${window.location.origin}${window.location.pathname}?checkin=${re.id}`;window.open(fe,"_blank"),U(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-accent hover:text-accent-foreground outline-none cursor-pointer text-left",children:[m.jsx($E,{className:"h-4 w-4"}),"Open Check-In Page"]}),m.jsxs("button",{onClick:()=>{Ce(re),U(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-accent hover:text-accent-foreground outline-none cursor-pointer text-left",children:[m.jsx(uw,{className:"h-4 w-4"}),"Modify"]}),m.jsxs("button",{onClick:()=>{ce(re.id),U(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-destructive/10 text-destructive outline-none cursor-pointer text-left",children:[m.jsx(oc,{className:"h-4 w-4"}),"Delete"]})]})})()}),m.jsx(Jr,{open:!!k,onOpenChange:re=>!re&&T(null),children:m.jsxs(ei,{className:"max-w-2xl",children:[m.jsxs(yi,{children:[m.jsxs(vi,{children:["Participants for: ",k]}),m.jsxs(tc,{children:[k&&te(k).length," attendees"]})]}),m.jsx("div",{className:"max-h-96 overflow-y-auto",children:k&&te(k).length===0?m.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[m.jsx(Xu,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),m.jsx("p",{children:"No participants yet for this session"})]}):m.jsxs(jo,{children:[m.jsx(Do,{children:m.jsxs(ur,{children:[m.jsx(kt,{children:"Name"}),m.jsx(kt,{children:"Email"}),m.jsx(kt,{children:"Company"}),m.jsx(kt,{children:"Position"}),m.jsx(kt,{children:"Check-in Time"})]})}),m.jsx(Mo,{children:k&&te(k).map(re=>{const fe=re.attendance.find(K=>K.agendaItem===k);return m.jsxs(ur,{children:[m.jsx(Nt,{children:re.name}),m.jsx(Nt,{children:re.email}),m.jsx(Nt,{children:re.company||"-"}),m.jsx(Nt,{children:re.position||"-"}),m.jsx(Nt,{className:"text-sm text-muted-foreground",children:fe&&new Date(fe.timestamp).toLocaleTimeString()})]},re.id)})})]})})]})})]})]})}function GT({eventId:r,onUpdated:e}){const[n,o]=R.useState({logoAlignment:"center",logoSize:"medium",primaryColor:"#000000",backgroundColor:"#ffffff",fontFamily:"sans-serif"}),[c,u]=R.useState(!1),[p,x]=R.useState(!1),b=R.useRef(null);R.useEffect(()=>{y()},[r]);const y=()=>{const D=w1(r);o(D)},A=D=>{const O=D.target.files?.[0];if(!O)return;if(!O.type.startsWith("image/")){alert("Please upload an image file (PNG, JPG, etc.)");return}if(O.size>2*1024*1024){alert("Image size should be less than 2MB");return}const L=new FileReader;L.onload=U=>{const z=U.target?.result;o(F=>({...F,logoUrl:z}))},L.readAsDataURL(O)},_=()=>{o(D=>({...D,logoUrl:void 0})),b.current&&(b.current.value="")},k=()=>{u(!0);try{AT(r,n),alert("Branding settings saved successfully!"),e?.()}catch(D){console.error("Error saving branding:",D),alert("Failed to save branding settings")}finally{u(!1)}},T=()=>`${window.location.origin}${window.location.pathname}#/register/${r}`;return m.jsxs("div",{className:"space-y-6",children:[m.jsxs(wi,{children:[m.jsx(Vs,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsxs(Ws,{className:"flex items-center gap-2",children:[m.jsx(ow,{className:"h-5 w-5"}),"Registration Page Branding"]}),m.jsx(Wa,{children:"Customize the look and feel of your public registration form"})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>x(!p),children:[m.jsx(PE,{className:"mr-2 h-4 w-4"}),p?"Hide Preview":"Show Preview"]}),m.jsxs(qe,{size:"sm",onClick:k,disabled:c,children:[m.jsx(lw,{className:"mr-2 h-4 w-4"}),c?"Saving...":"Save Changes"]})]})]})}),m.jsxs(Bi,{className:"space-y-6",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsx(Qe,{children:"Event Logo"}),m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:A,className:"hidden",id:"logo-upload"}),m.jsxs(qe,{variant:"outline",onClick:()=>b.current?.click(),className:"w-full",children:[m.jsx(hd,{className:"mr-2 h-4 w-4"}),n.logoUrl?"Change Logo":"Upload Logo"]}),m.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"PNG, JPG up to 2MB. Recommended size: 400x150px"})]}),n.logoUrl&&m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:n.logoUrl,alt:"Logo preview",className:"h-20 w-auto object-contain border rounded"}),m.jsx(qe,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6",onClick:_,children:m.jsx(fd,{className:"h-3 w-3"})})]})]})]}),n.logoUrl&&m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{children:"Logo Size"}),m.jsxs(Ma,{value:n.logoSize,onValueChange:D=>o(O=>({...O,logoSize:D})),children:[m.jsx(Ba,{children:m.jsx(La,{})}),m.jsxs(Fa,{children:[m.jsx(hn,{value:"small",children:"Small"}),m.jsx(hn,{value:"medium",children:"Medium"}),m.jsx(hn,{value:"large",children:"Large"})]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{children:"Logo Alignment"}),m.jsxs(Ma,{value:n.logoAlignment,onValueChange:D=>o(O=>({...O,logoAlignment:D})),children:[m.jsx(Ba,{children:m.jsx(La,{})}),m.jsxs(Fa,{children:[m.jsx(hn,{value:"left",children:"Left"}),m.jsx(hn,{value:"center",children:"Center"}),m.jsx(hn,{value:"right",children:"Right"})]})]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"customHeader",children:"Custom Header Text"}),m.jsx(ic,{id:"customHeader",placeholder:"e.g., 'Join us for the 2025 Annual Summit'",value:n.customHeader||"",onChange:D=>o(O=>({...O,customHeader:D.target.value})),rows:2}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional tagline displayed below the logo"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"primaryColor",children:"Primary Color"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ut,{id:"primaryColor",type:"color",value:n.primaryColor,onChange:D=>o(O=>({...O,primaryColor:D.target.value})),className:"w-20 h-10 p-1 cursor-pointer"}),m.jsx(ut,{type:"text",value:n.primaryColor,onChange:D=>o(O=>({...O,primaryColor:D.target.value})),placeholder:"#000000",className:"flex-1"})]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for buttons and accents"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{htmlFor:"backgroundColor",children:"Background Color"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ut,{id:"backgroundColor",type:"color",value:n.backgroundColor,onChange:D=>o(O=>({...O,backgroundColor:D.target.value})),className:"w-20 h-10 p-1 cursor-pointer"}),m.jsx(ut,{type:"text",value:n.backgroundColor,onChange:D=>o(O=>({...O,backgroundColor:D.target.value})),placeholder:"#ffffff",className:"flex-1"})]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Page background color"})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{children:"Font Family"}),m.jsxs(Ma,{value:n.fontFamily,onValueChange:D=>o(O=>({...O,fontFamily:D})),children:[m.jsx(Ba,{children:m.jsx(La,{})}),m.jsxs(Fa,{children:[m.jsx(hn,{value:"sans-serif",children:"Sans-Serif (Default)"}),m.jsx(hn,{value:"serif",children:"Serif"}),m.jsx(hn,{value:"monospace",children:"Monospace"})]})]})]}),m.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[m.jsx(Qe,{children:"Registration URL"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ut,{value:T(),readOnly:!0,className:"flex-1"}),m.jsx(qe,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(T()),alert("Registration URL copied to clipboard!")},children:"Copy"})]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Share this URL for public registration with your custom branding"})]})]})]}),p&&m.jsxs(wi,{children:[m.jsxs(Vs,{children:[m.jsx(Ws,{children:"Live Preview"}),m.jsx(Wa,{children:"This is how your registration form will appear to participants"})]}),m.jsx(Bi,{children:m.jsx("div",{className:"border-2 rounded-lg p-8",style:{backgroundColor:n.backgroundColor},children:m.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[n.logoUrl&&m.jsx("div",{className:`flex ${n.logoAlignment==="left"?"justify-start":n.logoAlignment==="right"?"justify-end":"justify-center"}`,children:m.jsx("img",{src:n.logoUrl,alt:"Logo",className:`object-contain ${n.logoSize==="small"?"h-12":n.logoSize==="large"?"h-24":"h-16"}`})}),n.customHeader&&m.jsx("p",{className:"text-center text-lg",style:{color:n.primaryColor},children:n.customHeader}),m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl mb-2",children:"Event Name"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Sample event information"})]}),m.jsxs("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[m.jsx(ut,{placeholder:"Full Name *",disabled:!0}),m.jsx(ut,{placeholder:"Email Address *",disabled:!0}),m.jsx(qe,{className:"w-full",disabled:!0,style:{backgroundColor:n.primaryColor,borderColor:n.primaryColor},children:"Complete Registration"})]})]})})})]})]})}function qT({eventId:r,accessToken:e,onLogout:n,onBackToEvents:o}){const[c,u]=R.useState(null);R.useEffect(()=>{const b=Br(r);u(b)},[r]);const p=async()=>{await ti.auth.signOut(),od(),n()},x=()=>{od(),o()};return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50",children:[m.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:m.jsx("div",{className:"container mx-auto px-6 py-5",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs(qe,{onClick:x,variant:"ghost",size:"sm",className:"hover:bg-purple-100 hover:text-purple-700",children:[m.jsx(ew,{className:"mr-2 h-4 w-4"}),"Back to Events"]}),m.jsxs("div",{className:"border-l border-gray-300 pl-4",children:[m.jsx("h1",{className:"text-2xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:c?.name||"Event Management Dashboard"}),m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage registrations, attendance, and event schedule"})]})]}),m.jsxs(qe,{onClick:p,variant:"outline",className:"border-gray-300 hover:border-gray-400",children:[m.jsx(sw,{className:"mr-2 h-4 w-4"}),"Logout"]})]})})}),m.jsx("main",{className:"container mx-auto px-6 py-8",children:m.jsxs(__,{defaultValue:"participants",className:"space-y-8",children:[m.jsxs(N_,{className:"flex w-full max-w-3xl mx-auto gap-2 bg-white/80 backdrop-blur-sm p-2 rounded-2xl shadow-md border border-gray-200 h-14",children:[m.jsxs(bf,{value:"participants",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[m.jsx(Xu,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Participants"})]}),m.jsxs(bf,{value:"agenda",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[m.jsx(Zl,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Agenda"})]}),m.jsxs(bf,{value:"branding",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[m.jsx(ow,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Branding"})]})]}),m.jsx(Cf,{value:"participants",children:m.jsx(HT,{eventId:r,accessToken:e})}),m.jsx(Cf,{value:"agenda",children:m.jsx($T,{eventId:r,accessToken:e})}),m.jsx(Cf,{value:"branding",children:m.jsx(GT,{eventId:r})})]})})]})}async function XT(){try{const{data:r,error:e}=await ti.from("events").select("*").order("createdAt",{ascending:!1});if(e)throw e;return r||[]}catch(r){return console.error("Error fetching events:",r),[]}}async function YT(r){try{const{data:e,error:n}=await ti.from("events").select("*").eq("id",r).single();if(n){if(n.code==="PGRST116")return null;throw n}return e}catch(e){return console.error("Error fetching event:",e),null}}async function KT(r,e){try{const{data:n,error:o}=await ti.from("participants").select("*").eq("id",r).eq("eventId",e).single();if(o){if(o.code==="PGRST116")return null;throw o}return n}catch(n){return console.error("Error fetching participant:",n),null}}async function ZT(r){try{const{data:e,error:n}=await ti.from("agenda_items").select("*").eq("id",r).single();if(n){if(n.code==="PGRST116")return null;throw n}return e}catch(e){return console.error("Error fetching agenda item:",e),null}}async function QT(){try{const{error:r}=await ti.from("events").select("count").limit(1);return!r}catch(r){return console.error("Supabase setup check failed:",r),!1}}async function JT(){const r={success:!1,eventsCreated:0,participantsCreated:0,agendaItemsCreated:0,errors:[]};try{if(!await QT())return r.errors.push("Supabase tables not set up. Please run the migration SQL first."),r;const n=Lr();if(n.length===0)return r.errors.push("No events found in localStorage to migrate."),r;console.log(`[MIGRATION] Found ${n.length} events to migrate...`);for(const o of n)try{await YT(o.id)?console.log(`[MIGRATION] Event already exists: ${o.name}`):(await ti.from("events").insert([o]),r.eventsCreated++,console.log(`[MIGRATION] Migrated event: ${o.name}`));const u=(void 0)(o.id);for(const x of u)try{await KT(x.id,o.id)||(await ti.from("participants").insert([x]),r.participantsCreated++)}catch(b){r.errors.push(`Failed to migrate participant ${x.name}: ${b.message}`)}const p=(void 0)(o.id);for(const x of p)try{await ZT(x.id)||(await ti.from("agenda_items").insert([x]),r.agendaItemsCreated++)}catch(b){r.errors.push(`Failed to migrate agenda item ${x.title}: ${b.message}`)}}catch(c){r.errors.push(`Failed to migrate event ${o.name}: ${c.message}`)}r.success=r.eventsCreated>0||r.participantsCreated>0||r.agendaItemsCreated>0,console.log("[MIGRATION] Migration complete:",r)}catch(e){r.errors.push(`Migration failed: ${e.message}`),console.error("[MIGRATION] Error:",e)}return r}function e8(){const r=Lr(),e=[],n=[];r.forEach(c=>{const u=(void 0)(c.id),p=(void 0)(c.id);e.push(...u),n.push(...p)});const o={exportedAt:new Date().toISOString(),events:r,participants:e,agendaItems:n};return JSON.stringify(o,null,2)}function t8(){const r=e8(),e=new Blob([r],{type:"application/json"}),n=URL.createObjectURL(e),o=document.createElement("a");o.href=n,o.download=`event-registration-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}function n8(){return Lr().length>0}async function r8(){try{return(await XT()).length>0}catch{return!1}}function i8({onMigrateClick:r}){const[e,n]=R.useState(!1),[o,c]=R.useState(!1),[u,p]=R.useState(!1),[x,b]=R.useState(!0);R.useEffect(()=>{y()},[]);const y=async()=>{try{const _=n8(),k=await r8();n(_),c(k);const T=localStorage.getItem("migration_notice_dismissed");p(T==="true")}catch(_){console.error("Error checking data status:",_)}finally{b(!1)}},A=()=>{localStorage.setItem("migration_notice_dismissed","true"),p(!0)};return x||!e||o&&!e||u?null:m.jsxs(Ra,{className:"border-yellow-300 bg-yellow-50 relative",children:[m.jsx(dw,{className:"h-5 w-5 text-yellow-600"}),m.jsx("button",{onClick:A,className:"absolute top-3 right-3 text-yellow-600 hover:text-yellow-800 transition-colors","aria-label":"Dismiss notice",children:m.jsx(fd,{className:"h-4 w-4"})}),m.jsx(YC,{className:"text-yellow-900",children:"Action Required: Migrate to Cloud Database"}),m.jsxs(ka,{className:"text-yellow-800 space-y-3",children:[m.jsx("p",{children:"Your data is currently stored only in this browser. This prevents:"}),m.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2 text-sm",children:[m.jsx("li",{children:"Public registration links from working on other devices"}),m.jsx("li",{children:"Check-in pages from functioning independently"}),m.jsx("li",{children:"Managing events from multiple devices"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[m.jsxs(qe,{onClick:r,size:"sm",className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:[m.jsx(rw,{className:"mr-2 h-4 w-4"}),"Migrate Now"]}),m.jsx(qe,{onClick:A,variant:"outline",size:"sm",className:"border-yellow-600 text-yellow-700 hover:bg-yellow-100",children:"Dismiss"})]}),m.jsxs("p",{className:"text-xs mt-2",children:[m.jsx("strong",{children:"Important:"})," This is required for registration and check-in links to work on different devices."]})]})]})}function s8(r,e=[]){let n=[];function o(u,p){const x=R.createContext(p);x.displayName=u+"Context";const b=n.length;n=[...n,p];const y=_=>{const{scope:k,children:T,...D}=_,O=k?.[r]?.[b]||x,L=R.useMemo(()=>D,Object.values(D));return m.jsx(O.Provider,{value:L,children:T})};y.displayName=u+"Provider";function A(_,k){const T=k?.[r]?.[b]||x,D=R.useContext(T);if(D)return D;if(p!==void 0)return p;throw new Error(`\`${_}\` must be used within \`${u}\``)}return[y,A]}const c=()=>{const u=n.map(p=>R.createContext(p));return function(x){const b=x?.[r]||u;return R.useMemo(()=>({[`__scope${r}`]:{...x,[r]:b}}),[x,b])}};return c.scopeName=r,[o,o8(c,...e)]}function o8(...r){const e=r[0];if(r.length===1)return e;const n=()=>{const o=r.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(u){const p=o.reduce((x,{useScope:b,scopeName:y})=>{const _=b(u)[`__scope${y}`];return{...x,..._}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:p}),[p])}};return n.scopeName=e.scopeName,n}var a8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],o2=a8.reduce((r,e)=>{const n=D0(`Primitive.${e}`),o=R.forwardRef((c,u)=>{const{asChild:p,...x}=c,b=p?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(b,{...x,ref:u})});return o.displayName=`Primitive.${e}`,{...r,[e]:o}},{}),v1="Progress",b1=100,[l8]=s8(v1),[c8,u8]=l8(v1),a2=R.forwardRef((r,e)=>{const{__scopeProgress:n,value:o=null,max:c,getValueLabel:u=d8,...p}=r;(c||c===0)&&!Wm(c)&&console.error(h8(`${c}`,"Progress"));const x=Wm(c)?c:b1;o!==null&&!Hm(o,x)&&console.error(f8(`${o}`,"Progress"));const b=Hm(o,x)?o:null,y=ad(b)?u(b,x):void 0;return m.jsx(c8,{scope:n,value:b,max:x,children:m.jsx(o2.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":ad(b)?b:void 0,"aria-valuetext":y,role:"progressbar","data-state":u2(b,x),"data-value":b??void 0,"data-max":x,...p,ref:e})})});a2.displayName=v1;var l2="ProgressIndicator",c2=R.forwardRef((r,e)=>{const{__scopeProgress:n,...o}=r,c=u8(l2,n);return m.jsx(o2.div,{"data-state":u2(c.value,c.max),"data-value":c.value??void 0,"data-max":c.max,...o,ref:e})});c2.displayName=l2;function d8(r,e){return`${Math.round(r/e*100)}%`}function u2(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function ad(r){return typeof r=="number"}function Wm(r){return ad(r)&&!isNaN(r)&&r>0}function Hm(r,e){return ad(r)&&!isNaN(r)&&r<=e&&r>=0}function h8(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${b1}\`.`}function f8(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${b1} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var g8=a2,p8=c2;function m8({className:r,value:e,...n}){return m.jsx(g8,{"data-slot":"progress",className:yt("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...n,children:m.jsx(p8,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function x8({open:r,onOpenChange:e}){const[n,o]=R.useState(!1),[c,u]=R.useState(!1),[p,x]=R.useState(null),[b,y]=R.useState(0),A=async()=>{o(!0),y(0);try{const T=setInterval(()=>{y(O=>Math.min(O+10,90))},200),D=await JT();clearInterval(T),y(100),x(D),u(!0)}catch(T){console.error("Migration error:",T),x({success:!1,eventsCreated:0,participantsCreated:0,agendaItemsCreated:0,errors:[T.message||"Unknown error occurred"]}),u(!0)}finally{o(!1)}},_=()=>{t8()},k=()=>{c&&p?.success&&window.location.reload(),e(!1)};return m.jsx(Jr,{open:r,onOpenChange:e,children:m.jsxs(ei,{className:"sm:max-w-[600px]",children:[m.jsxs(yi,{children:[m.jsxs(vi,{className:"flex items-center gap-2",children:[m.jsx(rw,{className:"h-5 w-5"}),"Migrate to Cloud Database"]}),m.jsx(tc,{children:"Migrate your data from local browser storage to Supabase for cross-device access"})]}),m.jsxs("div",{className:"space-y-4",children:[!c&&m.jsxs(m.Fragment,{children:[m.jsxs(Ra,{children:[m.jsx(LE,{className:"h-4 w-4"}),m.jsxs(ka,{children:[m.jsx("strong",{children:"Why migrate?"}),m.jsxs("ul",{className:"mt-2 space-y-1 text-sm list-disc list-inside",children:[m.jsx("li",{children:"Enable public registration links that work on any device"}),m.jsx("li",{children:"Allow check-in pages to function independently"}),m.jsx("li",{children:"Share event management across multiple devices"}),m.jsx("li",{children:'Prevent "Event not found" errors on standalone pages'})]})]})]}),m.jsxs(Ra,{variant:"destructive",children:[m.jsx(dw,{className:"h-4 w-4"}),m.jsxs(ka,{children:[m.jsx("strong",{children:"Before migrating:"}),m.jsxs("ul",{className:"mt-2 space-y-1 text-sm list-disc list-inside",children:[m.jsx("li",{children:"Ensure Supabase database is set up with the correct schema"}),m.jsx("li",{children:"Download a backup of your local data (recommended)"}),m.jsx("li",{children:"Migration is additive - existing Supabase data won't be deleted"})]})]})]}),n&&m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Migrating data..."}),m.jsx(m8,{value:b})]})]}),c&&p&&m.jsx("div",{className:"space-y-3",children:p.success?m.jsxs(Ra,{className:"border-green-200 bg-green-50",children:[m.jsx(ko,{className:"h-4 w-4 text-green-600"}),m.jsxs(ka,{children:[m.jsx("strong",{className:"text-green-900",children:"Migration successful!"}),m.jsxs("div",{className:"mt-2 text-sm text-green-800",children:[m.jsxs("p",{children:[" ",p.eventsCreated," event(s) migrated"]}),m.jsxs("p",{children:[" ",p.participantsCreated," participant(s) migrated"]}),m.jsxs("p",{children:[" ",p.agendaItemsCreated," agenda item(s) migrated"]})]})]})]}):m.jsxs(Ra,{variant:"destructive",children:[m.jsx(SE,{className:"h-4 w-4"}),m.jsxs(ka,{children:[m.jsx("strong",{children:"Migration failed"}),m.jsx("div",{className:"mt-2 text-sm space-y-1",children:p.errors.map((T,D)=>m.jsxs("p",{children:[" ",T]},D))})]})]})})]}),m.jsxs(ed,{className:"flex-col sm:flex-row gap-2",children:[m.jsxs(qe,{variant:"outline",onClick:_,disabled:n,className:"w-full sm:w-auto",children:[m.jsx(iw,{className:"mr-2 h-4 w-4"}),"Download Backup"]}),c?m.jsx(qe,{onClick:k,className:"w-full sm:w-auto",children:p?.success?"Reload & Use Cloud Data":"Close"}):m.jsxs(qe,{onClick:A,disabled:n,className:"w-full sm:w-auto",children:[m.jsx(hd,{className:"mr-2 h-4 w-4"}),n?"Migrating...":"Start Migration"]})]})]})})}function w8({onEventSelected:r,onLogout:e}){const[n,o]=R.useState([]),[c,u]=R.useState(!1),[p,x]=R.useState(!1),[b,y]=R.useState(!1),[A,_]=R.useState(null),[k,T]=R.useState({name:"",startDate:"",endDate:"",location:"",description:""});R.useEffect(()=>{D()},[]);const D=()=>{const V=Lr();o(V)},O=()=>{T({name:"",startDate:"",endDate:"",location:"",description:""}),u(!0)},L=V=>{_(V),T({name:V.name,startDate:V.startDate,endDate:V.endDate,location:V.location,description:V.description}),x(!0)},U=()=>{if(!k.name||!k.startDate){alert("Please fill in required fields (Event Name and Start Date)");return}const V={id:n2(),name:k.name,startDate:k.startDate,endDate:k.endDate,location:k.location,description:k.description,createdAt:new Date().toISOString()};r2(V),D(),u(!1)},z=()=>{if(A){if(!k.name||!k.startDate){alert("Please fill in required fields (Event Name and Start Date)");return}zo(A.id,{name:k.name,startDate:k.startDate,endDate:k.endDate,location:k.location,description:k.description}),D(),x(!1),_(null)}},F=(V,X)=>{confirm(`Are you sure you want to delete "${X}"?

This will permanently delete all participants, agenda items, and attendance records associated with this event.`)&&(wT(V),D())},$=V=>{yT(V),r(V)},se=async()=>{await ti.auth.signOut(),e()},Y=V=>V?new Date(V).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50",children:[m.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:m.jsxs("div",{className:"container mx-auto px-6 py-5 flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Event Management System"}),m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select an event to manage or create a new one"})]}),m.jsxs(qe,{onClick:se,variant:"outline",className:"border-gray-300 hover:border-gray-400",children:[m.jsx(sw,{className:"mr-2 h-4 w-4"}),"Logout"]})]})}),m.jsx("main",{className:"container mx-auto px-6 py-12",children:m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsx("div",{className:"mb-8",children:m.jsx(i8,{onMigrateClick:()=>y(!0)})}),m.jsxs("div",{className:"flex items-center justify-between mb-10",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl mb-2",children:"Your Events"}),m.jsxs("p",{className:"text-gray-600 text-lg",children:[n.length," ",n.length===1?"event":"events"," total"]})]}),m.jsxs(qe,{onClick:O,size:"lg",className:"gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 h-12 px-6",children:[m.jsx(Po,{className:"mr-2 h-5 w-5"}),"Create New Event"]})]}),n.length===0?m.jsx(wi,{className:"border-2 border-dashed border-gray-300 bg-white/60 backdrop-blur-sm",children:m.jsxs(Bi,{className:"flex flex-col items-center justify-center py-20",children:[m.jsx("div",{className:"w-20 h-20 gradient-primary-soft rounded-2xl flex items-center justify-center mb-6",children:m.jsx(hE,{className:"h-10 w-10 text-purple-600"})}),m.jsx("h3",{className:"text-2xl mb-3",children:"No events yet"}),m.jsx("p",{className:"text-gray-600 mb-8 text-center max-w-md text-lg",children:"Get started by creating your first event. You'll be able to manage participants, agenda, and track attendance."}),m.jsxs(qe,{onClick:O,size:"lg",className:"gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 h-12 px-6",children:[m.jsx(Po,{className:"mr-2 h-5 w-5"}),"Create Your First Event"]})]})}):m.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(V=>{const X=br(V.id),W=us(V.id);return m.jsxs(wi,{className:"card-elevated bg-white border-0 overflow-hidden group",children:[m.jsx("div",{className:"h-2 gradient-primary"}),m.jsxs(Vs,{className:"pb-4",children:[m.jsx(Ws,{className:"line-clamp-1 text-xl",children:V.name}),m.jsxs("div",{className:"space-y-2 text-gray-600",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Zl,{className:"h-4 w-4 text-purple-500"}),m.jsxs("span",{className:"text-sm",children:[Y(V.startDate),V.endDate&&` - ${Y(V.endDate)}`]})]}),V.location&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(F0,{className:"h-4 w-4 text-pink-500"}),m.jsx("span",{className:"text-sm line-clamp-1",children:V.location})]})]})]}),m.jsxs(Bi,{children:[V.description&&m.jsx("p",{className:"text-sm text-gray-600 mb-5 line-clamp-2",children:V.description}),m.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-5",children:[m.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 text-center border border-purple-200",children:[m.jsx("div",{className:"text-2xl bg-gradient-to-r from-purple-600 to-purple-700 bg-clip-text text-transparent",children:X.length}),m.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"Participants"})]}),m.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-4 text-center border border-pink-200",children:[m.jsx("div",{className:"text-2xl bg-gradient-to-r from-pink-600 to-pink-700 bg-clip-text text-transparent",children:W.length}),m.jsx("div",{className:"text-xs text-pink-700 mt-1",children:"Sessions"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(qe,{onClick:()=>$(V.id),className:"flex-1 gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:["Manage",m.jsx(lE,{className:"ml-2 h-4 w-4"})]}),m.jsx(qe,{onClick:()=>L(V),variant:"outline",size:"icon",className:"border-gray-300 hover:border-purple-500 hover:text-purple-600",children:m.jsx(uw,{className:"h-4 w-4"})}),m.jsx(qe,{onClick:()=>F(V.id,V.name),variant:"outline",size:"icon",className:"border-gray-300 hover:border-red-500 hover:text-red-600",children:m.jsx(oc,{className:"h-4 w-4"})})]})]})]},V.id)})})]})}),m.jsx(Jr,{open:c,onOpenChange:u,children:m.jsxs(ei,{className:"max-w-2xl",children:[m.jsx(yi,{children:m.jsx(vi,{children:"Create New Event"})}),m.jsxs("div",{className:"space-y-4 py-4",children:[m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"name",children:"Event Name *"}),m.jsx(ut,{id:"name",value:k.name,onChange:V=>T({...k,name:V.target.value}),placeholder:"e.g., Annual Tech Conference 2024"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"startDate",children:"Start Date *"}),m.jsx(ut,{id:"startDate",type:"date",value:k.startDate,onChange:V=>T({...k,startDate:V.target.value})})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"endDate",children:"End Date"}),m.jsx(ut,{id:"endDate",type:"date",value:k.endDate,onChange:V=>T({...k,endDate:V.target.value})})]})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"location",children:"Location"}),m.jsx(ut,{id:"location",value:k.location,onChange:V=>T({...k,location:V.target.value}),placeholder:"e.g., Convention Center Hall A"})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"description",children:"Description"}),m.jsx(ic,{id:"description",value:k.description,onChange:V=>T({...k,description:V.target.value}),placeholder:"Brief description of the event...",rows:3})]})]}),m.jsxs(ed,{children:[m.jsx(qe,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),m.jsx(qe,{onClick:U,children:"Create Event"})]})]})}),m.jsx(Jr,{open:p,onOpenChange:x,children:m.jsxs(ei,{className:"max-w-2xl",children:[m.jsx(yi,{children:m.jsx(vi,{children:"Edit Event"})}),m.jsxs("div",{className:"space-y-4 py-4",children:[m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"edit-name",children:"Event Name *"}),m.jsx(ut,{id:"edit-name",value:k.name,onChange:V=>T({...k,name:V.target.value}),placeholder:"e.g., Annual Tech Conference 2024"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"edit-startDate",children:"Start Date *"}),m.jsx(ut,{id:"edit-startDate",type:"date",value:k.startDate,onChange:V=>T({...k,startDate:V.target.value})})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"edit-endDate",children:"End Date"}),m.jsx(ut,{id:"edit-endDate",type:"date",value:k.endDate,onChange:V=>T({...k,endDate:V.target.value})})]})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"edit-location",children:"Location"}),m.jsx(ut,{id:"edit-location",value:k.location,onChange:V=>T({...k,location:V.target.value}),placeholder:"e.g., Convention Center Hall A"})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"edit-description",children:"Description"}),m.jsx(ic,{id:"edit-description",value:k.description,onChange:V=>T({...k,description:V.target.value}),placeholder:"Brief description of the event...",rows:3})]})]}),m.jsxs(ed,{children:[m.jsx(qe,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),m.jsx(qe,{onClick:z,children:"Save Changes"})]})]})}),m.jsx(x8,{open:b,onOpenChange:y})]})}var kd="Switch",[y8]=ni(kd),[v8,b8]=y8(kd),d2=R.forwardRef((r,e)=>{const{__scopeSwitch:n,name:o,checked:c,defaultChecked:u,required:p,disabled:x,value:b="on",onCheckedChange:y,form:A,..._}=r,[k,T]=R.useState(null),D=Ut(e,F=>T(F)),O=R.useRef(!1),L=k?A||!!k.closest("form"):!0,[U,z]=bi({prop:c,defaultProp:u??!1,onChange:y,caller:kd});return m.jsxs(v8,{scope:n,checked:U,disabled:x,children:[m.jsx(xt.button,{type:"button",role:"switch","aria-checked":U,"aria-required":p,"data-state":p2(U),"data-disabled":x?"":void 0,disabled:x,value:b,..._,ref:D,onClick:Et(r.onClick,F=>{z($=>!$),L&&(O.current=F.isPropagationStopped(),O.current||F.stopPropagation())})}),L&&m.jsx(g2,{control:k,bubbles:!O.current,name:o,value:b,checked:U,required:p,disabled:x,form:A,style:{transform:"translateX(-100%)"}})]})});d2.displayName=kd;var h2="SwitchThumb",f2=R.forwardRef((r,e)=>{const{__scopeSwitch:n,...o}=r,c=b8(h2,n);return m.jsx(xt.span,{"data-state":p2(c.checked),"data-disabled":c.disabled?"":void 0,...o,ref:e})});f2.displayName=h2;var C8="SwitchBubbleInput",g2=R.forwardRef(({__scopeSwitch:r,control:e,checked:n,bubbles:o=!0,...c},u)=>{const p=R.useRef(null),x=Ut(p,u),b=Ad(n),y=Sd(e);return R.useEffect(()=>{const A=p.current;if(!A)return;const _=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(_,"checked").set;if(b!==n&&T){const D=new Event("click",{bubbles:o});T.call(A,n),A.dispatchEvent(D)}},[b,n,o]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...c,tabIndex:-1,ref:x,style:{...c.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});g2.displayName=C8;function p2(r){return r?"checked":"unchecked"}var E8=d2,S8=f2;function m2({className:r,...e}){return m.jsx(E8,{"data-slot":"switch",className:yt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:m.jsx(S8,{"data-slot":"switch-thumb",className:yt("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var Ve;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ve||(Ve={}));var $m=new Map([[Ve.QR_CODE,"QR_CODE"],[Ve.AZTEC,"AZTEC"],[Ve.CODABAR,"CODABAR"],[Ve.CODE_39,"CODE_39"],[Ve.CODE_93,"CODE_93"],[Ve.CODE_128,"CODE_128"],[Ve.DATA_MATRIX,"DATA_MATRIX"],[Ve.MAXICODE,"MAXICODE"],[Ve.ITF,"ITF"],[Ve.EAN_13,"EAN_13"],[Ve.EAN_8,"EAN_8"],[Ve.PDF_417,"PDF_417"],[Ve.RSS_14,"RSS_14"],[Ve.RSS_EXPANDED,"RSS_EXPANDED"],[Ve.UPC_A,"UPC_A"],[Ve.UPC_E,"UPC_E"],[Ve.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Gm;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(Gm||(Gm={}));function A8(r){return Object.values(Ve).includes(r)}var ld;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ld||(ld={}));var _8=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[ld.SCAN_TYPE_CAMERA,ld.SCAN_TYPE_FILE],r})(),x2=(function(){function r(e,n){this.format=e,this.formatName=n}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!$m.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,$m.get(e))},r})(),qm=(function(){function r(){}return r.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r})(),R0;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(R0||(R0={}));var N8=(function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:R0.UNKWOWN_ERROR}},r})(),I8=(function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r})();function os(r){return typeof r>"u"||r===null}var Oa=(function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),w2=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(c),p=Object.keys(e),x=0,b=p;x<b.length;x++){var y=b[x];if(u.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},r})(),ql={exports:{}},T8=ql.exports,Xm;function R8(){return Xm||(Xm=1,(function(r,e){(function(n,o){o(e)})(T8,(function(n){function o(P){return P==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,t){P.__proto__=t}||function(P,t){for(var s in t)t.hasOwnProperty(s)&&(P[s]=t[s])};function u(P,t){c(P,t);function s(){this.constructor=P}P.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}function p(P,t){var s=Object.setPrototypeOf;s?s(P,t):P.__proto__=t}function x(P,t){t===void 0&&(t=P.constructor);var s=Error.captureStackTrace;s&&s(P,t)}var b=(function(P){u(t,P);function t(s){var a=this.constructor,d=P.call(this,s)||this;return Object.defineProperty(d,"name",{value:a.name,enumerable:!1}),p(d,a.prototype),x(d),d}return t})(Error);class y extends b{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}y.kind="Exception";class A extends y{}A.kind="ArgumentException";class _ extends y{}_.kind="IllegalArgumentException";class k{constructor(t){if(this.binarizer=t,t===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,s){return this.binarizer.getBlackRow(t,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,s,a,d){const h=this.binarizer.getLuminanceSource().crop(t,s,a,d);return new k(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends y{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class D{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class O{static arraycopy(t,s,a,d,h){for(;h--;)a[d++]=t[s++]}static currentTimeMillis(){return Date.now()}}class L extends y{}L.kind="IndexOutOfBoundsException";class U extends L{constructor(t=void 0,s=void 0){super(s),this.index=t,this.message=s}}U.kind="ArrayIndexOutOfBoundsException";class z{static fill(t,s){for(let a=0,d=t.length;a<d;a++)t[a]=s}static fillWithin(t,s,a,d){z.rangeCheck(t.length,s,a);for(let h=s;h<a;h++)t[h]=d}static rangeCheck(t,s,a){if(s>a)throw new _("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new U(s);if(a>t)throw new U(a)}static asList(...t){return t}static create(t,s,a){return Array.from({length:t}).map(h=>Array.from({length:s}).fill(a))}static createInt32Array(t,s,a){return Array.from({length:t}).map(h=>Int32Array.from({length:s}).fill(a))}static equals(t,s){if(!t||!s||!t.length||!s.length||t.length!==s.length)return!1;for(let a=0,d=t.length;a<d;a++)if(t[a]!==s[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let s=1;for(const a of t)s=31*s+a;return s}static fillUint8Array(t,s){for(let a=0;a!==t.length;a++)t[a]=s}static copyOf(t,s){return t.slice(0,s)}static copyOfUint8Array(t,s){if(t.length<=s){const a=new Uint8Array(s);return a.set(t),a}return t.slice(0,s)}static copyOfRange(t,s,a){const d=a-s,h=new Int32Array(d);return O.arraycopy(t,s,h,0,d),h}static binarySearch(t,s,a){a===void 0&&(a=z.numberComparator);let d=0,h=t.length-1;for(;d<=h;){const f=h+d>>1,w=a(s,t[f]);if(w>0)d=f+1;else if(w<0)h=f-1;else return f}return-d-1}static numberComparator(t,s){return t-s}}class F{static numberOfTrailingZeros(t){let s;if(t===0)return 32;let a=31;return s=t<<16,s!==0&&(a-=16,t=s),s=t<<8,s!==0&&(a-=8,t=s),s=t<<4,s!==0&&(a-=4,t=s),s=t<<2,s!==0&&(a-=2,t=s),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let s=1;return t>>>16||(s+=16,t<<=16),t>>>24||(s+=8,t<<=8),t>>>28||(s+=4,t<<=4),t>>>30||(s+=2,t<<=2),s-=t>>>31,s}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,s){return Math.trunc(t/s)}static parseInt(t,s=void 0){return parseInt(t,s)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ${constructor(t,s){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,s==null?this.bits=$.makeArray(t):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const s=$.makeArray(t);O.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const s=this.size;if(t>=s)return s;const a=this.bits;let d=Math.floor(t/32),h=a[d];h&=~((1<<(t&31))-1);const f=a.length;for(;h===0;){if(++d===f)return s;h=a[d]}const w=d*32+F.numberOfTrailingZeros(h);return w>s?s:w}getNextUnset(t){const s=this.size;if(t>=s)return s;const a=this.bits;let d=Math.floor(t/32),h=~a[d];h&=~((1<<(t&31))-1);const f=a.length;for(;h===0;){if(++d===f)return s;h=~a[d]}const w=d*32+F.numberOfTrailingZeros(h);return w>s?s:w}setBulk(t,s){this.bits[Math.floor(t/32)]=s}setRange(t,s){if(s<t||t<0||s>this.size)throw new _;if(s===t)return;s--;const a=Math.floor(t/32),d=Math.floor(s/32),h=this.bits;for(let f=a;f<=d;f++){const w=f>a?0:t&31,E=(2<<(f<d?31:s&31))-(1<<w);h[f]|=E}}clear(){const t=this.bits.length,s=this.bits;for(let a=0;a<t;a++)s[a]=0}isRange(t,s,a){if(s<t||t<0||s>this.size)throw new _;if(s===t)return!0;s--;const d=Math.floor(t/32),h=Math.floor(s/32),f=this.bits;for(let w=d;w<=h;w++){const C=w>d?0:t&31,I=(2<<(w<h?31:s&31))-(1<<C)&4294967295;if((f[w]&I)!==(a?I:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,s){if(s<0||s>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const s=t.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new _("Sizes don't match");const s=this.bits;for(let a=0,d=s.length;a<d;a++)s[a]^=t.bits[a]}toBytes(t,s,a,d){for(let h=0;h<d;h++){let f=0;for(let w=0;w<8;w++)this.get(t)&&(f|=1<<7-w),t++;s[a+h]=f}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,d=this.bits;for(let h=0;h<a;h++){let f=d[h];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,t[s-h]=f}if(this.size!==a*32){const h=a*32-this.size;let f=t[0]>>>h;for(let w=1;w<a;w++){const C=t[w];f|=C<<32-h,t[w-1]=f,f=C>>>h}t[a-1]=f}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof $))return!1;const s=t;return this.size===s.size&&z.equals(this.bits,s.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let t="";for(let s=0,a=this.size;s<a;s++)(s&7)===0&&(t+=" "),t+=this.get(s)?"X":".";return t}clone(){return new $(this.size,this.bits.slice())}}var se;(function(P){P[P.OTHER=0]="OTHER",P[P.PURE_BARCODE=1]="PURE_BARCODE",P[P.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",P[P.TRY_HARDER=3]="TRY_HARDER",P[P.CHARACTER_SET=4]="CHARACTER_SET",P[P.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",P[P.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",P[P.ASSUME_GS1=7]="ASSUME_GS1",P[P.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",P[P.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",P[P.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(se||(se={}));var Y=se;class V extends y{static getFormatInstance(){return new V}}V.kind="FormatException";var X;(function(P){P[P.Cp437=0]="Cp437",P[P.ISO8859_1=1]="ISO8859_1",P[P.ISO8859_2=2]="ISO8859_2",P[P.ISO8859_3=3]="ISO8859_3",P[P.ISO8859_4=4]="ISO8859_4",P[P.ISO8859_5=5]="ISO8859_5",P[P.ISO8859_6=6]="ISO8859_6",P[P.ISO8859_7=7]="ISO8859_7",P[P.ISO8859_8=8]="ISO8859_8",P[P.ISO8859_9=9]="ISO8859_9",P[P.ISO8859_10=10]="ISO8859_10",P[P.ISO8859_11=11]="ISO8859_11",P[P.ISO8859_13=12]="ISO8859_13",P[P.ISO8859_14=13]="ISO8859_14",P[P.ISO8859_15=14]="ISO8859_15",P[P.ISO8859_16=15]="ISO8859_16",P[P.SJIS=16]="SJIS",P[P.Cp1250=17]="Cp1250",P[P.Cp1251=18]="Cp1251",P[P.Cp1252=19]="Cp1252",P[P.Cp1256=20]="Cp1256",P[P.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",P[P.UTF8=22]="UTF8",P[P.ASCII=23]="ASCII",P[P.Big5=24]="Big5",P[P.GB18030=25]="GB18030",P[P.EUC_KR=26]="EUC_KR"})(X||(X={}));class W{constructor(t,s,a,...d){this.valueIdentifier=t,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=d,W.VALUE_IDENTIFIER_TO_ECI.set(t,this),W.NAME_TO_ECI.set(a,this);const h=this.values;for(let f=0,w=h.length;f!==w;f++){const C=h[f];W.VALUES_TO_ECI.set(C,this)}for(const f of d)W.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new V("incorect value");const s=W.VALUES_TO_ECI.get(t);if(s===void 0)throw new V("incorect value");return s}static getCharacterSetECIByName(t){const s=W.NAME_TO_ECI.get(t);if(s===void 0)throw new V("incorect value");return s}equals(t){if(!(t instanceof W))return!1;const s=t;return this.getName()===s.getName()}}W.VALUE_IDENTIFIER_TO_ECI=new Map,W.VALUES_TO_ECI=new Map,W.NAME_TO_ECI=new Map,W.Cp437=new W(X.Cp437,Int32Array.from([0,2]),"Cp437"),W.ISO8859_1=new W(X.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),W.ISO8859_2=new W(X.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),W.ISO8859_3=new W(X.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),W.ISO8859_4=new W(X.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),W.ISO8859_5=new W(X.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),W.ISO8859_6=new W(X.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),W.ISO8859_7=new W(X.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),W.ISO8859_8=new W(X.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),W.ISO8859_9=new W(X.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),W.ISO8859_10=new W(X.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),W.ISO8859_11=new W(X.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),W.ISO8859_13=new W(X.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),W.ISO8859_14=new W(X.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),W.ISO8859_15=new W(X.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),W.ISO8859_16=new W(X.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),W.SJIS=new W(X.SJIS,20,"SJIS","Shift_JIS"),W.Cp1250=new W(X.Cp1250,21,"Cp1250","windows-1250"),W.Cp1251=new W(X.Cp1251,22,"Cp1251","windows-1251"),W.Cp1252=new W(X.Cp1252,23,"Cp1252","windows-1252"),W.Cp1256=new W(X.Cp1256,24,"Cp1256","windows-1256"),W.UnicodeBigUnmarked=new W(X.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),W.UTF8=new W(X.UTF8,26,"UTF8","UTF-8"),W.ASCII=new W(X.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),W.Big5=new W(X.Big5,28,"Big5"),W.GB18030=new W(X.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),W.EUC_KR=new W(X.EUC_KR,30,"EUC_KR","EUC-KR");class ye extends y{}ye.kind="UnsupportedOperationException";class be{static decode(t,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!be.isBrowser()&&t==="ISO-8859-1"}static encode(t,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof W?t:W.getCharacterSetECIByName(t)}static decodeFallback(t,s){const a=this.encodingCharacterSet(s);if(be.isDecodeFallbackSupported(a)){let d="";for(let h=0,f=t.length;h<f;h++){let w=t[h].toString(16);w.length<2&&(w="0"+w),d+="%"+w}return decodeURIComponent(d)}if(a.equals(W.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new ye(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(W.UTF8)||t.equals(W.ISO8859_1)||t.equals(W.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),d=[];for(let h=0;h<a.length;h++)d.push(a[h].charCodeAt(0));return new Uint8Array(d)}}class de{static castAsNonUtf8Char(t,s=null){const a=s?s.getName():this.ISO88591;return be.decode(new Uint8Array([t]),a)}static guessEncoding(t,s){if(s!=null&&s.get(Y.CHARACTER_SET)!==void 0)return s.get(Y.CHARACTER_SET).toString();const a=t.length;let d=!0,h=!0,f=!0,w=0,C=0,E=0,I=0,j=0,B=0,G=0,Z=0,J=0,oe=0,me=0;const ke=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let Oe=0;Oe<a&&(d||h||f);Oe++){const Ne=t[Oe]&255;f&&(w>0?(Ne&128)===0?f=!1:w--:(Ne&128)!==0&&((Ne&64)===0?f=!1:(w++,(Ne&32)===0?C++:(w++,(Ne&16)===0?E++:(w++,(Ne&8)===0?I++:f=!1))))),d&&(Ne>127&&Ne<160?d=!1:Ne>159&&(Ne<192||Ne===215||Ne===247)&&me++),h&&(j>0?Ne<64||Ne===127||Ne>252?h=!1:j--:Ne===128||Ne===160||Ne>239?h=!1:Ne>160&&Ne<224?(B++,Z=0,G++,G>J&&(J=G)):Ne>127?(j++,G=0,Z++,Z>oe&&(oe=Z)):(G=0,Z=0))}return f&&w>0&&(f=!1),h&&j>0&&(h=!1),f&&(ke||C+E+I>0)?de.UTF8:h&&(de.ASSUME_SHIFT_JIS||J>=3||oe>=3)?de.SHIFT_JIS:d&&h?J===2&&B===2||me*10>=a?de.SHIFT_JIS:de.ISO88591:d?de.ISO88591:h?de.SHIFT_JIS:f?de.UTF8:de.PLATFORM_DEFAULT_ENCODING}static format(t,...s){let a=-1;function d(f,w,C,E,I,j){if(f==="%%")return"%";if(s[++a]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let B=I?parseInt(I.substr(1)):void 0,G;switch(j){case"s":G=s[a];break;case"c":G=s[a][0];break;case"f":G=parseFloat(s[a]).toFixed(f);break;case"p":G=parseFloat(s[a]).toPrecision(f);break;case"e":G=parseFloat(s[a]).toExponential(f);break;case"x":G=parseInt(s[a]).toString(B||16);break;case"d":G=parseFloat(parseInt(s[a],B||10).toPrecision(f)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(B);let Z=parseInt(C),J=C&&C[0]+""=="0"?"0":" ";for(;G.length<Z;)G=w!==void 0?G+J:J+G;return G}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(h,d)}static getBytes(t,s){return be.encode(t,s)}static getCharCode(t,s=0){return t.charCodeAt(s)}static getCharAt(t){return String.fromCharCode(t)}}de.SHIFT_JIS=W.SJIS.getName(),de.GB2312="GB2312",de.ISO88591=W.ISO8859_1.getName(),de.EUC_JP="EUC_JP",de.UTF8=W.UTF8.getName(),de.PLATFORM_DEFAULT_ENCODING=de.UTF8,de.ASSUME_SHIFT_JIS=!1;class ve{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=de.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,s,a){for(let d=s;s<s+a;d++)this.append(t[d]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,s){this.value=this.value.substr(0,t)+s+this.value.substr(t+1)}substring(t,s){return this.value.substring(t,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,s){this.value=this.value.substr(0,t)+s+this.value.substr(t+s.length)}}class Ce{constructor(t,s,a,d){if(this.width=t,this.height=s,this.rowSize=a,this.bits=d,s==null&&(s=t),this.height=s,t<1||s<1)throw new _("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const s=t.length,a=t[0].length,d=new Ce(a,s);for(let h=0;h<s;h++){const f=t[h];for(let w=0;w<a;w++)f[w]&&d.set(w,h)}return d}static parseFromString(t,s,a){if(t===null)throw new _("stringRepresentation cannot be null");const d=new Array(t.length);let h=0,f=0,w=-1,C=0,E=0;for(;E<t.length;)if(t.charAt(E)===`
`||t.charAt(E)==="\r"){if(h>f){if(w===-1)w=h-f;else if(h-f!==w)throw new _("row lengths do not match");f=h,C++}E++}else if(t.substring(E,E+s.length)===s)E+=s.length,d[h]=!0,h++;else if(t.substring(E,E+a.length)===a)E+=a.length,d[h]=!1,h++;else throw new _("illegal character encountered: "+t.substring(E));if(h>f){if(w===-1)w=h-f;else if(h-f!==w)throw new _("row lengths do not match");C++}const I=new Ce(w,C);for(let j=0;j<h;j++)d[j]&&I.set(Math.floor(j%w),Math.floor(j/w));return I}get(t,s){const a=s*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,s){const a=s*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,s){const a=s*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,s){const a=s*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new _("input matrix dimensions do not match");const s=new $(Math.floor(this.width/32)+1),a=this.rowSize,d=this.bits;for(let h=0,f=this.height;h<f;h++){const w=h*a,C=t.getRow(h,s).getBitArray();for(let E=0;E<a;E++)d[w+E]^=C[E]}}clear(){const t=this.bits,s=t.length;for(let a=0;a<s;a++)t[a]=0}setRegion(t,s,a,d){if(s<0||t<0)throw new _("Left and top must be nonnegative");if(d<1||a<1)throw new _("Height and width must be at least 1");const h=t+a,f=s+d;if(f>this.height||h>this.width)throw new _("The region must fit inside the matrix");const w=this.rowSize,C=this.bits;for(let E=s;E<f;E++){const I=E*w;for(let j=t;j<h;j++)C[I+Math.floor(j/32)]|=1<<(j&31)&4294967295}}getRow(t,s){s==null||s.getSize()<this.width?s=new $(this.width):s.clear();const a=this.rowSize,d=this.bits,h=t*a;for(let f=0;f<a;f++)s.setBulk(f*32,d[h+f]);return s}setRow(t,s){O.arraycopy(s.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),s=this.getHeight();let a=new $(t),d=new $(t);for(let h=0,f=Math.floor((s+1)/2);h<f;h++)a=this.getRow(h,a),d=this.getRow(s-1-h,d),a.reverse(),d.reverse(),this.setRow(h,d),this.setRow(s-1-h,a)}getEnclosingRectangle(){const t=this.width,s=this.height,a=this.rowSize,d=this.bits;let h=t,f=s,w=-1,C=-1;for(let E=0;E<s;E++)for(let I=0;I<a;I++){const j=d[E*a+I];if(j!==0){if(E<f&&(f=E),E>C&&(C=E),I*32<h){let B=0;for(;(j<<31-B&4294967295)===0;)B++;I*32+B<h&&(h=I*32+B)}if(I*32+31>w){let B=31;for(;!(j>>>B);)B--;I*32+B>w&&(w=I*32+B)}}}return w<h||C<f?null:Int32Array.from([h,f,w-h+1,C-f+1])}getTopLeftOnBit(){const t=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const d=a/t;let h=a%t*32;const f=s[a];let w=0;for(;(f<<31-w&4294967295)===0;)w++;return h+=w,Int32Array.from([h,d])}getBottomRightOnBit(){const t=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const d=Math.floor(a/t);let h=Math.floor(a%t)*32;const f=s[a];let w=31;for(;!(f>>>w);)w--;return h+=w,Int32Array.from([h,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Ce))return!1;const s=t;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&z.equals(this.bits,s.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+z.hashCode(this.bits),t}toString(t="X ",s="  ",a=`
`){return this.buildToString(t,s,a)}buildToString(t,s,a){let d=new ve;for(let h=0,f=this.height;h<f;h++){for(let w=0,C=this.width;w<C;w++)d.append(this.get(w,h)?t:s);d.append(a)}return d.toString()}clone(){return new Ce(this.width,this.height,this.rowSize,this.bits.slice())}}class ie extends y{static getNotFoundInstance(){return new ie}}ie.kind="NotFoundException";class ce extends D{constructor(t){super(t),this.luminances=ce.EMPTY,this.buckets=new Int32Array(ce.LUMINANCE_BUCKETS)}getBlackRow(t,s){const a=this.getLuminanceSource(),d=a.getWidth();s==null||s.getSize()<d?s=new $(d):s.clear(),this.initArrays(d);const h=a.getRow(t,this.luminances),f=this.buckets;for(let C=0;C<d;C++)f[(h[C]&255)>>ce.LUMINANCE_SHIFT]++;const w=ce.estimateBlackPoint(f);if(d<3)for(let C=0;C<d;C++)(h[C]&255)<w&&s.set(C);else{let C=h[0]&255,E=h[1]&255;for(let I=1;I<d-1;I++){const j=h[I+1]&255;(E*4-C-j)/2<w&&s.set(I),C=E,E=j}}return s}getBlackMatrix(){const t=this.getLuminanceSource(),s=t.getWidth(),a=t.getHeight(),d=new Ce(s,a);this.initArrays(s);const h=this.buckets;for(let C=1;C<5;C++){const E=Math.floor(a*C/5),I=t.getRow(E,this.luminances),j=Math.floor(s*4/5);for(let B=Math.floor(s/5);B<j;B++){const G=I[B]&255;h[G>>ce.LUMINANCE_SHIFT]++}}const f=ce.estimateBlackPoint(h),w=t.getMatrix();for(let C=0;C<a;C++){const E=C*s;for(let I=0;I<s;I++)(w[E+I]&255)<f&&d.set(I,C)}return d}createBinarizer(t){return new ce(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const s=this.buckets;for(let a=0;a<ce.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(t){const s=t.length;let a=0,d=0,h=0;for(let I=0;I<s;I++)t[I]>h&&(d=I,h=t[I]),t[I]>a&&(a=t[I]);let f=0,w=0;for(let I=0;I<s;I++){const j=I-d,B=t[I]*j*j;B>w&&(f=I,w=B)}if(d>f){const I=d;d=f,f=I}if(f-d<=s/16)throw new ie;let C=f-1,E=-1;for(let I=f-1;I>d;I--){const j=I-d,B=j*j*(f-I)*(a-t[I]);B>E&&(C=I,E=B)}return C<<ce.LUMINANCE_SHIFT}}ce.LUMINANCE_BITS=5,ce.LUMINANCE_SHIFT=8-ce.LUMINANCE_BITS,ce.LUMINANCE_BUCKETS=1<<ce.LUMINANCE_BITS,ce.EMPTY=Uint8ClampedArray.from([0]);class ge extends ce{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),s=t.getWidth(),a=t.getHeight();if(s>=ge.MINIMUM_DIMENSION&&a>=ge.MINIMUM_DIMENSION){const d=t.getMatrix();let h=s>>ge.BLOCK_SIZE_POWER;(s&ge.BLOCK_SIZE_MASK)!==0&&h++;let f=a>>ge.BLOCK_SIZE_POWER;(a&ge.BLOCK_SIZE_MASK)!==0&&f++;const w=ge.calculateBlackPoints(d,h,f,s,a),C=new Ce(s,a);ge.calculateThresholdForBlock(d,h,f,s,a,w,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new ge(t)}static calculateThresholdForBlock(t,s,a,d,h,f,w){const C=h-ge.BLOCK_SIZE,E=d-ge.BLOCK_SIZE;for(let I=0;I<a;I++){let j=I<<ge.BLOCK_SIZE_POWER;j>C&&(j=C);const B=ge.cap(I,2,a-3);for(let G=0;G<s;G++){let Z=G<<ge.BLOCK_SIZE_POWER;Z>E&&(Z=E);const J=ge.cap(G,2,s-3);let oe=0;for(let ke=-2;ke<=2;ke++){const Oe=f[B+ke];oe+=Oe[J-2]+Oe[J-1]+Oe[J]+Oe[J+1]+Oe[J+2]}const me=oe/25;ge.thresholdBlock(t,Z,j,me,d,w)}}}static cap(t,s,a){return t<s?s:t>a?a:t}static thresholdBlock(t,s,a,d,h,f){for(let w=0,C=a*h+s;w<ge.BLOCK_SIZE;w++,C+=h)for(let E=0;E<ge.BLOCK_SIZE;E++)(t[C+E]&255)<=d&&f.set(s+E,a+w)}static calculateBlackPoints(t,s,a,d,h){const f=h-ge.BLOCK_SIZE,w=d-ge.BLOCK_SIZE,C=new Array(a);for(let E=0;E<a;E++){C[E]=new Int32Array(s);let I=E<<ge.BLOCK_SIZE_POWER;I>f&&(I=f);for(let j=0;j<s;j++){let B=j<<ge.BLOCK_SIZE_POWER;B>w&&(B=w);let G=0,Z=255,J=0;for(let me=0,ke=I*d+B;me<ge.BLOCK_SIZE;me++,ke+=d){for(let Oe=0;Oe<ge.BLOCK_SIZE;Oe++){const Ne=t[ke+Oe]&255;G+=Ne,Ne<Z&&(Z=Ne),Ne>J&&(J=Ne)}if(J-Z>ge.MIN_DYNAMIC_RANGE)for(me++,ke+=d;me<ge.BLOCK_SIZE;me++,ke+=d)for(let Oe=0;Oe<ge.BLOCK_SIZE;Oe++)G+=t[ke+Oe]&255}let oe=G>>ge.BLOCK_SIZE_POWER*2;if(J-Z<=ge.MIN_DYNAMIC_RANGE&&(oe=Z/2,E>0&&j>0)){const me=(C[E-1][j]+2*C[E][j-1]+C[E-1][j-1])/4;Z<me&&(oe=me)}C[E][j]=oe}}return C}}ge.BLOCK_SIZE_POWER=3,ge.BLOCK_SIZE=1<<ge.BLOCK_SIZE_POWER,ge.BLOCK_SIZE_MASK=ge.BLOCK_SIZE-1,ge.MINIMUM_DIMENSION=ge.BLOCK_SIZE*5,ge.MIN_DYNAMIC_RANGE=24;class te{constructor(t,s){this.width=t,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,s,a,d){throw new ye("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ye("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ye("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let s=new ve;for(let a=0;a<this.height;a++){const d=this.getRow(a,t);for(let h=0;h<this.width;h++){const f=d[h]&255;let w;f<64?w="#":f<128?w="+":f<192?w=".":w=" ",s.append(w)}s.append(`
`)}return s.toString()}}class re extends te{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,s){const a=this.delegate.getRow(t,s),d=this.getWidth();for(let h=0;h<d;h++)a[h]=255-(a[h]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let d=0;d<s;d++)a[d]=255-(t[d]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,s,a,d){return new re(this.delegate.crop(t,s,a,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new re(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new re(this.delegate.rotateCounterClockwise45())}}class fe extends te{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=fe.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const s=t.getContext("2d").getImageData(0,0,t.width,t.height);return fe.toGrayscaleBuffer(s.data,t.width,t.height)}static toGrayscaleBuffer(t,s,a){const d=new Uint8ClampedArray(s*a);for(let h=0,f=0,w=t.length;h<w;h+=4,f++){let C;if(t[h+3]===0)C=255;else{const I=t[h],j=t[h+1],B=t[h+2];C=306*I+601*j+117*B+512>>10}d[f]=C}return d}getRow(t,s){if(t<0||t>=this.getHeight())throw new _("Requested row is outside the image: "+t);const a=this.getWidth(),d=t*a;return s===null?s=this.buffer.slice(d,d+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(d,d+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,s,a,d){return super.crop(t,s,a,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const s=this.getTempCanvasElement(),a=s.getContext("2d"),d=t*fe.DEGREE_TO_RADIANS,h=this.canvas.width,f=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(d))*h+Math.abs(Math.sin(d))*f),C=Math.ceil(Math.abs(Math.sin(d))*h+Math.abs(Math.cos(d))*f);return s.width=w,s.height=C,a.translate(w/2,C/2),a.rotate(d),a.drawImage(this.canvas,h/-2,f/-2),this.buffer=fe.makeBufferFromCanvasImageData(s),this}invert(){return new re(this)}}fe.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(t,s,a){this.deviceId=t,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ue=(globalThis||xu||self||window||void 0)&&(globalThis||xu||self||window||void 0).__awaiter||function(P,t,s,a){function d(h){return h instanceof s?h:new s(function(f){f(h)})}return new(s||(s=Promise))(function(h,f){function w(I){try{E(a.next(I))}catch(j){f(j)}}function C(I){try{E(a.throw(I))}catch(j){f(j)}}function E(I){I.done?h(I.value):d(I.value).then(w,C)}E((a=a.apply(P,t||[])).next())})};class Ae{constructor(t,s=500,a){this.reader=t,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return ue(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of t){const d=a.kind==="video"?"videoinput":a.kind;if(d!=="videoinput")continue;const h=a.deviceId||a.id,f=a.label||`Video device ${s.length+1}`,w=a.groupId,C={deviceId:h,label:f,kind:d,groupId:w};s.push(C)}return s})}getVideoInputDevices(){return ue(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new K(s.deviceId,s.label))})}findDeviceById(t){return ue(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,s){return ue(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,s)})}decodeOnceFromVideoDevice(t,s){return ue(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const d={video:a};return yield this.decodeOnceFromConstraints(d,s)})}decodeOnceFromConstraints(t,s){return ue(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(t,s){return ue(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,s,a){return ue(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,s,a)})}decodeFromVideoDevice(t,s,a){return ue(this,void 0,void 0,function*(){let d;t?d={deviceId:{exact:t}}:d={facingMode:"environment"};const h={video:d};return yield this.decodeFromConstraints(h,s,a)})}decodeFromConstraints(t,s,a){return ue(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(d,s,a)})}decodeFromStream(t,s,a){return ue(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(t,s);return yield this.decodeContinuously(d,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,s){return ue(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((s,a)=>this.playVideoOnLoad(t,()=>s()))}playVideoOnLoad(t,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",s),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return ue(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,s){const a=document.getElementById(t);if(!a)throw new A(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new A(`element with id '${t}' must be an ${s} element`);return a}decodeFromImage(t,s){if(!t&&!s)throw new A("either imageElement with a src set or an url must be provided");return s&&!t?this.decodeFromImageUrl(s):this.decodeFromImageElement(t)}decodeFromVideo(t,s){if(!t&&!s)throw new A("Either an element with a src set or an URL must be provided");return s&&!t?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,s,a){if(t===void 0&&s===void 0)throw new A("Either an element with a src set or an URL must be provided");return s&&!t?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new A("An image element must be provided.");this.reset();const s=this.prepareImageElement(t);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(t){const s=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(t,s){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(t){if(!t)throw new A("A video element must be provided.");this.reset();const s=this.prepareVideoElement(t);return this.videoElement=s,s}decodeFromImageUrl(t){if(!t)throw new A("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=t,a}decodeFromVideoUrl(t){if(!t)throw new A("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=t,a}decodeFromVideoUrlContinuously(t,s){if(!t)throw new A("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(a,s);return a.src=t,d}_decodeOnLoadImage(t){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(s,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return ue(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,s){return ue(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,s)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let s;return typeof t>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof t=="string"&&(s=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(s=t),s}prepareVideoElement(t){let s;return!t&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof t=="string"&&(s=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(s=t),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(t,s=!0,a=!0){this._stopAsyncDecode=!1;const d=(h,f)=>{if(this._stopAsyncDecode){f(new ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(t);h(w)}catch(w){const C=s&&w instanceof ie,I=(w instanceof T||w instanceof V)&&a;if(C||I)return setTimeout(d,this._timeBetweenDecodingAttempts,h,f);f(w)}};return new Promise((h,f)=>d(h,f))}decodeContinuously(t,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(t);s(d,null),setTimeout(a,this.timeBetweenScansMillis)}catch(d){s(null,d);const h=d instanceof T||d instanceof V,f=d instanceof ie;(h||f)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const s=this.createBinaryBitmap(t);return this.decodeBitmap(s)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,s,a){s||(s={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(t,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const s=this.getCaptureCanvas(t),a=new fe(s),d=new ge(a);return new k(d)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const s=this.createCaptureCanvas(t);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,d;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,d=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,d=t.naturalHeight||t.height)),s.style.width=a+"px",s.style.height=d+"px",s.width=a,s.height=d,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,s){try{t.srcObject=s}catch{t.src=URL.createObjectURL(s)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Te{constructor(t,s,a=s==null?0:8*s.length,d,h,f=O.currentTimeMillis()){this.text=t,this.rawBytes=s,this.numBits=a,this.resultPoints=d,this.format=h,this.timestamp=f,this.text=t,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=d,this.format=h,this.resultMetadata=null,f==null?this.timestamp=O.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,s)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const s=this.resultPoints;if(s===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(s.length+t.length);O.arraycopy(s,0,a,0,s.length),O.arraycopy(t,0,a,s.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Fe;(function(P){P[P.AZTEC=0]="AZTEC",P[P.CODABAR=1]="CODABAR",P[P.CODE_39=2]="CODE_39",P[P.CODE_93=3]="CODE_93",P[P.CODE_128=4]="CODE_128",P[P.DATA_MATRIX=5]="DATA_MATRIX",P[P.EAN_8=6]="EAN_8",P[P.EAN_13=7]="EAN_13",P[P.ITF=8]="ITF",P[P.MAXICODE=9]="MAXICODE",P[P.PDF_417=10]="PDF_417",P[P.QR_CODE=11]="QR_CODE",P[P.RSS_14=12]="RSS_14",P[P.RSS_EXPANDED=13]="RSS_EXPANDED",P[P.UPC_A=14]="UPC_A",P[P.UPC_E=15]="UPC_E",P[P.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var ee=Fe,pe;(function(P){P[P.OTHER=0]="OTHER",P[P.ORIENTATION=1]="ORIENTATION",P[P.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",P[P.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",P[P.ISSUE_NUMBER=4]="ISSUE_NUMBER",P[P.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",P[P.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",P[P.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",P[P.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",P[P.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",P[P.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(pe||(pe={}));var Ee=pe;class Le{constructor(t,s,a,d,h=-1,f=-1){this.rawBytes=t,this.text=s,this.byteSegments=a,this.ecLevel=d,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=f,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Xe{exp(t){return this.expTable[t]}log(t){if(t===0)throw new _;return this.logTable[t]}static addOrSubtract(t,s){return t^s}}class tt{constructor(t,s){if(s.length===0)throw new _;this.field=t;const a=s.length;if(a>1&&s[0]===0){let d=1;for(;d<a&&s[d]===0;)d++;d===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-d),O.arraycopy(s,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(t===1){a=0;for(let f=0,w=s.length;f!==w;f++){const C=s[f];a=Xe.addOrSubtract(a,C)}return a}a=s[0];const d=s.length,h=this.field;for(let f=1;f<d;f++)a=Xe.addOrSubtract(h.multiply(t,a),s[f]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let s=this.coefficients,a=t.coefficients;if(s.length>a.length){const f=s;s=a,a=f}let d=new Int32Array(a.length);const h=a.length-s.length;O.arraycopy(a,0,d,0,h);for(let f=h;f<a.length;f++)d[f]=Xe.addOrSubtract(s[f-h],a[f]);return new tt(this.field,d)}multiply(t){if(!this.field.equals(t.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,d=t.coefficients,h=d.length,f=new Int32Array(a+h-1),w=this.field;for(let C=0;C<a;C++){const E=s[C];for(let I=0;I<h;I++)f[C+I]=Xe.addOrSubtract(f[C+I],w.multiply(E,d[I]))}return new tt(w,f)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const s=this.coefficients.length,a=this.field,d=new Int32Array(s),h=this.coefficients;for(let f=0;f<s;f++)d[f]=a.multiply(h[f],t);return new tt(a,d)}multiplyByMonomial(t,s){if(t<0)throw new _;if(s===0)return this.field.getZero();const a=this.coefficients,d=a.length,h=new Int32Array(d+t),f=this.field;for(let w=0;w<d;w++)h[w]=f.multiply(a[w],s);return new tt(f,h)}divide(t){if(!this.field.equals(t.field))throw new _("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new _("Divide by 0");const s=this.field;let a=s.getZero(),d=this;const h=t.getCoefficient(t.getDegree()),f=s.inverse(h);for(;d.getDegree()>=t.getDegree()&&!d.isZero();){const w=d.getDegree()-t.getDegree(),C=s.multiply(d.getCoefficient(d.getDegree()),f),E=t.multiplyByMonomial(w,C),I=s.buildMonomial(w,C);a=a.addOrSubtract(I),d=d.addOrSubtract(E)}return[a,d]}toString(){let t="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),s===0||a!==1){const d=this.field.log(a);d===0?t+="1":d===1?t+="a":(t+="a^",t+=d)}s!==0&&(s===1?t+="x":(t+="x^",t+=s))}}return t}}class vt extends y{}vt.kind="ArithmeticException";class nt extends Xe{constructor(t,s,a){super(),this.primitive=t,this.size=s,this.generatorBase=a;const d=new Int32Array(s);let h=1;for(let w=0;w<s;w++)d[w]=h,h*=2,h>=s&&(h^=t,h&=s-1);this.expTable=d;const f=new Int32Array(s);for(let w=0;w<s-1;w++)f[d[w]]=w;this.logTable=f,this.zero=new tt(this,Int32Array.from([0])),this.one=new tt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,s){if(t<0)throw new _;if(s===0)return this.zero;const a=new Int32Array(t+1);return a[0]=s,new tt(this,a)}inverse(t){if(t===0)throw new vt;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,s){return t===0||s===0?0:this.expTable[(this.logTable[t]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}nt.AZTEC_DATA_12=new nt(4201,4096,1),nt.AZTEC_DATA_10=new nt(1033,1024,1),nt.AZTEC_DATA_6=new nt(67,64,1),nt.AZTEC_PARAM=new nt(19,16,1),nt.QR_CODE_FIELD_256=new nt(285,256,0),nt.DATA_MATRIX_FIELD_256=new nt(301,256,1),nt.AZTEC_DATA_8=nt.DATA_MATRIX_FIELD_256,nt.MAXICODE_FIELD_64=nt.AZTEC_DATA_6;class on extends y{}on.kind="ReedSolomonException";class je extends y{}je.kind="IllegalStateException";class Me{constructor(t){this.field=t}decode(t,s){const a=this.field,d=new tt(a,t),h=new Int32Array(s);let f=!0;for(let G=0;G<s;G++){const Z=d.evaluateAt(a.exp(G+a.getGeneratorBase()));h[h.length-1-G]=Z,Z!==0&&(f=!1)}if(f)return;const w=new tt(a,h),C=this.runEuclideanAlgorithm(a.buildMonomial(s,1),w,s),E=C[0],I=C[1],j=this.findErrorLocations(E),B=this.findErrorMagnitudes(I,j);for(let G=0;G<j.length;G++){const Z=t.length-1-a.log(j[G]);if(Z<0)throw new on("Bad error location");t[Z]=nt.addOrSubtract(t[Z],B[G])}}runEuclideanAlgorithm(t,s,a){if(t.getDegree()<s.getDegree()){const G=t;t=s,s=G}const d=this.field;let h=t,f=s,w=d.getZero(),C=d.getOne();for(;f.getDegree()>=(a/2|0);){let G=h,Z=w;if(h=f,w=C,h.isZero())throw new on("r_{i-1} was zero");f=G;let J=d.getZero();const oe=h.getCoefficient(h.getDegree()),me=d.inverse(oe);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){const ke=f.getDegree()-h.getDegree(),Oe=d.multiply(f.getCoefficient(f.getDegree()),me);J=J.addOrSubtract(d.buildMonomial(ke,Oe)),f=f.addOrSubtract(h.multiplyByMonomial(ke,Oe))}if(C=J.multiply(w).addOrSubtract(Z),f.getDegree()>=h.getDegree())throw new je("Division algorithm failed to reduce polynomial?")}const E=C.getCoefficient(0);if(E===0)throw new on("sigmaTilde(0) was zero");const I=d.inverse(E),j=C.multiplyScalar(I),B=f.multiplyScalar(I);return[j,B]}findErrorLocations(t){const s=t.getDegree();if(s===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(s);let d=0;const h=this.field;for(let f=1;f<h.getSize()&&d<s;f++)t.evaluateAt(f)===0&&(a[d]=h.inverse(f),d++);if(d!==s)throw new on("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,s){const a=s.length,d=new Int32Array(a),h=this.field;for(let f=0;f<a;f++){const w=h.inverse(s[f]);let C=1;for(let E=0;E<a;E++)if(f!==E){const I=h.multiply(s[E],w),j=(I&1)===0?I|1:I&-2;C=h.multiply(C,j)}d[f]=h.multiply(t.evaluateAt(w),h.inverse(C)),h.getGeneratorBase()!==0&&(d[f]=h.multiply(d[f],w))}return d}}var Je;(function(P){P[P.UPPER=0]="UPPER",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.DIGIT=3]="DIGIT",P[P.PUNCT=4]="PUNCT",P[P.BINARY=5]="BINARY"})(Je||(Je={}));class st{decode(t){this.ddata=t;let s=t.getBits(),a=this.extractBits(s),d=this.correctBits(a),h=st.convertBoolArrayToByteArray(d),f=st.getEncodedData(d),w=new Le(h,f,null,null);return w.setNumBits(d.length),w}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let s=t.length,a=Je.UPPER,d=Je.UPPER,h="",f=0;for(;f<s;)if(d===Je.BINARY){if(s-f<5)break;let w=st.readCode(t,f,5);if(f+=5,w===0){if(s-f<11)break;w=st.readCode(t,f,11)+31,f+=11}for(let C=0;C<w;C++){if(s-f<8){f=s;break}const E=st.readCode(t,f,8);h+=de.castAsNonUtf8Char(E),f+=8}d=a}else{let w=d===Je.DIGIT?4:5;if(s-f<w)break;let C=st.readCode(t,f,w);f+=w;let E=st.getCharacter(d,C);E.startsWith("CTRL_")?(a=d,d=st.getTable(E.charAt(5)),E.charAt(6)==="L"&&(a=d)):(h+=E,d=a)}return h}static getTable(t){switch(t){case"L":return Je.LOWER;case"P":return Je.PUNCT;case"M":return Je.MIXED;case"D":return Je.DIGIT;case"B":return Je.BINARY;case"U":default:return Je.UPPER}}static getCharacter(t,s){switch(t){case Je.UPPER:return st.UPPER_TABLE[s];case Je.LOWER:return st.LOWER_TABLE[s];case Je.MIXED:return st.MIXED_TABLE[s];case Je.PUNCT:return st.PUNCT_TABLE[s];case Je.DIGIT:return st.DIGIT_TABLE[s];default:throw new je("Bad table")}}correctBits(t){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=nt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=nt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=nt.AZTEC_DATA_10):(a=12,s=nt.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),h=t.length/a;if(h<d)throw new V;let f=t.length%a,w=new Int32Array(h);for(let B=0;B<h;B++,f+=a)w[B]=st.readCode(t,f,a);try{new Me(s).decode(w,h-d)}catch(B){throw new V(B)}let C=(1<<a)-1,E=0;for(let B=0;B<d;B++){let G=w[B];if(G===0||G===C)throw new V;(G===1||G===C-1)&&E++}let I=new Array(d*a-E),j=0;for(let B=0;B<d;B++){let G=w[B];if(G===1||G===C-1)I.fill(G>1,j,j+a-1),j+=a-1;else for(let Z=a-1;Z>=0;--Z)I[j++]=(G&1<<Z)!==0}return I}extractBits(t){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),d=(s?11:14)+a*4,h=new Int32Array(d),f=new Array(this.totalBitsInLayer(a,s));if(s)for(let w=0;w<h.length;w++)h[w]=w;else{let w=d+1+2*F.truncDivision(F.truncDivision(d,2)-1,15),C=d/2,E=F.truncDivision(w,2);for(let I=0;I<C;I++){let j=I+F.truncDivision(I,15);h[C-I-1]=E-j-1,h[C+I]=E+j+1}}for(let w=0,C=0;w<a;w++){let E=(a-w)*4+(s?9:12),I=w*2,j=d-1-I;for(let B=0;B<E;B++){let G=B*2;for(let Z=0;Z<2;Z++)f[C+G+Z]=t.get(h[I+Z],h[I+B]),f[C+2*E+G+Z]=t.get(h[I+B],h[j-Z]),f[C+4*E+G+Z]=t.get(h[j-Z],h[j-B]),f[C+6*E+G+Z]=t.get(h[j-B],h[I+Z])}C+=E*8}return f}static readCode(t,s,a){let d=0;for(let h=s;h<s+a;h++)d<<=1,t[h]&&(d|=1);return d}static readByte(t,s){let a=t.length-s;return a>=8?st.readCode(t,s,8):st.readCode(t,s,a)<<8-a}static convertBoolArrayToByteArray(t){let s=new Uint8Array((t.length+7)/8);for(let a=0;a<s.length;a++)s[a]=st.readByte(t,8*a);return s}totalBitsInLayer(t,s){return((s?88:112)+16*t)*t}}st.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],st.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],st.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],st.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],st.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ht{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,s,a,d){const h=t-a,f=s-d;return Math.sqrt(h*h+f*f)}static sum(t){let s=0;for(let a=0,d=t.length;a!==d;a++){const h=t[a];s+=h}return s}}class dr{static floatToIntBits(t){return t}}dr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(t,s){this.x=t,this.y=s}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof ze){const s=t;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*dr.floatToIntBits(this.x)+dr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const s=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),d=this.distance(t[0],t[2]);let h,f,w;if(a>=s&&a>=d?(f=t[0],h=t[1],w=t[2]):d>=a&&d>=s?(f=t[1],h=t[0],w=t[2]):(f=t[2],h=t[0],w=t[1]),this.crossProductZ(h,f,w)<0){const C=h;h=w,w=C}t[0]=h,t[1]=f,t[2]=w}static distance(t,s){return ht.distance(t.x,t.y,s.x,s.y)}static crossProductZ(t,s,a){const d=s.x,h=s.y;return(a.x-d)*(t.y-h)-(a.y-h)*(t.x-d)}}class ri{constructor(t,s){this.bits=t,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Hi extends ri{constructor(t,s,a,d,h){super(t,s),this.compact=a,this.nbDatablocks=d,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Kn{constructor(t,s,a,d){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),s==null&&(s=Kn.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),d==null&&(d=t.getHeight()/2|0);const h=s/2|0;if(this.leftInit=a-h,this.rightInit=a+h,this.upInit=d-h,this.downInit=d+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}detect(){let t=this.leftInit,s=this.rightInit,a=this.upInit,d=this.downInit,h=!1,f=!0,w=!1,C=!1,E=!1,I=!1,j=!1;const B=this.width,G=this.height;for(;f;){f=!1;let Z=!0;for(;(Z||!C)&&s<B;)Z=this.containsBlackPoint(a,d,s,!1),Z?(s++,f=!0,C=!0):C||s++;if(s>=B){h=!0;break}let J=!0;for(;(J||!E)&&d<G;)J=this.containsBlackPoint(t,s,d,!0),J?(d++,f=!0,E=!0):E||d++;if(d>=G){h=!0;break}let oe=!0;for(;(oe||!I)&&t>=0;)oe=this.containsBlackPoint(a,d,t,!1),oe?(t--,f=!0,I=!0):I||t--;if(t<0){h=!0;break}let me=!0;for(;(me||!j)&&a>=0;)me=this.containsBlackPoint(t,s,a,!0),me?(a--,f=!0,j=!0):j||a--;if(a<0){h=!0;break}f&&(w=!0)}if(!h&&w){const Z=s-t;let J=null;for(let Oe=1;J===null&&Oe<Z;Oe++)J=this.getBlackPointOnSegment(t,d-Oe,t+Oe,d);if(J==null)throw new ie;let oe=null;for(let Oe=1;oe===null&&Oe<Z;Oe++)oe=this.getBlackPointOnSegment(t,a+Oe,t+Oe,a);if(oe==null)throw new ie;let me=null;for(let Oe=1;me===null&&Oe<Z;Oe++)me=this.getBlackPointOnSegment(s,a+Oe,s-Oe,a);if(me==null)throw new ie;let ke=null;for(let Oe=1;ke===null&&Oe<Z;Oe++)ke=this.getBlackPointOnSegment(s,d-Oe,s-Oe,d);if(ke==null)throw new ie;return this.centerEdges(ke,J,me,oe)}else throw new ie}getBlackPointOnSegment(t,s,a,d){const h=ht.round(ht.distance(t,s,a,d)),f=(a-t)/h,w=(d-s)/h,C=this.image;for(let E=0;E<h;E++){const I=ht.round(t+E*f),j=ht.round(s+E*w);if(C.get(I,j))return new ze(I,j)}return null}centerEdges(t,s,a,d){const h=t.getX(),f=t.getY(),w=s.getX(),C=s.getY(),E=a.getX(),I=a.getY(),j=d.getX(),B=d.getY(),G=Kn.CORR;return h<this.width/2?[new ze(j-G,B+G),new ze(w+G,C+G),new ze(E-G,I-G),new ze(h+G,f-G)]:[new ze(j+G,B+G),new ze(w+G,C-G),new ze(E-G,I+G),new ze(h-G,f-G)]}containsBlackPoint(t,s,a,d){const h=this.image;if(d){for(let f=t;f<=s;f++)if(h.get(f,a))return!0}else for(let f=t;f<=s;f++)if(h.get(a,f))return!0;return!1}}Kn.INIT_SIZE=10,Kn.CORR=1;class zn{static checkAndNudgePoints(t,s){const a=t.getWidth(),d=t.getHeight();let h=!0;for(let f=0;f<s.length&&h;f+=2){const w=Math.floor(s[f]),C=Math.floor(s[f+1]);if(w<-1||w>a||C<-1||C>d)throw new ie;h=!1,w===-1?(s[f]=0,h=!0):w===a&&(s[f]=a-1,h=!0),C===-1?(s[f+1]=0,h=!0):C===d&&(s[f+1]=d-1,h=!0)}h=!0;for(let f=s.length-2;f>=0&&h;f-=2){const w=Math.floor(s[f]),C=Math.floor(s[f+1]);if(w<-1||w>a||C<-1||C>d)throw new ie;h=!1,w===-1?(s[f]=0,h=!0):w===a&&(s[f]=a-1,h=!0),C===-1?(s[f+1]=0,h=!0):C===d&&(s[f+1]=d-1,h=!0)}}}class Dn{constructor(t,s,a,d,h,f,w,C,E){this.a11=t,this.a21=s,this.a31=a,this.a12=d,this.a22=h,this.a32=f,this.a13=w,this.a23=C,this.a33=E}static quadrilateralToQuadrilateral(t,s,a,d,h,f,w,C,E,I,j,B,G,Z,J,oe){const me=Dn.quadrilateralToSquare(t,s,a,d,h,f,w,C);return Dn.squareToQuadrilateral(E,I,j,B,G,Z,J,oe).times(me)}transformPoints(t){const s=t.length,a=this.a11,d=this.a12,h=this.a13,f=this.a21,w=this.a22,C=this.a23,E=this.a31,I=this.a32,j=this.a33;for(let B=0;B<s;B+=2){const G=t[B],Z=t[B+1],J=h*G+C*Z+j;t[B]=(a*G+f*Z+E)/J,t[B+1]=(d*G+w*Z+I)/J}}transformPointsWithValues(t,s){const a=this.a11,d=this.a12,h=this.a13,f=this.a21,w=this.a22,C=this.a23,E=this.a31,I=this.a32,j=this.a33,B=t.length;for(let G=0;G<B;G++){const Z=t[G],J=s[G],oe=h*Z+C*J+j;t[G]=(a*Z+f*J+E)/oe,s[G]=(d*Z+w*J+I)/oe}}static squareToQuadrilateral(t,s,a,d,h,f,w,C){const E=t-a+h-w,I=s-d+f-C;if(E===0&&I===0)return new Dn(a-t,h-a,t,d-s,f-d,s,0,0,1);{const j=a-h,B=w-h,G=d-f,Z=C-f,J=j*Z-B*G,oe=(E*Z-B*I)/J,me=(j*I-E*G)/J;return new Dn(a-t+oe*a,w-t+me*w,t,d-s+oe*d,C-s+me*C,s,oe,me,1)}}static quadrilateralToSquare(t,s,a,d,h,f,w,C){return Dn.squareToQuadrilateral(t,s,a,d,h,f,w,C).buildAdjoint()}buildAdjoint(){return new Dn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Dn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Fr extends zn{sampleGrid(t,s,a,d,h,f,w,C,E,I,j,B,G,Z,J,oe,me,ke,Oe){const Ne=Dn.quadrilateralToQuadrilateral(d,h,f,w,C,E,I,j,B,G,Z,J,oe,me,ke,Oe);return this.sampleGridWithTransform(t,s,a,Ne)}sampleGridWithTransform(t,s,a,d){if(s<=0||a<=0)throw new ie;const h=new Ce(s,a),f=new Float32Array(2*s);for(let w=0;w<a;w++){const C=f.length,E=w+.5;for(let I=0;I<C;I+=2)f[I]=I/2+.5,f[I+1]=E;d.transformPoints(f),zn.checkAndNudgePoints(t,f);try{for(let I=0;I<C;I+=2)t.get(Math.floor(f[I]),Math.floor(f[I+1]))&&h.set(I/2,w)}catch{throw new ie}}return h}}class St{static setGridSampler(t){St.gridSampler=t}static getInstance(){return St.gridSampler}}St.gridSampler=new Fr;class It{constructor(t,s){this.x=t,this.y=s}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Vn{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(t){let f=a[0];a[0]=a[2],a[2]=f}this.extractParameters(a);let d=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),h=this.getMatrixCornerPoints(a);return new Hi(d,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ie;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],s),this.sampleLine(t[1],t[2],s),this.sampleLine(t[2],t[3],s),this.sampleLine(t[3],t[0],s)]);this.shift=this.getRotation(a,s);let d=0;for(let f=0;f<4;f++){let w=a[(this.shift+f)%4];this.compact?(d<<=7,d+=w>>1&127):(d<<=10,d+=(w>>2&992)+(w>>1&31))}let h=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(t,s){let a=0;t.forEach((d,h,f)=>{let w=(d>>s-2<<1)+(d&1);a=(a<<3)+w}),a=((a&1)<<11)+(a>>1);for(let d=0;d<4;d++)if(F.bitCount(a^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new ie}getCorrectedParameterData(t,s){let a,d;s?(a=7,d=2):(a=10,d=4);let h=a-d,f=new Int32Array(a);for(let C=a-1;C>=0;--C)f[C]=t&15,t>>=4;try{new Me(nt.AZTEC_PARAM).decode(f,h)}catch{throw new ie}let w=0;for(let C=0;C<d;C++)w=(w<<4)+f[C];return w}getBullsEyeCorners(t){let s=t,a=t,d=t,h=t,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let j=this.getFirstDifferent(s,f,1,-1),B=this.getFirstDifferent(a,f,1,1),G=this.getFirstDifferent(d,f,-1,1),Z=this.getFirstDifferent(h,f,-1,-1);if(this.nbCenterLayers>2){let J=this.distancePoint(Z,j)*this.nbCenterLayers/(this.distancePoint(h,s)*(this.nbCenterLayers+2));if(J<.75||J>1.25||!this.isWhiteOrBlackRectangle(j,B,G,Z))break}s=j,a=B,d=G,h=Z,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;let w=new ze(s.getX()+.5,s.getY()-.5),C=new ze(a.getX()+.5,a.getY()+.5),E=new ze(d.getX()-.5,d.getY()+.5),I=new ze(h.getX()-.5,h.getY()-.5);return this.expandSquare([w,C,E,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,s,a,d;try{let w=new Kn(this.image).detect();t=w[0],s=w[1],a=w[2],d=w[3]}catch{let C=this.image.getWidth()/2,E=this.image.getHeight()/2;t=this.getFirstDifferent(new It(C+7,E-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new It(C+7,E+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new It(C-7,E+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new It(C-7,E-7),!1,-1,-1).toResultPoint()}let h=ht.round((t.getX()+d.getX()+s.getX()+a.getX())/4),f=ht.round((t.getY()+d.getY()+s.getY()+a.getY())/4);try{let w=new Kn(this.image,15,h,f).detect();t=w[0],s=w[1],a=w[2],d=w[3]}catch{t=this.getFirstDifferent(new It(h+7,f-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new It(h+7,f+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new It(h-7,f+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new It(h-7,f-7),!1,-1,-1).toResultPoint()}return h=ht.round((t.getX()+d.getX()+s.getX()+a.getX())/4),f=ht.round((t.getY()+d.getY()+s.getY()+a.getY())/4),new It(h,f)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,s,a,d,h){let f=St.getInstance(),w=this.getDimension(),C=w/2-this.nbCenterLayers,E=w/2+this.nbCenterLayers;return f.sampleGrid(t,w,w,C,C,E,C,E,E,C,E,s.getX(),s.getY(),a.getX(),a.getY(),d.getX(),d.getY(),h.getX(),h.getY())}sampleLine(t,s,a){let d=0,h=this.distanceResultPoint(t,s),f=h/a,w=t.getX(),C=t.getY(),E=f*(s.getX()-t.getX())/h,I=f*(s.getY()-t.getY())/h;for(let j=0;j<a;j++)this.image.get(ht.round(w+j*E),ht.round(C+j*I))&&(d|=1<<a-j-1);return d}isWhiteOrBlackRectangle(t,s,a,d){let h=3;t=new It(t.getX()-h,t.getY()+h),s=new It(s.getX()-h,s.getY()-h),a=new It(a.getX()+h,a.getY()-h),d=new It(d.getX()+h,d.getY()+h);let f=this.getColor(d,t);if(f===0)return!1;let w=this.getColor(t,s);return w!==f||(w=this.getColor(s,a),w!==f)?!1:(w=this.getColor(a,d),w===f)}getColor(t,s){let a=this.distancePoint(t,s),d=(s.getX()-t.getX())/a,h=(s.getY()-t.getY())/a,f=0,w=t.getX(),C=t.getY(),E=this.image.get(t.getX(),t.getY()),I=Math.ceil(a);for(let B=0;B<I;B++)w+=d,C+=h,this.image.get(ht.round(w),ht.round(C))!==E&&f++;let j=f/a;return j>.1&&j<.9?0:j<=.1===E?1:-1}getFirstDifferent(t,s,a,d){let h=t.getX()+a,f=t.getY()+d;for(;this.isValid(h,f)&&this.image.get(h,f)===s;)h+=a,f+=d;for(h-=a,f-=d;this.isValid(h,f)&&this.image.get(h,f)===s;)h+=a;for(h-=a;this.isValid(h,f)&&this.image.get(h,f)===s;)f+=d;return f-=d,new It(h,f)}expandSquare(t,s,a){let d=a/(2*s),h=t[0].getX()-t[2].getX(),f=t[0].getY()-t[2].getY(),w=(t[0].getX()+t[2].getX())/2,C=(t[0].getY()+t[2].getY())/2,E=new ze(w+d*h,C+d*f),I=new ze(w-d*h,C-d*f);h=t[1].getX()-t[3].getX(),f=t[1].getY()-t[3].getY(),w=(t[1].getX()+t[3].getX())/2,C=(t[1].getY()+t[3].getY())/2;let j=new ze(w+d*h,C+d*f),B=new ze(w-d*h,C-d*f);return[E,j,I,B]}isValid(t,s){return t>=0&&t<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(t){let s=ht.round(t.getX()),a=ht.round(t.getY());return this.isValid(s,a)}distancePoint(t,s){return ht.distance(t.getX(),t.getY(),s.getX(),s.getY())}distanceResultPoint(t,s){return ht.distance(t.getX(),t.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class _i{decode(t,s=null){let a=null,d=new Vn(t.getBlackMatrix()),h=null,f=null;try{let I=d.detectMirror(!1);h=I.getPoints(),this.reportFoundResultPoints(s,h),f=new st().decode(I)}catch(I){a=I}if(f==null)try{let I=d.detectMirror(!0);h=I.getPoints(),this.reportFoundResultPoints(s,h),f=new st().decode(I)}catch(I){throw a??I}let w=new Te(f.getText(),f.getRawBytes(),f.getNumBits(),h,ee.AZTEC,O.currentTimeMillis()),C=f.getByteSegments();C!=null&&w.putMetadata(Ee.BYTE_SEGMENTS,C);let E=f.getECLevel();return E!=null&&w.putMetadata(Ee.ERROR_CORRECTION_LEVEL,E),w}reportFoundResultPoints(t,s){if(t!=null){let a=t.get(Y.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((d,h,f)=>{a.foundPossibleResultPoint(d)})}}reset(){}}class Md extends Ae{constructor(t=500){super(new _i,t)}}class an{decode(t,s){try{return this.doDecode(t,s)}catch{if(s&&s.get(Y.TRY_HARDER)===!0&&t.isRotateSupported()){const h=t.rotateCounterClockwise(),f=this.doDecode(h,s),w=f.getResultMetadata();let C=270;w!==null&&w.get(Ee.ORIENTATION)===!0&&(C=C+w.get(Ee.ORIENTATION)%360),f.putMetadata(Ee.ORIENTATION,C);const E=f.getResultPoints();if(E!==null){const I=h.getHeight();for(let j=0;j<E.length;j++)E[j]=new ze(I-E[j].getY()-1,E[j].getX())}return f}else throw new ie}}reset(){}doDecode(t,s){const a=t.getWidth(),d=t.getHeight();let h=new $(a);const f=s&&s.get(Y.TRY_HARDER)===!0,w=Math.max(1,d>>(f?8:5));let C;f?C=d:C=15;const E=Math.trunc(d/2);for(let I=0;I<C;I++){const j=Math.trunc((I+1)/2),B=(I&1)===0,G=E+w*(B?j:-j);if(G<0||G>=d)break;try{h=t.getBlackRow(G,h)}catch{continue}for(let Z=0;Z<2;Z++){if(Z===1&&(h.reverse(),s&&s.get(Y.NEED_RESULT_POINT_CALLBACK)===!0)){const J=new Map;s.forEach((oe,me)=>J.set(me,oe)),J.delete(Y.NEED_RESULT_POINT_CALLBACK),s=J}try{const J=this.decodeRow(G,h,s);if(Z===1){J.putMetadata(Ee.ORIENTATION,180);const oe=J.getResultPoints();oe!==null&&(oe[0]=new ze(a-oe[0].getX()-1,oe[0].getY()),oe[1]=new ze(a-oe[1].getX()-1,oe[1].getY()))}return J}catch{}}}throw new ie}static recordPattern(t,s,a){const d=a.length;for(let E=0;E<d;E++)a[E]=0;const h=t.getSize();if(s>=h)throw new ie;let f=!t.get(s),w=0,C=s;for(;C<h;){if(t.get(C)!==f)a[w]++;else{if(++w===d)break;a[w]=1,f=!f}C++}if(!(w===d||w===d-1&&C===h))throw new ie}static recordPatternInReverse(t,s,a){let d=a.length,h=t.get(s);for(;s>0&&d>=0;)t.get(--s)!==h&&(d--,h=!h);if(d>=0)throw new ie;an.recordPattern(t,s+1,a)}static patternMatchVariance(t,s,a){const d=t.length;let h=0,f=0;for(let E=0;E<d;E++)h+=t[E],f+=s[E];if(h<f)return Number.POSITIVE_INFINITY;const w=h/f;a*=w;let C=0;for(let E=0;E<d;E++){const I=t[E],j=s[E]*w,B=I>j?I-j:j-I;if(B>a)return Number.POSITIVE_INFINITY;C+=B}return C/h}}class De extends an{static findStartPattern(t){const s=t.getSize(),a=t.getNextSet(0);let d=0,h=Int32Array.from([0,0,0,0,0,0]),f=a,w=!1;const C=6;for(let E=a;E<s;E++)if(t.get(E)!==w)h[d]++;else{if(d===C-1){let I=De.MAX_AVG_VARIANCE,j=-1;for(let B=De.CODE_START_A;B<=De.CODE_START_C;B++){const G=an.patternMatchVariance(h,De.CODE_PATTERNS[B],De.MAX_INDIVIDUAL_VARIANCE);G<I&&(I=G,j=B)}if(j>=0&&t.isRange(Math.max(0,f-(E-f)/2),f,!1))return Int32Array.from([f,E,j]);f+=h[0]+h[1],h=h.slice(2,h.length-1),h[d-1]=0,h[d]=0,d--}else d++;h[d]=1,w=!w}throw new ie}static decodeCode(t,s,a){an.recordPattern(t,a,s);let d=De.MAX_AVG_VARIANCE,h=-1;for(let f=0;f<De.CODE_PATTERNS.length;f++){const w=De.CODE_PATTERNS[f],C=this.patternMatchVariance(s,w,De.MAX_INDIVIDUAL_VARIANCE);C<d&&(d=C,h=f)}if(h>=0)return h;throw new ie}decodeRow(t,s,a){const d=a&&a.get(Y.ASSUME_GS1)===!0,h=De.findStartPattern(s),f=h[2];let w=0;const C=new Uint8Array(20);C[w++]=f;let E;switch(f){case De.CODE_START_A:E=De.CODE_CODE_A;break;case De.CODE_START_B:E=De.CODE_CODE_B;break;case De.CODE_START_C:E=De.CODE_CODE_C;break;default:throw new V}let I=!1,j=!1,B="",G=h[0],Z=h[1];const J=Int32Array.from([0,0,0,0,0,0]);let oe=0,me=0,ke=f,Oe=0,Ne=!0,At=!1,mt=!1;for(;!I;){const ai=j;switch(j=!1,oe=me,me=De.decodeCode(s,J,Z),C[w++]=me,me!==De.CODE_STOP&&(Ne=!0),me!==De.CODE_STOP&&(Oe++,ke+=Oe*me),G=Z,Z+=J.reduce((bs,bl)=>bs+bl,0),me){case De.CODE_START_A:case De.CODE_START_B:case De.CODE_START_C:throw new V}switch(E){case De.CODE_CODE_A:if(me<64)mt===At?B+=String.fromCharCode(32+me):B+=String.fromCharCode(32+me+128),mt=!1;else if(me<96)mt===At?B+=String.fromCharCode(me-64):B+=String.fromCharCode(me+64),mt=!1;else switch(me!==De.CODE_STOP&&(Ne=!1),me){case De.CODE_FNC_1:d&&(B.length===0?B+="]C1":B+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_A:!At&&mt?(At=!0,mt=!1):At&&mt?(At=!1,mt=!1):mt=!0;break;case De.CODE_SHIFT:j=!0,E=De.CODE_CODE_B;break;case De.CODE_CODE_B:E=De.CODE_CODE_B;break;case De.CODE_CODE_C:E=De.CODE_CODE_C;break;case De.CODE_STOP:I=!0;break}break;case De.CODE_CODE_B:if(me<96)mt===At?B+=String.fromCharCode(32+me):B+=String.fromCharCode(32+me+128),mt=!1;else switch(me!==De.CODE_STOP&&(Ne=!1),me){case De.CODE_FNC_1:d&&(B.length===0?B+="]C1":B+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_B:!At&&mt?(At=!0,mt=!1):At&&mt?(At=!1,mt=!1):mt=!0;break;case De.CODE_SHIFT:j=!0,E=De.CODE_CODE_A;break;case De.CODE_CODE_A:E=De.CODE_CODE_A;break;case De.CODE_CODE_C:E=De.CODE_CODE_C;break;case De.CODE_STOP:I=!0;break}break;case De.CODE_CODE_C:if(me<100)me<10&&(B+="0"),B+=me;else switch(me!==De.CODE_STOP&&(Ne=!1),me){case De.CODE_FNC_1:d&&(B.length===0?B+="]C1":B+="");break;case De.CODE_CODE_A:E=De.CODE_CODE_A;break;case De.CODE_CODE_B:E=De.CODE_CODE_B;break;case De.CODE_STOP:I=!0;break}break}ai&&(E=E===De.CODE_CODE_A?De.CODE_CODE_B:De.CODE_CODE_A)}const er=Z-G;if(Z=s.getNextUnset(Z),!s.isRange(Z,Math.min(s.getSize(),Z+(Z-G)/2),!1))throw new ie;if(ke-=Oe*oe,ke%103!==oe)throw new T;const Ir=B.length;if(Ir===0)throw new ie;Ir>0&&Ne&&(E===De.CODE_CODE_C?B=B.substring(0,Ir-2):B=B.substring(0,Ir-1));const vn=(h[1]+h[0])/2,Ft=G+er/2,ln=C.length,Gn=new Uint8Array(ln);for(let ai=0;ai<ln;ai++)Gn[ai]=C[ai];const Ki=[new ze(vn,t),new ze(Ft,t)];return new Te(B,Gn,0,Ki,ee.CODE_128,new Date().getTime())}}De.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],De.MAX_AVG_VARIANCE=.25,De.MAX_INDIVIDUAL_VARIANCE=.7,De.CODE_SHIFT=98,De.CODE_CODE_C=99,De.CODE_CODE_B=100,De.CODE_CODE_A=101,De.CODE_FNC_1=102,De.CODE_FNC_2=97,De.CODE_FNC_3=96,De.CODE_FNC_4_A=101,De.CODE_FNC_4_B=100,De.CODE_START_A=103,De.CODE_START_B=104,De.CODE_START_C=105,De.CODE_STOP=106;class xn extends an{constructor(t=!1,s=!1){super(),this.usingCheckDigit=t,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,s,a){let d=this.counters;d.fill(0),this.decodeRowResult="";let h=xn.findAsteriskPattern(s,d),f=s.getNextSet(h[1]),w=s.getSize(),C,E;do{xn.recordPattern(s,f,d);let J=xn.toNarrowWidePattern(d);if(J<0)throw new ie;C=xn.patternToChar(J),this.decodeRowResult+=C,E=f;for(let oe of d)f+=oe;f=s.getNextSet(f)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let J of d)I+=J;let j=f-E-I;if(f!==w&&j*2<I)throw new ie;if(this.usingCheckDigit){let J=this.decodeRowResult.length-1,oe=0;for(let me=0;me<J;me++)oe+=xn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(me));if(this.decodeRowResult.charAt(J)!==xn.ALPHABET_STRING.charAt(oe%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,J)}if(this.decodeRowResult.length===0)throw new ie;let B;this.extendedMode?B=xn.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let G=(h[1]+h[0])/2,Z=E+I/2;return new Te(B,null,0,[new ze(G,t),new ze(Z,t)],ee.CODE_39,new Date().getTime())}static findAsteriskPattern(t,s){let a=t.getSize(),d=t.getNextSet(0),h=0,f=d,w=!1,C=s.length;for(let E=d;E<a;E++)if(t.get(E)!==w)s[h]++;else{if(h===C-1){if(this.toNarrowWidePattern(s)===xn.ASTERISK_ENCODING&&t.isRange(Math.max(0,f-Math.floor((E-f)/2)),f,!1))return[f,E];f+=s[0]+s[1],s.copyWithin(0,2,2+h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,w=!w}throw new ie}static toNarrowWidePattern(t){let s=t.length,a=0,d;do{let h=2147483647;for(let C of t)C<h&&C>a&&(h=C);a=h,d=0;let f=0,w=0;for(let C=0;C<s;C++){let E=t[C];E>a&&(w|=1<<s-1-C,d++,f+=E)}if(d===3){for(let C=0;C<s&&d>0;C++){let E=t[C];if(E>a&&(d--,E*2>=f))return-1}return w}}while(d>3);return-1}static patternToChar(t){for(let s=0;s<xn.CHARACTER_ENCODINGS.length;s++)if(xn.CHARACTER_ENCODINGS[s]===t)return xn.ALPHABET_STRING.charAt(s);if(t===xn.ASTERISK_ENCODING)return"*";throw new ie}static decodeExtended(t){let s=t.length,a="";for(let d=0;d<s;d++){let h=t.charAt(d);if(h==="+"||h==="$"||h==="%"||h==="/"){let f=t.charAt(d+1),w="\0";switch(h){case"+":if(f>="A"&&f<="Z")w=String.fromCharCode(f.charCodeAt(0)+32);else throw new V;break;case"$":if(f>="A"&&f<="Z")w=String.fromCharCode(f.charCodeAt(0)-64);else throw new V;break;case"%":if(f>="A"&&f<="E")w=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")w=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")w=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")w=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")w="\0";else if(f==="V")w="@";else if(f==="W")w="`";else if(f==="X"||f==="Y"||f==="Z")w="";else throw new V;break;case"/":if(f>="A"&&f<="O")w=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")w=":";else throw new V;break}a+=w,d++}else a+=h}return a}}xn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",xn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],xn.ASTERISK_ENCODING=148;class Bt extends an{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,s,a){let d=this.decodeStart(s),h=this.decodeEnd(s),f=new ve;Bt.decodeMiddle(s,d[1],h[0],f);let w=f.toString(),C=null;a!=null&&(C=a.get(Y.ALLOWED_LENGTHS)),C==null&&(C=Bt.DEFAULT_ALLOWED_LENGTHS);let E=w.length,I=!1,j=0;for(let Z of C){if(E===Z){I=!0;break}Z>j&&(j=Z)}if(!I&&E>j&&(I=!0),!I)throw new V;const B=[new ze(d[1],t),new ze(h[0],t)];return new Te(w,null,0,B,ee.ITF,new Date().getTime())}static decodeMiddle(t,s,a,d){let h=new Int32Array(10),f=new Int32Array(5),w=new Int32Array(5);for(h.fill(0),f.fill(0),w.fill(0);s<a;){an.recordPattern(t,s,h);for(let E=0;E<5;E++){let I=2*E;f[E]=h[I],w[E]=h[I+1]}let C=Bt.decodeDigit(f);d.append(C.toString()),C=this.decodeDigit(w),d.append(C.toString()),h.forEach(function(E){s+=E})}}decodeStart(t){let s=Bt.skipWhiteSpace(t),a=Bt.findGuardPattern(t,s,Bt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let d=s-1;a>0&&d>=0&&!t.get(d);d--)a--;if(a!==0)throw new ie}static skipWhiteSpace(t){const s=t.getSize(),a=t.getNextSet(0);if(a===s)throw new ie;return a}decodeEnd(t){t.reverse();try{let s=Bt.skipWhiteSpace(t),a;try{a=Bt.findGuardPattern(t,s,Bt.END_PATTERN_REVERSED[0])}catch(h){h instanceof ie&&(a=Bt.findGuardPattern(t,s,Bt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let d=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-d,a}finally{t.reverse()}}static findGuardPattern(t,s,a){let d=a.length,h=new Int32Array(d),f=t.getSize(),w=!1,C=0,E=s;h.fill(0);for(let I=s;I<f;I++)if(t.get(I)!==w)h[C]++;else{if(C===d-1){if(an.patternMatchVariance(h,a,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE)return[E,I];E+=h[0]+h[1],O.arraycopy(h,2,h,0,C-1),h[C-1]=0,h[C]=0,C--}else C++;h[C]=1,w=!w}throw new ie}static decodeDigit(t){let s=Bt.MAX_AVG_VARIANCE,a=-1,d=Bt.PATTERNS.length;for(let h=0;h<d;h++){let f=Bt.PATTERNS[h],w=an.patternMatchVariance(t,f,Bt.MAX_INDIVIDUAL_VARIANCE);w<s?(s=w,a=h):w===s&&(a=-1)}if(a>=0)return a%10;throw new ie}}Bt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Bt.MAX_AVG_VARIANCE=.38,Bt.MAX_INDIVIDUAL_VARIANCE=.5,Bt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Bt.START_PATTERN=Int32Array.from([1,1,1,1]),Bt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class qt extends an{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let s=!1,a,d=0,h=Int32Array.from([0,0,0]);for(;!s;){h=Int32Array.from([0,0,0]),a=qt.findGuardPattern(t,d,!1,this.START_END_PATTERN,h);let f=a[0];d=a[1];let w=f-(d-f);w>=0&&(s=t.isRange(w,f,!1))}return a}static checkChecksum(t){return qt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let s=t.length;if(s===0)return!1;let a=parseInt(t.charAt(s-1),10);return qt.getStandardUPCEANChecksum(t.substring(0,s-1))===a}static getStandardUPCEANChecksum(t){let s=t.length,a=0;for(let d=s-1;d>=0;d-=2){let h=t.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new V;a+=h}a*=3;for(let d=s-2;d>=0;d-=2){let h=t.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new V;a+=h}return(1e3-a)%10}static decodeEnd(t,s){return qt.findGuardPattern(t,s,!1,qt.START_END_PATTERN,new Int32Array(qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,s,a,d){return this.findGuardPattern(t,s,a,d,new Int32Array(d.length))}static findGuardPattern(t,s,a,d,h){let f=t.getSize();s=a?t.getNextUnset(s):t.getNextSet(s);let w=0,C=s,E=d.length,I=a;for(let j=s;j<f;j++)if(t.get(j)!==I)h[w]++;else{if(w===E-1){if(an.patternMatchVariance(h,d,qt.MAX_INDIVIDUAL_VARIANCE)<qt.MAX_AVG_VARIANCE)return Int32Array.from([C,j]);C+=h[0]+h[1];let B=h.slice(2,h.length-1);for(let G=0;G<w-1;G++)h[G]=B[G];h[w-1]=0,h[w]=0,w--}else w++;h[w]=1,I=!I}throw new ie}static decodeDigit(t,s,a,d){this.recordPattern(t,a,s);let h=this.MAX_AVG_VARIANCE,f=-1,w=d.length;for(let C=0;C<w;C++){let E=d[C],I=an.patternMatchVariance(s,E,qt.MAX_INDIVIDUAL_VARIANCE);I<h&&(h=I,f=C)}if(f>=0)return f;throw new ie}}qt.MAX_AVG_VARIANCE=.48,qt.MAX_INDIVIDUAL_VARIANCE=.7,qt.START_END_PATTERN=Int32Array.from([1,1,1]),qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class $i{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,s,a){let d=this.decodeRowStringBuffer,h=this.decodeMiddle(s,a,d),f=d.toString(),w=$i.parseExtensionString(f),C=[new ze((a[0]+a[1])/2,t),new ze(h,t)],E=new Te(f,null,0,C,ee.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&E.putAllMetadata(w),E}decodeMiddle(t,s,a){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=t.getSize(),f=s[1],w=0;for(let E=0;E<5&&f<h;E++){let I=qt.decodeDigit(t,d,f,qt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+I%10);for(let j of d)f+=j;I>=10&&(w|=1<<4-E),E!==4&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(a.length!==5)throw new ie;let C=this.determineCheckDigit(w);if($i.extensionChecksum(a.toString())!==C)throw new ie;return f}static extensionChecksum(t){let s=t.length,a=0;for(let d=s-2;d>=0;d-=2)a+=t.charAt(d).charCodeAt(0)-48;a*=3;for(let d=s-1;d>=0;d-=2)a+=t.charAt(d).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let s=0;s<10;s++)if(t===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new ie}static parseExtensionString(t){if(t.length!==5)return null;let s=$i.parseExtension5String(t);return s==null?null:new Map([[Ee.SUGGESTED_PRICE,s]])}static parseExtension5String(t){let s;switch(t.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(t.substring(1)),d=(a/100).toString(),h=a%100,f=h<10?"0"+h:h.toString();return s+d+"."+f}}class Js{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,s,a){let d=this.decodeRowStringBuffer,h=this.decodeMiddle(s,a,d),f=d.toString(),w=Js.parseExtensionString(f),C=[new ze((a[0]+a[1])/2,t),new ze(h,t)],E=new Te(f,null,0,C,ee.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&E.putAllMetadata(w),E}decodeMiddle(t,s,a){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=t.getSize(),f=s[1],w=0;for(let C=0;C<2&&f<h;C++){let E=qt.decodeDigit(t,d,f,qt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let I of d)f+=I;E>=10&&(w|=1<<1-C),C!==1&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(a.length!==2)throw new ie;if(parseInt(a.toString())%4!==w)throw new ie;return f}static parseExtensionString(t){return t.length!==2?null:new Map([[Ee.ISSUE_NUMBER,parseInt(t)]])}}class Ho{static decodeRow(t,s,a){let d=qt.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new $i().decodeRow(t,s,d)}catch{return new Js().decodeRow(t,s,d)}}}Ho.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Tt extends qt{constructor(){super(),this.decodeRowStringBuffer="",Tt.L_AND_G_PATTERNS=Tt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let s=Tt.L_PATTERNS[t-10],a=new Int32Array(s.length);for(let d=0;d<s.length;d++)a[d]=s[s.length-d-1];Tt.L_AND_G_PATTERNS[t]=a}}decodeRow(t,s,a){let d=Tt.findStartGuardPattern(s),h=a==null?null:a.get(Y.NEED_RESULT_POINT_CALLBACK);if(h!=null){const Ne=new ze((d[0]+d[1])/2,t);h.foundPossibleResultPoint(Ne)}let f=this.decodeMiddle(s,d,this.decodeRowStringBuffer),w=f.rowOffset,C=f.resultString;if(h!=null){const Ne=new ze(w,t);h.foundPossibleResultPoint(Ne)}let E=this.decodeEnd(s,w);if(h!=null){const Ne=new ze((E[0]+E[1])/2,t);h.foundPossibleResultPoint(Ne)}let I=E[1],j=I+(I-E[0]);if(j>=s.getSize()||!s.isRange(I,j,!1))throw new ie;let B=C.toString();if(B.length<8)throw new V;if(!Tt.checkChecksum(B))throw new T;let G=(d[1]+d[0])/2,Z=(E[1]+E[0])/2,J=this.getBarcodeFormat(),oe=[new ze(G,t),new ze(Z,t)],me=new Te(B,null,0,oe,J,new Date().getTime()),ke=0;try{let Ne=Ho.decodeRow(t,s,E[1]);me.putMetadata(Ee.UPC_EAN_EXTENSION,Ne.getText()),me.putAllMetadata(Ne.getResultMetadata()),me.addResultPoints(Ne.getResultPoints()),ke=Ne.getText().length}catch{}let Oe=a==null?null:a.get(Y.ALLOWED_EAN_EXTENSIONS);if(Oe!=null){let Ne=!1;for(let At in Oe)if(ke.toString()===At){Ne=!0;break}if(!Ne)throw new ie}return me}decodeEnd(t,s){return Tt.findGuardPattern(t,s,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Tt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let s=t.length;if(s===0)return!1;let a=parseInt(t.charAt(s-1),10);return Tt.getStandardUPCEANChecksum(t.substring(0,s-1))===a}static getStandardUPCEANChecksum(t){let s=t.length,a=0;for(let d=s-1;d>=0;d-=2){let h=t.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new V;a+=h}a*=3;for(let d=s-2;d>=0;d-=2){let h=t.charAt(d).charCodeAt(0)-48;if(h<0||h>9)throw new V;a+=h}return(1e3-a)%10}}class hr extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,s,a){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=t.getSize(),f=s[1],w=0;for(let E=0;E<6&&f<h;E++){let I=Tt.decodeDigit(t,d,f,Tt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+I%10);for(let j of d)f+=j;I>=10&&(w|=1<<5-E)}a=hr.determineFirstDigit(a,w),f=Tt.findGuardPattern(t,f,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&f<h;E++){let I=Tt.decodeDigit(t,d,f,Tt.L_PATTERNS);a+=String.fromCharCode(48+I);for(let j of d)f+=j}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return ee.EAN_13}static determineFirstDigit(t,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new ie}}hr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class tl extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,s,a){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=t.getSize(),f=s[1];for(let C=0;C<4&&f<h;C++){let E=Tt.decodeDigit(t,d,f,Tt.L_PATTERNS);a+=String.fromCharCode(48+E);for(let I of d)f+=I}f=Tt.findGuardPattern(t,f,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&f<h;C++){let E=Tt.decodeDigit(t,d,f,Tt.L_PATTERNS);a+=String.fromCharCode(48+E);for(let I of d)f+=I}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return ee.EAN_8}}class nl extends Tt{constructor(){super(...arguments),this.ean13Reader=new hr}getBarcodeFormat(){return ee.UPC_A}decode(t,s){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,s,a))}decodeMiddle(t,s,a){return this.ean13Reader.decodeMiddle(t,s,a)}maybeReturnResult(t){let s=t.getText();if(s.charAt(0)==="0"){let a=new Te(s.substring(1),null,null,t.getResultPoints(),ee.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new ie}reset(){this.ean13Reader.reset()}}class fr extends Tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,s,a){const d=this.decodeMiddleCounters.map(E=>E);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const h=t.getSize();let f=s[1],w=0;for(let E=0;E<6&&f<h;E++){const I=fr.decodeDigit(t,d,f,fr.L_AND_G_PATTERNS);a+=String.fromCharCode(48+I%10);for(let j of d)f+=j;I>=10&&(w|=1<<5-E)}let C=fr.determineNumSysAndCheckDigit(a,w);return{rowOffset:f,resultString:C}}decodeEnd(t,s){return fr.findGuardPatternWithoutCounters(t,s,!0,fr.MIDDLE_END_PATTERN)}checkChecksum(t){return Tt.checkChecksum(fr.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,s){for(let a=0;a<=1;a++)for(let d=0;d<10;d++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][d]){let h=String.fromCharCode(48+a),f=String.fromCharCode(48+d);return h+t+f}throw ie.getNotFoundInstance()}getBarcodeFormat(){return ee.UPC_E}static convertUPCEtoUPCA(t){const s=t.slice(1,7).split("").map(h=>h.charCodeAt(0)),a=new ve;a.append(t.charAt(0));let d=s[5];switch(d){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(d),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(d);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}fr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class $o extends an{constructor(t){super();let s=t==null?null:t.get(Y.POSSIBLE_FORMATS),a=[];o(s)?(a.push(new hr),a.push(new nl),a.push(new tl),a.push(new fr)):(s.indexOf(ee.EAN_13)>-1&&a.push(new hr),s.indexOf(ee.UPC_A)>-1&&a.push(new nl),s.indexOf(ee.EAN_8)>-1&&a.push(new tl),s.indexOf(ee.UPC_E)>-1&&a.push(new fr)),this.readers=a}decodeRow(t,s,a){for(let d of this.readers)try{const h=d.decodeRow(t,s,a),f=h.getBarcodeFormat()===ee.EAN_13&&h.getText().charAt(0)==="0",w=a==null?null:a.get(Y.POSSIBLE_FORMATS),C=w==null||w.includes(ee.UPC_A);if(f&&C){const E=h.getRawBytes(),I=new Te(h.getText().substring(1),E,E?E.length:null,h.getResultPoints(),ee.UPC_A);return I.putAllMetadata(h.getResultMetadata()),I}return h}catch{}throw new ie}reset(){for(let t of this.readers)t.reset()}}class _n extends an{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,s){for(let a=0;a<s.length;a++)if(an.patternMatchVariance(t,s[a],_n.MAX_INDIVIDUAL_VARIANCE)<_n.MAX_AVG_VARIANCE)return a;throw new ie}static count(t){return ht.sum(new Int32Array(t))}static increment(t,s){let a=0,d=s[0];for(let h=1;h<t.length;h++)s[h]>d&&(d=s[h],a=h);t[a]++}static decrement(t,s){let a=0,d=s[0];for(let h=1;h<t.length;h++)s[h]<d&&(d=s[h],a=h);t[a]--}static isFinderPattern(t){let s=t[0]+t[1],a=s+t[2]+t[3],d=s/a;if(d>=_n.MIN_FINDER_PATTERN_RATIO&&d<=_n.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let w of t)w>f&&(f=w),w<h&&(h=w);return f<10*h}return!1}}_n.MAX_AVG_VARIANCE=.2,_n.MAX_INDIVIDUAL_VARIANCE=.45,_n.MIN_FINDER_PATTERN_RATIO=9.5/12,_n.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ni{constructor(t,s){this.value=t,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Ni))return!1;const s=t;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class eo{constructor(t,s,a,d,h){this.value=t,this.startEnd=s,this.value=t,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ze(a,h)),this.resultPoints.push(new ze(d,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof eo))return!1;const s=t;return this.value===s.value}hashCode(){return this.value}}class Zn{constructor(){}static getRSSvalue(t,s,a){let d=0;for(let C of t)d+=C;let h=0,f=0,w=t.length;for(let C=0;C<w-1;C++){let E;for(E=1,f|=1<<C;E<t[C];E++,f&=~(1<<C)){let I=Zn.combins(d-E-1,w-C-2);if(a&&f===0&&d-E-(w-C-1)>=w-C-1&&(I-=Zn.combins(d-E-(w-C),w-C-2)),w-C-1>1){let j=0;for(let B=d-E-(w-C-2);B>s;B--)j+=Zn.combins(d-E-B-1,w-C-3);I-=j*(w-1-C)}else d-E>s&&I--;h+=I}d-=E}return h}static combins(t,s){let a,d;t-s>s?(d=s,a=t-s):(d=t-s,a=s);let h=1,f=1;for(let w=t;w>a;w--)h*=w,f<=d&&(h/=f,f++);for(;f<=d;)h/=f,f++;return h}}class rl{static buildBitArray(t){let s=t.length*2-1;t[t.length-1].getRightChar()==null&&(s-=1);let a=12*s,d=new $(a),h=0,w=t[0].getRightChar().getValue();for(let C=11;C>=0;--C)(w&1<<C)!=0&&d.set(h),h++;for(let C=1;C<t.length;++C){let E=t[C],I=E.getLeftChar().getValue();for(let j=11;j>=0;--j)(I&1<<j)!=0&&d.set(h),h++;if(E.getRightChar()!=null){let j=E.getRightChar().getValue();for(let B=11;B>=0;--B)(j&1<<B)!=0&&d.set(h),h++}}return d}}class Cr{constructor(t,s){s?this.decodedInformation=null:(this.finished=t,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class il{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Cn extends il{constructor(t,s){super(t),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Cn.FNC1}}Cn.FNC1="$";class Ur extends il{constructor(t,s,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Wn extends il{constructor(t,s,a){if(super(t),s<0||s>10||a<0||a>10)throw new V;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Wn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Wn.FNC1}isAnyFNC1(){return this.firstDigit===Wn.FNC1||this.secondDigit===Wn.FNC1}}Wn.FNC1=10;class Be{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ie;let s=t.substring(0,2);for(let h of Be.TWO_DIGIT_DATA_LENGTH)if(h[0]===s)return h[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(2,h[2],t):Be.processFixedAI(2,h[1],t);if(t.length<3)throw new ie;let a=t.substring(0,3);for(let h of Be.THREE_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(3,h[2],t):Be.processFixedAI(3,h[1],t);for(let h of Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,h[2],t):Be.processFixedAI(4,h[1],t);if(t.length<4)throw new ie;let d=t.substring(0,4);for(let h of Be.FOUR_DIGIT_DATA_LENGTH)if(h[0]===d)return h[1]===Be.VARIABLE_LENGTH?Be.processVariableAI(4,h[2],t):Be.processFixedAI(4,h[1],t);throw new ie}static processFixedAI(t,s,a){if(a.length<t)throw new ie;let d=a.substring(0,t);if(a.length<t+s)throw new ie;let h=a.substring(t,t+s),f=a.substring(t+s),w="("+d+")"+h,C=Be.parseFieldsInGeneralPurpose(f);return C==null?w:w+C}static processVariableAI(t,s,a){let d=a.substring(0,t),h;a.length<t+s?h=a.length:h=t+s;let f=a.substring(t,h),w=a.substring(h),C="("+d+")"+f,E=Be.parseFieldsInGeneralPurpose(w);return E==null?C:C+E}}Be.VARIABLE_LENGTH=[],Be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Be.VARIABLE_LENGTH,20],["22",Be.VARIABLE_LENGTH,29],["30",Be.VARIABLE_LENGTH,8],["37",Be.VARIABLE_LENGTH,8],["90",Be.VARIABLE_LENGTH,30],["91",Be.VARIABLE_LENGTH,30],["92",Be.VARIABLE_LENGTH,30],["93",Be.VARIABLE_LENGTH,30],["94",Be.VARIABLE_LENGTH,30],["95",Be.VARIABLE_LENGTH,30],["96",Be.VARIABLE_LENGTH,30],["97",Be.VARIABLE_LENGTH,3],["98",Be.VARIABLE_LENGTH,30],["99",Be.VARIABLE_LENGTH,30]],Be.THREE_DIGIT_DATA_LENGTH=[["240",Be.VARIABLE_LENGTH,30],["241",Be.VARIABLE_LENGTH,30],["242",Be.VARIABLE_LENGTH,6],["250",Be.VARIABLE_LENGTH,30],["251",Be.VARIABLE_LENGTH,30],["253",Be.VARIABLE_LENGTH,17],["254",Be.VARIABLE_LENGTH,20],["400",Be.VARIABLE_LENGTH,30],["401",Be.VARIABLE_LENGTH,30],["402",17],["403",Be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Be.VARIABLE_LENGTH,20],["421",Be.VARIABLE_LENGTH,15],["422",3],["423",Be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Be.VARIABLE_LENGTH,15],["391",Be.VARIABLE_LENGTH,18],["392",Be.VARIABLE_LENGTH,15],["393",Be.VARIABLE_LENGTH,18],["703",Be.VARIABLE_LENGTH,30]],Be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Be.VARIABLE_LENGTH,20],["8003",Be.VARIABLE_LENGTH,30],["8004",Be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Be.VARIABLE_LENGTH,30],["8008",Be.VARIABLE_LENGTH,12],["8018",18],["8020",Be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Be.VARIABLE_LENGTH,70],["8200",Be.VARIABLE_LENGTH,70]];class ds{constructor(t){this.buffer=new ve,this.information=t}decodeAllCodes(t,s){let a=s,d=null;do{let h=this.decodeGeneralPurposeField(a,d),f=Be.parseFieldsInGeneralPurpose(h.getNewString());if(f!=null&&t.append(f),h.isRemaining()?d=""+h.getRemainingValue():d=null,a===h.getNewPosition())break;a=h.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let s=t;s<t+3;++s)if(this.information.get(s))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(t,4);return h===0?new Wn(this.information.getSize(),Wn.FNC1,Wn.FNC1):new Wn(this.information.getSize(),h-1,Wn.FNC1)}let s=this.extractNumericValueFromBitArray(t,7),a=(s-8)/11,d=(s-8)%11;return new Wn(t+7,a,d)}extractNumericValueFromBitArray(t,s){return ds.extractNumericValueFromBitArray(this.information,t,s)}static extractNumericValueFromBitArray(t,s,a){let d=0;for(let h=0;h<a;++h)t.get(s+h)&&(d|=1<<a-h-1);return d}decodeGeneralPurposeField(t,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Ur(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Ur(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),t=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),t=s.isFinished()):(s=this.parseNumericBlock(),t=s.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let s;return t.isSecondDigitFNC1()?s=new Ur(this.current.getPosition(),this.buffer.toString()):s=new Ur(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Cr(!0,s)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let s=new Ur(this.current.getPosition(),this.buffer.toString());return new Cr(!0,s)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Cr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let s=new Ur(this.current.getPosition(),this.buffer.toString());return new Cr(!0,s)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Cr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let s=new Ur(this.current.getPosition(),this.buffer.toString());return new Cr(!0,s)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Cr(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,5);if(s>=5&&s<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(t,8);return d>=232&&d<253}decodeIsoIec646(t){let s=this.extractNumericValueFromBitArray(t,5);if(s===15)return new Cn(t+5,Cn.FNC1);if(s>=5&&s<15)return new Cn(t+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new Cn(t+7,""+(a+1));if(a>=90&&a<116)return new Cn(t+7,""+(a+7));let d=this.extractNumericValueFromBitArray(t,8),h;switch(d){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new V}return new Cn(t+8,h)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,5);if(s>=5&&s<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let s=this.extractNumericValueFromBitArray(t,5);if(s===15)return new Cn(t+5,Cn.FNC1);if(s>=5&&s<15)return new Cn(t+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new Cn(t+6,""+(a+33));let d;switch(a){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new je("Decoding invalid alphanumeric value: "+a)}return new Cn(t+6,d)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let s=0;s<5&&s+t<this.information.getSize();++s)if(s===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+s))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let s=t;s<t+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let s=0;s<4&&s+t<this.information.getSize();++s)if(this.information.get(t+s))return!1;return!0}}class sl{constructor(t){this.information=t,this.generalDecoder=new ds(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Qn extends sl{constructor(t){super(t)}encodeCompressedGtin(t,s){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,s,a)}encodeCompressedGtinWithoutAI(t,s,a){for(let d=0;d<4;++d){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*d,10);h/100===0&&t.append("0"),h/10===0&&t.append("0"),t.append(h)}Qn.appendCheckDigit(t,a)}static appendCheckDigit(t,s){let a=0;for(let d=0;d<13;d++){let h=t.charAt(d+s).charCodeAt(0)-48;a+=(d&1)===0?3*h:h}a=10-a%10,a===10&&(a=0),t.append(a)}}Qn.GTIN_SIZE=40;class gr extends Qn{constructor(t){super(t)}parseInformation(){let t=new ve;t.append("(01)");let s=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(gr.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,gr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(t,gr.HEADER_SIZE+44)}}gr.HEADER_SIZE=4;class to extends sl{constructor(t){super(t)}parseInformation(){let t=new ve;return this.getGeneralDecoder().decodeAllCodes(t,to.HEADER_SIZE)}}to.HEADER_SIZE=5;class no extends Qn{constructor(t){super(t)}encodeCompressedWeight(t,s,a){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(t,d);let h=this.checkWeight(d),f=1e5;for(let w=0;w<5;++w)h/f===0&&t.append("0"),f/=10;t.append(h)}}class zr extends no{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=zr.HEADER_SIZE+no.GTIN_SIZE+zr.WEIGHT_SIZE)throw new ie;let t=new ve;return this.encodeCompressedGtin(t,zr.HEADER_SIZE),this.encodeCompressedWeight(t,zr.HEADER_SIZE+no.GTIN_SIZE,zr.WEIGHT_SIZE),t.toString()}}zr.HEADER_SIZE=5,zr.WEIGHT_SIZE=15;class dc extends zr{constructor(t){super(t)}addWeightCode(t,s){t.append("(3103)")}checkWeight(t){return t}}class hc extends zr{constructor(t){super(t)}addWeightCode(t,s){s<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Er extends Qn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Er.HEADER_SIZE+Qn.GTIN_SIZE)throw new ie;let t=new ve;this.encodeCompressedGtin(t,Er.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Er.HEADER_SIZE+Qn.GTIN_SIZE,Er.LAST_DIGIT_SIZE);t.append("(392"),t.append(s),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Er.HEADER_SIZE+Qn.GTIN_SIZE+Er.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}Er.HEADER_SIZE=8,Er.LAST_DIGIT_SIZE=2;class Mn extends Qn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Mn.HEADER_SIZE+Qn.GTIN_SIZE)throw new ie;let t=new ve;this.encodeCompressedGtin(t,Mn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Mn.HEADER_SIZE+Qn.GTIN_SIZE,Mn.LAST_DIGIT_SIZE);t.append("(393"),t.append(s),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Mn.HEADER_SIZE+Qn.GTIN_SIZE+Mn.LAST_DIGIT_SIZE,Mn.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let d=this.getGeneralDecoder().decodeGeneralPurposeField(Mn.HEADER_SIZE+Qn.GTIN_SIZE+Mn.LAST_DIGIT_SIZE+Mn.FIRST_THREE_DIGITS_SIZE,null);return t.append(d.getNewString()),t.toString()}}Mn.HEADER_SIZE=8,Mn.LAST_DIGIT_SIZE=2,Mn.FIRST_THREE_DIGITS_SIZE=10;class Xt extends no{constructor(t,s,a){super(t),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=Xt.HEADER_SIZE+Xt.GTIN_SIZE+Xt.WEIGHT_SIZE+Xt.DATE_SIZE)throw new ie;let t=new ve;return this.encodeCompressedGtin(t,Xt.HEADER_SIZE),this.encodeCompressedWeight(t,Xt.HEADER_SIZE+Xt.GTIN_SIZE,Xt.WEIGHT_SIZE),this.encodeCompressedDate(t,Xt.HEADER_SIZE+Xt.GTIN_SIZE+Xt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,Xt.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let d=a%32;a/=32;let h=a%12+1;a/=12;let f=a;f/10==0&&t.append("0"),t.append(f),h/10==0&&t.append("0"),t.append(h),d/10==0&&t.append("0"),t.append(d)}addWeightCode(t,s){t.append("("),t.append(this.firstAIdigits),t.append(s/1e5),t.append(")")}checkWeight(t){return t%1e5}}Xt.HEADER_SIZE=8,Xt.WEIGHT_SIZE=20,Xt.DATE_SIZE=16;function fc(P){try{if(P.get(1))return new gr(P);if(!P.get(2))return new to(P);switch(ds.extractNumericValueFromBitArray(P,1,4)){case 4:return new dc(P);case 5:return new hc(P)}switch(ds.extractNumericValueFromBitArray(P,1,5)){case 12:return new Er(P);case 13:return new Mn(P)}switch(ds.extractNumericValueFromBitArray(P,1,7)){case 56:return new Xt(P,"310","11");case 57:return new Xt(P,"320","11");case 58:return new Xt(P,"310","13");case 59:return new Xt(P,"320","13");case 60:return new Xt(P,"310","15");case 61:return new Xt(P,"320","15");case 62:return new Xt(P,"310","17");case 63:return new Xt(P,"320","17")}}catch(t){throw console.log(t),new je("unknown decoder: "+P)}}class zt{constructor(t,s,a,d){this.leftchar=t,this.rightchar=s,this.finderpattern=a,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,s){return t instanceof zt?zt.equalsOrNull(t.leftchar,s.leftchar)&&zt.equalsOrNull(t.rightchar,s.rightchar)&&zt.equalsOrNull(t.finderpattern,s.finderpattern):!1}static equalsOrNull(t,s){return t===null?s===null:zt.equals(t,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ol{constructor(t,s,a){this.pairs=t,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,s){return t instanceof ol?this.checkEqualitity(t,s)&&t.wasReversed===s.wasReversed:!1}checkEqualitity(t,s){if(!t||!s)return;let a;return t.forEach((d,h)=>{s.forEach(f=>{d.getLeftChar().getValue()===f.getLeftChar().getValue()&&d.getRightChar().getValue()===f.getRightChar().getValue()&&d.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(a=!0)})}),a}}class Se extends _n{constructor(t){super(...arguments),this.pairs=new Array(Se.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,s,a){this.pairs.length=0,this.startFromEven=!1;try{return Se.constructResult(this.decodeRow2pairs(t,s))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Se.constructResult(this.decodeRow2pairs(t,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,t))}catch(h){if(h instanceof ie){if(!this.pairs.length)throw new ie;a=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(t,!1),d){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new ie}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),s}checkRows(t,s){for(let a=s;a<this.rows.length;a++){let d=this.rows[a];this.pairs.length=0;for(let f of t)this.pairs.push(f.getPairs());if(this.pairs.push(d.getPairs()),!Se.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(t);h.push(d);try{return this.checkRows(h,a+1)}catch(f){this.verbose&&console.log(f)}}throw new ie}static isValidSequence(t){for(let s of Se.FINDER_PATTERN_SEQUENCES){if(t.length>s.length)continue;let a=!0;for(let d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!=s[d]){a=!1;break}if(a)return!0}return!1}storeRow(t,s){let a=0,d=!1,h=!1;for(;a<this.rows.length;){let f=this.rows[a];if(f.getRowNumber()>t){h=f.isEquivalent(this.pairs);break}d=f.isEquivalent(this.pairs),a++}h||d||Se.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new ol(this.pairs,t,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,s){for(let a of s)if(a.getPairs().length!==t.length){for(let d of a.getPairs())for(let h of t)if(zt.equals(d,h))break}}static isPartialRow(t,s){for(let a of s){let d=!0;for(let h of t){let f=!1;for(let w of a.getPairs())if(h.equals(w)){f=!0;break}if(!f){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(t){let s=rl.buildBitArray(t),d=fc(s).parseInformation(),h=t[0].getFinderPattern().getResultPoints(),f=t[t.length-1].getFinderPattern().getResultPoints(),w=[h[0],h[1],f[0],f[1]];return new Te(d,null,null,w,ee.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),s=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let d=a.getChecksumPortion(),h=2;for(let w=1;w<this.pairs.size();++w){let C=this.pairs.get(w);d+=C.getLeftChar().getChecksumPortion(),h++;let E=C.getRightChar();E!=null&&(d+=E.getChecksumPortion(),h++)}return d%=211,211*(h-4)+d==s.getValue()}static getNextSecondBar(t,s){let a;return t.get(s)?(a=t.getNextUnset(s),a=t.getNextSet(a)):(a=t.getNextSet(s),a=t.getNextUnset(a)),a}retrieveNextPair(t,s,a){let d=s.length%2==0;this.startFromEven&&(d=!d);let h,f=!0,w=-1;do this.findNextPair(t,s,w),h=this.parseFoundFinderPattern(t,a,d),h==null?w=Se.getNextSecondBar(t,this.startEnd[0]):f=!1;while(f);let C=this.decodeDataCharacter(t,h,d,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new ie;let E;try{E=this.decodeDataCharacter(t,h,d,!1)}catch(I){E=null,this.verbose&&console.log(I)}return new zt(C,E,h,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,s,a){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let h=t.getSize(),f;a>=0?f=a:this.isEmptyPair(s)?f=0:f=s[s.length-1].getFinderPattern().getStartEnd()[1];let w=s.length%2!=0;this.startFromEven&&(w=!w);let C=!1;for(;f<h&&(C=!t.get(f),!!C);)f++;let E=0,I=f;for(let j=f;j<h;j++)if(t.get(j)!=C)d[E]++;else{if(E==3){if(w&&Se.reverseCounters(d),Se.isFinderPattern(d)){this.startEnd[0]=I,this.startEnd[1]=j;return}w&&Se.reverseCounters(d),I+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,E--}else E++;d[E]=1,C=!C}throw new ie}static reverseCounters(t){let s=t.length;for(let a=0;a<s/2;++a){let d=t[a];t[a]=t[s-a-1],t[s-a-1]=d}}parseFoundFinderPattern(t,s,a){let d,h,f;if(a){let E=this.startEnd[0]-1;for(;E>=0&&!t.get(E);)E--;E++,d=this.startEnd[0]-E,h=E,f=this.startEnd[1]}else h=this.startEnd[0],f=t.getNextUnset(this.startEnd[1]+1),d=f-this.startEnd[1];let w=this.getDecodeFinderCounters();O.arraycopy(w,0,w,1,w.length-1),w[0]=d;let C;try{C=this.parseFinderValue(w,Se.FINDER_PATTERNS)}catch{return null}return new eo(C,[h,f],h,f,s)}decodeDataCharacter(t,s,a,d){let h=this.getDataCharacterCounters();for(let Ft=0;Ft<h.length;Ft++)h[Ft]=0;if(d)Se.recordPatternInReverse(t,s.getStartEnd()[0],h);else{Se.recordPattern(t,s.getStartEnd()[1],h);for(let Ft=0,ln=h.length-1;Ft<ln;Ft++,ln--){let Gn=h[Ft];h[Ft]=h[ln],h[ln]=Gn}}let f=17,w=ht.sum(new Int32Array(h))/f,C=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(w-C)/C>.3)throw new ie;let E=this.getOddCounts(),I=this.getEvenCounts(),j=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let Ft=0;Ft<h.length;Ft++){let ln=1*h[Ft]/w,Gn=ln+.5;if(Gn<1){if(ln<.3)throw new ie;Gn=1}else if(Gn>8){if(ln>8.7)throw new ie;Gn=8}let Ki=Ft/2;(Ft&1)==0?(E[Ki]=Gn,j[Ki]=ln-Gn):(I[Ki]=Gn,B[Ki]=ln-Gn)}this.adjustOddEvenCounts(f);let G=4*s.getValue()+(a?0:2)+(d?0:1)-1,Z=0,J=0;for(let Ft=E.length-1;Ft>=0;Ft--){if(Se.isNotA1left(s,a,d)){let ln=Se.WEIGHTS[G][2*Ft];J+=E[Ft]*ln}Z+=E[Ft]}let oe=0;for(let Ft=I.length-1;Ft>=0;Ft--)if(Se.isNotA1left(s,a,d)){let ln=Se.WEIGHTS[G][2*Ft+1];oe+=I[Ft]*ln}let me=J+oe;if((Z&1)!=0||Z>13||Z<4)throw new ie;let ke=(13-Z)/2,Oe=Se.SYMBOL_WIDEST[ke],Ne=9-Oe,At=Zn.getRSSvalue(E,Oe,!0),mt=Zn.getRSSvalue(I,Ne,!1),er=Se.EVEN_TOTAL_SUBSET[ke],Ir=Se.GSUM[ke],vn=At*er+mt+Ir;return new Ni(vn,me)}static isNotA1left(t,s,a){return!(t.getValue()==0&&s&&a)}adjustOddEvenCounts(t){let s=ht.sum(new Int32Array(this.getOddCounts())),a=ht.sum(new Int32Array(this.getEvenCounts())),d=!1,h=!1;s>13?h=!0:s<4&&(d=!0);let f=!1,w=!1;a>13?w=!0:a<4&&(f=!0);let C=s+a-t,E=(s&1)==1,I=(a&1)==0;if(C==1)if(E){if(I)throw new ie;h=!0}else{if(!I)throw new ie;w=!0}else if(C==-1)if(E){if(I)throw new ie;d=!0}else{if(!I)throw new ie;f=!0}else if(C==0){if(E){if(!I)throw new ie;s<a?(d=!0,w=!0):(h=!0,f=!0)}else if(I)throw new ie}else throw new ie;if(d){if(h)throw new ie;Se.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Se.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(w)throw new ie;Se.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Se.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Se.SYMBOL_WIDEST=[7,5,4,3,1],Se.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Se.GSUM=[0,348,1388,2948,3988],Se.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Se.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Se.FINDER_PAT_A=0,Se.FINDER_PAT_B=1,Se.FINDER_PAT_C=2,Se.FINDER_PAT_D=3,Se.FINDER_PAT_E=4,Se.FINDER_PAT_F=5,Se.FINDER_PATTERN_SEQUENCES=[[Se.FINDER_PAT_A,Se.FINDER_PAT_A],[Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B],[Se.FINDER_PAT_A,Se.FINDER_PAT_C,Se.FINDER_PAT_B,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_C],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_E,Se.FINDER_PAT_B,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F],[Se.FINDER_PAT_A,Se.FINDER_PAT_A,Se.FINDER_PAT_B,Se.FINDER_PAT_B,Se.FINDER_PAT_C,Se.FINDER_PAT_D,Se.FINDER_PAT_D,Se.FINDER_PAT_E,Se.FINDER_PAT_E,Se.FINDER_PAT_F,Se.FINDER_PAT_F]],Se.MAX_PAIRS=11;class gc extends Ni{constructor(t,s,a){super(t,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class $t extends _n{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,s,a){const d=this.decodePair(s,!1,t,a);$t.addOrTally(this.possibleLeftPairs,d),s.reverse();let h=this.decodePair(s,!0,t,a);$t.addOrTally(this.possibleRightPairs,h),s.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&$t.checkChecksum(f,w))return $t.constructResult(f,w)}throw new ie}static addOrTally(t,s){if(s==null)return;let a=!1;for(let d of t)if(d.getValue()===s.getValue()){d.incrementCount(),a=!0;break}a||t.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,s){let a=4537077*t.getValue()+s.getValue(),d=new String(a).toString(),h=new ve;for(let E=13-d.length;E>0;E--)h.append("0");h.append(d);let f=0;for(let E=0;E<13;E++){let I=h.charAt(E).charCodeAt(0)-48;f+=(E&1)===0?3*I:I}f=10-f%10,f===10&&(f=0),h.append(f.toString());let w=t.getFinderPattern().getResultPoints(),C=s.getFinderPattern().getResultPoints();return new Te(h.toString(),null,0,[w[0],w[1],C[0],C[1]],ee.RSS_14,new Date().getTime())}static checkChecksum(t,s){let a=(t.getChecksumPortion()+16*s.getChecksumPortion())%79,d=9*t.getFinderPattern().getValue()+s.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,a===d}decodePair(t,s,a,d){try{let h=this.findFinderPattern(t,s),f=this.parseFoundFinderPattern(t,a,s,h),w=d==null?null:d.get(Y.NEED_RESULT_POINT_CALLBACK);if(w!=null){let I=(h[0]+h[1])/2;s&&(I=t.getSize()-1-I),w.foundPossibleResultPoint(new ze(I,a))}let C=this.decodeDataCharacter(t,f,!0),E=this.decodeDataCharacter(t,f,!1);return new gc(1597*C.getValue()+E.getValue(),C.getChecksumPortion()+4*E.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(t,s,a){let d=this.getDataCharacterCounters();for(let oe=0;oe<d.length;oe++)d[oe]=0;if(a)an.recordPatternInReverse(t,s.getStartEnd()[0],d);else{an.recordPattern(t,s.getStartEnd()[1]+1,d);for(let oe=0,me=d.length-1;oe<me;oe++,me--){let ke=d[oe];d[oe]=d[me],d[me]=ke}}let h=a?16:15,f=ht.sum(new Int32Array(d))/h,w=this.getOddCounts(),C=this.getEvenCounts(),E=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let oe=0;oe<d.length;oe++){let me=d[oe]/f,ke=Math.floor(me+.5);ke<1?ke=1:ke>8&&(ke=8);let Oe=Math.floor(oe/2);(oe&1)===0?(w[Oe]=ke,E[Oe]=me-ke):(C[Oe]=ke,I[Oe]=me-ke)}this.adjustOddEvenCounts(a,h);let j=0,B=0;for(let oe=w.length-1;oe>=0;oe--)B*=9,B+=w[oe],j+=w[oe];let G=0,Z=0;for(let oe=C.length-1;oe>=0;oe--)G*=9,G+=C[oe],Z+=C[oe];let J=B+3*G;if(a){if((j&1)!==0||j>12||j<4)throw new ie;let oe=(12-j)/2,me=$t.OUTSIDE_ODD_WIDEST[oe],ke=9-me,Oe=Zn.getRSSvalue(w,me,!1),Ne=Zn.getRSSvalue(C,ke,!0),At=$t.OUTSIDE_EVEN_TOTAL_SUBSET[oe],mt=$t.OUTSIDE_GSUM[oe];return new Ni(Oe*At+Ne+mt,J)}else{if((Z&1)!==0||Z>10||Z<4)throw new ie;let oe=(10-Z)/2,me=$t.INSIDE_ODD_WIDEST[oe],ke=9-me,Oe=Zn.getRSSvalue(w,me,!0),Ne=Zn.getRSSvalue(C,ke,!1),At=$t.INSIDE_ODD_TOTAL_SUBSET[oe],mt=$t.INSIDE_GSUM[oe];return new Ni(Ne*At+Oe+mt,J)}}findFinderPattern(t,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let d=t.getSize(),h=!1,f=0;for(;f<d&&(h=!t.get(f),s!==h);)f++;let w=0,C=f;for(let E=f;E<d;E++)if(t.get(E)!==h)a[w]++;else{if(w===3){if(_n.isFinderPattern(a))return[C,E];C+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,w--}else w++;a[w]=1,h=!h}throw new ie}parseFoundFinderPattern(t,s,a,d){let h=t.get(d[0]),f=d[0]-1;for(;f>=0&&h!==t.get(f);)f--;f++;const w=d[0]-f,C=this.getDecodeFinderCounters(),E=new Int32Array(C.length);O.arraycopy(C,0,E,1,C.length-1),E[0]=w;const I=this.parseFinderValue(E,$t.FINDER_PATTERNS);let j=f,B=d[1];return a&&(j=t.getSize()-1-j,B=t.getSize()-1-B),new eo(I,[f,d[1]],j,B,s)}adjustOddEvenCounts(t,s){let a=ht.sum(new Int32Array(this.getOddCounts())),d=ht.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1,w=!1,C=!1;t?(a>12?f=!0:a<4&&(h=!0),d>12?C=!0:d<4&&(w=!0)):(a>11?f=!0:a<5&&(h=!0),d>10?C=!0:d<4&&(w=!0));let E=a+d-s,I=(a&1)===(t?1:0),j=(d&1)===1;if(E===1)if(I){if(j)throw new ie;f=!0}else{if(!j)throw new ie;C=!0}else if(E===-1)if(I){if(j)throw new ie;h=!0}else{if(!j)throw new ie;w=!0}else if(E===0){if(I){if(!j)throw new ie;a<d?(h=!0,C=!0):(f=!0,w=!0)}else if(j)throw new ie}else throw new ie;if(h){if(f)throw new ie;_n.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&_n.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(C)throw new ie;_n.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&_n.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],$t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],$t.OUTSIDE_GSUM=[0,161,961,2015,2715],$t.INSIDE_GSUM=[0,336,1036,1516],$t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],$t.INSIDE_ODD_WIDEST=[2,4,6,8],$t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class hs extends an{constructor(t,s){super(),this.readers=[],this.verbose=s===!0;const a=t?t.get(Y.POSSIBLE_FORMATS):null,d=t&&t.get(Y.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(ee.EAN_13)||a.includes(ee.UPC_A)||a.includes(ee.EAN_8)||a.includes(ee.UPC_E))&&this.readers.push(new $o(t)),a.includes(ee.CODE_39)&&this.readers.push(new xn(d)),a.includes(ee.CODE_128)&&this.readers.push(new De),a.includes(ee.ITF)&&this.readers.push(new Bt),a.includes(ee.RSS_14)&&this.readers.push(new $t),a.includes(ee.RSS_EXPANDED)&&this.readers.push(new Se(this.verbose))):(this.readers.push(new $o(t)),this.readers.push(new xn),this.readers.push(new $o(t)),this.readers.push(new De),this.readers.push(new Bt),this.readers.push(new $t),this.readers.push(new Se(this.verbose)))}decodeRow(t,s,a){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(t,s,a)}catch{}throw new ie}reset(){this.readers.forEach(t=>t.reset())}}class pc extends Ae{constructor(t=500,s){super(new hs(s),t,s)}}class jt{constructor(t,s,a){this.ecCodewords=t,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class bt{constructor(t,s){this.count=t,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ot{constructor(t,s,a,d,h,f){this.versionNumber=t,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=h,this.ecBlocks=f;let w=0;const C=f.getECCodewords(),E=f.getECBlocks();for(let I of E)w+=I.getCount()*(I.getDataCodewords()+C);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,s){if((t&1)!==0||(s&1)!==0)throw new V;for(let a of Ot.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===s)return a;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new Ot(1,10,10,8,8,new jt(5,new bt(1,3))),new Ot(2,12,12,10,10,new jt(7,new bt(1,5))),new Ot(3,14,14,12,12,new jt(10,new bt(1,8))),new Ot(4,16,16,14,14,new jt(12,new bt(1,12))),new Ot(5,18,18,16,16,new jt(14,new bt(1,18))),new Ot(6,20,20,18,18,new jt(18,new bt(1,22))),new Ot(7,22,22,20,20,new jt(20,new bt(1,30))),new Ot(8,24,24,22,22,new jt(24,new bt(1,36))),new Ot(9,26,26,24,24,new jt(28,new bt(1,44))),new Ot(10,32,32,14,14,new jt(36,new bt(1,62))),new Ot(11,36,36,16,16,new jt(42,new bt(1,86))),new Ot(12,40,40,18,18,new jt(48,new bt(1,114))),new Ot(13,44,44,20,20,new jt(56,new bt(1,144))),new Ot(14,48,48,22,22,new jt(68,new bt(1,174))),new Ot(15,52,52,24,24,new jt(42,new bt(2,102))),new Ot(16,64,64,14,14,new jt(56,new bt(2,140))),new Ot(17,72,72,16,16,new jt(36,new bt(4,92))),new Ot(18,80,80,18,18,new jt(48,new bt(4,114))),new Ot(19,88,88,20,20,new jt(56,new bt(4,144))),new Ot(20,96,96,22,22,new jt(68,new bt(4,174))),new Ot(21,104,104,24,24,new jt(56,new bt(6,136))),new Ot(22,120,120,18,18,new jt(68,new bt(6,175))),new Ot(23,132,132,20,20,new jt(62,new bt(8,163))),new Ot(24,144,144,22,22,new jt(62,new bt(8,156),new bt(2,155))),new Ot(25,8,18,6,16,new jt(7,new bt(1,5))),new Ot(26,8,32,6,14,new jt(11,new bt(1,10))),new Ot(27,12,26,10,24,new jt(14,new bt(1,16))),new Ot(28,12,36,10,16,new jt(18,new bt(1,22))),new Ot(29,16,36,14,16,new jt(24,new bt(1,32))),new Ot(30,16,48,14,22,new jt(28,new bt(1,49)))]}}Ot.VERSIONS=Ot.buildVersions();class ar{constructor(t){const s=t.getHeight();if(s<8||s>144||(s&1)!==0)throw new V;this.version=ar.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const s=t.getHeight(),a=t.getWidth();return Ot.getVersionForDimensions(s,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,d=0;const h=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let w=!1,C=!1,E=!1,I=!1;do if(a===h&&d===0&&!w)t[s++]=this.readCorner1(h,f)&255,a-=2,d+=2,w=!0;else if(a===h-2&&d===0&&(f&3)!==0&&!C)t[s++]=this.readCorner2(h,f)&255,a-=2,d+=2,C=!0;else if(a===h+4&&d===2&&(f&7)===0&&!E)t[s++]=this.readCorner3(h,f)&255,a-=2,d+=2,E=!0;else if(a===h-2&&d===0&&(f&7)===4&&!I)t[s++]=this.readCorner4(h,f)&255,a-=2,d+=2,I=!0;else{do a<h&&d>=0&&!this.readMappingMatrix.get(d,a)&&(t[s++]=this.readUtah(a,d,h,f)&255),a-=2,d+=2;while(a>=0&&d<f);a+=1,d+=3;do a>=0&&d<f&&!this.readMappingMatrix.get(d,a)&&(t[s++]=this.readUtah(a,d,h,f)&255),a+=2,d-=2;while(a<h&&d>=0);a+=3,d+=1}while(a<h||d<f);if(s!==this.version.getTotalCodewords())throw new V;return t}readModule(t,s,a,d){return t<0&&(t+=a,s+=4-(a+4&7)),s<0&&(s+=d,t+=4-(d+4&7)),this.readMappingMatrix.set(s,t),this.mappingBitMatrix.get(s,t)}readUtah(t,s,a,d){let h=0;return this.readModule(t-2,s-2,a,d)&&(h|=1),h<<=1,this.readModule(t-2,s-1,a,d)&&(h|=1),h<<=1,this.readModule(t-1,s-2,a,d)&&(h|=1),h<<=1,this.readModule(t-1,s-1,a,d)&&(h|=1),h<<=1,this.readModule(t-1,s,a,d)&&(h|=1),h<<=1,this.readModule(t,s-2,a,d)&&(h|=1),h<<=1,this.readModule(t,s-1,a,d)&&(h|=1),h<<=1,this.readModule(t,s,a,d)&&(h|=1),h}readCorner1(t,s){let a=0;return this.readModule(t-1,0,t,s)&&(a|=1),a<<=1,this.readModule(t-1,1,t,s)&&(a|=1),a<<=1,this.readModule(t-1,2,t,s)&&(a|=1),a<<=1,this.readModule(0,s-2,t,s)&&(a|=1),a<<=1,this.readModule(0,s-1,t,s)&&(a|=1),a<<=1,this.readModule(1,s-1,t,s)&&(a|=1),a<<=1,this.readModule(2,s-1,t,s)&&(a|=1),a<<=1,this.readModule(3,s-1,t,s)&&(a|=1),a}readCorner2(t,s){let a=0;return this.readModule(t-3,0,t,s)&&(a|=1),a<<=1,this.readModule(t-2,0,t,s)&&(a|=1),a<<=1,this.readModule(t-1,0,t,s)&&(a|=1),a<<=1,this.readModule(0,s-4,t,s)&&(a|=1),a<<=1,this.readModule(0,s-3,t,s)&&(a|=1),a<<=1,this.readModule(0,s-2,t,s)&&(a|=1),a<<=1,this.readModule(0,s-1,t,s)&&(a|=1),a<<=1,this.readModule(1,s-1,t,s)&&(a|=1),a}readCorner3(t,s){let a=0;return this.readModule(t-1,0,t,s)&&(a|=1),a<<=1,this.readModule(t-1,s-1,t,s)&&(a|=1),a<<=1,this.readModule(0,s-3,t,s)&&(a|=1),a<<=1,this.readModule(0,s-2,t,s)&&(a|=1),a<<=1,this.readModule(0,s-1,t,s)&&(a|=1),a<<=1,this.readModule(1,s-3,t,s)&&(a|=1),a<<=1,this.readModule(1,s-2,t,s)&&(a|=1),a<<=1,this.readModule(1,s-1,t,s)&&(a|=1),a}readCorner4(t,s){let a=0;return this.readModule(t-3,0,t,s)&&(a|=1),a<<=1,this.readModule(t-2,0,t,s)&&(a|=1),a<<=1,this.readModule(t-1,0,t,s)&&(a|=1),a<<=1,this.readModule(0,s-2,t,s)&&(a|=1),a<<=1,this.readModule(0,s-1,t,s)&&(a|=1),a<<=1,this.readModule(1,s-1,t,s)&&(a|=1),a<<=1,this.readModule(2,s-1,t,s)&&(a|=1),a<<=1,this.readModule(3,s-1,t,s)&&(a|=1),a}extractDataRegion(t){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==s)throw new _("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),f=s/d|0,w=a/h|0,C=f*d,E=w*h,I=new Ce(E,C);for(let j=0;j<f;++j){const B=j*d;for(let G=0;G<w;++G){const Z=G*h;for(let J=0;J<d;++J){const oe=j*(d+2)+1+J,me=B+J;for(let ke=0;ke<h;++ke){const Oe=G*(h+2)+1+ke;if(t.get(Oe,oe)){const Ne=Z+ke;I.set(Ne,me)}}}}}return I}}class al{constructor(t,s){this.numDataCodewords=t,this.codewords=s}static getDataBlocks(t,s){const a=s.getECBlocks();let d=0;const h=a.getECBlocks();for(let J of h)d+=J.getCount();const f=new Array(d);let w=0;for(let J of h)for(let oe=0;oe<J.getCount();oe++){const me=J.getDataCodewords(),ke=a.getECCodewords()+me;f[w++]=new al(me,new Uint8Array(ke))}const E=f[0].codewords.length-a.getECCodewords(),I=E-1;let j=0;for(let J=0;J<I;J++)for(let oe=0;oe<w;oe++)f[oe].codewords[J]=t[j++];const B=s.getVersionNumber()===24,G=B?8:w;for(let J=0;J<G;J++)f[J].codewords[E-1]=t[j++];const Z=f[0].codewords.length;for(let J=E;J<Z;J++)for(let oe=0;oe<w;oe++){const me=B?(oe+8)%w:oe,ke=B&&me>7?J-1:J;f[me].codewords[ke]=t[j++]}if(j!==t.length)throw new _;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ll{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new _(""+t);let s=0,a=this.bitOffset,d=this.byteOffset;const h=this.bytes;if(a>0){const f=8-a,w=t<f?t:f,C=f-w,E=255>>8-w<<C;s=(h[d]&E)>>C,t-=w,a+=w,a===8&&(a=0,d++)}if(t>0){for(;t>=8;)s=s<<8|h[d]&255,d++,t-=8;if(t>0){const f=8-t,w=255>>f<<f;s=s<<t|(h[d]&w)>>f,a+=t}}return this.bitOffset=a,this.byteOffset=d,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var wn;(function(P){P[P.PAD_ENCODE=0]="PAD_ENCODE",P[P.ASCII_ENCODE=1]="ASCII_ENCODE",P[P.C40_ENCODE=2]="C40_ENCODE",P[P.TEXT_ENCODE=3]="TEXT_ENCODE",P[P.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",P[P.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",P[P.BASE256_ENCODE=6]="BASE256_ENCODE"})(wn||(wn={}));class Sr{static decode(t){const s=new ll(t),a=new ve,d=new ve,h=new Array;let f=wn.ASCII_ENCODE;do if(f===wn.ASCII_ENCODE)f=this.decodeAsciiSegment(s,a,d);else{switch(f){case wn.C40_ENCODE:this.decodeC40Segment(s,a);break;case wn.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case wn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case wn.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case wn.BASE256_ENCODE:this.decodeBase256Segment(s,a,h);break;default:throw new V}f=wn.ASCII_ENCODE}while(f!==wn.PAD_ENCODE&&s.available()>0);return d.length()>0&&a.append(d.toString()),new Le(t,a.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(t,s,a){let d=!1;do{let h=t.readBits(8);if(h===0)throw new V;if(h<=128)return d&&(h+=128),s.append(String.fromCharCode(h-1)),wn.ASCII_ENCODE;if(h===129)return wn.PAD_ENCODE;if(h<=229){const f=h-130;f<10&&s.append("0"),s.append(""+f)}else switch(h){case 230:return wn.C40_ENCODE;case 231:return wn.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return wn.ANSIX12_ENCODE;case 239:return wn.TEXT_ENCODE;case 240:return wn.EDIFACT_ENCODE;case 241:break;default:if(h!==254||t.available()!==0)throw new V;break}}while(t.available()>0);return wn.ASCII_ENCODE}static decodeC40Segment(t,s){let a=!1;const d=[];let h=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),d);for(let w=0;w<3;w++){const C=d[w];switch(h){case 0:if(C<3)h=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[C];a?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):s.append(E)}else throw new V;break;case 1:a?(s.append(String.fromCharCode(C+128)),a=!1):s.append(String.fromCharCode(C)),h=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[C];a?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):s.append(E)}else switch(C){case 27:s.append("");break;case 30:a=!0;break;default:throw new V}h=0;break;case 3:a?(s.append(String.fromCharCode(C+224)),a=!1):s.append(String.fromCharCode(C+96)),h=0;break;default:throw new V}}}while(t.available()>0)}static decodeTextSegment(t,s){let a=!1,d=[],h=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),d);for(let w=0;w<3;w++){const C=d[w];switch(h){case 0:if(C<3)h=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[C];a?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):s.append(E)}else throw new V;break;case 1:a?(s.append(String.fromCharCode(C+128)),a=!1):s.append(String.fromCharCode(C)),h=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[C];a?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):s.append(E)}else switch(C){case 27:s.append("");break;case 30:a=!0;break;default:throw new V}h=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[C];a?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):s.append(E),h=0}else throw new V;break;default:throw new V}}}while(t.available()>0)}static decodeAnsiX12Segment(t,s){const a=[];do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),a);for(let h=0;h<3;h++){const f=a[h];switch(f){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(f<14)s.append(String.fromCharCode(f+44));else if(f<40)s.append(String.fromCharCode(f+51));else throw new V;break}}}while(t.available()>0)}static parseTwoBytes(t,s,a){let d=(t<<8)+s-1,h=Math.floor(d/1600);a[0]=h,d-=h*1600,h=Math.floor(d/40),a[1]=h,a[2]=d-h*40}static decodeEdifactSegment(t,s){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let d=t.readBits(6);if(d===31){const h=8-t.getBitOffset();h!==8&&t.readBits(h);return}(d&32)===0&&(d|=64),s.append(String.fromCharCode(d))}}while(t.available()>0)}static decodeBase256Segment(t,s,a){let d=1+t.getByteOffset();const h=this.unrandomize255State(t.readBits(8),d++);let f;if(h===0?f=t.available()/8|0:h<250?f=h:f=250*(h-249)+this.unrandomize255State(t.readBits(8),d++),f<0)throw new V;const w=new Uint8Array(f);for(let C=0;C<f;C++){if(t.available()<8)throw new V;w[C]=this.unrandomize255State(t.readBits(8),d++)}a.push(w);try{s.append(be.decode(w,de.ISO88591))}catch(C){throw new je("Platform does not support required encoding: "+C.message)}}static unrandomize255State(t,s){const a=149*s%255+1,d=t-a;return d>=0?d:d+256}}Sr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Sr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Sr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Sr.TEXT_SHIFT2_SET_CHARS=Sr.C40_SHIFT2_SET_CHARS,Sr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Go{constructor(){this.rsDecoder=new Me(nt.DATA_MATRIX_FIELD_256)}decode(t){const s=new ar(t),a=s.getVersion(),d=s.readCodewords(),h=al.getDataBlocks(d,a);let f=0;for(let E of h)f+=E.getNumDataCodewords();const w=new Uint8Array(f),C=h.length;for(let E=0;E<C;E++){const I=h[E],j=I.getCodewords(),B=I.getNumDataCodewords();this.correctErrors(j,B);for(let G=0;G<B;G++)w[G*C+E]=j[G]}return Sr.decode(w)}correctErrors(t,s){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-s)}catch{throw new T}for(let d=0;d<s;d++)t[d]=a[d]}}class Gt{constructor(t){this.image=t,this.rectangleDetector=new Kn(this.image)}detect(){const t=this.rectangleDetector.detect();let s=this.detectSolid1(t);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new ie;s=this.shiftToModuleCenter(s);const a=s[0],d=s[1],h=s[2],f=s[3];let w=this.transitionsBetween(a,f)+1,C=this.transitionsBetween(h,f)+1;(w&1)===1&&(w+=1),(C&1)===1&&(C+=1),4*w<7*C&&4*C<7*w&&(w=C=Math.max(w,C));let E=Gt.sampleGrid(this.image,a,d,h,f,w,C);return new ri(E,[a,d,h,f])}static shiftPoint(t,s,a){let d=(s.getX()-t.getX())/(a+1),h=(s.getY()-t.getY())/(a+1);return new ze(t.getX()+d,t.getY()+h)}static moveAway(t,s,a){let d=t.getX(),h=t.getY();return d<s?d-=1:d+=1,h<a?h-=1:h+=1,new ze(d,h)}detectSolid1(t){let s=t[0],a=t[1],d=t[3],h=t[2],f=this.transitionsBetween(s,a),w=this.transitionsBetween(a,d),C=this.transitionsBetween(d,h),E=this.transitionsBetween(h,s),I=f,j=[h,s,a,d];return I>w&&(I=w,j[0]=s,j[1]=a,j[2]=d,j[3]=h),I>C&&(I=C,j[0]=a,j[1]=d,j[2]=h,j[3]=s),I>E&&(j[0]=d,j[1]=h,j[2]=s,j[3]=a),j}detectSolid2(t){let s=t[0],a=t[1],d=t[2],h=t[3],f=this.transitionsBetween(s,h),w=Gt.shiftPoint(a,d,(f+1)*4),C=Gt.shiftPoint(d,a,(f+1)*4),E=this.transitionsBetween(w,s),I=this.transitionsBetween(C,h);return E<I?(t[0]=s,t[1]=a,t[2]=d,t[3]=h):(t[0]=a,t[1]=d,t[2]=h,t[3]=s),t}correctTopRight(t){let s=t[0],a=t[1],d=t[2],h=t[3],f=this.transitionsBetween(s,h),w=this.transitionsBetween(a,h),C=Gt.shiftPoint(s,a,(w+1)*4),E=Gt.shiftPoint(d,a,(f+1)*4);f=this.transitionsBetween(C,h),w=this.transitionsBetween(E,h);let I=new ze(h.getX()+(d.getX()-a.getX())/(f+1),h.getY()+(d.getY()-a.getY())/(f+1)),j=new ze(h.getX()+(s.getX()-a.getX())/(w+1),h.getY()+(s.getY()-a.getY())/(w+1));if(!this.isValid(I))return this.isValid(j)?j:null;if(!this.isValid(j))return I;let B=this.transitionsBetween(C,I)+this.transitionsBetween(E,I),G=this.transitionsBetween(C,j)+this.transitionsBetween(E,j);return B>G?I:j}shiftToModuleCenter(t){let s=t[0],a=t[1],d=t[2],h=t[3],f=this.transitionsBetween(s,h)+1,w=this.transitionsBetween(d,h)+1,C=Gt.shiftPoint(s,a,w*4),E=Gt.shiftPoint(d,a,f*4);f=this.transitionsBetween(C,h)+1,w=this.transitionsBetween(E,h)+1,(f&1)===1&&(f+=1),(w&1)===1&&(w+=1);let I=(s.getX()+a.getX()+d.getX()+h.getX())/4,j=(s.getY()+a.getY()+d.getY()+h.getY())/4;s=Gt.moveAway(s,I,j),a=Gt.moveAway(a,I,j),d=Gt.moveAway(d,I,j),h=Gt.moveAway(h,I,j);let B,G;return C=Gt.shiftPoint(s,a,w*4),C=Gt.shiftPoint(C,h,f*4),B=Gt.shiftPoint(a,s,w*4),B=Gt.shiftPoint(B,d,f*4),E=Gt.shiftPoint(d,h,w*4),E=Gt.shiftPoint(E,a,f*4),G=Gt.shiftPoint(h,d,w*4),G=Gt.shiftPoint(G,s,f*4),[C,B,E,G]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,s,a,d,h,f,w){return St.getInstance().sampleGrid(t,f,w,.5,.5,f-.5,.5,f-.5,w-.5,.5,w-.5,s.getX(),s.getY(),h.getX(),h.getY(),d.getX(),d.getY(),a.getX(),a.getY())}transitionsBetween(t,s){let a=Math.trunc(t.getX()),d=Math.trunc(t.getY()),h=Math.trunc(s.getX()),f=Math.trunc(s.getY()),w=Math.abs(f-d)>Math.abs(h-a);if(w){let J=a;a=d,d=J,J=h,h=f,f=J}let C=Math.abs(h-a),E=Math.abs(f-d),I=-C/2,j=d<f?1:-1,B=a<h?1:-1,G=0,Z=this.image.get(w?d:a,w?a:d);for(let J=a,oe=d;J!==h;J+=B){let me=this.image.get(w?oe:J,w?J:oe);if(me!==Z&&(G++,Z=me),I+=E,I>0){if(oe===f)break;oe+=j,I-=C}}return G}}class Ar{constructor(){this.decoder=new Go}decode(t,s=null){let a,d;if(s!=null&&s.has(Y.PURE_BARCODE)){const E=Ar.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(E),d=Ar.NO_POINTS}else{const E=new Gt(t.getBlackMatrix()).detect();a=this.decoder.decode(E.getBits()),d=E.getPoints()}const h=a.getRawBytes(),f=new Te(a.getText(),h,8*h.length,d,ee.DATA_MATRIX,O.currentTimeMillis()),w=a.getByteSegments();w!=null&&f.putMetadata(Ee.BYTE_SEGMENTS,w);const C=a.getECLevel();return C!=null&&f.putMetadata(Ee.ERROR_CORRECTION_LEVEL,C),f}reset(){}static extractPureBits(t){const s=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(s==null||a==null)throw new ie;const d=this.moduleSize(s,t);let h=s[1];const f=a[1];let w=s[0];const E=(a[0]-w+1)/d,I=(f-h+1)/d;if(E<=0||I<=0)throw new ie;const j=d/2;h+=j,w+=j;const B=new Ce(E,I);for(let G=0;G<I;G++){const Z=h+G*d;for(let J=0;J<E;J++)t.get(w+J*d,Z)&&B.set(J,G)}return B}static moduleSize(t,s){const a=s.getWidth();let d=t[0];const h=t[1];for(;d<a&&s.get(d,h);)d++;if(d===a)throw new ie;const f=d-t[0];if(f===0)throw new ie;return f}}Ar.NO_POINTS=[];class Ld extends Ae{constructor(t=500){super(new Ar,t)}}var fs;(function(P){P[P.L=0]="L",P[P.M=1]="M",P[P.Q=2]="Q",P[P.H=3]="H"})(fs||(fs={}));class Vt{constructor(t,s,a){this.value=t,this.stringValue=s,this.bits=a,Vt.FOR_BITS.set(a,this),Vt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Vt.L;case"M":return Vt.M;case"Q":return Vt.Q;case"H":return Vt.H;default:throw new A(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Vt))return!1;const s=t;return this.value===s.value}static forBits(t){if(t<0||t>=Vt.FOR_BITS.size)throw new _;return Vt.FOR_BITS.get(t)}}Vt.FOR_BITS=new Map,Vt.FOR_VALUE=new Map,Vt.L=new Vt(fs.L,"L",1),Vt.M=new Vt(fs.M,"M",0),Vt.Q=new Vt(fs.Q,"Q",3),Vt.H=new Vt(fs.H,"H",2);class Nn{constructor(t){this.errorCorrectionLevel=Vt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,s){return F.bitCount(t^s)}static decodeFormatInformation(t,s){const a=Nn.doDecodeFormatInformation(t,s);return a!==null?a:Nn.doDecodeFormatInformation(t^Nn.FORMAT_INFO_MASK_QR,s^Nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,s){let a=Number.MAX_SAFE_INTEGER,d=0;for(const h of Nn.FORMAT_INFO_DECODE_LOOKUP){const f=h[0];if(f===t||f===s)return new Nn(h[1]);let w=Nn.numBitsDiffering(t,f);w<a&&(d=h[1],a=w),t!==s&&(w=Nn.numBitsDiffering(s,f),w<a&&(d=h[1],a=w))}return a<=3?new Nn(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Nn))return!1;const s=t;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Nn.FORMAT_INFO_MASK_QR=21522,Nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ae{constructor(t,...s){this.ecCodewordsPerBlock=t,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const s=this.ecBlocks;for(const a of s)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(t,s){this.count=t,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class et{constructor(t,s,...a){this.versionNumber=t,this.alignmentPatternCenters=s,this.ecBlocks=a;let d=0;const h=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();for(const w of f)d+=w.getCount()*(w.getDataCodewords()+h);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new V;try{return this.getVersionForNumber((t-17)/4)}catch{throw new V}}static getVersionForNumber(t){if(t<1||t>40)throw new _;return et.VERSIONS[t-1]}static decodeVersionInformation(t){let s=Number.MAX_SAFE_INTEGER,a=0;for(let d=0;d<et.VERSION_DECODE_INFO.length;d++){const h=et.VERSION_DECODE_INFO[d];if(h===t)return et.getVersionForNumber(d+7);const f=Nn.numBitsDiffering(t,h);f<s&&(a=d+7,s=f)}return s<=3?et.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),s=new Ce(t);s.setRegion(0,0,9,9),s.setRegion(t-8,0,8,9),s.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let d=0;d<a;d++){const h=this.alignmentPatternCenters[d]-2;for(let f=0;f<a;f++)d===0&&(f===0||f===a-1)||d===a-1&&f===0||s.setRegion(this.alignmentPatternCenters[f]-2,h,5,5)}return s.setRegion(6,9,1,t-17),s.setRegion(9,6,t-17,1),this.versionNumber>6&&(s.setRegion(t-11,0,3,6),s.setRegion(0,t-11,6,3)),s}toString(){return""+this.versionNumber}}et.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),et.VERSIONS=[new et(1,new Int32Array(0),new ae(7,new H(1,19)),new ae(10,new H(1,16)),new ae(13,new H(1,13)),new ae(17,new H(1,9))),new et(2,Int32Array.from([6,18]),new ae(10,new H(1,34)),new ae(16,new H(1,28)),new ae(22,new H(1,22)),new ae(28,new H(1,16))),new et(3,Int32Array.from([6,22]),new ae(15,new H(1,55)),new ae(26,new H(1,44)),new ae(18,new H(2,17)),new ae(22,new H(2,13))),new et(4,Int32Array.from([6,26]),new ae(20,new H(1,80)),new ae(18,new H(2,32)),new ae(26,new H(2,24)),new ae(16,new H(4,9))),new et(5,Int32Array.from([6,30]),new ae(26,new H(1,108)),new ae(24,new H(2,43)),new ae(18,new H(2,15),new H(2,16)),new ae(22,new H(2,11),new H(2,12))),new et(6,Int32Array.from([6,34]),new ae(18,new H(2,68)),new ae(16,new H(4,27)),new ae(24,new H(4,19)),new ae(28,new H(4,15))),new et(7,Int32Array.from([6,22,38]),new ae(20,new H(2,78)),new ae(18,new H(4,31)),new ae(18,new H(2,14),new H(4,15)),new ae(26,new H(4,13),new H(1,14))),new et(8,Int32Array.from([6,24,42]),new ae(24,new H(2,97)),new ae(22,new H(2,38),new H(2,39)),new ae(22,new H(4,18),new H(2,19)),new ae(26,new H(4,14),new H(2,15))),new et(9,Int32Array.from([6,26,46]),new ae(30,new H(2,116)),new ae(22,new H(3,36),new H(2,37)),new ae(20,new H(4,16),new H(4,17)),new ae(24,new H(4,12),new H(4,13))),new et(10,Int32Array.from([6,28,50]),new ae(18,new H(2,68),new H(2,69)),new ae(26,new H(4,43),new H(1,44)),new ae(24,new H(6,19),new H(2,20)),new ae(28,new H(6,15),new H(2,16))),new et(11,Int32Array.from([6,30,54]),new ae(20,new H(4,81)),new ae(30,new H(1,50),new H(4,51)),new ae(28,new H(4,22),new H(4,23)),new ae(24,new H(3,12),new H(8,13))),new et(12,Int32Array.from([6,32,58]),new ae(24,new H(2,92),new H(2,93)),new ae(22,new H(6,36),new H(2,37)),new ae(26,new H(4,20),new H(6,21)),new ae(28,new H(7,14),new H(4,15))),new et(13,Int32Array.from([6,34,62]),new ae(26,new H(4,107)),new ae(22,new H(8,37),new H(1,38)),new ae(24,new H(8,20),new H(4,21)),new ae(22,new H(12,11),new H(4,12))),new et(14,Int32Array.from([6,26,46,66]),new ae(30,new H(3,115),new H(1,116)),new ae(24,new H(4,40),new H(5,41)),new ae(20,new H(11,16),new H(5,17)),new ae(24,new H(11,12),new H(5,13))),new et(15,Int32Array.from([6,26,48,70]),new ae(22,new H(5,87),new H(1,88)),new ae(24,new H(5,41),new H(5,42)),new ae(30,new H(5,24),new H(7,25)),new ae(24,new H(11,12),new H(7,13))),new et(16,Int32Array.from([6,26,50,74]),new ae(24,new H(5,98),new H(1,99)),new ae(28,new H(7,45),new H(3,46)),new ae(24,new H(15,19),new H(2,20)),new ae(30,new H(3,15),new H(13,16))),new et(17,Int32Array.from([6,30,54,78]),new ae(28,new H(1,107),new H(5,108)),new ae(28,new H(10,46),new H(1,47)),new ae(28,new H(1,22),new H(15,23)),new ae(28,new H(2,14),new H(17,15))),new et(18,Int32Array.from([6,30,56,82]),new ae(30,new H(5,120),new H(1,121)),new ae(26,new H(9,43),new H(4,44)),new ae(28,new H(17,22),new H(1,23)),new ae(28,new H(2,14),new H(19,15))),new et(19,Int32Array.from([6,30,58,86]),new ae(28,new H(3,113),new H(4,114)),new ae(26,new H(3,44),new H(11,45)),new ae(26,new H(17,21),new H(4,22)),new ae(26,new H(9,13),new H(16,14))),new et(20,Int32Array.from([6,34,62,90]),new ae(28,new H(3,107),new H(5,108)),new ae(26,new H(3,41),new H(13,42)),new ae(30,new H(15,24),new H(5,25)),new ae(28,new H(15,15),new H(10,16))),new et(21,Int32Array.from([6,28,50,72,94]),new ae(28,new H(4,116),new H(4,117)),new ae(26,new H(17,42)),new ae(28,new H(17,22),new H(6,23)),new ae(30,new H(19,16),new H(6,17))),new et(22,Int32Array.from([6,26,50,74,98]),new ae(28,new H(2,111),new H(7,112)),new ae(28,new H(17,46)),new ae(30,new H(7,24),new H(16,25)),new ae(24,new H(34,13))),new et(23,Int32Array.from([6,30,54,78,102]),new ae(30,new H(4,121),new H(5,122)),new ae(28,new H(4,47),new H(14,48)),new ae(30,new H(11,24),new H(14,25)),new ae(30,new H(16,15),new H(14,16))),new et(24,Int32Array.from([6,28,54,80,106]),new ae(30,new H(6,117),new H(4,118)),new ae(28,new H(6,45),new H(14,46)),new ae(30,new H(11,24),new H(16,25)),new ae(30,new H(30,16),new H(2,17))),new et(25,Int32Array.from([6,32,58,84,110]),new ae(26,new H(8,106),new H(4,107)),new ae(28,new H(8,47),new H(13,48)),new ae(30,new H(7,24),new H(22,25)),new ae(30,new H(22,15),new H(13,16))),new et(26,Int32Array.from([6,30,58,86,114]),new ae(28,new H(10,114),new H(2,115)),new ae(28,new H(19,46),new H(4,47)),new ae(28,new H(28,22),new H(6,23)),new ae(30,new H(33,16),new H(4,17))),new et(27,Int32Array.from([6,34,62,90,118]),new ae(30,new H(8,122),new H(4,123)),new ae(28,new H(22,45),new H(3,46)),new ae(30,new H(8,23),new H(26,24)),new ae(30,new H(12,15),new H(28,16))),new et(28,Int32Array.from([6,26,50,74,98,122]),new ae(30,new H(3,117),new H(10,118)),new ae(28,new H(3,45),new H(23,46)),new ae(30,new H(4,24),new H(31,25)),new ae(30,new H(11,15),new H(31,16))),new et(29,Int32Array.from([6,30,54,78,102,126]),new ae(30,new H(7,116),new H(7,117)),new ae(28,new H(21,45),new H(7,46)),new ae(30,new H(1,23),new H(37,24)),new ae(30,new H(19,15),new H(26,16))),new et(30,Int32Array.from([6,26,52,78,104,130]),new ae(30,new H(5,115),new H(10,116)),new ae(28,new H(19,47),new H(10,48)),new ae(30,new H(15,24),new H(25,25)),new ae(30,new H(23,15),new H(25,16))),new et(31,Int32Array.from([6,30,56,82,108,134]),new ae(30,new H(13,115),new H(3,116)),new ae(28,new H(2,46),new H(29,47)),new ae(30,new H(42,24),new H(1,25)),new ae(30,new H(23,15),new H(28,16))),new et(32,Int32Array.from([6,34,60,86,112,138]),new ae(30,new H(17,115)),new ae(28,new H(10,46),new H(23,47)),new ae(30,new H(10,24),new H(35,25)),new ae(30,new H(19,15),new H(35,16))),new et(33,Int32Array.from([6,30,58,86,114,142]),new ae(30,new H(17,115),new H(1,116)),new ae(28,new H(14,46),new H(21,47)),new ae(30,new H(29,24),new H(19,25)),new ae(30,new H(11,15),new H(46,16))),new et(34,Int32Array.from([6,34,62,90,118,146]),new ae(30,new H(13,115),new H(6,116)),new ae(28,new H(14,46),new H(23,47)),new ae(30,new H(44,24),new H(7,25)),new ae(30,new H(59,16),new H(1,17))),new et(35,Int32Array.from([6,30,54,78,102,126,150]),new ae(30,new H(12,121),new H(7,122)),new ae(28,new H(12,47),new H(26,48)),new ae(30,new H(39,24),new H(14,25)),new ae(30,new H(22,15),new H(41,16))),new et(36,Int32Array.from([6,24,50,76,102,128,154]),new ae(30,new H(6,121),new H(14,122)),new ae(28,new H(6,47),new H(34,48)),new ae(30,new H(46,24),new H(10,25)),new ae(30,new H(2,15),new H(64,16))),new et(37,Int32Array.from([6,28,54,80,106,132,158]),new ae(30,new H(17,122),new H(4,123)),new ae(28,new H(29,46),new H(14,47)),new ae(30,new H(49,24),new H(10,25)),new ae(30,new H(24,15),new H(46,16))),new et(38,Int32Array.from([6,32,58,84,110,136,162]),new ae(30,new H(4,122),new H(18,123)),new ae(28,new H(13,46),new H(32,47)),new ae(30,new H(48,24),new H(14,25)),new ae(30,new H(42,15),new H(32,16))),new et(39,Int32Array.from([6,26,54,82,110,138,166]),new ae(30,new H(20,117),new H(4,118)),new ae(28,new H(40,47),new H(7,48)),new ae(30,new H(43,24),new H(22,25)),new ae(30,new H(10,15),new H(67,16))),new et(40,Int32Array.from([6,30,58,86,114,142,170]),new ae(30,new H(19,118),new H(6,119)),new ae(28,new H(18,47),new H(31,48)),new ae(30,new H(34,24),new H(34,25)),new ae(30,new H(20,15),new H(61,16)))];var fn;(function(P){P[P.DATA_MASK_000=0]="DATA_MASK_000",P[P.DATA_MASK_001=1]="DATA_MASK_001",P[P.DATA_MASK_010=2]="DATA_MASK_010",P[P.DATA_MASK_011=3]="DATA_MASK_011",P[P.DATA_MASK_100=4]="DATA_MASK_100",P[P.DATA_MASK_101=5]="DATA_MASK_101",P[P.DATA_MASK_110=6]="DATA_MASK_110",P[P.DATA_MASK_111=7]="DATA_MASK_111"})(fn||(fn={}));class Ct{constructor(t,s){this.value=t,this.isMasked=s}unmaskBitMatrix(t,s){for(let a=0;a<s;a++)for(let d=0;d<s;d++)this.isMasked(a,d)&&t.flip(d,a)}}Ct.values=new Map([[fn.DATA_MASK_000,new Ct(fn.DATA_MASK_000,(P,t)=>(P+t&1)===0)],[fn.DATA_MASK_001,new Ct(fn.DATA_MASK_001,(P,t)=>(P&1)===0)],[fn.DATA_MASK_010,new Ct(fn.DATA_MASK_010,(P,t)=>t%3===0)],[fn.DATA_MASK_011,new Ct(fn.DATA_MASK_011,(P,t)=>(P+t)%3===0)],[fn.DATA_MASK_100,new Ct(fn.DATA_MASK_100,(P,t)=>(Math.floor(P/2)+Math.floor(t/3)&1)===0)],[fn.DATA_MASK_101,new Ct(fn.DATA_MASK_101,(P,t)=>P*t%6===0)],[fn.DATA_MASK_110,new Ct(fn.DATA_MASK_110,(P,t)=>P*t%6<3)],[fn.DATA_MASK_111,new Ct(fn.DATA_MASK_111,(P,t)=>(P+t+P*t%3&1)===0)]]);class mc{constructor(t){const s=t.getHeight();if(s<21||(s&3)!==1)throw new V;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let h=0;h<6;h++)t=this.copyBit(h,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let h=5;h>=0;h--)t=this.copyBit(8,h,t);const s=this.bitMatrix.getHeight();let a=0;const d=s-7;for(let h=s-1;h>=d;h--)a=this.copyBit(8,h,a);for(let h=s-8;h<s;h++)a=this.copyBit(h,8,a);if(this.parsedFormatInfo=Nn.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),s=Math.floor((t-17)/4);if(s<=6)return et.getVersionForNumber(s);let a=0;const d=t-11;for(let f=5;f>=0;f--)for(let w=t-9;w>=d;w--)a=this.copyBit(w,f,a);let h=et.decodeVersionInformation(a);if(h!==null&&h.getDimensionForVersion()===t)return this.parsedVersion=h,h;a=0;for(let f=5;f>=0;f--)for(let w=t-9;w>=d;w--)a=this.copyBit(f,w,a);if(h=et.decodeVersionInformation(a),h!==null&&h.getDimensionForVersion()===t)return this.parsedVersion=h,h;throw new V}copyBit(t,s,a){return(this.isMirror?this.bitMatrix.get(s,t):this.bitMatrix.get(t,s))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),s=this.readVersion(),a=Ct.values.get(t.getDataMask()),d=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,d);const h=s.buildFunctionPattern();let f=!0;const w=new Uint8Array(s.getTotalCodewords());let C=0,E=0,I=0;for(let j=d-1;j>0;j-=2){j===6&&j--;for(let B=0;B<d;B++){const G=f?d-1-B:B;for(let Z=0;Z<2;Z++)h.get(j-Z,G)||(I++,E<<=1,this.bitMatrix.get(j-Z,G)&&(E|=1),I===8&&(w[C++]=E,I=0,E=0))}f=!f}if(C!==s.getTotalCodewords())throw new V;return w}remask(){if(this.parsedFormatInfo===null)return;const t=Ct.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,s)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let s=0,a=t.getWidth();s<a;s++)for(let d=s+1,h=t.getHeight();d<h;d++)t.get(s,d)!==t.get(d,s)&&(t.flip(d,s),t.flip(s,d))}}class qo{constructor(t,s){this.numDataCodewords=t,this.codewords=s}static getDataBlocks(t,s,a){if(t.length!==s.getTotalCodewords())throw new _;const d=s.getECBlocksForLevel(a);let h=0;const f=d.getECBlocks();for(const Z of f)h+=Z.getCount();const w=new Array(h);let C=0;for(const Z of f)for(let J=0;J<Z.getCount();J++){const oe=Z.getDataCodewords(),me=d.getECCodewordsPerBlock()+oe;w[C++]=new qo(oe,new Uint8Array(me))}const E=w[0].codewords.length;let I=w.length-1;for(;I>=0&&w[I].codewords.length!==E;)I--;I++;const j=E-d.getECCodewordsPerBlock();let B=0;for(let Z=0;Z<j;Z++)for(let J=0;J<C;J++)w[J].codewords[Z]=t[B++];for(let Z=I;Z<C;Z++)w[Z].codewords[j]=t[B++];const G=w[0].codewords.length;for(let Z=j;Z<G;Z++)for(let J=0;J<C;J++){const oe=J<I?Z:Z+1;w[J].codewords[oe]=t[B++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Jn;(function(P){P[P.TERMINATOR=0]="TERMINATOR",P[P.NUMERIC=1]="NUMERIC",P[P.ALPHANUMERIC=2]="ALPHANUMERIC",P[P.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",P[P.BYTE=4]="BYTE",P[P.ECI=5]="ECI",P[P.KANJI=6]="KANJI",P[P.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",P[P.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",P[P.HANZI=9]="HANZI"})(Jn||(Jn={}));class rt{constructor(t,s,a,d){this.value=t,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=d,rt.FOR_BITS.set(d,this),rt.FOR_VALUE.set(t,this)}static forBits(t){const s=rt.FOR_BITS.get(t);if(s===void 0)throw new _;return s}getCharacterCountBits(t){const s=t.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof rt))return!1;const s=t;return this.value===s.value}toString(){return this.stringValue}}rt.FOR_BITS=new Map,rt.FOR_VALUE=new Map,rt.TERMINATOR=new rt(Jn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),rt.NUMERIC=new rt(Jn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),rt.ALPHANUMERIC=new rt(Jn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),rt.STRUCTURED_APPEND=new rt(Jn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),rt.BYTE=new rt(Jn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),rt.ECI=new rt(Jn.ECI,"ECI",Int32Array.from([0,0,0]),7),rt.KANJI=new rt(Jn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),rt.FNC1_FIRST_POSITION=new rt(Jn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),rt.FNC1_SECOND_POSITION=new rt(Jn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),rt.HANZI=new rt(Jn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Yt{static decode(t,s,a,d){const h=new ll(t);let f=new ve;const w=new Array;let C=-1,E=-1;try{let I=null,j=!1,B;do{if(h.available()<4)B=rt.TERMINATOR;else{const G=h.readBits(4);B=rt.forBits(G)}switch(B){case rt.TERMINATOR:break;case rt.FNC1_FIRST_POSITION:case rt.FNC1_SECOND_POSITION:j=!0;break;case rt.STRUCTURED_APPEND:if(h.available()<16)throw new V;C=h.readBits(8),E=h.readBits(8);break;case rt.ECI:const G=Yt.parseECIValue(h);if(I=W.getCharacterSetECIByValue(G),I===null)throw new V;break;case rt.HANZI:const Z=h.readBits(4),J=h.readBits(B.getCharacterCountBits(s));Z===Yt.GB2312_SUBSET&&Yt.decodeHanziSegment(h,f,J);break;default:const oe=h.readBits(B.getCharacterCountBits(s));switch(B){case rt.NUMERIC:Yt.decodeNumericSegment(h,f,oe);break;case rt.ALPHANUMERIC:Yt.decodeAlphanumericSegment(h,f,oe,j);break;case rt.BYTE:Yt.decodeByteSegment(h,f,oe,I,w,d);break;case rt.KANJI:Yt.decodeKanjiSegment(h,f,oe);break;default:throw new V}break}}while(B!==rt.TERMINATOR)}catch{throw new V}return new Le(t,f.toString(),w.length===0?null:w,a===null?null:a.toString(),C,E)}static decodeHanziSegment(t,s,a){if(a*13>t.available())throw new V;const d=new Uint8Array(2*a);let h=0;for(;a>0;){const f=t.readBits(13);let w=f/96<<8&4294967295|f%96;w<959?w+=41377:w+=42657,d[h]=w>>8&255,d[h+1]=w&255,h+=2,a--}try{s.append(be.decode(d,de.GB2312))}catch(f){throw new V(f)}}static decodeKanjiSegment(t,s,a){if(a*13>t.available())throw new V;const d=new Uint8Array(2*a);let h=0;for(;a>0;){const f=t.readBits(13);let w=f/192<<8&4294967295|f%192;w<7936?w+=33088:w+=49472,d[h]=w>>8,d[h+1]=w,h+=2,a--}try{s.append(be.decode(d,de.SHIFT_JIS))}catch(f){throw new V(f)}}static decodeByteSegment(t,s,a,d,h,f){if(8*a>t.available())throw new V;const w=new Uint8Array(a);for(let E=0;E<a;E++)w[E]=t.readBits(8);let C;d===null?C=de.guessEncoding(w,f):C=d.getName();try{s.append(be.decode(w,C))}catch(E){throw new V(E)}h.push(w)}static toAlphaNumericChar(t){if(t>=Yt.ALPHANUMERIC_CHARS.length)throw new V;return Yt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,s,a,d){const h=s.length();for(;a>1;){if(t.available()<11)throw new V;const f=t.readBits(11);s.append(Yt.toAlphaNumericChar(Math.floor(f/45))),s.append(Yt.toAlphaNumericChar(f%45)),a-=2}if(a===1){if(t.available()<6)throw new V;s.append(Yt.toAlphaNumericChar(t.readBits(6)))}if(d)for(let f=h;f<s.length();f++)s.charAt(f)==="%"&&(f<s.length()-1&&s.charAt(f+1)==="%"?s.deleteCharAt(f+1):s.setCharAt(f,""))}static decodeNumericSegment(t,s,a){for(;a>=3;){if(t.available()<10)throw new V;const d=t.readBits(10);if(d>=1e3)throw new V;s.append(Yt.toAlphaNumericChar(Math.floor(d/100))),s.append(Yt.toAlphaNumericChar(Math.floor(d/10)%10)),s.append(Yt.toAlphaNumericChar(d%10)),a-=3}if(a===2){if(t.available()<7)throw new V;const d=t.readBits(7);if(d>=100)throw new V;s.append(Yt.toAlphaNumericChar(Math.floor(d/10))),s.append(Yt.toAlphaNumericChar(d%10))}else if(a===1){if(t.available()<4)throw new V;const d=t.readBits(4);if(d>=10)throw new V;s.append(Yt.toAlphaNumericChar(d))}}static parseECIValue(t){const s=t.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const a=t.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=t.readBits(16);return(s&31)<<16&4294967295|a}throw new V}}Yt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Yt.GB2312_SUBSET=1;class cl{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const s=t[0];t[0]=t[2],t[2]=s}}class ul{constructor(){this.rsDecoder=new Me(nt.QR_CODE_FIELD_256)}decodeBooleanArray(t,s){return this.decodeBitMatrix(Ce.parseFromBooleanArray(t),s)}decodeBitMatrix(t,s){const a=new mc(t);let d=null;try{return this.decodeBitMatrixParser(a,s)}catch(h){d=h}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const h=this.decodeBitMatrixParser(a,s);return h.setOther(new cl(!0)),h}catch(h){throw d!==null?d:h}}decodeBitMatrixParser(t,s){const a=t.readVersion(),d=t.readFormatInformation().getErrorCorrectionLevel(),h=t.readCodewords(),f=qo.getDataBlocks(h,a,d);let w=0;for(const I of f)w+=I.getNumDataCodewords();const C=new Uint8Array(w);let E=0;for(const I of f){const j=I.getCodewords(),B=I.getNumDataCodewords();this.correctErrors(j,B);for(let G=0;G<B;G++)C[E++]=j[G]}return Yt.decode(C,a,d,s)}correctErrors(t,s){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-s)}catch{throw new T}for(let d=0;d<s;d++)t[d]=a[d]}}class gs extends ze{constructor(t,s,a){super(t,s),this.estimatedModuleSize=a}aboutEquals(t,s,a){if(Math.abs(s-this.getY())<=t&&Math.abs(a-this.getX())<=t){const d=Math.abs(t-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(t,s,a){const d=(this.getX()+s)/2,h=(this.getY()+t)/2,f=(this.estimatedModuleSize+a)/2;return new gs(d,h,f)}}class _r{constructor(t,s,a,d,h,f,w){this.image=t,this.startX=s,this.startY=a,this.width=d,this.height=h,this.moduleSize=f,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,s=this.height,a=this.width,d=t+a,h=this.startY+s/2,f=new Int32Array(3),w=this.image;for(let C=0;C<s;C++){const E=h+((C&1)===0?Math.floor((C+1)/2):-Math.floor((C+1)/2));f[0]=0,f[1]=0,f[2]=0;let I=t;for(;I<d&&!w.get(I,E);)I++;let j=0;for(;I<d;){if(w.get(I,E))if(j===1)f[1]++;else if(j===2){if(this.foundPatternCross(f)){const B=this.handlePossibleCenter(f,E,I);if(B!==null)return B}f[0]=f[2],f[1]=1,f[2]=0,j=1}else f[++j]++;else j===1&&j++,f[j]++;I++}if(this.foundPatternCross(f)){const B=this.handlePossibleCenter(f,E,d);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie}static centerFromEnd(t,s){return s-t[2]-t[1]/2}foundPatternCross(t){const s=this.moduleSize,a=s/2;for(let d=0;d<3;d++)if(Math.abs(s-t[d])>=a)return!1;return!0}crossCheckVertical(t,s,a,d){const h=this.image,f=h.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let C=t;for(;C>=0&&h.get(s,C)&&w[1]<=a;)w[1]++,C--;if(C<0||w[1]>a)return NaN;for(;C>=0&&!h.get(s,C)&&w[0]<=a;)w[0]++,C--;if(w[0]>a)return NaN;for(C=t+1;C<f&&h.get(s,C)&&w[1]<=a;)w[1]++,C++;if(C===f||w[1]>a)return NaN;for(;C<f&&!h.get(s,C)&&w[2]<=a;)w[2]++,C++;if(w[2]>a)return NaN;const E=w[0]+w[1]+w[2];return 5*Math.abs(E-d)>=2*d?NaN:this.foundPatternCross(w)?_r.centerFromEnd(w,C):NaN}handlePossibleCenter(t,s,a){const d=t[0]+t[1]+t[2],h=_r.centerFromEnd(t,a),f=this.crossCheckVertical(s,h,2*t[1],d);if(!isNaN(f)){const w=(t[0]+t[1]+t[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(w,f,h))return E.combineEstimate(f,h,w);const C=new gs(h,f,w);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class Vr extends ze{constructor(t,s,a,d){super(t,s),this.estimatedModuleSize=a,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,s,a){if(Math.abs(s-this.getY())<=t&&Math.abs(a-this.getX())<=t){const d=Math.abs(t-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(t,s,a){const d=this.count+1,h=(this.count*this.getX()+s)/d,f=(this.count*this.getY()+t)/d,w=(this.count*this.estimatedModuleSize+a)/d;return new Vr(h,f,w,d)}}class Ii{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class rn{constructor(t,s){this.image=t,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const s=t!=null&&t.get(Y.TRY_HARDER)!==void 0,a=t!=null&&t.get(Y.PURE_BARCODE)!==void 0,d=this.image,h=d.getHeight(),f=d.getWidth();let w=Math.floor(3*h/(4*rn.MAX_MODULES));(w<rn.MIN_SKIP||s)&&(w=rn.MIN_SKIP);let C=!1;const E=new Int32Array(5);for(let j=w-1;j<h&&!C;j+=w){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let B=0;for(let G=0;G<f;G++)if(d.get(G,j))(B&1)===1&&B++,E[B]++;else if((B&1)===0)if(B===4)if(rn.foundPatternCross(E)){if(this.handlePossibleCenter(E,j,G,a)===!0)if(w=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const J=this.findRowSkip();J>E[2]&&(j+=J-E[2]-w,G=f-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,B=3;continue}B=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,B=3;else E[++B]++;else E[B]++;rn.foundPatternCross(E)&&this.handlePossibleCenter(E,j,f,a)===!0&&(w=E[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return ze.orderBestPatterns(I),new Ii(I)}static centerFromEnd(t,s){return s-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let s=0;for(let h=0;h<5;h++){const f=t[h];if(f===0)return!1;s+=f}if(s<7)return!1;const a=s/7,d=a/2;return Math.abs(a-t[0])<d&&Math.abs(a-t[1])<d&&Math.abs(3*a-t[2])<3*d&&Math.abs(a-t[3])<d&&Math.abs(a-t[4])<d}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,s,a,d){const h=this.getCrossCheckStateCount();let f=0;const w=this.image;for(;t>=f&&s>=f&&w.get(s-f,t-f);)h[2]++,f++;if(t<f||s<f)return!1;for(;t>=f&&s>=f&&!w.get(s-f,t-f)&&h[1]<=a;)h[1]++,f++;if(t<f||s<f||h[1]>a)return!1;for(;t>=f&&s>=f&&w.get(s-f,t-f)&&h[0]<=a;)h[0]++,f++;if(h[0]>a)return!1;const C=w.getHeight(),E=w.getWidth();for(f=1;t+f<C&&s+f<E&&w.get(s+f,t+f);)h[2]++,f++;if(t+f>=C||s+f>=E)return!1;for(;t+f<C&&s+f<E&&!w.get(s+f,t+f)&&h[3]<a;)h[3]++,f++;if(t+f>=C||s+f>=E||h[3]>=a)return!1;for(;t+f<C&&s+f<E&&w.get(s+f,t+f)&&h[4]<a;)h[4]++,f++;if(h[4]>=a)return!1;const I=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(I-d)<2*d&&rn.foundPatternCross(h)}crossCheckVertical(t,s,a,d){const h=this.image,f=h.getHeight(),w=this.getCrossCheckStateCount();let C=t;for(;C>=0&&h.get(s,C);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!h.get(s,C)&&w[1]<=a;)w[1]++,C--;if(C<0||w[1]>a)return NaN;for(;C>=0&&h.get(s,C)&&w[0]<=a;)w[0]++,C--;if(w[0]>a)return NaN;for(C=t+1;C<f&&h.get(s,C);)w[2]++,C++;if(C===f)return NaN;for(;C<f&&!h.get(s,C)&&w[3]<a;)w[3]++,C++;if(C===f||w[3]>=a)return NaN;for(;C<f&&h.get(s,C)&&w[4]<a;)w[4]++,C++;if(w[4]>=a)return NaN;const E=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(E-d)>=2*d?NaN:rn.foundPatternCross(w)?rn.centerFromEnd(w,C):NaN}crossCheckHorizontal(t,s,a,d){const h=this.image,f=h.getWidth(),w=this.getCrossCheckStateCount();let C=t;for(;C>=0&&h.get(C,s);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!h.get(C,s)&&w[1]<=a;)w[1]++,C--;if(C<0||w[1]>a)return NaN;for(;C>=0&&h.get(C,s)&&w[0]<=a;)w[0]++,C--;if(w[0]>a)return NaN;for(C=t+1;C<f&&h.get(C,s);)w[2]++,C++;if(C===f)return NaN;for(;C<f&&!h.get(C,s)&&w[3]<a;)w[3]++,C++;if(C===f||w[3]>=a)return NaN;for(;C<f&&h.get(C,s)&&w[4]<a;)w[4]++,C++;if(w[4]>=a)return NaN;const E=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(E-d)>=d?NaN:rn.foundPatternCross(w)?rn.centerFromEnd(w,C):NaN}handlePossibleCenter(t,s,a,d){const h=t[0]+t[1]+t[2]+t[3]+t[4];let f=rn.centerFromEnd(t,a),w=this.crossCheckVertical(s,Math.floor(f),t[2],h);if(!isNaN(w)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(w),t[2],h),!isNaN(f)&&(!d||this.crossCheckDiagonal(Math.floor(w),Math.floor(f),t[2],h)))){const C=h/7;let E=!1;const I=this.possibleCenters;for(let j=0,B=I.length;j<B;j++){const G=I[j];if(G.aboutEquals(C,w,f)){I[j]=G.combineEstimate(w,f,C),E=!0;break}}if(!E){const j=new Vr(f,w,C);I.push(j),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(j)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=rn.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,s=0;const a=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=rn.CENTER_QUORUM&&(t++,s+=f.getEstimatedModuleSize());if(t<3)return!1;const d=s/a;let h=0;for(const f of this.possibleCenters)h+=Math.abs(f.getEstimatedModuleSize()-d);return h<=.05*s}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ie;const s=this.possibleCenters;let a;if(t>3){let d=0,h=0;for(const C of this.possibleCenters){const E=C.getEstimatedModuleSize();d+=E,h+=E*E}a=d/t;let f=Math.sqrt(h/t-a*a);s.sort((C,E)=>{const I=Math.abs(E.getEstimatedModuleSize()-a),j=Math.abs(C.getEstimatedModuleSize()-a);return I<j?-1:I>j?1:0});const w=Math.max(.2*a,f);for(let C=0;C<s.length&&s.length>3;C++){const E=s[C];Math.abs(E.getEstimatedModuleSize()-a)>w&&(s.splice(C,1),C--)}}if(s.length>3){let d=0;for(const h of s)d+=h.getEstimatedModuleSize();a=d/s.length,s.sort((h,f)=>{if(f.getCount()===h.getCount()){const w=Math.abs(f.getEstimatedModuleSize()-a),C=Math.abs(h.getEstimatedModuleSize()-a);return w<C?1:w>C?-1:0}else return f.getCount()-h.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}rn.CENTER_QUORUM=2,rn.MIN_SKIP=3,rn.MAX_MODULES=57;class ii{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(Y.NEED_RESULT_POINT_CALLBACK);const a=new rn(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const s=t.getTopLeft(),a=t.getTopRight(),d=t.getBottomLeft(),h=this.calculateModuleSize(s,a,d);if(h<1)throw new ie("No pattern found in proccess finder.");const f=ii.computeDimension(s,a,d,h),w=et.getProvisionalVersionForDimension(f),C=w.getDimensionForVersion()-7;let E=null;if(w.getAlignmentPatternCenters().length>0){const G=a.getX()-s.getX()+d.getX(),Z=a.getY()-s.getY()+d.getY(),J=1-3/C,oe=Math.floor(s.getX()+J*(G-s.getX())),me=Math.floor(s.getY()+J*(Z-s.getY()));for(let ke=4;ke<=16;ke<<=1)try{E=this.findAlignmentInRegion(h,oe,me,ke);break}catch(Oe){if(!(Oe instanceof ie))throw Oe}}const I=ii.createTransform(s,a,d,E,f),j=ii.sampleGrid(this.image,I,f);let B;return E===null?B=[d,s,a]:B=[d,s,a,E],new ri(j,B)}static createTransform(t,s,a,d,h){const f=h-3.5;let w,C,E,I;return d!==null?(w=d.getX(),C=d.getY(),E=f-3,I=E):(w=s.getX()-t.getX()+a.getX(),C=s.getY()-t.getY()+a.getY(),E=f,I=f),Dn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,E,I,3.5,f,t.getX(),t.getY(),s.getX(),s.getY(),w,C,a.getX(),a.getY())}static sampleGrid(t,s,a){return St.getInstance().sampleGridWithTransform(t,a,a,s)}static computeDimension(t,s,a,d){const h=ht.round(ze.distance(t,s)/d),f=ht.round(ze.distance(t,a)/d);let w=Math.floor((h+f)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new ie("Dimensions could be not found.")}return w}calculateModuleSize(t,s,a){return(this.calculateModuleSizeOneWay(t,s)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(s.getX()),Math.floor(s.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?d/7:isNaN(d)?a/7:(a+d)/14}sizeOfBlackWhiteBlackRunBothWays(t,s,a,d){let h=this.sizeOfBlackWhiteBlackRun(t,s,a,d),f=1,w=t-(a-t);w<0?(f=t/(t-w),w=0):w>=this.image.getWidth()&&(f=(this.image.getWidth()-1-t)/(w-t),w=this.image.getWidth()-1);let C=Math.floor(s-(d-s)*f);return f=1,C<0?(f=s/(s-C),C=0):C>=this.image.getHeight()&&(f=(this.image.getHeight()-1-s)/(C-s),C=this.image.getHeight()-1),w=Math.floor(t+(w-t)*f),h+=this.sizeOfBlackWhiteBlackRun(t,s,w,C),h-1}sizeOfBlackWhiteBlackRun(t,s,a,d){const h=Math.abs(d-s)>Math.abs(a-t);if(h){let G=t;t=s,s=G,G=a,a=d,d=G}const f=Math.abs(a-t),w=Math.abs(d-s);let C=-f/2;const E=t<a?1:-1,I=s<d?1:-1;let j=0;const B=a+E;for(let G=t,Z=s;G!==B;G+=E){const J=h?Z:G,oe=h?G:Z;if(j===1===this.image.get(J,oe)){if(j===2)return ht.distance(G,Z,t,s);j++}if(C+=w,C>0){if(Z===d)break;Z+=I,C-=f}}return j===2?ht.distance(a+E,d,t,s):NaN}findAlignmentInRegion(t,s,a,d){const h=Math.floor(d*t),f=Math.max(0,s-h),w=Math.min(this.image.getWidth()-1,s+h);if(w-f<t*3)throw new ie("Alignment top exceeds estimated module size.");const C=Math.max(0,a-h),E=Math.min(this.image.getHeight()-1,a+h);if(E-C<t*3)throw new ie("Alignment bottom exceeds estimated module size.");return new _r(this.image,f,C,w-f,E-C,t,this.resultPointCallback).find()}}class Hn{constructor(){this.decoder=new ul}getDecoder(){return this.decoder}decode(t,s){let a,d;if(s!=null&&s.get(Y.PURE_BARCODE)!==void 0){const C=Hn.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(C,s),d=Hn.NO_POINTS}else{const C=new ii(t.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(C.getBits(),s),d=C.getPoints()}a.getOther()instanceof cl&&a.getOther().applyMirroredCorrection(d);const h=new Te(a.getText(),a.getRawBytes(),void 0,d,ee.QR_CODE,void 0),f=a.getByteSegments();f!==null&&h.putMetadata(Ee.BYTE_SEGMENTS,f);const w=a.getECLevel();return w!==null&&h.putMetadata(Ee.ERROR_CORRECTION_LEVEL,w),a.hasStructuredAppend()&&(h.putMetadata(Ee.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),h.putMetadata(Ee.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),h}reset(){}static extractPureBits(t){const s=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(s===null||a===null)throw new ie;const d=this.moduleSize(s,t);let h=s[1],f=a[1],w=s[0],C=a[0];if(w>=C||h>=f)throw new ie;if(f-h!==C-w&&(C=w+(f-h),C>=t.getWidth()))throw new ie;const E=Math.round((C-w+1)/d),I=Math.round((f-h+1)/d);if(E<=0||I<=0)throw new ie;if(I!==E)throw new ie;const j=Math.floor(d/2);h+=j,w+=j;const B=w+Math.floor((E-1)*d)-C;if(B>0){if(B>j)throw new ie;w-=B}const G=h+Math.floor((I-1)*d)-f;if(G>0){if(G>j)throw new ie;h-=G}const Z=new Ce(E,I);for(let J=0;J<I;J++){const oe=h+Math.floor(J*d);for(let me=0;me<E;me++)t.get(w+Math.floor(me*d),oe)&&Z.set(me,J)}return Z}static moduleSize(t,s){const a=s.getHeight(),d=s.getWidth();let h=t[0],f=t[1],w=!0,C=0;for(;h<d&&f<a;){if(w!==s.get(h,f)){if(++C===5)break;w=!w}h++,f++}if(h===d||f===a)throw new ie;return(h-t[0])/7}}Hn.NO_POINTS=new Array;class ct{PDF417Common(){}static getBitCountSum(t){return ht.sum(t)}static toIntArray(t){if(t==null||!t.length)return ct.EMPTY_INT_ARRAY;const s=new Int32Array(t.length);let a=0;for(const d of t)s[a++]=d;return s}static getCodeword(t){const s=z.binarySearch(ct.SYMBOL_TABLE,t&262143);return s<0?-1:(ct.CODEWORD_TABLE[s]-1)%ct.NUMBER_OF_CODEWORDS}}ct.NUMBER_OF_CODEWORDS=929,ct.MAX_CODEWORDS_IN_BARCODE=ct.NUMBER_OF_CODEWORDS-1,ct.MIN_ROWS_IN_BARCODE=3,ct.MAX_ROWS_IN_BARCODE=90,ct.MODULES_IN_CODEWORD=17,ct.MODULES_IN_STOP_PATTERN=18,ct.BARS_IN_MODULE=8,ct.EMPTY_INT_ARRAY=new Int32Array([]),ct.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ct.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class xc{constructor(t,s){this.bits=t,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class pt{static detectMultiple(t,s,a){let d=t.getBlackMatrix(),h=pt.detect(a,d);return h.length||(d=d.clone(),d.rotate180(),h=pt.detect(a,d)),new xc(d,h)}static detect(t,s){const a=new Array;let d=0,h=0,f=!1;for(;d<s.getHeight();){const w=pt.findVertices(s,d,h);if(w[0]==null&&w[3]==null){if(!f)break;f=!1,h=0;for(const C of a)C[1]!=null&&(d=Math.trunc(Math.max(d,C[1].getY()))),C[3]!=null&&(d=Math.max(d,Math.trunc(C[3].getY())));d+=pt.ROW_STEP;continue}if(f=!0,a.push(w),!t)break;w[2]!=null?(h=Math.trunc(w[2].getX()),d=Math.trunc(w[2].getY())):(h=Math.trunc(w[4].getX()),d=Math.trunc(w[4].getY()))}return a}static findVertices(t,s,a){const d=t.getHeight(),h=t.getWidth(),f=new Array(8);return pt.copyToResult(f,pt.findRowsWithPattern(t,d,h,s,a,pt.START_PATTERN),pt.INDEXES_START_PATTERN),f[4]!=null&&(a=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY())),pt.copyToResult(f,pt.findRowsWithPattern(t,d,h,s,a,pt.STOP_PATTERN),pt.INDEXES_STOP_PATTERN),f}static copyToResult(t,s,a){for(let d=0;d<a.length;d++)t[a[d]]=s[d]}static findRowsWithPattern(t,s,a,d,h,f){const w=new Array(4);let C=!1;const E=new Int32Array(f.length);for(;d<s;d+=pt.ROW_STEP){let j=pt.findGuardPattern(t,h,d,a,!1,f,E);if(j!=null){for(;d>0;){const B=pt.findGuardPattern(t,h,--d,a,!1,f,E);if(B!=null)j=B;else{d++;break}}w[0]=new ze(j[0],d),w[1]=new ze(j[1],d),C=!0;break}}let I=d+1;if(C){let j=0,B=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;I<s;I++){const G=pt.findGuardPattern(t,B[0],I,a,!1,f,E);if(G!=null&&Math.abs(B[0]-G[0])<pt.MAX_PATTERN_DRIFT&&Math.abs(B[1]-G[1])<pt.MAX_PATTERN_DRIFT)B=G,j=0;else{if(j>pt.SKIPPED_ROW_COUNT_MAX)break;j++}}I-=j+1,w[2]=new ze(B[0],I),w[3]=new ze(B[1],I)}return I-d<pt.BARCODE_MIN_HEIGHT&&z.fill(w,null),w}static findGuardPattern(t,s,a,d,h,f,w){z.fillWithin(w,0,w.length,0);let C=s,E=0;for(;t.get(C,a)&&C>0&&E++<pt.MAX_PIXEL_DRIFT;)C--;let I=C,j=0,B=f.length;for(let G=h;I<d;I++)if(t.get(I,a)!==G)w[j]++;else{if(j===B-1){if(pt.patternMatchVariance(w,f,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return new Int32Array([C,I]);C+=w[0]+w[1],O.arraycopy(w,2,w,0,j-1),w[j-1]=0,w[j]=0,j--}else j++;w[j]=1,G=!G}return j===B-1&&pt.patternMatchVariance(w,f,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE?new Int32Array([C,I-1]):null}static patternMatchVariance(t,s,a){let d=t.length,h=0,f=0;for(let E=0;E<d;E++)h+=t[E],f+=s[E];if(h<f)return 1/0;let w=h/f;a*=w;let C=0;for(let E=0;E<d;E++){let I=t[E],j=s[E]*w,B=I>j?I-j:j-I;if(B>a)return 1/0;C+=B}return C/h}}pt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),pt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),pt.MAX_AVG_VARIANCE=.42,pt.MAX_INDIVIDUAL_VARIANCE=.8,pt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),pt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),pt.MAX_PIXEL_DRIFT=3,pt.MAX_PATTERN_DRIFT=5,pt.SKIPPED_ROW_COUNT_MAX=25,pt.ROW_STEP=5,pt.BARCODE_MIN_HEIGHT=10;class In{constructor(t,s){if(s.length===0)throw new _;this.field=t;let a=s.length;if(a>1&&s[0]===0){let d=1;for(;d<a&&s[d]===0;)d++;d===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-d),O.arraycopy(s,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let d=0;for(let h of this.coefficients)d=this.field.add(d,h);return d}let s=this.coefficients[0],a=this.coefficients.length;for(let d=1;d<a;d++)s=this.field.add(this.field.multiply(t,s),this.coefficients[d]);return s}add(t){if(!this.field.equals(t.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let s=this.coefficients,a=t.coefficients;if(s.length>a.length){let f=s;s=a,a=f}let d=new Int32Array(a.length),h=a.length-s.length;O.arraycopy(a,0,d,0,h);for(let f=h;f<a.length;f++)d[f]=this.field.add(s[f-h],a[f]);return new In(this.field,d)}subtract(t){if(!this.field.equals(t.field))throw new _("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof In?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new In(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,d=t.coefficients,h=d.length,f=new Int32Array(a+h-1);for(let w=0;w<a;w++){let C=s[w];for(let E=0;E<h;E++)f[w+E]=this.field.add(f[w+E],this.field.multiply(C,d[E]))}return new In(this.field,f)}negative(){let t=this.coefficients.length,s=new Int32Array(t);for(let a=0;a<t;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new In(this.field,s)}multiplyScalar(t){if(t===0)return new In(this.field,new Int32Array([0]));if(t===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let d=0;d<s;d++)a[d]=this.field.multiply(this.coefficients[d],t);return new In(this.field,a)}multiplyByMonomial(t,s){if(t<0)throw new _;if(s===0)return new In(this.field,new Int32Array([0]));let a=this.coefficients.length,d=new Int32Array(a+t);for(let h=0;h<a;h++)d[h]=this.field.multiply(this.coefficients[h],s);return new In(this.field,d)}toString(){let t=new ve;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(s===0||a!==1)&&t.append(a),s!==0&&(s===1?t.append("x"):(t.append("x^"),t.append(s))))}return t.toString()}}class wc{add(t,s){return(t+s)%this.modulus}subtract(t,s){return(this.modulus+t-s)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new _;return this.logTable[t]}inverse(t){if(t===0)throw new vt;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,s){return t===0||s===0?0:this.expTable[(this.logTable[t]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class ps extends wc{constructor(t,s){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let d=0;d<t;d++)this.expTable[d]=a,a=a*s%t;for(let d=0;d<t-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new In(this,new Int32Array([0])),this.one=new In(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,s){if(t<0)throw new _;if(s===0)return this.zero;let a=new Int32Array(t+1);return a[0]=s,new In(this,a)}}ps.PDF417_GF=new ps(ct.NUMBER_OF_CODEWORDS,3);class dl{constructor(){this.field=ps.PDF417_GF}decode(t,s,a){let d=new In(this.field,t),h=new Int32Array(s),f=!1;for(let Z=s;Z>0;Z--){let J=d.evaluateAt(this.field.exp(Z));h[s-Z]=J,J!==0&&(f=!0)}if(!f)return 0;let w=this.field.getOne();if(a!=null)for(const Z of a){let J=this.field.exp(t.length-1-Z),oe=new In(this.field,new Int32Array([this.field.subtract(0,J),1]));w=w.multiply(oe)}let C=new In(this.field,h),E=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),C,s),I=E[0],j=E[1],B=this.findErrorLocations(I),G=this.findErrorMagnitudes(j,I,B);for(let Z=0;Z<B.length;Z++){let J=t.length-1-this.field.log(B[Z]);if(J<0)throw T.getChecksumInstance();t[J]=this.field.subtract(t[J],G[Z])}return B.length}runEuclideanAlgorithm(t,s,a){if(t.getDegree()<s.getDegree()){let B=t;t=s,s=B}let d=t,h=s,f=this.field.getZero(),w=this.field.getOne();for(;h.getDegree()>=Math.round(a/2);){let B=d,G=f;if(d=h,f=w,d.isZero())throw T.getChecksumInstance();h=B;let Z=this.field.getZero(),J=d.getCoefficient(d.getDegree()),oe=this.field.inverse(J);for(;h.getDegree()>=d.getDegree()&&!h.isZero();){let me=h.getDegree()-d.getDegree(),ke=this.field.multiply(h.getCoefficient(h.getDegree()),oe);Z=Z.add(this.field.buildMonomial(me,ke)),h=h.subtract(d.multiplyByMonomial(me,ke))}w=Z.multiply(f).subtract(G).negative()}let C=w.getCoefficient(0);if(C===0)throw T.getChecksumInstance();let E=this.field.inverse(C),I=w.multiply(E),j=h.multiply(E);return[I,j]}findErrorLocations(t){let s=t.getDegree(),a=new Int32Array(s),d=0;for(let h=1;h<this.field.getSize()&&d<s;h++)t.evaluateAt(h)===0&&(a[d]=this.field.inverse(h),d++);if(d!==s)throw T.getChecksumInstance();return a}findErrorMagnitudes(t,s,a){let d=s.getDegree(),h=new Int32Array(d);for(let E=1;E<=d;E++)h[d-E]=this.field.multiply(E,s.getCoefficient(E));let f=new In(this.field,h),w=a.length,C=new Int32Array(w);for(let E=0;E<w;E++){let I=this.field.inverse(a[E]),j=this.field.subtract(0,t.evaluateAt(I)),B=this.field.inverse(f.evaluateAt(I));C[E]=this.field.multiply(j,B)}return C}}class Gi{constructor(t,s,a,d,h){t instanceof Gi?this.constructor_2(t):this.constructor_1(t,s,a,d,h)}constructor_1(t,s,a,d,h){const f=s==null||a==null,w=d==null||h==null;if(f&&w)throw new ie;f?(s=new ze(0,d.getY()),a=new ze(0,h.getY())):w&&(d=new ze(t.getWidth()-1,s.getY()),h=new ze(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=s,this.bottomLeft=a,this.topRight=d,this.bottomRight=h,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(d.getX(),h.getX())),this.minY=Math.trunc(Math.min(s.getY(),d.getY())),this.maxY=Math.trunc(Math.max(a.getY(),h.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,s){return t==null?s:s==null?t:new Gi(t.image,t.topLeft,t.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(t,s,a){let d=this.topLeft,h=this.bottomLeft,f=this.topRight,w=this.bottomRight;if(t>0){let C=a?this.topLeft:this.topRight,E=Math.trunc(C.getY()-t);E<0&&(E=0);let I=new ze(C.getX(),E);a?d=I:f=I}if(s>0){let C=a?this.bottomLeft:this.bottomRight,E=Math.trunc(C.getY()+s);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let I=new ze(C.getX(),E);a?h=I:w=I}return new Gi(this.image,d,h,f,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ro{constructor(t,s,a,d){this.columnCount=t,this.errorCorrectionLevel=d,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class si{constructor(){this.buffer=""}static form(t,s){let a=-1;function d(f,w,C,E,I,j){if(f==="%%")return"%";if(s[++a]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let B=I?parseInt(I.substr(1)):void 0,G;switch(j){case"s":G=s[a];break;case"c":G=s[a][0];break;case"f":G=parseFloat(s[a]).toFixed(f);break;case"p":G=parseFloat(s[a]).toPrecision(f);break;case"e":G=parseFloat(s[a]).toExponential(f);break;case"x":G=parseInt(s[a]).toString(B||16);break;case"d":G=parseFloat(parseInt(s[a],B||10).toPrecision(f)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(B);let Z=parseInt(C),J=C&&C[0]+""=="0"?"0":" ";for(;G.length<Z;)G=w!==void 0?G+J:J+G;return G}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(h,d)}format(t,...s){this.buffer+=si.form(t,s)}toString(){return this.buffer}}class Wr{constructor(t){this.boundingBox=new Gi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let s=this.getCodeword(t);if(s!=null)return s;for(let a=1;a<Wr.MAX_NEARBY_DISTANCE;a++){let d=this.imageRowToCodewordIndex(t)-a;if(d>=0&&(s=this.codewords[d],s!=null)||(d=this.imageRowToCodewordIndex(t)+a,d<this.codewords.length&&(s=this.codewords[d],s!=null)))return s}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,s){this.codewords[this.imageRowToCodewordIndex(t)]=s}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new si;let s=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",s++);continue}t.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return t.toString()}}Wr.MAX_NEARBY_DISTANCE=5;class Ti{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let s=this.values.get(t);s==null&&(s=0),s++,this.values.set(t,s)}getValue(){let t=-1,s=new Array;for(const[a,d]of this.values.entries()){const h={getKey:()=>a,getValue:()=>d};h.getValue()>t?(t=h.getValue(),s=[],s.push(h.getKey())):h.getValue()===t&&s.push(h.getKey())}return ct.toIntArray(s)}getConfidence(t){return this.values.get(t)}}class yc extends Wr{constructor(t,s){super(t),this._isLeft=s}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,t);let a=this.getBoundingBox(),d=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=this.imageRowToCodewordIndex(Math.trunc(h.getY())),C=-1,E=1,I=0;for(let j=f;j<w;j++){if(s[j]==null)continue;let B=s[j],G=B.getRowNumber()-C;if(G===0)I++;else if(G===1)E=Math.max(E,I),I=1,C=B.getRowNumber();else if(G<0||B.getRowNumber()>=t.getRowCount()||G>j)s[j]=null;else{let Z;E>2?Z=(E-2)*G:Z=G;let J=Z>=j;for(let oe=1;oe<=Z&&!J;oe++)J=s[j-oe]!=null;J?s[j]=null:(C=B.getRowNumber(),I=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let s=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let d=a.getRowNumber();if(d>=s.length)continue;s[d]++}return s}adjustIncompleteIndicatorColumnRowNumbers(t){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),d=this._isLeft?s.getBottomLeft():s.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=this.getCodewords(),C=-1;for(let E=h;E<f;E++){if(w[E]==null)continue;let I=w[E];I.setRowNumberAsRowIndicatorColumn();let j=I.getRowNumber()-C;j===0||(j===1?C=I.getRowNumber():I.getRowNumber()>=t.getRowCount()?w[E]=null:C=I.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),s=new Ti,a=new Ti,d=new Ti,h=new Ti;for(let w of t){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let C=w.getValue()%30,E=w.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:a.setValue(C*3+1);break;case 1:h.setValue(C/3),d.setValue(C%3);break;case 2:s.setValue(C+1);break}}if(s.getValue().length===0||a.getValue().length===0||d.getValue().length===0||h.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+d.getValue()[0]<ct.MIN_ROWS_IN_BARCODE||a.getValue()[0]+d.getValue()[0]>ct.MAX_ROWS_IN_BARCODE)return null;let f=new ro(s.getValue()[0],a.getValue()[0],d.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(t,f),f}removeIncorrectCodewords(t,s){for(let a=0;a<t.length;a++){let d=t[a];if(t[a]==null)continue;let h=d.getValue()%30,f=d.getRowNumber();if(f>s.getRowCount()){t[a]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:h*3+1!==s.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(h/3)!==s.getErrorCorrectionLevel()||h%3!==s.getRowCountLowerPart())&&(t[a]=null);break;case 2:h+1!==s.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class io{constructor(t,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=ct.MAX_CODEWORDS_IN_BARCODE,s;do s=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let d=0;d<a.length;d++)a[d]!=null&&(a[d].hasValidRowNumber()||this.adjustRowNumbers(s,d,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&s[a]!=null&&t[a].getRowNumber()===s[a].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let h=this.detectionResultColumns[d].getCodewords()[a];h!=null&&(h.setRowNumber(t[a].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let d=s[a].getRowNumber(),h=0;for(let f=this.barcodeColumnCount+1;f>0&&h<this.ADJUST_ROW_NUMBER_SKIP;f--){let w=this.detectionResultColumns[f].getCodewords()[a];w!=null&&(h=io.adjustRowNumberIfValid(d,h,w),w.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let d=s[a].getRowNumber(),h=0;for(let f=1;f<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;f++){let w=this.detectionResultColumns[f].getCodewords()[a];w!=null&&(h=io.adjustRowNumberIfValid(d,h,w),w.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),s=0):++s),s}adjustRowNumbers(t,s,a){if(!this.detectionResultColumns[t-1])return;let d=a[s],h=this.detectionResultColumns[t-1].getCodewords(),f=h;this.detectionResultColumns[t+1]!=null&&(f=this.detectionResultColumns[t+1].getCodewords());let w=new Array(14);w[2]=h[s],w[3]=f[s],s>0&&(w[0]=a[s-1],w[4]=h[s-1],w[5]=f[s-1]),s>1&&(w[8]=a[s-2],w[10]=h[s-2],w[11]=f[s-2]),s<a.length-1&&(w[1]=a[s+1],w[6]=h[s+1],w[7]=f[s+1]),s<a.length-2&&(w[9]=a[s+2],w[12]=h[s+2],w[13]=f[s+2]);for(let C of w)if(io.adjustRowNumber(d,C))return}static adjustRowNumber(t,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===t.getBucket()?(t.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,s){this.detectionResultColumns[t]=s}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new si;for(let a=0;a<t.getCodewords().length;a++){s.format("CW %3d:",a);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){s.format("    |   ");continue}let h=this.detectionResultColumns[d].getCodewords()[a];if(h==null){s.format("    |   ");continue}s.format(" %3d|%3d",h.getRowNumber(),h.getValue())}s.format("%n")}return s.toString()}}class qi{constructor(t,s,a,d){this.rowNumber=qi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==qi.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}qi.BARCODE_ROW_UNKNOWN=-1;class Tn{static initialize(){for(let t=0;t<ct.SYMBOL_TABLE.length;t++){let s=ct.SYMBOL_TABLE[t],a=s&1;for(let d=0;d<ct.BARS_IN_MODULE;d++){let h=0;for(;(s&1)===a;)h+=1,s>>=1;a=s&1,Tn.RATIOS_TABLE[t]||(Tn.RATIOS_TABLE[t]=new Array(ct.BARS_IN_MODULE)),Tn.RATIOS_TABLE[t][ct.BARS_IN_MODULE-d-1]=Math.fround(h/ct.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let s=Tn.getDecodedCodewordValue(Tn.sampleBitCounts(t));return s!==-1?s:Tn.getClosestDecodedValue(t)}static sampleBitCounts(t){let s=ht.sum(t),a=new Int32Array(ct.BARS_IN_MODULE),d=0,h=0;for(let f=0;f<ct.MODULES_IN_CODEWORD;f++){let w=s/(2*ct.MODULES_IN_CODEWORD)+f*s/ct.MODULES_IN_CODEWORD;h+t[d]<=w&&(h+=t[d],d++),a[d]++}return a}static getDecodedCodewordValue(t){let s=Tn.getBitValue(t);return ct.getCodeword(s)===-1?-1:s}static getBitValue(t){let s=0;for(let a=0;a<t.length;a++)for(let d=0;d<t[a];d++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(t){let s=ht.sum(t),a=new Array(ct.BARS_IN_MODULE);if(s>1)for(let f=0;f<a.length;f++)a[f]=Math.fround(t[f]/s);let d=dr.MAX_VALUE,h=-1;this.bSymbolTableReady||Tn.initialize();for(let f=0;f<Tn.RATIOS_TABLE.length;f++){let w=0,C=Tn.RATIOS_TABLE[f];for(let E=0;E<ct.BARS_IN_MODULE;E++){let I=Math.fround(C[E]-a[E]);if(w+=Math.fround(I*I),w>=d)break}w<d&&(d=w,h=ct.SYMBOL_TABLE[f])}return h}}Tn.bSymbolTableReady=!1,Tn.RATIOS_TABLE=new Array(ct.SYMBOL_TABLE.length).map(P=>new Array(ct.BARS_IN_MODULE));class Xo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class hl{static parseLong(t,s=void 0){return parseInt(t,s)}}class oi extends y{}oi.kind="NullPointerException";class fl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,s,a){if(t==null)throw new oi;if(s<0||s>t.length||a<0||s+a>t.length||s+a<0)throw new L;if(a===0)return;for(let d=0;d<a;d++)this.write(t[s+d])}flush(){}close(){}}class Yo extends y{}class vc extends fl{constructor(t=32){if(super(),this.count=0,t<0)throw new _("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Yo;a=F.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,s,a){if(s<0||s>t.length||a<0||s+a-t.length>0)throw new L;this.ensureCapacity(this.count+a),O.arraycopy(t,s,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Dt;(function(P){P[P.ALPHA=0]="ALPHA",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.PUNCT=3]="PUNCT",P[P.ALPHA_SHIFT=4]="ALPHA_SHIFT",P[P.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Dt||(Dt={}));function so(){if(typeof window<"u")return window.BigInt||null;if(typeof xu<"u")return xu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let oo;function gn(P){if(typeof oo>"u"&&(oo=so()),oo===null)throw new Error("BigInt is not supported!");return oo(P)}function ms(){let P=[];P[0]=gn(1);let t=gn(900);P[1]=t;for(let s=2;s<16;s++)P[s]=P[s-1]*t;return P}class xe{static decode(t,s){let a=new ve(""),d=W.ISO8859_1;a.enableDecoding(d);let h=1,f=t[h++],w=new Xo;for(;h<t[0];){switch(f){case xe.TEXT_COMPACTION_MODE_LATCH:h=xe.textCompaction(t,h,a);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:h=xe.byteCompaction(f,t,d,h,a);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[h++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:h=xe.numericCompaction(t,h,a);break;case xe.ECI_CHARSET:W.getCharacterSetECIByValue(t[h++]);break;case xe.ECI_GENERAL_PURPOSE:h+=2;break;case xe.ECI_USER_DEFINED:h++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=xe.decodeMacroBlock(t,h,w);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new V;default:h--,h=xe.textCompaction(t,h,a);break}if(h<t.length)f=t[h++];else throw V.getFormatInstance()}if(a.length()===0)throw V.getFormatInstance();let C=new Le(null,a.toString(),null,s);return C.setOther(w),C}static decodeMacroBlock(t,s,a){if(s+xe.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw V.getFormatInstance();let d=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<xe.NUMBER_OF_SEQUENCE_CODEWORDS;w++,s++)d[w]=t[s];a.setSegmentIndex(F.parseInt(xe.decodeBase900toBase10(d,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new ve;s=xe.textCompaction(t,s,h),a.setFileId(h.toString());let f=-1;for(t[s]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=s+1);s<t[0];)switch(t[s]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,t[s]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new ve;s=xe.textCompaction(t,s+1,w),a.setFileName(w.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new ve;s=xe.textCompaction(t,s+1,C),a.setSender(C.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new ve;s=xe.textCompaction(t,s+1,E),a.setAddressee(E.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new ve;s=xe.numericCompaction(t,s+1,I),a.setSegmentCount(F.parseInt(I.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let j=new ve;s=xe.numericCompaction(t,s+1,j),a.setTimestamp(hl.parseLong(j.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new ve;s=xe.numericCompaction(t,s+1,B),a.setChecksum(F.parseInt(B.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new ve;s=xe.numericCompaction(t,s+1,G),a.setFileSize(hl.parseLong(G.toString()));break;default:throw V.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(f!==-1){let w=s-f;a.isLastSegment()&&w--,a.setOptionalData(z.copyOfRange(t,f,f+w))}return s}static textCompaction(t,s,a){let d=new Int32Array((t[0]-s)*2),h=new Int32Array((t[0]-s)*2),f=0,w=!1;for(;s<t[0]&&!w;){let C=t[s++];if(C<xe.TEXT_COMPACTION_MODE_LATCH)d[f]=C/30,d[f+1]=C%30,f+=2;else switch(C){case xe.TEXT_COMPACTION_MODE_LATCH:d[f++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:s--,w=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[f]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=t[s++],h[f]=C,f++;break}}return xe.decodeTextCompaction(d,h,f,a),s}static decodeTextCompaction(t,s,a,d){let h=Dt.ALPHA,f=Dt.ALPHA,w=0;for(;w<a;){let C=t[w],E="";switch(h){case Dt.ALPHA:if(C<26)E=String.fromCharCode(65+C);else switch(C){case 26:E=" ";break;case xe.LL:h=Dt.LOWER;break;case xe.ML:h=Dt.MIXED;break;case xe.PS:f=h,h=Dt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[w]);break;case xe.TEXT_COMPACTION_MODE_LATCH:h=Dt.ALPHA;break}break;case Dt.LOWER:if(C<26)E=String.fromCharCode(97+C);else switch(C){case 26:E=" ";break;case xe.AS:f=h,h=Dt.ALPHA_SHIFT;break;case xe.ML:h=Dt.MIXED;break;case xe.PS:f=h,h=Dt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[w]);break;case xe.TEXT_COMPACTION_MODE_LATCH:h=Dt.ALPHA;break}break;case Dt.MIXED:if(C<xe.PL)E=xe.MIXED_CHARS[C];else switch(C){case xe.PL:h=Dt.PUNCT;break;case 26:E=" ";break;case xe.LL:h=Dt.LOWER;break;case xe.AL:h=Dt.ALPHA;break;case xe.PS:f=h,h=Dt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[w]);break;case xe.TEXT_COMPACTION_MODE_LATCH:h=Dt.ALPHA;break}break;case Dt.PUNCT:if(C<xe.PAL)E=xe.PUNCT_CHARS[C];else switch(C){case xe.PAL:h=Dt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[w]);break;case xe.TEXT_COMPACTION_MODE_LATCH:h=Dt.ALPHA;break}break;case Dt.ALPHA_SHIFT:if(h=f,C<26)E=String.fromCharCode(65+C);else switch(C){case 26:E=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:h=Dt.ALPHA;break}break;case Dt.PUNCT_SHIFT:if(h=f,C<xe.PAL)E=xe.PUNCT_CHARS[C];else switch(C){case xe.PAL:h=Dt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[w]);break;case xe.TEXT_COMPACTION_MODE_LATCH:h=Dt.ALPHA;break}break}E!==""&&d.append(E),w++}}static byteCompaction(t,s,a,d,h){let f=new vc,w=0,C=0,E=!1;switch(t){case xe.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),j=s[d++];for(;d<s[0]&&!E;)switch(I[w++]=j,C=900*C+j,j=s[d++],j){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:d--,E=!0;break;default:if(w%5===0&&w>0){for(let B=0;B<6;++B)f.write(Number(gn(C)>>gn(8*(5-B))));C=0,w=0}break}d===s[0]&&j<xe.TEXT_COMPACTION_MODE_LATCH&&(I[w++]=j);for(let B=0;B<w;B++)f.write(I[B]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;d<s[0]&&!E;){let B=s[d++];if(B<xe.TEXT_COMPACTION_MODE_LATCH)w++,C=900*C+B;else switch(B){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:d--,E=!0;break}if(w%5===0&&w>0){for(let G=0;G<6;++G)f.write(Number(gn(C)>>gn(8*(5-G))));C=0,w=0}}break}return h.append(be.decode(f.toByteArray(),a)),d}static numericCompaction(t,s,a){let d=0,h=!1,f=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;s<t[0]&&!h;){let w=t[s++];if(s===t[0]&&(h=!0),w<xe.TEXT_COMPACTION_MODE_LATCH)f[d]=w,d++;else switch(w){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:s--,h=!0;break}(d%xe.MAX_NUMERIC_CODEWORDS===0||w===xe.NUMERIC_COMPACTION_MODE_LATCH||h)&&d>0&&(a.append(xe.decodeBase900toBase10(f,d)),d=0)}return s}static decodeBase900toBase10(t,s){let a=gn(0);for(let h=0;h<s;h++)a+=xe.EXP900[s-h-1]*gn(t[h]);let d=a.toString();if(d.charAt(0)!=="1")throw new V;return d.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=so()?ms():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class wt{constructor(){}static decode(t,s,a,d,h,f,w){let C=new Gi(t,s,a,d,h),E=null,I=null,j;for(let Z=!0;;Z=!1){if(s!=null&&(E=wt.getRowIndicatorColumn(t,C,s,!0,f,w)),d!=null&&(I=wt.getRowIndicatorColumn(t,C,d,!1,f,w)),j=wt.merge(E,I),j==null)throw ie.getNotFoundInstance();let J=j.getBoundingBox();if(Z&&J!=null&&(J.getMinY()<C.getMinY()||J.getMaxY()>C.getMaxY()))C=J;else break}j.setBoundingBox(C);let B=j.getBarcodeColumnCount()+1;j.setDetectionResultColumn(0,E),j.setDetectionResultColumn(B,I);let G=E!=null;for(let Z=1;Z<=B;Z++){let J=G?Z:B-Z;if(j.getDetectionResultColumn(J)!==void 0)continue;let oe;J===0||J===B?oe=new yc(C,J===0):oe=new Wr(C),j.setDetectionResultColumn(J,oe);let me=-1,ke=me;for(let Oe=C.getMinY();Oe<=C.getMaxY();Oe++){if(me=wt.getStartColumn(j,J,Oe,G),me<0||me>C.getMaxX()){if(ke===-1)continue;me=ke}let Ne=wt.detectCodeword(t,C.getMinX(),C.getMaxX(),G,me,Oe,f,w);Ne!=null&&(oe.setCodeword(Oe,Ne),ke=me,f=Math.min(f,Ne.getWidth()),w=Math.max(w,Ne.getWidth()))}}return wt.createDecoderResult(j)}static merge(t,s){if(t==null&&s==null)return null;let a=wt.getBarcodeMetadata(t,s);if(a==null)return null;let d=Gi.merge(wt.adjustBoundingBox(t),wt.adjustBoundingBox(s));return new io(a,d)}static adjustBoundingBox(t){if(t==null)return null;let s=t.getRowHeights();if(s==null)return null;let a=wt.getMax(s),d=0;for(let w of s)if(d+=a-w,w>0)break;let h=t.getCodewords();for(let w=0;d>0&&h[w]==null;w++)d--;let f=0;for(let w=s.length-1;w>=0&&(f+=a-s[w],!(s[w]>0));w--);for(let w=h.length-1;f>0&&h[w]==null;w--)f--;return t.getBoundingBox().addMissingRows(d,f,t.isLeft())}static getMax(t){let s=-1;for(let a of t)s=Math.max(s,a);return s}static getBarcodeMetadata(t,s){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let d;return s==null||(d=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==d.getColumnCount()&&a.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&a.getRowCount()!==d.getRowCount()?null:a}static getRowIndicatorColumn(t,s,a,d,h,f){let w=new yc(s,d);for(let C=0;C<2;C++){let E=C===0?1:-1,I=Math.trunc(Math.trunc(a.getX()));for(let j=Math.trunc(Math.trunc(a.getY()));j<=s.getMaxY()&&j>=s.getMinY();j+=E){let B=wt.detectCodeword(t,0,t.getWidth(),d,I,j,h,f);B!=null&&(w.setCodeword(j,B),d?I=B.getStartX():I=B.getEndX())}}return w}static adjustCodewordCount(t,s){let a=s[0][1],d=a.getValue(),h=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-wt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(d.length===0){if(h<1||h>ct.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();a.setValue(h)}else d[0]!==h&&a.setValue(h)}static createDecoderResult(t){let s=wt.createBarcodeMatrix(t);wt.adjustCodewordCount(t,s);let a=new Array,d=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),h=[],f=new Array;for(let C=0;C<t.getBarcodeRowCount();C++)for(let E=0;E<t.getBarcodeColumnCount();E++){let I=s[C][E+1].getValue(),j=C*t.getBarcodeColumnCount()+E;I.length===0?a.push(j):I.length===1?d[j]=I[0]:(f.push(j),h.push(I))}let w=new Array(h.length);for(let C=0;C<w.length;C++)w[C]=h[C];return wt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),d,ct.toIntArray(a),ct.toIntArray(f),w)}static createDecoderResultFromAmbiguousValues(t,s,a,d,h){let f=new Int32Array(d.length),w=100;for(;w-- >0;){for(let C=0;C<f.length;C++)s[d[C]]=h[C][f[C]];try{return wt.decodeCodewords(s,t,a)}catch(C){if(!(C instanceof T))throw C}if(f.length===0)throw T.getChecksumInstance();for(let C=0;C<f.length;C++)if(f[C]<h[C].length-1){f[C]++;break}else if(f[C]=0,C===f.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(t){let s=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let d=0;d<s.length;d++)for(let h=0;h<s[d].length;h++)s[d][h]=new Ti;let a=0;for(let d of t.getDetectionResultColumns()){if(d!=null){for(let h of d.getCodewords())if(h!=null){let f=h.getRowNumber();if(f>=0){if(f>=s.length)continue;s[f][a].setValue(h.getValue())}}}a++}return s}static isValidBarcodeColumn(t,s){return s>=0&&s<=t.getBarcodeColumnCount()+1}static getStartColumn(t,s,a,d){let h=d?1:-1,f=null;if(wt.isValidBarcodeColumn(t,s-h)&&(f=t.getDetectionResultColumn(s-h).getCodeword(a)),f!=null)return d?f.getEndX():f.getStartX();if(f=t.getDetectionResultColumn(s).getCodewordNearby(a),f!=null)return d?f.getStartX():f.getEndX();if(wt.isValidBarcodeColumn(t,s-h)&&(f=t.getDetectionResultColumn(s-h).getCodewordNearby(a)),f!=null)return d?f.getEndX():f.getStartX();let w=0;for(;wt.isValidBarcodeColumn(t,s-h);){s-=h;for(let C of t.getDetectionResultColumn(s).getCodewords())if(C!=null)return(d?C.getEndX():C.getStartX())+h*w*(C.getEndX()-C.getStartX());w++}return d?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,s,a,d,h,f,w,C){h=wt.adjustCodewordStartColumn(t,s,a,d,h,f);let E=wt.getModuleBitCount(t,s,a,d,h,f);if(E==null)return null;let I,j=ht.sum(E);if(d)I=h+j;else{for(let Z=0;Z<E.length/2;Z++){let J=E[Z];E[Z]=E[E.length-1-Z],E[E.length-1-Z]=J}I=h,h=I-j}if(!wt.checkCodewordSkew(j,w,C))return null;let B=Tn.getDecodedValue(E),G=ct.getCodeword(B);return G===-1?null:new qi(h,I,wt.getCodewordBucketNumber(B),G)}static getModuleBitCount(t,s,a,d,h,f){let w=h,C=new Int32Array(8),E=0,I=d?1:-1,j=d;for(;(d?w<a:w>=s)&&E<C.length;)t.get(w,f)===j?(C[E]++,w+=I):(E++,j=!j);return E===C.length||w===(d?a:s)&&E===C.length-1?C:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,s,a,d,h,f){let w=h,C=d?-1:1;for(let E=0;E<2;E++){for(;(d?w>=s:w<a)&&d===t.get(w,f);){if(Math.abs(h-w)>wt.CODEWORD_SKEW_SIZE)return h;w+=C}C=-C,d=!d}return w}static checkCodewordSkew(t,s,a){return s-wt.CODEWORD_SKEW_SIZE<=t&&t<=a+wt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,s,a){if(t.length===0)throw V.getFormatInstance();let d=1<<s+1,h=wt.correctErrors(t,a,d);wt.verifyCodewordCount(t,d);let f=xe.decode(t,""+s);return f.setErrorsCorrected(h),f.setErasures(a.length),f}static correctErrors(t,s,a){if(s!=null&&s.length>a/2+wt.MAX_ERRORS||a<0||a>wt.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return wt.errorCorrection.decode(t,a,s)}static verifyCodewordCount(t,s){if(t.length<4)throw V.getFormatInstance();let a=t[0];if(a>t.length)throw V.getFormatInstance();if(a===0)if(s<t.length)t[0]=t.length-s;else throw V.getFormatInstance()}static getBitCountForCodeword(t){let s=new Int32Array(8),a=0,d=s.length-1;for(;!((t&1)!==a&&(a=t&1,d--,d<0));)s[d]++,t>>=1;return s}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return wt.getCodewordBucketNumber(wt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let s=new si;for(let a=0;a<t.length;a++){s.format("Row %2d: ",a);for(let d=0;d<t[a].length;d++){let h=t[a][d];h.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}s.format("%n")}return s.toString()}}wt.CODEWORD_SKEW_SIZE=2,wt.MAX_ERRORS=3,wt.MAX_EC_CODEWORDS=512,wt.errorCorrection=new dl;class Rn{decode(t,s=null){let a=Rn.decode(t,s,!1);if(a==null||a.length===0||a[0]==null)throw ie.getNotFoundInstance();return a[0]}decodeMultiple(t,s=null){try{return Rn.decode(t,s,!0)}catch(a){throw a instanceof V||a instanceof T?ie.getNotFoundInstance():a}}static decode(t,s,a){const d=new Array,h=pt.detectMultiple(t,s,a);for(const f of h.getPoints()){const w=wt.decode(h.getBits(),f[4],f[5],f[6],f[7],Rn.getMinCodewordWidth(f),Rn.getMaxCodewordWidth(f)),C=new Te(w.getText(),w.getRawBytes(),void 0,f,ee.PDF_417);C.putMetadata(Ee.ERROR_CORRECTION_LEVEL,w.getECLevel());const E=w.getOther();E!=null&&C.putMetadata(Ee.PDF417_EXTRA_METADATA,E),d.push(C)}return d.map(f=>f)}static getMaxWidth(t,s){return t==null||s==null?0:Math.trunc(Math.abs(t.getX()-s.getX()))}static getMinWidth(t,s){return t==null||s==null?F.MAX_VALUE:Math.trunc(Math.abs(t.getX()-s.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Rn.getMaxWidth(t[0],t[4]),Rn.getMaxWidth(t[6],t[2])*ct.MODULES_IN_CODEWORD/ct.MODULES_IN_STOP_PATTERN),Math.max(Rn.getMaxWidth(t[1],t[5]),Rn.getMaxWidth(t[7],t[3])*ct.MODULES_IN_CODEWORD/ct.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Rn.getMinWidth(t[0],t[4]),Rn.getMinWidth(t[6],t[2])*ct.MODULES_IN_CODEWORD/ct.MODULES_IN_STOP_PATTERN),Math.min(Rn.getMinWidth(t[1],t[5]),Rn.getMinWidth(t[7],t[3])*ct.MODULES_IN_CODEWORD/ct.MODULES_IN_STOP_PATTERN)))}reset(){}}class xs extends y{}xs.kind="ReaderException";class Ko{constructor(t,s){this.verbose=t===!0,s&&this.setHints(s)}decode(t,s){return s&&this.setHints(s),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const s=!o(t)&&t.get(Y.TRY_HARDER)===!0,a=o(t)?null:t.get(Y.POSSIBLE_FORMATS),d=new Array;if(!o(a)){const h=a.some(f=>f===ee.UPC_A||f===ee.UPC_E||f===ee.EAN_13||f===ee.EAN_8||f===ee.CODABAR||f===ee.CODE_39||f===ee.CODE_93||f===ee.CODE_128||f===ee.ITF||f===ee.RSS_14||f===ee.RSS_EXPANDED);h&&!s&&d.push(new hs(t,this.verbose)),a.includes(ee.QR_CODE)&&d.push(new Hn),a.includes(ee.DATA_MATRIX)&&d.push(new Ar),a.includes(ee.AZTEC)&&d.push(new _i),a.includes(ee.PDF_417)&&d.push(new Rn),h&&s&&d.push(new hs(t,this.verbose))}d.length===0&&(s||d.push(new hs(t,this.verbose)),d.push(new Hn),d.push(new Ar),d.push(new _i),d.push(new Rn),s&&d.push(new hs(t,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new xs("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(t,this.hints)}catch(a){if(a instanceof xs)continue}throw new ie("No MultiFormat Readers were able to detect the code.")}}class ao extends Ae{constructor(t=null,s=500){const a=new Ko;a.setHints(t),super(a,s)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Zo extends Ae{constructor(t=500){super(new Rn,t)}}class bc extends Ae{constructor(t=500){super(new Hn,t)}}var gl;(function(P){P[P.ERROR_CORRECTION=0]="ERROR_CORRECTION",P[P.CHARACTER_SET=1]="CHARACTER_SET",P[P.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",P[P.MIN_SIZE=3]="MIN_SIZE",P[P.MAX_SIZE=4]="MAX_SIZE",P[P.MARGIN=5]="MARGIN",P[P.PDF417_COMPACT=6]="PDF417_COMPACT",P[P.PDF417_COMPACTION=7]="PDF417_COMPACTION",P[P.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",P[P.AZTEC_LAYERS=9]="AZTEC_LAYERS",P[P.QR_VERSION=10]="QR_VERSION"})(gl||(gl={}));var yn=gl;class pl{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new tt(t,Int32Array.from([1])))}buildGenerator(t){const s=this.cachedGenerators;if(t>=s.length){let a=s[s.length-1];const d=this.field;for(let h=s.length;h<=t;h++){const f=a.multiply(new tt(d,Int32Array.from([1,d.exp(h-1+d.getGeneratorBase())])));s.push(f),a=f}}return s[t]}encode(t,s){if(s===0)throw new _("No error correction bytes");const a=t.length-s;if(a<=0)throw new _("No data bytes provided");const d=this.buildGenerator(s),h=new Int32Array(a);O.arraycopy(t,0,h,0,a);let f=new tt(this.field,h);f=f.multiplyByMonomial(s,1);const C=f.divide(d)[1].getCoefficients(),E=s-C.length;for(let I=0;I<E;I++)t[a+I]=0;O.arraycopy(C,0,t,a+E,C.length)}}class Kt{constructor(){}static applyMaskPenaltyRule1(t){return Kt.applyMaskPenaltyRule1Internal(t,!0)+Kt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let s=0;const a=t.getArray(),d=t.getWidth(),h=t.getHeight();for(let f=0;f<h-1;f++){const w=a[f];for(let C=0;C<d-1;C++){const E=w[C];E===w[C+1]&&E===a[f+1][C]&&E===a[f+1][C+1]&&s++}}return Kt.N2*s}static applyMaskPenaltyRule3(t){let s=0;const a=t.getArray(),d=t.getWidth(),h=t.getHeight();for(let f=0;f<h;f++)for(let w=0;w<d;w++){const C=a[f];w+6<d&&C[w]===1&&C[w+1]===0&&C[w+2]===1&&C[w+3]===1&&C[w+4]===1&&C[w+5]===0&&C[w+6]===1&&(Kt.isWhiteHorizontal(C,w-4,w)||Kt.isWhiteHorizontal(C,w+7,w+11))&&s++,f+6<h&&a[f][w]===1&&a[f+1][w]===0&&a[f+2][w]===1&&a[f+3][w]===1&&a[f+4][w]===1&&a[f+5][w]===0&&a[f+6][w]===1&&(Kt.isWhiteVertical(a,w,f-4,f)||Kt.isWhiteVertical(a,w,f+7,f+11))&&s++}return s*Kt.N3}static isWhiteHorizontal(t,s,a){s=Math.max(s,0),a=Math.min(a,t.length);for(let d=s;d<a;d++)if(t[d]===1)return!1;return!0}static isWhiteVertical(t,s,a,d){a=Math.max(a,0),d=Math.min(d,t.length);for(let h=a;h<d;h++)if(t[h][s]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let s=0;const a=t.getArray(),d=t.getWidth(),h=t.getHeight();for(let C=0;C<h;C++){const E=a[C];for(let I=0;I<d;I++)E[I]===1&&s++}const f=t.getHeight()*t.getWidth();return Math.floor(Math.abs(s*2-f)*10/f)*Kt.N4}static getDataMaskBit(t,s,a){let d,h;switch(t){case 0:d=a+s&1;break;case 1:d=a&1;break;case 2:d=s%3;break;case 3:d=(a+s)%3;break;case 4:d=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:h=a*s,d=(h&1)+h%3;break;case 6:h=a*s,d=(h&1)+h%3&1;break;case 7:h=a*s,d=h%3+(a+s&1)&1;break;default:throw new _("Invalid mask pattern: "+t)}return d===0}static applyMaskPenaltyRule1Internal(t,s){let a=0;const d=s?t.getHeight():t.getWidth(),h=s?t.getWidth():t.getHeight(),f=t.getArray();for(let w=0;w<d;w++){let C=0,E=-1;for(let I=0;I<h;I++){const j=s?f[w][I]:f[I][w];j===E?C++:(C>=5&&(a+=Kt.N1+(C-5)),C=1,E=j)}C>=5&&(a+=Kt.N1+(C-5))}return a}}Kt.N1=3,Kt.N2=3,Kt.N3=40,Kt.N4=10;class Qo{constructor(t,s){this.width=t,this.height=s;const a=new Array(s);for(let d=0;d!==s;d++)a[d]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,s){return this.bytes[s][t]}getArray(){return this.bytes}setNumber(t,s,a){this.bytes[s][t]=a}setBoolean(t,s,a){this.bytes[s][t]=a?1:0}clear(t){for(const s of this.bytes)z.fill(s,t)}equals(t){if(!(t instanceof Qo))return!1;const s=t;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,d=this.height;a<d;++a){const h=this.bytes[a],f=s.bytes[a];for(let w=0,C=this.width;w<C;++w)if(h[w]!==f[w])return!1}return!0}toString(){const t=new ve;for(let s=0,a=this.height;s<a;++s){const d=this.bytes[s];for(let h=0,f=this.width;h<f;++h)switch(d[h]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Xi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new ve;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Xi.NUM_MASK_PATTERNS}}Xi.NUM_MASK_PATTERNS=8;class Wt extends y{}Wt.kind="WriterException";class ot{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,s,a,d,h){ot.clearMatrix(h),ot.embedBasicPatterns(a,h),ot.embedTypeInfo(s,d,h),ot.maybeEmbedVersionInfo(a,h),ot.embedDataBits(t,d,h)}static embedBasicPatterns(t,s){ot.embedPositionDetectionPatternsAndSeparators(s),ot.embedDarkDotAtLeftBottomCorner(s),ot.maybeEmbedPositionAdjustmentPatterns(t,s),ot.embedTimingPatterns(s)}static embedTypeInfo(t,s,a){const d=new $;ot.makeTypeInfoBits(t,s,d);for(let h=0,f=d.getSize();h<f;++h){const w=d.get(d.getSize()-1-h),C=ot.TYPE_INFO_COORDINATES[h],E=C[0],I=C[1];if(a.setBoolean(E,I,w),h<8){const j=a.getWidth()-h-1;a.setBoolean(j,8,w)}else{const B=a.getHeight()-7+(h-8);a.setBoolean(8,B,w)}}}static maybeEmbedVersionInfo(t,s){if(t.getVersionNumber()<7)return;const a=new $;ot.makeVersionInfoBits(t,a);let d=17;for(let h=0;h<6;++h)for(let f=0;f<3;++f){const w=a.get(d);d--,s.setBoolean(h,s.getHeight()-11+f,w),s.setBoolean(s.getHeight()-11+f,h,w)}}static embedDataBits(t,s,a){let d=0,h=-1,f=a.getWidth()-1,w=a.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);w>=0&&w<a.getHeight();){for(let C=0;C<2;++C){const E=f-C;if(!ot.isEmpty(a.get(E,w)))continue;let I;d<t.getSize()?(I=t.get(d),++d):I=!1,s!==255&&Kt.getDataMaskBit(s,E,w)&&(I=!I),a.setBoolean(E,w,I)}w+=h}h=-h,w+=h,f-=2}if(d!==t.getSize())throw new Wt("Not all bits consumed: "+d+"/"+t.getSize())}static findMSBSet(t){return 32-F.numberOfLeadingZeros(t)}static calculateBCHCode(t,s){if(s===0)throw new _("0 polynomial");const a=ot.findMSBSet(s);for(t<<=a-1;ot.findMSBSet(t)>=a;)t^=s<<ot.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,s,a){if(!Xi.isValidMaskPattern(s))throw new Wt("Invalid mask pattern");const d=t.getBits()<<3|s;a.appendBits(d,5);const h=ot.calculateBCHCode(d,ot.TYPE_INFO_POLY);a.appendBits(h,10);const f=new $;if(f.appendBits(ot.TYPE_INFO_MASK_PATTERN,15),a.xor(f),a.getSize()!==15)throw new Wt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,s){s.appendBits(t.getVersionNumber(),6);const a=ot.calculateBCHCode(t.getVersionNumber(),ot.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new Wt("should not happen but we got: "+s.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let s=8;s<t.getWidth()-8;++s){const a=(s+1)%2;ot.isEmpty(t.get(s,6))&&t.setNumber(s,6,a),ot.isEmpty(t.get(6,s))&&t.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Wt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,s,a){for(let d=0;d<8;++d){if(!ot.isEmpty(a.get(t+d,s)))throw new Wt;a.setNumber(t+d,s,0)}}static embedVerticalSeparationPattern(t,s,a){for(let d=0;d<7;++d){if(!ot.isEmpty(a.get(t,s+d)))throw new Wt;a.setNumber(t,s+d,0)}}static embedPositionAdjustmentPattern(t,s,a){for(let d=0;d<5;++d){const h=ot.POSITION_ADJUSTMENT_PATTERN[d];for(let f=0;f<5;++f)a.setNumber(t+f,s+d,h[f])}}static embedPositionDetectionPattern(t,s,a){for(let d=0;d<7;++d){const h=ot.POSITION_DETECTION_PATTERN[d];for(let f=0;f<7;++f)a.setNumber(t+f,s+d,h[f])}}static embedPositionDetectionPatternsAndSeparators(t){const s=ot.POSITION_DETECTION_PATTERN[0].length;ot.embedPositionDetectionPattern(0,0,t),ot.embedPositionDetectionPattern(t.getWidth()-s,0,t),ot.embedPositionDetectionPattern(0,t.getWidth()-s,t);const a=8;ot.embedHorizontalSeparationPattern(0,a-1,t),ot.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),ot.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const d=7;ot.embedVerticalSeparationPattern(d,0,t),ot.embedVerticalSeparationPattern(t.getHeight()-d-1,0,t),ot.embedVerticalSeparationPattern(d,t.getHeight()-d,t)}static maybeEmbedPositionAdjustmentPatterns(t,s){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,d=ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let h=0,f=d.length;h!==f;h++){const w=d[h];if(w>=0)for(let C=0;C!==f;C++){const E=d[C];E>=0&&ot.isEmpty(s.get(E,w))&&ot.embedPositionAdjustmentPattern(E-2,w-2,s)}}}}ot.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ot.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ot.VERSION_INFO_POLY=7973,ot.TYPE_INFO_POLY=1335,ot.TYPE_INFO_MASK_PATTERN=21522;class Bd{constructor(t,s){this.dataBytes=t,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ht{constructor(){}static calculateMaskPenalty(t){return Kt.applyMaskPenaltyRule1(t)+Kt.applyMaskPenaltyRule2(t)+Kt.applyMaskPenaltyRule3(t)+Kt.applyMaskPenaltyRule4(t)}static encode(t,s,a=null){let d=Ht.DEFAULT_BYTE_MODE_ENCODING;const h=a!==null&&a.get(yn.CHARACTER_SET)!==void 0;h&&(d=a.get(yn.CHARACTER_SET).toString());const f=this.chooseMode(t,d),w=new $;if(f===rt.BYTE&&(h||Ht.DEFAULT_BYTE_MODE_ENCODING!==d)){const Oe=W.getCharacterSetECIByName(d);Oe!==void 0&&this.appendECI(Oe,w)}this.appendModeInfo(f,w);const C=new $;this.appendBytes(t,f,C,d);let E;if(a!==null&&a.get(yn.QR_VERSION)!==void 0){const Oe=Number.parseInt(a.get(yn.QR_VERSION).toString(),10);E=et.getVersionForNumber(Oe);const Ne=this.calculateBitsNeeded(f,w,C,E);if(!this.willFit(Ne,E,s))throw new Wt("Data too big for requested version")}else E=this.recommendVersion(s,f,w,C);const I=new $;I.appendBitArray(w);const j=f===rt.BYTE?C.getSizeInBytes():t.length;this.appendLengthInfo(j,E,f,I),I.appendBitArray(C);const B=E.getECBlocksForLevel(s),G=E.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(G,I);const Z=this.interleaveWithECBytes(I,E.getTotalCodewords(),G,B.getNumBlocks()),J=new Xi;J.setECLevel(s),J.setMode(f),J.setVersion(E);const oe=E.getDimensionForVersion(),me=new Qo(oe,oe),ke=this.chooseMaskPattern(Z,s,E,me);return J.setMaskPattern(ke),ot.buildMatrix(Z,s,E,ke,me),J.setMatrix(me),J}static recommendVersion(t,s,a,d){const h=this.calculateBitsNeeded(s,a,d,et.getVersionForNumber(1)),f=this.chooseVersion(h,t),w=this.calculateBitsNeeded(s,a,d,f);return this.chooseVersion(w,t)}static calculateBitsNeeded(t,s,a,d){return s.getSize()+t.getCharacterCountBits(d)+a.getSize()}static getAlphanumericCode(t){return t<Ht.ALPHANUMERIC_TABLE.length?Ht.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,s=null){if(W.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(t))return rt.KANJI;let a=!1,d=!1;for(let h=0,f=t.length;h<f;++h){const w=t.charAt(h);if(Ht.isDigit(w))a=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)d=!0;else return rt.BYTE}return d?rt.ALPHANUMERIC:a?rt.NUMERIC:rt.BYTE}static isOnlyDoubleByteKanji(t){let s;try{s=be.encode(t,W.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let d=0;d<a;d+=2){const h=s[d]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(t,s,a,d){let h=Number.MAX_SAFE_INTEGER,f=-1;for(let w=0;w<Xi.NUM_MASK_PATTERNS;w++){ot.buildMatrix(t,s,a,w,d);let C=this.calculateMaskPenalty(d);C<h&&(h=C,f=w)}return f}static chooseVersion(t,s){for(let a=1;a<=40;a++){const d=et.getVersionForNumber(a);if(Ht.willFit(t,d,s))return d}throw new Wt("Data too big")}static willFit(t,s,a){const d=s.getTotalCodewords(),f=s.getECBlocksForLevel(a).getTotalECCodewords(),w=d-f,C=(t+7)/8;return w>=C}static terminateBits(t,s){const a=t*8;if(s.getSize()>a)throw new Wt("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let f=0;f<4&&s.getSize()<a;++f)s.appendBit(!1);const d=s.getSize()&7;if(d>0)for(let f=d;f<8;f++)s.appendBit(!1);const h=t-s.getSizeInBytes();for(let f=0;f<h;++f)s.appendBits((f&1)===0?236:17,8);if(s.getSize()!==a)throw new Wt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,s,a,d,h,f){if(d>=a)throw new Wt("Block ID too large");const w=t%a,C=a-w,E=Math.floor(t/a),I=E+1,j=Math.floor(s/a),B=j+1,G=E-j,Z=I-B;if(G!==Z)throw new Wt("EC bytes mismatch");if(a!==C+w)throw new Wt("RS blocks mismatch");if(t!==(j+G)*C+(B+Z)*w)throw new Wt("Total bytes mismatch");d<C?(h[0]=j,f[0]=G):(h[0]=B,f[0]=Z)}static interleaveWithECBytes(t,s,a,d){if(t.getSizeInBytes()!==a)throw new Wt("Number of bits and data bytes does not match");let h=0,f=0,w=0;const C=new Array;for(let I=0;I<d;++I){const j=new Int32Array(1),B=new Int32Array(1);Ht.getNumDataBytesAndNumECBytesForBlockID(s,a,d,I,j,B);const G=j[0],Z=new Uint8Array(G);t.toBytes(8*h,Z,0,G);const J=Ht.generateECBytes(Z,B[0]);C.push(new Bd(Z,J)),f=Math.max(f,G),w=Math.max(w,J.length),h+=j[0]}if(a!==h)throw new Wt("Data bytes does not match offset");const E=new $;for(let I=0;I<f;++I)for(const j of C){const B=j.getDataBytes();I<B.length&&E.appendBits(B[I],8)}for(let I=0;I<w;++I)for(const j of C){const B=j.getErrorCorrectionBytes();I<B.length&&E.appendBits(B[I],8)}if(s!==E.getSizeInBytes())throw new Wt("Interleaving error: "+s+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(t,s){const a=t.length,d=new Int32Array(a+s);for(let f=0;f<a;f++)d[f]=t[f]&255;new pl(nt.QR_CODE_FIELD_256).encode(d,s);const h=new Uint8Array(s);for(let f=0;f<s;f++)h[f]=d[a+f];return h}static appendModeInfo(t,s){s.appendBits(t.getBits(),4)}static appendLengthInfo(t,s,a,d){const h=a.getCharacterCountBits(s);if(t>=1<<h)throw new Wt(t+" is bigger than "+((1<<h)-1));d.appendBits(t,h)}static appendBytes(t,s,a,d){switch(s){case rt.NUMERIC:Ht.appendNumericBytes(t,a);break;case rt.ALPHANUMERIC:Ht.appendAlphanumericBytes(t,a);break;case rt.BYTE:Ht.append8BitBytes(t,a,d);break;case rt.KANJI:Ht.appendKanjiBytes(t,a);break;default:throw new Wt("Invalid mode: "+s)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const s=Ht.getDigit(t);return s>=0&&s<=9}static appendNumericBytes(t,s){const a=t.length;let d=0;for(;d<a;){const h=Ht.getDigit(t.charAt(d));if(d+2<a){const f=Ht.getDigit(t.charAt(d+1)),w=Ht.getDigit(t.charAt(d+2));s.appendBits(h*100+f*10+w,10),d+=3}else if(d+1<a){const f=Ht.getDigit(t.charAt(d+1));s.appendBits(h*10+f,7),d+=2}else s.appendBits(h,4),d++}}static appendAlphanumericBytes(t,s){const a=t.length;let d=0;for(;d<a;){const h=Ht.getAlphanumericCode(t.charCodeAt(d));if(h===-1)throw new Wt;if(d+1<a){const f=Ht.getAlphanumericCode(t.charCodeAt(d+1));if(f===-1)throw new Wt;s.appendBits(h*45+f,11),d+=2}else s.appendBits(h,6),d++}}static append8BitBytes(t,s,a){let d;try{d=be.encode(t,a)}catch(h){throw new Wt(h)}for(let h=0,f=d.length;h!==f;h++){const w=d[h];s.appendBits(w,8)}}static appendKanjiBytes(t,s){let a;try{a=be.encode(t,W.SJIS)}catch(h){throw new Wt(h)}const d=a.length;for(let h=0;h<d;h+=2){const f=a[h]&255,w=a[h+1]&255,C=f<<8&4294967295|w;let E=-1;if(C>=33088&&C<=40956?E=C-33088:C>=57408&&C<=60351&&(E=C-49472),E===-1)throw new Wt("Invalid byte sequence");const I=(E>>8)*192+(E&255);s.appendBits(I,13)}}static appendECI(t,s){s.appendBits(rt.ECI.getBits(),4),s.appendBits(t.getValue(),8)}}Ht.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ht.DEFAULT_BYTE_MODE_ENCODING=W.UTF8.getName();class Yi{write(t,s,a,d=null){if(t.length===0)throw new _("Found empty contents");if(s<0||a<0)throw new _("Requested dimensions are too small: "+s+"x"+a);let h=Vt.L,f=Yi.QUIET_ZONE_SIZE;d!==null&&(d.get(yn.ERROR_CORRECTION)!==void 0&&(h=Vt.fromString(d.get(yn.ERROR_CORRECTION).toString())),d.get(yn.MARGIN)!==void 0&&(f=Number.parseInt(d.get(yn.MARGIN).toString(),10)));const w=Ht.encode(t,h,d);return this.renderResult(w,s,a,f)}writeToDom(t,s,a,d,h=null){typeof t=="string"&&(t=document.querySelector(t));const f=this.write(s,a,d,h);t&&t.appendChild(f)}renderResult(t,s,a,d){const h=t.getMatrix();if(h===null)throw new je;const f=h.getWidth(),w=h.getHeight(),C=f+d*2,E=w+d*2,I=Math.max(s,C),j=Math.max(a,E),B=Math.min(Math.floor(I/C),Math.floor(j/E)),G=Math.floor((I-f*B)/2),Z=Math.floor((j-w*B)/2),J=this.createSVGElement(I,j);for(let oe=0,me=Z;oe<w;oe++,me+=B)for(let ke=0,Oe=G;ke<f;ke++,Oe+=B)if(h.get(ke,oe)===1){const Ne=this.createSvgRectElement(Oe,me,B,B);J.appendChild(Ne)}return J}createSVGElement(t,s){const a=document.createElementNS(Yi.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(t,s,a,d){const h=document.createElementNS(Yi.SVG_NS,"rect");return h.setAttributeNS(null,"x",t.toString()),h.setAttributeNS(null,"y",s.toString()),h.setAttributeNS(null,"height",a.toString()),h.setAttributeNS(null,"width",d.toString()),h.setAttributeNS(null,"fill","#000000"),h}}Yi.QUIET_ZONE_SIZE=4,Yi.SVG_NS="http://www.w3.org/2000/svg";class ws{encode(t,s,a,d,h){if(t.length===0)throw new _("Found empty contents");if(s!==ee.QR_CODE)throw new _("Can only encode QR_CODE, but got "+s);if(a<0||d<0)throw new _(`Requested dimensions are too small: ${a}x${d}`);let f=Vt.L,w=ws.QUIET_ZONE_SIZE;h!==null&&(h.get(yn.ERROR_CORRECTION)!==void 0&&(f=Vt.fromString(h.get(yn.ERROR_CORRECTION).toString())),h.get(yn.MARGIN)!==void 0&&(w=Number.parseInt(h.get(yn.MARGIN).toString(),10)));const C=Ht.encode(t,f,h);return ws.renderResult(C,a,d,w)}static renderResult(t,s,a,d){const h=t.getMatrix();if(h===null)throw new je;const f=h.getWidth(),w=h.getHeight(),C=f+d*2,E=w+d*2,I=Math.max(s,C),j=Math.max(a,E),B=Math.min(Math.floor(I/C),Math.floor(j/E)),G=Math.floor((I-f*B)/2),Z=Math.floor((j-w*B)/2),J=new Ce(I,j);for(let oe=0,me=Z;oe<w;oe++,me+=B)for(let ke=0,Oe=G;ke<f;ke++,Oe+=B)h.get(ke,oe)===1&&J.setRegion(Oe,me,B,B);return J}}ws.QUIET_ZONE_SIZE=4;class Fd{encode(t,s,a,d,h){let f;switch(s){case ee.QR_CODE:f=new ws;break;default:throw new _("No encoder available for format "+s)}return f.encode(t,s,a,d,h)}}class Hr extends te{constructor(t,s,a,d,h,f,w,C){if(super(f,w),this.yuvData=t,this.dataWidth=s,this.dataHeight=a,this.left=d,this.top=h,d+f>s||h+w>a)throw new _("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(f,w)}getRow(t,s){if(t<0||t>=this.getHeight())throw new _("Requested row is outside the image: "+t);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const d=(t+this.top)*this.dataWidth+this.left;return O.arraycopy(this.yuvData,d,s,0,a),s}getMatrix(){const t=this.getWidth(),s=this.getHeight();if(t===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=t*s,d=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return O.arraycopy(this.yuvData,h,d,0,a),d;for(let f=0;f<s;f++){const w=f*t;O.arraycopy(this.yuvData,h,d,w,t),h+=this.dataWidth}return d}isCropSupported(){return!0}crop(t,s,a,d){return new Hr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+s,a,d,!1)}renderThumbnail(){const t=this.getWidth()/Hr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Hr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*s),d=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let f=0;f<s;f++){const w=f*t;for(let C=0;C<t;C++){const E=d[h+C*Hr.THUMBNAIL_SCALE_FACTOR]&255;a[w+C]=4278190080|E*65793}h+=this.dataWidth*Hr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Hr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Hr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,s){const a=this.yuvData;for(let d=0,h=this.top*this.dataWidth+this.left;d<s;d++,h+=this.dataWidth){const f=h+t/2;for(let w=h,C=h+t-1;w<f;w++,C--){const E=a[w];a[w]=a[C],a[C]=E}}}invert(){return new re(this)}}Hr.THUMBNAIL_SCALE_FACTOR=2;class lo extends te{constructor(t,s,a,d,h,f,w){if(super(s,a),this.dataWidth=d,this.dataHeight=h,this.left=f,this.top=w,t.BYTES_PER_ELEMENT===4){const C=s*a,E=new Uint8ClampedArray(C);for(let I=0;I<C;I++){const j=t[I],B=j>>16&255,G=j>>7&510,Z=j&255;E[I]=(B+G+Z)/4&255}this.luminances=E}else this.luminances=t;if(d===void 0&&(this.dataWidth=s),h===void 0&&(this.dataHeight=a),f===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(t,s){if(t<0||t>=this.getHeight())throw new _("Requested row is outside the image: "+t);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const d=(t+this.top)*this.dataWidth+this.left;return O.arraycopy(this.luminances,d,s,0,a),s}getMatrix(){const t=this.getWidth(),s=this.getHeight();if(t===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=t*s,d=new Uint8ClampedArray(a);let h=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return O.arraycopy(this.luminances,h,d,0,a),d;for(let f=0;f<s;f++){const w=f*t;O.arraycopy(this.luminances,h,d,w,t),h+=this.dataWidth}return d}isCropSupported(){return!0}crop(t,s,a,d){return new lo(this.luminances,a,d,this.dataWidth,this.dataHeight,this.left+t,this.top+s)}invert(){return new re(this)}}class Cc extends W{static forName(t){return this.getCharacterSetECIByName(t)}}class ml{}ml.ISO_8859_1=W.ISO8859_1;class Ec{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class xl{static singletonList(t){return[t]}static min(t,s){return t.sort(s)[0]}}class Ud{constructor(t){this.previous=t}getPrevious(){return this.previous}}class ys extends Ud{constructor(t,s,a){super(t),this.value=s,this.bitCount=a}appendTo(t,s){t.appendBits(this.value,this.bitCount)}add(t,s){return new ys(this,t,s)}addBinaryShift(t,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ys(this,t,s)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+F.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class wl extends ys{constructor(t,s,a){super(t,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(t,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(t,s){return new wl(this,t,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function zd(P,t,s){return new wl(P,t,s)}function co(P,t,s){return new ys(P,t,s)}const Vd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ri=0,vs=1,Ln=2,Sc=3,Nr=4,Ac=new ys(null,0,0),Jo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function _c(P){for(let t of P)z.fill(t,-1);return P[Ri][Nr]=0,P[vs][Nr]=0,P[vs][Ri]=28,P[Sc][Nr]=0,P[Ln][Nr]=0,P[Ln][Ri]=15,P}const yl=_c(z.createInt32Array(6,6));class $n{constructor(t,s,a,d){this.token=t,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,s){let a=this.bitCount,d=this.token;if(t!==this.mode){let f=Jo[this.mode][t];d=co(d,f&65535,f>>16),a+=f>>16}let h=t===Ln?4:5;return d=co(d,s,h),new $n(d,t,0,a+h)}shiftAndAppend(t,s){let a=this.token,d=this.mode===Ln?4:5;return a=co(a,yl[this.mode][t],d),a=co(a,s,5),new $n(a,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(t){let s=this.token,a=this.mode,d=this.bitCount;if(this.mode===Nr||this.mode===Ln){let w=Jo[a][Ri];s=co(s,w&65535,w>>16),d+=w>>16,a=Ri}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new $n(s,a,this.binaryShiftByteCount+1,d+h);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(t+1)),f}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=zd(s,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new $n(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let s=this.bitCount+(Jo[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?s+=$n.calculateBinaryShiftCost(t)-$n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(s+=10),s<=t.bitCount}toBitArray(t){let s=[];for(let d=this.endBinaryShift(t.length).token;d!==null;d=d.getPrevious())s.unshift(d);let a=new $;for(const d of s)d.appendTo(a,t);return a}toString(){return de.format("%s bits=%d bytes=%d",Vd[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}$n.INITIAL_STATE=new $n(Ac,Ri,0,0);function Wd(P){const t=de.getCharCode(" "),s=de.getCharCode("."),a=de.getCharCode(",");P[Ri][t]=1;const d=de.getCharCode("Z"),h=de.getCharCode("A");for(let B=h;B<=d;B++)P[Ri][B]=B-h+2;P[vs][t]=1;const f=de.getCharCode("z"),w=de.getCharCode("a");for(let B=w;B<=f;B++)P[vs][B]=B-w+2;P[Ln][t]=1;const C=de.getCharCode("9"),E=de.getCharCode("0");for(let B=E;B<=C;B++)P[Ln][B]=B-E+2;P[Ln][a]=12,P[Ln][s]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<I.length;B++)P[Sc][de.getCharCode(I[B])]=B;const j=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<j.length;B++)de.getCharCode(j[B])>0&&(P[Nr][de.getCharCode(j[B])]=B);return P}const vl=Wd(z.createInt32Array(5,256));class uo{constructor(t){this.text=t}encode(){const t=de.getCharCode(" "),s=de.getCharCode(`
`);let a=xl.singletonList($n.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let f,w=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case de.getCharCode("\r"):f=w===s?2:0;break;case de.getCharCode("."):f=w===t?3:0;break;case de.getCharCode(","):f=w===t?4:0;break;case de.getCharCode(":"):f=w===t?5:0;break;default:f=0}f>0?(a=uo.updateStateListForPair(a,h,f),h++):a=this.updateStateListForChar(a,h)}return xl.min(a,(h,f)=>h.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,s){const a=[];for(let d of t)this.updateStateForChar(d,s,a);return uo.simplifyStates(a)}updateStateForChar(t,s,a){let d=this.text[s]&255,h=vl[t.getMode()][d]>0,f=null;for(let w=0;w<=Nr;w++){let C=vl[w][d];if(C>0){if(f==null&&(f=t.endBinaryShift(s)),!h||w===t.getMode()||w===Ln){const E=f.latchAndAppend(w,C);a.push(E)}if(!h&&yl[t.getMode()][w]>=0){const E=f.shiftAndAppend(w,C);a.push(E)}}}if(t.getBinaryShiftByteCount()>0||vl[t.getMode()][d]===0){let w=t.addBinaryShiftChar(s);a.push(w)}}static updateStateListForPair(t,s,a){const d=[];for(let h of t)this.updateStateForPair(h,s,a,d);return this.simplifyStates(d)}static updateStateForPair(t,s,a,d){let h=t.endBinaryShift(s);if(d.push(h.latchAndAppend(Nr,a)),t.getMode()!==Nr&&d.push(h.shiftAndAppend(Nr,a)),a===3||a===4){let f=h.latchAndAppend(Ln,16-a).latchAndAppend(Ln,1);d.push(f)}if(t.getBinaryShiftByteCount()>0){let f=t.addBinaryShiftChar(s).addBinaryShiftChar(s+1);d.push(f)}}static simplifyStates(t){let s=[];for(const a of t){let d=!0;for(const h of s){if(h.isBetterThanOrEqualTo(a)){d=!1;break}a.isBetterThanOrEqualTo(h)&&(s=s.filter(f=>f!==h))}d&&s.push(a)}return s}}class Pt{constructor(){}static encodeBytes(t){return Pt.encode(t,Pt.DEFAULT_EC_PERCENT,Pt.DEFAULT_AZTEC_LAYERS)}static encode(t,s,a){let d=new uo(t).encode(),h=F.truncDivision(d.getSize()*s,100)+11,f=d.getSize()+h,w,C,E,I,j;if(a!==Pt.DEFAULT_AZTEC_LAYERS){if(w=a<0,C=Math.abs(a),C>(w?Pt.MAX_NB_BITS_COMPACT:Pt.MAX_NB_BITS))throw new _(de.format("Illegal value %s for layers",a));E=Pt.totalBitsInLayer(C,w),I=Pt.WORD_SIZE[C];let Ne=E-E%I;if(j=Pt.stuffBits(d,I),j.getSize()+h>Ne)throw new _("Data to large for user specified layer");if(w&&j.getSize()>I*64)throw new _("Data to large for user specified layer")}else{I=0,j=null;for(let Ne=0;;Ne++){if(Ne>Pt.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(w=Ne<=3,C=w?Ne+1:Ne,E=Pt.totalBitsInLayer(C,w),f>E)continue;(j==null||I!==Pt.WORD_SIZE[C])&&(I=Pt.WORD_SIZE[C],j=Pt.stuffBits(d,I));let At=E-E%I;if(!(w&&j.getSize()>I*64)&&j.getSize()+h<=At)break}}let B=Pt.generateCheckWords(j,E,I),G=j.getSize()/I,Z=Pt.generateModeMessage(w,C,G),J=(w?11:14)+C*4,oe=new Int32Array(J),me;if(w){me=J;for(let Ne=0;Ne<oe.length;Ne++)oe[Ne]=Ne}else{me=J+1+2*F.truncDivision(F.truncDivision(J,2)-1,15);let Ne=F.truncDivision(J,2),At=F.truncDivision(me,2);for(let mt=0;mt<Ne;mt++){let er=mt+F.truncDivision(mt,15);oe[Ne-mt-1]=At-er-1,oe[Ne+mt]=At+er+1}}let ke=new Ce(me);for(let Ne=0,At=0;Ne<C;Ne++){let mt=(C-Ne)*4+(w?9:12);for(let er=0;er<mt;er++){let Ir=er*2;for(let vn=0;vn<2;vn++)B.get(At+Ir+vn)&&ke.set(oe[Ne*2+vn],oe[Ne*2+er]),B.get(At+mt*2+Ir+vn)&&ke.set(oe[Ne*2+er],oe[J-1-Ne*2-vn]),B.get(At+mt*4+Ir+vn)&&ke.set(oe[J-1-Ne*2-vn],oe[J-1-Ne*2-er]),B.get(At+mt*6+Ir+vn)&&ke.set(oe[J-1-Ne*2-er],oe[Ne*2+vn])}At+=mt*8}if(Pt.drawModeMessage(ke,w,me,Z),w)Pt.drawBullsEye(ke,F.truncDivision(me,2),5);else{Pt.drawBullsEye(ke,F.truncDivision(me,2),7);for(let Ne=0,At=0;Ne<F.truncDivision(J,2)-1;Ne+=15,At+=16)for(let mt=F.truncDivision(me,2)&1;mt<me;mt+=2)ke.set(F.truncDivision(me,2)-At,mt),ke.set(F.truncDivision(me,2)+At,mt),ke.set(mt,F.truncDivision(me,2)-At),ke.set(mt,F.truncDivision(me,2)+At)}let Oe=new Ec;return Oe.setCompact(w),Oe.setSize(me),Oe.setLayers(C),Oe.setCodeWords(G),Oe.setMatrix(ke),Oe}static drawBullsEye(t,s,a){for(let d=0;d<a;d+=2)for(let h=s-d;h<=s+d;h++)t.set(h,s-d),t.set(h,s+d),t.set(s-d,h),t.set(s+d,h);t.set(s-a,s-a),t.set(s-a+1,s-a),t.set(s-a,s-a+1),t.set(s+a,s-a),t.set(s+a,s-a+1),t.set(s+a,s+a-1)}static generateModeMessage(t,s,a){let d=new $;return t?(d.appendBits(s-1,2),d.appendBits(a-1,6),d=Pt.generateCheckWords(d,28,4)):(d.appendBits(s-1,5),d.appendBits(a-1,11),d=Pt.generateCheckWords(d,40,4)),d}static drawModeMessage(t,s,a,d){let h=F.truncDivision(a,2);if(s)for(let f=0;f<7;f++){let w=h-3+f;d.get(f)&&t.set(w,h-5),d.get(f+7)&&t.set(h+5,w),d.get(20-f)&&t.set(w,h+5),d.get(27-f)&&t.set(h-5,w)}else for(let f=0;f<10;f++){let w=h-5+f+F.truncDivision(f,5);d.get(f)&&t.set(w,h-7),d.get(f+10)&&t.set(h+7,w),d.get(29-f)&&t.set(w,h+7),d.get(39-f)&&t.set(h-7,w)}}static generateCheckWords(t,s,a){let d=t.getSize()/a,h=new pl(Pt.getGF(a)),f=F.truncDivision(s,a),w=Pt.bitsToWords(t,a,f);h.encode(w,f-d);let C=s%a,E=new $;E.appendBits(0,C);for(const I of Array.from(w))E.appendBits(I,a);return E}static bitsToWords(t,s,a){let d=new Int32Array(a),h,f;for(h=0,f=t.getSize()/s;h<f;h++){let w=0;for(let C=0;C<s;C++)w|=t.get(h*s+C)?1<<s-C-1:0;d[h]=w}return d}static getGF(t){switch(t){case 4:return nt.AZTEC_PARAM;case 6:return nt.AZTEC_DATA_6;case 8:return nt.AZTEC_DATA_8;case 10:return nt.AZTEC_DATA_10;case 12:return nt.AZTEC_DATA_12;default:throw new _("Unsupported word size "+t)}}static stuffBits(t,s){let a=new $,d=t.getSize(),h=(1<<s)-2;for(let f=0;f<d;f+=s){let w=0;for(let C=0;C<s;C++)(f+C>=d||t.get(f+C))&&(w|=1<<s-1-C);(w&h)===h?(a.appendBits(w&h,s),f--):(w&h)===0?(a.appendBits(w|1,s),f--):a.appendBits(w,s)}return a}static totalBitsInLayer(t,s){return((s?88:112)+16*t)*t}}Pt.DEFAULT_EC_PERCENT=33,Pt.DEFAULT_AZTEC_LAYERS=0,Pt.MAX_NB_BITS=32,Pt.MAX_NB_BITS_COMPACT=4,Pt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ho{encode(t,s,a,d){return this.encodeWithHints(t,s,a,d,null)}encodeWithHints(t,s,a,d,h){let f=ml.ISO_8859_1,w=Pt.DEFAULT_EC_PERCENT,C=Pt.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(yn.CHARACTER_SET)&&(f=Cc.forName(h.get(yn.CHARACTER_SET).toString())),h.has(yn.ERROR_CORRECTION)&&(w=F.parseInt(h.get(yn.ERROR_CORRECTION).toString())),h.has(yn.AZTEC_LAYERS)&&(C=F.parseInt(h.get(yn.AZTEC_LAYERS).toString()))),ho.encodeLayers(t,s,a,d,f,w,C)}static encodeLayers(t,s,a,d,h,f,w){if(s!==ee.AZTEC)throw new _("Can only encode AZTEC, but got "+s);let C=Pt.encode(de.getBytes(t,h),f,w);return ho.renderResult(C,a,d)}static renderResult(t,s,a){let d=t.getMatrix();if(d==null)throw new je;let h=d.getWidth(),f=d.getHeight(),w=Math.max(s,h),C=Math.max(a,f),E=Math.min(w/h,C/f),I=(w-h*E)/2,j=(C-f*E)/2,B=new Ce(w,C);for(let G=0,Z=j;G<f;G++,Z+=E)for(let J=0,oe=I;J<h;J++,oe+=E)d.get(J,G)&&B.setRegion(oe,Z,E,E);return B}}n.AbstractExpandedDecoder=sl,n.ArgumentException=A,n.ArithmeticException=vt,n.AztecCode=Ec,n.AztecCodeReader=_i,n.AztecCodeWriter=ho,n.AztecDecoder=st,n.AztecDetector=Vn,n.AztecDetectorResult=Hi,n.AztecEncoder=Pt,n.AztecHighLevelEncoder=uo,n.AztecPoint=It,n.BarcodeFormat=ee,n.Binarizer=D,n.BinaryBitmap=k,n.BitArray=$,n.BitMatrix=Ce,n.BitSource=ll,n.BrowserAztecCodeReader=Md,n.BrowserBarcodeReader=pc,n.BrowserCodeReader=Ae,n.BrowserDatamatrixCodeReader=Ld,n.BrowserMultiFormatReader=ao,n.BrowserPDF417Reader=Zo,n.BrowserQRCodeReader=bc,n.BrowserQRCodeSvgWriter=Yi,n.CharacterSetECI=W,n.ChecksumException=T,n.Code128Reader=De,n.Code39Reader=xn,n.DataMatrixDecodedBitStreamParser=Sr,n.DataMatrixReader=Ar,n.DecodeHintType=Y,n.DecoderResult=Le,n.DefaultGridSampler=Fr,n.DetectorResult=ri,n.EAN13Reader=hr,n.EncodeHintType=yn,n.Exception=y,n.FormatException=V,n.GenericGF=nt,n.GenericGFPoly=tt,n.GlobalHistogramBinarizer=ce,n.GridSampler=zn,n.GridSamplerInstance=St,n.HTMLCanvasElementLuminanceSource=fe,n.HybridBinarizer=ge,n.ITFReader=Bt,n.IllegalArgumentException=_,n.IllegalStateException=je,n.InvertedLuminanceSource=re,n.LuminanceSource=te,n.MathUtils=ht,n.MultiFormatOneDReader=hs,n.MultiFormatReader=Ko,n.MultiFormatWriter=Fd,n.NotFoundException=ie,n.OneDReader=an,n.PDF417DecodedBitStreamParser=xe,n.PDF417DecoderErrorCorrection=dl,n.PDF417Reader=Rn,n.PDF417ResultMetadata=Xo,n.PerspectiveTransform=Dn,n.PlanarYUVLuminanceSource=Hr,n.QRCodeByteMatrix=Qo,n.QRCodeDataMask=Ct,n.QRCodeDecodedBitStreamParser=Yt,n.QRCodeDecoderErrorCorrectionLevel=Vt,n.QRCodeDecoderFormatInformation=Nn,n.QRCodeEncoder=Ht,n.QRCodeEncoderQRCode=Xi,n.QRCodeMaskUtil=Kt,n.QRCodeMatrixUtil=ot,n.QRCodeMode=rt,n.QRCodeReader=Hn,n.QRCodeVersion=et,n.QRCodeWriter=ws,n.RGBLuminanceSource=lo,n.RSS14Reader=$t,n.RSSExpandedReader=Se,n.ReaderException=xs,n.ReedSolomonDecoder=Me,n.ReedSolomonEncoder=pl,n.ReedSolomonException=on,n.Result=Te,n.ResultMetadataType=Ee,n.ResultPoint=ze,n.StringUtils=de,n.UnsupportedOperationException=ye,n.VideoInputDevice=K,n.WhiteRectangleDetector=Kn,n.WriterException=Wt,n.ZXingArrays=z,n.ZXingCharset=Cc,n.ZXingInteger=F,n.ZXingStandardCharsets=ml,n.ZXingStringBuilder=ve,n.ZXingStringEncoding=be,n.ZXingSystem=O,n.createAbstractExpandedDecoder=fc,Object.defineProperty(n,"__esModule",{value:!0})}))})(ql,ql.exports)),ql.exports}var nn=R8();const k8=sc(nn),O8=O0({__proto__:null,default:k8},[nn]);var Ym=(function(){function r(e,n,o){if(this.formatMap=new Map([[Ve.QR_CODE,nn.BarcodeFormat.QR_CODE],[Ve.AZTEC,nn.BarcodeFormat.AZTEC],[Ve.CODABAR,nn.BarcodeFormat.CODABAR],[Ve.CODE_39,nn.BarcodeFormat.CODE_39],[Ve.CODE_93,nn.BarcodeFormat.CODE_93],[Ve.CODE_128,nn.BarcodeFormat.CODE_128],[Ve.DATA_MATRIX,nn.BarcodeFormat.DATA_MATRIX],[Ve.MAXICODE,nn.BarcodeFormat.MAXICODE],[Ve.ITF,nn.BarcodeFormat.ITF],[Ve.EAN_13,nn.BarcodeFormat.EAN_13],[Ve.EAN_8,nn.BarcodeFormat.EAN_8],[Ve.PDF_417,nn.BarcodeFormat.PDF_417],[Ve.RSS_14,nn.BarcodeFormat.RSS_14],[Ve.RSS_EXPANDED,nn.BarcodeFormat.RSS_EXPANDED],[Ve.UPC_A,nn.BarcodeFormat.UPC_A],[Ve.UPC_E,nn.BarcodeFormat.UPC_E],[Ve.UPC_EAN_EXTENSION,nn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!O8)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var c=this.createZXingFormats(e),u=new Map;u.set(nn.DecodeHintType.POSSIBLE_FORMATS,c),u.set(nn.DecodeHintType.TRY_HARDER,!1),this.hints=u}return r.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,c){try{o(n.decode(e))}catch(u){c(u)}})},r.prototype.decode=function(e){var n=new nn.MultiFormatReader(this.verbose,this.hints),o=new nn.HTMLCanvasElementLuminanceSource(e),c=new nn.BinaryBitmap(new nn.HybridBinarizer(o)),u=n.decode(c);return{text:u.text,format:x2.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,c){e.set(n,o)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var n=[],o=0,c=e;o<c.length;o++){var u=c[o];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),P8=function(r,e,n,o){function c(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function x(A){try{y(o.next(A))}catch(_){p(_)}}function b(A){try{y(o.throw(A))}catch(_){p(_)}}function y(A){A.done?u(A.value):c(A.value).then(x,b)}y((o=o.apply(r,e||[])).next())})},j8=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,p;return p={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(y){return function(A){return b([y,A])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,c&&(u=y[0]&2?c.return:y[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,y[1])).done)return u;switch(c=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,c=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(A){y=[6,A],c=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Km=(function(){function r(e,n,o){if(this.formatMap=new Map([[Ve.QR_CODE,"qr_code"],[Ve.AZTEC,"aztec"],[Ve.CODABAR,"codabar"],[Ve.CODE_39,"code_39"],[Ve.CODE_93,"code_93"],[Ve.CODE_128,"code_128"],[Ve.DATA_MATRIX,"data_matrix"],[Ve.ITF,"itf"],[Ve.EAN_13,"ean_13"],[Ve.EAN_8,"ean_8"],[Ve.PDF_417,"pdf417"],[Ve.UPC_A,"upc_a"],[Ve.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return P8(this,void 0,void 0,function(){var n,o;return j8(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=c.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:x2.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,c=0,u=e;c<u.length;c++){var p=u[c],x=p.boundingBox.width*p.boundingBox.height;x>o&&(o=x,n=p)}if(!n)throw"No largest barcode found";return n},r.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,c=e;o<c.length;o++){var u=c[o];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,c){e.set(n,o)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),Zm=function(r,e,n,o){function c(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function x(A){try{y(o.next(A))}catch(_){p(_)}}function b(A){try{y(o.throw(A))}catch(_){p(_)}}function y(A){A.done?u(A.value):c(A.value).then(x,b)}y((o=o.apply(r,e||[])).next())})},Qm=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,p;return p={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(y){return function(A){return b([y,A])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,c&&(u=y[0]&2?c.return:y[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,y[1])).done)return u;switch(c=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,c=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(A){y=[6,A],c=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},D8=(function(){function r(e,n,o,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&Km.isSupported()?(this.primaryDecoder=new Km(e,o,c),this.secondaryDecoder=new Ym(e,o,c)):this.primaryDecoder=new Ym(e,o,c)}return r.prototype.decodeAsync=function(e){return Zm(this,void 0,void 0,function(){var n;return Qm(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return Zm(this,void 0,void 0,function(){var n,o;return Qm(this,function(c){switch(c.label){case 0:n=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(o=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var c=o[n];e+=c}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),C1=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(o[u]=c[u])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),cd=function(r,e,n,o){function c(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function x(A){try{y(o.next(A))}catch(_){p(_)}}function b(A){try{y(o.throw(A))}catch(_){p(_)}}function y(A){A.done?u(A.value):c(A.value).then(x,b)}y((o=o.apply(r,e||[])).next())})},ud=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,p;return p={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(y){return function(A){return b([y,A])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,c&&(u=y[0]&2?c.return:y[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,y[1])).done)return u;switch(c=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,c=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(A){y=[6,A],c=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},y2=(function(){function r(e,n){this.name=e,this.track=n}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},r})(),M8=(function(r){C1(e,r);function e(n,o){return r.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var c={advanced:[o]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(y2),L8=(function(r){C1(e,r);function e(n){return r.call(this,"zoom",n)||this}return e})(M8),B8=(function(r){C1(e,r);function e(n){return r.call(this,"torch",n)||this}return e})(y2),F8=(function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new L8(this.track)},r.prototype.torchFeature=function(){return new B8(this.track)},r})(),U8=(function(){function r(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,c),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,n,o,c){return cd(this,void 0,void 0,function(){var u,p;return ud(this,function(x){switch(x.label){case 0:return u=new r(e,n,c),o.aspectRatio?(p={aspectRatio:o.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:x.sent(),x.label=2;case 2:return u.setupSurface(),[2,u]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return cd(this,void 0,void 0,function(){return ud(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var c=e.mediaStream.getVideoTracks(),u=c.length,p=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++p,p>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},r.prototype.getCapabilities=function(){return new F8(this.getFirstTrackOrFail())},r})(),z8=(function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,n,o){return cd(this,void 0,void 0,function(){return ud(this,function(c){return[2,U8.create(e,this.mediaStream,n,o)]})})},r.create=function(e){return cd(this,void 0,void 0,function(){var n,o;return ud(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=c.sent(),[2,new r(o)]}})})},r})(),Jm=function(r,e,n,o){function c(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function x(A){try{y(o.next(A))}catch(_){p(_)}}function b(A){try{y(o.throw(A))}catch(_){p(_)}}function y(A){A.done?u(A.value):c(A.value).then(x,b)}y((o=o.apply(r,e||[])).next())})},ex=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,p;return p={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(y){return function(A){return b([y,A])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,c&&(u=y[0]&2?c.return:y[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,y[1])).done)return u;switch(c=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,c=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(A){y=[6,A],c=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},V8=(function(){function r(){}return r.failIfNotSupported=function(){return Jm(this,void 0,void 0,function(){return ex(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return Jm(this,void 0,void 0,function(){return ex(this,function(n){return[2,z8.create(e)]})})},r})(),W8=function(r,e,n,o){function c(u){return u instanceof n?u:new n(function(p){p(u)})}return new(n||(n=Promise))(function(u,p){function x(A){try{y(o.next(A))}catch(_){p(_)}}function b(A){try{y(o.throw(A))}catch(_){p(_)}}function y(A){A.done?u(A.value):c(A.value).then(x,b)}y((o=o.apply(r,e||[])).next())})},H8=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,c,u,p;return p={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function x(y){return function(A){return b([y,A])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,c&&(u=y[0]&2?c.return:y[0]?c.throw||((u=c.return)&&u.call(c),0):c.next)&&!(u=u.call(c,y[1])).done)return u;switch(c=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,c=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(A){y=[6,A],c=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},$8=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=Oa.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=Oa.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return W8(this,void 0,void 0,function(){var e,n,o,c,u,p,x;return H8(this,function(b){switch(b.label){case 0:return e=function(y){for(var A=y.getVideoTracks(),_=0,k=A;_<k.length;_++){var T=k[_];T.enabled=!1,T.stop(),y.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=b.sent(),c=[],u=0,p=o;u<p.length;u++)x=p[u],x.kind==="videoinput"&&c.push({id:x.deviceId,label:x.label});return e(n),[2,c]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(u){for(var p=[],x=0,b=u;x<b.length;x++){var y=b[x];y.kind==="video"&&p.push({id:y.id,label:y.label})}e(p)},c=MediaStreamTrack;c.getSources(o)})},r})(),mn;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(mn||(mn={}));var G8=(function(){function r(){this.state=mn.NOT_STARTED,this.onGoingTransactionNewState=mn.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===mn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=mn.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===mn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=mn.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==mn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case mn.UNKNOWN:throw"Transition from unknown is not allowed";case mn.NOT_STARTED:this.failIfNewStateIs(e,[mn.PAUSED]);break;case mn.SCANNING:break;case mn.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,n){for(var o=0,c=n;o<c.length;o++){var u=c[o];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r})(),q8=(function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===mn.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==mn.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===mn.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===mn.PAUSED},r})(),X8=(function(){function r(){}return r.create=function(){return new q8(new G8)},r})(),Y8=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(o[u]=c[u])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Or=(function(r){Y8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(_8),K8=(function(){function r(e,n){this.logger=n,this.fps=Or.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Or.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?w2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!os(this.qrbox)},r.create=function(e,n){return new r(e,n)},r})(),Z8=(function(){function r(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new I8(this.verbose),this.qrcode=new D8(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=X8.create()}return r.prototype.start=function(e,n,o,c){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;c?p=c:p=this.verbose?this.logger.log:function(){};var x=K8.create(n,this.logger);this.clearElement();var b=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=b,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:Or.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var _=this,k=this.stateManagerProxy.startTransition(mn.SCANNING);return new Promise(function(T,D){var O=y?x.videoConstraints:_.createVideoConstraints(e);if(!O){k.cancel(),D("videoConstraints should be defined");return}var L={};(!y||x.aspectRatio)&&(L.aspectRatio=x.aspectRatio);var U={onRenderSurfaceReady:function(z,F){_.setupUi(z,F,x),_.isScanning=!0,_.foreverScan(x,o,p)}};V8.failIfNotSupported().then(function(z){z.create(O).then(function(F){return F.render(u.element,L,U).then(function($){_.renderedCamera=$,k.execute(),T(null)}).catch(function($){k.cancel(),D($)})}).catch(function(F){k.cancel(),D(Oa.errorGettingUserMedia(F))})}).catch(function(z){k.cancel(),D(Oa.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(mn.PAUSED),this.showPausedState(),(os(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(mn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(mn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var u=document.getElementById(Or.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),o(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),n.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},r.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(os(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,u){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var p=new Image;p.onload=function(){var x=p.width,b=p.height,y=document.getElementById(o.elementId),A=y.clientWidth?y.clientWidth:Or.DEFAULT_WIDTH,_=Math.max(y.clientHeight?y.clientHeight:b,Or.FILE_SCAN_MIN_HEIGHT),k=o.computeCanvasDrawConfig(x,b,A,_);if(n){var T=o.createCanvasElement(A,_,"qr-canvas-visible");T.style.display="inline-block",y.appendChild(T);var D=T.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=A,D.canvas.height=_,D.drawImage(p,0,0,x,b,k.x,k.y,k.width,k.height)}var O=Or.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(p.width,k.width),U=Math.max(p.height,k.height),z=L+2*O,F=U+2*O,$=o.createCanvasElement(z,F);y.appendChild($);var se=$.getContext("2d");if(!se)throw"Unable to get 2d context from canvas";se.canvas.width=z,se.canvas.height=F,se.drawImage(p,0,0,x,b,O,O,L,U);try{o.qrcode.decodeRobustlyAsync($).then(function(Y){c(qm.createFromQrcodeResult(Y))}).catch(u)}catch(Y){u("QR code parse error, error = ".concat(Y))}},p.onerror=u,p.onabort=u,p.onstalled=u,p.onsuspend=u,p.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return $8.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!w2.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var n=[Ve.QR_CODE,Ve.AZTEC,Ve.CODABAR,Ve.CODE_39,Ve.CODE_93,Ve.CODE_128,Ve.DATA_MATRIX,Ve.MAXICODE,Ve.ITF,Ve.EAN_13,Ve.EAN_8,Ve.PDF_417,Ve.RSS_14,Ve.RSS_EXPANDED,Ve.UPC_A,Ve.UPC_E,Ve.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],c=0,u=e.formatsToSupport;c<u.length;c++){var p=u[c];A8(p)?o.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(os(e))return!0;if(!os(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(os(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return os(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,n,o){var c=this,u=o.qrbox;this.validateQrboxConfig(u);var p=this.toQrdimensions(e,n,u),x=function(y){if(y<Or.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Or.MIN_QR_BOX_SIZE,"px.")},b=function(y){return y>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=e),y};x(p.width),x(p.height),p.width=b(p.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return o},r.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var c=os(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(c);var u=this.toQrdimensions(e,n,c);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=o.isShadedBoxEnabled()&&u.height<=n,x={x:0,y:0,width:e,height:n},b=p?this.getShadedRegionBounds(e,n,u):x,y=this.createCanvasElement(b.width,b.height),A={willReadFrequently:!0},_=y.getContext("2d",A);_.canvas.width=b.width,_.canvas.height=b.height,this.element.append(y),p&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=_,this.canvasElement=y},r.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Oa.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},r.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,qm.createFromQrcodeResult(c)),o.possiblyUpdateShaders(!0),!0}).catch(function(c){o.possiblyUpdateShaders(!1);var u=Oa.codeParseError(c);return n(u,N8.createFrom(u)),!1})},r.prototype.foreverScan=function(e,n,o){var c=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),p=u.videoWidth/u.clientWidth,x=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*p,y=this.qrRegion.height*x,A=this.qrRegion.x*p,_=this.qrRegion.y*x;this.context.drawImage(u,A,_,b,y,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,n,o)},c.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(T){!T&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(n,o).finally(function(){k()})):k()}).catch(function(T){c.logger.logError("Error happend while scanning context",T),k()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",c={user:!0,environment:!0},u="exact",p=function(D){if(D in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var y=e.facingMode;if(typeof y=="string"){if(p(y))return{facingMode:y}}else if(typeof y=="object")if(u in y){if(p(y["".concat(u)]))return{facingMode:{exact:y["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var A=typeof y;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(u in _)return{deviceId:{exact:_["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var k=typeof _;throw"Invalid type of 'deviceId' = ".concat(k)}}}var T=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},r.prototype.computeCanvasDrawConfig=function(e,n,o,c){if(e<=o&&n<=c){var u=(o-e)/2,p=(c-n)/2;return{x:u,y:p,width:e,height:n}}else{var x=e,b=n;return e>o&&(n=o/e*n,e=o),n>c&&(e=c/n*e,n=c),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,c)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Or.BORDER_SHADER_MATCH_COLOR:Or.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,n,o){var c=e,u=n,p=document.createElement("canvas");return p.style.width="".concat(c,"px"),p.style.height="".concat(u,"px"),p.style.display="none",p.id=os(o)?"qr-canvas":o,p},r.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},r.prototype.possiblyInsertShadingElement=function(e,n,o,c){if(!(n-c.width<1||o-c.height<1)){var u=document.createElement("div");u.style.position="absolute";var p=(n-c.width)/2,x=(o-c.height)/2;if(u.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(Or.SHADED_REGION_ELEMENT_ID),n-c.width<11||o-c.height<11)this.hasBorderShaders=!1;else{var b=5,y=40;this.insertShaderBorders(u,y,b,-b,null,0,!0),this.insertShaderBorders(u,y,b,-b,null,0,!1),this.insertShaderBorders(u,y,b,null,-b,0,!0),this.insertShaderBorders(u,y,b,null,-b,0,!1),this.insertShaderBorders(u,b,y+b,-b,null,-b,!0),this.insertShaderBorders(u,b,y+b,null,-b,-b,!0),this.insertShaderBorders(u,b,y+b,-b,null,-b,!1),this.insertShaderBorders(u,b,y+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(u)}},r.prototype.insertShaderBorders=function(e,n,o,c,u,p,x){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Or.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(o,"px"),c!==null&&(b.style.top="".concat(c,"px")),u!==null&&(b.style.bottom="".concat(u,"px")),x?b.style.left="".concat(p,"px"):b.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r})(),tx;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(tx||(tx={}));var _a={},Of,nx;function Q8(){return nx||(nx=1,Of=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Of}var Pf={},Bs={},rx;function Vo(){if(rx)return Bs;rx=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Bs.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},Bs.getSymbolTotalCodewords=function(o){return e[o]},Bs.getBCHDigit=function(n){let o=0;for(;n!==0;)o++,n>>>=1;return o},Bs.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');r=o},Bs.isKanjiModeEnabled=function(){return typeof r<"u"},Bs.toSJIS=function(o){return r(o)},Bs}var jf={},ix;function E1(){return ix||(ix=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+n)}}r.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},r.from=function(o,c){if(r.isValid(o))return o;try{return e(o)}catch{return c}}})(jf)),jf}var Df,sx;function J8(){if(sx)return Df;sx=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let o=0;o<n;o++)this.putBit((e>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Df=r,Df}var Mf,ox;function eR(){if(ox)return Mf;ox=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,n,o,c){const u=e*this.size+n;this.data[u]=o,c&&(this.reservedBit[u]=!0)},r.prototype.get=function(e,n){return this.data[e*this.size+n]},r.prototype.xor=function(e,n,o){this.data[e*this.size+n]^=o},r.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},Mf=r,Mf}var Lf={},ax;function tR(){return ax||(ax=1,(function(r){const e=Vo().getSymbolSize;r.getRowColCoords=function(o){if(o===1)return[];const c=Math.floor(o/7)+2,u=e(o),p=u===145?26:Math.ceil((u-13)/(2*c-2))*2,x=[u-7];for(let b=1;b<c-1;b++)x[b]=x[b-1]-p;return x.push(6),x.reverse()},r.getPositions=function(o){const c=[],u=r.getRowColCoords(o),p=u.length;for(let x=0;x<p;x++)for(let b=0;b<p;b++)x===0&&b===0||x===0&&b===p-1||x===p-1&&b===0||c.push([u[x],u[b]]);return c}})(Lf)),Lf}var Bf={},lx;function nR(){if(lx)return Bf;lx=1;const r=Vo().getSymbolSize,e=7;return Bf.getPositions=function(o){const c=r(o);return[[0,0],[c-e,0],[0,c-e]]},Bf}var Ff={},cx;function rR(){return cx||(cx=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},r.from=function(c){return r.isValid(c)?parseInt(c,10):void 0},r.getPenaltyN1=function(c){const u=c.size;let p=0,x=0,b=0,y=null,A=null;for(let _=0;_<u;_++){x=b=0,y=A=null;for(let k=0;k<u;k++){let T=c.get(_,k);T===y?x++:(x>=5&&(p+=e.N1+(x-5)),y=T,x=1),T=c.get(k,_),T===A?b++:(b>=5&&(p+=e.N1+(b-5)),A=T,b=1)}x>=5&&(p+=e.N1+(x-5)),b>=5&&(p+=e.N1+(b-5))}return p},r.getPenaltyN2=function(c){const u=c.size;let p=0;for(let x=0;x<u-1;x++)for(let b=0;b<u-1;b++){const y=c.get(x,b)+c.get(x,b+1)+c.get(x+1,b)+c.get(x+1,b+1);(y===4||y===0)&&p++}return p*e.N2},r.getPenaltyN3=function(c){const u=c.size;let p=0,x=0,b=0;for(let y=0;y<u;y++){x=b=0;for(let A=0;A<u;A++)x=x<<1&2047|c.get(y,A),A>=10&&(x===1488||x===93)&&p++,b=b<<1&2047|c.get(A,y),A>=10&&(b===1488||b===93)&&p++}return p*e.N3},r.getPenaltyN4=function(c){let u=0;const p=c.data.length;for(let b=0;b<p;b++)u+=c.data[b];return Math.abs(Math.ceil(u*100/p/5)-10)*e.N4};function n(o,c,u){switch(o){case r.Patterns.PATTERN000:return(c+u)%2===0;case r.Patterns.PATTERN001:return c%2===0;case r.Patterns.PATTERN010:return u%3===0;case r.Patterns.PATTERN011:return(c+u)%3===0;case r.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(u/3))%2===0;case r.Patterns.PATTERN101:return c*u%2+c*u%3===0;case r.Patterns.PATTERN110:return(c*u%2+c*u%3)%2===0;case r.Patterns.PATTERN111:return(c*u%3+(c+u)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}r.applyMask=function(c,u){const p=u.size;for(let x=0;x<p;x++)for(let b=0;b<p;b++)u.isReserved(b,x)||u.xor(b,x,n(c,b,x))},r.getBestMask=function(c,u){const p=Object.keys(r.Patterns).length;let x=0,b=1/0;for(let y=0;y<p;y++){u(y),r.applyMask(y,c);const A=r.getPenaltyN1(c)+r.getPenaltyN2(c)+r.getPenaltyN3(c)+r.getPenaltyN4(c);r.applyMask(y,c),A<b&&(b=A,x=y)}return x}})(Ff)),Ff}var Bu={},ux;function v2(){if(ux)return Bu;ux=1;const r=E1(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Bu.getBlocksCount=function(c,u){switch(u){case r.L:return e[(c-1)*4+0];case r.M:return e[(c-1)*4+1];case r.Q:return e[(c-1)*4+2];case r.H:return e[(c-1)*4+3];default:return}},Bu.getTotalCodewordsCount=function(c,u){switch(u){case r.L:return n[(c-1)*4+0];case r.M:return n[(c-1)*4+1];case r.Q:return n[(c-1)*4+2];case r.H:return n[(c-1)*4+3];default:return}},Bu}var Uf={},Wl={},dx;function iR(){if(dx)return Wl;dx=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let o=1;for(let c=0;c<255;c++)r[c]=o,e[o]=c,o<<=1,o&256&&(o^=285);for(let c=255;c<512;c++)r[c]=r[c-255]})(),Wl.log=function(o){if(o<1)throw new Error("log("+o+")");return e[o]},Wl.exp=function(o){return r[o]},Wl.mul=function(o,c){return o===0||c===0?0:r[e[o]+e[c]]},Wl}var hx;function sR(){return hx||(hx=1,(function(r){const e=iR();r.mul=function(o,c){const u=new Uint8Array(o.length+c.length-1);for(let p=0;p<o.length;p++)for(let x=0;x<c.length;x++)u[p+x]^=e.mul(o[p],c[x]);return u},r.mod=function(o,c){let u=new Uint8Array(o);for(;u.length-c.length>=0;){const p=u[0];for(let b=0;b<c.length;b++)u[b]^=e.mul(c[b],p);let x=0;for(;x<u.length&&u[x]===0;)x++;u=u.slice(x)}return u},r.generateECPolynomial=function(o){let c=new Uint8Array([1]);for(let u=0;u<o;u++)c=r.mul(c,new Uint8Array([1,e.exp(u)]));return c}})(Uf)),Uf}var zf,fx;function oR(){if(fx)return zf;fx=1;const r=sR();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(o){this.degree=o,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const c=new Uint8Array(o.length+this.degree);c.set(o);const u=r.mod(c,this.genPoly),p=this.degree-u.length;if(p>0){const x=new Uint8Array(this.degree);return x.set(u,p),x}return u},zf=e,zf}var Vf={},Wf={},Hf={},gx;function b2(){return gx||(gx=1,Hf.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Hf}var Di={},px;function C2(){if(px)return Di;px=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;Di.KANJI=new RegExp(n,"g"),Di.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Di.BYTE=new RegExp(o,"g"),Di.NUMERIC=new RegExp(r,"g"),Di.ALPHANUMERIC=new RegExp(e,"g");const c=new RegExp("^"+n+"$"),u=new RegExp("^"+r+"$"),p=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Di.testKanji=function(b){return c.test(b)},Di.testNumeric=function(b){return u.test(b)},Di.testAlphanumeric=function(b){return p.test(b)},Di}var mx;function Wo(){return mx||(mx=1,(function(r){const e=b2(),n=C2();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(u,p){if(!u.ccBits)throw new Error("Invalid mode: "+u);if(!e.isValid(p))throw new Error("Invalid version: "+p);return p>=1&&p<10?u.ccBits[0]:p<27?u.ccBits[1]:u.ccBits[2]},r.getBestModeForData=function(u){return n.testNumeric(u)?r.NUMERIC:n.testAlphanumeric(u)?r.ALPHANUMERIC:n.testKanji(u)?r.KANJI:r.BYTE},r.toString=function(u){if(u&&u.id)return u.id;throw new Error("Invalid mode")},r.isValid=function(u){return u&&u.bit&&u.ccBits};function o(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+c)}}r.from=function(u,p){if(r.isValid(u))return u;try{return o(u)}catch{return p}}})(Wf)),Wf}var xx;function aR(){return xx||(xx=1,(function(r){const e=Vo(),n=v2(),o=E1(),c=Wo(),u=b2(),p=7973,x=e.getBCHDigit(p);function b(k,T,D){for(let O=1;O<=40;O++)if(T<=r.getCapacity(O,D,k))return O}function y(k,T){return c.getCharCountIndicator(k,T)+4}function A(k,T){let D=0;return k.forEach(function(O){const L=y(O.mode,T);D+=L+O.getBitsLength()}),D}function _(k,T){for(let D=1;D<=40;D++)if(A(k,D)<=r.getCapacity(D,T,c.MIXED))return D}r.from=function(T,D){return u.isValid(T)?parseInt(T,10):D},r.getCapacity=function(T,D,O){if(!u.isValid(T))throw new Error("Invalid QR Code version");typeof O>"u"&&(O=c.BYTE);const L=e.getSymbolTotalCodewords(T),U=n.getTotalCodewordsCount(T,D),z=(L-U)*8;if(O===c.MIXED)return z;const F=z-y(O,T);switch(O){case c.NUMERIC:return Math.floor(F/10*3);case c.ALPHANUMERIC:return Math.floor(F/11*2);case c.KANJI:return Math.floor(F/13);case c.BYTE:default:return Math.floor(F/8)}},r.getBestVersionForData=function(T,D){let O;const L=o.from(D,o.M);if(Array.isArray(T)){if(T.length>1)return _(T,L);if(T.length===0)return 1;O=T[0]}else O=T;return b(O.mode,O.getLength(),L)},r.getEncodedBits=function(T){if(!u.isValid(T)||T<7)throw new Error("Invalid QR Code version");let D=T<<12;for(;e.getBCHDigit(D)-x>=0;)D^=p<<e.getBCHDigit(D)-x;return T<<12|D}})(Vf)),Vf}var $f={},wx;function lR(){if(wx)return $f;wx=1;const r=Vo(),e=1335,n=21522,o=r.getBCHDigit(e);return $f.getEncodedBits=function(u,p){const x=u.bit<<3|p;let b=x<<10;for(;r.getBCHDigit(b)-o>=0;)b^=e<<r.getBCHDigit(b)-o;return(x<<10|b)^n},$f}var Gf={},qf,yx;function cR(){if(yx)return qf;yx=1;const r=Wo();function e(n){this.mode=r.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(o){let c,u,p;for(c=0;c+3<=this.data.length;c+=3)u=this.data.substr(c,3),p=parseInt(u,10),o.put(p,10);const x=this.data.length-c;x>0&&(u=this.data.substr(c),p=parseInt(u,10),o.put(p,x*3+1))},qf=e,qf}var Xf,vx;function uR(){if(vx)return Xf;vx=1;const r=Wo(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(o){this.mode=r.ALPHANUMERIC,this.data=o}return n.getBitsLength=function(c){return 11*Math.floor(c/2)+6*(c%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(c){let u;for(u=0;u+2<=this.data.length;u+=2){let p=e.indexOf(this.data[u])*45;p+=e.indexOf(this.data[u+1]),c.put(p,11)}this.data.length%2&&c.put(e.indexOf(this.data[u]),6)},Xf=n,Xf}var Yf,bx;function dR(){if(bx)return Yf;bx=1;const r=Wo();function e(n){this.mode=r.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(o){return o*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let o=0,c=this.data.length;o<c;o++)n.put(this.data[o],8)},Yf=e,Yf}var Kf,Cx;function hR(){if(Cx)return Kf;Cx=1;const r=Wo(),e=Vo();function n(o){this.mode=r.KANJI,this.data=o}return n.getBitsLength=function(c){return c*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(o){let c;for(c=0;c<this.data.length;c++){let u=e.toSJIS(this.data[c]);if(u>=33088&&u<=40956)u-=33088;else if(u>=57408&&u<=60351)u-=49472;else throw new Error("Invalid SJIS character: "+this.data[c]+`
Make sure your charset is UTF-8`);u=(u>>>8&255)*192+(u&255),o.put(u,13)}},Kf=n,Kf}var Zf={exports:{}},Ex;function fR(){return Ex||(Ex=1,(function(r){var e={single_source_shortest_paths:function(n,o,c){var u={},p={};p[o]=0;var x=e.PriorityQueue.make();x.push(o,0);for(var b,y,A,_,k,T,D,O,L;!x.empty();){b=x.pop(),y=b.value,_=b.cost,k=n[y]||{};for(A in k)k.hasOwnProperty(A)&&(T=k[A],D=_+T,O=p[A],L=typeof p[A]>"u",(L||O>D)&&(p[A]=D,x.push(A,D),u[A]=y))}if(typeof c<"u"&&typeof p[c]>"u"){var U=["Could not find a path from ",o," to ",c,"."].join("");throw new Error(U)}return u},extract_shortest_path_from_predecessor_list:function(n,o){for(var c=[],u=o;u;)c.push(u),n[u],u=n[u];return c.reverse(),c},find_path:function(n,o,c){var u=e.single_source_shortest_paths(n,o,c);return e.extract_shortest_path_from_predecessor_list(u,c)},PriorityQueue:{make:function(n){var o=e.PriorityQueue,c={},u;n=n||{};for(u in o)o.hasOwnProperty(u)&&(c[u]=o[u]);return c.queue=[],c.sorter=n.sorter||o.default_sorter,c},default_sorter:function(n,o){return n.cost-o.cost},push:function(n,o){var c={value:n,cost:o};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(Zf)),Zf.exports}var Sx;function gR(){return Sx||(Sx=1,(function(r){const e=Wo(),n=cR(),o=uR(),c=dR(),u=hR(),p=C2(),x=Vo(),b=fR();function y(U){return unescape(encodeURIComponent(U)).length}function A(U,z,F){const $=[];let se;for(;(se=U.exec(F))!==null;)$.push({data:se[0],index:se.index,mode:z,length:se[0].length});return $}function _(U){const z=A(p.NUMERIC,e.NUMERIC,U),F=A(p.ALPHANUMERIC,e.ALPHANUMERIC,U);let $,se;return x.isKanjiModeEnabled()?($=A(p.BYTE,e.BYTE,U),se=A(p.KANJI,e.KANJI,U)):($=A(p.BYTE_KANJI,e.BYTE,U),se=[]),z.concat(F,$,se).sort(function(V,X){return V.index-X.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function k(U,z){switch(z){case e.NUMERIC:return n.getBitsLength(U);case e.ALPHANUMERIC:return o.getBitsLength(U);case e.KANJI:return u.getBitsLength(U);case e.BYTE:return c.getBitsLength(U)}}function T(U){return U.reduce(function(z,F){const $=z.length-1>=0?z[z.length-1]:null;return $&&$.mode===F.mode?(z[z.length-1].data+=F.data,z):(z.push(F),z)},[])}function D(U){const z=[];for(let F=0;F<U.length;F++){const $=U[F];switch($.mode){case e.NUMERIC:z.push([$,{data:$.data,mode:e.ALPHANUMERIC,length:$.length},{data:$.data,mode:e.BYTE,length:$.length}]);break;case e.ALPHANUMERIC:z.push([$,{data:$.data,mode:e.BYTE,length:$.length}]);break;case e.KANJI:z.push([$,{data:$.data,mode:e.BYTE,length:y($.data)}]);break;case e.BYTE:z.push([{data:$.data,mode:e.BYTE,length:y($.data)}])}}return z}function O(U,z){const F={},$={start:{}};let se=["start"];for(let Y=0;Y<U.length;Y++){const V=U[Y],X=[];for(let W=0;W<V.length;W++){const ye=V[W],be=""+Y+W;X.push(be),F[be]={node:ye,lastCount:0},$[be]={};for(let de=0;de<se.length;de++){const ve=se[de];F[ve]&&F[ve].node.mode===ye.mode?($[ve][be]=k(F[ve].lastCount+ye.length,ye.mode)-k(F[ve].lastCount,ye.mode),F[ve].lastCount+=ye.length):(F[ve]&&(F[ve].lastCount=ye.length),$[ve][be]=k(ye.length,ye.mode)+4+e.getCharCountIndicator(ye.mode,z))}}se=X}for(let Y=0;Y<se.length;Y++)$[se[Y]].end=0;return{map:$,table:F}}function L(U,z){let F;const $=e.getBestModeForData(U);if(F=e.from(z,$),F!==e.BYTE&&F.bit<$.bit)throw new Error('"'+U+'" cannot be encoded with mode '+e.toString(F)+`.
 Suggested mode is: `+e.toString($));switch(F===e.KANJI&&!x.isKanjiModeEnabled()&&(F=e.BYTE),F){case e.NUMERIC:return new n(U);case e.ALPHANUMERIC:return new o(U);case e.KANJI:return new u(U);case e.BYTE:return new c(U)}}r.fromArray=function(z){return z.reduce(function(F,$){return typeof $=="string"?F.push(L($,null)):$.data&&F.push(L($.data,$.mode)),F},[])},r.fromString=function(z,F){const $=_(z,x.isKanjiModeEnabled()),se=D($),Y=O(se,F),V=b.find_path(Y.map,"start","end"),X=[];for(let W=1;W<V.length-1;W++)X.push(Y.table[V[W]].node);return r.fromArray(T(X))},r.rawSplit=function(z){return r.fromArray(_(z,x.isKanjiModeEnabled()))}})(Gf)),Gf}var Ax;function pR(){if(Ax)return Pf;Ax=1;const r=Vo(),e=E1(),n=J8(),o=eR(),c=tR(),u=nR(),p=rR(),x=v2(),b=oR(),y=aR(),A=lR(),_=Wo(),k=gR();function T(Y,V){const X=Y.size,W=u.getPositions(V);for(let ye=0;ye<W.length;ye++){const be=W[ye][0],de=W[ye][1];for(let ve=-1;ve<=7;ve++)if(!(be+ve<=-1||X<=be+ve))for(let Ce=-1;Ce<=7;Ce++)de+Ce<=-1||X<=de+Ce||(ve>=0&&ve<=6&&(Ce===0||Ce===6)||Ce>=0&&Ce<=6&&(ve===0||ve===6)||ve>=2&&ve<=4&&Ce>=2&&Ce<=4?Y.set(be+ve,de+Ce,!0,!0):Y.set(be+ve,de+Ce,!1,!0))}}function D(Y){const V=Y.size;for(let X=8;X<V-8;X++){const W=X%2===0;Y.set(X,6,W,!0),Y.set(6,X,W,!0)}}function O(Y,V){const X=c.getPositions(V);for(let W=0;W<X.length;W++){const ye=X[W][0],be=X[W][1];for(let de=-2;de<=2;de++)for(let ve=-2;ve<=2;ve++)de===-2||de===2||ve===-2||ve===2||de===0&&ve===0?Y.set(ye+de,be+ve,!0,!0):Y.set(ye+de,be+ve,!1,!0)}}function L(Y,V){const X=Y.size,W=y.getEncodedBits(V);let ye,be,de;for(let ve=0;ve<18;ve++)ye=Math.floor(ve/3),be=ve%3+X-8-3,de=(W>>ve&1)===1,Y.set(ye,be,de,!0),Y.set(be,ye,de,!0)}function U(Y,V,X){const W=Y.size,ye=A.getEncodedBits(V,X);let be,de;for(be=0;be<15;be++)de=(ye>>be&1)===1,be<6?Y.set(be,8,de,!0):be<8?Y.set(be+1,8,de,!0):Y.set(W-15+be,8,de,!0),be<8?Y.set(8,W-be-1,de,!0):be<9?Y.set(8,15-be-1+1,de,!0):Y.set(8,15-be-1,de,!0);Y.set(W-8,8,1,!0)}function z(Y,V){const X=Y.size;let W=-1,ye=X-1,be=7,de=0;for(let ve=X-1;ve>0;ve-=2)for(ve===6&&ve--;;){for(let Ce=0;Ce<2;Ce++)if(!Y.isReserved(ye,ve-Ce)){let ie=!1;de<V.length&&(ie=(V[de]>>>be&1)===1),Y.set(ye,ve-Ce,ie),be--,be===-1&&(de++,be=7)}if(ye+=W,ye<0||X<=ye){ye-=W,W=-W;break}}}function F(Y,V,X){const W=new n;X.forEach(function(Ce){W.put(Ce.mode.bit,4),W.put(Ce.getLength(),_.getCharCountIndicator(Ce.mode,Y)),Ce.write(W)});const ye=r.getSymbolTotalCodewords(Y),be=x.getTotalCodewordsCount(Y,V),de=(ye-be)*8;for(W.getLengthInBits()+4<=de&&W.put(0,4);W.getLengthInBits()%8!==0;)W.putBit(0);const ve=(de-W.getLengthInBits())/8;for(let Ce=0;Ce<ve;Ce++)W.put(Ce%2?17:236,8);return $(W,Y,V)}function $(Y,V,X){const W=r.getSymbolTotalCodewords(V),ye=x.getTotalCodewordsCount(V,X),be=W-ye,de=x.getBlocksCount(V,X),ve=W%de,Ce=de-ve,ie=Math.floor(W/de),ce=Math.floor(be/de),ge=ce+1,te=ie-ce,re=new b(te);let fe=0;const K=new Array(de),ue=new Array(de);let Ae=0;const Te=new Uint8Array(Y.buffer);for(let Le=0;Le<de;Le++){const Xe=Le<Ce?ce:ge;K[Le]=Te.slice(fe,fe+Xe),ue[Le]=re.encode(K[Le]),fe+=Xe,Ae=Math.max(Ae,Xe)}const Fe=new Uint8Array(W);let ee=0,pe,Ee;for(pe=0;pe<Ae;pe++)for(Ee=0;Ee<de;Ee++)pe<K[Ee].length&&(Fe[ee++]=K[Ee][pe]);for(pe=0;pe<te;pe++)for(Ee=0;Ee<de;Ee++)Fe[ee++]=ue[Ee][pe];return Fe}function se(Y,V,X,W){let ye;if(Array.isArray(Y))ye=k.fromArray(Y);else if(typeof Y=="string"){let ie=V;if(!ie){const ce=k.rawSplit(Y);ie=y.getBestVersionForData(ce,X)}ye=k.fromString(Y,ie||40)}else throw new Error("Invalid data");const be=y.getBestVersionForData(ye,X);if(!be)throw new Error("The amount of data is too big to be stored in a QR Code");if(!V)V=be;else if(V<be)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+be+`.
`);const de=F(V,X,ye),ve=r.getSymbolSize(V),Ce=new o(ve);return T(Ce,V),D(Ce),O(Ce,V),U(Ce,X,0),V>=7&&L(Ce,V),z(Ce,de),isNaN(W)&&(W=p.getBestMask(Ce,U.bind(null,Ce,X))),p.applyMask(W,Ce),U(Ce,X,W),{modules:Ce,version:V,errorCorrectionLevel:X,maskPattern:W,segments:ye}}return Pf.create=function(V,X){if(typeof V>"u"||V==="")throw new Error("No input text");let W=e.M,ye,be;return typeof X<"u"&&(W=e.from(X.errorCorrectionLevel,e.M),ye=y.from(X.version),be=p.from(X.maskPattern),X.toSJISFunc&&r.setToSJISFunction(X.toSJISFunc)),se(V,ye,W,be)},Pf}var Qf={},Jf={},_x;function E2(){return _x||(_x=1,(function(r){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let o=n.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+n);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(u){return[u,u]}))),o.length===6&&o.push("F","F");const c=parseInt(o.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+o.slice(0,6).join("")}}r.getOptions=function(o){o||(o={}),o.color||(o.color={});const c=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,u=o.width&&o.width>=21?o.width:void 0,p=o.scale||4;return{width:u,scale:u?4:p,margin:c,color:{dark:e(o.color.dark||"#000000ff"),light:e(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},r.getScale=function(o,c){return c.width&&c.width>=o+c.margin*2?c.width/(o+c.margin*2):c.scale},r.getImageWidth=function(o,c){const u=r.getScale(o,c);return Math.floor((o+c.margin*2)*u)},r.qrToImageData=function(o,c,u){const p=c.modules.size,x=c.modules.data,b=r.getScale(p,u),y=Math.floor((p+u.margin*2)*b),A=u.margin*b,_=[u.color.light,u.color.dark];for(let k=0;k<y;k++)for(let T=0;T<y;T++){let D=(k*y+T)*4,O=u.color.light;if(k>=A&&T>=A&&k<y-A&&T<y-A){const L=Math.floor((k-A)/b),U=Math.floor((T-A)/b);O=_[x[L*p+U]?1:0]}o[D++]=O.r,o[D++]=O.g,o[D++]=O.b,o[D]=O.a}}})(Jf)),Jf}var Nx;function mR(){return Nx||(Nx=1,(function(r){const e=E2();function n(c,u,p){c.clearRect(0,0,u.width,u.height),u.style||(u.style={}),u.height=p,u.width=p,u.style.height=p+"px",u.style.width=p+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(u,p,x){let b=x,y=p;typeof b>"u"&&(!p||!p.getContext)&&(b=p,p=void 0),p||(y=o()),b=e.getOptions(b);const A=e.getImageWidth(u.modules.size,b),_=y.getContext("2d"),k=_.createImageData(A,A);return e.qrToImageData(k.data,u,b),n(_,y,A),_.putImageData(k,0,0),y},r.renderToDataURL=function(u,p,x){let b=x;typeof b>"u"&&(!p||!p.getContext)&&(b=p,p=void 0),b||(b={});const y=r.render(u,p,b),A=b.type||"image/png",_=b.rendererOpts||{};return y.toDataURL(A,_.quality)}})(Qf)),Qf}var e0={},Ix;function xR(){if(Ix)return e0;Ix=1;const r=E2();function e(c,u){const p=c.a/255,x=u+'="'+c.hex+'"';return p<1?x+" "+u+'-opacity="'+p.toFixed(2).slice(1)+'"':x}function n(c,u,p){let x=c+u;return typeof p<"u"&&(x+=" "+p),x}function o(c,u,p){let x="",b=0,y=!1,A=0;for(let _=0;_<c.length;_++){const k=Math.floor(_%u),T=Math.floor(_/u);!k&&!y&&(y=!0),c[_]?(A++,_>0&&k>0&&c[_-1]||(x+=y?n("M",k+p,.5+T+p):n("m",b,0),b=0,y=!1),k+1<u&&c[_+1]||(x+=n("h",A),A=0)):b++}return x}return e0.render=function(u,p,x){const b=r.getOptions(p),y=u.modules.size,A=u.modules.data,_=y+b.margin*2,k=b.color.light.a?"<path "+e(b.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",T="<path "+e(b.color.dark,"stroke")+' d="'+o(A,y,b.margin)+'"/>',D='viewBox="0 0 '+_+" "+_+'"',L='<svg xmlns="http://www.w3.org/2000/svg" '+(b.width?'width="'+b.width+'" height="'+b.width+'" ':"")+D+' shape-rendering="crispEdges">'+k+T+`</svg>
`;return typeof x=="function"&&x(null,L),L},e0}var Tx;function wR(){if(Tx)return _a;Tx=1;const r=Q8(),e=pR(),n=mR(),o=xR();function c(u,p,x,b,y){const A=[].slice.call(arguments,1),_=A.length,k=typeof A[_-1]=="function";if(!k&&!r())throw new Error("Callback required as last argument");if(k){if(_<2)throw new Error("Too few arguments provided");_===2?(y=x,x=p,p=b=void 0):_===3&&(p.getContext&&typeof y>"u"?(y=b,b=void 0):(y=b,b=x,x=p,p=void 0))}else{if(_<1)throw new Error("Too few arguments provided");return _===1?(x=p,p=b=void 0):_===2&&!p.getContext&&(b=x,x=p,p=void 0),new Promise(function(T,D){try{const O=e.create(x,b);T(u(O,p,b))}catch(O){D(O)}})}try{const T=e.create(x,b);y(null,u(T,p,b))}catch(T){y(T)}}return _a.create=e.create,_a.toCanvas=c.bind(null,n.render),_a.toDataURL=c.bind(null,n.renderToDataURL),_a.toString=c.bind(null,function(u,p,x){return o.render(u,x)}),_a}var yR=wR();const S2=sc(yR);function vR({agendaId:r}){const[e,n]=R.useState(""),[o,c]=R.useState(!1),[u,p]=R.useState(!1),[x,b]=R.useState(!1),[y,A]=R.useState(null),[_,k]=R.useState(null),[T,D]=R.useState([]),[O,L]=R.useState([]),[U,z]=R.useState([]),[F,$]=R.useState(!0),[se,Y]=R.useState(!1),[V,X]=R.useState(!1),[W,ye]=R.useState(!1),[be,de]=R.useState(null),[ve,Ce]=R.useState(!1),[ie,ce]=R.useState(""),[ge,te]=R.useState(new Date),[re,fe]=R.useState(!1),K=R.useRef(null);R.useEffect(()=>((async()=>{console.log("=".repeat(80)),console.log("[STANDALONE CHECK-IN] Page loaded for agenda ID:",r),console.log("[STANDALONE CHECK-IN] Initializing with strict event isolation..."),console.log("=".repeat(80)),await ue(),await Ae()})(),()=>{tt()}),[r]),R.useEffect(()=>{y&&Ae()},[y?.id]),R.useEffect(()=>{const je=st=>{console.log("[AUTO-REFRESH] Storage event detected:",st.key),(st.key==="event_participants"||st.key==="event_agenda")&&(console.log("[AUTO-REFRESH] Data changed, refreshing with event scope..."),y?.eventId&&console.log("[SECURITY] Auto-refresh scoped to event:",y.eventId),Ae(),st.key==="event_agenda"&&ue())},Me=st=>{console.log("[AUTO-REFRESH] Custom participantsUpdated event detected"),y?.eventId&&console.log("[SECURITY] Custom event refresh scoped to event:",y.eventId),Ae()};window.addEventListener("storage",je),window.addEventListener("participantsUpdated",Me);const Je=setInterval(()=>{console.log("[AUTO-REFRESH] Polling for updates..."),y?.eventId&&console.log("[SECURITY] Poll refresh scoped to event:",y.eventId),Ae()},3e3);return()=>{window.removeEventListener("storage",je),window.removeEventListener("participantsUpdated",Me),clearInterval(Je)}},[y?.eventId]),R.useEffect(()=>{if(y&&T.length>0){const je=T.filter(Me=>Me.attendance&&Me.attendance.some(Je=>Je.agendaItem===y.title));z(je)}},[y,T]);const ue=async()=>{$(!0);try{console.log("[SECURITY] Fetching agenda item by ID:",r);const Me=us().find(st=>st.id===r);if(!Me){console.error("[SECURITY] Agenda item not found:",r),de("Agenda item not found");return}if(!Me.eventId){console.error("[SECURITY] CRITICAL: Agenda item missing eventId!",Me),de("Invalid agenda configuration - missing event association");return}console.log("[SECURITY] Agenda item loaded. Event ID:",Me.eventId),A(Me);const Je=Br(Me.eventId);Je?(console.log("[SECURITY] Event details loaded:",Je.name),k(Je)):console.warn("[SECURITY] Event not found for eventId:",Me.eventId)}catch(je){console.error("[SECURITY] Error fetching agenda:",je),de("Failed to load agenda")}finally{$(!1)}},Ae=async()=>{try{if(!y){console.warn("[SECURITY] Cannot fetch participants - agenda not loaded yet");return}if(!y.eventId){console.error("[SECURITY] CRITICAL: Cannot fetch participants - agenda missing eventId!"),de("Security error: Invalid event configuration");return}console.log("[SECURITY] Fetching participants ONLY for event:",y.eventId);const je=br(y.eventId);console.log("[SECURITY] Successfully filtered participants by eventId:",{eventId:y.eventId,participantCount:je.length,agendaTitle:y.title});const Me=je.filter(st=>st.eventId!==y.eventId);Me.length>0?console.error("[SECURITY] CRITICAL: Found participants from other events!",Me):console.log("[SECURITY]  All participants verified to belong to event:",y.eventId),D(je),te(new Date);const Je=je.filter(st=>st.attendance&&st.attendance.some(ht=>ht.agendaItem===y.title));console.log("[SECURITY] Checked-in count for this session:",Je.length),console.log("[SECURITY] Data isolation summary:",{eventId:y.eventId,eventName:_?.name||"Loading...",sessionTitle:y.title,totalParticipantsInEvent:je.length,checkedInToThisSession:Je.length,dataIsolationVerified:Me.length===0}),console.log("=".repeat(80)),z(Je)}catch(je){console.error("[SECURITY] Error fetching participants:",je),de("Failed to load participants")}},Te=async je=>{if(!(!_||!y))try{const Me=y1(_.id),Je=localStorage.getItem(`badge_canvas_${_.id}`),st=Je?JSON.parse(Je):null,ht=await S2.toDataURL(je.id,{width:300,margin:1}),dr=window.open("","_blank");if(!dr){alert("Please allow popups to print badges");return}const ri={CR80:{width:85.6,height:53.98},A6:{width:105,height:148},A7:{width:74,height:105},custom:{width:Me.customWidth||100,height:Me.customHeight||150}}[Me.size],Hi=ri.width,Kn=ri.height;let zn="",Dn="";if(st&&st.length>0){const Fr=Me.backgroundImageUrl?`background-image: url(${Me.backgroundImageUrl});
             background-size: ${Me.backgroundImageFit||"cover"};
             background-position: center;
             background-repeat: no-repeat;`:"";Dn=`
          .badge {
            width: ${Hi}mm;
            height: ${Kn}mm;
            background-color: ${Me.backgroundColor};
            ${Fr}
            box-sizing: border-box;
            position: relative;
            border: 1px solid #ddd;
          }
          .badge-component {
            position: absolute;
            overflow: hidden;
          }
        `,st.filter(St=>St.enabled).forEach(St=>{const It=`
              left: ${St.x}%;
              top: ${St.y}%;
              width: ${St.width}%;
              height: ${St.height}%;
              font-size: ${St.fontSize||16}px;
              font-family: ${St.fontFamily||"sans-serif"};
              font-weight: ${St.fontWeight||"normal"};
              font-style: ${St.fontStyle||"normal"};
              text-align: ${St.textAlign||"left"};
              color: ${St.color||"#000000"};
              display: flex;
              align-items: center;
            `;if(St.type==="eventName")zn+=`<div class="badge-component" style="${It}">${_.name}</div>`;else if(St.type==="field"&&St.fieldName){const Vn=St.fieldName.startsWith("custom_")?je.customData?.[St.fieldName]:je[St.fieldName];zn+=`
                <div class="badge-component" style="${It}">
                  <div style="width: 100%;">
                    <div style="opacity: 0.6; font-size: 0.7em;">${St.label}</div>
                    <div>${Vn||"-"}</div>
                  </div>
                </div>
              `}else if(St.type==="qrcode")zn+=`
                <div class="badge-component" style="${It} justify-content: center;">
                  <img src="${ht}" style="width: 100%; height: 100%; object-fit: contain;" />
                </div>
              `;else if(St.type==="logo"){const Vn=Me.logoUrl||_.branding?.logoUrl;Vn&&(zn+=`
                  <div class="badge-component" style="${It} justify-content: center;">
                    <img src="${Vn}" style="width: 100%; height: 100%; object-fit: contain;" />
                  </div>
                `)}else St.type==="customText"&&(zn+=`<div class="badge-component" style="${It}">${St.customText||"Custom Text"}</div>`)})}else{const Fr={small:{title:"14px",text:"12px"},medium:{title:"18px",text:"14px"},large:{title:"24px",text:"18px"}},St={small:"60px",medium:"80px",large:"100px"};Dn=`
          .badge {
            width: ${Hi}mm;
            height: ${Kn}mm;
            background-color: ${Me.backgroundColor};
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: ${Me.alignment==="left"?"flex-start":Me.alignment==="right"?"flex-end":"center"};
            text-align: ${Me.alignment};
            border: 1px solid #ddd;
          }
        `,Me.components.filter(It=>It.enabled).sort((It,Vn)=>It.order-Vn.order).forEach(It=>{if(It.type==="eventName")zn+=`<div style="font-size: ${Fr[Me.fontSize].title}; font-weight: bold; margin: 8px 0;">${_.name}</div>`;else if(It.type==="field"&&It.fieldName){const Vn=It.fieldName.startsWith("custom_")?je.customData?.[It.fieldName]:je[It.fieldName];zn+=`
                <div style="margin: 8px 0;">
                  <div style="font-size: ${Fr[Me.fontSize].text}; opacity: 0.7;">${It.label}</div>
                  <div style="font-size: ${Fr[Me.fontSize].text};">${Vn||"-"}</div>
                </div>
              `}else It.type==="qrcode"?zn+=`<img src="${ht}" style="width: ${St[Me.qrCodeSize]}; height: ${St[Me.qrCodeSize]}; margin: 8px 0;" />`:It.type==="logo"&&Me.logoUrl&&(zn+=`<img src="${Me.logoUrl}" style="max-width: 100px; max-height: 40px; object-fit: contain; margin: 8px 0;" />`)})}dr.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Badge - ${je.name}</title>
            <style>
              @media print {
                @page {
                  size: ${Hi}mm ${Kn}mm;
                  margin: 0;
                }
                body {
                  margin: 0;
                  padding: 0;
                }
              }
              body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
              }
              ${Dn}
            </style>
          </head>
          <body>
            <div class="badge">
              ${zn}
            </div>
            <script>
              window.onload = () => {
                setTimeout(() => {
                  window.print();
                  window.close();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `),dr.document.close()}catch(Me){console.error("Error printing badge:",Me),alert("Failed to print badge")}},Fe=()=>{if(!_)return;const je=new URL(window.location.origin+window.location.pathname);je.searchParams.set("designer",_.id),window.open(je.toString(),"_blank","noopener")},ee=je=>{if(n(je),!je.trim()){L([]);return}const Me=je.toLowerCase(),Je=T.filter(st=>st.name?.toLowerCase().includes(Me)||st.email?.toLowerCase().includes(Me)||st.company?.toLowerCase().includes(Me));console.log("Search results:",Je),L(Je)},pe=()=>{c(!0),n(""),L([])},Ee=()=>{b(!0),setTimeout(()=>Xe(),300)},Le=()=>{tt(),b(!1)},Xe=async()=>{if(se){console.log("[SCANNER] Camera already active");return}console.log("[SCANNER] Starting camera...");try{K.current||(console.log("[SCANNER] Initializing Html5Qrcode"),K.current=new Z8("qr-reader-standalone"));const je={fps:10,qrbox:{width:250,height:250},aspectRatio:1};console.log("[SCANNER] Config:",je),await K.current.start({facingMode:"environment"},je,async Me=>{console.log("[SCANNER] QR Code detected:",Me),X(!0),await tt(),setTimeout(async()=>{X(!1),await vt(Me)},1500)},Me=>{Me&&!Me.includes("NotFoundException")&&console.log("[SCANNER] Scan error:",Me)}),Y(!0),console.log("[SCANNER] Camera started successfully")}catch(je){console.error("[SCANNER] Error starting camera:",je),alert("Failed to start camera. Please check camera permissions and try again."),Y(!1)}},tt=async()=>{if(K.current){try{await K.current.getState()===2&&await K.current.stop()}catch(je){console.error("Error stopping camera:",je)}Y(!1)}},vt=async je=>{if(!y){console.error("[SECURITY] Cannot check in - agenda not loaded");return}if(!y.eventId){console.error("[SECURITY] CRITICAL: Cannot check in - agenda missing eventId!"),alert("Security error: Invalid event configuration");return}ye(!0);try{const Me=je.trim();console.log("[SECURITY] Attempting check-in for participant:",Me),console.log("[SECURITY] Event context:",{eventId:y.eventId,agendaTitle:y.title,agendaId:y.id});const Je=RT(Me);if(console.log("[SECURITY] Found participant:",Je),!Je)throw console.error("[SECURITY] Participant not found. Searched for ID:",Me),console.log("[SECURITY] Available participant IDs in this event:",T.map(ht=>ht.id)),new Error(`Participant not found with ID: ${Me}`);if(Je.eventId!==y.eventId)throw console.error("[SECURITY] CRITICAL: Attempted cross-event check-in!",{participantEventId:Je.eventId,agendaEventId:y.eventId,participantId:Me,participantName:Je.name}),new Error("Security violation: Participant does not belong to this event");console.log("[SECURITY] Security check passed - participant belongs to event:",y.eventId),Je.attendance?.some(ht=>ht.agendaItem===y.title)?(ce(`${Je.name} is already checked in!`),Ce(!0)):(console.log("[SECURITY] Recording attendance for participant in event:",y.eventId),kT(Me,y.title),ce(` Check-in successful for ${Je.name}`),Ce(!0),re&&setTimeout(()=>{Te(Je)},500)),await Ae(),setTimeout(()=>{b(!1),c(!1)},1500)}catch(Me){console.error("[LOCAL] Error recording attendance:",Me),alert(Me.message||"Failed to record attendance. Please try again.")}finally{ye(!1)}},nt=je=>je?new Date(je).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",on=je=>je?new Date(je).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"";return F?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 flex items-center justify-center",children:m.jsxs("div",{className:"text-center text-white",children:[m.jsx(Fi,{className:"h-12 w-12 animate-spin mx-auto mb-4"}),m.jsx("p",{className:"text-lg",children:"Loading check-in page..."})]})}):be||!y?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-400 via-red-500 to-red-600 flex items-center justify-center p-6",children:m.jsxs("div",{className:"text-center text-white max-w-md",children:[m.jsx(qu,{className:"h-16 w-16 mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl mb-2",children:"Security Error"}),m.jsx("p",{className:"text-lg opacity-90 mb-4",children:be||"Agenda not found"}),m.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-sm",children:m.jsx("p",{className:"opacity-90",children:"This check-in page requires proper event association. The session may have been deleted or is missing required configuration."})})]})}):y&&!y.eventId?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-400 via-orange-500 to-orange-600 flex items-center justify-center p-6",children:m.jsxs("div",{className:"text-center text-white max-w-md",children:[m.jsx(qu,{className:"h-16 w-16 mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl mb-2",children:"Configuration Error"}),m.jsx("p",{className:"text-lg opacity-90 mb-4",children:"This session is not associated with any event"}),m.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-sm",children:m.jsx("p",{className:"opacity-90",children:"Please contact the event administrator. This session needs to be properly configured with an event association before check-ins can be performed."})})]})}):m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 p-6",children:[_&&m.jsx("div",{className:"max-w-2xl mx-auto mb-4",children:m.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-white border border-white/30",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[m.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full animate-pulse"}),m.jsx("span",{className:"opacity-90",children:"Event:"}),m.jsx("span",{className:"font-semibold",children:_.name}),m.jsx("span",{className:"mx-2 opacity-50",children:""}),m.jsxs("span",{className:"text-xs opacity-75",children:["ID: ",_.id]})]})})}),m.jsxs("div",{className:"max-w-2xl mx-auto text-center text-white mb-12",children:[m.jsx("h1",{className:"text-4xl mb-4",children:y.title}),m.jsxs("p",{className:"text-lg opacity-90 mb-2",children:[nt(y.startTime),y.endTime&&` - ${on(y.endTime)}`]}),y.location&&m.jsx("p",{className:"text-base opacity-80",children:y.location})]}),m.jsx("div",{className:"max-w-md mx-auto mb-6",children:m.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(rS,{className:"h-4 w-4 text-white"}),m.jsx(Qe,{htmlFor:"auto-print",className:"text-white text-sm",children:"Auto-Print Badge on Check-In"})]}),m.jsx(m2,{id:"auto-print",checked:re,onCheckedChange:fe})]}),m.jsxs(qe,{variant:"outline",size:"sm",onClick:Fe,className:"w-full bg-white/10 hover:bg-white/20 text-white border-white/30",children:[m.jsx(hS,{className:"mr-2 h-4 w-4"}),"Design Badge Template"]})]})}),m.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[m.jsxs(qe,{onClick:pe,className:"w-full h-16 bg-gray-900 hover:bg-gray-800 text-white text-lg",size:"lg",children:[m.jsx(cw,{className:"mr-3 h-6 w-6"}),"Search"]}),m.jsxs(qe,{onClick:Ee,className:"w-full h-16 bg-gray-900 hover:bg-gray-800 text-white text-lg",size:"lg",children:[m.jsx(aw,{className:"mr-3 h-6 w-6"}),"QR Scan"]}),m.jsx("div",{className:"text-white text-center text-sm mt-6 space-y-2",children:m.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-4 py-3 border border-white/20",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[m.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full"}),m.jsx("div",{className:"opacity-75 text-xs",children:"Secure Event Scope Active"})]}),m.jsx("div",{className:"font-semibold",children:_?.name||"Loading..."}),m.jsxs("div",{className:"opacity-75 mt-2",children:["Total Registered: ",T.length," participants"]}),y?.eventId&&m.jsxs("div",{className:"text-xs opacity-50 mt-2 font-mono",children:["Event ID: ",y.eventId.substring(0,8),"..."]})]})}),m.jsxs(qe,{onClick:()=>p(!0),variant:"outline",className:"w-full h-16 bg-white/10 hover:bg-white/20 text-white border-white/30 text-lg backdrop-blur-sm",size:"lg",children:[m.jsx(mE,{className:"mr-3 h-6 w-6"}),"View Dashboard"]})]}),m.jsxs("div",{className:"max-w-2xl mx-auto mt-16 text-center text-white/70 text-sm space-y-2",children:[m.jsxs("p",{children:[" ",U.length," participants checked in"]}),m.jsxs("p",{className:"flex items-center justify-center gap-2 text-xs",children:[m.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Auto-updating  Last updated: ",ge.toLocaleTimeString()]})]}),m.jsx(Jr,{open:o,onOpenChange:c,children:m.jsxs(ei,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[m.jsx(yi,{children:m.jsx(vi,{children:"Search Participants"})}),m.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[m.jsx("div",{className:"flex gap-2",children:m.jsx(ut,{placeholder:"Search by name, email, or company...",value:e,onChange:je=>ee(je.target.value),autoFocus:!0})}),m.jsx("div",{className:"flex-1 overflow-y-auto border rounded-lg",children:O.length>0?m.jsxs(jo,{children:[m.jsx(Do,{children:m.jsxs(ur,{children:[m.jsx(kt,{children:"Name"}),m.jsx(kt,{children:"Company"}),m.jsx(kt,{children:"Status"}),m.jsx(kt,{className:"text-right",children:"Action"})]})}),m.jsx(Mo,{children:O.map(je=>{const Me=je.attendance?.some(Je=>Je.agendaItem===y.title);return m.jsxs(ur,{children:[m.jsx(Nt,{children:m.jsxs("div",{children:[m.jsx("div",{children:je.name}),m.jsx("div",{className:"text-sm text-muted-foreground",children:je.email})]})}),m.jsx(Nt,{children:je.company||"-"}),m.jsx(Nt,{children:Me?m.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[m.jsx(ko,{className:"h-4 w-4"}),"Checked In"]}):m.jsx("span",{className:"text-muted-foreground",children:"Not Checked In"})}),m.jsx(Nt,{className:"text-right",children:!Me&&m.jsx(qe,{size:"sm",onClick:()=>vt(je.id),disabled:W,children:W?m.jsx(Fi,{className:"h-4 w-4 animate-spin"}):"Check In"})})]},je.id)})})]}):m.jsx("div",{className:"text-center py-12 text-muted-foreground",children:e?m.jsxs("div",{children:[m.jsxs("p",{className:"mb-2",children:['No participants found matching "',e,'"']}),m.jsxs("p",{className:"text-sm",children:["Total participants: ",T.length]})]}):m.jsx("p",{children:"Start typing to search participants"})})})]})]})}),m.jsx(Jr,{open:x,onOpenChange:je=>!je&&Le(),children:m.jsxs(ei,{className:"max-w-lg",children:[m.jsx(yi,{children:m.jsx(vi,{children:"Scan QR Code"})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{id:"qr-reader-standalone",className:`${se?"block":"hidden"} rounded-lg overflow-hidden border-2 border-primary relative z-20`,style:{minHeight:"300px"}}),V&&m.jsx("div",{className:"absolute inset-0 bg-green-500/90 rounded-lg flex items-center justify-center z-50 animate-in fade-in",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 animate-in zoom-in duration-500",children:m.jsx(ko,{className:"w-16 h-16 text-green-500"})}),m.jsx("p",{className:"text-white text-xl",children:"QR Code Detected!"})]})}),se&&!V&&m.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64",children:m.jsxs("div",{className:"relative w-full h-full",children:[m.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-green-500 rounded-tl-lg"}),m.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-green-500 rounded-tr-lg"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-green-500 rounded-bl-lg"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-green-500 rounded-br-lg"})]})}),m.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:m.jsx("p",{className:"text-white bg-black/50 inline-block px-4 py-2 rounded-lg text-sm",children:"Position QR code within the frame"})})]}),!se&&!V&&m.jsxs("div",{className:"h-64 flex flex-col items-center justify-center bg-muted rounded-lg gap-3 p-4",children:[m.jsx(Up,{className:"h-12 w-12 text-muted-foreground opacity-30"}),m.jsx("p",{className:"text-muted-foreground text-sm",children:"Camera will start automatically"}),m.jsxs(qe,{onClick:Xe,variant:"default",size:"sm",children:[m.jsx(Up,{className:"mr-2 h-4 w-4"}),"Start Camera Manually"]})]})]}),m.jsxs(qe,{onClick:Le,variant:"outline",className:"w-full",children:[m.jsx(fd,{className:"mr-2 h-4 w-4"}),"Close"]})]})]})}),m.jsx(Jr,{open:u,onOpenChange:p,children:m.jsxs(ei,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[m.jsx(yi,{children:m.jsxs(vi,{children:["Check-In Dashboard - ",y.title]})}),m.jsxs("div",{className:"flex-1 overflow-y-auto",children:[_&&m.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[m.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-blue-700",children:"Event:"}),m.jsx("span",{className:"font-semibold text-blue-900",children:_.name}),m.jsx("span",{className:"mx-2 text-blue-400",children:""}),m.jsx("span",{className:"text-xs text-blue-600",children:"Isolated Data View"})]})}),m.jsx("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:m.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-3xl mb-1",children:U.length}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"Checked In"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-3xl mb-1",children:T.length}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Registered (This Event)"})]})]})}),U.length===0?m.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[m.jsx(ko,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),m.jsx("p",{children:"No participants checked in yet"})]}):m.jsx("div",{className:"border rounded-lg",children:m.jsxs(jo,{children:[m.jsx(Do,{children:m.jsxs(ur,{children:[m.jsx(kt,{children:"Name"}),m.jsx(kt,{children:"Email"}),m.jsx(kt,{children:"Company"}),m.jsx(kt,{children:"Position"}),m.jsx(kt,{children:"Check-In Time"})]})}),m.jsx(Mo,{children:U.map(je=>{const Me=je.attendance.find(Je=>Je.agendaItem===y.title);return m.jsxs(ur,{children:[m.jsx(Nt,{children:je.name}),m.jsx(Nt,{className:"text-sm",children:je.email}),m.jsx(Nt,{children:je.company||"-"}),m.jsx(Nt,{children:je.position||"-"}),m.jsx(Nt,{children:Me&&m.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[m.jsx(nw,{className:"h-3 w-3"}),new Date(Me.timestamp).toLocaleTimeString()]})})]},je.id)})})]})})]})]})}),m.jsx(Jr,{open:ve,onOpenChange:Ce,children:m.jsx(ei,{className:"max-w-md",children:m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-in zoom-in duration-500",children:m.jsx(ko,{className:"w-12 h-12 text-green-600"})}),m.jsx("h3",{className:"text-2xl mb-2",children:"Check-In Successful!"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:ie}),m.jsx(qe,{onClick:()=>Ce(!1),className:"mt-6",size:"lg",children:"Close"})]})})}),m.jsx("style",{children:`
      #qr-reader-standalone video, 
      #qr-reader-standalone canvas {
        width: 100% !important;
        height: auto !important;
        object-fit: cover; /* This makes the video cover the box nicely */
        min-height: 300px; /* Match your container's min-height */
      }
    `})]})}function bR({eventId:r}){const[e,n]=R.useState(null),[o,c]=R.useState(null),[u,p]=R.useState(!0),[x,b]=R.useState(!1),[y,A]=R.useState(null),[_,k]=R.useState(!1),[T,D]=R.useState({name:"",email:"",phone:"",company:"",position:"",customData:{}});R.useEffect(()=>{O()},[r]);const O=()=>{p(!0);try{const W=Br(r);if(!W){A("Event not found. Please check the registration link."),p(!1);return}n(W);const ye=w1(r);c(ye),console.log("[REGISTRATION] Loaded event:",W.name),console.log("[REGISTRATION] Branding settings:",ye),p(!1)}catch(W){console.error("[REGISTRATION] Error loading event:",W),A("Failed to load registration form. Please try again."),p(!1)}},L=(W,ye)=>{D(be=>({...be,[W]:ye}))},U=(W,ye)=>{D(be=>({...be,customData:{...be.customData,[W]:ye}}))},z=()=>{D({name:"",email:"",phone:"",company:"",position:"",customData:{}}),k(!1),A(null),window.scrollTo({top:0,behavior:"smooth"})},F=()=>{if(!T.name.trim())return A("Please enter your name"),!1;if(!T.email.trim())return A("Please enter your email"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email))return A("Please enter a valid email address"),!1;if(e?.customFields){for(const ye of e.customFields)if(ye.required&&!T.customData[ye.id])return A(`${ye.label} is required`),!1}return!0},$=async W=>{if(W.preventDefault(),A(null),!!F()){b(!0);try{const ye={id:m1(),eventId:r,name:T.name,email:T.email,phone:T.phone,company:T.company,position:T.position,registeredAt:new Date().toISOString(),attendance:[],customData:T.customData};s2(ye),console.log("[REGISTRATION] Participant registered:",ye.id),k(!0),window.dispatchEvent(new Event("participantsUpdated"))}catch(ye){console.error("[REGISTRATION] Error submitting form:",ye),A("Failed to submit registration. Please try again.")}finally{b(!1)}}};if(u)return m.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",style:{backgroundColor:"#f0f9ff"},children:m.jsx(wi,{className:"w-full max-w-2xl",children:m.jsx(Bi,{className:"py-12",children:m.jsxs("div",{className:"text-center",children:[m.jsx(Fi,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),m.jsx("p",{className:"text-muted-foreground",children:"Loading registration form..."})]})})})});if(y&&!e)return m.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",style:{backgroundColor:"#f0f9ff"},children:m.jsx(wi,{className:"w-full max-w-2xl",children:m.jsx(Bi,{className:"py-12",children:m.jsxs("div",{className:"text-center",children:[m.jsx(qu,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),m.jsx("h2",{className:"text-2xl mb-2",children:"Registration Unavailable"}),m.jsx("p",{className:"text-muted-foreground",children:y})]})})})});const se=e?.customFields?.sort((W,ye)=>W.order-ye.order)||[],Y=()=>{if(!o?.logoSize)return"h-16";switch(o.logoSize){case"small":return"h-12";case"medium":return"h-16";case"large":return"h-24";default:return"h-16"}},V=()=>{if(!o?.logoAlignment)return"justify-center";switch(o.logoAlignment){case"left":return"justify-start";case"center":return"justify-center";case"right":return"justify-end";default:return"justify-center"}},X=()=>{if(!o?.fontFamily)return"font-sans";switch(o.fontFamily){case"sans-serif":return"font-sans";case"serif":return"font-serif";case"monospace":return"font-mono";default:return"font-sans"}};return m.jsxs("div",{className:`min-h-screen py-12 px-6 ${X()}`,style:{backgroundColor:o?.backgroundColor||"#f0f9ff"},children:[m.jsxs("div",{className:"max-w-2xl mx-auto",children:[m.jsx(wi,{className:"mb-6",children:m.jsxs(Vs,{className:"text-center",children:[o?.logoUrl&&m.jsx("div",{className:`flex ${V()} mb-4`,children:m.jsx("img",{src:o.logoUrl,alt:"Event Logo",className:`${Y()} object-contain`})}),o?.customHeader&&m.jsx("p",{className:"text-lg mb-2",style:{color:o.primaryColor},children:o.customHeader}),m.jsx(Ws,{className:"text-3xl",children:e?.name}),m.jsx("div",{className:"text-muted-foreground text-base mt-2",children:m.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[e?.startDate&&m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Zl,{className:"h-4 w-4"}),m.jsx("span",{children:new Date(e.startDate).toLocaleDateString()})]}),e?.location&&m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(F0,{className:"h-4 w-4"}),m.jsx("span",{children:e.location})]})]})}),e?.description&&m.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:e.description})]})}),m.jsxs(wi,{children:[m.jsxs(Vs,{children:[m.jsx(Ws,{children:"Register Now"}),m.jsx(Wa,{children:"Please fill out the form below to register"})]}),m.jsxs(Bi,{children:[m.jsx("style",{children:`
              .registration-form label:has(+ input[required])::after,
              .registration-form label:has(+ textarea[required])::after,
              .registration-form label:has(+ select[required])::after {
                content: ' *';
                color: ${o?.primaryColor||"#dc2626"};
              }
            `}),m.jsxs("form",{onSubmit:$,className:"space-y-6 registration-form",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"BASIC INFORMATION"}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"name",children:"Full Name"}),m.jsx(ut,{id:"name",value:T.name,onChange:W=>L("name",W.target.value),placeholder:"Enter your full name",required:!0})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"email",children:"Email Address"}),m.jsx(ut,{id:"email",type:"email",value:T.email,onChange:W=>L("email",W.target.value),placeholder:"your.email@example.com",required:!0})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"phone",children:"Phone Number"}),m.jsx(ut,{id:"phone",type:"tel",value:T.phone,onChange:W=>L("phone",W.target.value),placeholder:"+1 (555) 000-0000"})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"company",children:"Company"}),m.jsx(ut,{id:"company",value:T.company,onChange:W=>L("company",W.target.value),placeholder:"Your company name"})]}),m.jsxs("div",{children:[m.jsx(Qe,{htmlFor:"position",children:"Position/Title"}),m.jsx(ut,{id:"position",value:T.position,onChange:W=>L("position",W.target.value),placeholder:"Your job title"})]})]}),se.length>0&&m.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[m.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"ADDITIONAL INFORMATION"}),se.map(W=>m.jsxs("div",{children:[m.jsxs(Qe,{htmlFor:W.id,children:[W.label," ",W.required&&"*"]}),W.type==="textarea"?m.jsx(ic,{id:W.id,value:T.customData[W.id]||"",onChange:ye=>U(W.id,ye.target.value),required:W.required}):W.type==="select"?m.jsxs("select",{id:W.id,value:T.customData[W.id]||"",onChange:ye=>U(W.id,ye.target.value),required:W.required,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[m.jsx("option",{value:"",children:"Select..."}),W.options?.map(ye=>m.jsx("option",{value:ye,children:ye},ye))]}):m.jsx(ut,{id:W.id,type:W.type,value:T.customData[W.id]||"",onChange:ye=>U(W.id,ye.target.value),required:W.required})]},W.id))]}),y&&m.jsxs("div",{className:"bg-destructive/10 text-destructive p-3 rounded-lg flex items-center gap-2",children:[m.jsx(qu,{className:"h-4 w-4"}),m.jsx("span",{className:"text-sm",children:y})]}),m.jsx(qe,{type:"submit",className:"w-full",size:"lg",disabled:x,style:o?.primaryColor?{backgroundColor:o.primaryColor,borderColor:o.primaryColor}:void 0,children:x?m.jsxs(m.Fragment,{children:[m.jsx(Fi,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Complete Registration"})]})]})]}),m.jsx("p",{className:"text-center text-sm text-muted-foreground mt-6",children:"By registering, you agree to receive event-related communications."})]}),m.jsx(Jr,{open:_,onOpenChange:W=>!W&&z(),children:m.jsxs(ei,{className:"sm:max-w-md",onInteractOutside:W=>W.preventDefault(),onEscapeKeyDown:z,children:[m.jsxs(yi,{className:"text-center",children:[m.jsx("div",{className:"flex justify-center mb-4",children:o?.logoUrl&&m.jsx("img",{src:o.logoUrl,alt:"Event Logo",className:"h-12 object-contain"})}),m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{backgroundColor:o?.primaryColor?`${o.primaryColor}20`:"#dcfce7"},children:m.jsx(ko,{className:"h-10 w-10",style:{color:o?.primaryColor||"#16a34a"}})})}),m.jsx(vi,{className:"text-2xl text-center",children:"Registration Successful!"}),m.jsxs(tc,{className:"text-center text-base pt-2",children:["Thank you for registering for ",m.jsx("strong",{children:e?.name}),".",m.jsx("br",{}),m.jsx("br",{}),"You will receive an email shortly containing your QR code and further event details."]})]}),m.jsx(ed,{className:"sm:justify-center pt-4",children:m.jsx(qe,{onClick:z,className:"w-full sm:w-auto",size:"lg",style:o?.primaryColor?{backgroundColor:o.primaryColor,borderColor:o.primaryColor}:void 0,children:"Register Another Participant"})})]})})]})}var Sn=function(){return Sn=Object.assign||function(r){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(r[c]=e[c])}return r},Sn.apply(this,arguments)},Rx={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},kx={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Fu={width:"20px",height:"20px",position:"absolute",zIndex:1},CR={top:Sn(Sn({},Rx),{top:"-5px"}),right:Sn(Sn({},kx),{left:void 0,right:"-5px"}),bottom:Sn(Sn({},Rx),{top:void 0,bottom:"-5px"}),left:Sn(Sn({},kx),{left:"-5px"}),topRight:Sn(Sn({},Fu),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Sn(Sn({},Fu),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Sn(Sn({},Fu),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Sn(Sn({},Fu),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ER=R.memo(function(r){var e=r.onResizeStart,n=r.direction,o=r.children,c=r.replaceStyles,u=r.className,p=R.useCallback(function(y){e(y,n)},[e,n]),x=R.useCallback(function(y){e(y,n)},[e,n]),b=R.useMemo(function(){return Sn(Sn({position:"absolute",userSelect:"none"},CR[n]),c??{})},[c,n]);return m.jsx("div",{className:u||void 0,style:b,onMouseDown:p,onTouchStart:x,children:o})}),SR=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(o[u]=c[u])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Mi=function(){return Mi=Object.assign||function(r){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(r[c]=e[c])}return r},Mi.apply(this,arguments)},AR={width:"auto",height:"auto"},Uu=function(r,e,n){return Math.max(Math.min(r,n),e)},Ox=function(r,e,n){var o=Math.round(r/e);return o*e+n*(o-1)},Na=function(r,e){return new RegExp(r,"i").test(e)},zu=function(r){return!!(r.touches&&r.touches.length)},_R=function(r){return!!((r.clientX||r.clientX===0)&&(r.clientY||r.clientY===0))},Px=function(r,e,n){n===void 0&&(n=0);var o=e.reduce(function(u,p,x){return Math.abs(p-r)<Math.abs(e[u]-r)?x:u},0),c=Math.abs(e[o]-r);return n===0||c<n?e[o]:r},t0=function(r){return r=r.toString(),r==="auto"||r.endsWith("px")||r.endsWith("%")||r.endsWith("vh")||r.endsWith("vw")||r.endsWith("vmax")||r.endsWith("vmin")?r:"".concat(r,"px")},Vu=function(r,e,n,o){if(r&&typeof r=="string"){if(r.endsWith("px"))return Number(r.replace("px",""));if(r.endsWith("%")){var c=Number(r.replace("%",""))/100;return e*c}if(r.endsWith("vw")){var c=Number(r.replace("vw",""))/100;return n*c}if(r.endsWith("vh")){var c=Number(r.replace("vh",""))/100;return o*c}}return r},NR=function(r,e,n,o,c,u,p){return o=Vu(o,r.width,e,n),c=Vu(c,r.height,e,n),u=Vu(u,r.width,e,n),p=Vu(p,r.height,e,n),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof c>"u"?void 0:Number(c),minWidth:typeof u>"u"?void 0:Number(u),minHeight:typeof p>"u"?void 0:Number(p)}},IR=function(r){return Array.isArray(r)?r:[r,r]},TR=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],jx="__resizable_base__",RR=(function(r){SR(e,r);function e(n){var o,c,u,p,x=r.call(this,n)||this;return x.ratio=1,x.resizable=null,x.parentLeft=0,x.parentTop=0,x.resizableLeft=0,x.resizableRight=0,x.resizableTop=0,x.resizableBottom=0,x.targetLeft=0,x.targetTop=0,x.delta={width:0,height:0},x.appendBase=function(){if(!x.resizable||!x.window)return null;var b=x.parentNode;if(!b)return null;var y=x.window.document.createElement("div");return y.style.width="100%",y.style.height="100%",y.style.position="absolute",y.style.transform="scale(0, 0)",y.style.left="0",y.style.flex="0 0 100%",y.classList?y.classList.add(jx):y.className+=jx,b.appendChild(y),y},x.removeBase=function(b){var y=x.parentNode;y&&y.removeChild(b)},x.state={isResizing:!1,width:(c=(o=x.propsSize)===null||o===void 0?void 0:o.width)!==null&&c!==void 0?c:"auto",height:(p=(u=x.propsSize)===null||u===void 0?void 0:u.height)!==null&&p!==void 0?p:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},x.onResizeStart=x.onResizeStart.bind(x),x.onMouseMove=x.onMouseMove.bind(x),x.onMouseUp=x.onMouseUp.bind(x),x}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||AR},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,o=0;if(this.resizable&&this.window){var c=this.resizable.offsetWidth,u=this.resizable.offsetHeight,p=this.resizable.style.position;p!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:c,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:u,this.resizable.style.position=p}return{width:n,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,o=this.props.size,c=function(x){var b;if(typeof n.state[x]>"u"||n.state[x]==="auto")return"auto";if(n.propsSize&&n.propsSize[x]&&(!((b=n.propsSize[x])===null||b===void 0)&&b.toString().endsWith("%"))){if(n.state[x].toString().endsWith("%"))return n.state[x].toString();var y=n.getParentSize(),A=Number(n.state[x].toString().replace("px","")),_=A/y[x]*100;return"".concat(_,"%")}return t0(n.state[x])},u=o&&typeof o.width<"u"&&!this.state.isResizing?t0(o.width):c("width"),p=o&&typeof o.height<"u"&&!this.state.isResizing?t0(o.height):c("height");return{width:u,height:p}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var o=!1,c=this.parentNode.style.flexWrap;c!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var u={width:n.offsetWidth,height:n.offsetHeight};return o&&(this.parentNode.style.flexWrap=c),this.removeBase(n),u},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,o){var c=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===n&&(typeof c>"u"||c==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,o){var c=this.props.boundsByDirection,u=this.state.direction,p=c&&Na("left",u),x=c&&Na("top",u),b,y;if(this.props.bounds==="parent"){var A=this.parentNode;A&&(b=p?this.resizableRight-this.parentLeft:A.offsetWidth+(this.parentLeft-this.resizableLeft),y=x?this.resizableBottom-this.parentTop:A.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(b=p?this.resizableRight:this.window.innerWidth-this.resizableLeft,y=x?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(b=p?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),y=x?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return b&&Number.isFinite(b)&&(n=n&&n<b?n:b),y&&Number.isFinite(y)&&(o=o&&o<y?o:y),{maxWidth:n,maxHeight:o}},e.prototype.calculateNewSizeFromDirection=function(n,o){var c=this.props.scale||1,u=IR(this.props.resizeRatio||1),p=u[0],x=u[1],b=this.state,y=b.direction,A=b.original,_=this.props,k=_.lockAspectRatio,T=_.lockAspectRatioExtraHeight,D=_.lockAspectRatioExtraWidth,O=A.width,L=A.height,U=T||0,z=D||0;return Na("right",y)&&(O=A.width+(n-A.x)*p/c,k&&(L=(O-z)/this.ratio+U)),Na("left",y)&&(O=A.width-(n-A.x)*p/c,k&&(L=(O-z)/this.ratio+U)),Na("bottom",y)&&(L=A.height+(o-A.y)*x/c,k&&(O=(L-U)*this.ratio+z)),Na("top",y)&&(L=A.height-(o-A.y)*x/c,k&&(O=(L-U)*this.ratio+z)),{newWidth:O,newHeight:L}},e.prototype.calculateNewSizeFromAspectRatio=function(n,o,c,u){var p=this.props,x=p.lockAspectRatio,b=p.lockAspectRatioExtraHeight,y=p.lockAspectRatioExtraWidth,A=typeof u.width>"u"?10:u.width,_=typeof c.width>"u"||c.width<0?n:c.width,k=typeof u.height>"u"?10:u.height,T=typeof c.height>"u"||c.height<0?o:c.height,D=b||0,O=y||0;if(x){var L=(k-D)*this.ratio+O,U=(T-D)*this.ratio+O,z=(A-O)/this.ratio+D,F=(_-O)/this.ratio+D,$=Math.max(A,L),se=Math.min(_,U),Y=Math.max(k,z),V=Math.min(T,F);n=Uu(n,$,se),o=Uu(o,Y,V)}else n=Uu(n,A,_),o=Uu(o,k,T);return{newWidth:n,newHeight:o}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var c=o.getBoundingClientRect();this.parentLeft=c.left*n,this.parentTop=c.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var u=this.props.bounds.getBoundingClientRect();this.targetLeft=u.left*n,this.targetTop=u.top*n}if(this.resizable){var p=this.resizable.getBoundingClientRect(),x=p.left,b=p.top,y=p.right,A=p.bottom;this.resizableLeft=x*n,this.resizableRight=y*n,this.resizableTop=b*n,this.resizableBottom=A*n}},e.prototype.onResizeStart=function(n,o){if(!(!this.resizable||!this.window)){var c=0,u=0;if(n.nativeEvent&&_R(n.nativeEvent)?(c=n.nativeEvent.clientX,u=n.nativeEvent.clientY):n.nativeEvent&&zu(n.nativeEvent)&&(c=n.nativeEvent.touches[0].clientX,u=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var p=this.props.onResizeStart(n,o,this.resizable);if(p===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var x,b=this.window.getComputedStyle(this.resizable);if(b.flexBasis!=="auto"){var y=this.parentNode;if(y){var A=this.window.getComputedStyle(y).flexDirection;this.flexDir=A.startsWith("row")?"row":"column",x=b.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var _={original:{x:c,y:u,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Mi(Mi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:o,flexBasis:x};this.setState(_)}},e.prototype.onMouseMove=function(n){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&zu(n))try{n.preventDefault(),n.stopPropagation()}catch{}var c=this.props,u=c.maxWidth,p=c.maxHeight,x=c.minWidth,b=c.minHeight,y=zu(n)?n.touches[0].clientX:n.clientX,A=zu(n)?n.touches[0].clientY:n.clientY,_=this.state,k=_.direction,T=_.original,D=_.width,O=_.height,L=this.getParentSize(),U=NR(L,this.window.innerWidth,this.window.innerHeight,u,p,x,b);u=U.maxWidth,p=U.maxHeight,x=U.minWidth,b=U.minHeight;var z=this.calculateNewSizeFromDirection(y,A),F=z.newHeight,$=z.newWidth,se=this.calculateNewMaxFromBoundary(u,p);this.props.snap&&this.props.snap.x&&($=Px($,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(F=Px(F,this.props.snap.y,this.props.snapGap));var Y=this.calculateNewSizeFromAspectRatio($,F,{width:se.maxWidth,height:se.maxHeight},{width:x,height:b});if($=Y.newWidth,F=Y.newHeight,this.props.grid){var V=Ox($,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),X=Ox(F,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),W=this.props.snapGap||0,ye=W===0||Math.abs(V-$)<=W?V:$,be=W===0||Math.abs(X-F)<=W?X:F;$=ye,F=be}var de={width:$-T.width,height:F-T.height};if(this.delta=de,D&&typeof D=="string"){if(D.endsWith("%")){var ve=$/L.width*100;$="".concat(ve,"%")}else if(D.endsWith("vw")){var Ce=$/this.window.innerWidth*100;$="".concat(Ce,"vw")}else if(D.endsWith("vh")){var ie=$/this.window.innerHeight*100;$="".concat(ie,"vh")}}if(O&&typeof O=="string"){if(O.endsWith("%")){var ve=F/L.height*100;F="".concat(ve,"%")}else if(O.endsWith("vw")){var Ce=F/this.window.innerWidth*100;F="".concat(Ce,"vw")}else if(O.endsWith("vh")){var ie=F/this.window.innerHeight*100;F="".concat(ie,"vh")}}var ce={width:this.createSizeForCssProperty($,"width"),height:this.createSizeForCssProperty(F,"height")};this.flexDir==="row"?ce.flexBasis=ce.width:this.flexDir==="column"&&(ce.flexBasis=ce.height);var ge=this.state.width!==ce.width,te=this.state.height!==ce.height,re=this.state.flexBasis!==ce.flexBasis,fe=ge||te||re;fe&&Ya.flushSync(function(){o.setState(ce)}),this.props.onResize&&fe&&this.props.onResize(n,k,this.resizable,de)}},e.prototype.onMouseUp=function(n){var o,c,u=this.state,p=u.isResizing,x=u.direction;u.original,!(!p||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,x,this.resizable,this.delta),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(c=this.props.size.height)!==null&&c!==void 0?c:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Mi(Mi({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var o,c;this.setState({width:(o=n.width)!==null&&o!==void 0?o:"auto",height:(c=n.height)!==null&&c!==void 0?c:"auto"})},e.prototype.renderResizer=function(){var n=this,o=this.props,c=o.enable,u=o.handleStyles,p=o.handleClasses,x=o.handleWrapperStyle,b=o.handleWrapperClass,y=o.handleComponent;if(!c)return null;var A=Object.keys(c).map(function(_){return c[_]!==!1?m.jsx(ER,{direction:_,onResizeStart:n.onResizeStart,replaceStyles:u&&u[_],className:p&&p[_],children:y&&y[_]?y[_]:null},_):null});return m.jsx("div",{className:b,style:x,children:A})},e.prototype.render=function(){var n=this,o=Object.keys(this.props).reduce(function(p,x){return TR.indexOf(x)!==-1||(p[x]=n.props[x]),p},{}),c=Mi(Mi(Mi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(c.flexBasis=this.state.flexBasis);var u=this.props.as||"div";return m.jsxs(u,Mi({style:c,className:this.props.className},o,{ref:function(p){p&&(n.resizable=p)},children:[this.state.isResizing&&m.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e})(R.PureComponent),S1="Radio",[kR,A2]=ni(S1),[OR,PR]=kR(S1),_2=R.forwardRef((r,e)=>{const{__scopeRadio:n,name:o,checked:c=!1,required:u,disabled:p,value:x="on",onCheck:b,form:y,...A}=r,[_,k]=R.useState(null),T=Ut(e,L=>k(L)),D=R.useRef(!1),O=_?y||!!_.closest("form"):!0;return m.jsxs(OR,{scope:n,checked:c,disabled:p,children:[m.jsx(xt.button,{type:"button",role:"radio","aria-checked":c,"data-state":R2(c),"data-disabled":p?"":void 0,disabled:p,value:x,...A,ref:T,onClick:Et(r.onClick,L=>{c||b?.(),O&&(D.current=L.isPropagationStopped(),D.current||L.stopPropagation())})}),O&&m.jsx(T2,{control:_,bubbles:!D.current,name:o,value:x,checked:c,required:u,disabled:p,form:y,style:{transform:"translateX(-100%)"}})]})});_2.displayName=S1;var N2="RadioIndicator",I2=R.forwardRef((r,e)=>{const{__scopeRadio:n,forceMount:o,...c}=r,u=PR(N2,n);return m.jsx(Ys,{present:o||u.checked,children:m.jsx(xt.span,{"data-state":R2(u.checked),"data-disabled":u.disabled?"":void 0,...c,ref:e})})});I2.displayName=N2;var jR="RadioBubbleInput",T2=R.forwardRef(({__scopeRadio:r,control:e,checked:n,bubbles:o=!0,...c},u)=>{const p=R.useRef(null),x=Ut(p,u),b=Ad(n),y=Sd(e);return R.useEffect(()=>{const A=p.current;if(!A)return;const _=window.HTMLInputElement.prototype,T=Object.getOwnPropertyDescriptor(_,"checked").set;if(b!==n&&T){const D=new Event("click",{bubbles:o});T.call(A,n),A.dispatchEvent(D)}},[b,n,o]),m.jsx(xt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...c,tabIndex:-1,ref:x,style:{...c.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});T2.displayName=jR;function R2(r){return r?"checked":"unchecked"}var DR=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Od="RadioGroup",[MR]=ni(Od,[md,A2]),k2=md(),O2=A2(),[LR,BR]=MR(Od),P2=R.forwardRef((r,e)=>{const{__scopeRadioGroup:n,name:o,defaultValue:c,value:u,required:p=!1,disabled:x=!1,orientation:b,dir:y,loop:A=!0,onValueChange:_,...k}=r,T=k2(n),D=lc(y),[O,L]=bi({prop:u,defaultProp:c??null,onChange:_,caller:Od});return m.jsx(LR,{scope:n,name:o,required:p,disabled:x,value:O,onValueChange:L,children:m.jsx(dy,{asChild:!0,...T,orientation:b,dir:D,loop:A,children:m.jsx(xt.div,{role:"radiogroup","aria-required":p,"aria-orientation":b,"data-disabled":x?"":void 0,dir:D,...k,ref:e})})})});P2.displayName=Od;var j2="RadioGroupItem",D2=R.forwardRef((r,e)=>{const{__scopeRadioGroup:n,disabled:o,...c}=r,u=BR(j2,n),p=u.disabled||o,x=k2(n),b=O2(n),y=R.useRef(null),A=Ut(e,y),_=u.value===c.value,k=R.useRef(!1);return R.useEffect(()=>{const T=O=>{DR.includes(O.key)&&(k.current=!0)},D=()=>k.current=!1;return document.addEventListener("keydown",T),document.addEventListener("keyup",D),()=>{document.removeEventListener("keydown",T),document.removeEventListener("keyup",D)}},[]),m.jsx(hy,{asChild:!0,...x,focusable:!p,active:_,children:m.jsx(_2,{disabled:p,required:u.required,checked:_,...b,...c,name:u.name,ref:A,onCheck:()=>u.onValueChange(c.value),onKeyDown:Et(T=>{T.key==="Enter"&&T.preventDefault()}),onFocus:Et(c.onFocus,()=>{k.current&&y.current?.click()})})})});D2.displayName=j2;var FR="RadioGroupIndicator",M2=R.forwardRef((r,e)=>{const{__scopeRadioGroup:n,...o}=r,c=O2(n);return m.jsx(I2,{...c,...o,ref:e})});M2.displayName=FR;var UR=P2,zR=D2,VR=M2;function WR({className:r,...e}){return m.jsx(UR,{"data-slot":"radio-group",className:yt("grid gap-3",r),...e})}function HR({className:r,...e}){return m.jsx(zR,{"data-slot":"radio-group-item",className:yt("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:m.jsx(VR,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:m.jsx(_E,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var Pd="Collapsible",[$R,L2]=ni(Pd),[GR,A1]=$R(Pd),B2=R.forwardRef((r,e)=>{const{__scopeCollapsible:n,open:o,defaultOpen:c,disabled:u,onOpenChange:p,...x}=r,[b,y]=bi({prop:o,defaultProp:c??!1,onChange:p,caller:Pd});return m.jsx(GR,{scope:n,disabled:u,contentId:Ui(),open:b,onOpenToggle:R.useCallback(()=>y(A=>!A),[y]),children:m.jsx(xt.div,{"data-state":N1(b),"data-disabled":u?"":void 0,...x,ref:e})})});B2.displayName=Pd;var F2="CollapsibleTrigger",U2=R.forwardRef((r,e)=>{const{__scopeCollapsible:n,...o}=r,c=A1(F2,n);return m.jsx(xt.button,{type:"button","aria-controls":c.contentId,"aria-expanded":c.open||!1,"data-state":N1(c.open),"data-disabled":c.disabled?"":void 0,disabled:c.disabled,...o,ref:e,onClick:Et(r.onClick,c.onOpenToggle)})});U2.displayName=F2;var _1="CollapsibleContent",z2=R.forwardRef((r,e)=>{const{forceMount:n,...o}=r,c=A1(_1,r.__scopeCollapsible);return m.jsx(Ys,{present:n||c.open,children:({present:u})=>m.jsx(qR,{...o,ref:e,present:u})})});z2.displayName=_1;var qR=R.forwardRef((r,e)=>{const{__scopeCollapsible:n,present:o,children:c,...u}=r,p=A1(_1,n),[x,b]=R.useState(o),y=R.useRef(null),A=Ut(e,y),_=R.useRef(0),k=_.current,T=R.useRef(0),D=T.current,O=p.open||x,L=R.useRef(O),U=R.useRef(void 0);return R.useEffect(()=>{const z=requestAnimationFrame(()=>L.current=!1);return()=>cancelAnimationFrame(z)},[]),Yn(()=>{const z=y.current;if(z){U.current=U.current||{transitionDuration:z.style.transitionDuration,animationName:z.style.animationName},z.style.transitionDuration="0s",z.style.animationName="none";const F=z.getBoundingClientRect();_.current=F.height,T.current=F.width,L.current||(z.style.transitionDuration=U.current.transitionDuration,z.style.animationName=U.current.animationName),b(o)}},[p.open,o]),m.jsx(xt.div,{"data-state":N1(p.open),"data-disabled":p.disabled?"":void 0,id:p.contentId,hidden:!O,...u,ref:A,style:{"--radix-collapsible-content-height":k?`${k}px`:void 0,"--radix-collapsible-content-width":D?`${D}px`:void 0,...r.style},children:O&&c})});function N1(r){return r?"open":"closed"}var XR=B2,YR=U2,KR=z2,Ai="Accordion",ZR=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[I1,QR,JR]=K0(Ai),[jd]=ni(Ai,[JR,L2]),T1=L2(),V2=Jt.forwardRef((r,e)=>{const{type:n,...o}=r,c=o,u=o;return m.jsx(I1.Provider,{scope:r.__scopeAccordion,children:n==="multiple"?m.jsx(r6,{...u,ref:e}):m.jsx(n6,{...c,ref:e})})});V2.displayName=Ai;var[W2,e6]=jd(Ai),[H2,t6]=jd(Ai,{collapsible:!1}),n6=Jt.forwardRef((r,e)=>{const{value:n,defaultValue:o,onValueChange:c=()=>{},collapsible:u=!1,...p}=r,[x,b]=bi({prop:n,defaultProp:o??"",onChange:c,caller:Ai});return m.jsx(W2,{scope:r.__scopeAccordion,value:Jt.useMemo(()=>x?[x]:[],[x]),onItemOpen:b,onItemClose:Jt.useCallback(()=>u&&b(""),[u,b]),children:m.jsx(H2,{scope:r.__scopeAccordion,collapsible:u,children:m.jsx($2,{...p,ref:e})})})}),r6=Jt.forwardRef((r,e)=>{const{value:n,defaultValue:o,onValueChange:c=()=>{},...u}=r,[p,x]=bi({prop:n,defaultProp:o??[],onChange:c,caller:Ai}),b=Jt.useCallback(A=>x((_=[])=>[..._,A]),[x]),y=Jt.useCallback(A=>x((_=[])=>_.filter(k=>k!==A)),[x]);return m.jsx(W2,{scope:r.__scopeAccordion,value:p,onItemOpen:b,onItemClose:y,children:m.jsx(H2,{scope:r.__scopeAccordion,collapsible:!0,children:m.jsx($2,{...u,ref:e})})})}),[i6,Dd]=jd(Ai),$2=Jt.forwardRef((r,e)=>{const{__scopeAccordion:n,disabled:o,dir:c,orientation:u="vertical",...p}=r,x=Jt.useRef(null),b=Ut(x,e),y=QR(n),_=lc(c)==="ltr",k=Et(r.onKeyDown,T=>{if(!ZR.includes(T.key))return;const D=T.target,O=y().filter(X=>!X.ref.current?.disabled),L=O.findIndex(X=>X.ref.current===D),U=O.length;if(L===-1)return;T.preventDefault();let z=L;const F=0,$=U-1,se=()=>{z=L+1,z>$&&(z=F)},Y=()=>{z=L-1,z<F&&(z=$)};switch(T.key){case"Home":z=F;break;case"End":z=$;break;case"ArrowRight":u==="horizontal"&&(_?se():Y());break;case"ArrowDown":u==="vertical"&&se();break;case"ArrowLeft":u==="horizontal"&&(_?Y():se());break;case"ArrowUp":u==="vertical"&&Y();break}const V=z%U;O[V].ref.current?.focus()});return m.jsx(i6,{scope:n,disabled:o,direction:c,orientation:u,children:m.jsx(I1.Slot,{scope:n,children:m.jsx(xt.div,{...p,"data-orientation":u,ref:b,onKeyDown:o?void 0:k})})})}),dd="AccordionItem",[s6,R1]=jd(dd),G2=Jt.forwardRef((r,e)=>{const{__scopeAccordion:n,value:o,...c}=r,u=Dd(dd,n),p=e6(dd,n),x=T1(n),b=Ui(),y=o&&p.value.includes(o)||!1,A=u.disabled||r.disabled;return m.jsx(s6,{scope:n,open:y,disabled:A,triggerId:b,children:m.jsx(XR,{"data-orientation":u.orientation,"data-state":Q2(y),...x,...c,ref:e,disabled:A,open:y,onOpenChange:_=>{_?p.onItemOpen(o):p.onItemClose(o)}})})});G2.displayName=dd;var q2="AccordionHeader",X2=Jt.forwardRef((r,e)=>{const{__scopeAccordion:n,...o}=r,c=Dd(Ai,n),u=R1(q2,n);return m.jsx(xt.h3,{"data-orientation":c.orientation,"data-state":Q2(u.open),"data-disabled":u.disabled?"":void 0,...o,ref:e})});X2.displayName=q2;var k0="AccordionTrigger",Y2=Jt.forwardRef((r,e)=>{const{__scopeAccordion:n,...o}=r,c=Dd(Ai,n),u=R1(k0,n),p=t6(k0,n),x=T1(n);return m.jsx(I1.ItemSlot,{scope:n,children:m.jsx(YR,{"aria-disabled":u.open&&!p.collapsible||void 0,"data-orientation":c.orientation,id:u.triggerId,...x,...o,ref:e})})});Y2.displayName=k0;var K2="AccordionContent",Z2=Jt.forwardRef((r,e)=>{const{__scopeAccordion:n,...o}=r,c=Dd(Ai,n),u=R1(K2,n),p=T1(n);return m.jsx(KR,{role:"region","aria-labelledby":u.triggerId,"data-orientation":c.orientation,...p,...o,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...r.style}})});Z2.displayName=K2;function Q2(r){return r?"open":"closed"}var o6=V2,a6=G2,l6=X2,c6=Y2,u6=Z2;function J2({...r}){return m.jsx(o6,{"data-slot":"accordion",...r})}function Ua({className:r,...e}){return m.jsx(a6,{"data-slot":"accordion-item",className:yt("border-b last:border-b-0",r),...e})}function za({className:r,children:e,...n}){return m.jsx(l6,{className:"flex",children:m.jsxs(c6,{"data-slot":"accordion-trigger",className:yt("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",r),...n,children:[e,m.jsx(B0,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function Va({className:r,children:e,...n}){return m.jsx(u6,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:m.jsx("div",{className:yt("pt-0 pb-4",r),children:e})})}const Dx={CR80:{width:85.6,height:53.98,label:"CR80 (Credit Card)"},A6:{width:105,height:148,label:"A6"},A7:{width:74,height:105,label:"A7"},custom:{width:100,height:150,label:"Custom Size"}},Mx=3.5;function d6({eventId:r,onClose:e}){return m.jsx(h6,{eventId:r,onClose:e})}function h6({eventId:r,onClose:e}){const[n,o]=R.useState(null),[c,u]=R.useState(null),[p,x]=R.useState([]),[b,y]=R.useState([]),[A,_]=R.useState(null),[k,T]=R.useState(!1),[D,O]=R.useState(!1),[L,U]=R.useState(!1),[z,F]=R.useState(1),$=()=>{e?e():window.history.back()};R.useEffect(()=>{r&&(V(),W())},[r]);const se=ee=>{if(!ee)return"#000000";const pe=ee.trim().toLowerCase();return pe==="#fff"||pe==="#ffffff"||pe==="white"?"#000000":ee},Y=ee=>({...ee,fontSize:ee.fontSize??16,fontFamily:ee.fontFamily??"sans-serif",fontWeight:ee.fontWeight??"normal",fontStyle:ee.fontStyle??"normal",textAlign:ee.textAlign??"center",color:se(ee.color)}),V=()=>{const ee=y1(r),pe={...ee,backgroundColor:ee.backgroundColor||"#f3f4f6"};o(pe);const Ee=localStorage.getItem(`badge_canvas_${r}`);if(Ee)try{const Le=JSON.parse(Ee);y(Le.map(Xe=>Y(Xe)))}catch(Le){console.error("Error loading canvas layout:",Le),X(pe)}else X(pe)},X=ee=>{if(ee.components){const pe=ee.components.map((Ee,Le)=>({...Ee,x:10,y:10+Le*15,width:Ee.type==="qrcode"?25:80,height:Ee.type==="qrcode"?25:10,fontSize:16,fontFamily:"sans-serif",fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#000000"})).map(Y);y(pe)}},W=()=>{const ee=Br(r);if(u(ee),ee){const pe=[{name:"name",label:"Name"},{name:"email",label:"Email"},{name:"phone",label:"Phone"},{name:"company",label:"Company"},{name:"position",label:"Position"}],Ee=(ee.customFields||[]).map(Le=>({name:Le.name,label:Le.label}));x([...pe,...Ee])}},ye=async()=>{if(n){T(!0);try{const ee=b.map(Ee=>({id:Ee.id,type:Ee.type,fieldName:Ee.fieldName,label:Ee.label,enabled:Ee.enabled,order:Ee.order})),pe={...n,components:ee};_T(r,pe),localStorage.setItem(`badge_canvas_${r}`,JSON.stringify(b)),O(!0),setTimeout(()=>{O(!1),e()},1500)}catch(ee){console.error("Error saving badge settings:",ee),alert("Failed to save badge settings")}finally{T(!1)}}},be=ee=>{n&&o({...n,...ee})},de=(ee,pe,Ee,Le,Xe)=>{if(!Ae||!Te){console.warn("Canvas dimensions not ready; skipping component add.");return}const tt=pe??Ae/2,vt=Ee??Te/2,nt=ee==="qrcode"?25:60,on=ee==="qrcode"?25:12,je=Math.max(0,Math.min(100-nt,tt/Ae*100)),Me=Math.max(0,Math.min(100-on,vt/Te*100)),Je={id:Date.now().toString(),type:ee,fieldName:Le,label:Xe||ee,enabled:!0,order:b.length,x:je,y:Me,width:nt,height:on,fontSize:16,fontFamily:"sans-serif",fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#000000"},st=Y(Je);y(ht=>[...ht,st]),_(st.id)},ve=(ee,pe)=>{y(Ee=>Ee.map(Le=>Le.id===ee?{...Le,...pe}:Le))},Ce=(ee,pe,Ee)=>{de(ee,Ae/2,Te/2,pe,Ee)},ie=ee=>Math.min(2,Math.max(.5,ee)),ce=ee=>{const pe=parseFloat(ie(ee).toFixed(2));F(pe)},ge=ee=>{ce(z+ee)},te=ee=>{y(pe=>pe.filter(Ee=>Ee.id!==ee)),A===ee&&_(null)},re=async ee=>{const pe=ee.target.files?.[0];if(pe){if(!pe.type.startsWith("image/")){alert("Please upload an image file (PNG or JPG)");return}if(pe.size>5*1024*1024){alert("Image must be smaller than 5MB");return}U(!0);try{const Ee=ry(`https://${iy}.supabase.co`,sy),Le=pe.name.split(".").pop(),tt=`badge-backgrounds/${`${r}-bg-${Date.now()}.${Le}`}`,{error:vt}=await Ee.storage.from("make-04dd31ce-badge-images").upload(tt,pe,{cacheControl:"3600",upsert:!1});if(vt)throw console.error("Upload error:",vt),vt;const{data:{publicUrl:nt}}=Ee.storage.from("make-04dd31ce-badge-images").getPublicUrl(tt);be({backgroundImageUrl:nt})}catch(Ee){console.error("Error uploading background image:",Ee),alert("Failed to upload image: "+(Ee.message||"Unknown error"))}finally{U(!1)}}};if(!n||!c)return null;const fe=Dx[n.size],K=n.size==="custom"?n.customWidth||100:fe.width,ue=n.size==="custom"?n.customHeight||100:fe.height,Ae=K*Mx,Te=ue*Mx,Fe=b.find(ee=>ee.id===A);return m.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-slate-950 via-indigo-950 to-slate-900 text-white overflow-hidden",children:[m.jsx("header",{className:"flex-shrink-0 px-10 py-6 border-b border-white/15 bg-white/10 backdrop-blur",children:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-2xl font-semibold tracking-tight flex items-center gap-3",children:[m.jsx(bu,{className:"h-6 w-6 text-purple-300"}),"Badge Designer  ",c.name]}),m.jsx("p",{className:"text-sm text-white/70 mt-1",children:"Click palette items to add them to the badge and customize their appearance in real time."})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(qe,{variant:"outline",onClick:$,className:"h-10 px-5 border-white/40 text-white bg-white/10 hover:bg-white/20 hover:text-white",children:"Exit Designer"}),m.jsx(qe,{onClick:ye,disabled:k,className:"h-10 px-6 bg-gradient-to-r from-purple-500 via-fuchsia-500 to-indigo-500 hover:from-purple-500/90 hover:to-indigo-500/90 text-white border-none",children:k?m.jsx(m.Fragment,{children:"Saving"}):D?m.jsxs(m.Fragment,{children:[m.jsx(ko,{className:"mr-2 h-4 w-4"}),"Saved!"]}):m.jsxs(m.Fragment,{children:[m.jsx(lw,{className:"mr-2 h-4 w-4"}),"Save Template"]})})]})]})}),m.jsx("main",{className:"flex-1 min-h-0 px-10 py-8 overflow-hidden",children:m.jsxs("div",{className:"mx-auto flex h-full min-h-0 max-w-[1600px] gap-6",children:[m.jsx("section",{className:"flex h-full min-h-0 w-[280px] flex-shrink-0 basis-[280px] flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white text-slate-900 shadow-xl",children:m.jsx("div",{className:"flex h-full flex-col gap-4 p-4",children:m.jsxs(J2,{type:"multiple",defaultValue:["size","palette"],className:"flex flex-col gap-4",children:[m.jsxs(Ua,{value:"size",className:"border border-slate-200 border-b-0 rounded-2xl bg-white shadow-sm",children:[m.jsx(za,{className:"px-4 text-sm font-semibold text-slate-700",children:"Badge Size"}),m.jsx(Va,{className:"px-4 max-h-[calc(100vh-320px)] overflow-y-auto",children:m.jsxs("div",{className:"space-y-3",children:[m.jsx(WR,{value:n.size,onValueChange:ee=>be({size:ee}),className:"space-y-2",children:Object.entries(Dx).map(([ee,{label:pe}])=>m.jsxs("label",{htmlFor:`size-${ee}`,className:"flex items-center gap-3 rounded-xl border border-slate-200 px-3 py-2 text-sm font-medium text-slate-700 hover:border-purple-400 hover:bg-purple-50/50 transition-colors cursor-pointer",children:[m.jsx(HR,{value:ee,id:`size-${ee}`}),m.jsx("span",{children:pe})]},ee))}),n.size==="custom"&&m.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Width (mm)"}),m.jsx(ut,{type:"number",value:n.customWidth||100,onChange:ee=>be({customWidth:parseInt(ee.target.value)}),className:"h-9 text-sm"})]}),m.jsxs("div",{className:"space-y-1.5",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Height (mm)"}),m.jsx(ut,{type:"number",value:n.customHeight||150,onChange:ee=>be({customHeight:parseInt(ee.target.value)}),className:"h-9 text-sm"})]})]}),m.jsxs("div",{className:"text-xs font-semibold text-purple-600 bg-purple-50 rounded-lg px-3 py-2",children:["Preview size: ",K.toFixed(1),"mm  ",ue.toFixed(1),"mm"]})]})})]}),m.jsxs(Ua,{value:"palette",className:"border border-slate-200 border-b-0 rounded-2xl bg-white shadow-sm",children:[m.jsx(za,{className:"px-4 text-sm font-semibold text-slate-700",children:"Component Palette"}),m.jsx(Va,{className:"px-4 max-h-[calc(100vh-320px)] overflow-y-auto",children:m.jsxs("div",{className:"space-y-2",children:[m.jsx("p",{className:"text-xs text-slate-500",children:"Click a component to drop it onto the badge canvas."}),m.jsxs(Hl,{type:"eventName",label:"Event Name",onAdd:Ce,children:[m.jsx(bu,{className:"h-3.5 w-3.5 mr-2 text-purple-500"}),m.jsx("span",{className:"text-sm",children:"Event Name"})]}),m.jsxs(Hl,{type:"qrcode",label:"QR Code",onAdd:Ce,children:[m.jsx(aw,{className:"h-3.5 w-3.5 mr-2 text-purple-500"}),m.jsx("span",{className:"text-sm",children:"QR Code"})]}),m.jsxs(Hl,{type:"logo",label:"Event Logo",onAdd:Ce,children:[m.jsx(DE,{className:"h-3.5 w-3.5 mr-2 text-purple-500"}),m.jsx("span",{className:"text-sm",children:"Event Logo"})]}),m.jsx("div",{className:"border-t my-3"}),m.jsx("p",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wide",children:"Participant Fields"}),p.map(ee=>m.jsxs(Hl,{type:"field",fieldName:ee.name,label:ee.label,onAdd:Ce,children:[m.jsx(bu,{className:"h-3 w-3 mr-2 text-purple-500"}),m.jsx("span",{className:"text-sm",children:ee.label})]},ee.name)),m.jsx("div",{className:"border-t my-3"}),m.jsxs(Hl,{type:"customText",label:"Custom Text",onAdd:Ce,children:[m.jsx(bu,{className:"h-3.5 w-3.5 mr-2 text-purple-500"}),m.jsx("span",{className:"text-sm",children:"Custom Text"})]})]})})]}),m.jsxs(Ua,{value:"background",className:"border border-slate-200 border-b-0 rounded-2xl bg-white shadow-sm",children:[m.jsx(za,{className:"px-4 text-sm font-semibold text-slate-700",children:"Background"}),m.jsx(Va,{className:"px-4 max-h-[calc(100vh-320px)] overflow-y-auto",children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Background Color"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ut,{type:"color",value:n.backgroundColor,onChange:ee=>be({backgroundColor:ee.target.value}),className:"w-12 h-9 p-1 rounded-lg border border-slate-200"}),m.jsx(ut,{type:"text",value:n.backgroundColor,onChange:ee=>be({backgroundColor:ee.target.value}),placeholder:"#ffffff",className:"h-9 text-sm flex-1"})]})]}),m.jsx("div",{className:"border-t pt-2"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Background Image"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(qe,{variant:"outline",size:"sm",disabled:L,className:"h-9 text-xs flex-1 border-purple-200 text-purple-600 hover:bg-purple-50",onClick:()=>document.getElementById("bg-file-input")?.click(),children:[m.jsx(hd,{className:"h-4 w-4 mr-2"}),L?"Uploading":"Upload Image"]}),m.jsx("input",{id:"bg-file-input",type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:re,className:"hidden"})]}),m.jsxs("div",{className:"relative text-xs text-slate-500",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("span",{className:"w-full border-t"})}),m.jsx("div",{className:"relative flex justify-center",children:m.jsx("span",{className:"bg-white px-2",children:"or use URL"})})]}),m.jsx(ut,{type:"url",value:n.backgroundImageUrl||"",onChange:ee=>be({backgroundImageUrl:ee.target.value}),placeholder:"https://example.com/image.jpg",className:"h-9 text-sm"}),m.jsx("p",{className:"text-xs text-slate-500",children:"Upload a local file or paste an image URL."}),n.backgroundImageUrl&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Image Fit"}),m.jsxs(Ma,{value:n.backgroundImageFit||"cover",onValueChange:ee=>be({backgroundImageFit:ee}),children:[m.jsx(Ba,{className:"h-9 text-sm",children:m.jsx(La,{})}),m.jsxs(Fa,{children:[m.jsx(hn,{value:"cover",children:"Cover (fill badge)"}),m.jsx(hn,{value:"contain",children:"Contain (fit within)"})]})]})]}),m.jsxs("div",{className:"rounded-xl border border-dashed border-slate-300 bg-slate-50 p-2",children:[m.jsx("p",{className:"text-xs font-semibold text-slate-500 mb-1",children:"Preview"}),m.jsx("img",{src:n.backgroundImageUrl,alt:"Background preview",className:"w-full h-24 object-cover rounded-lg",onError:ee=>{ee.target.style.display="none"}})]}),m.jsx(qe,{variant:"outline",size:"sm",onClick:()=>be({backgroundImageUrl:"",backgroundImageFit:"cover"}),className:"h-9 text-xs w-full border-rose-200 text-rose-600 hover:bg-rose-50",children:"Remove Image"})]})]})]})})]})]})})}),m.jsxs("section",{className:"flex min-h-0 min-w-0 flex-[0_0_55%] basis-[55%] max-w-[55%] flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white text-slate-900 shadow-2xl",children:[m.jsxs("div",{className:"flex items-center justify-between px-6 pt-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-sm font-semibold text-slate-600 uppercase tracking-wide",children:"Canvas Preview"}),m.jsx("p",{className:"text-xs text-slate-500",children:"Zoom to fine-tune positions and drag components directly on the badge."})]}),m.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 rounded-full border border-slate-200 px-3 py-1.5 text-slate-700 shadow-sm",children:[m.jsx(qe,{type:"button",size:"sm",variant:"outline",onClick:()=>ge(-.1),className:"h-8 w-8 p-0",children:m.jsx(ZE,{className:"h-4 w-4"})}),m.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.05",value:z,onChange:ee=>ce(parseFloat(ee.target.value)),className:"w-36 accent-purple-500"}),m.jsx(qe,{type:"button",size:"sm",variant:"outline",onClick:()=>ge(.1),className:"h-8 w-8 p-0",children:m.jsx(Po,{className:"h-4 w-4"})}),m.jsxs("span",{className:"text-xs font-semibold w-12 text-center",children:[Math.round(z*100),"%"]})]})]}),m.jsx("div",{className:"flex-1 flex items-center justify-center px-8 pb-10 overflow-auto",children:m.jsx("div",{className:"relative transform transition-transform duration-200 ease-out",style:{transform:`scale(${z})`,transformOrigin:"top center"},children:m.jsx(f6,{width:Ae,height:Te,backgroundColor:n.backgroundColor,backgroundImageUrl:n.backgroundImageUrl,backgroundImageFit:n.backgroundImageFit,components:b,selectedComponentId:A,onComponentSelect:_,onComponentMove:(ee,pe,Ee)=>ve(ee,{x:pe,y:Ee}),onComponentResize:(ee,pe,Ee)=>ve(ee,{width:pe,height:Ee}),event:c})})}),m.jsx("div",{className:"px-6 pb-6",children:m.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 text-slate-600 px-4 py-2 rounded-full text-xs font-medium border border-slate-200",children:[m.jsx("span",{children:"Current size:"}),m.jsxs("span",{children:[K.toFixed(1),"mm  ",ue.toFixed(1),"mm"]})]})})]}),m.jsx("section",{className:"flex h-full min-h-0 w-[280px] flex-shrink-0 basis-[280px] flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white text-slate-900 shadow-xl",children:m.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Fe?m.jsx(p6,{component:Fe,onUpdate:ee=>ve(Fe.id,ee),onDelete:()=>te(Fe.id),logoUrl:n.logoUrl,onLogoUrlChange:ee=>be({logoUrl:ee})}):m.jsx("div",{className:"h-full flex items-center justify-center text-center text-sm text-slate-500",children:m.jsxs("div",{children:[m.jsx(JE,{className:"h-10 w-10 mx-auto mb-3 text-purple-400 opacity-70"}),m.jsx("p",{children:"Select a component on the canvas to edit its properties."})]})})})})]})})]})}function Hl({type:r,fieldName:e,label:n,onAdd:o,children:c}){return m.jsx("button",{type:"button",onClick:()=>o(r,e,n),className:"w-full flex items-center px-2.5 py-1.5 bg-white border rounded-md hover:bg-purple-50 hover:border-purple-300 transition-all text-left text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-offset-1",children:c})}function f6({width:r,height:e,backgroundColor:n,backgroundImageUrl:o,backgroundImageFit:c="cover",components:u,selectedComponentId:p,onComponentSelect:x,onComponentMove:b,onComponentResize:y,event:A}){const _=R.useRef(null),k={width:`${r}px`,height:`${e}px`,backgroundColor:n};o&&(k.backgroundImage=`url(${o})`,k.backgroundSize=c,k.backgroundPosition="center",k.backgroundRepeat="no-repeat");const T={backgroundSize:"20px 20px",backgroundImage:"linear-gradient(to right, rgba(124, 58, 237, 0.15) 1px, transparent 1px), linear-gradient(to bottom, rgba(124, 58, 237, 0.15) 1px, transparent 1px)",opacity:.25};return m.jsxs("div",{ref:_,"data-badge-canvas":"true",className:"relative border-2 border-gray-400 shadow-2xl transition-all rounded-lg overflow-hidden bg-white cursor-default",style:k,onClick:D=>{D.stopPropagation(),x(null)},children:[m.jsx("div",{className:"absolute inset-0 pointer-events-none",style:T,"aria-hidden":"true"}),u.map(D=>m.jsx(g6,{component:D,isSelected:p===D.id,canvasWidth:r,canvasHeight:e,onSelect:()=>x(D.id),onMove:b,onResize:y,event:A},D.id)),u.length===0&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:m.jsxs("div",{className:"text-center text-gray-400",children:[m.jsx(Po,{className:"h-10 w-10 mx-auto mb-3 opacity-30"}),m.jsx("p",{className:"text-sm font-medium",children:"Click components to add them"}),m.jsx("p",{className:"text-xs mt-1 opacity-70",children:"They will appear centered on the badge"})]})})]})}function g6({component:r,isSelected:e,canvasWidth:n,canvasHeight:o,onSelect:c,onMove:u,onResize:p,event:x}){const[b,y]=R.useState(""),[A,_]=R.useState(!1),[k,T]=R.useState({x:0,y:0}),D=R.useRef(null);R.useEffect(()=>{r.type==="qrcode"&&S2.toDataURL("SAMPLE-QR-CODE",{width:200,margin:1}).then(y)},[r.type]);const O=z=>{z.target.closest(".resize-handle")||(z.stopPropagation(),_(!0),T({x:z.clientX-r.x/100*n,y:z.clientY-r.y/100*o}))};R.useEffect(()=>{if(!A)return;const z=$=>{const se=($.clientX-k.x)/n*100,Y=($.clientY-k.y)/o*100;u(r.id,Math.max(0,Math.min(100-r.width,se)),Math.max(0,Math.min(100-r.height,Y)))},F=()=>{_(!1)};return document.addEventListener("mousemove",z),document.addEventListener("mouseup",F),()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",F)}},[A,k,n,o,r.id,r.width,r.height,u]);const L=(z,F,$,se)=>{const Y=$.offsetWidth/n*100,V=$.offsetHeight/o*100;p(r.id,Math.min(100,Y),Math.min(100,V))},U=()=>r.type==="eventName"?m.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:ensureReadableColor(r.color)},children:r.customText&&r.customText.trim().length>0?r.customText:x.name}):r.type==="field"?m.jsxs("div",{className:"w-full h-full overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:ensureReadableColor(r.color)},children:[m.jsx("div",{className:"opacity-60 text-xs",children:r.label}),m.jsxs("div",{children:["Sample ",r.label]})]}):r.type==="qrcode"&&b?m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsx("img",{src:b,alt:"QR Code",className:"w-full h-full object-contain"})}):r.type==="logo"&&x.branding?.logoUrl?m.jsx("div",{className:"w-full h-full flex items-center justify-center",children:m.jsx("img",{src:x.branding.logoUrl,alt:"Logo",className:"w-full h-full object-contain"})}):r.type==="customText"?m.jsx("div",{className:"w-full h-full flex items-center overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:ensureReadableColor(r.color)},children:r.customText||"Custom Text"}):null;return m.jsx(RR,{size:{width:`${r.width}%`,height:`${r.height}%`},onResizeStop:L,enable:{top:e,right:e,bottom:e,left:e,topRight:e,bottomRight:e,bottomLeft:e,topLeft:e},minWidth:"5%",minHeight:"3%",maxWidth:"100%",maxHeight:"100%",style:{position:"absolute",left:`${r.x}%`,top:`${r.y}%`,cursor:A?"grabbing":"grab"},className:`${e?"ring-2 ring-purple-500 ring-offset-2 shadow-lg":"hover:ring-1 hover:ring-purple-300"}`,handleClasses:{top:"resize-handle",right:"resize-handle",bottom:"resize-handle",left:"resize-handle",topRight:"resize-handle",bottomRight:"resize-handle",bottomLeft:"resize-handle",topLeft:"resize-handle"},children:m.jsxs("div",{ref:D,"data-component-id":r.id,className:"w-full h-full relative",onMouseDown:O,onClick:z=>{z.stopPropagation(),c()},children:[U(),e&&m.jsx("div",{className:"absolute -top-7 left-0 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-3 py-1 rounded-md text-xs whitespace-nowrap pointer-events-none shadow-md font-medium",children:r.label||r.type})]})})}function p6({component:r,onUpdate:e,onDelete:n,logoUrl:o,onLogoUrlChange:c}){const u=["field","eventName","customText"].includes(r.type),p=[...u?["text"]:[],"position",...r.type==="logo"?["logo"]:[]];return m.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[m.jsxs("div",{className:"flex items-center justify-between border-b bg-gradient-to-r from-purple-50 to-blue-50 px-4 py-3",children:[m.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Component Settings"}),m.jsx(qe,{variant:"ghost",size:"sm",onClick:n,className:"h-7 w-7 p-0 text-rose-500 hover:bg-rose-50 hover:text-rose-600",children:m.jsx(oc,{className:"h-3.5 w-3.5"})})]}),m.jsxs("div",{className:"px-4 py-4 space-y-4",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Component Type"}),m.jsx("p",{className:"text-sm font-semibold text-purple-700",children:r.label||r.type})]}),m.jsxs(J2,{type:"multiple",defaultValue:p,className:"flex flex-col gap-3",children:[u&&m.jsxs(Ua,{value:"text",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[m.jsx(za,{className:"px-3 text-sm font-semibold text-slate-700",children:"Text & Formatting"}),m.jsxs(Va,{className:"px-3 max-h-\\[calc(100vh-360px)\\] overflow-y-auto space-y-4",children:[(r.type==="customText"||r.type==="eventName")&&m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:r.type==="eventName"?"Display Text Override":"Text Content"}),m.jsx(ut,{value:r.customText||"",onChange:x=>e({customText:x.target.value}),placeholder:r.type==="eventName"?"Leave blank to use event name":"Enter custom text",className:"h-9 text-sm"}),r.type==="eventName"&&m.jsx("p",{className:"text-[11px] text-slate-500",children:"Leaving this empty will display the event name automatically."})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Font Size"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ut,{type:"number",value:r.fontSize||16,onChange:x=>e({fontSize:parseInt(x.target.value)}),min:8,max:72,className:"h-9 text-sm"}),m.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"px"})]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Font Family"}),m.jsxs(Ma,{value:r.fontFamily||"sans-serif",onValueChange:x=>e({fontFamily:x}),children:[m.jsx(Ba,{className:"h-9 text-sm",children:m.jsx(La,{})}),m.jsxs(Fa,{children:[m.jsx(hn,{value:"sans-serif",children:"Sans Serif"}),m.jsx(hn,{value:"serif",children:"Serif"}),m.jsx(hn,{value:"monospace",children:"Monospace"}),m.jsx(hn,{value:"Arial",children:"Arial"}),m.jsx(hn,{value:"Times New Roman",children:"Times New Roman"}),m.jsx(hn,{value:"Courier New",children:"Courier New"})]})]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Style"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(qe,{variant:r.fontWeight==="bold"?"default":"outline",size:"sm",onClick:()=>e({fontWeight:r.fontWeight==="bold"?"normal":"bold"}),className:`h-9 flex-1 ${r.fontWeight==="bold"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:m.jsx(uE,{className:"h-3.5 w-3.5"})}),m.jsx(qe,{variant:r.fontStyle==="italic"?"default":"outline",size:"sm",onClick:()=>e({fontStyle:r.fontStyle==="italic"?"normal":"italic"}),className:`h-9 flex-1 ${r.fontStyle==="italic"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:m.jsx(FE,{className:"h-3.5 w-3.5"})})]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Alignment"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(qe,{variant:r.textAlign==="left"?"default":"outline",size:"sm",onClick:()=>e({textAlign:"left"}),className:`h-9 flex-1 ${r.textAlign==="left"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:m.jsx(rE,{className:"h-3.5 w-3.5"})}),m.jsx(qe,{variant:r.textAlign==="center"?"default":"outline",size:"sm",onClick:()=>e({textAlign:"center"}),className:`h-9 flex-1 ${r.textAlign==="center"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:m.jsx(tE,{className:"h-3.5 w-3.5"})}),m.jsx(qe,{variant:r.textAlign==="right"?"default":"outline",size:"sm",onClick:()=>e({textAlign:"right"}),className:`h-9 flex-1 ${r.textAlign==="right"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:m.jsx(sE,{className:"h-3.5 w-3.5"})})]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Text Color"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ut,{type:"color",value:r.color||"#1f2937",onChange:x=>e({color:x.target.value}),className:"w-12 h-9 p-1 rounded-lg border border-slate-200"}),m.jsx(ut,{type:"text",value:r.color||"#1f2937",onChange:x=>e({color:x.target.value}),placeholder:"#1f2937",className:"h-9 text-sm flex-1"})]})]})]})]}),m.jsxs(Ua,{value:"position",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[m.jsx(za,{className:"px-3 text-sm font-semibold text-slate-700",children:"Position & Size"}),m.jsxs(Va,{className:"px-3 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Position X (%)"}),m.jsx(ut,{type:"number",value:r.x.toFixed(1),onChange:x=>e({x:parseFloat(x.target.value)}),min:0,max:100,className:"h-9 text-sm"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Position Y (%)"}),m.jsx(ut,{type:"number",value:r.y.toFixed(1),onChange:x=>e({y:parseFloat(x.target.value)}),min:0,max:100,className:"h-9 text-sm"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Width (%)"}),m.jsx(ut,{type:"number",value:r.width.toFixed(1),onChange:x=>e({width:parseFloat(x.target.value)}),min:5,max:100,className:"h-9 text-sm"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Height (%)"}),m.jsx(ut,{type:"number",value:r.height.toFixed(1),onChange:x=>e({height:parseFloat(x.target.value)}),min:3,max:100,className:"h-9 text-sm"})]})]}),m.jsxs("div",{className:"flex items-center gap-3 border-t pt-3",children:[m.jsx(m2,{checked:r.enabled,onCheckedChange:x=>e({enabled:x})}),m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Show on badge"})]})]})]}),r.type==="logo"&&m.jsxs(Ua,{value:"logo",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[m.jsx(za,{className:"px-3 text-sm font-semibold text-slate-700",children:"Logo Options"}),m.jsxs(Va,{className:"px-3 space-y-2",children:[m.jsx(Qe,{className:"text-xs font-semibold text-slate-600",children:"Logo URL"}),m.jsx(ut,{type:"url",value:o||"",onChange:x=>c(x.target.value),placeholder:"https://example.com/logo.png",className:"h-9 text-sm"}),m.jsx("p",{className:"text-xs text-slate-500",children:"Or set in Event Branding settings."})]})]})]})]})]})}function m6(){const[r,e]=R.useState(null),[n,o]=R.useState(null),[c,u]=R.useState(!0),[p,x]=R.useState(null),[b,y]=R.useState(null),[A,_]=R.useState(null);R.useEffect(()=>{NT();const L=new URLSearchParams(window.location.search),U=window.location.hash,z=L.get("designer");if(z){_(z),u(!1);return}const F=U.match(/^#\/designer\/(.+)$/);if(F&&F[1]){_(F[1]),u(!1);return}else z||_(null);const $=L.get("checkin");if($){x($),u(!1);return}const se=L.get("register");if(se){y(se),u(!1);return}const Y=U.match(/^#\/register\/(.+)$/);if(Y&&Y[1]){y(Y[1]),u(!1);return}(async()=>{try{const{data:{session:W}}=await ti.auth.getSession();if(W?.access_token){e(W.access_token);const ye=i2();ye&&Br(ye)&&o(ye)}}catch(W){console.error("Error checking session:",W)}finally{u(!1)}})();const X=()=>{const W=window.location.hash,ye=W.match(/^#\/register\/(.+)$/),be=W.match(/^#\/designer\/(.+)$/);ye&&ye[1]?(y(ye[1]),_(null)):be&&be[1]?(_(be[1]),y(null),x(null)):!W||W==="#/"||W==="#"?(y(null),_(null)):(!W||W==="#/"||W==="#")&&y(null)};return window.addEventListener("hashchange",X),()=>window.removeEventListener("hashchange",X)},[]);const k=L=>{e(L)},T=()=>{e(null),o(null),od()},D=L=>{o(L)},O=()=>{o(null)};return c?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),m.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):p?m.jsx(vR,{agendaId:p}):b?m.jsx(bR,{eventId:b}):A?m.jsx(d6,{eventId:A,onClose:()=>{const L=new URL(window.location.href);L.searchParams.delete("designer"),window.location.replace(L.origin+L.pathname)}}):r?n?m.jsx(qT,{eventId:n,accessToken:r,onLogout:T,onBackToEvents:O}):m.jsx(w8,{onEventSelected:D,onLogout:T}):m.jsx(F3,{onAuthenticated:k})}Jb.createRoot(document.getElementById("root")).render(m.jsx(m6,{}));
