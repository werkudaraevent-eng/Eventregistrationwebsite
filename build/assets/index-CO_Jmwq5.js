function D0(r,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in r)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(r,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();var Su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Tb(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var t=r.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var u=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(n,o,u.get?u:{enumerable:!0,get:function(){return r[o]}})}),n}var nf={exports:{}},Xl={},rf={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function Rb(){if(bm)return Ut;bm=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),A=Symbol.iterator;function k(K){return K===null||typeof K!="object"?null:(K=A&&K[A]||K["@@iterator"],typeof K=="function"?K:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,j={};function M(K,pe,Be){this.props=K,this.context=pe,this.refs=j,this.updater=Be||R}M.prototype.isReactComponent={},M.prototype.setState=function(K,pe){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,pe,"setState")},M.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function V(){}V.prototype=M.prototype;function z(K,pe,Be){this.props=K,this.context=pe,this.refs=j,this.updater=Be||R}var B=z.prototype=new V;B.constructor=z,D(B,M.prototype),B.isPureReactComponent=!0;var U=Array.isArray,H=Object.prototype.hasOwnProperty,Y={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function X(K,pe,Be){var Ve,Ee={},we=null,Ce=null;if(pe!=null)for(Ve in pe.ref!==void 0&&(Ce=pe.ref),pe.key!==void 0&&(we=""+pe.key),pe)H.call(pe,Ve)&&!W.hasOwnProperty(Ve)&&(Ee[Ve]=pe[Ve]);var Re=arguments.length-2;if(Re===1)Ee.children=Be;else if(1<Re){for(var qe=Array(Re),Ke=0;Ke<Re;Ke++)qe[Ke]=arguments[Ke+2];Ee.children=qe}if(K&&K.defaultProps)for(Ve in Re=K.defaultProps,Re)Ee[Ve]===void 0&&(Ee[Ve]=Re[Ve]);return{$$typeof:r,type:K,key:we,ref:Ce,props:Ee,_owner:Y.current}}function $(K,pe){return{$$typeof:r,type:K.type,key:pe,ref:K.ref,props:K.props,_owner:K._owner}}function Q(K){return typeof K=="object"&&K!==null&&K.$$typeof===r}function ue(K){var pe={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Be){return pe[Be]})}var ae=/\/+/g;function te(K,pe){return typeof K=="object"&&K!==null&&K.key!=null?ue(""+K.key):pe.toString(36)}function fe(K,pe,Be,Ve,Ee){var we=typeof K;(we==="undefined"||we==="boolean")&&(K=null);var Ce=!1;if(K===null)Ce=!0;else switch(we){case"string":case"number":Ce=!0;break;case"object":switch(K.$$typeof){case r:case t:Ce=!0}}if(Ce)return Ce=K,Ee=Ee(Ce),K=Ve===""?"."+te(Ce,0):Ve,U(Ee)?(Be="",K!=null&&(Be=K.replace(ae,"$&/")+"/"),fe(Ee,pe,Be,"",function(Ke){return Ke})):Ee!=null&&(Q(Ee)&&(Ee=$(Ee,Be+(!Ee.key||Ce&&Ce.key===Ee.key?"":(""+Ee.key).replace(ae,"$&/")+"/")+K)),pe.push(Ee)),1;if(Ce=0,Ve=Ve===""?".":Ve+":",U(K))for(var Re=0;Re<K.length;Re++){we=K[Re];var qe=Ve+te(we,Re);Ce+=fe(we,pe,Be,qe,Ee)}else if(qe=k(K),typeof qe=="function")for(K=qe.call(K),Re=0;!(we=K.next()).done;)we=we.value,qe=Ve+te(we,Re++),Ce+=fe(we,pe,Be,qe,Ee);else if(we==="object")throw pe=String(K),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.");return Ce}function ee(K,pe,Be){if(K==null)return K;var Ve=[],Ee=0;return fe(K,Ve,"","",function(we){return pe.call(Be,we,Ee++)}),Ve}function Ae(K){if(K._status===-1){var pe=K._result;pe=pe(),pe.then(function(Be){(K._status===0||K._status===-1)&&(K._status=1,K._result=Be)},function(Be){(K._status===0||K._status===-1)&&(K._status=2,K._result=Be)}),K._status===-1&&(K._status=0,K._result=pe)}if(K._status===1)return K._result.default;throw K._result}var _e={current:null},le={transition:null},ce={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:le,ReactCurrentOwner:Y};function he(){throw Error("act(...) is not supported in production builds of React.")}return Ut.Children={map:ee,forEach:function(K,pe,Be){ee(K,function(){pe.apply(this,arguments)},Be)},count:function(K){var pe=0;return ee(K,function(){pe++}),pe},toArray:function(K){return ee(K,function(pe){return pe})||[]},only:function(K){if(!Q(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Ut.Component=M,Ut.Fragment=n,Ut.Profiler=u,Ut.PureComponent=z,Ut.StrictMode=o,Ut.Suspense=b,Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Ut.act=he,Ut.cloneElement=function(K,pe,Be){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Ve=D({},K.props),Ee=K.key,we=K.ref,Ce=K._owner;if(pe!=null){if(pe.ref!==void 0&&(we=pe.ref,Ce=Y.current),pe.key!==void 0&&(Ee=""+pe.key),K.type&&K.type.defaultProps)var Re=K.type.defaultProps;for(qe in pe)H.call(pe,qe)&&!W.hasOwnProperty(qe)&&(Ve[qe]=pe[qe]===void 0&&Re!==void 0?Re[qe]:pe[qe])}var qe=arguments.length-2;if(qe===1)Ve.children=Be;else if(1<qe){Re=Array(qe);for(var Ke=0;Ke<qe;Ke++)Re[Ke]=arguments[Ke+2];Ve.children=Re}return{$$typeof:r,type:K.type,key:Ee,ref:we,props:Ve,_owner:Ce}},Ut.createContext=function(K){return K={$$typeof:p,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:d,_context:K},K.Consumer=K},Ut.createElement=X,Ut.createFactory=function(K){var pe=X.bind(null,K);return pe.type=K,pe},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(K){return{$$typeof:w,render:K}},Ut.isValidElement=Q,Ut.lazy=function(K){return{$$typeof:_,_payload:{_status:-1,_result:K},_init:Ae}},Ut.memo=function(K,pe){return{$$typeof:y,type:K,compare:pe===void 0?null:pe}},Ut.startTransition=function(K){var pe=le.transition;le.transition={};try{K()}finally{le.transition=pe}},Ut.unstable_act=he,Ut.useCallback=function(K,pe){return _e.current.useCallback(K,pe)},Ut.useContext=function(K){return _e.current.useContext(K)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(K){return _e.current.useDeferredValue(K)},Ut.useEffect=function(K,pe){return _e.current.useEffect(K,pe)},Ut.useId=function(){return _e.current.useId()},Ut.useImperativeHandle=function(K,pe,Be){return _e.current.useImperativeHandle(K,pe,Be)},Ut.useInsertionEffect=function(K,pe){return _e.current.useInsertionEffect(K,pe)},Ut.useLayoutEffect=function(K,pe){return _e.current.useLayoutEffect(K,pe)},Ut.useMemo=function(K,pe){return _e.current.useMemo(K,pe)},Ut.useReducer=function(K,pe,Be){return _e.current.useReducer(K,pe,Be)},Ut.useRef=function(K){return _e.current.useRef(K)},Ut.useState=function(K){return _e.current.useState(K)},Ut.useSyncExternalStore=function(K,pe,Be){return _e.current.useSyncExternalStore(K,pe,Be)},Ut.useTransition=function(){return _e.current.useTransition()},Ut.version="18.3.1",Ut}var Cm;function M0(){return Cm||(Cm=1,rf.exports=Rb()),rf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function kb(){if(Em)return Xl;Em=1;var r=M0(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function p(w,b,y){var _,A={},k=null,R=null;y!==void 0&&(k=""+y),b.key!==void 0&&(k=""+b.key),b.ref!==void 0&&(R=b.ref);for(_ in b)o.call(b,_)&&!d.hasOwnProperty(_)&&(A[_]=b[_]);if(w&&w.defaultProps)for(_ in b=w.defaultProps,b)A[_]===void 0&&(A[_]=b[_]);return{$$typeof:t,type:w,key:k,ref:R,props:A,_owner:u.current}}return Xl.Fragment=n,Xl.jsx=p,Xl.jsxs=p,Xl}var Sm;function jb(){return Sm||(Sm=1,nf.exports=kb()),nf.exports}var c=jb(),_u={},sf={exports:{}},Lr={},of={exports:{}},af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function Ob(){return _m||(_m=1,(function(r){function t(le,ce){var he=le.length;le.push(ce);e:for(;0<he;){var K=he-1>>>1,pe=le[K];if(0<u(pe,ce))le[K]=ce,le[he]=pe,he=K;else break e}}function n(le){return le.length===0?null:le[0]}function o(le){if(le.length===0)return null;var ce=le[0],he=le.pop();if(he!==ce){le[0]=he;e:for(var K=0,pe=le.length,Be=pe>>>1;K<Be;){var Ve=2*(K+1)-1,Ee=le[Ve],we=Ve+1,Ce=le[we];if(0>u(Ee,he))we<pe&&0>u(Ce,Ee)?(le[K]=Ce,le[we]=he,K=we):(le[K]=Ee,le[Ve]=he,K=Ve);else if(we<pe&&0>u(Ce,he))le[K]=Ce,le[we]=he,K=we;else break e}}return ce}function u(le,ce){var he=le.sortIndex-ce.sortIndex;return he!==0?he:le.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var p=Date,w=p.now();r.unstable_now=function(){return p.now()-w}}var b=[],y=[],_=1,A=null,k=3,R=!1,D=!1,j=!1,M=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(le){for(var ce=n(y);ce!==null;){if(ce.callback===null)o(y);else if(ce.startTime<=le)o(y),ce.sortIndex=ce.expirationTime,t(b,ce);else break;ce=n(y)}}function U(le){if(j=!1,B(le),!D)if(n(b)!==null)D=!0,Ae(H);else{var ce=n(y);ce!==null&&_e(U,ce.startTime-le)}}function H(le,ce){D=!1,j&&(j=!1,V(X),X=-1),R=!0;var he=k;try{for(B(ce),A=n(b);A!==null&&(!(A.expirationTime>ce)||le&&!ue());){var K=A.callback;if(typeof K=="function"){A.callback=null,k=A.priorityLevel;var pe=K(A.expirationTime<=ce);ce=r.unstable_now(),typeof pe=="function"?A.callback=pe:A===n(b)&&o(b),B(ce)}else o(b);A=n(b)}if(A!==null)var Be=!0;else{var Ve=n(y);Ve!==null&&_e(U,Ve.startTime-ce),Be=!1}return Be}finally{A=null,k=he,R=!1}}var Y=!1,W=null,X=-1,$=5,Q=-1;function ue(){return!(r.unstable_now()-Q<$)}function ae(){if(W!==null){var le=r.unstable_now();Q=le;var ce=!0;try{ce=W(!0,le)}finally{ce?te():(Y=!1,W=null)}}else Y=!1}var te;if(typeof z=="function")te=function(){z(ae)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ee=fe.port2;fe.port1.onmessage=ae,te=function(){ee.postMessage(null)}}else te=function(){M(ae,0)};function Ae(le){W=le,Y||(Y=!0,te())}function _e(le,ce){X=M(function(){le(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(le){le.callback=null},r.unstable_continueExecution=function(){D||R||(D=!0,Ae(H))},r.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<le?Math.floor(1e3/le):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return n(b)},r.unstable_next=function(le){switch(k){case 1:case 2:case 3:var ce=3;break;default:ce=k}var he=k;k=ce;try{return le()}finally{k=he}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(le,ce){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var he=k;k=le;try{return ce()}finally{k=he}},r.unstable_scheduleCallback=function(le,ce,he){var K=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?K+he:K):he=K,le){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=he+pe,le={id:_++,callback:ce,priorityLevel:le,startTime:he,expirationTime:pe,sortIndex:-1},he>K?(le.sortIndex=he,t(y,le),n(b)===null&&le===n(y)&&(j?(V(X),X=-1):j=!0,_e(U,he-K))):(le.sortIndex=pe,t(b,le),D||R||(D=!0,Ae(H))),le},r.unstable_shouldYield=ue,r.unstable_wrapCallback=function(le){var ce=k;return function(){var he=k;k=ce;try{return le.apply(this,arguments)}finally{k=he}}}})(af)),af}var Am;function Pb(){return Am||(Am=1,of.exports=Ob()),of.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function Db(){if(Nm)return Lr;Nm=1;var r=M0(),t=Pb();function n(s){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+s,m=1;m<arguments.length;m++)l+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function d(s,l){p(s,l),p(s+"Capture",l)}function p(s,l){for(u[s]=l,s=0;s<l.length;s++)o.add(l[s])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},A={};function k(s){return b.call(A,s)?!0:b.call(_,s)?!1:y.test(s)?A[s]=!0:(_[s]=!0,!1)}function R(s,l,m,v){if(m!==null&&m.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return v?!1:m!==null?!m.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,l,m,v){if(l===null||typeof l>"u"||R(s,l,m,v))return!0;if(v)return!1;if(m!==null)switch(m.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function j(s,l,m,v,S,N,L){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=v,this.attributeNamespace=S,this.mustUseProperty=m,this.propertyName=s,this.type=l,this.sanitizeURL=N,this.removeEmptyString=L}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){M[s]=new j(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var l=s[0];M[l]=new j(l,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){M[s]=new j(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){M[s]=new j(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){M[s]=new j(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){M[s]=new j(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){M[s]=new j(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){M[s]=new j(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){M[s]=new j(s,5,!1,s.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function z(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var l=s.replace(V,z);M[l]=new j(l,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var l=s.replace(V,z);M[l]=new j(l,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var l=s.replace(V,z);M[l]=new j(l,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){M[s]=new j(s,1,!1,s.toLowerCase(),null,!1,!1)}),M.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){M[s]=new j(s,1,!1,s.toLowerCase(),null,!0,!0)});function B(s,l,m,v){var S=M.hasOwnProperty(l)?M[l]:null;(S!==null?S.type!==0:v||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(D(l,m,S,v)&&(m=null),v||S===null?k(l)&&(m===null?s.removeAttribute(l):s.setAttribute(l,""+m)):S.mustUseProperty?s[S.propertyName]=m===null?S.type===3?!1:"":m:(l=S.attributeName,v=S.attributeNamespace,m===null?s.removeAttribute(l):(S=S.type,m=S===3||S===4&&m===!0?"":""+m,v?s.setAttributeNS(v,l,m):s.setAttribute(l,m))))}var U=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),Y=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ue=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),le=Symbol.iterator;function ce(s){return s===null||typeof s!="object"?null:(s=le&&s[le]||s["@@iterator"],typeof s=="function"?s:null)}var he=Object.assign,K;function pe(s){if(K===void 0)try{throw Error()}catch(m){var l=m.stack.trim().match(/\n( *(at )?)/);K=l&&l[1]||""}return`
`+K+s}var Be=!1;function Ve(s,l){if(!s||Be)return"";Be=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(be){var v=be}Reflect.construct(s,[],l)}else{try{l.call()}catch(be){v=be}s.call(l.prototype)}else{try{throw Error()}catch(be){v=be}s()}}catch(be){if(be&&v&&typeof be.stack=="string"){for(var S=be.stack.split(`
`),N=v.stack.split(`
`),L=S.length-1,Z=N.length-1;1<=L&&0<=Z&&S[L]!==N[Z];)Z--;for(;1<=L&&0<=Z;L--,Z--)if(S[L]!==N[Z]){if(L!==1||Z!==1)do if(L--,Z--,0>Z||S[L]!==N[Z]){var re=`
`+S[L].replace(" at new "," at ");return s.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",s.displayName)),re}while(1<=L&&0<=Z);break}}}finally{Be=!1,Error.prepareStackTrace=m}return(s=s?s.displayName||s.name:"")?pe(s):""}function Ee(s){switch(s.tag){case 5:return pe(s.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return s=Ve(s.type,!1),s;case 11:return s=Ve(s.type.render,!1),s;case 1:return s=Ve(s.type,!0),s;default:return""}}function we(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case W:return"Fragment";case Y:return"Portal";case $:return"Profiler";case X:return"StrictMode";case te:return"Suspense";case fe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ue:return(s.displayName||"Context")+".Consumer";case Q:return(s._context.displayName||"Context")+".Provider";case ae:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ee:return l=s.displayName||null,l!==null?l:we(s.type)||"Memo";case Ae:l=s._payload,s=s._init;try{return we(s(l))}catch{}}return null}function Ce(s){var l=s.type;switch(s.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=l.render,s=s.displayName||s.name||"",l.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(l);case 8:return l===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Re(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function qe(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ke(s){var l=qe(s)?"checked":"value",m=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),v=""+s[l];if(!s.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,N=m.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return S.call(this)},set:function(L){v=""+L,N.call(this,L)}}),Object.defineProperty(s,l,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(L){v=""+L},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function We(s){s._valueTracker||(s._valueTracker=Ke(s))}function Ct(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var m=l.getValue(),v="";return s&&(v=qe(s)?s.checked?"true":"false":s.value),s=v,s!==m?(l.setValue(s),!0):!1}function nt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Wt(s,l){var m=l.checked;return he({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??s._wrapperState.initialChecked})}function Oe(s,l){var m=l.defaultValue==null?"":l.defaultValue,v=l.checked!=null?l.checked:l.defaultChecked;m=Re(l.value!=null?l.value:m),s._wrapperState={initialChecked:v,initialValue:m,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function rt(s,l){l=l.checked,l!=null&&B(s,"checked",l,!1)}function J(s,l){rt(s,l);var m=Re(l.value),v=l.type;if(m!=null)v==="number"?(m===0&&s.value===""||s.value!=m)&&(s.value=""+m):s.value!==""+m&&(s.value=""+m);else if(v==="submit"||v==="reset"){s.removeAttribute("value");return}l.hasOwnProperty("value")?Le(s,l.type,m):l.hasOwnProperty("defaultValue")&&Le(s,l.type,Re(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(s.defaultChecked=!!l.defaultChecked)}function Se(s,l,m){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var v=l.type;if(!(v!=="submit"&&v!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+s._wrapperState.initialValue,m||l===s.value||(s.value=l),s.defaultValue=l}m=s.name,m!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,m!==""&&(s.name=m)}function Le(s,l,m){(l!=="number"||nt(s.ownerDocument)!==s)&&(m==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+m&&(s.defaultValue=""+m))}var bt=Array.isArray;function ke(s,l,m,v){if(s=s.options,l){l={};for(var S=0;S<m.length;S++)l["$"+m[S]]=!0;for(m=0;m<s.length;m++)S=l.hasOwnProperty("$"+s[m].value),s[m].selected!==S&&(s[m].selected=S),S&&v&&(s[m].defaultSelected=!0)}else{for(m=""+Re(m),l=null,S=0;S<s.length;S++){if(s[S].value===m){s[S].selected=!0,v&&(s[S].defaultSelected=!0);return}l!==null||s[S].disabled||(l=s[S])}l!==null&&(l.selected=!0)}}function Xt(s,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return he({},l,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function lt(s,l){var m=l.value;if(m==null){if(m=l.children,l=l.defaultValue,m!=null){if(l!=null)throw Error(n(92));if(bt(m)){if(1<m.length)throw Error(n(93));m=m[0]}l=m}l==null&&(l=""),m=l}s._wrapperState={initialValue:Re(m)}}function mt(s,l){var m=Re(l.value),v=Re(l.defaultValue);m!=null&&(m=""+m,m!==s.value&&(s.value=m),l.defaultValue==null&&s.defaultValue!==m&&(s.defaultValue=m)),v!=null&&(s.defaultValue=""+v)}function Vn(s){var l=s.textContent;l===s._wrapperState.initialValue&&l!==""&&l!==null&&(s.value=l)}function $t(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Et(s,l){return s==null||s==="http://www.w3.org/1999/xhtml"?$t(l):s==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var It,sn=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,m,v,S){MSApp.execUnsafeLocalFunction(function(){return s(l,m,v,S)})}:s})(function(s,l){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=l;else{for(It=It||document.createElement("div"),It.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=It.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;l.firstChild;)s.appendChild(l.firstChild)}});function Wn(s,l){if(l){var m=s.firstChild;if(m&&m===s.lastChild&&m.nodeType===3){m.nodeValue=l;return}}s.textContent=l}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dl=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(s){dl.forEach(function(l){l=l+s.charAt(0).toUpperCase()+s.substring(1),ns[l]=ns[s]})});function wn(s,l,m){return l==null||typeof l=="boolean"||l===""?"":m||typeof l!="number"||l===0||ns.hasOwnProperty(s)&&ns[s]?(""+l).trim():l+"px"}function Ge(s,l){s=s.style;for(var m in l)if(l.hasOwnProperty(m)){var v=m.indexOf("--")===0,S=wn(m,l[m],v);m==="float"&&(m="cssFloat"),v?s.setProperty(m,S):s[m]=S}}var Sn=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kt(s,l){if(l){if(Sn[s]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function ln(s,l){if(s.indexOf("-")===-1)return typeof l.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ps=null;function ei(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ai=null,Lt=null,xr=null;function ie(s){if(s=Ol(s)){if(typeof Ai!="function")throw Error(n(280));var l=s.stateNode;l&&(l=Fc(l),Ai(s.stateNode,s.type,l))}}function Ie(s){Lt?xr?xr.push(s):xr=[s]:Lt=s}function je(){if(Lt){var s=Lt,l=xr;if(xr=Lt=null,ie(s),l)for(s=0;s<l.length;s++)ie(l[s])}}function Ze(s,l){return s(l)}function pt(){}var zt=!1;function on(s,l,m){if(zt)return s(l,m);zt=!0;try{return Ze(s,l,m)}finally{zt=!1,(Lt!==null||xr!==null)&&(pt(),je())}}function Gt(s,l){var m=s.stateNode;if(m===null)return null;var v=Fc(m);if(v===null)return null;m=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(m&&typeof m!="function")throw Error(n(231,l,typeof m));return m}var Ur=!1;if(w)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Ur=!1}function zr(s,l,m,v,S,N,L,Z,re){var be=Array.prototype.slice.call(arguments,3);try{l.apply(m,be)}catch(Me){this.onError(Me)}}var hn=!1,rs=null,lr=!1,Xe=null,Ni={onError:function(s){hn=!0,rs=s}};function hl(s,l,m,v,S,N,L,Z,re){hn=!1,rs=null,zr.apply(Ni,arguments)}function wr(s,l,m,v,S,N,L,Z,re){if(hl.apply(this,arguments),hn){if(hn){var be=rs;hn=!1,rs=null}else throw Error(n(198));lr||(lr=!0,Xe=be)}}function kr(s){var l=s,m=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(m=l.return),s=l.return;while(s)}return l.tag===3?m:null}function wo(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function yo(s){if(kr(s)!==s)throw Error(n(188))}function ss(s){var l=s.alternate;if(!l){if(l=kr(s),l===null)throw Error(n(188));return l!==s?null:s}for(var m=s,v=l;;){var S=m.return;if(S===null)break;var N=S.alternate;if(N===null){if(v=S.return,v!==null){m=v;continue}break}if(S.child===N.child){for(N=S.child;N;){if(N===m)return yo(S),s;if(N===v)return yo(S),l;N=N.sibling}throw Error(n(188))}if(m.return!==v.return)m=S,v=N;else{for(var L=!1,Z=S.child;Z;){if(Z===m){L=!0,m=S,v=N;break}if(Z===v){L=!0,v=S,m=N;break}Z=Z.sibling}if(!L){for(Z=N.child;Z;){if(Z===m){L=!0,m=N,v=S;break}if(Z===v){L=!0,v=N,m=S;break}Z=Z.sibling}if(!L)throw Error(n(189))}}if(m.alternate!==v)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?s:l}function wc(s){return s=ss(s),s!==null?yc(s):null}function yc(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var l=yc(s);if(l!==null)return l;s=s.sibling}return null}var Vr=t.unstable_scheduleCallback,er=t.unstable_cancelCallback,fn=t.unstable_shouldYield,vc=t.unstable_requestPaint,nn=t.unstable_now,fl=t.unstable_getCurrentPriorityLevel,Te=t.unstable_ImmediatePriority,bc=t.unstable_UserBlockingPriority,un=t.unstable_NormalPriority,Ii=t.unstable_LowPriority,Cc=t.unstable_IdlePriority,qt=null,Pt=null;function Vt(s){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(qt,s,void 0,(s.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:Pn,gl=Math.log,ml=Math.LN2;function Pn(s){return s>>>=0,s===0?32:31-(gl(s)/ml|0)|0}var Wr=64,ia=4194304;function dn(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function $r(s,l){var m=s.pendingLanes;if(m===0)return 0;var v=0,S=s.suspendedLanes,N=s.pingedLanes,L=m&268435455;if(L!==0){var Z=L&~S;Z!==0?v=dn(Z):(N&=L,N!==0&&(v=dn(N)))}else L=m&~S,L!==0?v=dn(L):N!==0&&(v=dn(N));if(v===0)return 0;if(l!==0&&l!==v&&(l&S)===0&&(S=v&-v,N=l&-l,S>=N||S===16&&(N&4194240)!==0))return l;if((v&4)!==0&&(v|=m&16),l=s.entangledLanes,l!==0)for(s=s.entanglements,l&=v;0<l;)m=31-Ir(l),S=1<<m,v|=s[m],l&=~S;return v}function Md(s,l){switch(s){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(s,l){for(var m=s.suspendedLanes,v=s.pingedLanes,S=s.expirationTimes,N=s.pendingLanes;0<N;){var L=31-Ir(N),Z=1<<L,re=S[L];re===-1?((Z&m)===0||(Z&v)!==0)&&(S[L]=Md(Z,l)):re<=l&&(s.expiredLanes|=Z),N&=~Z}}function rn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function $n(){var s=Wr;return Wr<<=1,(Wr&4194240)===0&&(Wr=64),s}function ge(s){for(var l=[],m=0;31>m;m++)l.push(s);return l}function G(s,l,m){s.pendingLanes|=l,l!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,l=31-Ir(l),s[l]=m}function ht(s,l){var m=s.pendingLanes&~l;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=l,s.mutableReadLanes&=l,s.entangledLanes&=l,l=s.entanglements;var v=s.eventTimes;for(s=s.expirationTimes;0<m;){var S=31-Ir(m),N=1<<S;l[S]=0,v[S]=-1,s[S]=-1,m&=~N}}function Rn(s,l){var m=s.entangledLanes|=l;for(s=s.entanglements;m;){var v=31-Ir(m),S=1<<v;S&l|s[v]&l&&(s[v]|=l),m&=~S}}var Dt=0;function Ec(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var oa,yr,ft,gn,pl,xl=!1,Ri=[],Hr=null,is=null,Bs=null,Cn=new Map,xs=new Map,cr=[],vt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(s,l){switch(s){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Cn.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(l.pointerId)}}function Tt(s,l,m,v,S,N){return s===null||s.nativeEvent!==N?(s={blockedOn:l,domEventName:m,eventSystemFlags:v,nativeEvent:N,targetContainers:[S]},l!==null&&(l=Ol(l),l!==null&&yr(l)),s):(s.eventSystemFlags|=v,l=s.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),s)}function Hn(s,l,m,v,S){switch(l){case"focusin":return Hr=Tt(Hr,s,l,m,v,S),!0;case"dragenter":return is=Tt(is,s,l,m,v,S),!0;case"mouseover":return Bs=Tt(Bs,s,l,m,v,S),!0;case"pointerover":var N=S.pointerId;return Cn.set(N,Tt(Cn.get(N)||null,s,l,m,v,S)),!0;case"gotpointercapture":return N=S.pointerId,xs.set(N,Tt(xs.get(N)||null,s,l,m,v,S)),!0}return!1}function _c(s){var l=To(s.target);if(l!==null){var m=kr(l);if(m!==null){if(l=m.tag,l===13){if(l=wo(m),l!==null){s.blockedOn=l,pl(s.priority,function(){ft(m)});return}}else if(l===3&&m.stateNode.current.memoizedState.isDehydrated){s.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ki(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var m=aa(s.domEventName,s.eventSystemFlags,l[0],s.nativeEvent);if(m===null){m=s.nativeEvent;var v=new m.constructor(m.type,m);ps=v,m.target.dispatchEvent(v),ps=null}else return l=Ol(m),l!==null&&yr(l),s.blockedOn=m,!1;l.shift()}return!0}function wl(s,l,m){ki(s)&&m.delete(l)}function ti(){xl=!1,Hr!==null&&ki(Hr)&&(Hr=null),is!==null&&ki(is)&&(is=null),Bs!==null&&ki(Bs)&&(Bs=null),Cn.forEach(wl),xs.forEach(wl)}function vo(s,l){s.blockedOn===l&&(s.blockedOn=null,xl||(xl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ti)))}function ws(s){function l(S){return vo(S,s)}if(0<Ri.length){vo(Ri[0],s);for(var m=1;m<Ri.length;m++){var v=Ri[m];v.blockedOn===s&&(v.blockedOn=null)}}for(Hr!==null&&vo(Hr,s),is!==null&&vo(is,s),Bs!==null&&vo(Bs,s),Cn.forEach(l),xs.forEach(l),m=0;m<cr.length;m++)v=cr[m],v.blockedOn===s&&(v.blockedOn=null);for(;0<cr.length&&(m=cr[0],m.blockedOn===null);)_c(m),m.blockedOn===null&&cr.shift()}var os=U.ReactCurrentBatchConfig,Fs=!0;function Ac(s,l,m,v){var S=Dt,N=os.transition;os.transition=null;try{Dt=1,ni(s,l,m,v)}finally{Dt=S,os.transition=N}}function bo(s,l,m,v){var S=Dt,N=os.transition;os.transition=null;try{Dt=4,ni(s,l,m,v)}finally{Dt=S,os.transition=N}}function ni(s,l,m,v){if(Fs){var S=aa(s,l,m,v);if(S===null)Gd(s,l,v,Gn,m),Sc(s,v);else if(Hn(S,s,l,m,v))v.stopPropagation();else if(Sc(s,v),l&4&&-1<vt.indexOf(s)){for(;S!==null;){var N=Ol(S);if(N!==null&&oa(N),N=aa(s,l,m,v),N===null&&Gd(s,l,v,Gn,m),N===S)break;S=N}S!==null&&v.stopPropagation()}else Gd(s,l,v,null,m)}}var Gn=null;function aa(s,l,m,v){if(Gn=null,s=ei(v),s=To(s),s!==null)if(l=kr(s),l===null)s=null;else if(m=l.tag,m===13){if(s=wo(l),s!==null)return s;s=null}else if(m===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null);return Gn=s,null}function yl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fl()){case Te:return 1;case bc:return 4;case un:case Ii:return 16;case Cc:return 536870912;default:return 16}default:return 16}}var ys=null,vl=null,la=null;function Nc(){if(la)return la;var s,l=vl,m=l.length,v,S="value"in ys?ys.value:ys.textContent,N=S.length;for(s=0;s<m&&l[s]===S[s];s++);var L=m-s;for(v=1;v<=L&&l[m-v]===S[N-v];v++);return la=S.slice(s,1<v?1-v:void 0)}function Yt(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Co(){return!0}function Eo(){return!1}function kn(s){function l(m,v,S,N,L){this._reactName=m,this._targetInst=S,this.type=v,this.nativeEvent=N,this.target=L,this.currentTarget=null;for(var Z in s)s.hasOwnProperty(Z)&&(m=s[Z],this[Z]=m?m(N):N[Z]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Co:Eo,this.isPropagationStopped=Eo,this}return he(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),l}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ve=kn(ji),jt=he({},ji,{view:0,detail:0}),qn=kn(jt),Oi,ca,So,ua=he({},jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==So&&(So&&s.type==="mousemove"?(Oi=s.screenX-So.screenX,ca=s.screenY-So.screenY):ca=Oi=0,So=s),Oi)},movementY:function(s){return"movementY"in s?s.movementY:ca}}),Ic=kn(ua),bl=he({},ua,{dataTransfer:0}),Dn=kn(bl),Cl=he({},jt,{relatedTarget:0}),mn=kn(Cl),da=he({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),ri=kn(da),an=he({},ji,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),xt=kn(an),Ld=he({},ji,{data:0}),cn=kn(Ld),si={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function as(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Bd[s])?!!l[s]:!1}function _o(){return as}var Tc=he({},jt,{key:function(s){if(s.key){var l=si[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Yt(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Pi[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(s){return s.type==="keypress"?Yt(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Yt(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),El=kn(Tc),Rc=he({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sl=kn(Rc),Fd=he({},jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),Di=kn(Fd),_l=he({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ud=kn(_l),Ao=he({},ua,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),zd=kn(Ao),Us=[9,13,27,32],Mi=w&&"CompositionEvent"in window,tr=null;w&&"documentMode"in document&&(tr=document.documentMode);var kc=w&&"TextEvent"in window&&!tr,Gr=w&&(!Mi||tr&&8<tr&&11>=tr),jc=" ",ha=!1;function Oc(s,l){switch(s){case"keyup":return Us.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Al(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ur=!1;function Vd(s,l){switch(s){case"compositionend":return Al(l);case"keypress":return l.which!==32?null:(ha=!0,jc);case"textInput":return s=l.data,s===jc&&ha?null:s;default:return null}}function Nl(s,l){if(ur)return s==="compositionend"||!Mi&&Oc(s,l)?(s=Nc(),la=vl=ys=null,ur=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Gr&&l.locale!=="ko"?null:l.data;default:return null}}var No={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!No[s.type]:l==="textarea"}function Io(s,l,m,v){Ie(v),l=Mc(l,"onChange"),0<l.length&&(m=new ve("onChange","change",null,m,v),s.push({event:m,listeners:l}))}var O=null,e=null;function i(s){L1(s,0)}function a(s){var l=ma(s);if(Ct(l))return s}function h(s,l){if(s==="change")return l}var f=!1;if(w){var g;if(w){var x="oninput"in document;if(!x){var C=document.createElement("div");C.setAttribute("oninput","return;"),x=typeof C.oninput=="function"}g=x}else g=!1;f=g&&(!document.documentMode||9<document.documentMode)}function E(){O&&(O.detachEvent("onpropertychange",T),e=O=null)}function T(s){if(s.propertyName==="value"&&a(e)){var l=[];Io(l,e,s,ei(s)),on(i,l)}}function P(s,l,m){s==="focusin"?(E(),O=l,e=m,O.attachEvent("onpropertychange",T)):s==="focusout"&&E()}function F(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return a(e)}function q(s,l){if(s==="click")return a(l)}function ne(s,l){if(s==="input"||s==="change")return a(l)}function se(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var de=typeof Object.is=="function"?Object.is:se;function ye(s,l){if(de(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var m=Object.keys(s),v=Object.keys(l);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var S=m[v];if(!b.call(l,S)||!de(s[S],l[S]))return!1}return!0}function Ue(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ze(s,l){var m=Ue(s);s=0;for(var v;m;){if(m.nodeType===3){if(v=s+m.textContent.length,s<=l&&v>=l)return{node:m,offset:l-s};s=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ue(m)}}function De(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?De(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Bt(){for(var s=window,l=nt();l instanceof s.HTMLIFrameElement;){try{var m=typeof l.contentWindow.location.href=="string"}catch{m=!1}if(m)s=l.contentWindow;else break;l=nt(s.document)}return l}function Rt(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function vr(s){var l=Bt(),m=s.focusedElem,v=s.selectionRange;if(l!==m&&m&&m.ownerDocument&&De(m.ownerDocument.documentElement,m)){if(v!==null&&Rt(m)){if(l=v.start,s=v.end,s===void 0&&(s=l),"selectionStart"in m)m.selectionStart=l,m.selectionEnd=Math.min(s,m.value.length);else if(s=(l=m.ownerDocument||document)&&l.defaultView||window,s.getSelection){s=s.getSelection();var S=m.textContent.length,N=Math.min(v.start,S);v=v.end===void 0?N:Math.min(v.end,S),!s.extend&&N>v&&(S=v,v=N,N=S),S=ze(m,N);var L=ze(m,v);S&&L&&(s.rangeCount!==1||s.anchorNode!==S.node||s.anchorOffset!==S.offset||s.focusNode!==L.node||s.focusOffset!==L.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),s.removeAllRanges(),N>v?(s.addRange(l),s.extend(L.node,L.offset)):(l.setEnd(L.node,L.offset),s.addRange(l)))}}for(l=[],s=m;s=s.parentNode;)s.nodeType===1&&l.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<l.length;m++)s=l[m],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var qr=w&&"documentMode"in document&&11>=document.documentMode,Mn=null,en=null,_n=null,dr=!1;function ii(s,l,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;dr||Mn==null||Mn!==nt(v)||(v=Mn,"selectionStart"in v&&Rt(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),_n&&ye(_n,v)||(_n=v,v=Mc(en,"onSelect"),0<v.length&&(l=new ve("onSelect","select",null,l,m),s.push({event:l,listeners:v}),l.target=Mn)))}function vs(s,l){var m={};return m[s.toLowerCase()]=l.toLowerCase(),m["Webkit"+s]="webkit"+l,m["Moz"+s]="moz"+l,m}var Li={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionend:vs("Transition","TransitionEnd")},Il={},T1={};w&&(T1=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function Pc(s){if(Il[s])return Il[s];if(!Li[s])return s;var l=Li[s],m;for(m in l)if(l.hasOwnProperty(m)&&m in T1)return Il[s]=l[m];return s}var R1=Pc("animationend"),k1=Pc("animationiteration"),j1=Pc("animationstart"),O1=Pc("transitionend"),P1=new Map,D1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bi(s,l){P1.set(s,l),d(l,[s])}for(var Wd=0;Wd<D1.length;Wd++){var $d=D1[Wd],B2=$d.toLowerCase(),F2=$d[0].toUpperCase()+$d.slice(1);Bi(B2,"on"+F2)}Bi(R1,"onAnimationEnd"),Bi(k1,"onAnimationIteration"),Bi(j1,"onAnimationStart"),Bi("dblclick","onDoubleClick"),Bi("focusin","onFocus"),Bi("focusout","onBlur"),Bi(O1,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tl));function M1(s,l,m){var v=s.type||"unknown-event";s.currentTarget=m,wr(v,l,void 0,s),s.currentTarget=null}function L1(s,l){l=(l&4)!==0;for(var m=0;m<s.length;m++){var v=s[m],S=v.event;v=v.listeners;e:{var N=void 0;if(l)for(var L=v.length-1;0<=L;L--){var Z=v[L],re=Z.instance,be=Z.currentTarget;if(Z=Z.listener,re!==N&&S.isPropagationStopped())break e;M1(S,Z,be),N=re}else for(L=0;L<v.length;L++){if(Z=v[L],re=Z.instance,be=Z.currentTarget,Z=Z.listener,re!==N&&S.isPropagationStopped())break e;M1(S,Z,be),N=re}}}if(lr)throw s=Xe,lr=!1,Xe=null,s}function yn(s,l){var m=l[Qd];m===void 0&&(m=l[Qd]=new Set);var v=s+"__bubble";m.has(v)||(B1(l,s,2,!1),m.add(v))}function Hd(s,l,m){var v=0;l&&(v|=4),B1(m,s,v,l)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function Rl(s){if(!s[Dc]){s[Dc]=!0,o.forEach(function(m){m!=="selectionchange"&&(U2.has(m)||Hd(m,!1,s),Hd(m,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Dc]||(l[Dc]=!0,Hd("selectionchange",!1,l))}}function B1(s,l,m,v){switch(yl(l)){case 1:var S=Ac;break;case 4:S=bo;break;default:S=ni}m=S.bind(null,l,m,s),S=void 0,!Ur||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),v?S!==void 0?s.addEventListener(l,m,{capture:!0,passive:S}):s.addEventListener(l,m,!0):S!==void 0?s.addEventListener(l,m,{passive:S}):s.addEventListener(l,m,!1)}function Gd(s,l,m,v,S){var N=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var L=v.tag;if(L===3||L===4){var Z=v.stateNode.containerInfo;if(Z===S||Z.nodeType===8&&Z.parentNode===S)break;if(L===4)for(L=v.return;L!==null;){var re=L.tag;if((re===3||re===4)&&(re=L.stateNode.containerInfo,re===S||re.nodeType===8&&re.parentNode===S))return;L=L.return}for(;Z!==null;){if(L=To(Z),L===null)return;if(re=L.tag,re===5||re===6){v=N=L;continue e}Z=Z.parentNode}}v=v.return}on(function(){var be=N,Me=ei(m),Fe=[];e:{var Pe=P1.get(s);if(Pe!==void 0){var Ye=ve,st=s;switch(s){case"keypress":if(Yt(m)===0)break e;case"keydown":case"keyup":Ye=El;break;case"focusin":st="focus",Ye=mn;break;case"focusout":st="blur",Ye=mn;break;case"beforeblur":case"afterblur":Ye=mn;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=Dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=Di;break;case R1:case k1:case j1:Ye=ri;break;case O1:Ye=Ud;break;case"scroll":Ye=qn;break;case"wheel":Ye=zd;break;case"copy":case"cut":case"paste":Ye=xt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=Sl}var at=(l&4)!==0,Ln=!at&&s==="scroll",me=at?Pe!==null?Pe+"Capture":null:Pe;at=[];for(var oe=be,xe;oe!==null;){xe=oe;var He=xe.stateNode;if(xe.tag===5&&He!==null&&(xe=He,me!==null&&(He=Gt(oe,me),He!=null&&at.push(kl(oe,He,xe)))),Ln)break;oe=oe.return}0<at.length&&(Pe=new Ye(Pe,st,null,m,Me),Fe.push({event:Pe,listeners:at}))}}if((l&7)===0){e:{if(Pe=s==="mouseover"||s==="pointerover",Ye=s==="mouseout"||s==="pointerout",Pe&&m!==ps&&(st=m.relatedTarget||m.fromElement)&&(To(st)||st[oi]))break e;if((Ye||Pe)&&(Pe=Me.window===Me?Me:(Pe=Me.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,Ye?(st=m.relatedTarget||m.toElement,Ye=be,st=st?To(st):null,st!==null&&(Ln=kr(st),st!==Ln||st.tag!==5&&st.tag!==6)&&(st=null)):(Ye=null,st=be),Ye!==st)){if(at=Ic,He="onMouseLeave",me="onMouseEnter",oe="mouse",(s==="pointerout"||s==="pointerover")&&(at=Sl,He="onPointerLeave",me="onPointerEnter",oe="pointer"),Ln=Ye==null?Pe:ma(Ye),xe=st==null?Pe:ma(st),Pe=new at(He,oe+"leave",Ye,m,Me),Pe.target=Ln,Pe.relatedTarget=xe,He=null,To(Me)===be&&(at=new at(me,oe+"enter",st,m,Me),at.target=xe,at.relatedTarget=Ln,He=at),Ln=He,Ye&&st)t:{for(at=Ye,me=st,oe=0,xe=at;xe;xe=fa(xe))oe++;for(xe=0,He=me;He;He=fa(He))xe++;for(;0<oe-xe;)at=fa(at),oe--;for(;0<xe-oe;)me=fa(me),xe--;for(;oe--;){if(at===me||me!==null&&at===me.alternate)break t;at=fa(at),me=fa(me)}at=null}else at=null;Ye!==null&&F1(Fe,Pe,Ye,at,!1),st!==null&&Ln!==null&&F1(Fe,Ln,st,at,!0)}}e:{if(Pe=be?ma(be):window,Ye=Pe.nodeName&&Pe.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&Pe.type==="file")var ct=h;else if(Ht(Pe))if(f)ct=ne;else{ct=F;var wt=P}else(Ye=Pe.nodeName)&&Ye.toLowerCase()==="input"&&(Pe.type==="checkbox"||Pe.type==="radio")&&(ct=q);if(ct&&(ct=ct(s,be))){Io(Fe,ct,m,Me);break e}wt&&wt(s,Pe,be),s==="focusout"&&(wt=Pe._wrapperState)&&wt.controlled&&Pe.type==="number"&&Le(Pe,"number",Pe.value)}switch(wt=be?ma(be):window,s){case"focusin":(Ht(wt)||wt.contentEditable==="true")&&(Mn=wt,en=be,_n=null);break;case"focusout":_n=en=Mn=null;break;case"mousedown":dr=!0;break;case"contextmenu":case"mouseup":case"dragend":dr=!1,ii(Fe,m,Me);break;case"selectionchange":if(qr)break;case"keydown":case"keyup":ii(Fe,m,Me)}var yt;if(Mi)e:{switch(s){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else ur?Oc(s,m)&&(At="onCompositionEnd"):s==="keydown"&&m.keyCode===229&&(At="onCompositionStart");At&&(Gr&&m.locale!=="ko"&&(ur||At!=="onCompositionStart"?At==="onCompositionEnd"&&ur&&(yt=Nc()):(ys=Me,vl="value"in ys?ys.value:ys.textContent,ur=!0)),wt=Mc(be,At),0<wt.length&&(At=new cn(At,s,null,m,Me),Fe.push({event:At,listeners:wt}),yt?At.data=yt:(yt=Al(m),yt!==null&&(At.data=yt)))),(yt=kc?Vd(s,m):Nl(s,m))&&(be=Mc(be,"onBeforeInput"),0<be.length&&(Me=new cn("onBeforeInput","beforeinput",null,m,Me),Fe.push({event:Me,listeners:be}),Me.data=yt))}L1(Fe,l)})}function kl(s,l,m){return{instance:s,listener:l,currentTarget:m}}function Mc(s,l){for(var m=l+"Capture",v=[];s!==null;){var S=s,N=S.stateNode;S.tag===5&&N!==null&&(S=N,N=Gt(s,m),N!=null&&v.unshift(kl(s,N,S)),N=Gt(s,l),N!=null&&v.push(kl(s,N,S))),s=s.return}return v}function fa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function F1(s,l,m,v,S){for(var N=l._reactName,L=[];m!==null&&m!==v;){var Z=m,re=Z.alternate,be=Z.stateNode;if(re!==null&&re===v)break;Z.tag===5&&be!==null&&(Z=be,S?(re=Gt(m,N),re!=null&&L.unshift(kl(m,re,Z))):S||(re=Gt(m,N),re!=null&&L.push(kl(m,re,Z)))),m=m.return}L.length!==0&&s.push({event:l,listeners:L})}var z2=/\r\n?/g,V2=/\u0000|\uFFFD/g;function U1(s){return(typeof s=="string"?s:""+s).replace(z2,`
`).replace(V2,"")}function Lc(s,l,m){if(l=U1(l),U1(s)!==l&&m)throw Error(n(425))}function Bc(){}var qd=null,Xd=null;function Kd(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Yd=typeof setTimeout=="function"?setTimeout:void 0,W2=typeof clearTimeout=="function"?clearTimeout:void 0,z1=typeof Promise=="function"?Promise:void 0,$2=typeof queueMicrotask=="function"?queueMicrotask:typeof z1<"u"?function(s){return z1.resolve(null).then(s).catch(H2)}:Yd;function H2(s){setTimeout(function(){throw s})}function Zd(s,l){var m=l,v=0;do{var S=m.nextSibling;if(s.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(v===0){s.removeChild(S),ws(l);return}v--}else m!=="$"&&m!=="$?"&&m!=="$!"||v++;m=S}while(m);ws(l)}function Fi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return s}function V1(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var m=s.data;if(m==="$"||m==="$!"||m==="$?"){if(l===0)return s;l--}else m==="/$"&&l++}s=s.previousSibling}return null}var ga=Math.random().toString(36).slice(2),zs="__reactFiber$"+ga,jl="__reactProps$"+ga,oi="__reactContainer$"+ga,Qd="__reactEvents$"+ga,G2="__reactListeners$"+ga,q2="__reactHandles$"+ga;function To(s){var l=s[zs];if(l)return l;for(var m=s.parentNode;m;){if(l=m[oi]||m[zs]){if(m=l.alternate,l.child!==null||m!==null&&m.child!==null)for(s=V1(s);s!==null;){if(m=s[zs])return m;s=V1(s)}return l}s=m,m=s.parentNode}return null}function Ol(s){return s=s[zs]||s[oi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ma(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Fc(s){return s[jl]||null}var Jd=[],pa=-1;function Ui(s){return{current:s}}function vn(s){0>pa||(s.current=Jd[pa],Jd[pa]=null,pa--)}function pn(s,l){pa++,Jd[pa]=s.current,s.current=l}var zi={},br=Ui(zi),jr=Ui(!1),Ro=zi;function xa(s,l){var m=s.type.contextTypes;if(!m)return zi;var v=s.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===l)return v.__reactInternalMemoizedMaskedChildContext;var S={},N;for(N in m)S[N]=l[N];return v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=S),S}function Or(s){return s=s.childContextTypes,s!=null}function Uc(){vn(jr),vn(br)}function W1(s,l,m){if(br.current!==zi)throw Error(n(168));pn(br,l),pn(jr,m)}function $1(s,l,m){var v=s.stateNode;if(l=l.childContextTypes,typeof v.getChildContext!="function")return m;v=v.getChildContext();for(var S in v)if(!(S in l))throw Error(n(108,Ce(s)||"Unknown",S));return he({},m,v)}function zc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||zi,Ro=br.current,pn(br,s),pn(jr,jr.current),!0}function H1(s,l,m){var v=s.stateNode;if(!v)throw Error(n(169));m?(s=$1(s,l,Ro),v.__reactInternalMemoizedMergedChildContext=s,vn(jr),vn(br),pn(br,s)):vn(jr),pn(jr,m)}var ai=null,Vc=!1,eh=!1;function G1(s){ai===null?ai=[s]:ai.push(s)}function X2(s){Vc=!0,G1(s)}function Vi(){if(!eh&&ai!==null){eh=!0;var s=0,l=Dt;try{var m=ai;for(Dt=1;s<m.length;s++){var v=m[s];do v=v(!0);while(v!==null)}ai=null,Vc=!1}catch(S){throw ai!==null&&(ai=ai.slice(s+1)),Vr(Te,Vi),S}finally{Dt=l,eh=!1}}return null}var wa=[],ya=0,Wc=null,$c=0,ls=[],cs=0,ko=null,li=1,ci="";function jo(s,l){wa[ya++]=$c,wa[ya++]=Wc,Wc=s,$c=l}function q1(s,l,m){ls[cs++]=li,ls[cs++]=ci,ls[cs++]=ko,ko=s;var v=li;s=ci;var S=32-Ir(v)-1;v&=~(1<<S),m+=1;var N=32-Ir(l)+S;if(30<N){var L=S-S%5;N=(v&(1<<L)-1).toString(32),v>>=L,S-=L,li=1<<32-Ir(l)+S|m<<S|v,ci=N+s}else li=1<<N|m<<S|v,ci=s}function th(s){s.return!==null&&(jo(s,1),q1(s,1,0))}function nh(s){for(;s===Wc;)Wc=wa[--ya],wa[ya]=null,$c=wa[--ya],wa[ya]=null;for(;s===ko;)ko=ls[--cs],ls[cs]=null,ci=ls[--cs],ls[cs]=null,li=ls[--cs],ls[cs]=null}var Xr=null,Kr=null,En=!1,bs=null;function X1(s,l){var m=fs(5,null,null,0);m.elementType="DELETED",m.stateNode=l,m.return=s,l=s.deletions,l===null?(s.deletions=[m],s.flags|=16):l.push(m)}function K1(s,l){switch(s.tag){case 5:var m=s.type;return l=l.nodeType!==1||m.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(s.stateNode=l,Xr=s,Kr=Fi(l.firstChild),!0):!1;case 6:return l=s.pendingProps===""||l.nodeType!==3?null:l,l!==null?(s.stateNode=l,Xr=s,Kr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(m=ko!==null?{id:li,overflow:ci}:null,s.memoizedState={dehydrated:l,treeContext:m,retryLane:1073741824},m=fs(18,null,null,0),m.stateNode=l,m.return=s,s.child=m,Xr=s,Kr=null,!0):!1;default:return!1}}function rh(s){return(s.mode&1)!==0&&(s.flags&128)===0}function sh(s){if(En){var l=Kr;if(l){var m=l;if(!K1(s,l)){if(rh(s))throw Error(n(418));l=Fi(m.nextSibling);var v=Xr;l&&K1(s,l)?X1(v,m):(s.flags=s.flags&-4097|2,En=!1,Xr=s)}}else{if(rh(s))throw Error(n(418));s.flags=s.flags&-4097|2,En=!1,Xr=s}}}function Y1(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Xr=s}function Hc(s){if(s!==Xr)return!1;if(!En)return Y1(s),En=!0,!1;var l;if((l=s.tag!==3)&&!(l=s.tag!==5)&&(l=s.type,l=l!=="head"&&l!=="body"&&!Kd(s.type,s.memoizedProps)),l&&(l=Kr)){if(rh(s))throw Z1(),Error(n(418));for(;l;)X1(s,l),l=Fi(l.nextSibling)}if(Y1(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8){var m=s.data;if(m==="/$"){if(l===0){Kr=Fi(s.nextSibling);break e}l--}else m!=="$"&&m!=="$!"&&m!=="$?"||l++}s=s.nextSibling}Kr=null}}else Kr=Xr?Fi(s.stateNode.nextSibling):null;return!0}function Z1(){for(var s=Kr;s;)s=Fi(s.nextSibling)}function va(){Kr=Xr=null,En=!1}function ih(s){bs===null?bs=[s]:bs.push(s)}var K2=U.ReactCurrentBatchConfig;function Pl(s,l,m){if(s=m.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var v=m.stateNode}if(!v)throw Error(n(147,s));var S=v,N=""+s;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===N?l.ref:(l=function(L){var Z=S.refs;L===null?delete Z[N]:Z[N]=L},l._stringRef=N,l)}if(typeof s!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,s))}return s}function Gc(s,l){throw s=Object.prototype.toString.call(l),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s))}function Q1(s){var l=s._init;return l(s._payload)}function J1(s){function l(me,oe){if(s){var xe=me.deletions;xe===null?(me.deletions=[oe],me.flags|=16):xe.push(oe)}}function m(me,oe){if(!s)return null;for(;oe!==null;)l(me,oe),oe=oe.sibling;return null}function v(me,oe){for(me=new Map;oe!==null;)oe.key!==null?me.set(oe.key,oe):me.set(oe.index,oe),oe=oe.sibling;return me}function S(me,oe){return me=Yi(me,oe),me.index=0,me.sibling=null,me}function N(me,oe,xe){return me.index=xe,s?(xe=me.alternate,xe!==null?(xe=xe.index,xe<oe?(me.flags|=2,oe):xe):(me.flags|=2,oe)):(me.flags|=1048576,oe)}function L(me){return s&&me.alternate===null&&(me.flags|=2),me}function Z(me,oe,xe,He){return oe===null||oe.tag!==6?(oe=Yh(xe,me.mode,He),oe.return=me,oe):(oe=S(oe,xe),oe.return=me,oe)}function re(me,oe,xe,He){var ct=xe.type;return ct===W?Me(me,oe,xe.props.children,He,xe.key):oe!==null&&(oe.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Ae&&Q1(ct)===oe.type)?(He=S(oe,xe.props),He.ref=Pl(me,oe,xe),He.return=me,He):(He=pu(xe.type,xe.key,xe.props,null,me.mode,He),He.ref=Pl(me,oe,xe),He.return=me,He)}function be(me,oe,xe,He){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==xe.containerInfo||oe.stateNode.implementation!==xe.implementation?(oe=Zh(xe,me.mode,He),oe.return=me,oe):(oe=S(oe,xe.children||[]),oe.return=me,oe)}function Me(me,oe,xe,He,ct){return oe===null||oe.tag!==7?(oe=Uo(xe,me.mode,He,ct),oe.return=me,oe):(oe=S(oe,xe),oe.return=me,oe)}function Fe(me,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Yh(""+oe,me.mode,xe),oe.return=me,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case H:return xe=pu(oe.type,oe.key,oe.props,null,me.mode,xe),xe.ref=Pl(me,null,oe),xe.return=me,xe;case Y:return oe=Zh(oe,me.mode,xe),oe.return=me,oe;case Ae:var He=oe._init;return Fe(me,He(oe._payload),xe)}if(bt(oe)||ce(oe))return oe=Uo(oe,me.mode,xe,null),oe.return=me,oe;Gc(me,oe)}return null}function Pe(me,oe,xe,He){var ct=oe!==null?oe.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return ct!==null?null:Z(me,oe,""+xe,He);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case H:return xe.key===ct?re(me,oe,xe,He):null;case Y:return xe.key===ct?be(me,oe,xe,He):null;case Ae:return ct=xe._init,Pe(me,oe,ct(xe._payload),He)}if(bt(xe)||ce(xe))return ct!==null?null:Me(me,oe,xe,He,null);Gc(me,xe)}return null}function Ye(me,oe,xe,He,ct){if(typeof He=="string"&&He!==""||typeof He=="number")return me=me.get(xe)||null,Z(oe,me,""+He,ct);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case H:return me=me.get(He.key===null?xe:He.key)||null,re(oe,me,He,ct);case Y:return me=me.get(He.key===null?xe:He.key)||null,be(oe,me,He,ct);case Ae:var wt=He._init;return Ye(me,oe,xe,wt(He._payload),ct)}if(bt(He)||ce(He))return me=me.get(xe)||null,Me(oe,me,He,ct,null);Gc(oe,He)}return null}function st(me,oe,xe,He){for(var ct=null,wt=null,yt=oe,At=oe=0,sr=null;yt!==null&&At<xe.length;At++){yt.index>At?(sr=yt,yt=null):sr=yt.sibling;var Qt=Pe(me,yt,xe[At],He);if(Qt===null){yt===null&&(yt=sr);break}s&&yt&&Qt.alternate===null&&l(me,yt),oe=N(Qt,oe,At),wt===null?ct=Qt:wt.sibling=Qt,wt=Qt,yt=sr}if(At===xe.length)return m(me,yt),En&&jo(me,At),ct;if(yt===null){for(;At<xe.length;At++)yt=Fe(me,xe[At],He),yt!==null&&(oe=N(yt,oe,At),wt===null?ct=yt:wt.sibling=yt,wt=yt);return En&&jo(me,At),ct}for(yt=v(me,yt);At<xe.length;At++)sr=Ye(yt,me,At,xe[At],He),sr!==null&&(s&&sr.alternate!==null&&yt.delete(sr.key===null?At:sr.key),oe=N(sr,oe,At),wt===null?ct=sr:wt.sibling=sr,wt=sr);return s&&yt.forEach(function(Zi){return l(me,Zi)}),En&&jo(me,At),ct}function at(me,oe,xe,He){var ct=ce(xe);if(typeof ct!="function")throw Error(n(150));if(xe=ct.call(xe),xe==null)throw Error(n(151));for(var wt=ct=null,yt=oe,At=oe=0,sr=null,Qt=xe.next();yt!==null&&!Qt.done;At++,Qt=xe.next()){yt.index>At?(sr=yt,yt=null):sr=yt.sibling;var Zi=Pe(me,yt,Qt.value,He);if(Zi===null){yt===null&&(yt=sr);break}s&&yt&&Zi.alternate===null&&l(me,yt),oe=N(Zi,oe,At),wt===null?ct=Zi:wt.sibling=Zi,wt=Zi,yt=sr}if(Qt.done)return m(me,yt),En&&jo(me,At),ct;if(yt===null){for(;!Qt.done;At++,Qt=xe.next())Qt=Fe(me,Qt.value,He),Qt!==null&&(oe=N(Qt,oe,At),wt===null?ct=Qt:wt.sibling=Qt,wt=Qt);return En&&jo(me,At),ct}for(yt=v(me,yt);!Qt.done;At++,Qt=xe.next())Qt=Ye(yt,me,At,Qt.value,He),Qt!==null&&(s&&Qt.alternate!==null&&yt.delete(Qt.key===null?At:Qt.key),oe=N(Qt,oe,At),wt===null?ct=Qt:wt.sibling=Qt,wt=Qt);return s&&yt.forEach(function(Ib){return l(me,Ib)}),En&&jo(me,At),ct}function Ln(me,oe,xe,He){if(typeof xe=="object"&&xe!==null&&xe.type===W&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case H:e:{for(var ct=xe.key,wt=oe;wt!==null;){if(wt.key===ct){if(ct=xe.type,ct===W){if(wt.tag===7){m(me,wt.sibling),oe=S(wt,xe.props.children),oe.return=me,me=oe;break e}}else if(wt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===Ae&&Q1(ct)===wt.type){m(me,wt.sibling),oe=S(wt,xe.props),oe.ref=Pl(me,wt,xe),oe.return=me,me=oe;break e}m(me,wt);break}else l(me,wt);wt=wt.sibling}xe.type===W?(oe=Uo(xe.props.children,me.mode,He,xe.key),oe.return=me,me=oe):(He=pu(xe.type,xe.key,xe.props,null,me.mode,He),He.ref=Pl(me,oe,xe),He.return=me,me=He)}return L(me);case Y:e:{for(wt=xe.key;oe!==null;){if(oe.key===wt)if(oe.tag===4&&oe.stateNode.containerInfo===xe.containerInfo&&oe.stateNode.implementation===xe.implementation){m(me,oe.sibling),oe=S(oe,xe.children||[]),oe.return=me,me=oe;break e}else{m(me,oe);break}else l(me,oe);oe=oe.sibling}oe=Zh(xe,me.mode,He),oe.return=me,me=oe}return L(me);case Ae:return wt=xe._init,Ln(me,oe,wt(xe._payload),He)}if(bt(xe))return st(me,oe,xe,He);if(ce(xe))return at(me,oe,xe,He);Gc(me,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,oe!==null&&oe.tag===6?(m(me,oe.sibling),oe=S(oe,xe),oe.return=me,me=oe):(m(me,oe),oe=Yh(xe,me.mode,He),oe.return=me,me=oe),L(me)):m(me,oe)}return Ln}var ba=J1(!0),eg=J1(!1),qc=Ui(null),Xc=null,Ca=null,oh=null;function ah(){oh=Ca=Xc=null}function lh(s){var l=qc.current;vn(qc),s._currentValue=l}function ch(s,l,m){for(;s!==null;){var v=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),s===m)break;s=s.return}}function Ea(s,l){Xc=s,oh=Ca=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&l)!==0&&(Pr=!0),s.firstContext=null)}function us(s){var l=s._currentValue;if(oh!==s)if(s={context:s,memoizedValue:l,next:null},Ca===null){if(Xc===null)throw Error(n(308));Ca=s,Xc.dependencies={lanes:0,firstContext:s}}else Ca=Ca.next=s;return l}var Oo=null;function uh(s){Oo===null?Oo=[s]:Oo.push(s)}function tg(s,l,m,v){var S=l.interleaved;return S===null?(m.next=m,uh(l)):(m.next=S.next,S.next=m),l.interleaved=m,ui(s,v)}function ui(s,l){s.lanes|=l;var m=s.alternate;for(m!==null&&(m.lanes|=l),m=s,s=s.return;s!==null;)s.childLanes|=l,m=s.alternate,m!==null&&(m.childLanes|=l),m=s,s=s.return;return m.tag===3?m.stateNode:null}var Wi=!1;function dh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ng(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function di(s,l){return{eventTime:s,lane:l,tag:0,payload:null,callback:null,next:null}}function $i(s,l,m){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Zt&2)!==0){var S=v.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),v.pending=l,ui(s,m)}return S=v.interleaved,S===null?(l.next=l,uh(v)):(l.next=S.next,S.next=l),v.interleaved=l,ui(s,m)}function Kc(s,l,m){if(l=l.updateQueue,l!==null&&(l=l.shared,(m&4194240)!==0)){var v=l.lanes;v&=s.pendingLanes,m|=v,l.lanes=m,Rn(s,m)}}function rg(s,l){var m=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var S=null,N=null;if(m=m.firstBaseUpdate,m!==null){do{var L={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};N===null?S=N=L:N=N.next=L,m=m.next}while(m!==null);N===null?S=N=l:N=N.next=l}else S=N=l;m={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:N,shared:v.shared,effects:v.effects},s.updateQueue=m;return}s=m.lastBaseUpdate,s===null?m.firstBaseUpdate=l:s.next=l,m.lastBaseUpdate=l}function Yc(s,l,m,v){var S=s.updateQueue;Wi=!1;var N=S.firstBaseUpdate,L=S.lastBaseUpdate,Z=S.shared.pending;if(Z!==null){S.shared.pending=null;var re=Z,be=re.next;re.next=null,L===null?N=be:L.next=be,L=re;var Me=s.alternate;Me!==null&&(Me=Me.updateQueue,Z=Me.lastBaseUpdate,Z!==L&&(Z===null?Me.firstBaseUpdate=be:Z.next=be,Me.lastBaseUpdate=re))}if(N!==null){var Fe=S.baseState;L=0,Me=be=re=null,Z=N;do{var Pe=Z.lane,Ye=Z.eventTime;if((v&Pe)===Pe){Me!==null&&(Me=Me.next={eventTime:Ye,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var st=s,at=Z;switch(Pe=l,Ye=m,at.tag){case 1:if(st=at.payload,typeof st=="function"){Fe=st.call(Ye,Fe,Pe);break e}Fe=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=at.payload,Pe=typeof st=="function"?st.call(Ye,Fe,Pe):st,Pe==null)break e;Fe=he({},Fe,Pe);break e;case 2:Wi=!0}}Z.callback!==null&&Z.lane!==0&&(s.flags|=64,Pe=S.effects,Pe===null?S.effects=[Z]:Pe.push(Z))}else Ye={eventTime:Ye,lane:Pe,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Me===null?(be=Me=Ye,re=Fe):Me=Me.next=Ye,L|=Pe;if(Z=Z.next,Z===null){if(Z=S.shared.pending,Z===null)break;Pe=Z,Z=Pe.next,Pe.next=null,S.lastBaseUpdate=Pe,S.shared.pending=null}}while(!0);if(Me===null&&(re=Fe),S.baseState=re,S.firstBaseUpdate=be,S.lastBaseUpdate=Me,l=S.shared.interleaved,l!==null){S=l;do L|=S.lane,S=S.next;while(S!==l)}else N===null&&(S.shared.lanes=0);Mo|=L,s.lanes=L,s.memoizedState=Fe}}function sg(s,l,m){if(s=l.effects,l.effects=null,s!==null)for(l=0;l<s.length;l++){var v=s[l],S=v.callback;if(S!==null){if(v.callback=null,v=m,typeof S!="function")throw Error(n(191,S));S.call(v)}}}var Dl={},Vs=Ui(Dl),Ml=Ui(Dl),Ll=Ui(Dl);function Po(s){if(s===Dl)throw Error(n(174));return s}function hh(s,l){switch(pn(Ll,l),pn(Ml,s),pn(Vs,Dl),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Et(null,"");break;default:s=s===8?l.parentNode:l,l=s.namespaceURI||null,s=s.tagName,l=Et(l,s)}vn(Vs),pn(Vs,l)}function Sa(){vn(Vs),vn(Ml),vn(Ll)}function ig(s){Po(Ll.current);var l=Po(Vs.current),m=Et(l,s.type);l!==m&&(pn(Ml,s),pn(Vs,m))}function fh(s){Ml.current===s&&(vn(Vs),vn(Ml))}var An=Ui(0);function Zc(s){for(var l=s;l!==null;){if(l.tag===13){var m=l.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var gh=[];function mh(){for(var s=0;s<gh.length;s++)gh[s]._workInProgressVersionPrimary=null;gh.length=0}var Qc=U.ReactCurrentDispatcher,ph=U.ReactCurrentBatchConfig,Do=0,Nn=null,Xn=null,nr=null,Jc=!1,Bl=!1,Fl=0,Y2=0;function Cr(){throw Error(n(321))}function xh(s,l){if(l===null)return!1;for(var m=0;m<l.length&&m<s.length;m++)if(!de(s[m],l[m]))return!1;return!0}function wh(s,l,m,v,S,N){if(Do=N,Nn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Qc.current=s===null||s.memoizedState===null?eb:tb,s=m(v,S),Bl){N=0;do{if(Bl=!1,Fl=0,25<=N)throw Error(n(301));N+=1,nr=Xn=null,l.updateQueue=null,Qc.current=nb,s=m(v,S)}while(Bl)}if(Qc.current=nu,l=Xn!==null&&Xn.next!==null,Do=0,nr=Xn=Nn=null,Jc=!1,l)throw Error(n(300));return s}function yh(){var s=Fl!==0;return Fl=0,s}function Ws(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?Nn.memoizedState=nr=s:nr=nr.next=s,nr}function ds(){if(Xn===null){var s=Nn.alternate;s=s!==null?s.memoizedState:null}else s=Xn.next;var l=nr===null?Nn.memoizedState:nr.next;if(l!==null)nr=l,Xn=s;else{if(s===null)throw Error(n(310));Xn=s,s={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},nr===null?Nn.memoizedState=nr=s:nr=nr.next=s}return nr}function Ul(s,l){return typeof l=="function"?l(s):l}function vh(s){var l=ds(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=s;var v=Xn,S=v.baseQueue,N=m.pending;if(N!==null){if(S!==null){var L=S.next;S.next=N.next,N.next=L}v.baseQueue=S=N,m.pending=null}if(S!==null){N=S.next,v=v.baseState;var Z=L=null,re=null,be=N;do{var Me=be.lane;if((Do&Me)===Me)re!==null&&(re=re.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),v=be.hasEagerState?be.eagerState:s(v,be.action);else{var Fe={lane:Me,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};re===null?(Z=re=Fe,L=v):re=re.next=Fe,Nn.lanes|=Me,Mo|=Me}be=be.next}while(be!==null&&be!==N);re===null?L=v:re.next=Z,de(v,l.memoizedState)||(Pr=!0),l.memoizedState=v,l.baseState=L,l.baseQueue=re,m.lastRenderedState=v}if(s=m.interleaved,s!==null){S=s;do N=S.lane,Nn.lanes|=N,Mo|=N,S=S.next;while(S!==s)}else S===null&&(m.lanes=0);return[l.memoizedState,m.dispatch]}function bh(s){var l=ds(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=s;var v=m.dispatch,S=m.pending,N=l.memoizedState;if(S!==null){m.pending=null;var L=S=S.next;do N=s(N,L.action),L=L.next;while(L!==S);de(N,l.memoizedState)||(Pr=!0),l.memoizedState=N,l.baseQueue===null&&(l.baseState=N),m.lastRenderedState=N}return[N,v]}function og(){}function ag(s,l){var m=Nn,v=ds(),S=l(),N=!de(v.memoizedState,S);if(N&&(v.memoizedState=S,Pr=!0),v=v.queue,Ch(ug.bind(null,m,v,s),[s]),v.getSnapshot!==l||N||nr!==null&&nr.memoizedState.tag&1){if(m.flags|=2048,zl(9,cg.bind(null,m,v,S,l),void 0,null),rr===null)throw Error(n(349));(Do&30)!==0||lg(m,l,S)}return S}function lg(s,l,m){s.flags|=16384,s={getSnapshot:l,value:m},l=Nn.updateQueue,l===null?(l={lastEffect:null,stores:null},Nn.updateQueue=l,l.stores=[s]):(m=l.stores,m===null?l.stores=[s]:m.push(s))}function cg(s,l,m,v){l.value=m,l.getSnapshot=v,dg(l)&&hg(s)}function ug(s,l,m){return m(function(){dg(l)&&hg(s)})}function dg(s){var l=s.getSnapshot;s=s.value;try{var m=l();return!de(s,m)}catch{return!0}}function hg(s){var l=ui(s,1);l!==null&&_s(l,s,1,-1)}function fg(s){var l=Ws();return typeof s=="function"&&(s=s()),l.memoizedState=l.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:s},l.queue=s,s=s.dispatch=J2.bind(null,Nn,s),[l.memoizedState,s]}function zl(s,l,m,v){return s={tag:s,create:l,destroy:m,deps:v,next:null},l=Nn.updateQueue,l===null?(l={lastEffect:null,stores:null},Nn.updateQueue=l,l.lastEffect=s.next=s):(m=l.lastEffect,m===null?l.lastEffect=s.next=s:(v=m.next,m.next=s,s.next=v,l.lastEffect=s)),s}function gg(){return ds().memoizedState}function eu(s,l,m,v){var S=Ws();Nn.flags|=s,S.memoizedState=zl(1|l,m,void 0,v===void 0?null:v)}function tu(s,l,m,v){var S=ds();v=v===void 0?null:v;var N=void 0;if(Xn!==null){var L=Xn.memoizedState;if(N=L.destroy,v!==null&&xh(v,L.deps)){S.memoizedState=zl(l,m,N,v);return}}Nn.flags|=s,S.memoizedState=zl(1|l,m,N,v)}function mg(s,l){return eu(8390656,8,s,l)}function Ch(s,l){return tu(2048,8,s,l)}function pg(s,l){return tu(4,2,s,l)}function xg(s,l){return tu(4,4,s,l)}function wg(s,l){if(typeof l=="function")return s=s(),l(s),function(){l(null)};if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function yg(s,l,m){return m=m!=null?m.concat([s]):null,tu(4,4,wg.bind(null,l,s),m)}function Eh(){}function vg(s,l){var m=ds();l=l===void 0?null:l;var v=m.memoizedState;return v!==null&&l!==null&&xh(l,v[1])?v[0]:(m.memoizedState=[s,l],s)}function bg(s,l){var m=ds();l=l===void 0?null:l;var v=m.memoizedState;return v!==null&&l!==null&&xh(l,v[1])?v[0]:(s=s(),m.memoizedState=[s,l],s)}function Cg(s,l,m){return(Do&21)===0?(s.baseState&&(s.baseState=!1,Pr=!0),s.memoizedState=m):(de(m,l)||(m=$n(),Nn.lanes|=m,Mo|=m,s.baseState=!0),l)}function Z2(s,l){var m=Dt;Dt=m!==0&&4>m?m:4,s(!0);var v=ph.transition;ph.transition={};try{s(!1),l()}finally{Dt=m,ph.transition=v}}function Eg(){return ds().memoizedState}function Q2(s,l,m){var v=Xi(s);if(m={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null},Sg(s))_g(l,m);else if(m=tg(s,l,m,v),m!==null){var S=Rr();_s(m,s,v,S),Ag(m,l,v)}}function J2(s,l,m){var v=Xi(s),S={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null};if(Sg(s))_g(l,S);else{var N=s.alternate;if(s.lanes===0&&(N===null||N.lanes===0)&&(N=l.lastRenderedReducer,N!==null))try{var L=l.lastRenderedState,Z=N(L,m);if(S.hasEagerState=!0,S.eagerState=Z,de(Z,L)){var re=l.interleaved;re===null?(S.next=S,uh(l)):(S.next=re.next,re.next=S),l.interleaved=S;return}}catch{}finally{}m=tg(s,l,S,v),m!==null&&(S=Rr(),_s(m,s,v,S),Ag(m,l,v))}}function Sg(s){var l=s.alternate;return s===Nn||l!==null&&l===Nn}function _g(s,l){Bl=Jc=!0;var m=s.pending;m===null?l.next=l:(l.next=m.next,m.next=l),s.pending=l}function Ag(s,l,m){if((m&4194240)!==0){var v=l.lanes;v&=s.pendingLanes,m|=v,l.lanes=m,Rn(s,m)}}var nu={readContext:us,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},eb={readContext:us,useCallback:function(s,l){return Ws().memoizedState=[s,l===void 0?null:l],s},useContext:us,useEffect:mg,useImperativeHandle:function(s,l,m){return m=m!=null?m.concat([s]):null,eu(4194308,4,wg.bind(null,l,s),m)},useLayoutEffect:function(s,l){return eu(4194308,4,s,l)},useInsertionEffect:function(s,l){return eu(4,2,s,l)},useMemo:function(s,l){var m=Ws();return l=l===void 0?null:l,s=s(),m.memoizedState=[s,l],s},useReducer:function(s,l,m){var v=Ws();return l=m!==void 0?m(l):l,v.memoizedState=v.baseState=l,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:l},v.queue=s,s=s.dispatch=Q2.bind(null,Nn,s),[v.memoizedState,s]},useRef:function(s){var l=Ws();return s={current:s},l.memoizedState=s},useState:fg,useDebugValue:Eh,useDeferredValue:function(s){return Ws().memoizedState=s},useTransition:function(){var s=fg(!1),l=s[0];return s=Z2.bind(null,s[1]),Ws().memoizedState=s,[l,s]},useMutableSource:function(){},useSyncExternalStore:function(s,l,m){var v=Nn,S=Ws();if(En){if(m===void 0)throw Error(n(407));m=m()}else{if(m=l(),rr===null)throw Error(n(349));(Do&30)!==0||lg(v,l,m)}S.memoizedState=m;var N={value:m,getSnapshot:l};return S.queue=N,mg(ug.bind(null,v,N,s),[s]),v.flags|=2048,zl(9,cg.bind(null,v,N,m,l),void 0,null),m},useId:function(){var s=Ws(),l=rr.identifierPrefix;if(En){var m=ci,v=li;m=(v&~(1<<32-Ir(v)-1)).toString(32)+m,l=":"+l+"R"+m,m=Fl++,0<m&&(l+="H"+m.toString(32)),l+=":"}else m=Y2++,l=":"+l+"r"+m.toString(32)+":";return s.memoizedState=l},unstable_isNewReconciler:!1},tb={readContext:us,useCallback:vg,useContext:us,useEffect:Ch,useImperativeHandle:yg,useInsertionEffect:pg,useLayoutEffect:xg,useMemo:bg,useReducer:vh,useRef:gg,useState:function(){return vh(Ul)},useDebugValue:Eh,useDeferredValue:function(s){var l=ds();return Cg(l,Xn.memoizedState,s)},useTransition:function(){var s=vh(Ul)[0],l=ds().memoizedState;return[s,l]},useMutableSource:og,useSyncExternalStore:ag,useId:Eg,unstable_isNewReconciler:!1},nb={readContext:us,useCallback:vg,useContext:us,useEffect:Ch,useImperativeHandle:yg,useInsertionEffect:pg,useLayoutEffect:xg,useMemo:bg,useReducer:bh,useRef:gg,useState:function(){return bh(Ul)},useDebugValue:Eh,useDeferredValue:function(s){var l=ds();return Xn===null?l.memoizedState=s:Cg(l,Xn.memoizedState,s)},useTransition:function(){var s=bh(Ul)[0],l=ds().memoizedState;return[s,l]},useMutableSource:og,useSyncExternalStore:ag,useId:Eg,unstable_isNewReconciler:!1};function Cs(s,l){if(s&&s.defaultProps){l=he({},l),s=s.defaultProps;for(var m in s)l[m]===void 0&&(l[m]=s[m]);return l}return l}function Sh(s,l,m,v){l=s.memoizedState,m=m(v,l),m=m==null?l:he({},l,m),s.memoizedState=m,s.lanes===0&&(s.updateQueue.baseState=m)}var ru={isMounted:function(s){return(s=s._reactInternals)?kr(s)===s:!1},enqueueSetState:function(s,l,m){s=s._reactInternals;var v=Rr(),S=Xi(s),N=di(v,S);N.payload=l,m!=null&&(N.callback=m),l=$i(s,N,S),l!==null&&(_s(l,s,S,v),Kc(l,s,S))},enqueueReplaceState:function(s,l,m){s=s._reactInternals;var v=Rr(),S=Xi(s),N=di(v,S);N.tag=1,N.payload=l,m!=null&&(N.callback=m),l=$i(s,N,S),l!==null&&(_s(l,s,S,v),Kc(l,s,S))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var m=Rr(),v=Xi(s),S=di(m,v);S.tag=2,l!=null&&(S.callback=l),l=$i(s,S,v),l!==null&&(_s(l,s,v,m),Kc(l,s,v))}};function Ng(s,l,m,v,S,N,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,N,L):l.prototype&&l.prototype.isPureReactComponent?!ye(m,v)||!ye(S,N):!0}function Ig(s,l,m){var v=!1,S=zi,N=l.contextType;return typeof N=="object"&&N!==null?N=us(N):(S=Or(l)?Ro:br.current,v=l.contextTypes,N=(v=v!=null)?xa(s,S):zi),l=new l(m,N),s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=ru,s.stateNode=l,l._reactInternals=s,v&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=S,s.__reactInternalMemoizedMaskedChildContext=N),l}function Tg(s,l,m,v){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(m,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(m,v),l.state!==s&&ru.enqueueReplaceState(l,l.state,null)}function _h(s,l,m,v){var S=s.stateNode;S.props=m,S.state=s.memoizedState,S.refs={},dh(s);var N=l.contextType;typeof N=="object"&&N!==null?S.context=us(N):(N=Or(l)?Ro:br.current,S.context=xa(s,N)),S.state=s.memoizedState,N=l.getDerivedStateFromProps,typeof N=="function"&&(Sh(s,l,N,m),S.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&ru.enqueueReplaceState(S,S.state,null),Yc(s,m,S,v),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308)}function _a(s,l){try{var m="",v=l;do m+=Ee(v),v=v.return;while(v);var S=m}catch(N){S=`
Error generating stack: `+N.message+`
`+N.stack}return{value:s,source:l,stack:S,digest:null}}function Ah(s,l,m){return{value:s,source:null,stack:m??null,digest:l??null}}function Nh(s,l){try{console.error(l.value)}catch(m){setTimeout(function(){throw m})}}var rb=typeof WeakMap=="function"?WeakMap:Map;function Rg(s,l,m){m=di(-1,m),m.tag=3,m.payload={element:null};var v=l.value;return m.callback=function(){uu||(uu=!0,Vh=v),Nh(s,l)},m}function kg(s,l,m){m=di(-1,m),m.tag=3;var v=s.type.getDerivedStateFromError;if(typeof v=="function"){var S=l.value;m.payload=function(){return v(S)},m.callback=function(){Nh(s,l)}}var N=s.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(m.callback=function(){Nh(s,l),typeof v!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var L=l.stack;this.componentDidCatch(l.value,{componentStack:L!==null?L:""})}),m}function jg(s,l,m){var v=s.pingCache;if(v===null){v=s.pingCache=new rb;var S=new Set;v.set(l,S)}else S=v.get(l),S===void 0&&(S=new Set,v.set(l,S));S.has(m)||(S.add(m),s=xb.bind(null,s,l,m),l.then(s,s))}function Og(s){do{var l;if((l=s.tag===13)&&(l=s.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return s;s=s.return}while(s!==null);return null}function Pg(s,l,m,v,S){return(s.mode&1)===0?(s===l?s.flags|=65536:(s.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(l=di(-1,1),l.tag=2,$i(m,l,1))),m.lanes|=1),s):(s.flags|=65536,s.lanes=S,s)}var sb=U.ReactCurrentOwner,Pr=!1;function Tr(s,l,m,v){l.child=s===null?eg(l,null,m,v):ba(l,s.child,m,v)}function Dg(s,l,m,v,S){m=m.render;var N=l.ref;return Ea(l,S),v=wh(s,l,m,v,N,S),m=yh(),s!==null&&!Pr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~S,hi(s,l,S)):(En&&m&&th(l),l.flags|=1,Tr(s,l,v,S),l.child)}function Mg(s,l,m,v,S){if(s===null){var N=m.type;return typeof N=="function"&&!Kh(N)&&N.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(l.tag=15,l.type=N,Lg(s,l,N,v,S)):(s=pu(m.type,null,v,l,l.mode,S),s.ref=l.ref,s.return=l,l.child=s)}if(N=s.child,(s.lanes&S)===0){var L=N.memoizedProps;if(m=m.compare,m=m!==null?m:ye,m(L,v)&&s.ref===l.ref)return hi(s,l,S)}return l.flags|=1,s=Yi(N,v),s.ref=l.ref,s.return=l,l.child=s}function Lg(s,l,m,v,S){if(s!==null){var N=s.memoizedProps;if(ye(N,v)&&s.ref===l.ref)if(Pr=!1,l.pendingProps=v=N,(s.lanes&S)!==0)(s.flags&131072)!==0&&(Pr=!0);else return l.lanes=s.lanes,hi(s,l,S)}return Ih(s,l,m,v,S)}function Bg(s,l,m){var v=l.pendingProps,S=v.children,N=s!==null?s.memoizedState:null;if(v.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(Na,Yr),Yr|=m;else{if((m&1073741824)===0)return s=N!==null?N.baseLanes|m:m,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:s,cachePool:null,transitions:null},l.updateQueue=null,pn(Na,Yr),Yr|=s,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=N!==null?N.baseLanes:m,pn(Na,Yr),Yr|=v}else N!==null?(v=N.baseLanes|m,l.memoizedState=null):v=m,pn(Na,Yr),Yr|=v;return Tr(s,l,S,m),l.child}function Fg(s,l){var m=l.ref;(s===null&&m!==null||s!==null&&s.ref!==m)&&(l.flags|=512,l.flags|=2097152)}function Ih(s,l,m,v,S){var N=Or(m)?Ro:br.current;return N=xa(l,N),Ea(l,S),m=wh(s,l,m,v,N,S),v=yh(),s!==null&&!Pr?(l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~S,hi(s,l,S)):(En&&v&&th(l),l.flags|=1,Tr(s,l,m,S),l.child)}function Ug(s,l,m,v,S){if(Or(m)){var N=!0;zc(l)}else N=!1;if(Ea(l,S),l.stateNode===null)iu(s,l),Ig(l,m,v),_h(l,m,v,S),v=!0;else if(s===null){var L=l.stateNode,Z=l.memoizedProps;L.props=Z;var re=L.context,be=m.contextType;typeof be=="object"&&be!==null?be=us(be):(be=Or(m)?Ro:br.current,be=xa(l,be));var Me=m.getDerivedStateFromProps,Fe=typeof Me=="function"||typeof L.getSnapshotBeforeUpdate=="function";Fe||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Z!==v||re!==be)&&Tg(l,L,v,be),Wi=!1;var Pe=l.memoizedState;L.state=Pe,Yc(l,v,L,S),re=l.memoizedState,Z!==v||Pe!==re||jr.current||Wi?(typeof Me=="function"&&(Sh(l,m,Me,v),re=l.memoizedState),(Z=Wi||Ng(l,m,Z,v,Pe,re,be))?(Fe||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(l.flags|=4194308)):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=re),L.props=v,L.state=re,L.context=be,v=Z):(typeof L.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{L=l.stateNode,ng(s,l),Z=l.memoizedProps,be=l.type===l.elementType?Z:Cs(l.type,Z),L.props=be,Fe=l.pendingProps,Pe=L.context,re=m.contextType,typeof re=="object"&&re!==null?re=us(re):(re=Or(m)?Ro:br.current,re=xa(l,re));var Ye=m.getDerivedStateFromProps;(Me=typeof Ye=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Z!==Fe||Pe!==re)&&Tg(l,L,v,re),Wi=!1,Pe=l.memoizedState,L.state=Pe,Yc(l,v,L,S);var st=l.memoizedState;Z!==Fe||Pe!==st||jr.current||Wi?(typeof Ye=="function"&&(Sh(l,m,Ye,v),st=l.memoizedState),(be=Wi||Ng(l,m,be,v,Pe,st,re)||!1)?(Me||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(v,st,re),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(v,st,re)),typeof L.componentDidUpdate=="function"&&(l.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof L.componentDidUpdate!="function"||Z===s.memoizedProps&&Pe===s.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Z===s.memoizedProps&&Pe===s.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=st),L.props=v,L.state=st,L.context=re,v=be):(typeof L.componentDidUpdate!="function"||Z===s.memoizedProps&&Pe===s.memoizedState||(l.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Z===s.memoizedProps&&Pe===s.memoizedState||(l.flags|=1024),v=!1)}return Th(s,l,m,v,N,S)}function Th(s,l,m,v,S,N){Fg(s,l);var L=(l.flags&128)!==0;if(!v&&!L)return S&&H1(l,m,!1),hi(s,l,N);v=l.stateNode,sb.current=l;var Z=L&&typeof m.getDerivedStateFromError!="function"?null:v.render();return l.flags|=1,s!==null&&L?(l.child=ba(l,s.child,null,N),l.child=ba(l,null,Z,N)):Tr(s,l,Z,N),l.memoizedState=v.state,S&&H1(l,m,!0),l.child}function zg(s){var l=s.stateNode;l.pendingContext?W1(s,l.pendingContext,l.pendingContext!==l.context):l.context&&W1(s,l.context,!1),hh(s,l.containerInfo)}function Vg(s,l,m,v,S){return va(),ih(S),l.flags|=256,Tr(s,l,m,v),l.child}var Rh={dehydrated:null,treeContext:null,retryLane:0};function kh(s){return{baseLanes:s,cachePool:null,transitions:null}}function Wg(s,l,m){var v=l.pendingProps,S=An.current,N=!1,L=(l.flags&128)!==0,Z;if((Z=L)||(Z=s!==null&&s.memoizedState===null?!1:(S&2)!==0),Z?(N=!0,l.flags&=-129):(s===null||s.memoizedState!==null)&&(S|=1),pn(An,S&1),s===null)return sh(l),s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((l.mode&1)===0?l.lanes=1:s.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(L=v.children,s=v.fallback,N?(v=l.mode,N=l.child,L={mode:"hidden",children:L},(v&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=L):N=xu(L,v,0,null),s=Uo(s,v,m,null),N.return=l,s.return=l,N.sibling=s,l.child=N,l.child.memoizedState=kh(m),l.memoizedState=Rh,s):jh(l,L));if(S=s.memoizedState,S!==null&&(Z=S.dehydrated,Z!==null))return ib(s,l,L,v,Z,S,m);if(N){N=v.fallback,L=l.mode,S=s.child,Z=S.sibling;var re={mode:"hidden",children:v.children};return(L&1)===0&&l.child!==S?(v=l.child,v.childLanes=0,v.pendingProps=re,l.deletions=null):(v=Yi(S,re),v.subtreeFlags=S.subtreeFlags&14680064),Z!==null?N=Yi(Z,N):(N=Uo(N,L,m,null),N.flags|=2),N.return=l,v.return=l,v.sibling=N,l.child=v,v=N,N=l.child,L=s.child.memoizedState,L=L===null?kh(m):{baseLanes:L.baseLanes|m,cachePool:null,transitions:L.transitions},N.memoizedState=L,N.childLanes=s.childLanes&~m,l.memoizedState=Rh,v}return N=s.child,s=N.sibling,v=Yi(N,{mode:"visible",children:v.children}),(l.mode&1)===0&&(v.lanes=m),v.return=l,v.sibling=null,s!==null&&(m=l.deletions,m===null?(l.deletions=[s],l.flags|=16):m.push(s)),l.child=v,l.memoizedState=null,v}function jh(s,l){return l=xu({mode:"visible",children:l},s.mode,0,null),l.return=s,s.child=l}function su(s,l,m,v){return v!==null&&ih(v),ba(l,s.child,null,m),s=jh(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function ib(s,l,m,v,S,N,L){if(m)return l.flags&256?(l.flags&=-257,v=Ah(Error(n(422))),su(s,l,L,v)):l.memoizedState!==null?(l.child=s.child,l.flags|=128,null):(N=v.fallback,S=l.mode,v=xu({mode:"visible",children:v.children},S,0,null),N=Uo(N,S,L,null),N.flags|=2,v.return=l,N.return=l,v.sibling=N,l.child=v,(l.mode&1)!==0&&ba(l,s.child,null,L),l.child.memoizedState=kh(L),l.memoizedState=Rh,N);if((l.mode&1)===0)return su(s,l,L,null);if(S.data==="$!"){if(v=S.nextSibling&&S.nextSibling.dataset,v)var Z=v.dgst;return v=Z,N=Error(n(419)),v=Ah(N,v,void 0),su(s,l,L,v)}if(Z=(L&s.childLanes)!==0,Pr||Z){if(v=rr,v!==null){switch(L&-L){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(v.suspendedLanes|L))!==0?0:S,S!==0&&S!==N.retryLane&&(N.retryLane=S,ui(s,S),_s(v,s,S,-1))}return Xh(),v=Ah(Error(n(421))),su(s,l,L,v)}return S.data==="$?"?(l.flags|=128,l.child=s.child,l=wb.bind(null,s),S._reactRetry=l,null):(s=N.treeContext,Kr=Fi(S.nextSibling),Xr=l,En=!0,bs=null,s!==null&&(ls[cs++]=li,ls[cs++]=ci,ls[cs++]=ko,li=s.id,ci=s.overflow,ko=l),l=jh(l,v.children),l.flags|=4096,l)}function $g(s,l,m){s.lanes|=l;var v=s.alternate;v!==null&&(v.lanes|=l),ch(s.return,l,m)}function Oh(s,l,m,v,S){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:S}:(N.isBackwards=l,N.rendering=null,N.renderingStartTime=0,N.last=v,N.tail=m,N.tailMode=S)}function Hg(s,l,m){var v=l.pendingProps,S=v.revealOrder,N=v.tail;if(Tr(s,l,v.children,m),v=An.current,(v&2)!==0)v=v&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&$g(s,m,l);else if(s.tag===19)$g(s,m,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}v&=1}if(pn(An,v),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(m=l.child,S=null;m!==null;)s=m.alternate,s!==null&&Zc(s)===null&&(S=m),m=m.sibling;m=S,m===null?(S=l.child,l.child=null):(S=m.sibling,m.sibling=null),Oh(l,!1,S,m,N);break;case"backwards":for(m=null,S=l.child,l.child=null;S!==null;){if(s=S.alternate,s!==null&&Zc(s)===null){l.child=S;break}s=S.sibling,S.sibling=m,m=S,S=s}Oh(l,!0,m,null,N);break;case"together":Oh(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function iu(s,l){(l.mode&1)===0&&s!==null&&(s.alternate=null,l.alternate=null,l.flags|=2)}function hi(s,l,m){if(s!==null&&(l.dependencies=s.dependencies),Mo|=l.lanes,(m&l.childLanes)===0)return null;if(s!==null&&l.child!==s.child)throw Error(n(153));if(l.child!==null){for(s=l.child,m=Yi(s,s.pendingProps),l.child=m,m.return=l;s.sibling!==null;)s=s.sibling,m=m.sibling=Yi(s,s.pendingProps),m.return=l;m.sibling=null}return l.child}function ob(s,l,m){switch(l.tag){case 3:zg(l),va();break;case 5:ig(l);break;case 1:Or(l.type)&&zc(l);break;case 4:hh(l,l.stateNode.containerInfo);break;case 10:var v=l.type._context,S=l.memoizedProps.value;pn(qc,v._currentValue),v._currentValue=S;break;case 13:if(v=l.memoizedState,v!==null)return v.dehydrated!==null?(pn(An,An.current&1),l.flags|=128,null):(m&l.child.childLanes)!==0?Wg(s,l,m):(pn(An,An.current&1),s=hi(s,l,m),s!==null?s.sibling:null);pn(An,An.current&1);break;case 19:if(v=(m&l.childLanes)!==0,(s.flags&128)!==0){if(v)return Hg(s,l,m);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),pn(An,An.current),v)break;return null;case 22:case 23:return l.lanes=0,Bg(s,l,m)}return hi(s,l,m)}var Gg,Ph,qg,Xg;Gg=function(s,l){for(var m=l.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===l)break;for(;m.sibling===null;){if(m.return===null||m.return===l)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Ph=function(){},qg=function(s,l,m,v){var S=s.memoizedProps;if(S!==v){s=l.stateNode,Po(Vs.current);var N=null;switch(m){case"input":S=Wt(s,S),v=Wt(s,v),N=[];break;case"select":S=he({},S,{value:void 0}),v=he({},v,{value:void 0}),N=[];break;case"textarea":S=Xt(s,S),v=Xt(s,v),N=[];break;default:typeof S.onClick!="function"&&typeof v.onClick=="function"&&(s.onclick=Bc)}Kt(m,v);var L;m=null;for(be in S)if(!v.hasOwnProperty(be)&&S.hasOwnProperty(be)&&S[be]!=null)if(be==="style"){var Z=S[be];for(L in Z)Z.hasOwnProperty(L)&&(m||(m={}),m[L]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(u.hasOwnProperty(be)?N||(N=[]):(N=N||[]).push(be,null));for(be in v){var re=v[be];if(Z=S?.[be],v.hasOwnProperty(be)&&re!==Z&&(re!=null||Z!=null))if(be==="style")if(Z){for(L in Z)!Z.hasOwnProperty(L)||re&&re.hasOwnProperty(L)||(m||(m={}),m[L]="");for(L in re)re.hasOwnProperty(L)&&Z[L]!==re[L]&&(m||(m={}),m[L]=re[L])}else m||(N||(N=[]),N.push(be,m)),m=re;else be==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,Z=Z?Z.__html:void 0,re!=null&&Z!==re&&(N=N||[]).push(be,re)):be==="children"?typeof re!="string"&&typeof re!="number"||(N=N||[]).push(be,""+re):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(u.hasOwnProperty(be)?(re!=null&&be==="onScroll"&&yn("scroll",s),N||Z===re||(N=[])):(N=N||[]).push(be,re))}m&&(N=N||[]).push("style",m);var be=N;(l.updateQueue=be)&&(l.flags|=4)}},Xg=function(s,l,m,v){m!==v&&(l.flags|=4)};function Vl(s,l){if(!En)switch(s.tailMode){case"hidden":l=s.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?s.tail=null:m.sibling=null;break;case"collapsed":m=s.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function Er(s){var l=s.alternate!==null&&s.alternate.child===s.child,m=0,v=0;if(l)for(var S=s.child;S!==null;)m|=S.lanes|S.childLanes,v|=S.subtreeFlags&14680064,v|=S.flags&14680064,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)m|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=v,s.childLanes=m,l}function ab(s,l,m){var v=l.pendingProps;switch(nh(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(l),null;case 1:return Or(l.type)&&Uc(),Er(l),null;case 3:return v=l.stateNode,Sa(),vn(jr),vn(br),mh(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(s===null||s.child===null)&&(Hc(l)?l.flags|=4:s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,bs!==null&&(Hh(bs),bs=null))),Ph(s,l),Er(l),null;case 5:fh(l);var S=Po(Ll.current);if(m=l.type,s!==null&&l.stateNode!=null)qg(s,l,m,v,S),s.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!v){if(l.stateNode===null)throw Error(n(166));return Er(l),null}if(s=Po(Vs.current),Hc(l)){v=l.stateNode,m=l.type;var N=l.memoizedProps;switch(v[zs]=l,v[jl]=N,s=(l.mode&1)!==0,m){case"dialog":yn("cancel",v),yn("close",v);break;case"iframe":case"object":case"embed":yn("load",v);break;case"video":case"audio":for(S=0;S<Tl.length;S++)yn(Tl[S],v);break;case"source":yn("error",v);break;case"img":case"image":case"link":yn("error",v),yn("load",v);break;case"details":yn("toggle",v);break;case"input":Oe(v,N),yn("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!N.multiple},yn("invalid",v);break;case"textarea":lt(v,N),yn("invalid",v)}Kt(m,N),S=null;for(var L in N)if(N.hasOwnProperty(L)){var Z=N[L];L==="children"?typeof Z=="string"?v.textContent!==Z&&(N.suppressHydrationWarning!==!0&&Lc(v.textContent,Z,s),S=["children",Z]):typeof Z=="number"&&v.textContent!==""+Z&&(N.suppressHydrationWarning!==!0&&Lc(v.textContent,Z,s),S=["children",""+Z]):u.hasOwnProperty(L)&&Z!=null&&L==="onScroll"&&yn("scroll",v)}switch(m){case"input":We(v),Se(v,N,!0);break;case"textarea":We(v),Vn(v);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(v.onclick=Bc)}v=S,l.updateQueue=v,v!==null&&(l.flags|=4)}else{L=S.nodeType===9?S:S.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=$t(m)),s==="http://www.w3.org/1999/xhtml"?m==="script"?(s=L.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof v.is=="string"?s=L.createElement(m,{is:v.is}):(s=L.createElement(m),m==="select"&&(L=s,v.multiple?L.multiple=!0:v.size&&(L.size=v.size))):s=L.createElementNS(s,m),s[zs]=l,s[jl]=v,Gg(s,l,!1,!1),l.stateNode=s;e:{switch(L=ln(m,v),m){case"dialog":yn("cancel",s),yn("close",s),S=v;break;case"iframe":case"object":case"embed":yn("load",s),S=v;break;case"video":case"audio":for(S=0;S<Tl.length;S++)yn(Tl[S],s);S=v;break;case"source":yn("error",s),S=v;break;case"img":case"image":case"link":yn("error",s),yn("load",s),S=v;break;case"details":yn("toggle",s),S=v;break;case"input":Oe(s,v),S=Wt(s,v),yn("invalid",s);break;case"option":S=v;break;case"select":s._wrapperState={wasMultiple:!!v.multiple},S=he({},v,{value:void 0}),yn("invalid",s);break;case"textarea":lt(s,v),S=Xt(s,v),yn("invalid",s);break;default:S=v}Kt(m,S),Z=S;for(N in Z)if(Z.hasOwnProperty(N)){var re=Z[N];N==="style"?Ge(s,re):N==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&sn(s,re)):N==="children"?typeof re=="string"?(m!=="textarea"||re!=="")&&Wn(s,re):typeof re=="number"&&Wn(s,""+re):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(u.hasOwnProperty(N)?re!=null&&N==="onScroll"&&yn("scroll",s):re!=null&&B(s,N,re,L))}switch(m){case"input":We(s),Se(s,v,!1);break;case"textarea":We(s),Vn(s);break;case"option":v.value!=null&&s.setAttribute("value",""+Re(v.value));break;case"select":s.multiple=!!v.multiple,N=v.value,N!=null?ke(s,!!v.multiple,N,!1):v.defaultValue!=null&&ke(s,!!v.multiple,v.defaultValue,!0);break;default:typeof S.onClick=="function"&&(s.onclick=Bc)}switch(m){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Er(l),null;case 6:if(s&&l.stateNode!=null)Xg(s,l,s.memoizedProps,v);else{if(typeof v!="string"&&l.stateNode===null)throw Error(n(166));if(m=Po(Ll.current),Po(Vs.current),Hc(l)){if(v=l.stateNode,m=l.memoizedProps,v[zs]=l,(N=v.nodeValue!==m)&&(s=Xr,s!==null))switch(s.tag){case 3:Lc(v.nodeValue,m,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Lc(v.nodeValue,m,(s.mode&1)!==0)}N&&(l.flags|=4)}else v=(m.nodeType===9?m:m.ownerDocument).createTextNode(v),v[zs]=l,l.stateNode=v}return Er(l),null;case 13:if(vn(An),v=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(En&&Kr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Z1(),va(),l.flags|=98560,N=!1;else if(N=Hc(l),v!==null&&v.dehydrated!==null){if(s===null){if(!N)throw Error(n(318));if(N=l.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[zs]=l}else va(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Er(l),N=!1}else bs!==null&&(Hh(bs),bs=null),N=!0;if(!N)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=m,l):(v=v!==null,v!==(s!==null&&s.memoizedState!==null)&&v&&(l.child.flags|=8192,(l.mode&1)!==0&&(s===null||(An.current&1)!==0?Kn===0&&(Kn=3):Xh())),l.updateQueue!==null&&(l.flags|=4),Er(l),null);case 4:return Sa(),Ph(s,l),s===null&&Rl(l.stateNode.containerInfo),Er(l),null;case 10:return lh(l.type._context),Er(l),null;case 17:return Or(l.type)&&Uc(),Er(l),null;case 19:if(vn(An),N=l.memoizedState,N===null)return Er(l),null;if(v=(l.flags&128)!==0,L=N.rendering,L===null)if(v)Vl(N,!1);else{if(Kn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(L=Zc(s),L!==null){for(l.flags|=128,Vl(N,!1),v=L.updateQueue,v!==null&&(l.updateQueue=v,l.flags|=4),l.subtreeFlags=0,v=m,m=l.child;m!==null;)N=m,s=v,N.flags&=14680066,L=N.alternate,L===null?(N.childLanes=0,N.lanes=s,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=L.childLanes,N.lanes=L.lanes,N.child=L.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=L.memoizedProps,N.memoizedState=L.memoizedState,N.updateQueue=L.updateQueue,N.type=L.type,s=L.dependencies,N.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),m=m.sibling;return pn(An,An.current&1|2),l.child}s=s.sibling}N.tail!==null&&nn()>Ia&&(l.flags|=128,v=!0,Vl(N,!1),l.lanes=4194304)}else{if(!v)if(s=Zc(L),s!==null){if(l.flags|=128,v=!0,m=s.updateQueue,m!==null&&(l.updateQueue=m,l.flags|=4),Vl(N,!0),N.tail===null&&N.tailMode==="hidden"&&!L.alternate&&!En)return Er(l),null}else 2*nn()-N.renderingStartTime>Ia&&m!==1073741824&&(l.flags|=128,v=!0,Vl(N,!1),l.lanes=4194304);N.isBackwards?(L.sibling=l.child,l.child=L):(m=N.last,m!==null?m.sibling=L:l.child=L,N.last=L)}return N.tail!==null?(l=N.tail,N.rendering=l,N.tail=l.sibling,N.renderingStartTime=nn(),l.sibling=null,m=An.current,pn(An,v?m&1|2:m&1),l):(Er(l),null);case 22:case 23:return qh(),v=l.memoizedState!==null,s!==null&&s.memoizedState!==null!==v&&(l.flags|=8192),v&&(l.mode&1)!==0?(Yr&1073741824)!==0&&(Er(l),l.subtreeFlags&6&&(l.flags|=8192)):Er(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function lb(s,l){switch(nh(l),l.tag){case 1:return Or(l.type)&&Uc(),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Sa(),vn(jr),vn(br),mh(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 5:return fh(l),null;case 13:if(vn(An),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(n(340));va()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return vn(An),null;case 4:return Sa(),null;case 10:return lh(l.type._context),null;case 22:case 23:return qh(),null;case 24:return null;default:return null}}var ou=!1,Sr=!1,cb=typeof WeakSet=="function"?WeakSet:Set,et=null;function Aa(s,l){var m=s.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(v){jn(s,l,v)}else m.current=null}function Dh(s,l,m){try{m()}catch(v){jn(s,l,v)}}var Kg=!1;function ub(s,l){if(qd=Fs,s=Bt(),Rt(s)){if("selectionStart"in s)var m={start:s.selectionStart,end:s.selectionEnd};else e:{m=(m=s.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var S=v.anchorOffset,N=v.focusNode;v=v.focusOffset;try{m.nodeType,N.nodeType}catch{m=null;break e}var L=0,Z=-1,re=-1,be=0,Me=0,Fe=s,Pe=null;t:for(;;){for(var Ye;Fe!==m||S!==0&&Fe.nodeType!==3||(Z=L+S),Fe!==N||v!==0&&Fe.nodeType!==3||(re=L+v),Fe.nodeType===3&&(L+=Fe.nodeValue.length),(Ye=Fe.firstChild)!==null;)Pe=Fe,Fe=Ye;for(;;){if(Fe===s)break t;if(Pe===m&&++be===S&&(Z=L),Pe===N&&++Me===v&&(re=L),(Ye=Fe.nextSibling)!==null)break;Fe=Pe,Pe=Fe.parentNode}Fe=Ye}m=Z===-1||re===-1?null:{start:Z,end:re}}else m=null}m=m||{start:0,end:0}}else m=null;for(Xd={focusedElem:s,selectionRange:m},Fs=!1,et=l;et!==null;)if(l=et,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,et=s;else for(;et!==null;){l=et;try{var st=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(st!==null){var at=st.memoizedProps,Ln=st.memoizedState,me=l.stateNode,oe=me.getSnapshotBeforeUpdate(l.elementType===l.type?at:Cs(l.type,at),Ln);me.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var xe=l.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(He){jn(l,l.return,He)}if(s=l.sibling,s!==null){s.return=l.return,et=s;break}et=l.return}return st=Kg,Kg=!1,st}function Wl(s,l,m){var v=l.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var S=v=v.next;do{if((S.tag&s)===s){var N=S.destroy;S.destroy=void 0,N!==void 0&&Dh(l,m,N)}S=S.next}while(S!==v)}}function au(s,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var m=l=l.next;do{if((m.tag&s)===s){var v=m.create;m.destroy=v()}m=m.next}while(m!==l)}}function Mh(s){var l=s.ref;if(l!==null){var m=s.stateNode;switch(s.tag){case 5:s=m;break;default:s=m}typeof l=="function"?l(s):l.current=s}}function Yg(s){var l=s.alternate;l!==null&&(s.alternate=null,Yg(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&(delete l[zs],delete l[jl],delete l[Qd],delete l[G2],delete l[q2])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Zg(s){return s.tag===5||s.tag===3||s.tag===4}function Qg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Zg(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lh(s,l,m){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?m.nodeType===8?m.parentNode.insertBefore(s,l):m.insertBefore(s,l):(m.nodeType===8?(l=m.parentNode,l.insertBefore(s,m)):(l=m,l.appendChild(s)),m=m._reactRootContainer,m!=null||l.onclick!==null||(l.onclick=Bc));else if(v!==4&&(s=s.child,s!==null))for(Lh(s,l,m),s=s.sibling;s!==null;)Lh(s,l,m),s=s.sibling}function Bh(s,l,m){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?m.insertBefore(s,l):m.appendChild(s);else if(v!==4&&(s=s.child,s!==null))for(Bh(s,l,m),s=s.sibling;s!==null;)Bh(s,l,m),s=s.sibling}var hr=null,Es=!1;function Hi(s,l,m){for(m=m.child;m!==null;)Jg(s,l,m),m=m.sibling}function Jg(s,l,m){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(qt,m)}catch{}switch(m.tag){case 5:Sr||Aa(m,l);case 6:var v=hr,S=Es;hr=null,Hi(s,l,m),hr=v,Es=S,hr!==null&&(Es?(s=hr,m=m.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)):hr.removeChild(m.stateNode));break;case 18:hr!==null&&(Es?(s=hr,m=m.stateNode,s.nodeType===8?Zd(s.parentNode,m):s.nodeType===1&&Zd(s,m),ws(s)):Zd(hr,m.stateNode));break;case 4:v=hr,S=Es,hr=m.stateNode.containerInfo,Es=!0,Hi(s,l,m),hr=v,Es=S;break;case 0:case 11:case 14:case 15:if(!Sr&&(v=m.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){S=v=v.next;do{var N=S,L=N.destroy;N=N.tag,L!==void 0&&((N&2)!==0||(N&4)!==0)&&Dh(m,l,L),S=S.next}while(S!==v)}Hi(s,l,m);break;case 1:if(!Sr&&(Aa(m,l),v=m.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=m.memoizedProps,v.state=m.memoizedState,v.componentWillUnmount()}catch(Z){jn(m,l,Z)}Hi(s,l,m);break;case 21:Hi(s,l,m);break;case 22:m.mode&1?(Sr=(v=Sr)||m.memoizedState!==null,Hi(s,l,m),Sr=v):Hi(s,l,m);break;default:Hi(s,l,m)}}function em(s){var l=s.updateQueue;if(l!==null){s.updateQueue=null;var m=s.stateNode;m===null&&(m=s.stateNode=new cb),l.forEach(function(v){var S=yb.bind(null,s,v);m.has(v)||(m.add(v),v.then(S,S))})}}function Ss(s,l){var m=l.deletions;if(m!==null)for(var v=0;v<m.length;v++){var S=m[v];try{var N=s,L=l,Z=L;e:for(;Z!==null;){switch(Z.tag){case 5:hr=Z.stateNode,Es=!1;break e;case 3:hr=Z.stateNode.containerInfo,Es=!0;break e;case 4:hr=Z.stateNode.containerInfo,Es=!0;break e}Z=Z.return}if(hr===null)throw Error(n(160));Jg(N,L,S),hr=null,Es=!1;var re=S.alternate;re!==null&&(re.return=null),S.return=null}catch(be){jn(S,l,be)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)tm(l,s),l=l.sibling}function tm(s,l){var m=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Ss(l,s),$s(s),v&4){try{Wl(3,s,s.return),au(3,s)}catch(at){jn(s,s.return,at)}try{Wl(5,s,s.return)}catch(at){jn(s,s.return,at)}}break;case 1:Ss(l,s),$s(s),v&512&&m!==null&&Aa(m,m.return);break;case 5:if(Ss(l,s),$s(s),v&512&&m!==null&&Aa(m,m.return),s.flags&32){var S=s.stateNode;try{Wn(S,"")}catch(at){jn(s,s.return,at)}}if(v&4&&(S=s.stateNode,S!=null)){var N=s.memoizedProps,L=m!==null?m.memoizedProps:N,Z=s.type,re=s.updateQueue;if(s.updateQueue=null,re!==null)try{Z==="input"&&N.type==="radio"&&N.name!=null&&rt(S,N),ln(Z,L);var be=ln(Z,N);for(L=0;L<re.length;L+=2){var Me=re[L],Fe=re[L+1];Me==="style"?Ge(S,Fe):Me==="dangerouslySetInnerHTML"?sn(S,Fe):Me==="children"?Wn(S,Fe):B(S,Me,Fe,be)}switch(Z){case"input":J(S,N);break;case"textarea":mt(S,N);break;case"select":var Pe=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!N.multiple;var Ye=N.value;Ye!=null?ke(S,!!N.multiple,Ye,!1):Pe!==!!N.multiple&&(N.defaultValue!=null?ke(S,!!N.multiple,N.defaultValue,!0):ke(S,!!N.multiple,N.multiple?[]:"",!1))}S[jl]=N}catch(at){jn(s,s.return,at)}}break;case 6:if(Ss(l,s),$s(s),v&4){if(s.stateNode===null)throw Error(n(162));S=s.stateNode,N=s.memoizedProps;try{S.nodeValue=N}catch(at){jn(s,s.return,at)}}break;case 3:if(Ss(l,s),$s(s),v&4&&m!==null&&m.memoizedState.isDehydrated)try{ws(l.containerInfo)}catch(at){jn(s,s.return,at)}break;case 4:Ss(l,s),$s(s);break;case 13:Ss(l,s),$s(s),S=s.child,S.flags&8192&&(N=S.memoizedState!==null,S.stateNode.isHidden=N,!N||S.alternate!==null&&S.alternate.memoizedState!==null||(zh=nn())),v&4&&em(s);break;case 22:if(Me=m!==null&&m.memoizedState!==null,s.mode&1?(Sr=(be=Sr)||Me,Ss(l,s),Sr=be):Ss(l,s),$s(s),v&8192){if(be=s.memoizedState!==null,(s.stateNode.isHidden=be)&&!Me&&(s.mode&1)!==0)for(et=s,Me=s.child;Me!==null;){for(Fe=et=Me;et!==null;){switch(Pe=et,Ye=Pe.child,Pe.tag){case 0:case 11:case 14:case 15:Wl(4,Pe,Pe.return);break;case 1:Aa(Pe,Pe.return);var st=Pe.stateNode;if(typeof st.componentWillUnmount=="function"){v=Pe,m=Pe.return;try{l=v,st.props=l.memoizedProps,st.state=l.memoizedState,st.componentWillUnmount()}catch(at){jn(v,m,at)}}break;case 5:Aa(Pe,Pe.return);break;case 22:if(Pe.memoizedState!==null){sm(Fe);continue}}Ye!==null?(Ye.return=Pe,et=Ye):sm(Fe)}Me=Me.sibling}e:for(Me=null,Fe=s;;){if(Fe.tag===5){if(Me===null){Me=Fe;try{S=Fe.stateNode,be?(N=S.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(Z=Fe.stateNode,re=Fe.memoizedProps.style,L=re!=null&&re.hasOwnProperty("display")?re.display:null,Z.style.display=wn("display",L))}catch(at){jn(s,s.return,at)}}}else if(Fe.tag===6){if(Me===null)try{Fe.stateNode.nodeValue=be?"":Fe.memoizedProps}catch(at){jn(s,s.return,at)}}else if((Fe.tag!==22&&Fe.tag!==23||Fe.memoizedState===null||Fe===s)&&Fe.child!==null){Fe.child.return=Fe,Fe=Fe.child;continue}if(Fe===s)break e;for(;Fe.sibling===null;){if(Fe.return===null||Fe.return===s)break e;Me===Fe&&(Me=null),Fe=Fe.return}Me===Fe&&(Me=null),Fe.sibling.return=Fe.return,Fe=Fe.sibling}}break;case 19:Ss(l,s),$s(s),v&4&&em(s);break;case 21:break;default:Ss(l,s),$s(s)}}function $s(s){var l=s.flags;if(l&2){try{e:{for(var m=s.return;m!==null;){if(Zg(m)){var v=m;break e}m=m.return}throw Error(n(160))}switch(v.tag){case 5:var S=v.stateNode;v.flags&32&&(Wn(S,""),v.flags&=-33);var N=Qg(s);Bh(s,N,S);break;case 3:case 4:var L=v.stateNode.containerInfo,Z=Qg(s);Lh(s,Z,L);break;default:throw Error(n(161))}}catch(re){jn(s,s.return,re)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function db(s,l,m){et=s,nm(s)}function nm(s,l,m){for(var v=(s.mode&1)!==0;et!==null;){var S=et,N=S.child;if(S.tag===22&&v){var L=S.memoizedState!==null||ou;if(!L){var Z=S.alternate,re=Z!==null&&Z.memoizedState!==null||Sr;Z=ou;var be=Sr;if(ou=L,(Sr=re)&&!be)for(et=S;et!==null;)L=et,re=L.child,L.tag===22&&L.memoizedState!==null?im(S):re!==null?(re.return=L,et=re):im(S);for(;N!==null;)et=N,nm(N),N=N.sibling;et=S,ou=Z,Sr=be}rm(s)}else(S.subtreeFlags&8772)!==0&&N!==null?(N.return=S,et=N):rm(s)}}function rm(s){for(;et!==null;){var l=et;if((l.flags&8772)!==0){var m=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Sr||au(5,l);break;case 1:var v=l.stateNode;if(l.flags&4&&!Sr)if(m===null)v.componentDidMount();else{var S=l.elementType===l.type?m.memoizedProps:Cs(l.type,m.memoizedProps);v.componentDidUpdate(S,m.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var N=l.updateQueue;N!==null&&sg(l,N,v);break;case 3:var L=l.updateQueue;if(L!==null){if(m=null,l.child!==null)switch(l.child.tag){case 5:m=l.child.stateNode;break;case 1:m=l.child.stateNode}sg(l,L,m)}break;case 5:var Z=l.stateNode;if(m===null&&l.flags&4){m=Z;var re=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&m.focus();break;case"img":re.src&&(m.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var be=l.alternate;if(be!==null){var Me=be.memoizedState;if(Me!==null){var Fe=Me.dehydrated;Fe!==null&&ws(Fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Sr||l.flags&512&&Mh(l)}catch(Pe){jn(l,l.return,Pe)}}if(l===s){et=null;break}if(m=l.sibling,m!==null){m.return=l.return,et=m;break}et=l.return}}function sm(s){for(;et!==null;){var l=et;if(l===s){et=null;break}var m=l.sibling;if(m!==null){m.return=l.return,et=m;break}et=l.return}}function im(s){for(;et!==null;){var l=et;try{switch(l.tag){case 0:case 11:case 15:var m=l.return;try{au(4,l)}catch(re){jn(l,m,re)}break;case 1:var v=l.stateNode;if(typeof v.componentDidMount=="function"){var S=l.return;try{v.componentDidMount()}catch(re){jn(l,S,re)}}var N=l.return;try{Mh(l)}catch(re){jn(l,N,re)}break;case 5:var L=l.return;try{Mh(l)}catch(re){jn(l,L,re)}}}catch(re){jn(l,l.return,re)}if(l===s){et=null;break}var Z=l.sibling;if(Z!==null){Z.return=l.return,et=Z;break}et=l.return}}var hb=Math.ceil,lu=U.ReactCurrentDispatcher,Fh=U.ReactCurrentOwner,hs=U.ReactCurrentBatchConfig,Zt=0,rr=null,Fn=null,fr=0,Yr=0,Na=Ui(0),Kn=0,$l=null,Mo=0,cu=0,Uh=0,Hl=null,Dr=null,zh=0,Ia=1/0,fi=null,uu=!1,Vh=null,Gi=null,du=!1,qi=null,hu=0,Gl=0,Wh=null,fu=-1,gu=0;function Rr(){return(Zt&6)!==0?nn():fu!==-1?fu:fu=nn()}function Xi(s){return(s.mode&1)===0?1:(Zt&2)!==0&&fr!==0?fr&-fr:K2.transition!==null?(gu===0&&(gu=$n()),gu):(s=Dt,s!==0||(s=window.event,s=s===void 0?16:yl(s.type)),s)}function _s(s,l,m,v){if(50<Gl)throw Gl=0,Wh=null,Error(n(185));G(s,m,v),((Zt&2)===0||s!==rr)&&(s===rr&&((Zt&2)===0&&(cu|=m),Kn===4&&Ki(s,fr)),Mr(s,v),m===1&&Zt===0&&(l.mode&1)===0&&(Ia=nn()+500,Vc&&Vi()))}function Mr(s,l){var m=s.callbackNode;Ti(s,l);var v=$r(s,s===rr?fr:0);if(v===0)m!==null&&er(m),s.callbackNode=null,s.callbackPriority=0;else if(l=v&-v,s.callbackPriority!==l){if(m!=null&&er(m),l===1)s.tag===0?X2(am.bind(null,s)):G1(am.bind(null,s)),$2(function(){(Zt&6)===0&&Vi()}),m=null;else{switch(Ec(v)){case 1:m=Te;break;case 4:m=bc;break;case 16:m=un;break;case 536870912:m=Cc;break;default:m=un}m=mm(m,om.bind(null,s))}s.callbackPriority=l,s.callbackNode=m}}function om(s,l){if(fu=-1,gu=0,(Zt&6)!==0)throw Error(n(327));var m=s.callbackNode;if(Ta()&&s.callbackNode!==m)return null;var v=$r(s,s===rr?fr:0);if(v===0)return null;if((v&30)!==0||(v&s.expiredLanes)!==0||l)l=mu(s,v);else{l=v;var S=Zt;Zt|=2;var N=cm();(rr!==s||fr!==l)&&(fi=null,Ia=nn()+500,Bo(s,l));do try{mb();break}catch(Z){lm(s,Z)}while(!0);ah(),lu.current=N,Zt=S,Fn!==null?l=0:(rr=null,fr=0,l=Kn)}if(l!==0){if(l===2&&(S=rn(s),S!==0&&(v=S,l=$h(s,S))),l===1)throw m=$l,Bo(s,0),Ki(s,v),Mr(s,nn()),m;if(l===6)Ki(s,v);else{if(S=s.current.alternate,(v&30)===0&&!fb(S)&&(l=mu(s,v),l===2&&(N=rn(s),N!==0&&(v=N,l=$h(s,N))),l===1))throw m=$l,Bo(s,0),Ki(s,v),Mr(s,nn()),m;switch(s.finishedWork=S,s.finishedLanes=v,l){case 0:case 1:throw Error(n(345));case 2:Fo(s,Dr,fi);break;case 3:if(Ki(s,v),(v&130023424)===v&&(l=zh+500-nn(),10<l)){if($r(s,0)!==0)break;if(S=s.suspendedLanes,(S&v)!==v){Rr(),s.pingedLanes|=s.suspendedLanes&S;break}s.timeoutHandle=Yd(Fo.bind(null,s,Dr,fi),l);break}Fo(s,Dr,fi);break;case 4:if(Ki(s,v),(v&4194240)===v)break;for(l=s.eventTimes,S=-1;0<v;){var L=31-Ir(v);N=1<<L,L=l[L],L>S&&(S=L),v&=~N}if(v=S,v=nn()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*hb(v/1960))-v,10<v){s.timeoutHandle=Yd(Fo.bind(null,s,Dr,fi),v);break}Fo(s,Dr,fi);break;case 5:Fo(s,Dr,fi);break;default:throw Error(n(329))}}}return Mr(s,nn()),s.callbackNode===m?om.bind(null,s):null}function $h(s,l){var m=Hl;return s.current.memoizedState.isDehydrated&&(Bo(s,l).flags|=256),s=mu(s,l),s!==2&&(l=Dr,Dr=m,l!==null&&Hh(l)),s}function Hh(s){Dr===null?Dr=s:Dr.push.apply(Dr,s)}function fb(s){for(var l=s;;){if(l.flags&16384){var m=l.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var v=0;v<m.length;v++){var S=m[v],N=S.getSnapshot;S=S.value;try{if(!de(N(),S))return!1}catch{return!1}}}if(m=l.child,l.subtreeFlags&16384&&m!==null)m.return=l,l=m;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ki(s,l){for(l&=~Uh,l&=~cu,s.suspendedLanes|=l,s.pingedLanes&=~l,s=s.expirationTimes;0<l;){var m=31-Ir(l),v=1<<m;s[m]=-1,l&=~v}}function am(s){if((Zt&6)!==0)throw Error(n(327));Ta();var l=$r(s,0);if((l&1)===0)return Mr(s,nn()),null;var m=mu(s,l);if(s.tag!==0&&m===2){var v=rn(s);v!==0&&(l=v,m=$h(s,v))}if(m===1)throw m=$l,Bo(s,0),Ki(s,l),Mr(s,nn()),m;if(m===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=l,Fo(s,Dr,fi),Mr(s,nn()),null}function Gh(s,l){var m=Zt;Zt|=1;try{return s(l)}finally{Zt=m,Zt===0&&(Ia=nn()+500,Vc&&Vi())}}function Lo(s){qi!==null&&qi.tag===0&&(Zt&6)===0&&Ta();var l=Zt;Zt|=1;var m=hs.transition,v=Dt;try{if(hs.transition=null,Dt=1,s)return s()}finally{Dt=v,hs.transition=m,Zt=l,(Zt&6)===0&&Vi()}}function qh(){Yr=Na.current,vn(Na)}function Bo(s,l){s.finishedWork=null,s.finishedLanes=0;var m=s.timeoutHandle;if(m!==-1&&(s.timeoutHandle=-1,W2(m)),Fn!==null)for(m=Fn.return;m!==null;){var v=m;switch(nh(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&Uc();break;case 3:Sa(),vn(jr),vn(br),mh();break;case 5:fh(v);break;case 4:Sa();break;case 13:vn(An);break;case 19:vn(An);break;case 10:lh(v.type._context);break;case 22:case 23:qh()}m=m.return}if(rr=s,Fn=s=Yi(s.current,null),fr=Yr=l,Kn=0,$l=null,Uh=cu=Mo=0,Dr=Hl=null,Oo!==null){for(l=0;l<Oo.length;l++)if(m=Oo[l],v=m.interleaved,v!==null){m.interleaved=null;var S=v.next,N=m.pending;if(N!==null){var L=N.next;N.next=S,v.next=L}m.pending=v}Oo=null}return s}function lm(s,l){do{var m=Fn;try{if(ah(),Qc.current=nu,Jc){for(var v=Nn.memoizedState;v!==null;){var S=v.queue;S!==null&&(S.pending=null),v=v.next}Jc=!1}if(Do=0,nr=Xn=Nn=null,Bl=!1,Fl=0,Fh.current=null,m===null||m.return===null){Kn=1,$l=l,Fn=null;break}e:{var N=s,L=m.return,Z=m,re=l;if(l=fr,Z.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var be=re,Me=Z,Fe=Me.tag;if((Me.mode&1)===0&&(Fe===0||Fe===11||Fe===15)){var Pe=Me.alternate;Pe?(Me.updateQueue=Pe.updateQueue,Me.memoizedState=Pe.memoizedState,Me.lanes=Pe.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Ye=Og(L);if(Ye!==null){Ye.flags&=-257,Pg(Ye,L,Z,N,l),Ye.mode&1&&jg(N,be,l),l=Ye,re=be;var st=l.updateQueue;if(st===null){var at=new Set;at.add(re),l.updateQueue=at}else st.add(re);break e}else{if((l&1)===0){jg(N,be,l),Xh();break e}re=Error(n(426))}}else if(En&&Z.mode&1){var Ln=Og(L);if(Ln!==null){(Ln.flags&65536)===0&&(Ln.flags|=256),Pg(Ln,L,Z,N,l),ih(_a(re,Z));break e}}N=re=_a(re,Z),Kn!==4&&(Kn=2),Hl===null?Hl=[N]:Hl.push(N),N=L;do{switch(N.tag){case 3:N.flags|=65536,l&=-l,N.lanes|=l;var me=Rg(N,re,l);rg(N,me);break e;case 1:Z=re;var oe=N.type,xe=N.stateNode;if((N.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(Gi===null||!Gi.has(xe)))){N.flags|=65536,l&=-l,N.lanes|=l;var He=kg(N,Z,l);rg(N,He);break e}}N=N.return}while(N!==null)}dm(m)}catch(ct){l=ct,Fn===m&&m!==null&&(Fn=m=m.return);continue}break}while(!0)}function cm(){var s=lu.current;return lu.current=nu,s===null?nu:s}function Xh(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),rr===null||(Mo&268435455)===0&&(cu&268435455)===0||Ki(rr,fr)}function mu(s,l){var m=Zt;Zt|=2;var v=cm();(rr!==s||fr!==l)&&(fi=null,Bo(s,l));do try{gb();break}catch(S){lm(s,S)}while(!0);if(ah(),Zt=m,lu.current=v,Fn!==null)throw Error(n(261));return rr=null,fr=0,Kn}function gb(){for(;Fn!==null;)um(Fn)}function mb(){for(;Fn!==null&&!fn();)um(Fn)}function um(s){var l=gm(s.alternate,s,Yr);s.memoizedProps=s.pendingProps,l===null?dm(s):Fn=l,Fh.current=null}function dm(s){var l=s;do{var m=l.alternate;if(s=l.return,(l.flags&32768)===0){if(m=ab(m,l,Yr),m!==null){Fn=m;return}}else{if(m=lb(m,l),m!==null){m.flags&=32767,Fn=m;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Kn=6,Fn=null;return}}if(l=l.sibling,l!==null){Fn=l;return}Fn=l=s}while(l!==null);Kn===0&&(Kn=5)}function Fo(s,l,m){var v=Dt,S=hs.transition;try{hs.transition=null,Dt=1,pb(s,l,m,v)}finally{hs.transition=S,Dt=v}return null}function pb(s,l,m,v){do Ta();while(qi!==null);if((Zt&6)!==0)throw Error(n(327));m=s.finishedWork;var S=s.finishedLanes;if(m===null)return null;if(s.finishedWork=null,s.finishedLanes=0,m===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var N=m.lanes|m.childLanes;if(ht(s,N),s===rr&&(Fn=rr=null,fr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||du||(du=!0,mm(un,function(){return Ta(),null})),N=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||N){N=hs.transition,hs.transition=null;var L=Dt;Dt=1;var Z=Zt;Zt|=4,Fh.current=null,ub(s,m),tm(m,s),vr(Xd),Fs=!!qd,Xd=qd=null,s.current=m,db(m),vc(),Zt=Z,Dt=L,hs.transition=N}else s.current=m;if(du&&(du=!1,qi=s,hu=S),N=s.pendingLanes,N===0&&(Gi=null),Vt(m.stateNode),Mr(s,nn()),l!==null)for(v=s.onRecoverableError,m=0;m<l.length;m++)S=l[m],v(S.value,{componentStack:S.stack,digest:S.digest});if(uu)throw uu=!1,s=Vh,Vh=null,s;return(hu&1)!==0&&s.tag!==0&&Ta(),N=s.pendingLanes,(N&1)!==0?s===Wh?Gl++:(Gl=0,Wh=s):Gl=0,Vi(),null}function Ta(){if(qi!==null){var s=Ec(hu),l=hs.transition,m=Dt;try{if(hs.transition=null,Dt=16>s?16:s,qi===null)var v=!1;else{if(s=qi,qi=null,hu=0,(Zt&6)!==0)throw Error(n(331));var S=Zt;for(Zt|=4,et=s.current;et!==null;){var N=et,L=N.child;if((et.flags&16)!==0){var Z=N.deletions;if(Z!==null){for(var re=0;re<Z.length;re++){var be=Z[re];for(et=be;et!==null;){var Me=et;switch(Me.tag){case 0:case 11:case 15:Wl(8,Me,N)}var Fe=Me.child;if(Fe!==null)Fe.return=Me,et=Fe;else for(;et!==null;){Me=et;var Pe=Me.sibling,Ye=Me.return;if(Yg(Me),Me===be){et=null;break}if(Pe!==null){Pe.return=Ye,et=Pe;break}et=Ye}}}var st=N.alternate;if(st!==null){var at=st.child;if(at!==null){st.child=null;do{var Ln=at.sibling;at.sibling=null,at=Ln}while(at!==null)}}et=N}}if((N.subtreeFlags&2064)!==0&&L!==null)L.return=N,et=L;else e:for(;et!==null;){if(N=et,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:Wl(9,N,N.return)}var me=N.sibling;if(me!==null){me.return=N.return,et=me;break e}et=N.return}}var oe=s.current;for(et=oe;et!==null;){L=et;var xe=L.child;if((L.subtreeFlags&2064)!==0&&xe!==null)xe.return=L,et=xe;else e:for(L=oe;et!==null;){if(Z=et,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:au(9,Z)}}catch(ct){jn(Z,Z.return,ct)}if(Z===L){et=null;break e}var He=Z.sibling;if(He!==null){He.return=Z.return,et=He;break e}et=Z.return}}if(Zt=S,Vi(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(qt,s)}catch{}v=!0}return v}finally{Dt=m,hs.transition=l}}return!1}function hm(s,l,m){l=_a(m,l),l=Rg(s,l,1),s=$i(s,l,1),l=Rr(),s!==null&&(G(s,1,l),Mr(s,l))}function jn(s,l,m){if(s.tag===3)hm(s,s,m);else for(;l!==null;){if(l.tag===3){hm(l,s,m);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Gi===null||!Gi.has(v))){s=_a(m,s),s=kg(l,s,1),l=$i(l,s,1),s=Rr(),l!==null&&(G(l,1,s),Mr(l,s));break}}l=l.return}}function xb(s,l,m){var v=s.pingCache;v!==null&&v.delete(l),l=Rr(),s.pingedLanes|=s.suspendedLanes&m,rr===s&&(fr&m)===m&&(Kn===4||Kn===3&&(fr&130023424)===fr&&500>nn()-zh?Bo(s,0):Uh|=m),Mr(s,l)}function fm(s,l){l===0&&((s.mode&1)===0?l=1:(l=ia,ia<<=1,(ia&130023424)===0&&(ia=4194304)));var m=Rr();s=ui(s,l),s!==null&&(G(s,l,m),Mr(s,m))}function wb(s){var l=s.memoizedState,m=0;l!==null&&(m=l.retryLane),fm(s,m)}function yb(s,l){var m=0;switch(s.tag){case 13:var v=s.stateNode,S=s.memoizedState;S!==null&&(m=S.retryLane);break;case 19:v=s.stateNode;break;default:throw Error(n(314))}v!==null&&v.delete(l),fm(s,m)}var gm;gm=function(s,l,m){if(s!==null)if(s.memoizedProps!==l.pendingProps||jr.current)Pr=!0;else{if((s.lanes&m)===0&&(l.flags&128)===0)return Pr=!1,ob(s,l,m);Pr=(s.flags&131072)!==0}else Pr=!1,En&&(l.flags&1048576)!==0&&q1(l,$c,l.index);switch(l.lanes=0,l.tag){case 2:var v=l.type;iu(s,l),s=l.pendingProps;var S=xa(l,br.current);Ea(l,m),S=wh(null,l,v,s,S,m);var N=yh();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Or(v)?(N=!0,zc(l)):N=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,dh(l),S.updater=ru,l.stateNode=S,S._reactInternals=l,_h(l,v,s,m),l=Th(null,l,v,!0,N,m)):(l.tag=0,En&&N&&th(l),Tr(null,l,S,m),l=l.child),l;case 16:v=l.elementType;e:{switch(iu(s,l),s=l.pendingProps,S=v._init,v=S(v._payload),l.type=v,S=l.tag=bb(v),s=Cs(v,s),S){case 0:l=Ih(null,l,v,s,m);break e;case 1:l=Ug(null,l,v,s,m);break e;case 11:l=Dg(null,l,v,s,m);break e;case 14:l=Mg(null,l,v,Cs(v.type,s),m);break e}throw Error(n(306,v,""))}return l;case 0:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:Cs(v,S),Ih(s,l,v,S,m);case 1:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:Cs(v,S),Ug(s,l,v,S,m);case 3:e:{if(zg(l),s===null)throw Error(n(387));v=l.pendingProps,N=l.memoizedState,S=N.element,ng(s,l),Yc(l,v,null,m);var L=l.memoizedState;if(v=L.element,N.isDehydrated)if(N={element:v,isDehydrated:!1,cache:L.cache,pendingSuspenseBoundaries:L.pendingSuspenseBoundaries,transitions:L.transitions},l.updateQueue.baseState=N,l.memoizedState=N,l.flags&256){S=_a(Error(n(423)),l),l=Vg(s,l,v,m,S);break e}else if(v!==S){S=_a(Error(n(424)),l),l=Vg(s,l,v,m,S);break e}else for(Kr=Fi(l.stateNode.containerInfo.firstChild),Xr=l,En=!0,bs=null,m=eg(l,null,v,m),l.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(va(),v===S){l=hi(s,l,m);break e}Tr(s,l,v,m)}l=l.child}return l;case 5:return ig(l),s===null&&sh(l),v=l.type,S=l.pendingProps,N=s!==null?s.memoizedProps:null,L=S.children,Kd(v,S)?L=null:N!==null&&Kd(v,N)&&(l.flags|=32),Fg(s,l),Tr(s,l,L,m),l.child;case 6:return s===null&&sh(l),null;case 13:return Wg(s,l,m);case 4:return hh(l,l.stateNode.containerInfo),v=l.pendingProps,s===null?l.child=ba(l,null,v,m):Tr(s,l,v,m),l.child;case 11:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:Cs(v,S),Dg(s,l,v,S,m);case 7:return Tr(s,l,l.pendingProps,m),l.child;case 8:return Tr(s,l,l.pendingProps.children,m),l.child;case 12:return Tr(s,l,l.pendingProps.children,m),l.child;case 10:e:{if(v=l.type._context,S=l.pendingProps,N=l.memoizedProps,L=S.value,pn(qc,v._currentValue),v._currentValue=L,N!==null)if(de(N.value,L)){if(N.children===S.children&&!jr.current){l=hi(s,l,m);break e}}else for(N=l.child,N!==null&&(N.return=l);N!==null;){var Z=N.dependencies;if(Z!==null){L=N.child;for(var re=Z.firstContext;re!==null;){if(re.context===v){if(N.tag===1){re=di(-1,m&-m),re.tag=2;var be=N.updateQueue;if(be!==null){be=be.shared;var Me=be.pending;Me===null?re.next=re:(re.next=Me.next,Me.next=re),be.pending=re}}N.lanes|=m,re=N.alternate,re!==null&&(re.lanes|=m),ch(N.return,m,l),Z.lanes|=m;break}re=re.next}}else if(N.tag===10)L=N.type===l.type?null:N.child;else if(N.tag===18){if(L=N.return,L===null)throw Error(n(341));L.lanes|=m,Z=L.alternate,Z!==null&&(Z.lanes|=m),ch(L,m,l),L=N.sibling}else L=N.child;if(L!==null)L.return=N;else for(L=N;L!==null;){if(L===l){L=null;break}if(N=L.sibling,N!==null){N.return=L.return,L=N;break}L=L.return}N=L}Tr(s,l,S.children,m),l=l.child}return l;case 9:return S=l.type,v=l.pendingProps.children,Ea(l,m),S=us(S),v=v(S),l.flags|=1,Tr(s,l,v,m),l.child;case 14:return v=l.type,S=Cs(v,l.pendingProps),S=Cs(v.type,S),Mg(s,l,v,S,m);case 15:return Lg(s,l,l.type,l.pendingProps,m);case 17:return v=l.type,S=l.pendingProps,S=l.elementType===v?S:Cs(v,S),iu(s,l),l.tag=1,Or(v)?(s=!0,zc(l)):s=!1,Ea(l,m),Ig(l,v,S),_h(l,v,S,m),Th(null,l,v,!0,s,m);case 19:return Hg(s,l,m);case 22:return Bg(s,l,m)}throw Error(n(156,l.tag))};function mm(s,l){return Vr(s,l)}function vb(s,l,m,v){this.tag=s,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(s,l,m,v){return new vb(s,l,m,v)}function Kh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function bb(s){if(typeof s=="function")return Kh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ae)return 11;if(s===ee)return 14}return 2}function Yi(s,l){var m=s.alternate;return m===null?(m=fs(s.tag,l,s.key,s.mode),m.elementType=s.elementType,m.type=s.type,m.stateNode=s.stateNode,m.alternate=s,s.alternate=m):(m.pendingProps=l,m.type=s.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=s.flags&14680064,m.childLanes=s.childLanes,m.lanes=s.lanes,m.child=s.child,m.memoizedProps=s.memoizedProps,m.memoizedState=s.memoizedState,m.updateQueue=s.updateQueue,l=s.dependencies,m.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},m.sibling=s.sibling,m.index=s.index,m.ref=s.ref,m}function pu(s,l,m,v,S,N){var L=2;if(v=s,typeof s=="function")Kh(s)&&(L=1);else if(typeof s=="string")L=5;else e:switch(s){case W:return Uo(m.children,S,N,l);case X:L=8,S|=8;break;case $:return s=fs(12,m,l,S|2),s.elementType=$,s.lanes=N,s;case te:return s=fs(13,m,l,S),s.elementType=te,s.lanes=N,s;case fe:return s=fs(19,m,l,S),s.elementType=fe,s.lanes=N,s;case _e:return xu(m,S,N,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Q:L=10;break e;case ue:L=9;break e;case ae:L=11;break e;case ee:L=14;break e;case Ae:L=16,v=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return l=fs(L,m,l,S),l.elementType=s,l.type=v,l.lanes=N,l}function Uo(s,l,m,v){return s=fs(7,s,v,l),s.lanes=m,s}function xu(s,l,m,v){return s=fs(22,s,v,l),s.elementType=_e,s.lanes=m,s.stateNode={isHidden:!1},s}function Yh(s,l,m){return s=fs(6,s,null,l),s.lanes=m,s}function Zh(s,l,m){return l=fs(4,s.children!==null?s.children:[],s.key,l),l.lanes=m,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Cb(s,l,m,v,S){this.tag=l,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=v,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Qh(s,l,m,v,S,N,L,Z,re){return s=new Cb(s,l,m,Z,re),l===1?(l=1,N===!0&&(l|=8)):l=0,N=fs(3,null,null,l),s.current=N,N.stateNode=s,N.memoizedState={element:v,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},dh(N),s}function Eb(s,l,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:v==null?null:""+v,children:s,containerInfo:l,implementation:m}}function pm(s){if(!s)return zi;s=s._reactInternals;e:{if(kr(s)!==s||s.tag!==1)throw Error(n(170));var l=s;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Or(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(s.tag===1){var m=s.type;if(Or(m))return $1(s,m,l)}return l}function xm(s,l,m,v,S,N,L,Z,re){return s=Qh(m,v,!0,s,S,N,L,Z,re),s.context=pm(null),m=s.current,v=Rr(),S=Xi(m),N=di(v,S),N.callback=l??null,$i(m,N,S),s.current.lanes=S,G(s,S,v),Mr(s,v),s}function wu(s,l,m,v){var S=l.current,N=Rr(),L=Xi(S);return m=pm(m),l.context===null?l.context=m:l.pendingContext=m,l=di(N,L),l.payload={element:s},v=v===void 0?null:v,v!==null&&(l.callback=v),s=$i(S,l,L),s!==null&&(_s(s,S,L,N),Kc(s,S,L)),L}function yu(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function wm(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var m=s.retryLane;s.retryLane=m!==0&&m<l?m:l}}function Jh(s,l){wm(s,l),(s=s.alternate)&&wm(s,l)}function Sb(){return null}var ym=typeof reportError=="function"?reportError:function(s){console.error(s)};function ef(s){this._internalRoot=s}vu.prototype.render=ef.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(n(409));wu(s,l,null,null)},vu.prototype.unmount=ef.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Lo(function(){wu(null,s,null,null)}),l[oi]=null}};function vu(s){this._internalRoot=s}vu.prototype.unstable_scheduleHydration=function(s){if(s){var l=gn();s={blockedOn:null,target:s,priority:l};for(var m=0;m<cr.length&&l!==0&&l<cr[m].priority;m++);cr.splice(m,0,s),m===0&&_c(s)}};function tf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bu(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function vm(){}function _b(s,l,m,v,S){if(S){if(typeof v=="function"){var N=v;v=function(){var be=yu(L);N.call(be)}}var L=xm(l,v,s,0,null,!1,!1,"",vm);return s._reactRootContainer=L,s[oi]=L.current,Rl(s.nodeType===8?s.parentNode:s),Lo(),L}for(;S=s.lastChild;)s.removeChild(S);if(typeof v=="function"){var Z=v;v=function(){var be=yu(re);Z.call(be)}}var re=Qh(s,0,!1,null,null,!1,!1,"",vm);return s._reactRootContainer=re,s[oi]=re.current,Rl(s.nodeType===8?s.parentNode:s),Lo(function(){wu(l,re,m,v)}),re}function Cu(s,l,m,v,S){var N=m._reactRootContainer;if(N){var L=N;if(typeof S=="function"){var Z=S;S=function(){var re=yu(L);Z.call(re)}}wu(l,L,s,S)}else L=_b(m,l,s,S,v);return yu(L)}oa=function(s){switch(s.tag){case 3:var l=s.stateNode;if(l.current.memoizedState.isDehydrated){var m=dn(l.pendingLanes);m!==0&&(Rn(l,m|1),Mr(l,nn()),(Zt&6)===0&&(Ia=nn()+500,Vi()))}break;case 13:Lo(function(){var v=ui(s,1);if(v!==null){var S=Rr();_s(v,s,1,S)}}),Jh(s,1)}},yr=function(s){if(s.tag===13){var l=ui(s,134217728);if(l!==null){var m=Rr();_s(l,s,134217728,m)}Jh(s,134217728)}},ft=function(s){if(s.tag===13){var l=Xi(s),m=ui(s,l);if(m!==null){var v=Rr();_s(m,s,l,v)}Jh(s,l)}},gn=function(){return Dt},pl=function(s,l){var m=Dt;try{return Dt=s,l()}finally{Dt=m}},Ai=function(s,l,m){switch(l){case"input":if(J(s,m),l=m.name,m.type==="radio"&&l!=null){for(m=s;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<m.length;l++){var v=m[l];if(v!==s&&v.form===s.form){var S=Fc(v);if(!S)throw Error(n(90));Ct(v),J(v,S)}}}break;case"textarea":mt(s,m);break;case"select":l=m.value,l!=null&&ke(s,!!m.multiple,l,!1)}},Ze=Gh,pt=Lo;var Ab={usingClientEntryPoint:!1,Events:[Ol,ma,Fc,Ie,je,Gh]},ql={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nb={bundleType:ql.bundleType,version:ql.version,rendererPackageName:ql.rendererPackageName,rendererConfig:ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=wc(s),s===null?null:s.stateNode},findFiberByHostInstance:ql.findFiberByHostInstance||Sb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{qt=Eu.inject(Nb),Pt=Eu}catch{}}return Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ab,Lr.createPortal=function(s,l){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tf(l))throw Error(n(200));return Eb(s,l,null,m)},Lr.createRoot=function(s,l){if(!tf(s))throw Error(n(299));var m=!1,v="",S=ym;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=Qh(s,1,!1,null,null,m,!1,v,S),s[oi]=l.current,Rl(s.nodeType===8?s.parentNode:s),new ef(l)},Lr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=wc(l),s=s===null?null:s.stateNode,s},Lr.flushSync=function(s){return Lo(s)},Lr.hydrate=function(s,l,m){if(!bu(l))throw Error(n(200));return Cu(null,s,l,!0,m)},Lr.hydrateRoot=function(s,l,m){if(!tf(s))throw Error(n(405));var v=m!=null&&m.hydratedSources||null,S=!1,N="",L=ym;if(m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onRecoverableError!==void 0&&(L=m.onRecoverableError)),l=xm(l,null,s,1,m??null,S,!1,N,L),s[oi]=l.current,Rl(s),v)for(s=0;s<v.length;s++)m=v[s],S=m._getVersion,S=S(m._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[m,S]:l.mutableSourceEagerHydrationData.push(m,S);return new vu(l)},Lr.render=function(s,l,m){if(!bu(l))throw Error(n(200));return Cu(null,s,l,!1,m)},Lr.unmountComponentAtNode=function(s){if(!bu(s))throw Error(n(40));return s._reactRootContainer?(Lo(function(){Cu(null,null,s,!1,function(){s._reactRootContainer=null,s[oi]=null})}),!0):!1},Lr.unstable_batchedUpdates=Gh,Lr.unstable_renderSubtreeIntoContainer=function(s,l,m,v){if(!bu(m))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Cu(s,l,m,!1,v)},Lr.version="18.3.1-next-f1338f8080-20240426",Lr}var Im;function Ox(){if(Im)return sf.exports;Im=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),sf.exports=Db(),sf.exports}var Tm;function Mb(){if(Tm)return _u;Tm=1;var r=Ox();return _u.createRoot=r.createRoot,_u.hydrateRoot=r.hydrateRoot,_u}var Lb=Mb(),I=M0();const Bn=hc(I),L0=D0({__proto__:null,default:Bn},[I]);function Rm(r,t){if(typeof r=="function")return r(t);r!=null&&(r.current=t)}function nl(...r){return t=>{let n=!1;const o=r.map(u=>{const d=Rm(u,t);return!n&&typeof d=="function"&&(n=!0),d});if(n)return()=>{for(let u=0;u<o.length;u++){const d=o[u];typeof d=="function"?d():Rm(r[u],null)}}}}function tn(...r){return I.useCallback(nl(...r),r)}var Bb=Symbol.for("react.lazy"),Qu=L0[" use ".trim().toString()];function Fb(r){return typeof r=="object"&&r!==null&&"then"in r}function Px(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===Bb&&"_payload"in r&&Fb(r._payload)}function Dx(r){const t=Ub(r),n=I.forwardRef((o,u)=>{let{children:d,...p}=o;Px(d)&&typeof Qu=="function"&&(d=Qu(d._payload));const w=I.Children.toArray(d),b=w.find(Vb);if(b){const y=b.props.children,_=w.map(A=>A===b?I.Children.count(y)>1?I.Children.only(null):I.isValidElement(y)?y.props.children:null:A);return c.jsx(t,{...p,ref:u,children:I.isValidElement(y)?I.cloneElement(y,void 0,_):null})}return c.jsx(t,{...p,ref:u,children:d})});return n.displayName=`${r}.Slot`,n}var Mx=Dx("Slot");function Ub(r){const t=I.forwardRef((n,o)=>{let{children:u,...d}=n;if(Px(u)&&typeof Qu=="function"&&(u=Qu(u._payload)),I.isValidElement(u)){const p=$b(u),w=Wb(d,u.props);return u.type!==I.Fragment&&(w.ref=o?nl(o,p):p),I.cloneElement(u,w)}return I.Children.count(u)>1?I.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var zb=Symbol("radix.slottable");function Vb(r){return I.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===zb}function Wb(r,t){const n={...t};for(const o in t){const u=r[o],d=t[o];/^on[A-Z]/.test(o)?u&&d?n[o]=(...w)=>{const b=d(...w);return u(...w),b}:u&&(n[o]=u):o==="style"?n[o]={...u,...d}:o==="className"&&(n[o]=[u,d].filter(Boolean).join(" "))}return{...r,...n}}function $b(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function Lx(r){var t,n,o="";if(typeof r=="string"||typeof r=="number")o+=r;else if(typeof r=="object")if(Array.isArray(r)){var u=r.length;for(t=0;t<u;t++)r[t]&&(n=Lx(r[t]))&&(o&&(o+=" "),o+=n)}else for(n in r)r[n]&&(o&&(o+=" "),o+=n);return o}function Bx(){for(var r,t,n=0,o="",u=arguments.length;n<u;n++)(r=arguments[n])&&(t=Lx(r))&&(o&&(o+=" "),o+=t);return o}const km=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,jm=Bx,B0=(r,t)=>n=>{var o;if(t?.variants==null)return jm(r,n?.class,n?.className);const{variants:u,defaultVariants:d}=t,p=Object.keys(u).map(y=>{const _=n?.[y],A=d?.[y];if(_===null)return null;const k=km(_)||km(A);return u[y][k]}),w=n&&Object.entries(n).reduce((y,_)=>{let[A,k]=_;return k===void 0||(y[A]=k),y},{}),b=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((y,_)=>{let{class:A,className:k,...R}=_;return Object.entries(R).every(D=>{let[j,M]=D;return Array.isArray(M)?M.includes({...d,...w}[j]):{...d,...w}[j]===M})?[...y,A,k]:y},[]);return jm(r,p,b,n?.class,n?.className)},F0="-",Hb=r=>{const t=qb(r),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=r;return{getClassGroupId:p=>{const w=p.split(F0);return w[0]===""&&w.length!==1&&w.shift(),Fx(w,t)||Gb(p)},getConflictingClassGroupIds:(p,w)=>{const b=n[p]||[];return w&&o[p]?[...b,...o[p]]:b}}},Fx=(r,t)=>{if(r.length===0)return t.classGroupId;const n=r[0],o=t.nextPart.get(n),u=o?Fx(r.slice(1),o):void 0;if(u)return u;if(t.validators.length===0)return;const d=r.join(F0);return t.validators.find(({validator:p})=>p(d))?.classGroupId},Om=/^\[(.+)\]$/,Gb=r=>{if(Om.test(r)){const t=Om.exec(r)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},qb=r=>{const{theme:t,classGroups:n}=r,o={nextPart:new Map,validators:[]};for(const u in n)t0(n[u],o,u,t);return o},t0=(r,t,n,o)=>{r.forEach(u=>{if(typeof u=="string"){const d=u===""?t:Pm(t,u);d.classGroupId=n;return}if(typeof u=="function"){if(Xb(u)){t0(u(o),t,n,o);return}t.validators.push({validator:u,classGroupId:n});return}Object.entries(u).forEach(([d,p])=>{t0(p,Pm(t,d),n,o)})})},Pm=(r,t)=>{let n=r;return t.split(F0).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n},Xb=r=>r.isThemeGetter,Kb=r=>{if(r<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,o=new Map;const u=(d,p)=>{n.set(d,p),t++,t>r&&(t=0,o=n,n=new Map)};return{get(d){let p=n.get(d);if(p!==void 0)return p;if((p=o.get(d))!==void 0)return u(d,p),p},set(d,p){n.has(d)?n.set(d,p):u(d,p)}}},n0="!",r0=":",Yb=r0.length,Zb=r=>{const{prefix:t,experimentalParseClassName:n}=r;let o=u=>{const d=[];let p=0,w=0,b=0,y;for(let D=0;D<u.length;D++){let j=u[D];if(p===0&&w===0){if(j===r0){d.push(u.slice(b,D)),b=D+Yb;continue}if(j==="/"){y=D;continue}}j==="["?p++:j==="]"?p--:j==="("?w++:j===")"&&w--}const _=d.length===0?u:u.substring(b),A=Qb(_),k=A!==_,R=y&&y>b?y-b:void 0;return{modifiers:d,hasImportantModifier:k,baseClassName:A,maybePostfixModifierPosition:R}};if(t){const u=t+r0,d=o;o=p=>p.startsWith(u)?d(p.substring(u.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:p,maybePostfixModifierPosition:void 0}}if(n){const u=o;o=d=>n({className:d,parseClassName:u})}return o},Qb=r=>r.endsWith(n0)?r.substring(0,r.length-1):r.startsWith(n0)?r.substring(1):r,Jb=r=>{const t=Object.fromEntries(r.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const u=[];let d=[];return o.forEach(p=>{p[0]==="["||t[p]?(u.push(...d.sort(),p),d=[]):d.push(p)}),u.push(...d.sort()),u}},eC=r=>({cache:Kb(r.cacheSize),parseClassName:Zb(r),sortModifiers:Jb(r),...Hb(r)}),tC=/\s+/,nC=(r,t)=>{const{parseClassName:n,getClassGroupId:o,getConflictingClassGroupIds:u,sortModifiers:d}=t,p=[],w=r.trim().split(tC);let b="";for(let y=w.length-1;y>=0;y-=1){const _=w[y],{isExternal:A,modifiers:k,hasImportantModifier:R,baseClassName:D,maybePostfixModifierPosition:j}=n(_);if(A){b=_+(b.length>0?" "+b:b);continue}let M=!!j,V=o(M?D.substring(0,j):D);if(!V){if(!M){b=_+(b.length>0?" "+b:b);continue}if(V=o(D),!V){b=_+(b.length>0?" "+b:b);continue}M=!1}const z=d(k).join(":"),B=R?z+n0:z,U=B+V;if(p.includes(U))continue;p.push(U);const H=u(V,M);for(let Y=0;Y<H.length;++Y){const W=H[Y];p.push(B+W)}b=_+(b.length>0?" "+b:b)}return b};function rC(){let r=0,t,n,o="";for(;r<arguments.length;)(t=arguments[r++])&&(n=Ux(t))&&(o&&(o+=" "),o+=n);return o}const Ux=r=>{if(typeof r=="string")return r;let t,n="";for(let o=0;o<r.length;o++)r[o]&&(t=Ux(r[o]))&&(n&&(n+=" "),n+=t);return n};function sC(r,...t){let n,o,u,d=p;function p(b){const y=t.reduce((_,A)=>A(_),r());return n=eC(y),o=n.cache.get,u=n.cache.set,d=w,w(b)}function w(b){const y=o(b);if(y)return y;const _=nC(b,n);return u(b,_),_}return function(){return d(rC.apply(null,arguments))}}const Yn=r=>{const t=n=>n[r]||[];return t.isThemeGetter=!0,t},zx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Vx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,iC=/^\d+\/\d+$/,oC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ra=r=>iC.test(r),Ft=r=>!!r&&!Number.isNaN(Number(r)),Qi=r=>!!r&&Number.isInteger(Number(r)),lf=r=>r.endsWith("%")&&Ft(r.slice(0,-1)),gi=r=>oC.test(r),dC=()=>!0,hC=r=>aC.test(r)&&!lC.test(r),Wx=()=>!1,fC=r=>cC.test(r),gC=r=>uC.test(r),mC=r=>!it(r)&&!ot(r),pC=r=>rl(r,Gx,Wx),it=r=>zx.test(r),zo=r=>rl(r,qx,hC),cf=r=>rl(r,bC,Ft),Dm=r=>rl(r,$x,Wx),xC=r=>rl(r,Hx,gC),Au=r=>rl(r,Xx,fC),ot=r=>Vx.test(r),Kl=r=>sl(r,qx),wC=r=>sl(r,CC),Mm=r=>sl(r,$x),yC=r=>sl(r,Gx),vC=r=>sl(r,Hx),Nu=r=>sl(r,Xx,!0),rl=(r,t,n)=>{const o=zx.exec(r);return o?o[1]?t(o[1]):n(o[2]):!1},sl=(r,t,n=!1)=>{const o=Vx.exec(r);return o?o[1]?t(o[1]):n:!1},$x=r=>r==="position"||r==="percentage",Hx=r=>r==="image"||r==="url",Gx=r=>r==="length"||r==="size"||r==="bg-size",qx=r=>r==="length",bC=r=>r==="number",CC=r=>r==="family-name",Xx=r=>r==="shadow",EC=()=>{const r=Yn("color"),t=Yn("font"),n=Yn("text"),o=Yn("font-weight"),u=Yn("tracking"),d=Yn("leading"),p=Yn("breakpoint"),w=Yn("container"),b=Yn("spacing"),y=Yn("radius"),_=Yn("shadow"),A=Yn("inset-shadow"),k=Yn("text-shadow"),R=Yn("drop-shadow"),D=Yn("blur"),j=Yn("perspective"),M=Yn("aspect"),V=Yn("ease"),z=Yn("animate"),B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...U(),ot,it],Y=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto","contain","none"],X=()=>[ot,it,b],$=()=>[Ra,"full","auto",...X()],Q=()=>[Qi,"none","subgrid",ot,it],ue=()=>["auto",{span:["full",Qi,ot,it]},Qi,ot,it],ae=()=>[Qi,"auto",ot,it],te=()=>["auto","min","max","fr",ot,it],fe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ee=()=>["start","end","center","stretch","center-safe","end-safe"],Ae=()=>["auto",...X()],_e=()=>[Ra,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...X()],le=()=>[r,ot,it],ce=()=>[...U(),Mm,Dm,{position:[ot,it]}],he=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",yC,pC,{size:[ot,it]}],pe=()=>[lf,Kl,zo],Be=()=>["","none","full",y,ot,it],Ve=()=>["",Ft,Kl,zo],Ee=()=>["solid","dashed","dotted","double"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[Ft,lf,Mm,Dm],Re=()=>["","none",D,ot,it],qe=()=>["none",Ft,ot,it],Ke=()=>["none",Ft,ot,it],We=()=>[Ft,ot,it],Ct=()=>[Ra,"full",...X()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[gi],breakpoint:[gi],color:[dC],container:[gi],"drop-shadow":[gi],ease:["in","out","in-out"],font:[mC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[gi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[gi],shadow:[gi],spacing:["px",Ft],text:[gi],"text-shadow":[gi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ra,it,ot,M]}],container:["container"],columns:[{columns:[Ft,it,ot,w]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:Y()}],"overflow-x":[{"overflow-x":Y()}],"overflow-y":[{"overflow-y":Y()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:$()}],"inset-x":[{"inset-x":$()}],"inset-y":[{"inset-y":$()}],start:[{start:$()}],end:[{end:$()}],top:[{top:$()}],right:[{right:$()}],bottom:[{bottom:$()}],left:[{left:$()}],visibility:["visible","invisible","collapse"],z:[{z:[Qi,"auto",ot,it]}],basis:[{basis:[Ra,"full","auto",w,...X()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ft,Ra,"auto","initial","none",it]}],grow:[{grow:["",Ft,ot,it]}],shrink:[{shrink:["",Ft,ot,it]}],order:[{order:[Qi,"first","last","none",ot,it]}],"grid-cols":[{"grid-cols":Q()}],"col-start-end":[{col:ue()}],"col-start":[{"col-start":ae()}],"col-end":[{"col-end":ae()}],"grid-rows":[{"grid-rows":Q()}],"row-start-end":[{row:ue()}],"row-start":[{"row-start":ae()}],"row-end":[{"row-end":ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":te()}],"auto-rows":[{"auto-rows":te()}],gap:[{gap:X()}],"gap-x":[{"gap-x":X()}],"gap-y":[{"gap-y":X()}],"justify-content":[{justify:[...fe(),"normal"]}],"justify-items":[{"justify-items":[...ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...ee()]}],"align-content":[{content:["normal",...fe()]}],"align-items":[{items:[...ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":fe()}],"place-items":[{"place-items":[...ee(),"baseline"]}],"place-self":[{"place-self":["auto",...ee()]}],p:[{p:X()}],px:[{px:X()}],py:[{py:X()}],ps:[{ps:X()}],pe:[{pe:X()}],pt:[{pt:X()}],pr:[{pr:X()}],pb:[{pb:X()}],pl:[{pl:X()}],m:[{m:Ae()}],mx:[{mx:Ae()}],my:[{my:Ae()}],ms:[{ms:Ae()}],me:[{me:Ae()}],mt:[{mt:Ae()}],mr:[{mr:Ae()}],mb:[{mb:Ae()}],ml:[{ml:Ae()}],"space-x":[{"space-x":X()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":X()}],"space-y-reverse":["space-y-reverse"],size:[{size:_e()}],w:[{w:[w,"screen",..._e()]}],"min-w":[{"min-w":[w,"screen","none",..._e()]}],"max-w":[{"max-w":[w,"screen","none","prose",{screen:[p]},..._e()]}],h:[{h:["screen","lh",..._e()]}],"min-h":[{"min-h":["screen","lh","none",..._e()]}],"max-h":[{"max-h":["screen","lh",..._e()]}],"font-size":[{text:["base",n,Kl,zo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,ot,cf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",lf,it]}],"font-family":[{font:[wC,it,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,ot,it]}],"line-clamp":[{"line-clamp":[Ft,"none",ot,cf]}],leading:[{leading:[d,...X()]}],"list-image":[{"list-image":["none",ot,it]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ot,it]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:le()}],"text-color":[{text:le()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ft,"from-font","auto",ot,zo]}],"text-decoration-color":[{decoration:le()}],"underline-offset":[{"underline-offset":[Ft,"auto",ot,it]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot,it]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot,it]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:he()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qi,ot,it],radial:["",ot,it],conic:[Qi,ot,it]},vC,xC]}],"bg-color":[{bg:le()}],"gradient-from-pos":[{from:pe()}],"gradient-via-pos":[{via:pe()}],"gradient-to-pos":[{to:pe()}],"gradient-from":[{from:le()}],"gradient-via":[{via:le()}],"gradient-to":[{to:le()}],rounded:[{rounded:Be()}],"rounded-s":[{"rounded-s":Be()}],"rounded-e":[{"rounded-e":Be()}],"rounded-t":[{"rounded-t":Be()}],"rounded-r":[{"rounded-r":Be()}],"rounded-b":[{"rounded-b":Be()}],"rounded-l":[{"rounded-l":Be()}],"rounded-ss":[{"rounded-ss":Be()}],"rounded-se":[{"rounded-se":Be()}],"rounded-ee":[{"rounded-ee":Be()}],"rounded-es":[{"rounded-es":Be()}],"rounded-tl":[{"rounded-tl":Be()}],"rounded-tr":[{"rounded-tr":Be()}],"rounded-br":[{"rounded-br":Be()}],"rounded-bl":[{"rounded-bl":Be()}],"border-w":[{border:Ve()}],"border-w-x":[{"border-x":Ve()}],"border-w-y":[{"border-y":Ve()}],"border-w-s":[{"border-s":Ve()}],"border-w-e":[{"border-e":Ve()}],"border-w-t":[{"border-t":Ve()}],"border-w-r":[{"border-r":Ve()}],"border-w-b":[{"border-b":Ve()}],"border-w-l":[{"border-l":Ve()}],"divide-x":[{"divide-x":Ve()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ve()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ee(),"hidden","none"]}],"divide-style":[{divide:[...Ee(),"hidden","none"]}],"border-color":[{border:le()}],"border-color-x":[{"border-x":le()}],"border-color-y":[{"border-y":le()}],"border-color-s":[{"border-s":le()}],"border-color-e":[{"border-e":le()}],"border-color-t":[{"border-t":le()}],"border-color-r":[{"border-r":le()}],"border-color-b":[{"border-b":le()}],"border-color-l":[{"border-l":le()}],"divide-color":[{divide:le()}],"outline-style":[{outline:[...Ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ft,ot,it]}],"outline-w":[{outline:["",Ft,Kl,zo]}],"outline-color":[{outline:le()}],shadow:[{shadow:["","none",_,Nu,Au]}],"shadow-color":[{shadow:le()}],"inset-shadow":[{"inset-shadow":["none",A,Nu,Au]}],"inset-shadow-color":[{"inset-shadow":le()}],"ring-w":[{ring:Ve()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:le()}],"ring-offset-w":[{"ring-offset":[Ft,zo]}],"ring-offset-color":[{"ring-offset":le()}],"inset-ring-w":[{"inset-ring":Ve()}],"inset-ring-color":[{"inset-ring":le()}],"text-shadow":[{"text-shadow":["none",k,Nu,Au]}],"text-shadow-color":[{"text-shadow":le()}],opacity:[{opacity:[Ft,ot,it]}],"mix-blend":[{"mix-blend":[...we(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":we()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ft]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":le()}],"mask-image-linear-to-color":[{"mask-linear-to":le()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":le()}],"mask-image-t-to-color":[{"mask-t-to":le()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":le()}],"mask-image-r-to-color":[{"mask-r-to":le()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":le()}],"mask-image-b-to-color":[{"mask-b-to":le()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":le()}],"mask-image-l-to-color":[{"mask-l-to":le()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":le()}],"mask-image-x-to-color":[{"mask-x-to":le()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":le()}],"mask-image-y-to-color":[{"mask-y-to":le()}],"mask-image-radial":[{"mask-radial":[ot,it]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":le()}],"mask-image-radial-to-color":[{"mask-radial-to":le()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":U()}],"mask-image-conic-pos":[{"mask-conic":[Ft]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":le()}],"mask-image-conic-to-color":[{"mask-conic-to":le()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:he()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ot,it]}],filter:[{filter:["","none",ot,it]}],blur:[{blur:Re()}],brightness:[{brightness:[Ft,ot,it]}],contrast:[{contrast:[Ft,ot,it]}],"drop-shadow":[{"drop-shadow":["","none",R,Nu,Au]}],"drop-shadow-color":[{"drop-shadow":le()}],grayscale:[{grayscale:["",Ft,ot,it]}],"hue-rotate":[{"hue-rotate":[Ft,ot,it]}],invert:[{invert:["",Ft,ot,it]}],saturate:[{saturate:[Ft,ot,it]}],sepia:[{sepia:["",Ft,ot,it]}],"backdrop-filter":[{"backdrop-filter":["","none",ot,it]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Ft,ot,it]}],"backdrop-contrast":[{"backdrop-contrast":[Ft,ot,it]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ft,ot,it]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ft,ot,it]}],"backdrop-invert":[{"backdrop-invert":["",Ft,ot,it]}],"backdrop-opacity":[{"backdrop-opacity":[Ft,ot,it]}],"backdrop-saturate":[{"backdrop-saturate":[Ft,ot,it]}],"backdrop-sepia":[{"backdrop-sepia":["",Ft,ot,it]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":X()}],"border-spacing-x":[{"border-spacing-x":X()}],"border-spacing-y":[{"border-spacing-y":X()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ot,it]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ft,"initial",ot,it]}],ease:[{ease:["linear","initial",V,ot,it]}],delay:[{delay:[Ft,ot,it]}],animate:[{animate:["none",z,ot,it]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,ot,it]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:qe()}],"rotate-x":[{"rotate-x":qe()}],"rotate-y":[{"rotate-y":qe()}],"rotate-z":[{"rotate-z":qe()}],scale:[{scale:Ke()}],"scale-x":[{"scale-x":Ke()}],"scale-y":[{"scale-y":Ke()}],"scale-z":[{"scale-z":Ke()}],"scale-3d":["scale-3d"],skew:[{skew:We()}],"skew-x":[{"skew-x":We()}],"skew-y":[{"skew-y":We()}],transform:[{transform:[ot,it,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ct()}],"translate-x":[{"translate-x":Ct()}],"translate-y":[{"translate-y":Ct()}],"translate-z":[{"translate-z":Ct()}],"translate-none":["translate-none"],accent:[{accent:le()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:le()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot,it]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot,it]}],fill:[{fill:["none",...le()]}],"stroke-w":[{stroke:[Ft,Kl,zo,cf]}],stroke:[{stroke:["none",...le()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},SC=sC(EC);function Ot(...r){return SC(Bx(r))}const _C=B0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Ne=I.forwardRef(({className:r,variant:t,size:n,asChild:o=!1,...u},d)=>{const p=o?Mx:"button";return c.jsx(p,{ref:d,"data-slot":"button",className:Ot(_C({variant:t,size:n,className:r})),...u})});Ne.displayName="Button";function tt({className:r,type:t,...n}){return c.jsx("input",{type:t,"data-slot":"input",className:Ot("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...n})}var il=Ox();const AC=hc(il);var NC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],IC=NC.reduce((r,t)=>{const n=Dx(`Primitive.${t}`),o=I.forwardRef((u,d)=>{const{asChild:p,...w}=u,b=p?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(b,{...w,ref:d})});return o.displayName=`Primitive.${t}`,{...r,[t]:o}},{}),TC="Label",Kx=I.forwardRef((r,t)=>c.jsx(IC.label,{...r,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(r.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Kx.displayName=TC;var RC=Kx;function $e({className:r,...t}){return c.jsx(RC,{"data-slot":"label",className:Ot("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}function ir({className:r,...t}){return c.jsx("div",{"data-slot":"card",className:Ot("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...t})}function Br({className:r,...t}){return c.jsx("div",{"data-slot":"card-header",className:Ot("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function Fr({className:r,...t}){return c.jsx("h4",{"data-slot":"card-title",className:Ot("leading-none",r),...t})}function Yo({className:r,...t}){return c.jsx("p",{"data-slot":"card-description",className:Ot("text-muted-foreground",r),...t})}function gr({className:r,...t}){return c.jsx("div",{"data-slot":"card-content",className:Ot("px-6 [&:last-child]:pb-6",r),...t})}function kC({className:r,...t}){return c.jsx("div",{"data-slot":"card-footer",className:Ot("flex items-center px-6 pb-6 [.border-t]:pt-6",r),...t})}const jC=B0("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function qs({className:r,variant:t,...n}){return c.jsx("div",{"data-slot":"alert",role:"alert",className:Ot(jC({variant:t}),r),...n})}function Xs({className:r,...t}){return c.jsx("div",{"data-slot":"alert-description",className:Ot("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...t})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,o)=>o?o.toUpperCase():n.toLowerCase()),Lm=r=>{const t=PC(r);return t.charAt(0).toUpperCase()+t.slice(1)},Yx=(...r)=>r.filter((t,n,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=I.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:p,...w},b)=>I.createElement("svg",{ref:b,...DC,width:t,height:t,stroke:r,strokeWidth:o?Number(n)*24/Number(t):n,className:Yx("lucide",u),...w},[...p.map(([y,_])=>I.createElement(y,_)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(r,t)=>{const n=I.forwardRef(({className:o,...u},d)=>I.createElement(MC,{ref:d,iconNode:t,className:Yx(`lucide-${OC(Lm(r))}`,`lucide-${r}`,o),...u}));return n.displayName=Lm(r),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],BC=dt("align-center",LC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],UC=dt("align-left",FC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],VC=dt("align-right",zC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Zx=dt("arrow-down",WC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],U0=dt("arrow-left",$C);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Qx=dt("arrow-right",HC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Jx=dt("arrow-up-down",GC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ew=dt("arrow-up",qC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],s0=dt("bold",XC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],YC=dt("calendar-days",KC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sc=dt("calendar",ZC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Bm=dt("camera",QC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],eE=dt("chart-column",JC);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],tw=dt("check",tE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],z0=dt("chevron-down",nE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sE=dt("chevron-up",rE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Zo=dt("circle-alert",iE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],V0=dt("circle-check-big",oE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Wa=dt("circle-check",aE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],cE=dt("circle-play",lE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dE=dt("circle-x",uE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fE=dt("circle",hE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],gd=dt("clock",gE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],pE=dt("copy",mE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],wE=dt("download",xE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],vE=dt("ellipsis-vertical",yE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nw=dt("eye",bE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],EE=dt("image",CE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],i0=dt("italic",SE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],AE=dt("link-2",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Fm=dt("link",NE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nr=dt("loader-circle",IE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Um=dt("lock",TE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],kE=dt("log-in",RE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],rw=dt("log-out",jE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],ks=dt("mail",OE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],W0=dt("map-pin",PE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],sw=dt("message-square",DE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M5 12h14",key:"1ays0h"}]],LE=dt("minus",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],FE=dt("move",BE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],iw=dt("palette",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],uf=dt("paperclip",zE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],js=dt("plus",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],$E=dt("printer",WE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ow=dt("qr-code",HE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ju=dt("refresh-cw",GE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],aw=dt("save",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],$0=dt("search",XE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Za=dt("send",KE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ZE=dt("settings-2",YE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JE=dt("settings",QE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zm=dt("shield",eS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Qa=dt("square-pen",tS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],na=dt("trash-2",nS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],df=dt("type",rS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ic=dt("upload",sS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ja=dt("users",iS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],aS=dt("wand-sparkles",oS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oc=dt("x",lS);var o0=function(r,t){return o0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(n[u]=o[u])},o0(r,t)};function lw(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o0(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var gs=function(){return gs=Object.assign||function(t){for(var n,o=1,u=arguments.length;o<u;o++){n=arguments[o];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(t[d]=n[d])}return t},gs.apply(this,arguments)};function fo(r,t){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&t.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(r);u<o.length;u++)t.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(r,o[u])&&(n[o[u]]=r[o[u]]);return n}function cw(r,t,n,o){var u=arguments.length,d=u<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,n):o,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(r,t,n,o);else for(var w=r.length-1;w>=0;w--)(p=r[w])&&(d=(u<3?p(d):u>3?p(t,n,d):p(t,n))||d);return u>3&&d&&Object.defineProperty(t,n,d),d}function uw(r,t){return function(n,o){t(n,o,r)}}function dw(r,t,n,o,u,d){function p(V){if(V!==void 0&&typeof V!="function")throw new TypeError("Function expected");return V}for(var w=o.kind,b=w==="getter"?"get":w==="setter"?"set":"value",y=!t&&r?o.static?r:r.prototype:null,_=t||(y?Object.getOwnPropertyDescriptor(y,o.name):{}),A,k=!1,R=n.length-1;R>=0;R--){var D={};for(var j in o)D[j]=j==="access"?{}:o[j];for(var j in o.access)D.access[j]=o.access[j];D.addInitializer=function(V){if(k)throw new TypeError("Cannot add initializers after decoration has completed");d.push(p(V||null))};var M=(0,n[R])(w==="accessor"?{get:_.get,set:_.set}:_[b],D);if(w==="accessor"){if(M===void 0)continue;if(M===null||typeof M!="object")throw new TypeError("Object expected");(A=p(M.get))&&(_.get=A),(A=p(M.set))&&(_.set=A),(A=p(M.init))&&u.unshift(A)}else(A=p(M))&&(w==="field"?u.unshift(A):_[b]=A)}y&&Object.defineProperty(y,o.name,_),k=!0}function hw(r,t,n){for(var o=arguments.length>2,u=0;u<t.length;u++)n=o?t[u].call(r,n):t[u].call(r);return o?n:void 0}function fw(r){return typeof r=="symbol"?r:"".concat(r)}function gw(r,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function mw(r,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,t)}function ut(r,t,n,o){function u(d){return d instanceof n?d:new n(function(p){p(d)})}return new(n||(n=Promise))(function(d,p){function w(_){try{y(o.next(_))}catch(A){p(A)}}function b(_){try{y(o.throw(_))}catch(A){p(A)}}function y(_){_.done?d(_.value):u(_.value).then(w,b)}y((o=o.apply(r,t||[])).next())})}function pw(r,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,p=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return p.next=w(0),p.throw=w(1),p.return=w(2),typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(_){return b([y,_])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,u&&(d=y[0]&2?u.return:y[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,y[1])).done)return d;switch(u=0,d&&(y=[y[0]&2,d.value]),y[0]){case 0:case 1:d=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,u=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){n.label=y[1];break}if(y[0]===6&&n.label<d[1]){n.label=d[1],d=y;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(y);break}d[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(r,n)}catch(_){y=[6,_],u=0}finally{o=d=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var md=Object.create?(function(r,t,n,o){o===void 0&&(o=n);var u=Object.getOwnPropertyDescriptor(t,n);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(r,o,u)}):(function(r,t,n,o){o===void 0&&(o=n),r[o]=t[n]});function xw(r,t){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&md(t,r,n)}function ed(r){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&r[t],o=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function H0(r,t){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var o=n.call(r),u,d=[],p;try{for(;(t===void 0||t-- >0)&&!(u=o.next()).done;)d.push(u.value)}catch(w){p={error:w}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(p)throw p.error}}return d}function ww(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(H0(arguments[t]));return r}function yw(){for(var r=0,t=0,n=arguments.length;t<n;t++)r+=arguments[t].length;for(var o=Array(r),u=0,t=0;t<n;t++)for(var d=arguments[t],p=0,w=d.length;p<w;p++,u++)o[u]=d[p];return o}function G0(r,t,n){if(n||arguments.length===2)for(var o=0,u=t.length,d;o<u;o++)(d||!(o in t))&&(d||(d=Array.prototype.slice.call(t,0,o)),d[o]=t[o]);return r.concat(d||Array.prototype.slice.call(t))}function el(r){return this instanceof el?(this.v=r,this):new el(r)}function vw(r,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(r,t||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),w("next"),w("throw"),w("return",p),u[Symbol.asyncIterator]=function(){return this},u;function p(R){return function(D){return Promise.resolve(D).then(R,A)}}function w(R,D){o[R]&&(u[R]=function(j){return new Promise(function(M,V){d.push([R,j,M,V])>1||b(R,j)})},D&&(u[R]=D(u[R])))}function b(R,D){try{y(o[R](D))}catch(j){k(d[0][3],j)}}function y(R){R.value instanceof el?Promise.resolve(R.value.v).then(_,A):k(d[0][2],R)}function _(R){b("next",R)}function A(R){b("throw",R)}function k(R,D){R(D),d.shift(),d.length&&b(d[0][0],d[0][1])}}function bw(r){var t,n;return t={},o("next"),o("throw",function(u){throw u}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(u,d){t[u]=r[u]?function(p){return(n=!n)?{value:el(r[u](p)),done:!1}:d?d(p):p}:d}}function Cw(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],n;return t?t.call(r):(r=typeof ed=="function"?ed(r):r[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(d){n[d]=r[d]&&function(p){return new Promise(function(w,b){p=r[d](p),u(w,b,p.done,p.value)})}}function u(d,p,w,b){Promise.resolve(b).then(function(y){d({value:y,done:w})},p)}}function Ew(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}var cS=Object.create?(function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}):function(r,t){r.default=t},a0=function(r){return a0=Object.getOwnPropertyNames||function(t){var n=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[n.length]=o);return n},a0(r)};function Sw(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var n=a0(r),o=0;o<n.length;o++)n[o]!=="default"&&md(t,r,n[o]);return cS(t,r),t}function _w(r){return r&&r.__esModule?r:{default:r}}function Aw(r,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!o:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(r):o?o.value:t.get(r)}function Nw(r,t,n,o,u){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!u:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?u.call(r,n):u?u.value=n:t.set(r,n),n}function Iw(r,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?t===r:r.has(t)}function Tw(r,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var o,u;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=t[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=t[Symbol.dispose],n&&(u=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");u&&(o=function(){try{u.call(this)}catch(d){return Promise.reject(d)}}),r.stack.push({value:t,dispose:o,async:n})}else n&&r.stack.push({async:!0});return t}var uS=typeof SuppressedError=="function"?SuppressedError:function(r,t,n){var o=new Error(n);return o.name="SuppressedError",o.error=r,o.suppressed=t,o};function Rw(r){function t(d){r.error=r.hasError?new uS(d,r.error,"An error was suppressed during disposal."):d,r.hasError=!0}var n,o=0;function u(){for(;n=r.stack.pop();)try{if(!n.async&&o===1)return o=0,r.stack.push(n),Promise.resolve().then(u);if(n.dispose){var d=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(d).then(u,function(p){return t(p),u()})}else o|=1}catch(p){t(p)}if(o===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return u()}function kw(r,t){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,u,d,p){return o?t?".jsx":".js":u&&(!d||!p)?n:u+d+"."+p.toLowerCase()+"js"}):r}const dS={__extends:lw,__assign:gs,__rest:fo,__decorate:cw,__param:uw,__esDecorate:dw,__runInitializers:hw,__propKey:fw,__setFunctionName:gw,__metadata:mw,__awaiter:ut,__generator:pw,__createBinding:md,__exportStar:xw,__values:ed,__read:H0,__spread:ww,__spreadArrays:yw,__spreadArray:G0,__await:el,__asyncGenerator:vw,__asyncDelegator:bw,__asyncValues:Cw,__makeTemplateObject:Ew,__importStar:Sw,__importDefault:_w,__classPrivateFieldGet:Aw,__classPrivateFieldSet:Nw,__classPrivateFieldIn:Iw,__addDisposableResource:Tw,__disposeResources:Rw,__rewriteRelativeImportExtension:kw},hS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Tw,get __assign(){return gs},__asyncDelegator:bw,__asyncGenerator:vw,__asyncValues:Cw,__await:el,__awaiter:ut,__classPrivateFieldGet:Aw,__classPrivateFieldIn:Iw,__classPrivateFieldSet:Nw,__createBinding:md,__decorate:cw,__disposeResources:Rw,__esDecorate:dw,__exportStar:xw,__extends:lw,__generator:pw,__importDefault:_w,__importStar:Sw,__makeTemplateObject:Ew,__metadata:mw,__param:uw,__propKey:fw,__read:H0,__rest:fo,__rewriteRelativeImportExtension:kw,__runInitializers:hw,__setFunctionName:gw,__spread:ww,__spreadArray:G0,__spreadArrays:yw,__values:ed,default:dS},Symbol.toStringTag,{value:"Module"})),fS=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);class q0 extends Error{constructor(t,n="FunctionsError",o){super(t),this.name=n,this.context=o}}class Vm extends q0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Wm extends q0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $m extends q0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var l0;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(l0||(l0={}));class gS{constructor(t,{headers:n={},customFetch:o,region:u=l0.Any}={}){this.url=t,this.headers=n,this.region=u,this.fetch=fS(o)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ut(this,arguments,void 0,function*(n,o={}){var u;try{const{headers:d,method:p,body:w,signal:b}=o;let y={},{region:_}=o;_||(_=this.region);const A=new URL(`${this.url}/${n}`);_&&_!=="any"&&(y["x-region"]=_,A.searchParams.set("forceFunctionRegion",_));let k;w&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",k=w):typeof w=="string"?(y["Content-Type"]="text/plain",k=w):typeof FormData<"u"&&w instanceof FormData?k=w:(y["Content-Type"]="application/json",k=JSON.stringify(w)):k=w;const R=yield this.fetch(A.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),d),body:k,signal:b}).catch(V=>{throw V.name==="AbortError"?V:new Vm(V)}),D=R.headers.get("x-relay-error");if(D&&D==="true")throw new Wm(R);if(!R.ok)throw new $m(R);let j=((u=R.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),M;return j==="application/json"?M=yield R.json():j==="application/octet-stream"||j==="application/pdf"?M=yield R.blob():j==="text/event-stream"?M=R:j==="multipart/form-data"?M=yield R.formData():M=yield R.text(),{data:M,error:null,response:R}}catch(d){return d instanceof Error&&d.name==="AbortError"?{data:null,error:new Vm(d)}:{data:null,error:d,response:d instanceof $m||d instanceof Wm?d.context:void 0}}})}}var _r={};const ol=Tb(hS);var Iu={},Tu={},Ru={},ku={},ju={},Ou={},Hm;function jw(){if(Hm)return Ou;Hm=1,Object.defineProperty(Ou,"__esModule",{value:!0});class r extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ou.default=r,Ou}var Gm;function Ow(){if(Gm)return ju;Gm=1,Object.defineProperty(ju,"__esModule",{value:!0});const t=ol.__importDefault(jw());class n{constructor(u){var d,p;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(d=u.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=u.signal,this.isMaybeSingle=(p=u.isMaybeSingle)!==null&&p!==void 0?p:!1,u.fetch?this.fetch=u.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,d){return this.headers=new Headers(this.headers),this.headers.set(u,d),this}then(u,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let w=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async b=>{var y,_,A,k;let R=null,D=null,j=null,M=b.status,V=b.statusText;if(b.ok){if(this.method!=="HEAD"){const H=await b.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?D=H:D=JSON.parse(H))}const B=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),U=(A=b.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");B&&U&&U.length>1&&(j=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(D)&&(D.length>1?(R={code:"PGRST116",details:`Results contain ${D.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},D=null,j=null,M=406,V="Not Acceptable"):D.length===1?D=D[0]:D=null)}else{const B=await b.text();try{R=JSON.parse(B),Array.isArray(R)&&b.status===404&&(D=[],R=null,M=200,V="OK")}catch{b.status===404&&B===""?(M=204,V="No Content"):R={message:B}}if(R&&this.isMaybeSingle&&(!((k=R?.details)===null||k===void 0)&&k.includes("0 rows"))&&(R=null,M=200,V="OK"),R&&this.shouldThrowOnError)throw new t.default(R)}return{error:R,data:D,count:j,status:M,statusText:V}});return this.shouldThrowOnError||(w=w.catch(b=>{var y,_,A;return{error:{message:`${(y=b?.name)!==null&&y!==void 0?y:"FetchError"}: ${b?.message}`,details:`${(_=b?.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(A=b?.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),w.then(u,d)}returns(){return this}overrideTypes(){return this}}return ju.default=n,ju}var qm;function Pw(){if(qm)return ku;qm=1,Object.defineProperty(ku,"__esModule",{value:!0});const t=ol.__importDefault(Ow());class n extends t.default{select(u){let d=!1;const p=(u??"*").split("").map(w=>/\s/.test(w)&&!d?"":(w==='"'&&(d=!d),w)).join("");return this.url.searchParams.set("select",p),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:p,foreignTable:w,referencedTable:b=w}={}){const y=b?`${b}.order`:"order",_=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${_?`${_},`:""}${u}.${d?"asc":"desc"}${p===void 0?"":p?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:p=d}={}){const w=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(w,`${u}`),this}range(u,d,{foreignTable:p,referencedTable:w=p}={}){const b=typeof w>"u"?"offset":`${w}.offset`,y=typeof w>"u"?"limit":`${w}.limit`;return this.url.searchParams.set(b,`${u}`),this.url.searchParams.set(y,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:p=!1,buffers:w=!1,wal:b=!1,format:y="text"}={}){var _;const A=[u?"analyze":null,d?"verbose":null,p?"settings":null,w?"buffers":null,b?"wal":null].filter(Boolean).join("|"),k=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${k}"; options=${A};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return ku.default=n,ku}var Xm;function X0(){if(Xm)return Ru;Xm=1,Object.defineProperty(Ru,"__esModule",{value:!0});const t=ol.__importDefault(Pw()),n=new RegExp("[,()]");class o extends t.default{eq(d,p){return this.url.searchParams.append(d,`eq.${p}`),this}neq(d,p){return this.url.searchParams.append(d,`neq.${p}`),this}gt(d,p){return this.url.searchParams.append(d,`gt.${p}`),this}gte(d,p){return this.url.searchParams.append(d,`gte.${p}`),this}lt(d,p){return this.url.searchParams.append(d,`lt.${p}`),this}lte(d,p){return this.url.searchParams.append(d,`lte.${p}`),this}like(d,p){return this.url.searchParams.append(d,`like.${p}`),this}likeAllOf(d,p){return this.url.searchParams.append(d,`like(all).{${p.join(",")}}`),this}likeAnyOf(d,p){return this.url.searchParams.append(d,`like(any).{${p.join(",")}}`),this}ilike(d,p){return this.url.searchParams.append(d,`ilike.${p}`),this}ilikeAllOf(d,p){return this.url.searchParams.append(d,`ilike(all).{${p.join(",")}}`),this}ilikeAnyOf(d,p){return this.url.searchParams.append(d,`ilike(any).{${p.join(",")}}`),this}is(d,p){return this.url.searchParams.append(d,`is.${p}`),this}in(d,p){const w=Array.from(new Set(p)).map(b=>typeof b=="string"&&n.test(b)?`"${b}"`:`${b}`).join(",");return this.url.searchParams.append(d,`in.(${w})`),this}contains(d,p){return typeof p=="string"?this.url.searchParams.append(d,`cs.${p}`):Array.isArray(p)?this.url.searchParams.append(d,`cs.{${p.join(",")}}`):this.url.searchParams.append(d,`cs.${JSON.stringify(p)}`),this}containedBy(d,p){return typeof p=="string"?this.url.searchParams.append(d,`cd.${p}`):Array.isArray(p)?this.url.searchParams.append(d,`cd.{${p.join(",")}}`):this.url.searchParams.append(d,`cd.${JSON.stringify(p)}`),this}rangeGt(d,p){return this.url.searchParams.append(d,`sr.${p}`),this}rangeGte(d,p){return this.url.searchParams.append(d,`nxl.${p}`),this}rangeLt(d,p){return this.url.searchParams.append(d,`sl.${p}`),this}rangeLte(d,p){return this.url.searchParams.append(d,`nxr.${p}`),this}rangeAdjacent(d,p){return this.url.searchParams.append(d,`adj.${p}`),this}overlaps(d,p){return typeof p=="string"?this.url.searchParams.append(d,`ov.${p}`):this.url.searchParams.append(d,`ov.{${p.join(",")}}`),this}textSearch(d,p,{config:w,type:b}={}){let y="";b==="plain"?y="pl":b==="phrase"?y="ph":b==="websearch"&&(y="w");const _=w===void 0?"":`(${w})`;return this.url.searchParams.append(d,`${y}fts${_}.${p}`),this}match(d){return Object.entries(d).forEach(([p,w])=>{this.url.searchParams.append(p,`eq.${w}`)}),this}not(d,p,w){return this.url.searchParams.append(d,`not.${p}.${w}`),this}or(d,{foreignTable:p,referencedTable:w=p}={}){const b=w?`${w}.or`:"or";return this.url.searchParams.append(b,`(${d})`),this}filter(d,p,w){return this.url.searchParams.append(d,`${p}.${w}`),this}}return Ru.default=o,Ru}var Km;function Dw(){if(Km)return Tu;Km=1,Object.defineProperty(Tu,"__esModule",{value:!0});const t=ol.__importDefault(X0());class n{constructor(u,{headers:d={},schema:p,fetch:w}){this.url=u,this.headers=new Headers(d),this.schema=p,this.fetch=w}select(u,d){const{head:p=!1,count:w}=d??{},b=p?"HEAD":"GET";let y=!1;const _=(u??"*").split("").map(A=>/\s/.test(A)&&!y?"":(A==='"'&&(y=!y),A)).join("");return this.url.searchParams.set("select",_),w&&this.headers.append("Prefer",`count=${w}`),new t.default({method:b,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:p=!0}={}){var w;const b="POST";if(d&&this.headers.append("Prefer",`count=${d}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const y=u.reduce((_,A)=>_.concat(Object.keys(A)),[]);if(y.length>0){const _=[...new Set(y)].map(A=>`"${A}"`);this.url.searchParams.set("columns",_.join(","))}}return new t.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:p=!1,count:w,defaultToNull:b=!0}={}){var y;const _="POST";if(this.headers.append("Prefer",`resolution=${p?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),w&&this.headers.append("Prefer",`count=${w}`),b||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const A=u.reduce((k,R)=>k.concat(Object.keys(R)),[]);if(A.length>0){const k=[...new Set(A)].map(R=>`"${R}"`);this.url.searchParams.set("columns",k.join(","))}}return new t.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(u,{count:d}={}){var p;const w="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}delete({count:u}={}){var d;const p="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Tu.default=n,Tu}var Ym;function mS(){if(Ym)return Iu;Ym=1,Object.defineProperty(Iu,"__esModule",{value:!0});const r=ol,t=r.__importDefault(Dw()),n=r.__importDefault(X0());class o{constructor(d,{headers:p={},schema:w,fetch:b}={}){this.url=d,this.headers=new Headers(p),this.schemaName=w,this.fetch=b}from(d){const p=new URL(`${this.url}/${d}`);return new t.default(p,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new o(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,p={},{head:w=!1,get:b=!1,count:y}={}){var _;let A;const k=new URL(`${this.url}/rpc/${d}`);let R;w||b?(A=w?"HEAD":"GET",Object.entries(p).filter(([j,M])=>M!==void 0).map(([j,M])=>[j,Array.isArray(M)?`{${M.join(",")}}`:`${M}`]).forEach(([j,M])=>{k.searchParams.append(j,M)})):(A="POST",R=p);const D=new Headers(this.headers);return y&&D.set("Prefer",`count=${y}`),new n.default({method:A,url:k,headers:D,schema:this.schemaName,body:R,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}}return Iu.default=o,Iu}var Zm;function pS(){if(Zm)return _r;Zm=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.PostgrestError=_r.PostgrestBuilder=_r.PostgrestTransformBuilder=_r.PostgrestFilterBuilder=_r.PostgrestQueryBuilder=_r.PostgrestClient=void 0;const r=ol,t=r.__importDefault(mS());_r.PostgrestClient=t.default;const n=r.__importDefault(Dw());_r.PostgrestQueryBuilder=n.default;const o=r.__importDefault(X0());_r.PostgrestFilterBuilder=o.default;const u=r.__importDefault(Pw());_r.PostgrestTransformBuilder=u.default;const d=r.__importDefault(Ow());_r.PostgrestBuilder=d.default;const p=r.__importDefault(jw());return _r.PostgrestError=p.default,_r.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:p.default},_r}var Mw=pS();const Lw=hc(Mw),xS=D0({__proto__:null,default:Lw},[Mw]),{PostgrestClient:wS,PostgrestQueryBuilder:bR,PostgrestFilterBuilder:CR,PostgrestTransformBuilder:ER,PostgrestBuilder:SR,PostgrestError:_R}=Lw||xS;class yS{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,u=parseInt(o.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const o=this.getWebSocketConstructor();return new o(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const vS="2.79.0",bS=`realtime-js/${vS}`,CS="1.0.0",c0=1e4,ES=1e3,SS=100;var tc;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(tc||(tc={}));var Zn;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Zn||(Zn={}));var Rs;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Rs||(Rs={}));var u0;(function(r){r.websocket="websocket"})(u0||(u0={}));var Ho;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ho||(Ho={}));class _S{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),o=new TextDecoder;return this._decodeBroadcast(t,n,o)}_decodeBroadcast(t,n,o){const u=n.getUint8(1),d=n.getUint8(2);let p=this.HEADER_LENGTH+2;const w=o.decode(t.slice(p,p+u));p=p+u;const b=o.decode(t.slice(p,p+d));p=p+d;const y=JSON.parse(o.decode(t.slice(p,t.byteLength)));return{ref:null,topic:w,event:b,payload:y}}}class Bw{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xn;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(xn||(xn={}));const Qm=(r,t,n={})=>{var o;const u=(o=n.skipTypes)!==null&&o!==void 0?o:[];return t?Object.keys(t).reduce((d,p)=>(d[p]=AS(p,r,t,u),d),{}):{}},AS=(r,t,n,o)=>{const u=t.find(w=>w.name===r),d=u?.type,p=n[r];return d&&!o.includes(d)?Fw(d,p):d0(p)},Fw=(r,t)=>{if(r.charAt(0)==="_"){const n=r.slice(1,r.length);return RS(t,n)}switch(r){case xn.bool:return NS(t);case xn.float4:case xn.float8:case xn.int2:case xn.int4:case xn.int8:case xn.numeric:case xn.oid:return IS(t);case xn.json:case xn.jsonb:return TS(t);case xn.timestamp:return kS(t);case xn.abstime:case xn.date:case xn.daterange:case xn.int4range:case xn.int8range:case xn.money:case xn.reltime:case xn.text:case xn.time:case xn.timestamptz:case xn.timetz:case xn.tsrange:case xn.tstzrange:return d0(t);default:return d0(t)}},d0=r=>r,NS=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},IS=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},TS=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return console.log(`JSON parse error: ${t}`),r}return r},RS=(r,t)=>{if(typeof r!="string")return r;const n=r.length-1,o=r[n];if(r[0]==="{"&&o==="}"){let d;const p=r.slice(1,n);try{d=JSON.parse("["+p+"]")}catch{d=p?p.split(","):[]}return d.map(w=>Fw(t,w))}return r},kS=r=>typeof r=="string"?r.replace(" ","T"):r,Uw=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class hf{constructor(t,n,o={},u=c0){this.channel=t,this.event=n,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var o;return this._hasReceived(t)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(o=>o.status===t).forEach(o=>o.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Jm;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Jm||(Jm={}));class nc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:d,onLeave:p,onSync:w}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nc.syncState(this.state,u,d,p),this.pendingDiffs.forEach(b=>{this.state=nc.syncDiff(this.state,b,d,p)}),this.pendingDiffs=[],w()}),this.channel._on(o.diff,{},u=>{const{onJoin:d,onLeave:p,onSync:w}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=nc.syncDiff(this.state,u,d,p),w())}),this.onJoin((u,d,p)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:p})}),this.onLeave((u,d,p)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:p})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,o,u){const d=this.cloneDeep(t),p=this.transformState(n),w={},b={};return this.map(d,(y,_)=>{p[y]||(b[y]=_)}),this.map(p,(y,_)=>{const A=d[y];if(A){const k=_.map(M=>M.presence_ref),R=A.map(M=>M.presence_ref),D=_.filter(M=>R.indexOf(M.presence_ref)<0),j=A.filter(M=>k.indexOf(M.presence_ref)<0);D.length>0&&(w[y]=D),j.length>0&&(b[y]=j)}else w[y]=_}),this.syncDiff(d,{joins:w,leaves:b},o,u)}static syncDiff(t,n,o,u){const{joins:d,leaves:p}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(d,(w,b)=>{var y;const _=(y=t[w])!==null&&y!==void 0?y:[];if(t[w]=this.cloneDeep(b),_.length>0){const A=t[w].map(R=>R.presence_ref),k=_.filter(R=>A.indexOf(R.presence_ref)<0);t[w].unshift(...k)}o(w,_,b)}),this.map(p,(w,b)=>{let y=t[w];if(!y)return;const _=b.map(A=>A.presence_ref);y=y.filter(A=>_.indexOf(A.presence_ref)<0),t[w]=y,u(w,y,b),y.length===0&&delete t[w]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(o=>n(o,t[o]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,o)=>{const u=t[o];return"metas"in u?n[o]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):n[o]=u,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ep;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(ep||(ep={}));var rc;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(rc||(rc={}));var pi;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(pi||(pi={}));class K0{constructor(t,n={config:{}},o){var u,d;if(this.topic=t,this.params=n,this.socket=o,this.bindings={},this.state=Zn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hf(this,Rs.join,this.params,this.timeout),this.rejoinTimer=new Bw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(p=>p.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zn.closed,this.socket._remove(this)}),this._onError(p=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,p),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",p=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,p),this.state=Zn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rs.reply,{},(p,w)=>{this._trigger(this._replyEventName(w),p)}),this.presence=new nc(this),this.broadcastEndpointURL=Uw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var o,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Zn.closed){const{config:{broadcast:p,presence:w,private:b}}=this.params,y=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(R=>R.filter))!==null&&u!==void 0?u:[],_=!!this.bindings[rc.PRESENCE]&&this.bindings[rc.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,A={},k={broadcast:p,presence:Object.assign(Object.assign({},w),{enabled:_}),postgres_changes:y,private:b};this.socket.accessTokenValue&&(A.access_token=this.socket.accessTokenValue),this._onError(R=>t?.(pi.CHANNEL_ERROR,R)),this._onClose(()=>t?.(pi.CLOSED)),this.updateJoinPayload(Object.assign({config:k},A)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:R})=>{var D;if(this.socket.setAuth(),R===void 0){t?.(pi.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,M=(D=j?.length)!==null&&D!==void 0?D:0,V=[];for(let z=0;z<M;z++){const B=j[z],{filter:{event:U,schema:H,table:Y,filter:W}}=B,X=R&&R[z];if(X&&X.event===U&&X.schema===H&&X.table===Y&&X.filter===W)V.push(Object.assign(Object.assign({},B),{id:X.id}));else{this.unsubscribe(),this.state=Zn.errored,t?.(pi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=V,t&&t(pi.SUBSCRIBED);return}}).receive("error",R=>{this.state=Zn.errored,t?.(pi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{t?.(pi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,o){return this.state===Zn.joined&&t===rc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,o)}async httpSend(t,n,o={}){var u;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const p={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},w=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(w.status===202)return{success:!0};let b=w.statusText;try{const y=await w.json();b=y.error||y.message||b}catch{}return Promise.reject(new Error(b))}async send(t,n={}){var o,u;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:p}=t,b={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:p,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var p,w,b;const y=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((b=(w=(p=this.params)===null||p===void 0?void 0:p.config)===null||w===void 0?void 0:w.broadcast)===null||b===void 0)&&b.ack)&&d("ok"),y.receive("ok",()=>d("ok")),y.receive("error",()=>d("error")),y.receive("timeout",()=>d("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rs.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new hf(this,Rs.leave,{},t),o.receive("ok",()=>{n(),u("ok")}).receive("timeout",()=>{n(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Zn.closed,this.bindings={}}async _fetchWithTimeout(t,n,o){const u=new AbortController,d=setTimeout(()=>u.abort(),o),p=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:u.signal}));return clearTimeout(d),p}_push(t,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new hf(this,t,n,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>SS){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,o){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,o){var u,d;const p=t.toLocaleLowerCase(),{close:w,error:b,leave:y,join:_}=Rs;if(o&&[w,b,y,_].indexOf(p)>=0&&o!==this._joinRef())return;let k=this._onMessage(p,n,o);if(n&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(p)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(R=>{var D,j,M;return((D=R.filter)===null||D===void 0?void 0:D.event)==="*"||((M=(j=R.filter)===null||j===void 0?void 0:j.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===p}).map(R=>R.callback(k,o)):(d=this.bindings[p])===null||d===void 0||d.filter(R=>{var D,j,M,V,z,B;if(["broadcast","presence","postgres_changes"].includes(p))if("id"in R){const U=R.id,H=(D=R.filter)===null||D===void 0?void 0:D.event;return U&&((j=n.ids)===null||j===void 0?void 0:j.includes(U))&&(H==="*"||H?.toLocaleLowerCase()===((M=n.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const U=(z=(V=R?.filter)===null||V===void 0?void 0:V.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return U==="*"||U===((B=n?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===p}).map(R=>{if(typeof k=="object"&&"ids"in k){const D=k.data,{schema:j,table:M,commit_timestamp:V,type:z,errors:B}=D;k=Object.assign(Object.assign({},{schema:j,table:M,commit_timestamp:V,eventType:z,new:{},old:{},errors:B}),this._getPayloadRecords(D))}R.callback(k,o)})}_isClosed(){return this.state===Zn.closed}_isJoined(){return this.state===Zn.joined}_isJoining(){return this.state===Zn.joining}_isLeaving(){return this.state===Zn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,o){const u=t.toLocaleLowerCase(),d={type:u,filter:n,callback:o};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(t,n){const o=t.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&K0.isEqual(u.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const o in t)if(t[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Rs.close,{},t)}_onError(t){this._on(Rs.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Qm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Qm(t.columns,t.old_record)),n}}const ff=()=>{},Pu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},jS=[1e3,2e3,5e3,1e4],OS=1e4,PS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class DS{constructor(t,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=c0,this.transport=null,this.heartbeatIntervalMs=Pu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ff,this.ref=0,this.reconnectTimer=null,this.logger=ff,this.conn=null,this.sendBuffer=[],this.serializer=new _S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>u?(...d)=>u(...d):(...d)=>fetch(...d),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${u0.websocket}`,this.httpEndpoint=Uw(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yS.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:CS}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,o){this.logger(t,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case tc.connecting:return Ho.Connecting;case tc.open:return Ho.Open;case tc.closing:return Ho.Closing;default:return Ho.Closed}}isConnected(){return this.connectionState()===Ho.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const o=`realtime:${t}`,u=this.getChannels().find(d=>d.topic===o);if(u)return u;{const d=new K0(`realtime:${t}`,n,this);return this.channels.push(d),d}}push(t){const{topic:n,event:o,payload:u,ref:d}=t,p=()=>{this.encode(t,w=>{var b;(b=this.conn)===null||b===void 0||b.send(w)})};this.log("push",`${n} ${o} (${d})`,u),this.isConnected()?p():this.sendBuffer.push(p)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(ES,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Pu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(o=>o.topic===t&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:u,payload:d,ref:p}=n,w=p?`(${p})`:"",b=d.status||"";this.log("receive",`${b} ${o} ${u} ${w}`.trim(),d),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(u,d,p)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Rs.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const o=t.match(/\?/)?"&":"?",u=new URLSearchParams(n);return`${t}${o}${u}`}_workerObjectUrl(t){let n;if(t)n=t;else{const o=new Blob([PS],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const u={access_token:n,version:bS};n&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(Rs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(o=>{try{o(n)}catch(u){this.log("error",`error in ${t} callback`,u)}})}catch(o){this.log("error",`error triggering ${t} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Bw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,o,u,d,p,w,b,y,_;if(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=t?.timeout)!==null&&o!==void 0?o:c0,this.heartbeatIntervalMs=(u=t?.heartbeatIntervalMs)!==null&&u!==void 0?u:Pu.HEARTBEAT_INTERVAL,this.worker=(d=t?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(p=t?.accessToken)!==null&&p!==void 0?p:null,this.heartbeatCallback=(w=t?.heartbeatCallback)!==null&&w!==void 0?w:ff,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=t?.reconnectAfterMs)!==null&&b!==void 0?b:(A=>jS[A-1]||OS),this.encode=(y=t?.encode)!==null&&y!==void 0?y:((A,k)=>k(JSON.stringify(A))),this.decode=(_=t?.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Y0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function In(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class MS extends Y0{constructor(t,n,o){super(t),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class h0 extends Y0{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Z0=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),LS=()=>Response,f0=r=>{if(Array.isArray(r))return r.map(n=>f0(n));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([n,o])=>{const u=n.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));t[u]=f0(o)}),t},BS=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},gf=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},FS=(r,t,n)=>ut(void 0,void 0,void 0,function*(){const o=yield LS();r instanceof o&&!n?.noResolveJson?r.json().then(u=>{const d=r.status||500,p=u?.statusCode||d+"";t(new MS(gf(u),d,p))}).catch(u=>{t(new h0(gf(u),u))}):t(new h0(gf(r),r))}),US=(r,t,n,o)=>{const u={method:r,headers:t?.headers||{}};return r==="GET"||!o?u:(BS(o)?(u.headers=Object.assign({"Content-Type":"application/json"},t?.headers),u.body=JSON.stringify(o)):u.body=o,t?.duplex&&(u.duplex=t.duplex),Object.assign(Object.assign({},u),n))};function fc(r,t,n,o,u,d){return ut(this,void 0,void 0,function*(){return new Promise((p,w)=>{r(n,US(t,o,u,d)).then(b=>{if(!b.ok)throw b;return o?.noResolveJson?b:b.json()}).then(b=>p(b)).catch(b=>FS(b,w,o))})})}function ac(r,t,n,o){return ut(this,void 0,void 0,function*(){return fc(r,"GET",t,n,o)})}function Ts(r,t,n,o,u){return ut(this,void 0,void 0,function*(){return fc(r,"POST",t,o,u,n)})}function g0(r,t,n,o,u){return ut(this,void 0,void 0,function*(){return fc(r,"PUT",t,o,u,n)})}function zS(r,t,n,o){return ut(this,void 0,void 0,function*(){return fc(r,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function Q0(r,t,n,o,u){return ut(this,void 0,void 0,function*(){return fc(r,"DELETE",t,o,u,n)})}class VS{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return ut(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}})}}var zw;class WS{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[zw]="BlobDownloadBuilder",this.promise=null}asStream(){return new VS(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ut(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(In(t))return{data:null,error:t};throw t}})}}zw=Symbol.toStringTag;const $S={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class HS{constructor(t,n={},o,u){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=o,this.fetch=Z0(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,o,u){return ut(this,void 0,void 0,function*(){try{let d;const p=Object.assign(Object.assign({},tp),u);let w=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(p.upsert)});const b=p.metadata;typeof Blob<"u"&&o instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),b&&d.append("metadata",this.encodeMetadata(b)),d.append("",o)):typeof FormData<"u"&&o instanceof FormData?(d=o,d.has("cacheControl")||d.append("cacheControl",p.cacheControl),b&&!d.has("metadata")&&d.append("metadata",this.encodeMetadata(b))):(d=o,w["cache-control"]=`max-age=${p.cacheControl}`,w["content-type"]=p.contentType,b&&(w["x-metadata"]=this.toBase64(this.encodeMetadata(b))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!p.duplex&&(p.duplex="half")),u?.headers&&(w=Object.assign(Object.assign({},w),u.headers));const y=this._removeEmptyFolders(n),_=this._getFinalPath(y),A=yield(t=="PUT"?g0:Ts)(this.fetch,`${this.url}/object/${_}`,d,Object.assign({headers:w},p?.duplex?{duplex:p.duplex}:{}));return{data:{path:y,id:A.Id,fullPath:A.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(In(d))return{data:null,error:d};throw d}})}upload(t,n,o){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,o)})}uploadToSignedUrl(t,n,o,u){return ut(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(t),p=this._getFinalPath(d),w=new URL(this.url+`/object/upload/sign/${p}`);w.searchParams.set("token",n);try{let b;const y=Object.assign({upsert:tp.upsert},u),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&o instanceof Blob?(b=new FormData,b.append("cacheControl",y.cacheControl),b.append("",o)):typeof FormData<"u"&&o instanceof FormData?(b=o,b.append("cacheControl",y.cacheControl)):(b=o,_["cache-control"]=`max-age=${y.cacheControl}`,_["content-type"]=y.contentType);const A=yield g0(this.fetch,w.toString(),b,{headers:_});return{data:{path:d,fullPath:A.Key},error:null}}catch(b){if(this.shouldThrowOnError)throw b;if(In(b))return{data:null,error:b};throw b}})}createSignedUploadUrl(t,n){return ut(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t);const u=Object.assign({},this.headers);n?.upsert&&(u["x-upsert"]="true");const d=yield Ts(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:u}),p=new URL(this.url+d.url),w=p.searchParams.get("token");if(!w)throw new Y0("No token returned by API");return{data:{signedUrl:p.toString(),path:t,token:w},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(In(o))return{data:null,error:o};throw o}})}update(t,n,o){return ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,o)})}move(t,n,o){return ut(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(In(u))return{data:null,error:u};throw u}})}copy(t,n,o){return ut(this,void 0,void 0,function*(){try{return{data:{path:(yield Ts(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(In(u))return{data:null,error:u};throw u}})}createSignedUrl(t,n,o){return ut(this,void 0,void 0,function*(){try{let u=this._getFinalPath(t),d=yield Ts(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:n},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const p=o?.download?`&download=${o.download===!0?"":o.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${p}`)},{data:d,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(In(u))return{data:null,error:u};throw u}})}createSignedUrls(t,n,o){return ut(this,void 0,void 0,function*(){try{const u=yield Ts(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),d=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:u.map(p=>Object.assign(Object.assign({},p),{signedUrl:p.signedURL?encodeURI(`${this.url}${p.signedURL}${d}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(In(u))return{data:null,error:u};throw u}})}download(t,n){const u=typeof n?.transform<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString(n?.transform||{}),p=d?`?${d}`:"",w=this._getFinalPath(t),b=()=>ac(this.fetch,`${this.url}/${u}/${w}${p}`,{headers:this.headers,noResolveJson:!0});return new WS(b,this.shouldThrowOnError)}info(t){return ut(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const o=yield ac(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:f0(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(In(o))return{data:null,error:o};throw o}})}exists(t){return ut(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield zS(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(In(o)&&o instanceof h0){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(t,n){const o=this._getFinalPath(t),u=[],d=n?.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&u.push(d);const w=typeof n?.transform<"u"?"render/image":"object",b=this.transformOptsToQueryString(n?.transform||{});b!==""&&u.push(b);let y=u.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${w}/public/${o}${y}`)}}}remove(t){return ut(this,void 0,void 0,function*(){try{return{data:yield Q0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}list(t,n,o){return ut(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},$S),n),{prefix:t||""});return{data:yield Ts(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},o),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(In(u))return{data:null,error:u};throw u}})}listV2(t,n){return ut(this,void 0,void 0,function*(){try{const o=Object.assign({},t);return{data:yield Ts(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(In(o))return{data:null,error:o};throw o}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Vw="2.79.0",Ww={"X-Client-Info":`storage-js/${Vw}`};class GS{constructor(t,n={},o,u){this.shouldThrowOnError=!1;const d=new URL(t);u?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ww),n),this.fetch=Z0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ut(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield ac(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}getBucket(t){return ut(this,void 0,void 0,function*(){try{return{data:yield ac(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}createBucket(t){return ut(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield Ts(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(In(u))return{data:null,error:u};throw u}})}updateBucket(t,n){return ut(this,void 0,void 0,function*(){try{return{data:yield g0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(In(o))return{data:null,error:o};throw o}})}emptyBucket(t){return ut(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ut(this,void 0,void 0,function*(){try{return{data:yield Q0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class qS{constructor(t,n={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ww),n),this.fetch=Z0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ut(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}listBuckets(t){return ut(this,void 0,void 0,function*(){try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const o=n.toString(),u=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield ac(this.fetch,u,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ut(this,void 0,void 0,function*(){try{return{data:yield Q0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(In(n))return{data:null,error:n};throw n}})}}const J0={"X-Client-Info":`storage-js/${Vw}`,"Content-Type":"application/json"};class $w extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Jr(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class mf extends $w{constructor(t,n,o){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class XS extends $w{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var np;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(np||(np={}));const e1=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),KS=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},rp=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),YS=(r,t,n)=>ut(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!n?.noResolveJson){const u=r.status||500,d=r;if(typeof d.json=="function")d.json().then(p=>{const w=p?.statusCode||p?.code||u+"";t(new mf(rp(p),u,w))}).catch(()=>{const p=u+"",w=d.statusText||`HTTP ${u} error`;t(new mf(w,u,p))});else{const p=u+"",w=d.statusText||`HTTP ${u} error`;t(new mf(w,u,p))}}else t(new XS(rp(r),r))}),ZS=(r,t,n,o)=>{const u={method:r,headers:t?.headers||{}};return o?(KS(o)?(u.headers=Object.assign({"Content-Type":"application/json"},t?.headers),u.body=JSON.stringify(o)):u.body=o,Object.assign(Object.assign({},u),n)):u};function QS(r,t,n,o,u,d){return ut(this,void 0,void 0,function*(){return new Promise((p,w)=>{r(n,ZS(t,o,u,d)).then(b=>{if(!b.ok)throw b;if(o?.noResolveJson)return b;const y=b.headers.get("content-type");return!y||!y.includes("application/json")?{}:b.json()}).then(b=>p(b)).catch(b=>YS(b,w,o))})})}function es(r,t,n,o,u){return ut(this,void 0,void 0,function*(){return QS(r,"POST",t,o,u,n)})}class JS{constructor(t,n={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J0),n),this.fetch=e1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ut(this,void 0,void 0,function*(){try{return{data:(yield es(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}getIndex(t,n){return ut(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Jr(o))return{data:null,error:o};throw o}})}listIndexes(t){return ut(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return ut(this,void 0,void 0,function*(){try{return{data:(yield es(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Jr(o))return{data:null,error:o};throw o}})}}class e_{constructor(t,n={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J0),n),this.fetch=e1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ut(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield es(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}getVectors(t){return ut(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}listVectors(t){return ut(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield es(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}queryVectors(t){return ut(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}deleteVectors(t){return ut(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield es(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}}class t_{constructor(t,n={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J0),n),this.fetch=e1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ut(this,void 0,void 0,function*(){try{return{data:(yield es(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}getBucket(t){return ut(this,void 0,void 0,function*(){try{return{data:yield es(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}listBuckets(){return ut(this,arguments,void 0,function*(t={}){try{return{data:yield es(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ut(this,void 0,void 0,function*(){try{return{data:(yield es(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Jr(n))return{data:null,error:n};throw n}})}}class n_ extends t_{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new r_(this.url,this.headers,t,this.fetch)}}class r_ extends JS{constructor(t,n,o,u){super(t,n,u),this.vectorBucketName=o}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ut(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ut(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ut(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ut(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new s_(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class s_ extends e_{constructor(t,n,o,u,d){super(t,n,d),this.vectorBucketName=o,this.indexName=u}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ut(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ut(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ut(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ut(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ut(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class i_ extends GS{constructor(t,n={},o,u){super(t,n,o,u)}from(t){return new HS(this.url,this.headers,t,this.fetch)}get vectors(){return new n_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qS(this.url+"/iceberg",this.headers,this.fetch)}}const o_="2.79.0";let Ql="";typeof Deno<"u"?Ql="deno":typeof document<"u"?Ql="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ql="react-native":Ql="node";const a_={"X-Client-Info":`supabase-js-${Ql}/${o_}`},l_={headers:a_},c_={schema:"public"},u_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},d_={},h_=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),f_=()=>Headers,g_=(r,t,n)=>{const o=h_(n),u=f_();return async(d,p)=>{var w;const b=(w=await t())!==null&&w!==void 0?w:r;let y=new u(p?.headers);return y.has("apikey")||y.set("apikey",r),y.has("Authorization")||y.set("Authorization",`Bearer ${b}`),o(d,Object.assign(Object.assign({},p),{headers:y}))}};function m_(r){return r.endsWith("/")?r:r+"/"}function p_(r,t){var n,o;const{db:u,auth:d,realtime:p,global:w}=r,{db:b,auth:y,realtime:_,global:A}=t,k={db:Object.assign(Object.assign({},b),u),auth:Object.assign(Object.assign({},y),d),realtime:Object.assign(Object.assign({},_),p),storage:{},global:Object.assign(Object.assign(Object.assign({},A),w),{headers:Object.assign(Object.assign({},(n=A?.headers)!==null&&n!==void 0?n:{}),(o=w?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return r.accessToken?k.accessToken=r.accessToken:delete k.accessToken,k}function x_(r){const t=r?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(m_(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Hw="2.79.0",za=30*1e3,m0=3,pf=m0*za,w_="http://localhost:9999",y_="supabase.auth.token",v_={"X-Client-Info":`gotrue-js/${Hw}`},p0="X-Supabase-Api-Version",Gw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},b_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C_=600*1e3;class lc extends Error{constructor(t,n,o){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function gt(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class E_ extends lc{constructor(t,n,o){super(t,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function S_(r){return gt(r)&&r.name==="AuthApiError"}class Go extends lc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class go extends lc{constructor(t,n,o,u){super(t,o,u),this.name=n,this.status=o}}class As extends go{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function __(r){return gt(r)&&r.name==="AuthSessionMissingError"}class ka extends go{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Du extends go{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mu extends go{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function A_(r){return gt(r)&&r.name==="AuthImplicitGrantRedirectError"}class sp extends go{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class x0 extends go{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function xf(r){return gt(r)&&r.name==="AuthRetryableFetchError"}class ip extends go{constructor(t,n,o){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class w0 extends go{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const td="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),op=` 	
\r=`.split(""),N_=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<op.length;t+=1)r[op[t].charCodeAt(0)]=-2;for(let t=0;t<td.length;t+=1)r[td[t].charCodeAt(0)]=t;return r})();function ap(r,t,n){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;n(td[o]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;n(td[o]),t.queuedBits-=6}}function qw(r,t,n){const o=N_[r];if(o>-1)for(t.queue=t.queue<<6|o,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function lp(r){const t=[],n=p=>{t.push(String.fromCodePoint(p))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=p=>{R_(p,o,n)};for(let p=0;p<r.length;p+=1)qw(r.charCodeAt(p),u,d);return t.join("")}function I_(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function T_(r,t){for(let n=0;n<r.length;n+=1){let o=r.charCodeAt(n);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(r.charCodeAt(n+1)-56320&65535|u)+65536,n+=1}I_(o,t)}}function R_(r,t,n){if(t.utf8seq===0){if(r<=127){n(r);return}for(let o=1;o<6;o+=1)if((r>>7-o&1)===0){t.utf8seq=o;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ha(r){const t=[],n={queue:0,queuedBits:0},o=u=>{t.push(u)};for(let u=0;u<r.length;u+=1)qw(r.charCodeAt(u),n,o);return new Uint8Array(t)}function k_(r){const t=[];return T_(r,n=>t.push(n)),new Uint8Array(t)}function qo(r){const t=[],n={queue:0,queuedBits:0},o=u=>{t.push(u)};return r.forEach(u=>ap(u,n,o)),ap(null,n,o),t.join("")}function j_(r){return Math.round(Date.now()/1e3)+r}function O_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const t=Math.random()*16|0;return(r=="x"?t:t&3|8).toString(16)})}const Ar=()=>typeof window<"u"&&typeof document<"u",Vo={tested:!1,writable:!1},Xw=()=>{if(!Ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vo.tested)return Vo.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Vo.tested=!0,Vo.writable=!0}catch{Vo.tested=!0,Vo.writable=!1}return Vo.writable};function P_(r){const t={},n=new URL(r);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((u,d)=>{t[d]=u})}catch{}return n.searchParams.forEach((o,u)=>{t[u]=o}),t}const Kw=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),D_=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Va=async(r,t,n)=>{await r.setItem(t,JSON.stringify(n))},Wo=async(r,t)=>{const n=await r.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ji=async(r,t)=>{await r.removeItem(t)};class pd{constructor(){this.promise=new pd.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}pd.promiseConstructor=Promise;function wf(r){const t=r.split(".");if(t.length!==3)throw new w0("Invalid JWT structure");for(let o=0;o<t.length;o++)if(!b_.test(t[o]))throw new w0("JWT not in base64url format");return{header:JSON.parse(lp(t[0])),payload:JSON.parse(lp(t[1])),signature:Ha(t[2]),raw:{header:t[0],payload:t[1]}}}async function M_(r){return await new Promise(t=>{setTimeout(()=>t(null),r)})}function L_(r,t){return new Promise((o,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const p=await r(d);if(!t(d,null,p)){o(p);return}}catch(p){if(!t(d,p)){u(p);return}}})()})}function B_(r){return("0"+r.toString(16)).substr(-2)}function F_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let u="";for(let d=0;d<56;d++)u+=n.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(t),Array.from(t,B_).join("")}async function U_(r){const n=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",n),u=new Uint8Array(o);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function z_(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const n=await U_(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ja(r,t,n=!1){const o=F_();let u=o;n&&(u+="/PASSWORD_RECOVERY"),await Va(r,`${t}-code-verifier`,u);const d=await z_(o);return[d,o===d?"plain":"s256"]}const V_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function W_(r){const t=r.headers.get(p0);if(!t||!t.match(V_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function $_(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function H_(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const G_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Oa(r){if(!G_.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yf(){const r={};return new Proxy(r,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function q_(r,t){return new Proxy(r,{get:(n,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,u)}return!t.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,o,u)}})}function cp(r){return JSON.parse(JSON.stringify(r))}const $o=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),X_=[502,503,504];async function up(r){var t;if(!D_(r))throw new x0($o(r),0);if(X_.includes(r.status))throw new x0($o(r),r.status);let n;try{n=await r.json()}catch(d){throw new Go($o(d),d)}let o;const u=W_(r);if(u&&u.getTime()>=Gw["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new ip($o(n),r.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(o==="session_not_found")throw new As}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((d,p)=>d&&typeof p=="string",!0))throw new ip($o(n),r.status,n.weak_password.reasons);throw new E_($o(n),r.status||500,o)}const K_=(r,t,n,o)=>{const u={method:r,headers:t?.headers||{}};return r==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),n))};async function St(r,t,n,o){var u;const d=Object.assign({},o?.headers);d[p0]||(d[p0]=Gw["2024-01-01"].name),o?.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const p=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(p.redirect_to=o.redirectTo);const w=Object.keys(p).length?"?"+new URLSearchParams(p).toString():"",b=await Y_(r,t,n+w,{headers:d,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(b):{data:Object.assign({},b),error:null}}async function Y_(r,t,n,o,u,d){const p=K_(t,o,u,d);let w;try{w=await r(n,Object.assign({},p))}catch(b){throw console.error(b),new x0($o(b),0)}if(w.ok||await up(w),o?.noResolveJson)return w;try{return await w.json()}catch(b){await up(b)}}function Ns(r){var t;let n=null;J_(r)&&(n=Object.assign({},r),r.expires_at||(n.expires_at=j_(r.expires_in)));const o=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:n,user:o},error:null}}function dp(r){const t=Ns(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(t.data.weak_password=r.weak_password),t}function no(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function Z_(r){return{data:r,error:null}}function Q_(r){const{action_link:t,email_otp:n,hashed_token:o,redirect_to:u,verification_type:d}=r,p=fo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),w={action_link:t,email_otp:n,hashed_token:o,redirect_to:u,verification_type:d},b=Object.assign({},p);return{data:{properties:w,user:b},error:null}}function hp(r){return r}function J_(r){return r.access_token&&r.refresh_token&&r.expires_in}const vf=["global","local","others"];class e3{constructor({url:t="",headers:n={},fetch:o}){this.url=t,this.headers=n,this.fetch=Kw(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=vf[0]){if(vf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vf.join(", ")}`);try{return await St(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(gt(o))return{data:null,error:o};throw o}}async inviteUserByEmail(t,n={}){try{return await St(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:no})}catch(o){if(gt(o))return{data:{user:null},error:o};throw o}}async generateLink(t){try{const{options:n}=t,o=fo(t,["options"]),u=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await St(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Q_,redirectTo:n?.redirectTo})}catch(n){if(gt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await St(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:no})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,o,u,d,p,w,b;try{const y={nextPage:null,lastPage:0,total:0},_=await St(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=t?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:hp});if(_.error)throw _.error;const A=await _.json(),k=(p=_.headers.get("x-total-count"))!==null&&p!==void 0?p:0,R=(b=(w=_.headers.get("link"))===null||w===void 0?void 0:w.split(","))!==null&&b!==void 0?b:[];return R.length>0&&(R.forEach(D=>{const j=parseInt(D.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(D.split(";")[1].split("=")[1]);y[`${M}Page`]=j}),y.total=parseInt(k)),{data:Object.assign(Object.assign({},A),y),error:null}}catch(y){if(gt(y))return{data:{users:[]},error:y};throw y}}async getUserById(t){Oa(t);try{return await St(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:no})}catch(n){if(gt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Oa(t);try{return await St(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:no})}catch(o){if(gt(o))return{data:{user:null},error:o};throw o}}async deleteUser(t,n=!1){Oa(t);try{return await St(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:no})}catch(o){if(gt(o))return{data:{user:null},error:o};throw o}}async _listFactors(t){Oa(t.userId);try{const{data:n,error:o}=await St(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:n,error:o}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Oa(t.userId),Oa(t.id);try{return{data:await St(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,o,u,d,p,w,b;try{const y={nextPage:null,lastPage:0,total:0},_=await St(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=t?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:hp});if(_.error)throw _.error;const A=await _.json(),k=(p=_.headers.get("x-total-count"))!==null&&p!==void 0?p:0,R=(b=(w=_.headers.get("link"))===null||w===void 0?void 0:w.split(","))!==null&&b!==void 0?b:[];return R.length>0&&(R.forEach(D=>{const j=parseInt(D.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(D.split(";")[1].split("=")[1]);y[`${M}Page`]=j}),y.total=parseInt(k)),{data:Object.assign(Object.assign({},A),y),error:null}}catch(y){if(gt(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(t){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await St(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await St(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(gt(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(t){try{return await St(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(gt(n))return{data:null,error:n};throw n}}}function fp(r={}){return{getItem:t=>r[t]||null,setItem:(t,n)=>{r[t]=n},removeItem:t=>{delete r[t]}}}const Pa={debug:!!(globalThis&&Xw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class t3 extends Yw{}async function n3(r,t,n){Pa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const o=new globalThis.AbortController;return t>0&&setTimeout(()=>{o.abort(),Pa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){Pa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,u.name);try{return await n()}finally{Pa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,u.name)}}else{if(t===0)throw Pa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new t3(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Pa.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function r3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Zw(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function s3(r){return parseInt(r,16)}function i3(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,o=>o.toString(16).padStart(2,"0")).join("")}function o3(r){var t;const{chainId:n,domain:o,expirationTime:u,issuedAt:d=new Date,nonce:p,notBefore:w,requestId:b,resources:y,scheme:_,uri:A,version:k}=r;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(p&&p.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${p}`);if(!A)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const R=Zw(r.address),D=_?`${_}://${o}`:o,j=r.statement?`${r.statement}
`:"",M=`${D} wants you to sign in with your Ethereum account:
${R}

${j}`;let V=`URI: ${A}
Version: ${k}
Chain ID: ${n}${p?`
Nonce: ${p}`:""}
Issued At: ${d.toISOString()}`;if(u&&(V+=`
Expiration Time: ${u.toISOString()}`),w&&(V+=`
Not Before: ${w.toISOString()}`),b&&(V+=`
Request ID: ${b}`),y){let z=`
Resources:`;for(const B of y){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);z+=`
- ${B}`}V+=z}return`${M}
${V}`}class zn extends Error{constructor({message:t,code:n,cause:o,name:u}){var d;super(t,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=u??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=n}}class nd extends zn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function a3({error:r,options:t}){var n,o,u;const{publicKey:d}=t;if(!d)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new zn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((n=d.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new zn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new zn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new zn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new zn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new zn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return d.pubKeyCredParams.filter(w=>w.type==="public-key").length===0?new zn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new zn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const p=window.location.hostname;if(Qw(p)){if(d.rp.id!==p)return new zn({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new zn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new zn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new zn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new zn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function l3({error:r,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new zn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new zn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(Qw(o)){if(n.rpId!==o)return new zn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new zn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new zn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new zn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class c3{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const u3=new c3;function d3(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:n,excludeCredentials:o}=r,u=fo(r,["challenge","user","excludeCredentials"]),d=Ha(t).buffer,p=Object.assign(Object.assign({},n),{id:Ha(n.id).buffer}),w=Object.assign(Object.assign({},u),{challenge:d,user:p});if(o&&o.length>0){w.excludeCredentials=new Array(o.length);for(let b=0;b<o.length;b++){const y=o[b];w.excludeCredentials[b]=Object.assign(Object.assign({},y),{id:Ha(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return w}function h3(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:n}=r,o=fo(r,["challenge","allowCredentials"]),u=Ha(t).buffer,d=Object.assign(Object.assign({},o),{challenge:u});if(n&&n.length>0){d.allowCredentials=new Array(n.length);for(let p=0;p<n.length;p++){const w=n[p];d.allowCredentials[p]=Object.assign(Object.assign({},w),{id:Ha(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return d}function f3(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r;return{id:r.id,rawId:r.id,response:{attestationObject:qo(new Uint8Array(r.response.attestationObject)),clientDataJSON:qo(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function g3(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r,o=r.getClientExtensionResults(),u=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:qo(new Uint8Array(u.authenticatorData)),clientDataJSON:qo(new Uint8Array(u.clientDataJSON)),signature:qo(new Uint8Array(u.signature)),userHandle:u.userHandle?qo(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Qw(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function gp(){var r,t;return!!(Ar()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function m3(r){try{const t=await navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new nd("Browser returned unexpected credential type",t)}:{data:null,error:new nd("Empty credential response",t)}}catch(t){return{data:null,error:a3({error:t,options:r})}}}async function p3(r){try{const t=await navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new nd("Browser returned unexpected credential type",t)}:{data:null,error:new nd("Empty credential response",t)}}catch(t){return{data:null,error:l3({error:t,options:r})}}}const x3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},w3={userVerification:"preferred",hints:["security-key"]};function rd(...r){const t=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),n=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of r)if(u)for(const d in u){const p=u[d];if(p!==void 0)if(Array.isArray(p))o[d]=p;else if(n(p))o[d]=p;else if(t(p)){const w=o[d];t(w)?o[d]=rd(w,p):o[d]=rd(p)}else o[d]=p}return o}function y3(r,t){return rd(x3,r,t||{})}function v3(r,t){return rd(w3,r,t||{})}class b3{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:o,signal:u},d){try{const{data:p,error:w}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!p)return{data:null,error:w};const b=u??u3.createNewAbortSignal();if(p.webauthn.type==="create"){const{user:y}=p.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(p.webauthn.type){case"create":{const y=y3(p.webauthn.credential_options.publicKey,d?.create),{data:_,error:A}=await m3({publicKey:y,signal:b});return _?{data:{factorId:t,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:_}},error:null}:{data:null,error:A}}case"request":{const y=v3(p.webauthn.credential_options.publicKey,d?.request),{data:_,error:A}=await p3(Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:y,signal:b}));return _?{data:{factorId:t,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:_}},error:null}:{data:null,error:A}}}}catch(p){return gt(p)?{data:null,error:p}:{data:null,error:new Go("Unexpected error in challenge",p)}}}async _verify({challengeId:t,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:o})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}},d){if(!n)return{data:null,error:new lc("rpId is required for WebAuthn authentication")};try{if(!gp())return{data:null,error:new Go("Browser does not support WebAuthn",null)};const{data:p,error:w}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:o},signal:u},{request:d});if(!p)return{data:null,error:w};const{webauthn:b}=p;return this._verify({factorId:t,challengeId:p.challengeId,webauthn:{type:b.type,rpId:n,rpOrigins:o,credential_response:b.credential_response}})}catch(p){return gt(p)?{data:null,error:p}:{data:null,error:new Go("Unexpected error in authenticate",p)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u},d){if(!n)return{data:null,error:new lc("rpId is required for WebAuthn registration")};try{if(!gp())return{data:null,error:new Go("Browser does not support WebAuthn",null)};const{data:p,error:w}=await this._enroll({friendlyName:t});if(!p)return await this.client.mfa.listFactors().then(_=>{var A;return(A=_.data)===null||A===void 0?void 0:A.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===t&&k.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:w};const{data:b,error:y}=await this._challenge({factorId:p.id,friendlyName:p.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:u},{create:d});return b?this._verify({factorId:p.id,challengeId:b.challengeId,webauthn:{rpId:n,rpOrigins:o,type:b.webauthn.type,credential_response:b.webauthn.credential_response}}):{data:null,error:y}}catch(p){return gt(p)?{data:null,error:p}:{data:null,error:new Go("Unexpected error in register",p)}}}}r3();const C3={url:w_,storageKey:y_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:v_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function mp(r,t,n){return await n()}const Da={};class cc{get jwks(){var t,n;return(n=(t=Da[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Da[this.storageKey]=Object.assign(Object.assign({},Da[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Da[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Da[this.storageKey]=Object.assign(Object.assign({},Da[this.storageKey]),{cachedAt:t})}constructor(t){var n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=cc.nextInstanceID,cc.nextInstanceID+=1,this.instanceID>0&&Ar()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},C3),t);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new e3({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Kw(u.fetch),this.lock=u.lock||mp,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:Ar()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=n3:this.lock=mp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new b3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Xw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fp(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=fp(this.memoryStorage)),Ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Hw}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},o="none";if(Ar()&&(n=P_(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),Ar()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:d}=await this._getSessionFromURL(n,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),A_(d)){const b=(t=d.details)===null||t===void 0?void 0:t.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:p,redirectType:w}=u;return this._debug("#_initialize()","detected session in URL",p,"redirect type",w),await this._saveSession(p),setTimeout(async()=>{w==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",p):await this._notifyAllSubscribers("SIGNED_IN",p)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return gt(n)?this._returnResult({error:n}):this._returnResult({error:new Go("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,o,u;try{const d=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=t?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=t?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Ns}),{data:p,error:w}=d;if(w||!p)return this._returnResult({data:{user:null,session:null},error:w});const b=p.session,y=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",b)),this._returnResult({data:{user:y,session:b},error:null})}catch(d){if(gt(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(t){var n,o,u;try{let d;if("email"in t){const{email:_,password:A,options:k}=t;let R=null,D=null;this.flowType==="pkce"&&([R,D]=await ja(this.storage,this.storageKey)),d=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:_,password:A,data:(n=k?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:R,code_challenge_method:D},xform:Ns})}else if("phone"in t){const{phone:_,password:A,options:k}=t;d=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:A,data:(o=k?.data)!==null&&o!==void 0?o:{},channel:(u=k?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:Ns})}else throw new Du("You must provide either an email or phone number and a password");const{data:p,error:w}=d;if(w||!p)return this._returnResult({data:{user:null,session:null},error:w});const b=p.session,y=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",b)),this._returnResult({data:{user:y,session:b},error:null})}catch(d){if(gt(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(t){try{let n;if("email"in t){const{email:d,password:p,options:w}=t;n=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:p,gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:dp})}else if("phone"in t){const{phone:d,password:p,options:w}=t;n=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:p,gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:dp})}else throw new Du("You must provide either an email or phone number and a password");const{data:o,error:u}=n;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const d=new ka;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,o,u,d;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=t.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,o,u,d,p,w,b,y,_,A,k;let R,D;if("message"in t)R=t.message,D=t.signature;else{const{chain:j,wallet:M,statement:V,options:z}=t;let B;if(Ar())if(typeof M=="object")B=M;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")B=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=M}const U=new URL((n=z?.url)!==null&&n!==void 0?n:window.location.href),H=await B.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=Zw(H[0]);let W=(o=z?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!W){const $=await B.request({method:"eth_chainId"});W=s3($)}const X={domain:U.host,address:Y,statement:V,uri:U.href,version:"1",chainId:W,nonce:(u=z?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(p=(d=z?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&p!==void 0?p:new Date,expirationTime:(w=z?.signInWithEthereum)===null||w===void 0?void 0:w.expirationTime,notBefore:(b=z?.signInWithEthereum)===null||b===void 0?void 0:b.notBefore,requestId:(y=z?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(_=z?.signInWithEthereum)===null||_===void 0?void 0:_.resources};R=o3(X),D=await B.request({method:"personal_sign",params:[i3(R),Y]})}try{const{data:j,error:M}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:R,signature:D},!((A=t.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(k=t.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Ns});if(M)throw M;if(!j||!j.session||!j.user){const V=new ka;return this._returnResult({data:{user:null,session:null},error:V})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:M})}catch(j){if(gt(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async signInWithSolana(t){var n,o,u,d,p,w,b,y,_,A,k,R;let D,j;if("message"in t)D=t.message,j=t.signature;else{const{chain:M,wallet:V,statement:z,options:B}=t;let U;if(Ar())if(typeof V=="object")U=V;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))U=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof V!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=V}const H=new URL((n=B?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in U&&U.signIn){const Y=await U.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),z?{statement:z}:null));let W;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")W=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)W=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)D=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),j=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in U)||typeof U.signMessage!="function"||!("publicKey"in U)||typeof U!="object"||!U.publicKey||!("toBase58"in U.publicKey)||typeof U.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");D=[`${H.host} wants you to sign in with your Solana account:`,U.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(u=(o=B?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=B?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((p=B?.signInWithSolana)===null||p===void 0)&&p.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((w=B?.signInWithSolana)===null||w===void 0)&&w.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((b=B?.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((y=B?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((A=(_=B?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||A===void 0)&&A.length?["Resources",...B.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const Y=await U.signMessage(new TextEncoder().encode(D),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=Y}}try{const{data:M,error:V}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:D,signature:qo(j)},!((k=t.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(R=t.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:Ns});if(V)throw V;if(!M||!M.session||!M.user){const z=new ka;return this._returnResult({data:{user:null,session:null},error:z})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:V})}catch(M){if(gt(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async _exchangeCodeForSession(t){const n=await Wo(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(n??"").split("/");try{const{data:d,error:p}=await St(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:o},xform:Ns});if(await Ji(this.storage,`${this.storageKey}-code-verifier`),p)throw p;if(!d||!d.session||!d.user){const w=new ka;return this._returnResult({data:{user:null,session:null,redirectType:null},error:w})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:p})}catch(d){if(gt(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(t){try{const{options:n,provider:o,token:u,access_token:d,nonce:p}=t,w=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:d,nonce:p,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Ns}),{data:b,error:y}=w;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!b||!b.session||!b.user){const _=new ka;return this._returnResult({data:{user:null,session:null},error:_})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:b,error:y})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,o,u,d,p;try{if("email"in t){const{email:w,options:b}=t;let y=null,_=null;this.flowType==="pkce"&&([y,_]=await ja(this.storage,this.storageKey));const{error:A}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:w,data:(n=b?.data)!==null&&n!==void 0?n:{},create_user:(o=b?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:y,code_challenge_method:_},redirectTo:b?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:A})}if("phone"in t){const{phone:w,options:b}=t,{data:y,error:_}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:w,data:(u=b?.data)!==null&&u!==void 0?u:{},create_user:(d=b?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:b?.captchaToken},channel:(p=b?.channel)!==null&&p!==void 0?p:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:_})}throw new Du("You must provide either an email or phone number.")}catch(w){if(gt(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async verifyOtp(t){var n,o;try{let u,d;"options"in t&&(u=(n=t.options)===null||n===void 0?void 0:n.redirectTo,d=(o=t.options)===null||o===void 0?void 0:o.captchaToken);const{data:p,error:w}=await St(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:Ns});if(w)throw w;if(!p)throw new Error("An error occurred on token verification.");const b=p.session,y=p.user;return b?.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),this._returnResult({data:{user:y,session:b},error:null})}catch(u){if(gt(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(t){var n,o,u;try{let d=null,p=null;this.flowType==="pkce"&&([d,p]=await ja(this.storage,this.storageKey));const w=await St(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=t?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:p}),headers:this.headers,xform:Z_});return this._returnResult(w)}catch(d){if(gt(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:o}=t;if(o)throw o;if(!n)throw new As;const{error:u}=await St(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(t){if(gt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:o,type:u,options:d}=t,{error:p}=await St(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}else if("phone"in t){const{phone:o,type:u,options:d}=t,{data:p,error:w}=await St(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:w})}throw new Du("You must provide either an email or phone number and a type")}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Wo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const o=t.expires_at?t.expires_at*1e3-Date.now()<pf:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",t.expires_at),!o){if(this.userStorage){const p=await Wo(this.userStorage,this.storageKey+"-user");p?.user?t.user=p.user:t.user=yf()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const p={value:this.suppressGetSessionWarning};t.user=q_(t.user,p),p.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:no}):await this._useSession(async n=>{var o,u,d;const{data:p,error:w}=n;if(w)throw w;return!(!((o=p.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new As}:await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:no})})}catch(n){if(gt(n))return __(n)&&(await this._removeSession(),await Ji(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async o=>{const{data:u,error:d}=o;if(d)throw d;if(!u.session)throw new As;const p=u.session;let w=null,b=null;this.flowType==="pkce"&&t.email!=null&&([w,b]=await ja(this.storage,this.storageKey));const{data:y,error:_}=await St(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:w,code_challenge_method:b}),jwt:p.access_token,xform:no});if(_)throw _;return p.user=y.user,await this._saveSession(p),await this._notifyAllSubscribers("USER_UPDATED",p),this._returnResult({data:{user:p.user},error:null})})}catch(o){if(gt(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new As;const n=Date.now()/1e3;let o=n,u=!0,d=null;const{payload:p}=wf(t.access_token);if(p.exp&&(o=p.exp,u=o<=n),u){const{data:w,error:b}=await this._callRefreshToken(t.refresh_token);if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!w)return{data:{user:null,session:null},error:null};d=w}else{const{data:w,error:b}=await this._getUser(t.access_token);if(b)throw b;d={access_token:t.access_token,refresh_token:t.refresh_token,user:w.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(n){if(gt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var o;if(!t){const{data:p,error:w}=n;if(w)throw w;t=(o=p.session)!==null&&o!==void 0?o:void 0}if(!t?.refresh_token)throw new As;const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(gt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Ar())throw new Mu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sp("No code detected.");const{data:z,error:B}=await this._exchangeCodeForSession(t.code);if(B)throw B;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:d,refresh_token:p,expires_in:w,expires_at:b,token_type:y}=t;if(!d||!w||!p||!y)throw new Mu("No session defined in URL");const _=Math.round(Date.now()/1e3),A=parseInt(w);let k=_+A;b&&(k=parseInt(b));const R=k-_;R*1e3<=za&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${R}s, should have been closer to ${A}s`);const D=k-A;_-D>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",D,k,_):_-D<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",D,k,_);const{data:j,error:M}=await this._getUser(d);if(M)throw M;const V={provider_token:o,provider_refresh_token:u,access_token:d,expires_in:A,expires_at:k,refresh_token:p,token_type:y,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:V,redirectType:t.type},error:null})}catch(o){if(gt(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Wo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:u,error:d}=n;if(d)return this._returnResult({error:d});const p=(o=u.session)===null||o===void 0?void 0:o.access_token;if(p){const{error:w}=await this.admin.signOut(p,t);if(w&&!(S_(w)&&(w.status===404||w.status===401||w.status===403)))return this._returnResult({error:w})}return t!=="others"&&(await this._removeSession(),await Ji(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=O_(),o={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(t){return await this._useSession(async n=>{var o,u;try{const{data:{session:d},error:p}=n;if(p)throw p;await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",t,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(t))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",d),console.error(d)}})}async resetPasswordForEmail(t,n={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await ja(this.storage,this.storageKey,!0));try{return await St(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(d){if(gt(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var t;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:o,error:u}=await this._useSession(async d=>{var p,w,b,y,_;const{data:A,error:k}=d;if(k)throw k;const R=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(p=t.options)===null||p===void 0?void 0:p.redirectTo,scopes:(w=t.options)===null||w===void 0?void 0:w.scopes,queryParams:(b=t.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await St(this.fetch,"GET",R,{headers:this.headers,jwt:(_=(y=A.session)===null||y===void 0?void 0:y.access_token)!==null&&_!==void 0?_:void 0})});if(u)throw u;return Ar()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:t.provider,url:o?.url},error:null})}catch(o){if(gt(o))return this._returnResult({data:{provider:t.provider,url:null},error:o});throw o}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var o;try{const{error:u,data:{session:d}}=n;if(u)throw u;const{options:p,provider:w,token:b,access_token:y,nonce:_}=t,A=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:w,id_token:b,access_token:y,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Ns}),{data:k,error:R}=A;return R?this._returnResult({data:{user:null,session:null},error:R}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new ka}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:R}))}catch(u){if(gt(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var o,u;const{data:d,error:p}=n;if(p)throw p;return await St(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await L_(async u=>(u>0&&await M_(200*Math.pow(2,u-1)),this._debug(n,"refreshing attempt",u),await St(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ns})),(u,d)=>{const p=200*Math.pow(2,u);return d&&xf(d)&&Date.now()+p-o<za})}catch(o){if(this._debug(n,"error",o),gt(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",o),Ar()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:t,url:o},error:null}}async _recoverAndRefresh(){var t,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await Wo(this.storage,this.storageKey);if(u&&this.userStorage){let p=await Wo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!p&&(p={user:u.user},await Va(this.userStorage,this.storageKey+"-user",p)),u.user=(t=p?.user)!==null&&t!==void 0?t:yf()}else if(u&&!u.user&&!u.user){const p=await Wo(this.storage,this.storageKey+"-user");p&&p?.user?(u.user=p.user,await Ji(this.storage,this.storageKey+"-user"),await Va(this.storage,this.storageKey,u)):u.user=yf()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const d=((n=u.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<pf;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${pf}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:p}=await this._callRefreshToken(u.refresh_token);p&&(console.error(p),xf(p)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",p),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:p,error:w}=await this._getUser(u.access_token);!w&&p?.user?(u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(p){console.error("Error getting user data:",p),this._debug(o,"error getting user data, skipping SIGNED_IN notification",p)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(t){var n,o;if(!t)throw new As;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new pd;const{data:d,error:p}=await this._refreshAccessToken(t);if(p)throw p;if(!d.session)throw new As;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const w={data:d.session,error:null};return this.refreshingDeferred.resolve(w),w}catch(d){if(this._debug(u,"error",d),gt(d)){const p={data:null,error:d};return xf(d)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(p),p}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(t,n,o=!0){const u=`#_notifyAllSubscribers(${t})`;this._debug(u,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:t,session:n});const d=[],p=Array.from(this.stateChangeEmitters.values()).map(async w=>{try{await w.callback(t,n)}catch(b){d.push(b)}});if(await Promise.all(p),d.length>0){for(let w=0;w<d.length;w+=1)console.error(d[w]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await Va(this.userStorage,this.storageKey+"-user",{user:n.user});const u=Object.assign({},n);delete u.user;const d=cp(u);await Va(this.storage,this.storageKey,d)}else{const u=cp(n);await Va(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await Ji(this.storage,this.storageKey),await Ji(this.storage,this.storageKey+"-code-verifier"),await Ji(this.storage,this.storageKey+"-user"),this.userStorage&&await Ji(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ar()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),za);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-t)/za);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${za}ms, refresh threshold is ${m0} ticks`),u<=m0&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Yw)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ar()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,o){const u=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,p]=await ja(this.storage,this.storageKey),w=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(p)}`});u.push(w.toString())}if(o?.queryParams){const d=new URLSearchParams(o.queryParams);u.push(d.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${t}?${u.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var o;const{data:u,error:d}=n;return d?this._returnResult({data:null,error:d}):await St(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var o,u;const{data:d,error:p}=n;if(p)return this._returnResult({data:null,error:p});const w=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:b,error:y}=await St(this.fetch,"POST",`${this.url}/factors`,{body:w,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(t.factorType==="totp"&&b.type==="totp"&&(!((u=b?.totp)===null||u===void 0)&&u.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),this._returnResult({data:b,error:null}))})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:u,error:d}=n;if(d)return this._returnResult({data:null,error:d});const p=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?f3(t.webauthn.credential_response):g3(t.webauthn.credential_response)})}:{code:t.code}),{data:w,error:b}=await St(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:p,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return b?this._returnResult({data:null,error:b}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+w.expires_in},w)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",w),this._returnResult({data:w,error:b}))})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:u,error:d}=n;if(d)return this._returnResult({data:null,error:d});const p=await St(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});if(p.error)return p;const{data:w}=p;if(w.type!=="webauthn")return{data:w,error:null};switch(w.webauthn.type){case"create":return{data:Object.assign(Object.assign({},w),{webauthn:Object.assign(Object.assign({},w.webauthn),{credential_options:Object.assign(Object.assign({},w.webauthn.credential_options),{publicKey:d3(w.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},w),{webauthn:Object.assign(Object.assign({},w.webauthn),{credential_options:Object.assign(Object.assign({},w.webauthn.credential_options),{publicKey:h3(w.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:o}=await this._challenge({factorId:t.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(t=n?.factors)!==null&&t!==void 0?t:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:o},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=wf(o.access_token);let p=null;d.aal&&(p=d.aal);let w=p;((n=(t=o.user.factors)===null||t===void 0?void 0:t.filter(_=>_.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(w="aal2");const y=d.amr||[];return{data:{currentLevel:p,nextLevel:w,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:o},error:u}=n;return u?this._returnResult({data:null,error:u}):o?await St(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new As})})}catch(n){if(gt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new As});const p=await St(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:w=>({data:w,error:null})});return p.data&&p.data.redirect_url&&Ar()&&!n?.skipBrowserRedirect&&window.location.assign(p.data.redirect_url),p})}catch(o){if(gt(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(t,n){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new As});const p=await St(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:w=>({data:w,error:null})});return p.data&&p.data.redirect_url&&Ar()&&!n?.skipBrowserRedirect&&window.location.assign(p.data.redirect_url),p})}catch(o){if(gt(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(t,n={keys:[]}){let o=n.keys.find(w=>w.kid===t);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(w=>w.kid===t),o&&this.jwks_cached_at+C_>u)return o;const{data:d,error:p}=await St(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(p)throw p;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,o=d.keys.find(w=>w.kid===t),!o)?null:o}async getClaims(t,n={}){try{let o=t;if(!o){const{data:R,error:D}=await this.getSession();if(D||!R.session)return this._returnResult({data:null,error:D});o=R.session.access_token}const{header:u,payload:d,signature:p,raw:{header:w,payload:b}}=wf(o);n?.allowExpired||$_(d.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!y){const{error:R}=await this.getUser(o);if(R)throw R;return{data:{claims:d,header:u,signature:p},error:null}}const _=H_(u.alg),A=await crypto.subtle.importKey("jwk",y,_,!0,["verify"]);if(!await crypto.subtle.verify(_,A,p,k_(`${w}.${b}`)))throw new w0("Invalid JWT signature");return{data:{claims:d,header:u,signature:p},error:null}}catch(o){if(gt(o))return this._returnResult({data:null,error:o});throw o}}}cc.nextInstanceID=0;const E3=cc;class S3 extends E3{constructor(t){super(t)}}class _3{constructor(t,n,o){var u,d,p;this.supabaseUrl=t,this.supabaseKey=n;const w=x_(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",w),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",w),this.storageUrl=new URL("storage/v1",w),this.functionsUrl=new URL("functions/v1",w);const b=`sb-${w.hostname.split(".")[0]}-auth-token`,y={db:c_,realtime:d_,auth:Object.assign(Object.assign({},u_),{storageKey:b}),global:l_},_=p_(o??{},y);this.storageKey=(u=_.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(d=_.global.headers)!==null&&d!==void 0?d:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(A,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((p=_.auth)!==null&&p!==void 0?p:{},this.headers,_.global.fetch),this.fetch=g_(n,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new wS(new URL("rest/v1",w).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new i_(this.storageUrl.href,this.headers,this.fetch,o?.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new gS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,o)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(n=(t=o.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:o,storage:u,userStorage:d,storageKey:p,flowType:w,lock:b,debug:y,throwOnError:_},A,k){const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new S3({url:this.authUrl.href,headers:Object.assign(Object.assign({},R),A),storageKey:p,autoRefreshToken:t,persistSession:n,detectSessionInUrl:o,storage:u,userStorage:d,flowType:w,lock:b,debug:y,throwOnError:_,fetch:k,hasCustomAuthorizationHeader:Object.keys(this.headers).some(D=>D.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new DS(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,o)=>{this._handleTokenChanged(n,"CLIENT",o?.access_token)})}_handleTokenChanged(t,n,o){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const A3=(r,t,n)=>new _3(r,t,n);function N3(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}N3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const I3="https://xtrognfmzyzqhsfvtgne.supabase.co",T3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0cm9nbmZtenl6cWhzZnZ0Z25lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExMjE1NDcsImV4cCI6MjA3NjY5NzU0N30.eHPZYU7pHDzseAF4UDtjHCqJO6_MYMZy8UpqL-YViCU",Je=A3(I3,T3);function R3({onAuthenticated:r,onBackToHome:t}){const[n,o]=I.useState(!1),[u,d]=I.useState(""),[p,w]=I.useState({email:"",password:""}),b=async y=>{y.preventDefault(),o(!0),d("");try{const{data:_,error:A}=await Je.auth.signInWithPassword({email:p.email,password:p.password});if(A||!_.session)throw new Error(A?.message||"Login failed");r(_.session.access_token)}catch(_){console.error("Login error:",_),d(_.message||"Invalid email or password. Please try again.")}finally{o(!1)}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50"}),c.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-violet-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-pink-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),c.jsxs("div",{className:"w-full max-w-md relative z-10 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[t&&c.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50 rounded-lg px-3 py-2 bg-white/60 backdrop-blur-sm","aria-label":"Go back to home page",children:[c.jsx(U0,{className:"h-4 w-4"}),"Back to Home"]}),c.jsxs(ir,{className:"shadow-xl border-0 glass-effect",children:[c.jsxs(Br,{className:"space-y-6 pb-6",children:[c.jsx("div",{className:"flex justify-center",children:c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 gradient-primary rounded-3xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:c.jsx(zm,{className:"h-10 w-10 text-white"})}),c.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-gradient-to-br from-emerald-400 to-emerald-500 rounded-full border-4 border-white flex items-center justify-center shadow-md",children:c.jsx(Um,{className:"h-4 w-4 text-white"})})]})}),c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(Fr,{className:"text-3xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Admin Portal"}),c.jsx(Yo,{className:"text-base text-gray-600",children:"Sign in to manage events and registrations"})]})]}),c.jsx(gr,{children:c.jsxs("form",{onSubmit:b,className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs($e,{htmlFor:"email",className:"flex items-center gap-2",children:[c.jsx(ks,{className:"h-4 w-4 text-muted-foreground"}),"Email Address"]}),c.jsx(tt,{id:"email",type:"email",placeholder:"admin@example.com",value:p.email,onChange:y=>w(_=>({..._,email:y.target.value})),required:!0,className:"h-11",autoComplete:"email",autoFocus:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs($e,{htmlFor:"password",className:"flex items-center gap-2",children:[c.jsx(Um,{className:"h-4 w-4 text-muted-foreground"}),"Password"]}),c.jsx(tt,{id:"password",type:"password",placeholder:"Enter your password",value:p.password,onChange:y=>w(_=>({..._,password:y.target.value})),required:!0,className:"h-11",autoComplete:"current-password"})]}),u&&c.jsx(qs,{variant:"destructive",children:c.jsx(Xs,{children:u})}),c.jsx(Ne,{type:"submit",className:"w-full h-12 text-base gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/40",disabled:n,children:n?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing in..."]}):c.jsxs(c.Fragment,{children:[c.jsx(zm,{className:"mr-2 h-5 w-5"}),"Sign In"]})})]})}),c.jsxs(kC,{className:"flex flex-col space-y-4 border-t pt-6",children:[c.jsx("div",{className:"w-full p-4 gradient-primary-soft border border-purple-200 rounded-xl",children:c.jsxs("p",{className:"text-sm text-purple-900 text-center",children:[c.jsx("span",{className:"font-semibold",children:"First time?"})," Contact your system administrator to set up your account."]})}),c.jsx("p",{className:"text-xs text-center text-gray-500",children:" This is a secure admin-only area. Unauthorized access is prohibited."})]})]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsx("p",{className:"text-sm text-gray-600 bg-white/60 backdrop-blur-sm px-4 py-2 rounded-full inline-block",children:"Event Registration Management System"})})]})]})}function Mt(r,t,{checkForDefaultPrevented:n=!0}={}){return function(u){if(r?.(u),n===!1||!u.defaultPrevented)return t?.(u)}}function k3(r,t){const n=I.createContext(t),o=d=>{const{children:p,...w}=d,b=I.useMemo(()=>w,Object.values(w));return c.jsx(n.Provider,{value:b,children:p})};o.displayName=r+"Provider";function u(d){const p=I.useContext(n);if(p)return p;if(t!==void 0)return t;throw new Error(`\`${d}\` must be used within \`${r}\``)}return[o,u]}function ms(r,t=[]){let n=[];function o(d,p){const w=I.createContext(p),b=n.length;n=[...n,p];const y=A=>{const{scope:k,children:R,...D}=A,j=k?.[r]?.[b]||w,M=I.useMemo(()=>D,Object.values(D));return c.jsx(j.Provider,{value:M,children:R})};y.displayName=d+"Provider";function _(A,k){const R=k?.[r]?.[b]||w,D=I.useContext(R);if(D)return D;if(p!==void 0)return p;throw new Error(`\`${A}\` must be used within \`${d}\``)}return[y,_]}const u=()=>{const d=n.map(p=>I.createContext(p));return function(w){const b=w?.[r]||d;return I.useMemo(()=>({[`__scope${r}`]:{...w,[r]:b}}),[w,b])}};return u.scopeName=r,[o,j3(u,...t)]}function j3(...r){const t=r[0];if(r.length===1)return t;const n=()=>{const o=r.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(d){const p=o.reduce((w,{useScope:b,scopeName:y})=>{const A=b(d)[`__scope${y}`];return{...w,...A}},{});return I.useMemo(()=>({[`__scope${t.scopeName}`]:p}),[p])}};return n.scopeName=t.scopeName,n}function pp(r){const t=O3(r),n=I.forwardRef((o,u)=>{const{children:d,...p}=o,w=I.Children.toArray(d),b=w.find(D3);if(b){const y=b.props.children,_=w.map(A=>A===b?I.Children.count(y)>1?I.Children.only(null):I.isValidElement(y)?y.props.children:null:A);return c.jsx(t,{...p,ref:u,children:I.isValidElement(y)?I.cloneElement(y,void 0,_):null})}return c.jsx(t,{...p,ref:u,children:d})});return n.displayName=`${r}.Slot`,n}function O3(r){const t=I.forwardRef((n,o)=>{const{children:u,...d}=n;if(I.isValidElement(u)){const p=L3(u),w=M3(d,u.props);return u.type!==I.Fragment&&(w.ref=o?nl(o,p):p),I.cloneElement(u,w)}return I.Children.count(u)>1?I.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var P3=Symbol("radix.slottable");function D3(r){return I.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===P3}function M3(r,t){const n={...t};for(const o in t){const u=r[o],d=t[o];/^on[A-Z]/.test(o)?u&&d?n[o]=(...w)=>{const b=d(...w);return u(...w),b}:u&&(n[o]=u):o==="style"?n[o]={...u,...d}:o==="className"&&(n[o]=[u,d].filter(Boolean).join(" "))}return{...r,...n}}function L3(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function t1(r){const t=r+"CollectionProvider",[n,o]=ms(t),[u,d]=n(t,{collectionRef:{current:null},itemMap:new Map}),p=j=>{const{scope:M,children:V}=j,z=Bn.useRef(null),B=Bn.useRef(new Map).current;return c.jsx(u,{scope:M,itemMap:B,collectionRef:z,children:V})};p.displayName=t;const w=r+"CollectionSlot",b=pp(w),y=Bn.forwardRef((j,M)=>{const{scope:V,children:z}=j,B=d(w,V),U=tn(M,B.collectionRef);return c.jsx(b,{ref:U,children:z})});y.displayName=w;const _=r+"CollectionItemSlot",A="data-radix-collection-item",k=pp(_),R=Bn.forwardRef((j,M)=>{const{scope:V,children:z,...B}=j,U=Bn.useRef(null),H=tn(M,U),Y=d(_,V);return Bn.useEffect(()=>(Y.itemMap.set(U,{ref:U,...B}),()=>void Y.itemMap.delete(U))),c.jsx(k,{[A]:"",ref:H,children:z})});R.displayName=_;function D(j){const M=d(r+"CollectionConsumer",j);return Bn.useCallback(()=>{const z=M.collectionRef.current;if(!z)return[];const B=Array.from(z.querySelectorAll(`[${A}]`));return Array.from(M.itemMap.values()).sort((Y,W)=>B.indexOf(Y.ref.current)-B.indexOf(W.ref.current))},[M.collectionRef,M.itemMap])}return[{Provider:p,Slot:y,ItemSlot:R},D,o]}var pr=globalThis?.document?I.useLayoutEffect:()=>{},B3=L0[" useId ".trim().toString()]||(()=>{}),F3=0;function Ys(r){const[t,n]=I.useState(B3());return pr(()=>{n(o=>o??String(F3++))},[r]),r||(t?`radix-${t}`:"")}function U3(r){const t=z3(r),n=I.forwardRef((o,u)=>{const{children:d,...p}=o,w=I.Children.toArray(d),b=w.find(W3);if(b){const y=b.props.children,_=w.map(A=>A===b?I.Children.count(y)>1?I.Children.only(null):I.isValidElement(y)?y.props.children:null:A);return c.jsx(t,{...p,ref:u,children:I.isValidElement(y)?I.cloneElement(y,void 0,_):null})}return c.jsx(t,{...p,ref:u,children:d})});return n.displayName=`${r}.Slot`,n}function z3(r){const t=I.forwardRef((n,o)=>{const{children:u,...d}=n;if(I.isValidElement(u)){const p=H3(u),w=$3(d,u.props);return u.type!==I.Fragment&&(w.ref=o?nl(o,p):p),I.cloneElement(u,w)}return I.Children.count(u)>1?I.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var V3=Symbol("radix.slottable");function W3(r){return I.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===V3}function $3(r,t){const n={...t};for(const o in t){const u=r[o],d=t[o];/^on[A-Z]/.test(o)?u&&d?n[o]=(...w)=>{const b=d(...w);return u(...w),b}:u&&(n[o]=u):o==="style"?n[o]={...u,...d}:o==="className"&&(n[o]=[u,d].filter(Boolean).join(" "))}return{...r,...n}}function H3(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var G3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],kt=G3.reduce((r,t)=>{const n=U3(`Primitive.${t}`),o=I.forwardRef((u,d)=>{const{asChild:p,...w}=u,b=p?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(b,{...w,ref:d})});return o.displayName=`Primitive.${t}`,{...r,[t]:o}},{});function q3(r,t){r&&il.flushSync(()=>r.dispatchEvent(t))}function io(r){const t=I.useRef(r);return I.useEffect(()=>{t.current=r}),I.useMemo(()=>(...n)=>t.current?.(...n),[])}var X3=L0[" useInsertionEffect ".trim().toString()]||pr;function Os({prop:r,defaultProp:t,onChange:n=()=>{},caller:o}){const[u,d,p]=K3({defaultProp:t,onChange:n}),w=r!==void 0,b=w?r:u;{const _=I.useRef(r!==void 0);I.useEffect(()=>{const A=_.current;A!==w&&console.warn(`${o} is changing from ${A?"controlled":"uncontrolled"} to ${w?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),_.current=w},[w,o])}const y=I.useCallback(_=>{if(w){const A=Y3(_)?_(r):_;A!==r&&p.current?.(A)}else d(_)},[w,r,d,p]);return[b,y]}function K3({defaultProp:r,onChange:t}){const[n,o]=I.useState(r),u=I.useRef(n),d=I.useRef(t);return X3(()=>{d.current=t},[t]),I.useEffect(()=>{u.current!==n&&(d.current?.(n),u.current=n)},[n,u]),[n,o,d]}function Y3(r){return typeof r=="function"}var Z3=I.createContext(void 0);function gc(r){const t=I.useContext(Z3);return r||t||"ltr"}var bf="rovingFocusGroup.onEntryFocus",Q3={bubbles:!1,cancelable:!0},mc="RovingFocusGroup",[y0,Jw,J3]=t1(mc),[eA,xd]=ms(mc,[J3]),[tA,nA]=eA(mc),ey=I.forwardRef((r,t)=>c.jsx(y0.Provider,{scope:r.__scopeRovingFocusGroup,children:c.jsx(y0.Slot,{scope:r.__scopeRovingFocusGroup,children:c.jsx(rA,{...r,ref:t})})}));ey.displayName=mc;var rA=I.forwardRef((r,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:u=!1,dir:d,currentTabStopId:p,defaultCurrentTabStopId:w,onCurrentTabStopIdChange:b,onEntryFocus:y,preventScrollOnEntryFocus:_=!1,...A}=r,k=I.useRef(null),R=tn(t,k),D=gc(d),[j,M]=Os({prop:p,defaultProp:w??null,onChange:b,caller:mc}),[V,z]=I.useState(!1),B=io(y),U=Jw(n),H=I.useRef(!1),[Y,W]=I.useState(0);return I.useEffect(()=>{const X=k.current;if(X)return X.addEventListener(bf,B),()=>X.removeEventListener(bf,B)},[B]),c.jsx(tA,{scope:n,orientation:o,dir:D,loop:u,currentTabStopId:j,onItemFocus:I.useCallback(X=>M(X),[M]),onItemShiftTab:I.useCallback(()=>z(!0),[]),onFocusableItemAdd:I.useCallback(()=>W(X=>X+1),[]),onFocusableItemRemove:I.useCallback(()=>W(X=>X-1),[]),children:c.jsx(kt.div,{tabIndex:V||Y===0?-1:0,"data-orientation":o,...A,ref:R,style:{outline:"none",...r.style},onMouseDown:Mt(r.onMouseDown,()=>{H.current=!0}),onFocus:Mt(r.onFocus,X=>{const $=!H.current;if(X.target===X.currentTarget&&$&&!V){const Q=new CustomEvent(bf,Q3);if(X.currentTarget.dispatchEvent(Q),!Q.defaultPrevented){const ue=U().filter(Ae=>Ae.focusable),ae=ue.find(Ae=>Ae.active),te=ue.find(Ae=>Ae.id===j),ee=[ae,te,...ue].filter(Boolean).map(Ae=>Ae.ref.current);ry(ee,_)}}H.current=!1}),onBlur:Mt(r.onBlur,()=>z(!1))})})}),ty="RovingFocusGroupItem",ny=I.forwardRef((r,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:u=!1,tabStopId:d,children:p,...w}=r,b=Ys(),y=d||b,_=nA(ty,n),A=_.currentTabStopId===y,k=Jw(n),{onFocusableItemAdd:R,onFocusableItemRemove:D,currentTabStopId:j}=_;return I.useEffect(()=>{if(o)return R(),()=>D()},[o,R,D]),c.jsx(y0.ItemSlot,{scope:n,id:y,focusable:o,active:u,children:c.jsx(kt.span,{tabIndex:A?0:-1,"data-orientation":_.orientation,...w,ref:t,onMouseDown:Mt(r.onMouseDown,M=>{o?_.onItemFocus(y):M.preventDefault()}),onFocus:Mt(r.onFocus,()=>_.onItemFocus(y)),onKeyDown:Mt(r.onKeyDown,M=>{if(M.key==="Tab"&&M.shiftKey){_.onItemShiftTab();return}if(M.target!==M.currentTarget)return;const V=oA(M,_.orientation,_.dir);if(V!==void 0){if(M.metaKey||M.ctrlKey||M.altKey||M.shiftKey)return;M.preventDefault();let B=k().filter(U=>U.focusable).map(U=>U.ref.current);if(V==="last")B.reverse();else if(V==="prev"||V==="next"){V==="prev"&&B.reverse();const U=B.indexOf(M.currentTarget);B=_.loop?aA(B,U+1):B.slice(U+1)}setTimeout(()=>ry(B))}}),children:typeof p=="function"?p({isCurrentTabStop:A,hasTabStop:j!=null}):p})})});ny.displayName=ty;var sA={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iA(r,t){return t!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function oA(r,t,n){const o=iA(r.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return sA[o]}function ry(r,t=!1){const n=document.activeElement;for(const o of r)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function aA(r,t){return r.map((n,o)=>r[(t+o)%r.length])}var sy=ey,iy=ny;function lA(r,t){return I.useReducer((n,o)=>t[n][o]??n,r)}var mo=r=>{const{present:t,children:n}=r,o=cA(t),u=typeof n=="function"?n({present:o.isPresent}):I.Children.only(n),d=tn(o.ref,uA(u));return typeof n=="function"||o.isPresent?I.cloneElement(u,{ref:d}):null};mo.displayName="Presence";function cA(r){const[t,n]=I.useState(),o=I.useRef(null),u=I.useRef(r),d=I.useRef("none"),p=r?"mounted":"unmounted",[w,b]=lA(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const y=Lu(o.current);d.current=w==="mounted"?y:"none"},[w]),pr(()=>{const y=o.current,_=u.current;if(_!==r){const k=d.current,R=Lu(y);r?b("MOUNT"):R==="none"||y?.display==="none"?b("UNMOUNT"):b(_&&k!==R?"ANIMATION_OUT":"UNMOUNT"),u.current=r}},[r,b]),pr(()=>{if(t){let y;const _=t.ownerDocument.defaultView??window,A=R=>{const j=Lu(o.current).includes(CSS.escape(R.animationName));if(R.target===t&&j&&(b("ANIMATION_END"),!u.current)){const M=t.style.animationFillMode;t.style.animationFillMode="forwards",y=_.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=M)})}},k=R=>{R.target===t&&(d.current=Lu(o.current))};return t.addEventListener("animationstart",k),t.addEventListener("animationcancel",A),t.addEventListener("animationend",A),()=>{_.clearTimeout(y),t.removeEventListener("animationstart",k),t.removeEventListener("animationcancel",A),t.removeEventListener("animationend",A)}}else b("ANIMATION_END")},[t,b]),{isPresent:["mounted","unmountSuspended"].includes(w),ref:I.useCallback(y=>{o.current=y?getComputedStyle(y):null,n(y)},[])}}function Lu(r){return r?.animationName||"none"}function uA(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var wd="Tabs",[dA]=ms(wd,[xd]),oy=xd(),[hA,n1]=dA(wd),ay=I.forwardRef((r,t)=>{const{__scopeTabs:n,value:o,onValueChange:u,defaultValue:d,orientation:p="horizontal",dir:w,activationMode:b="automatic",...y}=r,_=gc(w),[A,k]=Os({prop:o,onChange:u,defaultProp:d??"",caller:wd});return c.jsx(hA,{scope:n,baseId:Ys(),value:A,onValueChange:k,orientation:p,dir:_,activationMode:b,children:c.jsx(kt.div,{dir:_,"data-orientation":p,...y,ref:t})})});ay.displayName=wd;var ly="TabsList",cy=I.forwardRef((r,t)=>{const{__scopeTabs:n,loop:o=!0,...u}=r,d=n1(ly,n),p=oy(n);return c.jsx(sy,{asChild:!0,...p,orientation:d.orientation,dir:d.dir,loop:o,children:c.jsx(kt.div,{role:"tablist","aria-orientation":d.orientation,...u,ref:t})})});cy.displayName=ly;var uy="TabsTrigger",dy=I.forwardRef((r,t)=>{const{__scopeTabs:n,value:o,disabled:u=!1,...d}=r,p=n1(uy,n),w=oy(n),b=gy(p.baseId,o),y=my(p.baseId,o),_=o===p.value;return c.jsx(iy,{asChild:!0,...w,focusable:!u,active:_,children:c.jsx(kt.button,{type:"button",role:"tab","aria-selected":_,"aria-controls":y,"data-state":_?"active":"inactive","data-disabled":u?"":void 0,disabled:u,id:b,...d,ref:t,onMouseDown:Mt(r.onMouseDown,A=>{!u&&A.button===0&&A.ctrlKey===!1?p.onValueChange(o):A.preventDefault()}),onKeyDown:Mt(r.onKeyDown,A=>{[" ","Enter"].includes(A.key)&&p.onValueChange(o)}),onFocus:Mt(r.onFocus,()=>{const A=p.activationMode!=="manual";!_&&!u&&A&&p.onValueChange(o)})})})});dy.displayName=uy;var hy="TabsContent",fy=I.forwardRef((r,t)=>{const{__scopeTabs:n,value:o,forceMount:u,children:d,...p}=r,w=n1(hy,n),b=gy(w.baseId,o),y=my(w.baseId,o),_=o===w.value,A=I.useRef(_);return I.useEffect(()=>{const k=requestAnimationFrame(()=>A.current=!1);return()=>cancelAnimationFrame(k)},[]),c.jsx(mo,{present:u||_,children:({present:k})=>c.jsx(kt.div,{"data-state":_?"active":"inactive","data-orientation":w.orientation,role:"tabpanel","aria-labelledby":b,hidden:!k,id:y,tabIndex:0,...p,ref:t,style:{...r.style,animationDuration:A.current?"0s":void 0},children:k&&d})})});fy.displayName=hy;function gy(r,t){return`${r}-trigger-${t}`}function my(r,t){return`${r}-content-${t}`}var fA=ay,gA=cy,mA=dy,pA=fy;function v0({className:r,...t}){return c.jsx(fA,{"data-slot":"tabs",className:Ot("flex flex-col gap-2",r),...t})}function b0({className:r,...t}){return c.jsx(gA,{"data-slot":"tabs-list",className:Ot("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",r),...t})}function xi({className:r,...t}){return c.jsx(mA,{"data-slot":"tabs-trigger",className:Ot("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...t})}function wi({className:r,...t}){return c.jsx(pA,{"data-slot":"tabs-content",className:Ot("flex-1 outline-none",r),...t})}function oo({className:r,...t}){return c.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:c.jsx("table",{"data-slot":"table",className:Ot("w-full caption-bottom text-sm",r),...t})})}function ao({className:r,...t}){return c.jsx("thead",{"data-slot":"table-header",className:Ot("[&_tr]:border-b",r),...t})}function lo({className:r,...t}){return c.jsx("tbody",{"data-slot":"table-body",className:Ot("[&_tr:last-child]:border-0",r),...t})}function mr({className:r,...t}){return c.jsx("tr",{"data-slot":"table-row",className:Ot("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...t})}function Nt({className:r,...t}){return c.jsx("th",{"data-slot":"table-head",className:Ot("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})}function _t({className:r,...t}){return c.jsx("td",{"data-slot":"table-cell",className:Ot("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t})}function xA(r,t=globalThis?.document){const n=io(r);I.useEffect(()=>{const o=u=>{u.key==="Escape"&&n(u)};return t.addEventListener("keydown",o,{capture:!0}),()=>t.removeEventListener("keydown",o,{capture:!0})},[n,t])}var wA="DismissableLayer",C0="dismissableLayer.update",yA="dismissableLayer.pointerDownOutside",vA="dismissableLayer.focusOutside",xp,py=I.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),r1=I.forwardRef((r,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:p,onDismiss:w,...b}=r,y=I.useContext(py),[_,A]=I.useState(null),k=_?.ownerDocument??globalThis?.document,[,R]=I.useState({}),D=tn(t,W=>A(W)),j=Array.from(y.layers),[M]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),V=j.indexOf(M),z=_?j.indexOf(_):-1,B=y.layersWithOutsidePointerEventsDisabled.size>0,U=z>=V,H=EA(W=>{const X=W.target,$=[...y.branches].some(Q=>Q.contains(X));!U||$||(u?.(W),p?.(W),W.defaultPrevented||w?.())},k),Y=SA(W=>{const X=W.target;[...y.branches].some(Q=>Q.contains(X))||(d?.(W),p?.(W),W.defaultPrevented||w?.())},k);return xA(W=>{z===y.layers.size-1&&(o?.(W),!W.defaultPrevented&&w&&(W.preventDefault(),w()))},k),I.useEffect(()=>{if(_)return n&&(y.layersWithOutsidePointerEventsDisabled.size===0&&(xp=k.body.style.pointerEvents,k.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(_)),y.layers.add(_),wp(),()=>{n&&y.layersWithOutsidePointerEventsDisabled.size===1&&(k.body.style.pointerEvents=xp)}},[_,k,n,y]),I.useEffect(()=>()=>{_&&(y.layers.delete(_),y.layersWithOutsidePointerEventsDisabled.delete(_),wp())},[_,y]),I.useEffect(()=>{const W=()=>R({});return document.addEventListener(C0,W),()=>document.removeEventListener(C0,W)},[]),c.jsx(kt.div,{...b,ref:D,style:{pointerEvents:B?U?"auto":"none":void 0,...r.style},onFocusCapture:Mt(r.onFocusCapture,Y.onFocusCapture),onBlurCapture:Mt(r.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:Mt(r.onPointerDownCapture,H.onPointerDownCapture)})});r1.displayName=wA;var bA="DismissableLayerBranch",CA=I.forwardRef((r,t)=>{const n=I.useContext(py),o=I.useRef(null),u=tn(t,o);return I.useEffect(()=>{const d=o.current;if(d)return n.branches.add(d),()=>{n.branches.delete(d)}},[n.branches]),c.jsx(kt.div,{...r,ref:u})});CA.displayName=bA;function EA(r,t=globalThis?.document){const n=io(r),o=I.useRef(!1),u=I.useRef(()=>{});return I.useEffect(()=>{const d=w=>{if(w.target&&!o.current){let b=function(){xy(yA,n,y,{discrete:!0})};const y={originalEvent:w};w.pointerType==="touch"?(t.removeEventListener("click",u.current),u.current=b,t.addEventListener("click",u.current,{once:!0})):b()}else t.removeEventListener("click",u.current);o.current=!1},p=window.setTimeout(()=>{t.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(p),t.removeEventListener("pointerdown",d),t.removeEventListener("click",u.current)}},[t,n]),{onPointerDownCapture:()=>o.current=!0}}function SA(r,t=globalThis?.document){const n=io(r),o=I.useRef(!1);return I.useEffect(()=>{const u=d=>{d.target&&!o.current&&xy(vA,n,{originalEvent:d},{discrete:!1})};return t.addEventListener("focusin",u),()=>t.removeEventListener("focusin",u)},[t,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function wp(){const r=new CustomEvent(C0);document.dispatchEvent(r)}function xy(r,t,n,{discrete:o}){const u=n.originalEvent.target,d=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:n});t&&u.addEventListener(r,t,{once:!0}),o?q3(u,d):u.dispatchEvent(d)}var Cf="focusScope.autoFocusOnMount",Ef="focusScope.autoFocusOnUnmount",yp={bubbles:!1,cancelable:!0},_A="FocusScope",s1=I.forwardRef((r,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:u,onUnmountAutoFocus:d,...p}=r,[w,b]=I.useState(null),y=io(u),_=io(d),A=I.useRef(null),k=tn(t,j=>b(j)),R=I.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;I.useEffect(()=>{if(o){let j=function(B){if(R.paused||!w)return;const U=B.target;w.contains(U)?A.current=U:to(A.current,{select:!0})},M=function(B){if(R.paused||!w)return;const U=B.relatedTarget;U!==null&&(w.contains(U)||to(A.current,{select:!0}))},V=function(B){if(document.activeElement===document.body)for(const H of B)H.removedNodes.length>0&&to(w)};document.addEventListener("focusin",j),document.addEventListener("focusout",M);const z=new MutationObserver(V);return w&&z.observe(w,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",j),document.removeEventListener("focusout",M),z.disconnect()}}},[o,w,R.paused]),I.useEffect(()=>{if(w){bp.add(R);const j=document.activeElement;if(!w.contains(j)){const V=new CustomEvent(Cf,yp);w.addEventListener(Cf,y),w.dispatchEvent(V),V.defaultPrevented||(AA(kA(wy(w)),{select:!0}),document.activeElement===j&&to(w))}return()=>{w.removeEventListener(Cf,y),setTimeout(()=>{const V=new CustomEvent(Ef,yp);w.addEventListener(Ef,_),w.dispatchEvent(V),V.defaultPrevented||to(j??document.body,{select:!0}),w.removeEventListener(Ef,_),bp.remove(R)},0)}}},[w,y,_,R]);const D=I.useCallback(j=>{if(!n&&!o||R.paused)return;const M=j.key==="Tab"&&!j.altKey&&!j.ctrlKey&&!j.metaKey,V=document.activeElement;if(M&&V){const z=j.currentTarget,[B,U]=NA(z);B&&U?!j.shiftKey&&V===U?(j.preventDefault(),n&&to(B,{select:!0})):j.shiftKey&&V===B&&(j.preventDefault(),n&&to(U,{select:!0})):V===z&&j.preventDefault()}},[n,o,R.paused]);return c.jsx(kt.div,{tabIndex:-1,...p,ref:k,onKeyDown:D})});s1.displayName=_A;function AA(r,{select:t=!1}={}){const n=document.activeElement;for(const o of r)if(to(o,{select:t}),document.activeElement!==n)return}function NA(r){const t=wy(r),n=vp(t,r),o=vp(t.reverse(),r);return[n,o]}function wy(r){const t=[],n=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const u=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||u?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vp(r,t){for(const n of r)if(!IA(n,{upTo:t}))return n}function IA(r,{upTo:t}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(t!==void 0&&r===t)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function TA(r){return r instanceof HTMLInputElement&&"select"in r}function to(r,{select:t=!1}={}){if(r&&r.focus){const n=document.activeElement;r.focus({preventScroll:!0}),r!==n&&TA(r)&&t&&r.select()}}var bp=RA();function RA(){let r=[];return{add(t){const n=r[0];t!==n&&n?.pause(),r=Cp(r,t),r.unshift(t)},remove(t){r=Cp(r,t),r[0]?.resume()}}}function Cp(r,t){const n=[...r],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function kA(r){return r.filter(t=>t.tagName!=="A")}var jA="Portal",i1=I.forwardRef((r,t)=>{const{container:n,...o}=r,[u,d]=I.useState(!1);pr(()=>d(!0),[]);const p=n||u&&globalThis?.document?.body;return p?AC.createPortal(c.jsx(kt.div,{...o,ref:t}),p):null});i1.displayName=jA;var Sf=0;function yy(){I.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??Ep()),document.body.insertAdjacentElement("beforeend",r[1]??Ep()),Sf++,()=>{Sf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Sf--}},[])}function Ep(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var Xu="right-scroll-bar-position",Ku="width-before-scroll-bar",OA="with-scroll-bars-hidden",PA="--removed-body-scroll-bar-size";function _f(r,t){return typeof r=="function"?r(t):r&&(r.current=t),r}function DA(r,t){var n=I.useState(function(){return{value:r,callback:t,facade:{get current(){return n.value},set current(o){var u=n.value;u!==o&&(n.value=o,n.callback(o,u))}}}})[0];return n.callback=t,n.facade}var MA=typeof window<"u"?I.useLayoutEffect:I.useEffect,Sp=new WeakMap;function LA(r,t){var n=DA(null,function(o){return r.forEach(function(u){return _f(u,o)})});return MA(function(){var o=Sp.get(n);if(o){var u=new Set(o),d=new Set(r),p=n.current;u.forEach(function(w){d.has(w)||_f(w,null)}),d.forEach(function(w){u.has(w)||_f(w,p)})}Sp.set(n,r)},[r]),n}function BA(r){return r}function FA(r,t){t===void 0&&(t=BA);var n=[],o=!1,u={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:r},useMedium:function(d){var p=t(d,o);return n.push(p),function(){n=n.filter(function(w){return w!==p})}},assignSyncMedium:function(d){for(o=!0;n.length;){var p=n;n=[],p.forEach(d)}n={push:function(w){return d(w)},filter:function(){return n}}},assignMedium:function(d){o=!0;var p=[];if(n.length){var w=n;n=[],w.forEach(d),p=n}var b=function(){var _=p;p=[],_.forEach(d)},y=function(){return Promise.resolve().then(b)};y(),n={push:function(_){p.push(_),y()},filter:function(_){return p=p.filter(_),n}}}};return u}function UA(r){r===void 0&&(r={});var t=FA(null);return t.options=gs({async:!0,ssr:!1},r),t}var vy=function(r){var t=r.sideCar,n=fo(r,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=t.read();if(!o)throw new Error("Sidecar medium not found");return I.createElement(o,gs({},n))};vy.isSideCarExport=!0;function zA(r,t){return r.useMedium(t),vy}var by=UA(),Af=function(){},yd=I.forwardRef(function(r,t){var n=I.useRef(null),o=I.useState({onScrollCapture:Af,onWheelCapture:Af,onTouchMoveCapture:Af}),u=o[0],d=o[1],p=r.forwardProps,w=r.children,b=r.className,y=r.removeScrollBar,_=r.enabled,A=r.shards,k=r.sideCar,R=r.noRelative,D=r.noIsolation,j=r.inert,M=r.allowPinchZoom,V=r.as,z=V===void 0?"div":V,B=r.gapMode,U=fo(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=k,Y=LA([n,t]),W=gs(gs({},U),u);return I.createElement(I.Fragment,null,_&&I.createElement(H,{sideCar:by,removeScrollBar:y,shards:A,noRelative:R,noIsolation:D,inert:j,setCallbacks:d,allowPinchZoom:!!M,lockRef:n,gapMode:B}),p?I.cloneElement(I.Children.only(w),gs(gs({},W),{ref:Y})):I.createElement(z,gs({},W,{className:b,ref:Y}),w))});yd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yd.classNames={fullWidth:Ku,zeroRight:Xu};var VA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WA(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var t=VA();return t&&r.setAttribute("nonce",t),r}function $A(r,t){r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}function HA(r){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(r)}var GA=function(){var r=0,t=null;return{add:function(n){r==0&&(t=WA())&&($A(t,n),HA(t)),r++},remove:function(){r--,!r&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},qA=function(){var r=GA();return function(t,n){I.useEffect(function(){return r.add(t),function(){r.remove()}},[t&&n])}},Cy=function(){var r=qA(),t=function(n){var o=n.styles,u=n.dynamic;return r(o,u),null};return t},XA={left:0,top:0,right:0,gap:0},Nf=function(r){return parseInt(r||"",10)||0},KA=function(r){var t=window.getComputedStyle(document.body),n=t[r==="padding"?"paddingLeft":"marginLeft"],o=t[r==="padding"?"paddingTop":"marginTop"],u=t[r==="padding"?"paddingRight":"marginRight"];return[Nf(n),Nf(o),Nf(u)]},YA=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return XA;var t=KA(r),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,o-n+t[2]-t[0])}},ZA=Cy(),Ga="data-scroll-locked",QA=function(r,t,n,o){var u=r.left,d=r.top,p=r.right,w=r.gap;return n===void 0&&(n="margin"),`
  .`.concat(OA,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(w,"px ").concat(o,`;
  }
  body[`).concat(Ga,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(o,";"),n==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(p,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(w,"px ").concat(o,`;
    `),n==="padding"&&"padding-right: ".concat(w,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xu,` {
    right: `).concat(w,"px ").concat(o,`;
  }
  
  .`).concat(Ku,` {
    margin-right: `).concat(w,"px ").concat(o,`;
  }
  
  .`).concat(Xu," .").concat(Xu,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(Ku," .").concat(Ku,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(Ga,`] {
    `).concat(PA,": ").concat(w,`px;
  }
`)},_p=function(){var r=parseInt(document.body.getAttribute(Ga)||"0",10);return isFinite(r)?r:0},JA=function(){I.useEffect(function(){return document.body.setAttribute(Ga,(_p()+1).toString()),function(){var r=_p()-1;r<=0?document.body.removeAttribute(Ga):document.body.setAttribute(Ga,r.toString())}},[])},eN=function(r){var t=r.noRelative,n=r.noImportant,o=r.gapMode,u=o===void 0?"margin":o;JA();var d=I.useMemo(function(){return YA(u)},[u]);return I.createElement(ZA,{styles:QA(d,!t,u,n?"":"!important")})},E0=!1;if(typeof window<"u")try{var Bu=Object.defineProperty({},"passive",{get:function(){return E0=!0,!0}});window.addEventListener("test",Bu,Bu),window.removeEventListener("test",Bu,Bu)}catch{E0=!1}var Ma=E0?{passive:!1}:!1,tN=function(r){return r.tagName==="TEXTAREA"},Ey=function(r,t){if(!(r instanceof Element))return!1;var n=window.getComputedStyle(r);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!tN(r)&&n[t]==="visible")},nN=function(r){return Ey(r,"overflowY")},rN=function(r){return Ey(r,"overflowX")},Ap=function(r,t){var n=t.ownerDocument,o=t;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var u=Sy(r,o);if(u){var d=_y(r,o),p=d[1],w=d[2];if(p>w)return!0}o=o.parentNode}while(o&&o!==n.body);return!1},sN=function(r){var t=r.scrollTop,n=r.scrollHeight,o=r.clientHeight;return[t,n,o]},iN=function(r){var t=r.scrollLeft,n=r.scrollWidth,o=r.clientWidth;return[t,n,o]},Sy=function(r,t){return r==="v"?nN(t):rN(t)},_y=function(r,t){return r==="v"?sN(t):iN(t)},oN=function(r,t){return r==="h"&&t==="rtl"?-1:1},aN=function(r,t,n,o,u){var d=oN(r,window.getComputedStyle(t).direction),p=d*o,w=n.target,b=t.contains(w),y=!1,_=p>0,A=0,k=0;do{if(!w)break;var R=_y(r,w),D=R[0],j=R[1],M=R[2],V=j-M-d*D;(D||V)&&Sy(r,w)&&(A+=V,k+=D);var z=w.parentNode;w=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!b&&w!==document.body||b&&(t.contains(w)||t===w));return(_&&Math.abs(A)<1||!_&&Math.abs(k)<1)&&(y=!0),y},Fu=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},Np=function(r){return[r.deltaX,r.deltaY]},Ip=function(r){return r&&"current"in r?r.current:r},lN=function(r,t){return r[0]===t[0]&&r[1]===t[1]},cN=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},uN=0,La=[];function dN(r){var t=I.useRef([]),n=I.useRef([0,0]),o=I.useRef(),u=I.useState(uN++)[0],d=I.useState(Cy)[0],p=I.useRef(r);I.useEffect(function(){p.current=r},[r]),I.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(u));var j=G0([r.lockRef.current],(r.shards||[]).map(Ip),!0).filter(Boolean);return j.forEach(function(M){return M.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),j.forEach(function(M){return M.classList.remove("allow-interactivity-".concat(u))})}}},[r.inert,r.lockRef.current,r.shards]);var w=I.useCallback(function(j,M){if("touches"in j&&j.touches.length===2||j.type==="wheel"&&j.ctrlKey)return!p.current.allowPinchZoom;var V=Fu(j),z=n.current,B="deltaX"in j?j.deltaX:z[0]-V[0],U="deltaY"in j?j.deltaY:z[1]-V[1],H,Y=j.target,W=Math.abs(B)>Math.abs(U)?"h":"v";if("touches"in j&&W==="h"&&Y.type==="range")return!1;var X=Ap(W,Y);if(!X)return!0;if(X?H=W:(H=W==="v"?"h":"v",X=Ap(W,Y)),!X)return!1;if(!o.current&&"changedTouches"in j&&(B||U)&&(o.current=H),!H)return!0;var $=o.current||H;return aN($,M,j,$==="h"?B:U)},[]),b=I.useCallback(function(j){var M=j;if(!(!La.length||La[La.length-1]!==d)){var V="deltaY"in M?Np(M):Fu(M),z=t.current.filter(function(H){return H.name===M.type&&(H.target===M.target||M.target===H.shadowParent)&&lN(H.delta,V)})[0];if(z&&z.should){M.cancelable&&M.preventDefault();return}if(!z){var B=(p.current.shards||[]).map(Ip).filter(Boolean).filter(function(H){return H.contains(M.target)}),U=B.length>0?w(M,B[0]):!p.current.noIsolation;U&&M.cancelable&&M.preventDefault()}}},[]),y=I.useCallback(function(j,M,V,z){var B={name:j,delta:M,target:V,should:z,shadowParent:hN(V)};t.current.push(B),setTimeout(function(){t.current=t.current.filter(function(U){return U!==B})},1)},[]),_=I.useCallback(function(j){n.current=Fu(j),o.current=void 0},[]),A=I.useCallback(function(j){y(j.type,Np(j),j.target,w(j,r.lockRef.current))},[]),k=I.useCallback(function(j){y(j.type,Fu(j),j.target,w(j,r.lockRef.current))},[]);I.useEffect(function(){return La.push(d),r.setCallbacks({onScrollCapture:A,onWheelCapture:A,onTouchMoveCapture:k}),document.addEventListener("wheel",b,Ma),document.addEventListener("touchmove",b,Ma),document.addEventListener("touchstart",_,Ma),function(){La=La.filter(function(j){return j!==d}),document.removeEventListener("wheel",b,Ma),document.removeEventListener("touchmove",b,Ma),document.removeEventListener("touchstart",_,Ma)}},[]);var R=r.removeScrollBar,D=r.inert;return I.createElement(I.Fragment,null,D?I.createElement(d,{styles:cN(u)}):null,R?I.createElement(eN,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function hN(r){for(var t=null;r!==null;)r instanceof ShadowRoot&&(t=r.host,r=r.host),r=r.parentNode;return t}const fN=zA(by,dN);var o1=I.forwardRef(function(r,t){return I.createElement(yd,gs({},r,{ref:t,sideCar:fN}))});o1.classNames=yd.classNames;var gN=function(r){if(typeof document>"u")return null;var t=Array.isArray(r)?r[0]:r;return t.ownerDocument.body},Ba=new WeakMap,Uu=new WeakMap,zu={},If=0,Ay=function(r){return r&&(r.host||Ay(r.parentNode))},mN=function(r,t){return t.map(function(n){if(r.contains(n))return n;var o=Ay(n);return o&&r.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",r,". Doing nothing"),null)}).filter(function(n){return!!n})},pN=function(r,t,n,o){var u=mN(t,Array.isArray(r)?r:[r]);zu[n]||(zu[n]=new WeakMap);var d=zu[n],p=[],w=new Set,b=new Set(u),y=function(A){!A||w.has(A)||(w.add(A),y(A.parentNode))};u.forEach(y);var _=function(A){!A||b.has(A)||Array.prototype.forEach.call(A.children,function(k){if(w.has(k))_(k);else try{var R=k.getAttribute(o),D=R!==null&&R!=="false",j=(Ba.get(k)||0)+1,M=(d.get(k)||0)+1;Ba.set(k,j),d.set(k,M),p.push(k),j===1&&D&&Uu.set(k,!0),M===1&&k.setAttribute(n,"true"),D||k.setAttribute(o,"true")}catch(V){console.error("aria-hidden: cannot operate on ",k,V)}})};return _(t),w.clear(),If++,function(){p.forEach(function(A){var k=Ba.get(A)-1,R=d.get(A)-1;Ba.set(A,k),d.set(A,R),k||(Uu.has(A)||A.removeAttribute(o),Uu.delete(A)),R||A.removeAttribute(n)}),If--,If||(Ba=new WeakMap,Ba=new WeakMap,Uu=new WeakMap,zu={})}},Ny=function(r,t,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(r)?r:[r]),u=gN(r);return u?(o.push.apply(o,Array.from(u.querySelectorAll("[aria-live], script"))),pN(o,u,n,"aria-hidden")):function(){return null}};function xN(r){const t=wN(r),n=I.forwardRef((o,u)=>{const{children:d,...p}=o,w=I.Children.toArray(d),b=w.find(vN);if(b){const y=b.props.children,_=w.map(A=>A===b?I.Children.count(y)>1?I.Children.only(null):I.isValidElement(y)?y.props.children:null:A);return c.jsx(t,{...p,ref:u,children:I.isValidElement(y)?I.cloneElement(y,void 0,_):null})}return c.jsx(t,{...p,ref:u,children:d})});return n.displayName=`${r}.Slot`,n}function wN(r){const t=I.forwardRef((n,o)=>{const{children:u,...d}=n;if(I.isValidElement(u)){const p=CN(u),w=bN(d,u.props);return u.type!==I.Fragment&&(w.ref=o?nl(o,p):p),I.cloneElement(u,w)}return I.Children.count(u)>1?I.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var yN=Symbol("radix.slottable");function vN(r){return I.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===yN}function bN(r,t){const n={...t};for(const o in t){const u=r[o],d=t[o];/^on[A-Z]/.test(o)?u&&d?n[o]=(...w)=>{const b=d(...w);return u(...w),b}:u&&(n[o]=u):o==="style"?n[o]={...u,...d}:o==="className"&&(n[o]=[u,d].filter(Boolean).join(" "))}return{...r,...n}}function CN(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var vd="Dialog",[Iy]=ms(vd),[EN,Ms]=Iy(vd),Ty=r=>{const{__scopeDialog:t,children:n,open:o,defaultOpen:u,onOpenChange:d,modal:p=!0}=r,w=I.useRef(null),b=I.useRef(null),[y,_]=Os({prop:o,defaultProp:u??!1,onChange:d,caller:vd});return c.jsx(EN,{scope:t,triggerRef:w,contentRef:b,contentId:Ys(),titleId:Ys(),descriptionId:Ys(),open:y,onOpenChange:_,onOpenToggle:I.useCallback(()=>_(A=>!A),[_]),modal:p,children:n})};Ty.displayName=vd;var Ry="DialogTrigger",ky=I.forwardRef((r,t)=>{const{__scopeDialog:n,...o}=r,u=Ms(Ry,n),d=tn(t,u.triggerRef);return c.jsx(kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":c1(u.open),...o,ref:d,onClick:Mt(r.onClick,u.onOpenToggle)})});ky.displayName=Ry;var a1="DialogPortal",[SN,jy]=Iy(a1,{forceMount:void 0}),Oy=r=>{const{__scopeDialog:t,forceMount:n,children:o,container:u}=r,d=Ms(a1,t);return c.jsx(SN,{scope:t,forceMount:n,children:I.Children.map(o,p=>c.jsx(mo,{present:n||d.open,children:c.jsx(i1,{asChild:!0,container:u,children:p})}))})};Oy.displayName=a1;var sd="DialogOverlay",Py=I.forwardRef((r,t)=>{const n=jy(sd,r.__scopeDialog),{forceMount:o=n.forceMount,...u}=r,d=Ms(sd,r.__scopeDialog);return d.modal?c.jsx(mo,{present:o||d.open,children:c.jsx(AN,{...u,ref:t})}):null});Py.displayName=sd;var _N=xN("DialogOverlay.RemoveScroll"),AN=I.forwardRef((r,t)=>{const{__scopeDialog:n,...o}=r,u=Ms(sd,n);return c.jsx(o1,{as:_N,allowPinchZoom:!0,shards:[u.contentRef],children:c.jsx(kt.div,{"data-state":c1(u.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),Qo="DialogContent",Dy=I.forwardRef((r,t)=>{const n=jy(Qo,r.__scopeDialog),{forceMount:o=n.forceMount,...u}=r,d=Ms(Qo,r.__scopeDialog);return c.jsx(mo,{present:o||d.open,children:d.modal?c.jsx(NN,{...u,ref:t}):c.jsx(IN,{...u,ref:t})})});Dy.displayName=Qo;var NN=I.forwardRef((r,t)=>{const n=Ms(Qo,r.__scopeDialog),o=I.useRef(null),u=tn(t,n.contentRef,o);return I.useEffect(()=>{const d=o.current;if(d)return Ny(d)},[]),c.jsx(My,{...r,ref:u,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(r.onCloseAutoFocus,d=>{d.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Mt(r.onPointerDownOutside,d=>{const p=d.detail.originalEvent,w=p.button===0&&p.ctrlKey===!0;(p.button===2||w)&&d.preventDefault()}),onFocusOutside:Mt(r.onFocusOutside,d=>d.preventDefault())})}),IN=I.forwardRef((r,t)=>{const n=Ms(Qo,r.__scopeDialog),o=I.useRef(!1),u=I.useRef(!1);return c.jsx(My,{...r,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:d=>{r.onCloseAutoFocus?.(d),d.defaultPrevented||(o.current||n.triggerRef.current?.focus(),d.preventDefault()),o.current=!1,u.current=!1},onInteractOutside:d=>{r.onInteractOutside?.(d),d.defaultPrevented||(o.current=!0,d.detail.originalEvent.type==="pointerdown"&&(u.current=!0));const p=d.target;n.triggerRef.current?.contains(p)&&d.preventDefault(),d.detail.originalEvent.type==="focusin"&&u.current&&d.preventDefault()}})}),My=I.forwardRef((r,t)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:u,onCloseAutoFocus:d,...p}=r,w=Ms(Qo,n),b=I.useRef(null),y=tn(t,b);return yy(),c.jsxs(c.Fragment,{children:[c.jsx(s1,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:u,onUnmountAutoFocus:d,children:c.jsx(r1,{role:"dialog",id:w.contentId,"aria-describedby":w.descriptionId,"aria-labelledby":w.titleId,"data-state":c1(w.open),...p,ref:y,onDismiss:()=>w.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(TN,{titleId:w.titleId}),c.jsx(kN,{contentRef:b,descriptionId:w.descriptionId})]})]})}),l1="DialogTitle",Ly=I.forwardRef((r,t)=>{const{__scopeDialog:n,...o}=r,u=Ms(l1,n);return c.jsx(kt.h2,{id:u.titleId,...o,ref:t})});Ly.displayName=l1;var By="DialogDescription",Fy=I.forwardRef((r,t)=>{const{__scopeDialog:n,...o}=r,u=Ms(By,n);return c.jsx(kt.p,{id:u.descriptionId,...o,ref:t})});Fy.displayName=By;var Uy="DialogClose",zy=I.forwardRef((r,t)=>{const{__scopeDialog:n,...o}=r,u=Ms(Uy,n);return c.jsx(kt.button,{type:"button",...o,ref:t,onClick:Mt(r.onClick,()=>u.onOpenChange(!1))})});zy.displayName=Uy;function c1(r){return r?"open":"closed"}var Vy="DialogTitleWarning",[AR,Wy]=k3(Vy,{contentName:Qo,titleName:l1,docsSlug:"dialog"}),TN=({titleId:r})=>{const t=Wy(Vy),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return I.useEffect(()=>{r&&(document.getElementById(r)||console.error(n))},[n,r]),null},RN="DialogDescriptionWarning",kN=({contentRef:r,descriptionId:t})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Wy(RN).contentName}}.`;return I.useEffect(()=>{const u=r.current?.getAttribute("aria-describedby");t&&u&&(document.getElementById(t)||console.warn(o))},[o,r,t]),null},jN=Ty,ON=ky,PN=Oy,DN=Py,MN=Dy,LN=Ly,BN=Fy,FN=zy;function Qn({...r}){return c.jsx(jN,{"data-slot":"dialog",...r})}function $y({...r}){return c.jsx(ON,{"data-slot":"dialog-trigger",...r})}function UN({...r}){return c.jsx(PN,{"data-slot":"dialog-portal",...r})}const Hy=I.forwardRef(({className:r,...t},n)=>c.jsx(DN,{ref:n,"data-slot":"dialog-overlay",className:Ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...t}));Hy.displayName="DialogOverlay";function Jn({className:r,children:t,...n}){return c.jsxs(UN,{"data-slot":"dialog-portal",children:[c.jsx(Hy,{}),c.jsxs(MN,{"data-slot":"dialog-content",className:Ot("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...n,children:[t,c.jsxs(FN,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[c.jsx(oc,{}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function or({className:r,...t}){return c.jsx("div",{"data-slot":"dialog-header",className:Ot("flex flex-col gap-2 text-center sm:text-left",r),...t})}function ro({className:r,...t}){return c.jsx("div",{"data-slot":"dialog-footer",className:Ot("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...t})}function ar({className:r,...t}){return c.jsx(LN,{"data-slot":"dialog-title",className:Ot("text-lg leading-none font-semibold",r),...t})}function yi({className:r,...t}){return c.jsx(BN,{"data-slot":"dialog-description",className:Ot("text-muted-foreground text-sm",r),...t})}const zN=B0("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Xo({className:r,variant:t,asChild:n=!1,...o}){const u=n?Mx:"span";return c.jsx(u,{"data-slot":"badge",className:Ot(zN({variant:t}),r),...o})}function Tp(r,[t,n]){return Math.min(n,Math.max(t,r))}const VN=["top","right","bottom","left"],co=Math.min,Qr=Math.max,id=Math.round,Vu=Math.floor,Zs=r=>({x:r,y:r}),WN={left:"right",right:"left",bottom:"top",top:"bottom"},$N={start:"end",end:"start"};function S0(r,t,n){return Qr(r,co(t,n))}function Si(r,t){return typeof r=="function"?r(t):r}function _i(r){return r.split("-")[0]}function al(r){return r.split("-")[1]}function u1(r){return r==="x"?"y":"x"}function d1(r){return r==="y"?"height":"width"}const HN=new Set(["top","bottom"]);function Ks(r){return HN.has(_i(r))?"y":"x"}function h1(r){return u1(Ks(r))}function GN(r,t,n){n===void 0&&(n=!1);const o=al(r),u=h1(r),d=d1(u);let p=u==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[d]>t.floating[d]&&(p=od(p)),[p,od(p)]}function qN(r){const t=od(r);return[_0(r),t,_0(t)]}function _0(r){return r.replace(/start|end/g,t=>$N[t])}const Rp=["left","right"],kp=["right","left"],XN=["top","bottom"],KN=["bottom","top"];function YN(r,t,n){switch(r){case"top":case"bottom":return n?t?kp:Rp:t?Rp:kp;case"left":case"right":return t?XN:KN;default:return[]}}function ZN(r,t,n,o){const u=al(r);let d=YN(_i(r),n==="start",o);return u&&(d=d.map(p=>p+"-"+u),t&&(d=d.concat(d.map(_0)))),d}function od(r){return r.replace(/left|right|bottom|top/g,t=>WN[t])}function QN(r){return{top:0,right:0,bottom:0,left:0,...r}}function Gy(r){return typeof r!="number"?QN(r):{top:r,right:r,bottom:r,left:r}}function ad(r){const{x:t,y:n,width:o,height:u}=r;return{width:o,height:u,top:n,left:t,right:t+o,bottom:n+u,x:t,y:n}}function jp(r,t,n){let{reference:o,floating:u}=r;const d=Ks(t),p=h1(t),w=d1(p),b=_i(t),y=d==="y",_=o.x+o.width/2-u.width/2,A=o.y+o.height/2-u.height/2,k=o[w]/2-u[w]/2;let R;switch(b){case"top":R={x:_,y:o.y-u.height};break;case"bottom":R={x:_,y:o.y+o.height};break;case"right":R={x:o.x+o.width,y:A};break;case"left":R={x:o.x-u.width,y:A};break;default:R={x:o.x,y:o.y}}switch(al(t)){case"start":R[p]-=k*(n&&y?-1:1);break;case"end":R[p]+=k*(n&&y?-1:1);break}return R}const JN=async(r,t,n)=>{const{placement:o="bottom",strategy:u="absolute",middleware:d=[],platform:p}=n,w=d.filter(Boolean),b=await(p.isRTL==null?void 0:p.isRTL(t));let y=await p.getElementRects({reference:r,floating:t,strategy:u}),{x:_,y:A}=jp(y,o,b),k=o,R={},D=0;for(let j=0;j<w.length;j++){const{name:M,fn:V}=w[j],{x:z,y:B,data:U,reset:H}=await V({x:_,y:A,initialPlacement:o,placement:k,strategy:u,middlewareData:R,rects:y,platform:p,elements:{reference:r,floating:t}});_=z??_,A=B??A,R={...R,[M]:{...R[M],...U}},H&&D<=50&&(D++,typeof H=="object"&&(H.placement&&(k=H.placement),H.rects&&(y=H.rects===!0?await p.getElementRects({reference:r,floating:t,strategy:u}):H.rects),{x:_,y:A}=jp(y,k,b)),j=-1)}return{x:_,y:A,placement:k,strategy:u,middlewareData:R}};async function uc(r,t){var n;t===void 0&&(t={});const{x:o,y:u,platform:d,rects:p,elements:w,strategy:b}=r,{boundary:y="clippingAncestors",rootBoundary:_="viewport",elementContext:A="floating",altBoundary:k=!1,padding:R=0}=Si(t,r),D=Gy(R),M=w[k?A==="floating"?"reference":"floating":A],V=ad(await d.getClippingRect({element:(n=await(d.isElement==null?void 0:d.isElement(M)))==null||n?M:M.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(w.floating)),boundary:y,rootBoundary:_,strategy:b})),z=A==="floating"?{x:o,y:u,width:p.floating.width,height:p.floating.height}:p.reference,B=await(d.getOffsetParent==null?void 0:d.getOffsetParent(w.floating)),U=await(d.isElement==null?void 0:d.isElement(B))?await(d.getScale==null?void 0:d.getScale(B))||{x:1,y:1}:{x:1,y:1},H=ad(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:w,rect:z,offsetParent:B,strategy:b}):z);return{top:(V.top-H.top+D.top)/U.y,bottom:(H.bottom-V.bottom+D.bottom)/U.y,left:(V.left-H.left+D.left)/U.x,right:(H.right-V.right+D.right)/U.x}}const e4=r=>({name:"arrow",options:r,async fn(t){const{x:n,y:o,placement:u,rects:d,platform:p,elements:w,middlewareData:b}=t,{element:y,padding:_=0}=Si(r,t)||{};if(y==null)return{};const A=Gy(_),k={x:n,y:o},R=h1(u),D=d1(R),j=await p.getDimensions(y),M=R==="y",V=M?"top":"left",z=M?"bottom":"right",B=M?"clientHeight":"clientWidth",U=d.reference[D]+d.reference[R]-k[R]-d.floating[D],H=k[R]-d.reference[R],Y=await(p.getOffsetParent==null?void 0:p.getOffsetParent(y));let W=Y?Y[B]:0;(!W||!await(p.isElement==null?void 0:p.isElement(Y)))&&(W=w.floating[B]||d.floating[D]);const X=U/2-H/2,$=W/2-j[D]/2-1,Q=co(A[V],$),ue=co(A[z],$),ae=Q,te=W-j[D]-ue,fe=W/2-j[D]/2+X,ee=S0(ae,fe,te),Ae=!b.arrow&&al(u)!=null&&fe!==ee&&d.reference[D]/2-(fe<ae?Q:ue)-j[D]/2<0,_e=Ae?fe<ae?fe-ae:fe-te:0;return{[R]:k[R]+_e,data:{[R]:ee,centerOffset:fe-ee-_e,...Ae&&{alignmentOffset:_e}},reset:Ae}}}),t4=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(t){var n,o;const{placement:u,middlewareData:d,rects:p,initialPlacement:w,platform:b,elements:y}=t,{mainAxis:_=!0,crossAxis:A=!0,fallbackPlacements:k,fallbackStrategy:R="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:j=!0,...M}=Si(r,t);if((n=d.arrow)!=null&&n.alignmentOffset)return{};const V=_i(u),z=Ks(w),B=_i(w)===w,U=await(b.isRTL==null?void 0:b.isRTL(y.floating)),H=k||(B||!j?[od(w)]:qN(w)),Y=D!=="none";!k&&Y&&H.push(...ZN(w,j,D,U));const W=[w,...H],X=await uc(t,M),$=[];let Q=((o=d.flip)==null?void 0:o.overflows)||[];if(_&&$.push(X[V]),A){const fe=GN(u,p,U);$.push(X[fe[0]],X[fe[1]])}if(Q=[...Q,{placement:u,overflows:$}],!$.every(fe=>fe<=0)){var ue,ae;const fe=(((ue=d.flip)==null?void 0:ue.index)||0)+1,ee=W[fe];if(ee&&(!(A==="alignment"?z!==Ks(ee):!1)||Q.every(le=>Ks(le.placement)===z?le.overflows[0]>0:!0)))return{data:{index:fe,overflows:Q},reset:{placement:ee}};let Ae=(ae=Q.filter(_e=>_e.overflows[0]<=0).sort((_e,le)=>_e.overflows[1]-le.overflows[1])[0])==null?void 0:ae.placement;if(!Ae)switch(R){case"bestFit":{var te;const _e=(te=Q.filter(le=>{if(Y){const ce=Ks(le.placement);return ce===z||ce==="y"}return!0}).map(le=>[le.placement,le.overflows.filter(ce=>ce>0).reduce((ce,he)=>ce+he,0)]).sort((le,ce)=>le[1]-ce[1])[0])==null?void 0:te[0];_e&&(Ae=_e);break}case"initialPlacement":Ae=w;break}if(u!==Ae)return{reset:{placement:Ae}}}return{}}}};function Op(r,t){return{top:r.top-t.height,right:r.right-t.width,bottom:r.bottom-t.height,left:r.left-t.width}}function Pp(r){return VN.some(t=>r[t]>=0)}const n4=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...u}=Si(r,t);switch(o){case"referenceHidden":{const d=await uc(t,{...u,elementContext:"reference"}),p=Op(d,n.reference);return{data:{referenceHiddenOffsets:p,referenceHidden:Pp(p)}}}case"escaped":{const d=await uc(t,{...u,altBoundary:!0}),p=Op(d,n.floating);return{data:{escapedOffsets:p,escaped:Pp(p)}}}default:return{}}}}},qy=new Set(["left","top"]);async function r4(r,t){const{placement:n,platform:o,elements:u}=r,d=await(o.isRTL==null?void 0:o.isRTL(u.floating)),p=_i(n),w=al(n),b=Ks(n)==="y",y=qy.has(p)?-1:1,_=d&&b?-1:1,A=Si(t,r);let{mainAxis:k,crossAxis:R,alignmentAxis:D}=typeof A=="number"?{mainAxis:A,crossAxis:0,alignmentAxis:null}:{mainAxis:A.mainAxis||0,crossAxis:A.crossAxis||0,alignmentAxis:A.alignmentAxis};return w&&typeof D=="number"&&(R=w==="end"?D*-1:D),b?{x:R*_,y:k*y}:{x:k*y,y:R*_}}const s4=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(t){var n,o;const{x:u,y:d,placement:p,middlewareData:w}=t,b=await r4(t,r);return p===((n=w.offset)==null?void 0:n.placement)&&(o=w.arrow)!=null&&o.alignmentOffset?{}:{x:u+b.x,y:d+b.y,data:{...b,placement:p}}}}},i4=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(t){const{x:n,y:o,placement:u}=t,{mainAxis:d=!0,crossAxis:p=!1,limiter:w={fn:M=>{let{x:V,y:z}=M;return{x:V,y:z}}},...b}=Si(r,t),y={x:n,y:o},_=await uc(t,b),A=Ks(_i(u)),k=u1(A);let R=y[k],D=y[A];if(d){const M=k==="y"?"top":"left",V=k==="y"?"bottom":"right",z=R+_[M],B=R-_[V];R=S0(z,R,B)}if(p){const M=A==="y"?"top":"left",V=A==="y"?"bottom":"right",z=D+_[M],B=D-_[V];D=S0(z,D,B)}const j=w.fn({...t,[k]:R,[A]:D});return{...j,data:{x:j.x-n,y:j.y-o,enabled:{[k]:d,[A]:p}}}}}},o4=function(r){return r===void 0&&(r={}),{options:r,fn(t){const{x:n,y:o,placement:u,rects:d,middlewareData:p}=t,{offset:w=0,mainAxis:b=!0,crossAxis:y=!0}=Si(r,t),_={x:n,y:o},A=Ks(u),k=u1(A);let R=_[k],D=_[A];const j=Si(w,t),M=typeof j=="number"?{mainAxis:j,crossAxis:0}:{mainAxis:0,crossAxis:0,...j};if(b){const B=k==="y"?"height":"width",U=d.reference[k]-d.floating[B]+M.mainAxis,H=d.reference[k]+d.reference[B]-M.mainAxis;R<U?R=U:R>H&&(R=H)}if(y){var V,z;const B=k==="y"?"width":"height",U=qy.has(_i(u)),H=d.reference[A]-d.floating[B]+(U&&((V=p.offset)==null?void 0:V[A])||0)+(U?0:M.crossAxis),Y=d.reference[A]+d.reference[B]+(U?0:((z=p.offset)==null?void 0:z[A])||0)-(U?M.crossAxis:0);D<H?D=H:D>Y&&(D=Y)}return{[k]:R,[A]:D}}}},a4=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(t){var n,o;const{placement:u,rects:d,platform:p,elements:w}=t,{apply:b=()=>{},...y}=Si(r,t),_=await uc(t,y),A=_i(u),k=al(u),R=Ks(u)==="y",{width:D,height:j}=d.floating;let M,V;A==="top"||A==="bottom"?(M=A,V=k===(await(p.isRTL==null?void 0:p.isRTL(w.floating))?"start":"end")?"left":"right"):(V=A,M=k==="end"?"top":"bottom");const z=j-_.top-_.bottom,B=D-_.left-_.right,U=co(j-_[M],z),H=co(D-_[V],B),Y=!t.middlewareData.shift;let W=U,X=H;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(X=B),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(W=z),Y&&!k){const Q=Qr(_.left,0),ue=Qr(_.right,0),ae=Qr(_.top,0),te=Qr(_.bottom,0);R?X=D-2*(Q!==0||ue!==0?Q+ue:Qr(_.left,_.right)):W=j-2*(ae!==0||te!==0?ae+te:Qr(_.top,_.bottom))}await b({...t,availableWidth:X,availableHeight:W});const $=await p.getDimensions(w.floating);return D!==$.width||j!==$.height?{reset:{rects:!0}}:{}}}};function bd(){return typeof window<"u"}function ll(r){return Xy(r)?(r.nodeName||"").toLowerCase():"#document"}function ts(r){var t;return(r==null||(t=r.ownerDocument)==null?void 0:t.defaultView)||window}function Js(r){var t;return(t=(Xy(r)?r.ownerDocument:r.document)||window.document)==null?void 0:t.documentElement}function Xy(r){return bd()?r instanceof Node||r instanceof ts(r).Node:!1}function Ps(r){return bd()?r instanceof Element||r instanceof ts(r).Element:!1}function Qs(r){return bd()?r instanceof HTMLElement||r instanceof ts(r).HTMLElement:!1}function Dp(r){return!bd()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof ts(r).ShadowRoot}const l4=new Set(["inline","contents"]);function pc(r){const{overflow:t,overflowX:n,overflowY:o,display:u}=Ds(r);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!l4.has(u)}const c4=new Set(["table","td","th"]);function u4(r){return c4.has(ll(r))}const d4=[":popover-open",":modal"];function Cd(r){return d4.some(t=>{try{return r.matches(t)}catch{return!1}})}const h4=["transform","translate","scale","rotate","perspective"],f4=["transform","translate","scale","rotate","perspective","filter"],g4=["paint","layout","strict","content"];function f1(r){const t=g1(),n=Ps(r)?Ds(r):r;return h4.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||f4.some(o=>(n.willChange||"").includes(o))||g4.some(o=>(n.contain||"").includes(o))}function m4(r){let t=uo(r);for(;Qs(t)&&!tl(t);){if(f1(t))return t;if(Cd(t))return null;t=uo(t)}return null}function g1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const p4=new Set(["html","body","#document"]);function tl(r){return p4.has(ll(r))}function Ds(r){return ts(r).getComputedStyle(r)}function Ed(r){return Ps(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function uo(r){if(ll(r)==="html")return r;const t=r.assignedSlot||r.parentNode||Dp(r)&&r.host||Js(r);return Dp(t)?t.host:t}function Ky(r){const t=uo(r);return tl(t)?r.ownerDocument?r.ownerDocument.body:r.body:Qs(t)&&pc(t)?t:Ky(t)}function dc(r,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const u=Ky(r),d=u===((o=r.ownerDocument)==null?void 0:o.body),p=ts(u);if(d){const w=A0(p);return t.concat(p,p.visualViewport||[],pc(u)?u:[],w&&n?dc(w):[])}return t.concat(u,dc(u,[],n))}function A0(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Yy(r){const t=Ds(r);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const u=Qs(r),d=u?r.offsetWidth:n,p=u?r.offsetHeight:o,w=id(n)!==d||id(o)!==p;return w&&(n=d,o=p),{width:n,height:o,$:w}}function m1(r){return Ps(r)?r:r.contextElement}function qa(r){const t=m1(r);if(!Qs(t))return Zs(1);const n=t.getBoundingClientRect(),{width:o,height:u,$:d}=Yy(t);let p=(d?id(n.width):n.width)/o,w=(d?id(n.height):n.height)/u;return(!p||!Number.isFinite(p))&&(p=1),(!w||!Number.isFinite(w))&&(w=1),{x:p,y:w}}const x4=Zs(0);function Zy(r){const t=ts(r);return!g1()||!t.visualViewport?x4:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function w4(r,t,n){return t===void 0&&(t=!1),!n||t&&n!==ts(r)?!1:t}function Jo(r,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const u=r.getBoundingClientRect(),d=m1(r);let p=Zs(1);t&&(o?Ps(o)&&(p=qa(o)):p=qa(r));const w=w4(d,n,o)?Zy(d):Zs(0);let b=(u.left+w.x)/p.x,y=(u.top+w.y)/p.y,_=u.width/p.x,A=u.height/p.y;if(d){const k=ts(d),R=o&&Ps(o)?ts(o):o;let D=k,j=A0(D);for(;j&&o&&R!==D;){const M=qa(j),V=j.getBoundingClientRect(),z=Ds(j),B=V.left+(j.clientLeft+parseFloat(z.paddingLeft))*M.x,U=V.top+(j.clientTop+parseFloat(z.paddingTop))*M.y;b*=M.x,y*=M.y,_*=M.x,A*=M.y,b+=B,y+=U,D=ts(j),j=A0(D)}}return ad({width:_,height:A,x:b,y})}function Sd(r,t){const n=Ed(r).scrollLeft;return t?t.left+n:Jo(Js(r)).left+n}function Qy(r,t){const n=r.getBoundingClientRect(),o=n.left+t.scrollLeft-Sd(r,n),u=n.top+t.scrollTop;return{x:o,y:u}}function y4(r){let{elements:t,rect:n,offsetParent:o,strategy:u}=r;const d=u==="fixed",p=Js(o),w=t?Cd(t.floating):!1;if(o===p||w&&d)return n;let b={scrollLeft:0,scrollTop:0},y=Zs(1);const _=Zs(0),A=Qs(o);if((A||!A&&!d)&&((ll(o)!=="body"||pc(p))&&(b=Ed(o)),Qs(o))){const R=Jo(o);y=qa(o),_.x=R.x+o.clientLeft,_.y=R.y+o.clientTop}const k=p&&!A&&!d?Qy(p,b):Zs(0);return{width:n.width*y.x,height:n.height*y.y,x:n.x*y.x-b.scrollLeft*y.x+_.x+k.x,y:n.y*y.y-b.scrollTop*y.y+_.y+k.y}}function v4(r){return Array.from(r.getClientRects())}function b4(r){const t=Js(r),n=Ed(r),o=r.ownerDocument.body,u=Qr(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),d=Qr(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let p=-n.scrollLeft+Sd(r);const w=-n.scrollTop;return Ds(o).direction==="rtl"&&(p+=Qr(t.clientWidth,o.clientWidth)-u),{width:u,height:d,x:p,y:w}}const Mp=25;function C4(r,t){const n=ts(r),o=Js(r),u=n.visualViewport;let d=o.clientWidth,p=o.clientHeight,w=0,b=0;if(u){d=u.width,p=u.height;const _=g1();(!_||_&&t==="fixed")&&(w=u.offsetLeft,b=u.offsetTop)}const y=Sd(o);if(y<=0){const _=o.ownerDocument,A=_.body,k=getComputedStyle(A),R=_.compatMode==="CSS1Compat"&&parseFloat(k.marginLeft)+parseFloat(k.marginRight)||0,D=Math.abs(o.clientWidth-A.clientWidth-R);D<=Mp&&(d-=D)}else y<=Mp&&(d+=y);return{width:d,height:p,x:w,y:b}}const E4=new Set(["absolute","fixed"]);function S4(r,t){const n=Jo(r,!0,t==="fixed"),o=n.top+r.clientTop,u=n.left+r.clientLeft,d=Qs(r)?qa(r):Zs(1),p=r.clientWidth*d.x,w=r.clientHeight*d.y,b=u*d.x,y=o*d.y;return{width:p,height:w,x:b,y}}function Lp(r,t,n){let o;if(t==="viewport")o=C4(r,n);else if(t==="document")o=b4(Js(r));else if(Ps(t))o=S4(t,n);else{const u=Zy(r);o={x:t.x-u.x,y:t.y-u.y,width:t.width,height:t.height}}return ad(o)}function Jy(r,t){const n=uo(r);return n===t||!Ps(n)||tl(n)?!1:Ds(n).position==="fixed"||Jy(n,t)}function _4(r,t){const n=t.get(r);if(n)return n;let o=dc(r,[],!1).filter(w=>Ps(w)&&ll(w)!=="body"),u=null;const d=Ds(r).position==="fixed";let p=d?uo(r):r;for(;Ps(p)&&!tl(p);){const w=Ds(p),b=f1(p);!b&&w.position==="fixed"&&(u=null),(d?!b&&!u:!b&&w.position==="static"&&!!u&&E4.has(u.position)||pc(p)&&!b&&Jy(r,p))?o=o.filter(_=>_!==p):u=w,p=uo(p)}return t.set(r,o),o}function A4(r){let{element:t,boundary:n,rootBoundary:o,strategy:u}=r;const p=[...n==="clippingAncestors"?Cd(t)?[]:_4(t,this._c):[].concat(n),o],w=p[0],b=p.reduce((y,_)=>{const A=Lp(t,_,u);return y.top=Qr(A.top,y.top),y.right=co(A.right,y.right),y.bottom=co(A.bottom,y.bottom),y.left=Qr(A.left,y.left),y},Lp(t,w,u));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}}function N4(r){const{width:t,height:n}=Yy(r);return{width:t,height:n}}function I4(r,t,n){const o=Qs(t),u=Js(t),d=n==="fixed",p=Jo(r,!0,d,t);let w={scrollLeft:0,scrollTop:0};const b=Zs(0);function y(){b.x=Sd(u)}if(o||!o&&!d)if((ll(t)!=="body"||pc(u))&&(w=Ed(t)),o){const R=Jo(t,!0,d,t);b.x=R.x+t.clientLeft,b.y=R.y+t.clientTop}else u&&y();d&&!o&&u&&y();const _=u&&!o&&!d?Qy(u,w):Zs(0),A=p.left+w.scrollLeft-b.x-_.x,k=p.top+w.scrollTop-b.y-_.y;return{x:A,y:k,width:p.width,height:p.height}}function Tf(r){return Ds(r).position==="static"}function Bp(r,t){if(!Qs(r)||Ds(r).position==="fixed")return null;if(t)return t(r);let n=r.offsetParent;return Js(r)===n&&(n=n.ownerDocument.body),n}function ev(r,t){const n=ts(r);if(Cd(r))return n;if(!Qs(r)){let u=uo(r);for(;u&&!tl(u);){if(Ps(u)&&!Tf(u))return u;u=uo(u)}return n}let o=Bp(r,t);for(;o&&u4(o)&&Tf(o);)o=Bp(o,t);return o&&tl(o)&&Tf(o)&&!f1(o)?n:o||m4(r)||n}const T4=async function(r){const t=this.getOffsetParent||ev,n=this.getDimensions,o=await n(r.floating);return{reference:I4(r.reference,await t(r.floating),r.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function R4(r){return Ds(r).direction==="rtl"}const k4={convertOffsetParentRelativeRectToViewportRelativeRect:y4,getDocumentElement:Js,getClippingRect:A4,getOffsetParent:ev,getElementRects:T4,getClientRects:v4,getDimensions:N4,getScale:qa,isElement:Ps,isRTL:R4};function tv(r,t){return r.x===t.x&&r.y===t.y&&r.width===t.width&&r.height===t.height}function j4(r,t){let n=null,o;const u=Js(r);function d(){var w;clearTimeout(o),(w=n)==null||w.disconnect(),n=null}function p(w,b){w===void 0&&(w=!1),b===void 0&&(b=1),d();const y=r.getBoundingClientRect(),{left:_,top:A,width:k,height:R}=y;if(w||t(),!k||!R)return;const D=Vu(A),j=Vu(u.clientWidth-(_+k)),M=Vu(u.clientHeight-(A+R)),V=Vu(_),B={rootMargin:-D+"px "+-j+"px "+-M+"px "+-V+"px",threshold:Qr(0,co(1,b))||1};let U=!0;function H(Y){const W=Y[0].intersectionRatio;if(W!==b){if(!U)return p();W?p(!1,W):o=setTimeout(()=>{p(!1,1e-7)},1e3)}W===1&&!tv(y,r.getBoundingClientRect())&&p(),U=!1}try{n=new IntersectionObserver(H,{...B,root:u.ownerDocument})}catch{n=new IntersectionObserver(H,B)}n.observe(r)}return p(!0),d}function O4(r,t,n,o){o===void 0&&(o={});const{ancestorScroll:u=!0,ancestorResize:d=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:w=typeof IntersectionObserver=="function",animationFrame:b=!1}=o,y=m1(r),_=u||d?[...y?dc(y):[],...dc(t)]:[];_.forEach(V=>{u&&V.addEventListener("scroll",n,{passive:!0}),d&&V.addEventListener("resize",n)});const A=y&&w?j4(y,n):null;let k=-1,R=null;p&&(R=new ResizeObserver(V=>{let[z]=V;z&&z.target===y&&R&&(R.unobserve(t),cancelAnimationFrame(k),k=requestAnimationFrame(()=>{var B;(B=R)==null||B.observe(t)})),n()}),y&&!b&&R.observe(y),R.observe(t));let D,j=b?Jo(r):null;b&&M();function M(){const V=Jo(r);j&&!tv(j,V)&&n(),j=V,D=requestAnimationFrame(M)}return n(),()=>{var V;_.forEach(z=>{u&&z.removeEventListener("scroll",n),d&&z.removeEventListener("resize",n)}),A?.(),(V=R)==null||V.disconnect(),R=null,b&&cancelAnimationFrame(D)}}const P4=s4,D4=i4,M4=t4,L4=a4,B4=n4,Fp=e4,F4=o4,U4=(r,t,n)=>{const o=new Map,u={platform:k4,...n},d={...u.platform,_c:o};return JN(r,t,{...u,platform:d})};var z4=typeof document<"u",V4=function(){},Yu=z4?I.useLayoutEffect:V4;function ld(r,t){if(r===t)return!0;if(typeof r!=typeof t)return!1;if(typeof r=="function"&&r.toString()===t.toString())return!0;let n,o,u;if(r&&t&&typeof r=="object"){if(Array.isArray(r)){if(n=r.length,n!==t.length)return!1;for(o=n;o--!==0;)if(!ld(r[o],t[o]))return!1;return!0}if(u=Object.keys(r),n=u.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(t,u[o]))return!1;for(o=n;o--!==0;){const d=u[o];if(!(d==="_owner"&&r.$$typeof)&&!ld(r[d],t[d]))return!1}return!0}return r!==r&&t!==t}function nv(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function Up(r,t){const n=nv(r);return Math.round(t*n)/n}function Rf(r){const t=I.useRef(r);return Yu(()=>{t.current=r}),t}function W4(r){r===void 0&&(r={});const{placement:t="bottom",strategy:n="absolute",middleware:o=[],platform:u,elements:{reference:d,floating:p}={},transform:w=!0,whileElementsMounted:b,open:y}=r,[_,A]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[k,R]=I.useState(o);ld(k,o)||R(o);const[D,j]=I.useState(null),[M,V]=I.useState(null),z=I.useCallback(le=>{le!==Y.current&&(Y.current=le,j(le))},[]),B=I.useCallback(le=>{le!==W.current&&(W.current=le,V(le))},[]),U=d||D,H=p||M,Y=I.useRef(null),W=I.useRef(null),X=I.useRef(_),$=b!=null,Q=Rf(b),ue=Rf(u),ae=Rf(y),te=I.useCallback(()=>{if(!Y.current||!W.current)return;const le={placement:t,strategy:n,middleware:k};ue.current&&(le.platform=ue.current),U4(Y.current,W.current,le).then(ce=>{const he={...ce,isPositioned:ae.current!==!1};fe.current&&!ld(X.current,he)&&(X.current=he,il.flushSync(()=>{A(he)}))})},[k,t,n,ue,ae]);Yu(()=>{y===!1&&X.current.isPositioned&&(X.current.isPositioned=!1,A(le=>({...le,isPositioned:!1})))},[y]);const fe=I.useRef(!1);Yu(()=>(fe.current=!0,()=>{fe.current=!1}),[]),Yu(()=>{if(U&&(Y.current=U),H&&(W.current=H),U&&H){if(Q.current)return Q.current(U,H,te);te()}},[U,H,te,Q,$]);const ee=I.useMemo(()=>({reference:Y,floating:W,setReference:z,setFloating:B}),[z,B]),Ae=I.useMemo(()=>({reference:U,floating:H}),[U,H]),_e=I.useMemo(()=>{const le={position:n,left:0,top:0};if(!Ae.floating)return le;const ce=Up(Ae.floating,_.x),he=Up(Ae.floating,_.y);return w?{...le,transform:"translate("+ce+"px, "+he+"px)",...nv(Ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ce,top:he}},[n,w,Ae.floating,_.x,_.y]);return I.useMemo(()=>({..._,update:te,refs:ee,elements:Ae,floatingStyles:_e}),[_,te,ee,Ae,_e])}const $4=r=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:r,fn(n){const{element:o,padding:u}=typeof r=="function"?r(n):r;return o&&t(o)?o.current!=null?Fp({element:o.current,padding:u}).fn(n):{}:o?Fp({element:o,padding:u}).fn(n):{}}}},H4=(r,t)=>({...P4(r),options:[r,t]}),G4=(r,t)=>({...D4(r),options:[r,t]}),q4=(r,t)=>({...F4(r),options:[r,t]}),X4=(r,t)=>({...M4(r),options:[r,t]}),K4=(r,t)=>({...L4(r),options:[r,t]}),Y4=(r,t)=>({...B4(r),options:[r,t]}),Z4=(r,t)=>({...$4(r),options:[r,t]});var Q4="Arrow",rv=I.forwardRef((r,t)=>{const{children:n,width:o=10,height:u=5,...d}=r;return c.jsx(kt.svg,{...d,ref:t,width:o,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});rv.displayName=Q4;var J4=rv;function _d(r){const[t,n]=I.useState(void 0);return pr(()=>{if(r){n({width:r.offsetWidth,height:r.offsetHeight});const o=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const d=u[0];let p,w;if("borderBoxSize"in d){const b=d.borderBoxSize,y=Array.isArray(b)?b[0]:b;p=y.inlineSize,w=y.blockSize}else p=r.offsetWidth,w=r.offsetHeight;n({width:p,height:w})});return o.observe(r,{box:"border-box"}),()=>o.unobserve(r)}else n(void 0)},[r]),t}var p1="Popper",[sv,iv]=ms(p1),[eI,ov]=sv(p1),av=r=>{const{__scopePopper:t,children:n}=r,[o,u]=I.useState(null);return c.jsx(eI,{scope:t,anchor:o,onAnchorChange:u,children:n})};av.displayName=p1;var lv="PopperAnchor",cv=I.forwardRef((r,t)=>{const{__scopePopper:n,virtualRef:o,...u}=r,d=ov(lv,n),p=I.useRef(null),w=tn(t,p),b=I.useRef(null);return I.useEffect(()=>{const y=b.current;b.current=o?.current||p.current,y!==b.current&&d.onAnchorChange(b.current)}),o?null:c.jsx(kt.div,{...u,ref:w})});cv.displayName=lv;var x1="PopperContent",[tI,nI]=sv(x1),uv=I.forwardRef((r,t)=>{const{__scopePopper:n,side:o="bottom",sideOffset:u=0,align:d="center",alignOffset:p=0,arrowPadding:w=0,avoidCollisions:b=!0,collisionBoundary:y=[],collisionPadding:_=0,sticky:A="partial",hideWhenDetached:k=!1,updatePositionStrategy:R="optimized",onPlaced:D,...j}=r,M=ov(x1,n),[V,z]=I.useState(null),B=tn(t,Ce=>z(Ce)),[U,H]=I.useState(null),Y=_d(U),W=Y?.width??0,X=Y?.height??0,$=o+(d!=="center"?"-"+d:""),Q=typeof _=="number"?_:{top:0,right:0,bottom:0,left:0,..._},ue=Array.isArray(y)?y:[y],ae=ue.length>0,te={padding:Q,boundary:ue.filter(sI),altBoundary:ae},{refs:fe,floatingStyles:ee,placement:Ae,isPositioned:_e,middlewareData:le}=W4({strategy:"fixed",placement:$,whileElementsMounted:(...Ce)=>O4(...Ce,{animationFrame:R==="always"}),elements:{reference:M.anchor},middleware:[H4({mainAxis:u+X,alignmentAxis:p}),b&&G4({mainAxis:!0,crossAxis:!1,limiter:A==="partial"?q4():void 0,...te}),b&&X4({...te}),K4({...te,apply:({elements:Ce,rects:Re,availableWidth:qe,availableHeight:Ke})=>{const{width:We,height:Ct}=Re.reference,nt=Ce.floating.style;nt.setProperty("--radix-popper-available-width",`${qe}px`),nt.setProperty("--radix-popper-available-height",`${Ke}px`),nt.setProperty("--radix-popper-anchor-width",`${We}px`),nt.setProperty("--radix-popper-anchor-height",`${Ct}px`)}}),U&&Z4({element:U,padding:w}),iI({arrowWidth:W,arrowHeight:X}),k&&Y4({strategy:"referenceHidden",...te})]}),[ce,he]=fv(Ae),K=io(D);pr(()=>{_e&&K?.()},[_e,K]);const pe=le.arrow?.x,Be=le.arrow?.y,Ve=le.arrow?.centerOffset!==0,[Ee,we]=I.useState();return pr(()=>{V&&we(window.getComputedStyle(V).zIndex)},[V]),c.jsx("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:_e?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[le.transformOrigin?.x,le.transformOrigin?.y].join(" "),...le.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:c.jsx(tI,{scope:n,placedSide:ce,onArrowChange:H,arrowX:pe,arrowY:Be,shouldHideArrow:Ve,children:c.jsx(kt.div,{"data-side":ce,"data-align":he,...j,ref:B,style:{...j.style,animation:_e?void 0:"none"}})})})});uv.displayName=x1;var dv="PopperArrow",rI={top:"bottom",right:"left",bottom:"top",left:"right"},hv=I.forwardRef(function(t,n){const{__scopePopper:o,...u}=t,d=nI(dv,o),p=rI[d.placedSide];return c.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[p]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:c.jsx(J4,{...u,ref:n,style:{...u.style,display:"block"}})})});hv.displayName=dv;function sI(r){return r!==null}var iI=r=>({name:"transformOrigin",options:r,fn(t){const{placement:n,rects:o,middlewareData:u}=t,p=u.arrow?.centerOffset!==0,w=p?0:r.arrowWidth,b=p?0:r.arrowHeight,[y,_]=fv(n),A={start:"0%",center:"50%",end:"100%"}[_],k=(u.arrow?.x??0)+w/2,R=(u.arrow?.y??0)+b/2;let D="",j="";return y==="bottom"?(D=p?A:`${k}px`,j=`${-b}px`):y==="top"?(D=p?A:`${k}px`,j=`${o.floating.height+b}px`):y==="right"?(D=`${-b}px`,j=p?A:`${R}px`):y==="left"&&(D=`${o.floating.width+b}px`,j=p?A:`${R}px`),{data:{x:D,y:j}}}});function fv(r){const[t,n="center"]=r.split("-");return[t,n]}var oI=av,aI=cv,lI=uv,cI=hv;function uI(r){const t=dI(r),n=I.forwardRef((o,u)=>{const{children:d,...p}=o,w=I.Children.toArray(d),b=w.find(fI);if(b){const y=b.props.children,_=w.map(A=>A===b?I.Children.count(y)>1?I.Children.only(null):I.isValidElement(y)?y.props.children:null:A);return c.jsx(t,{...p,ref:u,children:I.isValidElement(y)?I.cloneElement(y,void 0,_):null})}return c.jsx(t,{...p,ref:u,children:d})});return n.displayName=`${r}.Slot`,n}function dI(r){const t=I.forwardRef((n,o)=>{const{children:u,...d}=n;if(I.isValidElement(u)){const p=mI(u),w=gI(d,u.props);return u.type!==I.Fragment&&(w.ref=o?nl(o,p):p),I.cloneElement(u,w)}return I.Children.count(u)>1?I.Children.only(null):null});return t.displayName=`${r}.SlotClone`,t}var hI=Symbol("radix.slottable");function fI(r){return I.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===hI}function gI(r,t){const n={...t};for(const o in t){const u=r[o],d=t[o];/^on[A-Z]/.test(o)?u&&d?n[o]=(...w)=>{const b=d(...w);return u(...w),b}:u&&(n[o]=u):o==="style"?n[o]={...u,...d}:o==="className"&&(n[o]=[u,d].filter(Boolean).join(" "))}return{...r,...n}}function mI(r){let t=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?r.ref:(t=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function Ad(r){const t=I.useRef({value:r,previous:r});return I.useMemo(()=>(t.current.value!==r&&(t.current.previous=t.current.value,t.current.value=r),t.current.previous),[r])}var gv=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pI="VisuallyHidden",xI=I.forwardRef((r,t)=>c.jsx(kt.span,{...r,ref:t,style:{...gv,...r.style}}));xI.displayName=pI;var wI=[" ","Enter","ArrowUp","ArrowDown"],yI=[" ","Enter"],ea="Select",[Nd,Id,vI]=t1(ea),[cl]=ms(ea,[vI,iv]),Td=iv(),[bI,po]=cl(ea),[CI,EI]=cl(ea),mv=r=>{const{__scopeSelect:t,children:n,open:o,defaultOpen:u,onOpenChange:d,value:p,defaultValue:w,onValueChange:b,dir:y,name:_,autoComplete:A,disabled:k,required:R,form:D}=r,j=Td(t),[M,V]=I.useState(null),[z,B]=I.useState(null),[U,H]=I.useState(!1),Y=gc(y),[W,X]=Os({prop:o,defaultProp:u??!1,onChange:d,caller:ea}),[$,Q]=Os({prop:p,defaultProp:w,onChange:b,caller:ea}),ue=I.useRef(null),ae=M?D||!!M.closest("form"):!0,[te,fe]=I.useState(new Set),ee=Array.from(te).map(Ae=>Ae.props.value).join(";");return c.jsx(oI,{...j,children:c.jsxs(bI,{required:R,scope:t,trigger:M,onTriggerChange:V,valueNode:z,onValueNodeChange:B,valueNodeHasChildren:U,onValueNodeHasChildrenChange:H,contentId:Ys(),value:$,onValueChange:Q,open:W,onOpenChange:X,dir:Y,triggerPointerDownPosRef:ue,disabled:k,children:[c.jsx(Nd.Provider,{scope:t,children:c.jsx(CI,{scope:r.__scopeSelect,onNativeOptionAdd:I.useCallback(Ae=>{fe(_e=>new Set(_e).add(Ae))},[]),onNativeOptionRemove:I.useCallback(Ae=>{fe(_e=>{const le=new Set(_e);return le.delete(Ae),le})},[]),children:n})}),ae?c.jsxs(Lv,{"aria-hidden":!0,required:R,tabIndex:-1,name:_,autoComplete:A,value:$,onChange:Ae=>Q(Ae.target.value),disabled:k,form:D,children:[$===void 0?c.jsx("option",{value:""}):null,Array.from(te)]},ee):null]})})};mv.displayName=ea;var pv="SelectTrigger",xv=I.forwardRef((r,t)=>{const{__scopeSelect:n,disabled:o=!1,...u}=r,d=Td(n),p=po(pv,n),w=p.disabled||o,b=tn(t,p.onTriggerChange),y=Id(n),_=I.useRef("touch"),[A,k,R]=Fv(j=>{const M=y().filter(B=>!B.disabled),V=M.find(B=>B.value===p.value),z=Uv(M,j,V);z!==void 0&&p.onValueChange(z.value)}),D=j=>{w||(p.onOpenChange(!0),R()),j&&(p.triggerPointerDownPosRef.current={x:Math.round(j.pageX),y:Math.round(j.pageY)})};return c.jsx(aI,{asChild:!0,...d,children:c.jsx(kt.button,{type:"button",role:"combobox","aria-controls":p.contentId,"aria-expanded":p.open,"aria-required":p.required,"aria-autocomplete":"none",dir:p.dir,"data-state":p.open?"open":"closed",disabled:w,"data-disabled":w?"":void 0,"data-placeholder":Bv(p.value)?"":void 0,...u,ref:b,onClick:Mt(u.onClick,j=>{j.currentTarget.focus(),_.current!=="mouse"&&D(j)}),onPointerDown:Mt(u.onPointerDown,j=>{_.current=j.pointerType;const M=j.target;M.hasPointerCapture(j.pointerId)&&M.releasePointerCapture(j.pointerId),j.button===0&&j.ctrlKey===!1&&j.pointerType==="mouse"&&(D(j),j.preventDefault())}),onKeyDown:Mt(u.onKeyDown,j=>{const M=A.current!=="";!(j.ctrlKey||j.altKey||j.metaKey)&&j.key.length===1&&k(j.key),!(M&&j.key===" ")&&wI.includes(j.key)&&(D(),j.preventDefault())})})})});xv.displayName=pv;var wv="SelectValue",yv=I.forwardRef((r,t)=>{const{__scopeSelect:n,className:o,style:u,children:d,placeholder:p="",...w}=r,b=po(wv,n),{onValueNodeHasChildrenChange:y}=b,_=d!==void 0,A=tn(t,b.onValueNodeChange);return pr(()=>{y(_)},[y,_]),c.jsx(kt.span,{...w,ref:A,style:{pointerEvents:"none"},children:Bv(b.value)?c.jsx(c.Fragment,{children:p}):d})});yv.displayName=wv;var SI="SelectIcon",vv=I.forwardRef((r,t)=>{const{__scopeSelect:n,children:o,...u}=r;return c.jsx(kt.span,{"aria-hidden":!0,...u,ref:t,children:o||""})});vv.displayName=SI;var _I="SelectPortal",bv=r=>c.jsx(i1,{asChild:!0,...r});bv.displayName=_I;var ta="SelectContent",Cv=I.forwardRef((r,t)=>{const n=po(ta,r.__scopeSelect),[o,u]=I.useState();if(pr(()=>{u(new DocumentFragment)},[]),!n.open){const d=o;return d?il.createPortal(c.jsx(Ev,{scope:r.__scopeSelect,children:c.jsx(Nd.Slot,{scope:r.__scopeSelect,children:c.jsx("div",{children:r.children})})}),d):null}return c.jsx(Sv,{...r,ref:t})});Cv.displayName=ta;var Is=10,[Ev,xo]=cl(ta),AI="SelectContentImpl",NI=uI("SelectContent.RemoveScroll"),Sv=I.forwardRef((r,t)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:u,onEscapeKeyDown:d,onPointerDownOutside:p,side:w,sideOffset:b,align:y,alignOffset:_,arrowPadding:A,collisionBoundary:k,collisionPadding:R,sticky:D,hideWhenDetached:j,avoidCollisions:M,...V}=r,z=po(ta,n),[B,U]=I.useState(null),[H,Y]=I.useState(null),W=tn(t,Ce=>U(Ce)),[X,$]=I.useState(null),[Q,ue]=I.useState(null),ae=Id(n),[te,fe]=I.useState(!1),ee=I.useRef(!1);I.useEffect(()=>{if(B)return Ny(B)},[B]),yy();const Ae=I.useCallback(Ce=>{const[Re,...qe]=ae().map(Ct=>Ct.ref.current),[Ke]=qe.slice(-1),We=document.activeElement;for(const Ct of Ce)if(Ct===We||(Ct?.scrollIntoView({block:"nearest"}),Ct===Re&&H&&(H.scrollTop=0),Ct===Ke&&H&&(H.scrollTop=H.scrollHeight),Ct?.focus(),document.activeElement!==We))return},[ae,H]),_e=I.useCallback(()=>Ae([X,B]),[Ae,X,B]);I.useEffect(()=>{te&&_e()},[te,_e]);const{onOpenChange:le,triggerPointerDownPosRef:ce}=z;I.useEffect(()=>{if(B){let Ce={x:0,y:0};const Re=Ke=>{Ce={x:Math.abs(Math.round(Ke.pageX)-(ce.current?.x??0)),y:Math.abs(Math.round(Ke.pageY)-(ce.current?.y??0))}},qe=Ke=>{Ce.x<=10&&Ce.y<=10?Ke.preventDefault():B.contains(Ke.target)||le(!1),document.removeEventListener("pointermove",Re),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",qe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",qe,{capture:!0})}}},[B,le,ce]),I.useEffect(()=>{const Ce=()=>le(!1);return window.addEventListener("blur",Ce),window.addEventListener("resize",Ce),()=>{window.removeEventListener("blur",Ce),window.removeEventListener("resize",Ce)}},[le]);const[he,K]=Fv(Ce=>{const Re=ae().filter(We=>!We.disabled),qe=Re.find(We=>We.ref.current===document.activeElement),Ke=Uv(Re,Ce,qe);Ke&&setTimeout(()=>Ke.ref.current.focus())}),pe=I.useCallback((Ce,Re,qe)=>{const Ke=!ee.current&&!qe;(z.value!==void 0&&z.value===Re||Ke)&&($(Ce),Ke&&(ee.current=!0))},[z.value]),Be=I.useCallback(()=>B?.focus(),[B]),Ve=I.useCallback((Ce,Re,qe)=>{const Ke=!ee.current&&!qe;(z.value!==void 0&&z.value===Re||Ke)&&ue(Ce)},[z.value]),Ee=o==="popper"?N0:_v,we=Ee===N0?{side:w,sideOffset:b,align:y,alignOffset:_,arrowPadding:A,collisionBoundary:k,collisionPadding:R,sticky:D,hideWhenDetached:j,avoidCollisions:M}:{};return c.jsx(Ev,{scope:n,content:B,viewport:H,onViewportChange:Y,itemRefCallback:pe,selectedItem:X,onItemLeave:Be,itemTextRefCallback:Ve,focusSelectedItem:_e,selectedItemText:Q,position:o,isPositioned:te,searchRef:he,children:c.jsx(o1,{as:NI,allowPinchZoom:!0,children:c.jsx(s1,{asChild:!0,trapped:z.open,onMountAutoFocus:Ce=>{Ce.preventDefault()},onUnmountAutoFocus:Mt(u,Ce=>{z.trigger?.focus({preventScroll:!0}),Ce.preventDefault()}),children:c.jsx(r1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:p,onFocusOutside:Ce=>Ce.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:c.jsx(Ee,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:Ce=>Ce.preventDefault(),...V,...we,onPlaced:()=>fe(!0),ref:W,style:{display:"flex",flexDirection:"column",outline:"none",...V.style},onKeyDown:Mt(V.onKeyDown,Ce=>{const Re=Ce.ctrlKey||Ce.altKey||Ce.metaKey;if(Ce.key==="Tab"&&Ce.preventDefault(),!Re&&Ce.key.length===1&&K(Ce.key),["ArrowUp","ArrowDown","Home","End"].includes(Ce.key)){let Ke=ae().filter(We=>!We.disabled).map(We=>We.ref.current);if(["ArrowUp","End"].includes(Ce.key)&&(Ke=Ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ce.key)){const We=Ce.target,Ct=Ke.indexOf(We);Ke=Ke.slice(Ct+1)}setTimeout(()=>Ae(Ke)),Ce.preventDefault()}})})})})})})});Sv.displayName=AI;var II="SelectItemAlignedPosition",_v=I.forwardRef((r,t)=>{const{__scopeSelect:n,onPlaced:o,...u}=r,d=po(ta,n),p=xo(ta,n),[w,b]=I.useState(null),[y,_]=I.useState(null),A=tn(t,W=>_(W)),k=Id(n),R=I.useRef(!1),D=I.useRef(!0),{viewport:j,selectedItem:M,selectedItemText:V,focusSelectedItem:z}=p,B=I.useCallback(()=>{if(d.trigger&&d.valueNode&&w&&y&&j&&M&&V){const W=d.trigger.getBoundingClientRect(),X=y.getBoundingClientRect(),$=d.valueNode.getBoundingClientRect(),Q=V.getBoundingClientRect();if(d.dir!=="rtl"){const We=Q.left-X.left,Ct=$.left-We,nt=W.left-Ct,Wt=W.width+nt,Oe=Math.max(Wt,X.width),rt=window.innerWidth-Is,J=Tp(Ct,[Is,Math.max(Is,rt-Oe)]);w.style.minWidth=Wt+"px",w.style.left=J+"px"}else{const We=X.right-Q.right,Ct=window.innerWidth-$.right-We,nt=window.innerWidth-W.right-Ct,Wt=W.width+nt,Oe=Math.max(Wt,X.width),rt=window.innerWidth-Is,J=Tp(Ct,[Is,Math.max(Is,rt-Oe)]);w.style.minWidth=Wt+"px",w.style.right=J+"px"}const ue=k(),ae=window.innerHeight-Is*2,te=j.scrollHeight,fe=window.getComputedStyle(y),ee=parseInt(fe.borderTopWidth,10),Ae=parseInt(fe.paddingTop,10),_e=parseInt(fe.borderBottomWidth,10),le=parseInt(fe.paddingBottom,10),ce=ee+Ae+te+le+_e,he=Math.min(M.offsetHeight*5,ce),K=window.getComputedStyle(j),pe=parseInt(K.paddingTop,10),Be=parseInt(K.paddingBottom,10),Ve=W.top+W.height/2-Is,Ee=ae-Ve,we=M.offsetHeight/2,Ce=M.offsetTop+we,Re=ee+Ae+Ce,qe=ce-Re;if(Re<=Ve){const We=ue.length>0&&M===ue[ue.length-1].ref.current;w.style.bottom="0px";const Ct=y.clientHeight-j.offsetTop-j.offsetHeight,nt=Math.max(Ee,we+(We?Be:0)+Ct+_e),Wt=Re+nt;w.style.height=Wt+"px"}else{const We=ue.length>0&&M===ue[0].ref.current;w.style.top="0px";const nt=Math.max(Ve,ee+j.offsetTop+(We?pe:0)+we)+qe;w.style.height=nt+"px",j.scrollTop=Re-Ve+j.offsetTop}w.style.margin=`${Is}px 0`,w.style.minHeight=he+"px",w.style.maxHeight=ae+"px",o?.(),requestAnimationFrame(()=>R.current=!0)}},[k,d.trigger,d.valueNode,w,y,j,M,V,d.dir,o]);pr(()=>B(),[B]);const[U,H]=I.useState();pr(()=>{y&&H(window.getComputedStyle(y).zIndex)},[y]);const Y=I.useCallback(W=>{W&&D.current===!0&&(B(),z?.(),D.current=!1)},[B,z]);return c.jsx(RI,{scope:n,contentWrapper:w,shouldExpandOnScrollRef:R,onScrollButtonChange:Y,children:c.jsx("div",{ref:b,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:U},children:c.jsx(kt.div,{...u,ref:A,style:{boxSizing:"border-box",maxHeight:"100%",...u.style}})})})});_v.displayName=II;var TI="SelectPopperPosition",N0=I.forwardRef((r,t)=>{const{__scopeSelect:n,align:o="start",collisionPadding:u=Is,...d}=r,p=Td(n);return c.jsx(lI,{...p,...d,ref:t,align:o,collisionPadding:u,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});N0.displayName=TI;var[RI,w1]=cl(ta,{}),I0="SelectViewport",Av=I.forwardRef((r,t)=>{const{__scopeSelect:n,nonce:o,...u}=r,d=xo(I0,n),p=w1(I0,n),w=tn(t,d.onViewportChange),b=I.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),c.jsx(Nd.Slot,{scope:n,children:c.jsx(kt.div,{"data-radix-select-viewport":"",role:"presentation",...u,ref:w,style:{position:"relative",flex:1,overflow:"hidden auto",...u.style},onScroll:Mt(u.onScroll,y=>{const _=y.currentTarget,{contentWrapper:A,shouldExpandOnScrollRef:k}=p;if(k?.current&&A){const R=Math.abs(b.current-_.scrollTop);if(R>0){const D=window.innerHeight-Is*2,j=parseFloat(A.style.minHeight),M=parseFloat(A.style.height),V=Math.max(j,M);if(V<D){const z=V+R,B=Math.min(D,z),U=z-B;A.style.height=B+"px",A.style.bottom==="0px"&&(_.scrollTop=U>0?U:0,A.style.justifyContent="flex-end")}}}b.current=_.scrollTop})})})]})});Av.displayName=I0;var Nv="SelectGroup",[kI,jI]=cl(Nv),OI=I.forwardRef((r,t)=>{const{__scopeSelect:n,...o}=r,u=Ys();return c.jsx(kI,{scope:n,id:u,children:c.jsx(kt.div,{role:"group","aria-labelledby":u,...o,ref:t})})});OI.displayName=Nv;var Iv="SelectLabel",PI=I.forwardRef((r,t)=>{const{__scopeSelect:n,...o}=r,u=jI(Iv,n);return c.jsx(kt.div,{id:u.id,...o,ref:t})});PI.displayName=Iv;var cd="SelectItem",[DI,Tv]=cl(cd),Rv=I.forwardRef((r,t)=>{const{__scopeSelect:n,value:o,disabled:u=!1,textValue:d,...p}=r,w=po(cd,n),b=xo(cd,n),y=w.value===o,[_,A]=I.useState(d??""),[k,R]=I.useState(!1),D=tn(t,z=>b.itemRefCallback?.(z,o,u)),j=Ys(),M=I.useRef("touch"),V=()=>{u||(w.onValueChange(o),w.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(DI,{scope:n,value:o,disabled:u,textId:j,isSelected:y,onItemTextChange:I.useCallback(z=>{A(B=>B||(z?.textContent??"").trim())},[]),children:c.jsx(Nd.ItemSlot,{scope:n,value:o,disabled:u,textValue:_,children:c.jsx(kt.div,{role:"option","aria-labelledby":j,"data-highlighted":k?"":void 0,"aria-selected":y&&k,"data-state":y?"checked":"unchecked","aria-disabled":u||void 0,"data-disabled":u?"":void 0,tabIndex:u?void 0:-1,...p,ref:D,onFocus:Mt(p.onFocus,()=>R(!0)),onBlur:Mt(p.onBlur,()=>R(!1)),onClick:Mt(p.onClick,()=>{M.current!=="mouse"&&V()}),onPointerUp:Mt(p.onPointerUp,()=>{M.current==="mouse"&&V()}),onPointerDown:Mt(p.onPointerDown,z=>{M.current=z.pointerType}),onPointerMove:Mt(p.onPointerMove,z=>{M.current=z.pointerType,u?b.onItemLeave?.():M.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Mt(p.onPointerLeave,z=>{z.currentTarget===document.activeElement&&b.onItemLeave?.()}),onKeyDown:Mt(p.onKeyDown,z=>{b.searchRef?.current!==""&&z.key===" "||(yI.includes(z.key)&&V(),z.key===" "&&z.preventDefault())})})})})});Rv.displayName=cd;var Jl="SelectItemText",kv=I.forwardRef((r,t)=>{const{__scopeSelect:n,className:o,style:u,...d}=r,p=po(Jl,n),w=xo(Jl,n),b=Tv(Jl,n),y=EI(Jl,n),[_,A]=I.useState(null),k=tn(t,V=>A(V),b.onItemTextChange,V=>w.itemTextRefCallback?.(V,b.value,b.disabled)),R=_?.textContent,D=I.useMemo(()=>c.jsx("option",{value:b.value,disabled:b.disabled,children:R},b.value),[b.disabled,b.value,R]),{onNativeOptionAdd:j,onNativeOptionRemove:M}=y;return pr(()=>(j(D),()=>M(D)),[j,M,D]),c.jsxs(c.Fragment,{children:[c.jsx(kt.span,{id:b.textId,...d,ref:k}),b.isSelected&&p.valueNode&&!p.valueNodeHasChildren?il.createPortal(d.children,p.valueNode):null]})});kv.displayName=Jl;var jv="SelectItemIndicator",Ov=I.forwardRef((r,t)=>{const{__scopeSelect:n,...o}=r;return Tv(jv,n).isSelected?c.jsx(kt.span,{"aria-hidden":!0,...o,ref:t}):null});Ov.displayName=jv;var T0="SelectScrollUpButton",Pv=I.forwardRef((r,t)=>{const n=xo(T0,r.__scopeSelect),o=w1(T0,r.__scopeSelect),[u,d]=I.useState(!1),p=tn(t,o.onScrollButtonChange);return pr(()=>{if(n.viewport&&n.isPositioned){let w=function(){const y=b.scrollTop>0;d(y)};const b=n.viewport;return w(),b.addEventListener("scroll",w),()=>b.removeEventListener("scroll",w)}},[n.viewport,n.isPositioned]),u?c.jsx(Mv,{...r,ref:p,onAutoScroll:()=>{const{viewport:w,selectedItem:b}=n;w&&b&&(w.scrollTop=w.scrollTop-b.offsetHeight)}}):null});Pv.displayName=T0;var R0="SelectScrollDownButton",Dv=I.forwardRef((r,t)=>{const n=xo(R0,r.__scopeSelect),o=w1(R0,r.__scopeSelect),[u,d]=I.useState(!1),p=tn(t,o.onScrollButtonChange);return pr(()=>{if(n.viewport&&n.isPositioned){let w=function(){const y=b.scrollHeight-b.clientHeight,_=Math.ceil(b.scrollTop)<y;d(_)};const b=n.viewport;return w(),b.addEventListener("scroll",w),()=>b.removeEventListener("scroll",w)}},[n.viewport,n.isPositioned]),u?c.jsx(Mv,{...r,ref:p,onAutoScroll:()=>{const{viewport:w,selectedItem:b}=n;w&&b&&(w.scrollTop=w.scrollTop+b.offsetHeight)}}):null});Dv.displayName=R0;var Mv=I.forwardRef((r,t)=>{const{__scopeSelect:n,onAutoScroll:o,...u}=r,d=xo("SelectScrollButton",n),p=I.useRef(null),w=Id(n),b=I.useCallback(()=>{p.current!==null&&(window.clearInterval(p.current),p.current=null)},[]);return I.useEffect(()=>()=>b(),[b]),pr(()=>{w().find(_=>_.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[w]),c.jsx(kt.div,{"aria-hidden":!0,...u,ref:t,style:{flexShrink:0,...u.style},onPointerDown:Mt(u.onPointerDown,()=>{p.current===null&&(p.current=window.setInterval(o,50))}),onPointerMove:Mt(u.onPointerMove,()=>{d.onItemLeave?.(),p.current===null&&(p.current=window.setInterval(o,50))}),onPointerLeave:Mt(u.onPointerLeave,()=>{b()})})}),MI="SelectSeparator",LI=I.forwardRef((r,t)=>{const{__scopeSelect:n,...o}=r;return c.jsx(kt.div,{"aria-hidden":!0,...o,ref:t})});LI.displayName=MI;var k0="SelectArrow",BI=I.forwardRef((r,t)=>{const{__scopeSelect:n,...o}=r,u=Td(n),d=po(k0,n),p=xo(k0,n);return d.open&&p.position==="popper"?c.jsx(cI,{...u,...o,ref:t}):null});BI.displayName=k0;var FI="SelectBubbleInput",Lv=I.forwardRef(({__scopeSelect:r,value:t,...n},o)=>{const u=I.useRef(null),d=tn(o,u),p=Ad(t);return I.useEffect(()=>{const w=u.current;if(!w)return;const b=window.HTMLSelectElement.prototype,_=Object.getOwnPropertyDescriptor(b,"value").set;if(p!==t&&_){const A=new Event("change",{bubbles:!0});_.call(w,t),w.dispatchEvent(A)}},[p,t]),c.jsx(kt.select,{...n,style:{...gv,...n.style},ref:d,defaultValue:t})});Lv.displayName=FI;function Bv(r){return r===""||r===void 0}function Fv(r){const t=io(r),n=I.useRef(""),o=I.useRef(0),u=I.useCallback(p=>{const w=n.current+p;t(w),(function b(y){n.current=y,window.clearTimeout(o.current),y!==""&&(o.current=window.setTimeout(()=>b(""),1e3))})(w)},[t]),d=I.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return I.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,u,d]}function Uv(r,t,n){const u=t.length>1&&Array.from(t).every(y=>y===t[0])?t[0]:t,d=n?r.indexOf(n):-1;let p=UI(r,Math.max(d,0));u.length===1&&(p=p.filter(y=>y!==n));const b=p.find(y=>y.textValue.toLowerCase().startsWith(u.toLowerCase()));return b!==n?b:void 0}function UI(r,t){return r.map((n,o)=>r[(t+o)%r.length])}var zI=mv,VI=xv,WI=yv,$I=vv,HI=bv,GI=Cv,qI=Av,XI=Rv,KI=kv,YI=Ov,ZI=Pv,QI=Dv;function vi({...r}){return c.jsx(zI,{"data-slot":"select",...r})}function bi({...r}){return c.jsx(WI,{"data-slot":"select-value",...r})}function Ci({className:r,size:t="default",children:n,...o}){return c.jsxs(VI,{"data-slot":"select-trigger","data-size":t,className:Ot("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...o,children:[n,c.jsx($I,{asChild:!0,children:c.jsx(z0,{className:"size-4 opacity-50"})})]})}function Ei({className:r,children:t,position:n="popper",...o}){return c.jsx(HI,{children:c.jsxs(GI,{"data-slot":"select-content",className:Ot("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...o,children:[c.jsx(JI,{}),c.jsx(qI,{className:Ot("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),c.jsx(eT,{})]})})}function Jt({className:r,children:t,...n}){return c.jsxs(XI,{"data-slot":"select-item",className:Ot("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...n,children:[c.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:c.jsx(YI,{children:c.jsx(tw,{className:"size-4"})})}),c.jsx(KI,{children:t})]})}function JI({className:r,...t}){return c.jsx(ZI,{"data-slot":"select-scroll-up-button",className:Ot("flex cursor-default items-center justify-center py-1",r),...t,children:c.jsx(sE,{className:"size-4"})})}function eT({className:r,...t}){return c.jsx(QI,{"data-slot":"select-scroll-down-button",className:Ot("flex cursor-default items-center justify-center py-1",r),...t,children:c.jsx(z0,{className:"size-4"})})}var Rd="Checkbox",[tT]=ms(Rd),[nT,y1]=tT(Rd);function rT(r){const{__scopeCheckbox:t,checked:n,children:o,defaultChecked:u,disabled:d,form:p,name:w,onCheckedChange:b,required:y,value:_="on",internal_do_not_use_render:A}=r,[k,R]=Os({prop:n,defaultProp:u??!1,onChange:b,caller:Rd}),[D,j]=I.useState(null),[M,V]=I.useState(null),z=I.useRef(!1),B=D?!!p||!!D.closest("form"):!0,U={checked:k,disabled:d,setChecked:R,control:D,setControl:j,name:w,form:p,value:_,hasConsumerStoppedPropagationRef:z,required:y,defaultChecked:so(u)?!1:u,isFormControl:B,bubbleInput:M,setBubbleInput:V};return c.jsx(nT,{scope:t,...U,children:sT(A)?A(U):o})}var zv="CheckboxTrigger",Vv=I.forwardRef(({__scopeCheckbox:r,onKeyDown:t,onClick:n,...o},u)=>{const{control:d,value:p,disabled:w,checked:b,required:y,setControl:_,setChecked:A,hasConsumerStoppedPropagationRef:k,isFormControl:R,bubbleInput:D}=y1(zv,r),j=tn(u,_),M=I.useRef(b);return I.useEffect(()=>{const V=d?.form;if(V){const z=()=>A(M.current);return V.addEventListener("reset",z),()=>V.removeEventListener("reset",z)}},[d,A]),c.jsx(kt.button,{type:"button",role:"checkbox","aria-checked":so(b)?"mixed":b,"aria-required":y,"data-state":Xv(b),"data-disabled":w?"":void 0,disabled:w,value:p,...o,ref:j,onKeyDown:Mt(t,V=>{V.key==="Enter"&&V.preventDefault()}),onClick:Mt(n,V=>{A(z=>so(z)?!0:!z),D&&R&&(k.current=V.isPropagationStopped(),k.current||V.stopPropagation())})})});Vv.displayName=zv;var Wv=I.forwardRef((r,t)=>{const{__scopeCheckbox:n,name:o,checked:u,defaultChecked:d,required:p,disabled:w,value:b,onCheckedChange:y,form:_,...A}=r;return c.jsx(rT,{__scopeCheckbox:n,checked:u,defaultChecked:d,disabled:w,required:p,onCheckedChange:y,name:o,form:_,value:b,internal_do_not_use_render:({isFormControl:k})=>c.jsxs(c.Fragment,{children:[c.jsx(Vv,{...A,ref:t,__scopeCheckbox:n}),k&&c.jsx(qv,{__scopeCheckbox:n})]})})});Wv.displayName=Rd;var $v="CheckboxIndicator",Hv=I.forwardRef((r,t)=>{const{__scopeCheckbox:n,forceMount:o,...u}=r,d=y1($v,n);return c.jsx(mo,{present:o||so(d.checked)||d.checked===!0,children:c.jsx(kt.span,{"data-state":Xv(d.checked),"data-disabled":d.disabled?"":void 0,...u,ref:t,style:{pointerEvents:"none",...r.style}})})});Hv.displayName=$v;var Gv="CheckboxBubbleInput",qv=I.forwardRef(({__scopeCheckbox:r,...t},n)=>{const{control:o,hasConsumerStoppedPropagationRef:u,checked:d,defaultChecked:p,required:w,disabled:b,name:y,value:_,form:A,bubbleInput:k,setBubbleInput:R}=y1(Gv,r),D=tn(n,R),j=Ad(d),M=_d(o);I.useEffect(()=>{const z=k;if(!z)return;const B=window.HTMLInputElement.prototype,H=Object.getOwnPropertyDescriptor(B,"checked").set,Y=!u.current;if(j!==d&&H){const W=new Event("click",{bubbles:Y});z.indeterminate=so(d),H.call(z,so(d)?!1:d),z.dispatchEvent(W)}},[k,j,d,u]);const V=I.useRef(so(d)?!1:d);return c.jsx(kt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??V.current,required:w,disabled:b,name:y,value:_,form:A,...t,tabIndex:-1,ref:D,style:{...t.style,...M,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});qv.displayName=Gv;function sT(r){return typeof r=="function"}function so(r){return r==="indeterminate"}function Xv(r){return so(r)?"indeterminate":r?"checked":"unchecked"}function Ko({className:r,...t}){return c.jsx(Wv,{"data-slot":"checkbox",className:Ot("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:c.jsx(Hv,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:c.jsx(tw,{className:"size-3.5"})})})}function iT(r=8){const t="0123456789abcdefghijklmnopqrstuvwxyz";let n="";for(let o=0;o<r;o++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function oT(){return Math.floor(Date.now()/1e3).toString()}function aT(){return`fld-${oT()}-${iT(8)}`}async function ul(r){try{const{data:t,error:n}=await Je.from("events").select("*").eq("id",r).single();if(n){if(n.code==="PGRST116")return null;throw n}return t}catch(t){return console.error("Error fetching event:",t),null}}async function xc(r,t){const{error:n}=await Je.from("events").update(t).eq("id",r);if(n)throw n}async function lT(r){try{const t=await ul(r);return t?.customFields?[...t.customFields].sort((n,o)=>n.order-o.order):[]}catch(t){return console.error("Error fetching custom fields:",t),[]}}async function cT(r,t){try{const n=await ul(r);if(!n)throw new Error("Event not found");const o=n.customFields||[],u={...t,id:aT(),order:o.length},d=[...o,u];return await xc(r,{customFields:d}),u}catch(n){throw console.error("Error adding custom field:",n),n}}async function uT(r,t){try{const n=await ul(r);if(!n)throw new Error("Event not found");const o=(n.customFields||[]).filter(u=>u.id!==t);await xc(r,{customFields:o})}catch(n){throw console.error("Error deleting custom field:",n),n}}async function dT(r,t,n){try{const o=await ul(r);if(!o)throw new Error("Event not found");const u=(o.customFields||[]).map(d=>d.id===t?{...d,...n}:d);await xc(r,{customFields:u})}catch(o){throw console.error("Error updating custom field:",o),o}}async function hT(r,t){try{const n=await ul(r);if(!n)throw new Error("Event not found");const o=new Map((n.customFields||[]).map(d=>[d.id,d])),u=t.map(d=>o.get(d)).filter(Boolean).map((d,p)=>({...d,order:p}));await xc(r,{customFields:u})}catch(n){throw console.error("Error reordering custom fields:",n),n}}function fT({eventId:r,onFieldsUpdated:t}){const[n,o]=I.useState(!1),[u,d]=I.useState([]),[p,w]=I.useState({phone:!0,company:!0,position:!0,attendance:!0,registered:!0}),[b,y]=I.useState(!1),[_,A]=I.useState(null),[k,R]=I.useState(null),[D,j]=I.useState({name:"",label:"",type:"text",required:!1,options:""});I.useEffect(()=>{M(),V()},[r]);const M=async()=>{try{y(!0),A(null);const Q=await lT(r);d(Q)}catch(Q){console.error("Error loading custom fields:",Q),A("Failed to load custom fields")}finally{y(!1)}},V=async()=>{try{const Q=await ul(r);Q?.columnVisibility&&w(Q.columnVisibility)}catch(Q){console.error("Error loading column visibility:",Q)}},z=async(Q,ue)=>{try{const ae={...p,[Q]:ue};w(ae),await xc(r,{columnVisibility:ae}),t()}catch(ae){console.error("Error updating column visibility:",ae),A("Failed to update column visibility")}},B=async()=>{if(!D.name.trim()||!D.label.trim()){A("Please enter both field name and label");return}try{y(!0),A(null);const Q={name:D.name.toLowerCase().replace(/\s+/g,"_"),label:D.label,type:D.type,required:D.required,options:D.type==="select"&&D.options?D.options.split(",").map(ue=>ue.trim()).filter(Boolean):void 0};await cT(r,Q),j({name:"",label:"",type:"text",required:!1,options:""}),await M(),t()}catch(Q){console.error("Error adding field:",Q),A(Q.message||"Failed to add field")}finally{y(!1)}},U=async Q=>{if(confirm("Are you sure you want to delete this field? All data in this field will be lost."))try{y(!0),A(null),await uT(r,Q),await M(),t()}catch(ue){console.error("Error deleting field:",ue),A(ue.message||"Failed to delete field")}finally{y(!1)}},H=Q=>{R(Q),j({name:Q.name,label:Q.label,type:Q.type,required:Q.required,options:Q.options?Q.options.join(", "):""})},Y=async()=>{if(!k||!D.label.trim()){A("Please enter field label");return}try{y(!0),A(null);const Q={label:D.label,type:D.type,required:D.required,options:D.type==="select"&&D.options?D.options.split(",").map(ue=>ue.trim()).filter(Boolean):void 0};await dT(r,k.id,Q),R(null),j({name:"",label:"",type:"text",required:!1,options:""}),await M(),t()}catch(Q){console.error("Error updating field:",Q),A(Q.message||"Failed to update field")}finally{y(!1)}},W=()=>{R(null),j({name:"",label:"",type:"text",required:!1,options:""})},X=async(Q,ue)=>{const ae=u.findIndex(fe=>fe.id===Q);if(ae===-1)return;const te=ue==="up"?ae-1:ae+1;if(!(te<0||te>=u.length))try{y(!0),A(null);const fe=[...u],[ee]=fe.splice(ae,1);fe.splice(te,0,ee),await hT(r,fe.map(Ae=>Ae.id)),await M(),t()}catch(fe){console.error("Error reordering fields:",fe),A(fe.message||"Failed to reorder fields")}finally{y(!1)}},$=[{key:null,name:"ID",description:"Unique participant identifier",alwaysVisible:!0},{key:null,name:"Name",description:"Participant full name",alwaysVisible:!0},{key:null,name:"Email",description:"Email address",alwaysVisible:!0},{key:"phone",name:"Phone",description:"Phone number",alwaysVisible:!1},{key:"company",name:"Company",description:"Company name",alwaysVisible:!1},{key:"position",name:"Position",description:"Job title/position",alwaysVisible:!1},{key:"attendance",name:"Attendance",description:"Session check-ins and selected sessions",alwaysVisible:!1},{key:"registered",name:"Registered At",description:"Registration timestamp",alwaysVisible:!1}];return c.jsxs(c.Fragment,{children:[c.jsxs(Ne,{onClick:()=>o(!0),variant:"outline",size:"sm",children:[c.jsx(ZE,{className:"mr-2 h-4 w-4"}),"Manage Columns"]}),c.jsx(Qn,{open:n,onOpenChange:o,children:c.jsxs(Jn,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsx(or,{children:c.jsx(ar,{children:"Manage Participant Columns"})}),_&&c.jsxs(qs,{variant:"destructive",children:[c.jsx(Zo,{className:"h-4 w-4"}),c.jsx(Xs,{children:_})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"SYSTEM FIELDS"}),c.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"ID, Name, and Email are always visible. Toggle other fields to show/hide them in the participant table."}),c.jsx("div",{className:"border rounded-lg overflow-hidden",children:c.jsxs(oo,{children:[c.jsx(ao,{children:c.jsxs(mr,{children:[c.jsx(Nt,{children:"Field Name"}),c.jsx(Nt,{children:"Description"}),c.jsx(Nt,{className:"w-32 text-center",children:"Visibility"})]})}),c.jsx(lo,{children:$.map(Q=>c.jsxs(mr,{children:[c.jsx(_t,{className:"font-medium",children:Q.name}),c.jsx(_t,{className:"text-sm text-muted-foreground",children:Q.description}),c.jsx(_t,{className:"text-center",children:Q.alwaysVisible?c.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Always Visible"}):c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(Ko,{checked:p[Q.key],onCheckedChange:ue=>z(Q.key,ue)}),c.jsx("span",{className:"text-xs text-muted-foreground",children:p[Q.key]?"Visible":"Hidden"})]})})]},Q.name))})]})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"CUSTOM FIELDS"}),u.length===0?c.jsx("div",{className:"text-center py-8 border rounded-lg bg-muted/50",children:c.jsx("p",{className:"text-sm text-muted-foreground",children:"No custom fields yet. Add one below to get started."})}):c.jsx("div",{className:"border rounded-lg overflow-hidden",children:c.jsxs(oo,{children:[c.jsx(ao,{children:c.jsxs(mr,{children:[c.jsx(Nt,{className:"w-10"}),c.jsx(Nt,{children:"Label"}),c.jsx(Nt,{children:"Field Name"}),c.jsx(Nt,{children:"Type"}),c.jsx(Nt,{className:"w-20",children:"Required"}),c.jsx(Nt,{className:"w-24",children:"Actions"})]})}),c.jsx(lo,{children:u.map((Q,ue)=>c.jsxs(mr,{children:[c.jsx(_t,{children:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx(Ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>X(Q.id,"up"),disabled:ue===0,children:""}),c.jsx(Ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>X(Q.id,"down"),disabled:ue===u.length-1,children:""})]})}),c.jsx(_t,{className:"font-medium",children:Q.label}),c.jsx(_t,{className:"font-mono text-sm text-muted-foreground",children:Q.name}),c.jsx(_t,{children:c.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded capitalize",children:Q.type})}),c.jsx(_t,{children:Q.required?c.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Yes"}):c.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:"No"})}),c.jsx(_t,{children:c.jsxs("div",{className:"flex gap-1",children:[c.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>H(Q),className:"h-8 w-8 p-0 text-blue-600",title:"Edit field",children:c.jsx(Qa,{className:"h-4 w-4"})}),c.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>U(Q.id),className:"h-8 w-8 p-0 text-destructive",title:"Delete field",children:c.jsx(na,{className:"h-4 w-4"})})]})})]},Q.id))})]})})]}),c.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[c.jsx("h3",{className:"text-sm font-semibold mb-4",children:k?"Edit Custom Field":"Add New Custom Field"}),k&&c.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:c.jsxs("p",{className:"text-sm text-blue-800",children:["Editing field: ",c.jsx("span",{className:"font-semibold",children:k.label})]})}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx($e,{htmlFor:"field-label",children:"Field Label *"}),c.jsx(tt,{id:"field-label",placeholder:"e.g., Dietary Preferences",value:D.label,onChange:Q=>j({...D,label:Q.target.value})}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Display name shown to users"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"field-name",children:"Field Name *"}),c.jsx(tt,{id:"field-name",placeholder:"e.g., dietary_preferences",value:D.name,onChange:Q=>j({...D,name:Q.target.value}),disabled:!!k}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:k?"Cannot be changed":"Internal identifier (lowercase, no spaces)"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"field-type",children:"Field Type"}),c.jsxs(vi,{value:D.type,onValueChange:Q=>j({...D,type:Q}),children:[c.jsx(Ci,{id:"field-type",children:c.jsx(bi,{})}),c.jsxs(Ei,{children:[c.jsx(Jt,{value:"text",children:"Text"}),c.jsx(Jt,{value:"email",children:"Email"}),c.jsx(Jt,{value:"tel",children:"Phone"}),c.jsx(Jt,{value:"number",children:"Number"}),c.jsx(Jt,{value:"date",children:"Date"}),c.jsx(Jt,{value:"textarea",children:"Long Text"}),c.jsx(Jt,{value:"select",children:"Dropdown"})]})]})]}),D.type==="select"&&c.jsxs("div",{children:[c.jsx($e,{htmlFor:"field-options",children:"Options (comma-separated)"}),c.jsx(tt,{id:"field-options",placeholder:"Option 1, Option 2, Option 3",value:D.options,onChange:Q=>j({...D,options:Q.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ko,{id:"field-required",checked:D.required,onCheckedChange:Q=>j({...D,required:Q})}),c.jsx($e,{htmlFor:"field-required",className:"cursor-pointer",children:"Required field"})]})]}),c.jsx("div",{className:"flex gap-2 mt-4",children:k?c.jsxs(c.Fragment,{children:[c.jsx(Ne,{onClick:Y,size:"sm",disabled:b,className:"gradient-primary",children:b?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Qa,{className:"mr-2 h-4 w-4"}),"Update Field"]})}),c.jsx(Ne,{onClick:W,size:"sm",variant:"outline",disabled:b,children:"Cancel"})]}):c.jsx(Ne,{onClick:B,size:"sm",disabled:b,children:b?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):c.jsxs(c.Fragment,{children:[c.jsx(js,{className:"mr-2 h-4 w-4"}),"Add Field"]})})})]})]})]})})]})}function gT({eventId:r,accessToken:t}){const[n,o]=I.useState([]),[u,d]=I.useState([]),[p,w]=I.useState([]),[b,y]=I.useState({phone:!0,company:!0,position:!0,attendance:!0,registered:!0}),[_,A]=I.useState(!0),[k,R]=I.useState(""),[D,j]=I.useState(!1),[M,V]=I.useState(!1),[z,B]=I.useState(null),[U,H]=I.useState(!1),[Y,W]=I.useState(!1),[X,$]=I.useState(null),[Q,ue]=I.useState(new Date),ae=I.useRef(null),[te,fe]=I.useState(1),[ee,Ae]=I.useState(25),[_e,le]=I.useState("registeredAt"),[ce,he]=I.useState("desc"),[K,pe]=I.useState({id:130,name:180,email:220,phone:150,company:180,position:150,attendance:120,registered:130,emailStatus:150,actions:180}),[Be,Ve]=I.useState(null),[Ee,we]=I.useState(0),[Ce,Re]=I.useState(0),[qe,Ke]=I.useState(!1),[We,Ct]=I.useState(null),[nt,Wt]=I.useState(""),[Oe,rt]=I.useState([]),[J,Se]=I.useState(!1),Le=Math.ceil(u.length/ee),bt=(te-1)*ee,ke=bt+ee,Xt=u.slice(bt,ke),[lt,mt]=I.useState({name:"",email:"",phone:"",company:"",position:"",customData:{}}),Vn=async()=>{A(!0);try{console.log("[SUPABASE] Fetching participants from Supabase for event:",r);const{data:ie,error:Ie}=await Je.from("participants").select("*").eq("eventId",r);if(Ie)throw new Error(`Failed to fetch participants: ${Ie.message}`);console.log("[SUPABASE] Found participants:",ie?.length),console.log("[SUPABASE] Raw data:",ie);const je=(ie||[]).map(Ze=>({id:Ze.id,eventId:Ze.eventId,name:Ze.name,email:Ze.email,phone:Ze.phone,company:Ze.company,position:Ze.position,registeredAt:Ze.registeredAt,attendance:Ze.attendance||[],customData:Ze.customData||{}}));console.log("[SUPABASE] Converted participants:",je),o(je),d(je),ue(new Date)}catch(ie){console.error("[SUPABASE] Error fetching participants:",ie)}finally{A(!1)}},$t=async()=>{try{const{data:ie,error:Ie}=await Je.from("events").select("customFields, columnVisibility").eq("id",r).single();if(Ie){console.error("[SUPABASE] Error loading column settings:",Ie);return}ie?.customFields?w([...ie.customFields].sort((je,Ze)=>je.order-Ze.order)):w([]),ie?.columnVisibility&&y(ie.columnVisibility)}catch(ie){console.error("[SUPABASE] Error in loadColumnSettings:",ie)}};I.useEffect(()=>{Vn(),$t()},[r,t]),I.useEffect(()=>{console.log("[REALTIME] Setting up Supabase Realtime subscription for event:",r);const ie=Je.channel(`participants_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"participants",filter:`eventId=eq.${r}`},je=>{if(console.log("[REALTIME] Participant data changed:",je.eventType),je.eventType==="INSERT"){const Ze={id:je.new.id,eventId:je.new.eventId,name:je.new.name,email:je.new.email,phone:je.new.phone,company:je.new.company,position:je.new.position,registeredAt:je.new.registeredAt,attendance:je.new.attendance||[],customData:je.new.customData||{}};o(pt=>[...pt,Ze]),d(pt=>[...pt,Ze])}else if(je.eventType==="UPDATE"){const Ze={id:je.new.id,eventId:je.new.eventId,name:je.new.name,email:je.new.email,phone:je.new.phone,company:je.new.company,position:je.new.position,registeredAt:je.new.registeredAt,attendance:je.new.attendance||[],customData:je.new.customData||{}};o(pt=>pt.map(zt=>zt.id===Ze.id?Ze:zt)),d(pt=>pt.map(zt=>zt.id===Ze.id?Ze:zt))}else je.eventType==="DELETE"&&(o(Ze=>Ze.filter(pt=>pt.id!==je.old.id)),d(Ze=>Ze.filter(pt=>pt.id!==je.old.id)))}).subscribe(),Ie=Je.channel(`events_${r}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"events",filter:`id=eq.${r}`},je=>{if(console.log("[REALTIME] Event settings changed (columnVisibility or customFields)"),je.new.customFields){const Ze=[...je.new.customFields].sort((pt,zt)=>pt.order-zt.order);w(Ze)}je.new.columnVisibility&&(console.log("[REALTIME] Column visibility updated:",je.new.columnVisibility),y(je.new.columnVisibility))}).subscribe();return()=>{console.log("[REALTIME] Unsubscribing from Realtime"),Je.removeChannel(ie),Je.removeChannel(Ie)}},[r]),I.useEffect(()=>{let ie=n.filter(Ie=>Ie.name.toLowerCase().includes(k.toLowerCase())||Ie.email.toLowerCase().includes(k.toLowerCase())||Ie.company.toLowerCase().includes(k.toLowerCase())||Ie.id.toLowerCase().includes(k.toLowerCase()));ie=ie.sort((Ie,je)=>{let Ze,pt;if(_e==="registeredAt")Ze=new Date(Ie.registeredAt).getTime(),pt=new Date(je.registeredAt).getTime();else if(_e==="attendance")Ze=(Ie.attendance||[]).length,pt=(je.attendance||[]).length;else if(_e.startsWith("custom_")){const zt=_e.replace("custom_","");Ze=Ie.customData?.[zt]||"",pt=je.customData?.[zt]||""}else Ze=Ie[_e]||"",pt=je[_e]||"";return typeof Ze=="string"&&typeof pt=="string"&&(Ze=Ze.toLowerCase(),pt=pt.toLowerCase()),Ze<pt?ce==="asc"?-1:1:Ze>pt?ce==="asc"?1:-1:0}),d(ie),fe(1)},[k,n,_e,ce]);const Et=ie=>{_e===ie?he(ce==="asc"?"desc":"asc"):(le(ie),he("asc"))},It=({field:ie})=>_e!==ie?c.jsx(Jx,{className:"ml-1 h-3 w-3 text-gray-400"}):ce==="asc"?c.jsx(ew,{className:"ml-1 h-3 w-3 text-blue-600"}):c.jsx(Zx,{className:"ml-1 h-3 w-3 text-blue-600"}),sn=(ie,Ie)=>{Ie.preventDefault(),Ie.stopPropagation(),Ve(ie),we(Ie.clientX),Re(K[ie]||150)};I.useEffect(()=>{if(!Be)return;const ie=je=>{const Ze=je.clientX-Ee,pt=Math.max(80,Ce+Ze);pe(zt=>({...zt,[Be]:pt}))},Ie=()=>{Ve(null)};return document.addEventListener("mousemove",ie),document.addEventListener("mouseup",Ie),()=>{document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",Ie)}},[Be,Ee,Ce]);const Wn=({columnKey:ie})=>c.jsx("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:Ie=>sn(ie,Ie),style:{userSelect:"none"},children:c.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-transparent group-hover:bg-blue-500"})}),ns=async()=>{try{const{data:ie}=await Je.from("email_templates").select("*").eq("event_id",r).order("name");ie&&rt(ie)}catch(ie){console.error("Error loading email templates:",ie)}},dl=ie=>{Ct(ie),Wt(""),Ke(!0),Oe.length===0&&ns()},wn=async()=>{if(!We||!nt){alert("Please select a template");return}try{Se(!0);const ie=Oe.find(Gt=>Gt.id===nt);if(!ie)throw new Error("Template not found");const{data:Ie}=await Je.from("events").select("*").eq("id",r).single(),je=Gt=>Gt.replace(/\{\{name\}\}/g,We.name||"").replace(/\{\{email\}\}/g,We.email||"").replace(/\{\{phone\}\}/g,We.phone||"").replace(/\{\{company\}\}/g,We.company||"").replace(/\{\{position\}\}/g,We.position||"").replace(/\{\{event_name\}\}/g,Ie?.name||"").replace(/\{\{event_date\}\}/g,Ie?.startDate||"").replace(/\{\{participant_id\}\}/g,We.id||""),Ze=je(ie.subject),pt=je(ie.body);console.log("=== SENDING EMAIL ==="),console.log("To:",We.email),console.log("Subject:",Ze);const{data:zt,error:on}=await Je.functions.invoke("send-email",{body:{to:We.email,subject:Ze,html:pt,participantId:We.id,templateId:ie.id}});if(on){console.error(" Failed to send email:",on),await Je.rpc("update_participant_email_status",{p_participant_id:We.id,p_template_id:ie.id,p_template_name:ie.name,p_subject:Ze,p_status:"failed",p_error_message:on.message||"Failed to send email"}),alert(` Failed to send email to ${We.name}

Error: ${on.message}`);return}console.log(" Email sent successfully:",zt),await Je.rpc("update_participant_email_status",{p_participant_id:We.id,p_template_id:ie.id,p_template_name:ie.name,p_subject:Ze,p_status:"sent",p_error_message:null}),await Vn(),alert(` Email sent successfully to ${We.name}!`),Ke(!1),Ct(null),Wt("")}catch(ie){console.error("Error sending email:",ie),alert("Error sending email: "+ie.message)}finally{Se(!1)}},Ge=ie=>{const Ie=ie.email_status||"not_sent",je={not_sent:{label:"Not Sent",icon:ks,className:"bg-gray-100 text-gray-700 border-gray-300"},sent:{label:"Sent",icon:V0,className:"bg-green-100 text-green-700 border-green-300"},failed:{label:"Failed",icon:dE,className:"bg-red-100 text-red-700 border-red-300"},pending:{label:"Pending",icon:gd,className:"bg-yellow-100 text-yellow-700 border-yellow-300"}},{label:Ze,icon:pt,className:zt}=je[Ie];return c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs(Xo,{className:`${zt} border flex items-center gap-1 w-fit`,children:[c.jsx(pt,{className:"h-3 w-3"}),Ze]}),ie.last_email_sent_at&&c.jsx("span",{className:"text-xs text-gray-500",children:new Date(ie.last_email_sent_at).toLocaleDateString()}),ie.email_send_count&&ie.email_send_count>0&&c.jsxs("span",{className:"text-xs text-gray-500",children:[ie.email_send_count," sent"]})]})},Sn=async ie=>{ie.preventDefault(),H(!0);try{console.log("[SUPABASE] Adding participant:",lt);const je={id:`part_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,eventId:r,name:lt.name,email:lt.email,phone:lt.phone||"",company:lt.company||"",position:lt.position||"",registeredAt:new Date().toISOString(),attendance:[],customData:lt.customData||{}},{error:Ze}=await Je.from("participants").insert([je]);if(Ze)throw new Error(`Failed to add participant: ${Ze.message}`);console.log("[SUPABASE] Participant added successfully"),alert("Participant added successfully!"),mt({name:"",email:"",phone:"",company:"",position:"",customData:{}}),j(!1),await Vn()}catch(Ie){console.error("[SUPABASE] Error adding participant:",Ie),alert(Ie.message||"Failed to add participant")}finally{H(!1)}},Kt=async ie=>{const Ie=ie.target.files?.[0];if(Ie){W(!0);try{const Ze=(await Ie.text()).split(`
`).filter(Gt=>Gt.trim());if(Ze.length<2)throw new Error("CSV file is empty or invalid");const pt=Ze[0].split(",").map(Gt=>Gt.trim().replace(/"/g,"").toLowerCase()),zt=[];for(let Gt=1;Gt<Ze.length;Gt++){const Ur=Ze[Gt].split(",").map(zr=>zr.trim().replace(/"/g,"")),Tn={id:`part_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,eventId:r,registeredAt:new Date().toISOString(),attendance:[],customData:{}};pt.forEach((zr,hn)=>{zr==="name"?Tn.name=Ur[hn]:zr==="email"?Tn.email=Ur[hn]:zr==="phone"?Tn.phone=Ur[hn]:zr==="company"?Tn.company=Ur[hn]:zr==="position"&&(Tn.position=Ur[hn])}),Tn.name&&Tn.email&&zt.push(Tn)}if(zt.length===0)throw new Error("No valid participants found in CSV");console.log("[SUPABASE] Bulk importing participants:",zt.length);const{error:on}=await Je.from("participants").insert(zt);if(on)throw new Error(`Failed to import participants: ${on.message}`);alert(`Successfully imported ${zt.length} participants.`),await Vn()}catch(je){console.error("[SUPABASE] Error importing CSV:",je),alert(je.message||"Failed to import CSV")}finally{W(!1),ae.current&&(ae.current.value="")}}},ln=ie=>{B(ie),mt({name:ie.name,email:ie.email,phone:ie.phone,company:ie.company,position:ie.position,customData:ie.customData||{}}),$(null),V(!0)},ps=async ie=>{if(ie.preventDefault(),!!z){H(!0),$(null);try{console.log("[SUPABASE] Updating participant:",z.id);const{error:Ie}=await Je.from("participants").update({name:lt.name,email:lt.email,phone:lt.phone,company:lt.company,position:lt.position,customData:lt.customData}).eq("id",z.id);if(Ie)throw new Error(`Failed to update participant: ${Ie.message}`);V(!1),B(null),await Vn(),mt({name:"",email:"",phone:"",company:"",position:"",customData:{}})}catch(Ie){console.error("[SUPABASE] Error updating participant:",Ie),$(Ie.message||"Failed to update participant")}finally{H(!1)}}},ei=async ie=>{if(confirm("Are you sure you want to delete this participant?"))try{console.log("[SUPABASE] Deleting participant:",ie);const{error:Ie}=await Je.from("participants").delete().eq("id",ie);if(Ie)throw new Error(`Failed to delete participant: ${Ie.message}`);await Vn()}catch(Ie){console.error("[SUPABASE] Error deleting participant:",Ie),alert("Failed to delete participant")}},Ai=()=>{const ie=["ID","Name","Email","Phone","Company","Position"];p.forEach(on=>ie.push(on.label)),ie.push("Attendance Count","Registered At");const Ie=n.map(on=>{const Gt=[on.id,on.name,on.email,on.phone||"",on.company||"",on.position||""];return p.forEach(Ur=>{Gt.push(on.customData?.[Ur.id]||"")}),Gt.push((on.attendance||[]).length.toString()),Gt.push(new Date(on.registeredAt).toLocaleString()),Gt}),je=[ie.join(","),...Ie.map(on=>on.map(Gt=>`"${Gt}"`).join(","))].join(`
`),Ze=new Blob([je],{type:"text/csv"}),pt=window.URL.createObjectURL(Ze),zt=document.createElement("a");zt.href=pt,zt.download=`participants-${new Date().toISOString().split("T")[0]}.csv`,zt.click(),window.URL.revokeObjectURL(pt)},Lt=()=>{const ie=`Name,Email,Phone,Company,Position
"John Doe","john@example.com","+1234567890","Acme Inc","Manager"`,Ie=new Blob([ie],{type:"text/csv"}),je=window.URL.createObjectURL(Ie),Ze=document.createElement("a");Ze.href=je,Ze.download="participant-template.csv",Ze.click(),window.URL.revokeObjectURL(je)},xr=()=>{const ie=`${window.location.origin}${window.location.pathname}?register=${r}`;navigator.clipboard.writeText(ie).then(()=>{alert("Registration URL copied to clipboard!")}).catch(()=>{alert("Failed to copy URL")})};return _?c.jsx("div",{className:"flex items-center justify-center p-8",children:c.jsx(Nr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.jsxs(c.Fragment,{children:[c.jsxs(ir,{className:"border-0 shadow-xl bg-white",style:{position:"relative",zIndex:0},children:[c.jsx(Br,{className:"border-b border-gray-100 bg-gradient-to-r from-purple-50 to-pink-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs(Fr,{className:"flex items-center gap-3 text-2xl",children:[c.jsx("div",{className:"w-10 h-10 gradient-primary rounded-xl flex items-center justify-center shadow-md shadow-purple-500/30",children:c.jsx(Ja,{className:"h-5 w-5 text-white"})}),"Participants Management"]}),c.jsxs(Yo,{className:"flex items-center gap-3 mt-2 text-base",children:[c.jsxs("span",{className:"bg-white px-3 py-1 rounded-full border border-purple-200",children:["Total: ",c.jsx("span",{className:"font-semibold text-purple-700",children:n.length})]}),c.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[c.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Auto-sync  Updated ",Q.toLocaleTimeString()]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(Ne,{onClick:xr,variant:"outline",size:"sm",className:"border-purple-300 hover:border-purple-500 hover:bg-purple-50",children:[c.jsx(AE,{className:"mr-2 h-4 w-4"}),"Copy Registration URL"]}),c.jsx(fT,{eventId:r,onFieldsUpdated:$t}),c.jsx("input",{type:"file",ref:ae,accept:".csv",onChange:Kt,className:"hidden"}),c.jsx(Ne,{onClick:()=>ae.current?.click(),variant:"outline",size:"sm",disabled:Y,className:"border-gray-300 hover:border-gray-400",children:Y?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):c.jsxs(c.Fragment,{children:[c.jsx(ic,{className:"mr-2 h-4 w-4"}),"Import CSV"]})}),c.jsxs(Ne,{onClick:Ai,variant:"outline",size:"sm",className:"border-gray-300 hover:border-gray-400",children:[c.jsx(wE,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),c.jsxs(Qn,{open:D,onOpenChange:j,children:[c.jsx($y,{asChild:!0,children:c.jsxs(Ne,{className:"gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:[c.jsx(js,{className:"mr-2 h-4 w-4"}),"Add Participant"]})}),c.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] flex flex-col",children:[c.jsxs(or,{children:[c.jsx(ar,{children:"Add Participant Manually"}),c.jsx(yi,{children:"Enter participant details to add them to the event"})]}),c.jsxs("form",{onSubmit:Sn,className:"space-y-4 overflow-y-auto pr-2 flex-1",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"add-name",children:"Full Name *"}),c.jsx(tt,{id:"add-name",placeholder:"John Doe",value:lt.name,onChange:ie=>mt(Ie=>({...Ie,name:ie.target.value})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"add-email",children:"Email *"}),c.jsx(tt,{id:"add-email",type:"email",placeholder:"john@example.com",value:lt.email,onChange:ie=>mt(Ie=>({...Ie,email:ie.target.value})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"add-phone",children:"Phone"}),c.jsx(tt,{id:"add-phone",placeholder:"+1 (555) 000-0000",value:lt.phone,onChange:ie=>mt(Ie=>({...Ie,phone:ie.target.value}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"add-company",children:"Company"}),c.jsx(tt,{id:"add-company",placeholder:"Acme Inc.",value:lt.company,onChange:ie=>mt(Ie=>({...Ie,company:ie.target.value}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"add-position",children:"Position"}),c.jsx(tt,{id:"add-position",placeholder:"Software Engineer",value:lt.position,onChange:ie=>mt(Ie=>({...Ie,position:ie.target.value}))})]}),p.length>0&&c.jsxs("div",{className:"border-t pt-4 space-y-4",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Additional Fields"}),p.map(ie=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs($e,{htmlFor:`add-custom-${ie.name}`,children:[ie.label," ",ie.required&&"*"]}),ie.type==="textarea"?c.jsx("textarea",{id:`add-custom-${ie.name}`,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:`Enter ${ie.label.toLowerCase()}`,value:lt.customData?.[ie.name]||"",onChange:Ie=>mt(je=>({...je,customData:{...je.customData,[ie.name]:Ie.target.value}})),required:ie.required}):ie.type==="select"&&ie.options?c.jsxs("select",{id:`add-custom-${ie.name}`,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:lt.customData?.[ie.name]||"",onChange:Ie=>mt(je=>({...je,customData:{...je.customData,[ie.name]:Ie.target.value}})),required:ie.required,children:[c.jsxs("option",{value:"",children:["Select ",ie.label.toLowerCase()]}),ie.options.map(Ie=>c.jsx("option",{value:Ie,children:Ie},Ie))]}):ie.type==="date"?c.jsx(tt,{id:`add-custom-${ie.name}`,type:"date",value:lt.customData?.[ie.name]||"",onChange:Ie=>mt(je=>({...je,customData:{...je.customData,[ie.name]:Ie.target.value}})),required:ie.required,className:"w-full"}):c.jsx(tt,{id:`add-custom-${ie.name}`,type:ie.type,placeholder:`Enter ${ie.label.toLowerCase()}`,value:lt.customData?.[ie.name]||"",onChange:Ie=>mt(je=>({...je,customData:{...je.customData,[ie.name]:Ie.target.value}})),required:ie.required})]},ie.id))]}),c.jsx(Ne,{type:"submit",className:"w-full",disabled:U,children:U?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):"Add Participant"})]})]})]}),c.jsx(Qn,{open:M,onOpenChange:V,children:c.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] flex flex-col",children:[c.jsxs(or,{children:[c.jsx(ar,{children:"Edit Participant"}),c.jsx(yi,{children:"Update participant details"})]}),X&&c.jsx(qs,{variant:"destructive",children:c.jsx(Xs,{children:X})}),c.jsxs("form",{onSubmit:ps,className:"space-y-4 overflow-y-auto pr-2 flex-1",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"edit-name",children:"Full Name *"}),c.jsx(tt,{id:"edit-name",placeholder:"John Doe",value:lt.name,onChange:ie=>mt(Ie=>({...Ie,name:ie.target.value})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"edit-email",children:"Email *"}),c.jsx(tt,{id:"edit-email",type:"email",placeholder:"john@example.com",value:lt.email,onChange:ie=>mt(Ie=>({...Ie,email:ie.target.value})),required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"edit-phone",children:"Phone"}),c.jsx(tt,{id:"edit-phone",type:"tel",placeholder:"+1234567890",value:lt.phone,onChange:ie=>mt(Ie=>({...Ie,phone:ie.target.value}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"edit-company",children:"Company"}),c.jsx(tt,{id:"edit-company",placeholder:"Acme Corp",value:lt.company,onChange:ie=>mt(Ie=>({...Ie,company:ie.target.value}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"edit-position",children:"Position"}),c.jsx(tt,{id:"edit-position",placeholder:"Manager",value:lt.position,onChange:ie=>mt(Ie=>({...Ie,position:ie.target.value}))})]})]}),p.length>0&&c.jsxs("div",{className:"border-t pt-4 space-y-4",children:[c.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Additional Fields"}),p.map(ie=>c.jsxs("div",{className:"space-y-2",children:[c.jsxs($e,{htmlFor:`edit-custom-${ie.name}`,children:[ie.label,ie.required&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.type==="textarea"?c.jsx("textarea",{id:`edit-custom-${ie.name}`,placeholder:`Enter ${ie.label.toLowerCase()}`,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:lt.customData?.[ie.name]||"",onChange:Ie=>mt(je=>({...je,customData:{...je.customData,[ie.name]:Ie.target.value}})),required:ie.required}):ie.type==="select"&&ie.options?c.jsxs("select",{id:`edit-custom-${ie.name}`,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:lt.customData?.[ie.name]||"",onChange:Ie=>mt(je=>({...je,customData:{...je.customData,[ie.name]:Ie.target.value}})),required:ie.required,children:[c.jsxs("option",{value:"",children:["Select ",ie.label.toLowerCase()]}),ie.options.map(Ie=>c.jsx("option",{value:Ie,children:Ie},Ie))]}):ie.type==="date"?c.jsx(tt,{id:`edit-custom-${ie.name}`,type:"date",value:lt.customData?.[ie.name]||"",onChange:Ie=>mt(je=>({...je,customData:{...je.customData,[ie.name]:Ie.target.value}})),required:ie.required,className:"w-full"}):c.jsx(tt,{id:`edit-custom-${ie.name}`,type:ie.type,placeholder:`Enter ${ie.label.toLowerCase()}`,value:lt.customData?.[ie.name]||"",onChange:Ie=>mt(je=>({...je,customData:{...je.customData,[ie.name]:Ie.target.value}})),required:ie.required})]},ie.id))]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(Ne,{type:"submit",className:"flex-1 gradient-primary hover:opacity-90",disabled:U,children:U?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"}),c.jsx(Ne,{type:"button",variant:"outline",onClick:()=>V(!1),disabled:U,children:"Cancel"})]})]})]})})]})]})}),c.jsxs(gr,{className:"pt-6",children:[c.jsxs("div",{className:"mb-6 flex gap-3",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx($0,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx(tt,{placeholder:"Search by name, email, company, or ID...",value:k,onChange:ie=>R(ie.target.value),className:"pl-12 h-12 bg-gray-50 border-gray-200 focus:bg-white focus:border-purple-300 transition-colors"})]}),c.jsx(Ne,{onClick:Lt,variant:"outline",size:"sm",className:"border-gray-300 hover:border-gray-400",children:"Download Template"})]}),c.jsx("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden",style:{position:"relative",zIndex:0},children:c.jsx("div",{className:"overflow-x-auto",style:{position:"relative"},children:c.jsxs(oo,{children:[c.jsx(ao,{children:c.jsxs(mr,{children:[c.jsxs(Nt,{className:"relative",style:{width:`${K.id}px`,minWidth:`${K.id}px`},children:[c.jsxs("button",{onClick:()=>Et("id"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["ID",c.jsx(It,{field:"id"})]}),c.jsx(Wn,{columnKey:"id"})]}),c.jsxs(Nt,{className:"relative",style:{width:`${K.name}px`,minWidth:`${K.name}px`},children:[c.jsxs("button",{onClick:()=>Et("name"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Name",c.jsx(It,{field:"name"})]}),c.jsx(Wn,{columnKey:"name"})]}),c.jsxs(Nt,{className:"relative",style:{width:`${K.email}px`,minWidth:`${K.email}px`},children:[c.jsxs("button",{onClick:()=>Et("email"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Email",c.jsx(It,{field:"email"})]}),c.jsx(Wn,{columnKey:"email"})]}),b.phone&&c.jsxs(Nt,{className:"relative",style:{width:`${K.phone}px`,minWidth:`${K.phone}px`},children:[c.jsxs("button",{onClick:()=>Et("phone"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Phone",c.jsx(It,{field:"phone"})]}),c.jsx(Wn,{columnKey:"phone"})]}),b.company&&c.jsxs(Nt,{className:"relative",style:{width:`${K.company}px`,minWidth:`${K.company}px`},children:[c.jsxs("button",{onClick:()=>Et("company"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Company",c.jsx(It,{field:"company"})]}),c.jsx(Wn,{columnKey:"company"})]}),b.position&&c.jsxs(Nt,{className:"relative",style:{width:`${K.position}px`,minWidth:`${K.position}px`},children:[c.jsxs("button",{onClick:()=>Et("position"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Position",c.jsx(It,{field:"position"})]}),c.jsx(Wn,{columnKey:"position"})]}),p.map(ie=>{const Ie=`custom_${ie.name}`,je=K[Ie]||150;return c.jsxs(Nt,{className:"relative",style:{width:`${je}px`,minWidth:`${je}px`},children:[c.jsxs("button",{onClick:()=>Et(Ie),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:[ie.label,c.jsx(It,{field:Ie})]}),c.jsx(Wn,{columnKey:Ie})]},ie.id)}),b.attendance&&c.jsxs(Nt,{className:"relative",style:{width:`${K.attendance}px`,minWidth:`${K.attendance}px`},children:[c.jsxs("button",{onClick:()=>Et("attendance"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Attendance",c.jsx(It,{field:"attendance"})]}),c.jsx(Wn,{columnKey:"attendance"})]}),b.registered&&c.jsxs(Nt,{className:"relative",style:{width:`${K.registered}px`,minWidth:`${K.registered}px`},children:[c.jsxs("button",{onClick:()=>Et("registeredAt"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Registered",c.jsx(It,{field:"registeredAt"})]}),c.jsx(Wn,{columnKey:"registered"})]}),c.jsxs(Nt,{className:"relative",style:{width:`${K.emailStatus||150}px`,minWidth:`${K.emailStatus||150}px`},children:[c.jsxs("button",{onClick:()=>Et("email_status"),className:"flex items-center gap-1 font-semibold hover:text-purple-600 transition-colors w-full",children:["Email Status",c.jsx(It,{field:"email_status"})]}),c.jsx(Wn,{columnKey:"emailStatus"})]}),c.jsx(Nt,{className:"text-right sticky right-0 bg-gray-50 z-10",style:{width:`${K.actions}px`,minWidth:`${K.actions}px`},children:"Actions"})]})}),c.jsx(lo,{children:Xt.length===0?c.jsx(mr,{children:c.jsx(_t,{colSpan:3+(b.phone?1:0)+(b.company?1:0)+(b.position?1:0)+p.length+(b.attendance?1:0)+(b.registered?1:0)+1,className:"text-center text-muted-foreground",children:u.length===0?"No participants found":"No results on this page"})}):Xt.map(ie=>c.jsxs(mr,{children:[c.jsxs(_t,{className:"font-mono text-xs truncate",title:ie.id,style:{width:`${K.id}px`,maxWidth:`${K.id}px`},children:[ie.id.substring(5,15),"..."]}),c.jsx(_t,{className:"font-medium truncate",style:{width:`${K.name}px`,maxWidth:`${K.name}px`},children:ie.name}),c.jsx(_t,{className:"text-sm truncate",style:{width:`${K.email}px`,maxWidth:`${K.email}px`},children:ie.email}),b.phone&&c.jsx(_t,{className:"truncate",style:{width:`${K.phone}px`,maxWidth:`${K.phone}px`},children:ie.phone||"-"}),b.company&&c.jsx(_t,{className:"truncate",style:{width:`${K.company}px`,maxWidth:`${K.company}px`},children:ie.company||"-"}),b.position&&c.jsx(_t,{className:"truncate",style:{width:`${K.position}px`,maxWidth:`${K.position}px`},children:ie.position||"-"}),p.map(Ie=>{const je=`custom_${Ie.name}`,Ze=K[je]||150;return c.jsx(_t,{className:"truncate",style:{width:`${Ze}px`,maxWidth:`${Ze}px`},children:ie.customData?.[Ie.name]||"-"},Ie.id)}),b.attendance&&c.jsx(_t,{style:{width:`${K.attendance}px`,maxWidth:`${K.attendance}px`},children:c.jsxs(Xo,{variant:"secondary",children:[(ie.attendance||[]).length," sessions"]})}),b.registered&&c.jsx(_t,{className:"text-sm text-muted-foreground truncate",style:{width:`${K.registered}px`,maxWidth:`${K.registered}px`},children:new Date(ie.registeredAt).toLocaleDateString()}),c.jsx(_t,{style:{width:`${K.emailStatus}px`,maxWidth:`${K.emailStatus}px`},children:Ge(ie)}),c.jsx(_t,{className:"text-right sticky right-0 bg-white border-l z-10",style:{width:`${K.actions}px`,maxWidth:`${K.actions}px`},children:c.jsxs("div",{className:"flex gap-1 justify-end",children:[c.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>dl(ie),title:"Send email",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:c.jsx(ks,{className:"h-4 w-4"})}),c.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>ln(ie),title:"Edit participant",children:c.jsx(Qa,{className:"h-4 w-4 text-blue-600"})}),c.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>ei(ie.id),title:"Delete participant",children:c.jsx(na,{className:"h-4 w-4 text-destructive"})})]})})]},ie.id))})]})})}),u.length>0&&c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t bg-gray-50",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",bt+1," to ",Math.min(ke,u.length)," of ",u.length," participants"]})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows per page:"}),c.jsxs("select",{value:ee,onChange:ie=>{Ae(Number(ie.target.value)),fe(1)},className:"h-8 rounded-md border border-input bg-background px-3 text-sm",children:[c.jsx("option",{value:10,children:"10"}),c.jsx("option",{value:25,children:"25"}),c.jsx("option",{value:50,children:"50"}),c.jsx("option",{value:100,children:"100"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>fe(1),disabled:te===1,children:"First"}),c.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>fe(ie=>Math.max(1,ie-1)),disabled:te===1,children:"Previous"}),c.jsxs("span",{className:"text-sm text-muted-foreground px-3",children:["Page ",te," of ",Le]}),c.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>fe(ie=>Math.min(Le,ie+1)),disabled:te===Le,children:"Next"}),c.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>fe(Le),disabled:te===Le,children:"Last"})]})]})]})]})]}),c.jsx(Qn,{open:qe,onOpenChange:Ke,children:c.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs(or,{children:[c.jsx(ar,{children:"Send Email to Participant"}),c.jsxs(yi,{children:["Send a personalized email to ",We?.name]})]}),J?c.jsxs("div",{className:"py-8 text-center",children:[c.jsx(Nr,{className:"h-12 w-12 animate-spin mx-auto text-purple-600"}),c.jsx("p",{className:"mt-4 text-gray-700",children:"Sending email..."})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"To:"}),c.jsx("span",{className:"text-sm text-gray-900 ml-2",children:We?.name})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Email:"}),c.jsx("span",{className:"text-sm text-gray-900 ml-2",children:We?.email})]}),We?.email_send_count&&We?.email_send_count>0&&c.jsxs("div",{className:"text-sm text-gray-600",children:[" ",We?.email_send_count," email(s) previously sent"]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{children:"Select Email Template"}),c.jsx("div",{className:"relative",children:c.jsxs(vi,{value:nt,onValueChange:Wt,children:[c.jsx(Ci,{className:"w-full overflow-hidden",children:c.jsx(bi,{placeholder:"Choose a template...",children:nt&&Oe.length>0&&c.jsx("span",{className:"truncate block",children:Oe.find(ie=>ie.id===nt)?.name||"Selected template"})})}),c.jsx(Ei,{className:"max-w-[600px]",children:Oe.length===0?c.jsx(Jt,{value:"none",disabled:!0,children:"No templates available"}):Oe.map(ie=>c.jsx(Jt,{value:ie.id,children:ie.name},ie.id))})]})}),Oe.length===0&&c.jsx("p",{className:"text-xs text-gray-600",children:"Create email templates in the Email Templates tab first"})]}),nt&&c.jsx(qs,{className:"border-blue-200 bg-blue-50",children:c.jsx(Xs,{className:"text-sm text-blue-900",children:" Placeholders like {{name}}, {{email}}, {{company}} will be replaced with participant data"})}),c.jsx(qs,{className:"border-amber-200 bg-amber-50",children:c.jsxs(Xs,{className:"text-sm text-amber-900",children:[" ",c.jsx("strong",{children:"Simulation Mode:"})," Email preview will be shown in console. Configure email service (SendGrid/AWS SES) to actually send emails."]})}),c.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[c.jsx(Ne,{onClick:()=>{Ke(!1),Ct(null),Wt("")},variant:"outline",children:"Cancel"}),c.jsxs(Ne,{onClick:wn,className:"gradient-primary",disabled:!nt||Oe.length===0,children:[c.jsx(Za,{className:"mr-2 h-4 w-4"}),"Send Email"]})]})]})]})})]})}function ho({className:r,...t}){return c.jsx("textarea",{"data-slot":"textarea",className:Ot("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}function mT({eventId:r,accessToken:t}){const[n,o]=I.useState([]),[u,d]=I.useState([]),[p,w]=I.useState(!0),[b,y]=I.useState(!1),[_,A]=I.useState(!1),[k,R]=I.useState(null),[D,j]=I.useState(null),[M,V]=I.useState(null),[z,B]=I.useState(new Date),[U,H]=I.useState({right:0}),Y=I.useRef(null),W=I.useRef({}),[X,$]=I.useState({title:"",description:"",startTime:"",endTime:"",location:""});I.useEffect(()=>{const ce=he=>{Y.current&&!Y.current.contains(he.target)&&V(null)};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]);const Q=I.useCallback(ce=>{const he=ce.getBoundingClientRect(),K=window.innerHeight,pe=window.innerWidth,Be=K-he.bottom,Ve=he.top,Ee=150,we={right:pe-he.right};Be<Ee&&Ve>Be?we.bottom=K-he.top+4:we.top=he.bottom+4,H(we)},[]),ue=async()=>{w(!0);try{console.log("[SUPABASE] Fetching agenda from Supabase for event:",r);const{data:ce,error:he}=await Je.from("agenda_items").select("*").eq("eventId",r).order("startTime",{ascending:!0});if(he)throw new Error(`Failed to fetch agenda: ${he.message}`);console.log("[SUPABASE] Found agenda items:",ce?.length);const K=(ce||[]).map((pe,Be)=>({...pe,order:Be}));o(K)}catch(ce){console.error("[SUPABASE] Error fetching agenda:",ce)}finally{w(!1)}},ae=async()=>{try{console.log("[SUPABASE] Fetching participants from Supabase for event:",r);const{data:ce,error:he}=await Je.from("participants").select("*").eq("eventId",r);if(he)throw new Error(`Failed to fetch participants: ${he.message}`);console.log("[SUPABASE] Found participants:",ce?.length),d(ce||[]),B(new Date)}catch(ce){console.error("[SUPABASE] Error fetching participants:",ce)}};I.useEffect(()=>{ue(),ae()},[r,t]),I.useEffect(()=>{const ce=pe=>{console.log("[AGENDA AUTO-REFRESH] Storage event detected:",pe.key),pe.key==="event_participants"&&(console.log("[AGENDA AUTO-REFRESH] Participant data changed, refreshing..."),ae()),pe.key==="event_agenda"&&(console.log("[AGENDA AUTO-REFRESH] Agenda data changed, refreshing..."),ue())},he=pe=>{console.log("[AGENDA AUTO-REFRESH] Custom participantsUpdated event detected:",pe.detail),ae()};window.addEventListener("storage",ce),window.addEventListener("participantsUpdated",he);const K=setInterval(()=>{console.log("[AGENDA AUTO-REFRESH] Polling for participant updates..."),ae()},3e3);return()=>{window.removeEventListener("storage",ce),window.removeEventListener("participantsUpdated",he),clearInterval(K)}},[r]);const te=async ce=>{ce.preventDefault(),A(!0);try{if(console.log("[SUPABASE] Saving agenda item:",X),D){const{error:he}=await Je.from("agenda_items").update({title:X.title,description:X.description,startTime:X.startTime,endTime:X.endTime,location:X.location}).eq("id",D.id);if(he)throw new Error(`Failed to update agenda item: ${he.message}`);console.log("[SUPABASE] Agenda item updated successfully")}else{const K={id:`agenda_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,eventId:r,title:X.title,description:X.description,startTime:X.startTime,endTime:X.endTime,location:X.location,createdAt:new Date().toISOString()},{error:pe}=await Je.from("agenda_items").insert([K]);if(pe)throw new Error(`Failed to create agenda item: ${pe.message}`);console.log("[SUPABASE] Agenda item created successfully")}alert(D?"Agenda item updated successfully!":"Agenda item created successfully!"),$({title:"",description:"",startTime:"",endTime:"",location:""}),j(null),y(!1),await ue()}catch(he){console.error("[SUPABASE] Error saving agenda item:",he),alert(he.message||(D?"Failed to update agenda item":"Failed to create agenda item"))}finally{A(!1)}},fe=ce=>{j(ce),$({title:ce.title,description:ce.description,startTime:ce.startTime,endTime:ce.endTime,location:ce.location}),y(!0)},ee=ce=>{y(ce),ce||(j(null),$({title:"",description:"",startTime:"",endTime:"",location:""}))},Ae=async ce=>{if(confirm("Are you sure you want to delete this agenda item?"))try{console.log("[SUPABASE] Deleting agenda item:",ce);const{error:he}=await Je.from("agenda_items").delete().eq("id",ce);if(he)throw new Error(`Failed to delete agenda item: ${he.message}`);alert("Agenda item deleted successfully"),await ue()}catch(he){console.error("[SUPABASE] Error deleting agenda item:",he),alert(he.message||"Failed to delete agenda item")}},_e=ce=>ce?new Date(ce).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",le=ce=>u.filter(he=>he.attendance&&he.attendance.some(K=>K.agendaItem===ce));return p?c.jsx("div",{className:"flex items-center justify-center p-8",children:c.jsx(Nr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.jsxs(ir,{className:"border-0 shadow-xl bg-white",children:[c.jsx(Br,{className:"border-b border-gray-100 bg-gradient-to-r from-purple-50 to-pink-50",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs(Fr,{className:"flex items-center gap-3 text-2xl",children:[c.jsx("div",{className:"w-10 h-10 gradient-primary rounded-xl flex items-center justify-center shadow-md shadow-purple-500/30",children:c.jsx(sc,{className:"h-5 w-5 text-white"})}),"Event Agenda"]}),c.jsxs(Yo,{className:"flex items-center gap-3 mt-2 text-base",children:[c.jsx("span",{children:"Manage event schedule and sessions"}),c.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[c.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Auto-sync  Updated ",z.toLocaleTimeString()]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ne,{variant:"outline",className:"border-gray-300 hover:border-gray-400",size:"sm",onClick:()=>{ue(),ae()},children:[c.jsx(Ju,{className:"mr-2 h-4 w-4"}),"Refresh"]}),c.jsxs(Qn,{open:b,onOpenChange:ee,children:[c.jsx($y,{asChild:!0,children:c.jsxs(Ne,{className:"gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:[c.jsx(js,{className:"mr-2 h-4 w-4"}),"Add Session"]})}),c.jsxs(Jn,{children:[c.jsxs(or,{children:[c.jsx(ar,{children:D?"Edit Agenda Item":"Create Agenda Item"}),c.jsx(yi,{children:D?"Update the session details":"Add a new session or activity to the event schedule"})]}),c.jsxs("form",{onSubmit:te,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"title",children:"Session Title *"}),c.jsx(tt,{id:"title",placeholder:"Opening Ceremony",value:X.title,onChange:ce=>$(he=>({...he,title:ce.target.value})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"description",children:"Description"}),c.jsx(ho,{id:"description",placeholder:"Describe the session...",value:X.description,onChange:ce=>$(he=>({...he,description:ce.target.value})),rows:3})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"startTime",children:"Start Time *"}),c.jsx(tt,{id:"startTime",type:"datetime-local",value:X.startTime,onChange:ce=>$(he=>({...he,startTime:ce.target.value})),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"endTime",children:"End Time"}),c.jsx(tt,{id:"endTime",type:"datetime-local",value:X.endTime,onChange:ce=>$(he=>({...he,endTime:ce.target.value}))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"location",children:"Location"}),c.jsx(tt,{id:"location",placeholder:"Main Hall",value:X.location,onChange:ce=>$(he=>({...he,location:ce.target.value}))})]}),c.jsx(Ne,{type:"submit",className:"w-full",disabled:_,children:_?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),D?"Updating...":"Creating..."]}):D?"Update Session":"Create Session"})]})]})]})]})]})}),c.jsxs(gr,{className:"overflow-visible",children:[n.length===0?c.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[c.jsx(sc,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No agenda items yet"}),c.jsx("p",{className:"text-sm",children:'Click "Add Session" to create the event schedule'})]}):c.jsx("div",{className:"rounded-md border overflow-visible",children:c.jsxs(oo,{children:[c.jsx(ao,{children:c.jsxs(mr,{children:[c.jsx(Nt,{children:"Session"}),c.jsx(Nt,{children:"Start Time"}),c.jsx(Nt,{children:"End Time"}),c.jsx(Nt,{children:"Location"}),c.jsx(Nt,{className:"text-right",children:"Actions"})]})}),c.jsx(lo,{children:n.sort((ce,he)=>new Date(ce.startTime).getTime()-new Date(he.startTime).getTime()).map(ce=>c.jsxs(mr,{children:[c.jsx(_t,{children:c.jsxs("div",{children:[c.jsx("div",{children:ce.title}),ce.description&&c.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:ce.description})]})}),c.jsx(_t,{children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(gd,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm",children:_e(ce.startTime)})]})}),c.jsx(_t,{children:c.jsx("span",{className:"text-sm",children:_e(ce.endTime)})}),c.jsx(_t,{children:ce.location?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(W0,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("span",{className:"text-sm",children:ce.location})]}):c.jsx("span",{className:"text-muted-foreground",children:"-"})}),c.jsx(_t,{className:"text-right",children:c.jsxs("div",{className:"flex gap-1 justify-end items-center",children:[c.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>R(ce.title),title:"View Participants",children:c.jsx(Ja,{className:"h-4 w-4"})}),c.jsx("div",{className:"relative",children:c.jsx(Ne,{ref:he=>{he&&(W.current[ce.id]=he)},variant:"ghost",size:"sm",title:"More options",onClick:he=>{const K=M!==ce.id;V(K?ce.id:null),K&&he.currentTarget&&Q(he.currentTarget)},children:c.jsx(vE,{className:"h-4 w-4"})})})]})})]},ce.id))})]})}),M&&c.jsx("div",{ref:Y,className:"fixed w-48 bg-popover border rounded-md shadow-xl p-1",style:{top:U.top,bottom:U.bottom,right:U.right,zIndex:9999,maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:n.find(ce=>ce.id===M)&&(()=>{const ce=n.find(he=>he.id===M);return c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{const he=`${window.location.origin}${window.location.pathname}?checkin=${ce.id}`;window.open(he,"_blank"),V(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-accent hover:text-accent-foreground outline-none cursor-pointer text-left",children:[c.jsx(kE,{className:"h-4 w-4"}),"Open Check-In Page"]}),c.jsxs("button",{onClick:()=>{fe(ce),V(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-accent hover:text-accent-foreground outline-none cursor-pointer text-left",children:[c.jsx(Qa,{className:"h-4 w-4"}),"Modify"]}),c.jsxs("button",{onClick:()=>{Ae(ce.id),V(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-destructive/10 text-destructive outline-none cursor-pointer text-left",children:[c.jsx(na,{className:"h-4 w-4"}),"Delete"]})]})})()}),c.jsx(Qn,{open:!!k,onOpenChange:ce=>!ce&&R(null),children:c.jsxs(Jn,{className:"max-w-2xl",children:[c.jsxs(or,{children:[c.jsxs(ar,{children:["Participants for: ",k]}),c.jsxs(yi,{children:[k&&le(k).length," attendees"]})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:k&&le(k).length===0?c.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[c.jsx(Ja,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),c.jsx("p",{children:"No participants yet for this session"})]}):c.jsxs(oo,{children:[c.jsx(ao,{children:c.jsxs(mr,{children:[c.jsx(Nt,{children:"Name"}),c.jsx(Nt,{children:"Email"}),c.jsx(Nt,{children:"Company"}),c.jsx(Nt,{children:"Position"}),c.jsx(Nt,{children:"Check-in Time"})]})}),c.jsx(lo,{children:k&&le(k).map(ce=>{const he=ce.attendance.find(K=>K.agendaItem===k);return c.jsxs(mr,{children:[c.jsx(_t,{children:ce.name}),c.jsx(_t,{children:ce.email}),c.jsx(_t,{children:ce.company||"-"}),c.jsx(_t,{children:ce.position||"-"}),c.jsx(_t,{className:"text-sm text-muted-foreground",children:he&&new Date(he.timestamp).toLocaleTimeString()})]},ce.id)})})]})})]})})]})]})}const j0={getAllEvents:()=>(console.warn("[STUB] getAllEvents - Not implemented, returning empty array"),[]),getEventById:r=>(console.warn("[STUB] getEventById - Not implemented"),null),getSelectedEventId:()=>(console.warn("[STUB] getSelectedEventId - Not implemented"),null),getAllParticipants:r=>(console.warn("[STUB] getAllParticipants - Not implemented"),[]),getParticipantsByEvent:r=>(console.warn("[STUB] getParticipantsByEvent - Not implemented"),[]),getParticipantById:r=>(console.warn("[STUB] getParticipantById - Not implemented"),null),saveParticipant:r=>{console.warn("[STUB] saveParticipant - Not implemented")},deleteParticipant:r=>{console.warn("[STUB] deleteParticipant - Not implemented")},generateParticipantId:()=>(console.warn("[STUB] generateParticipantId - Returning random ID"),"P_"+Math.random().toString(36).substr(2,9)),bulkImportParticipants:(r,t)=>(console.warn("[STUB] bulkImportParticipants - Not implemented"),{success:0,failed:r.length}),recordAttendance:(r,t)=>{console.warn("[STUB] recordAttendance - Not implemented")},getAllAgenda:r=>(console.warn("[STUB] getAllAgenda - Not implemented"),[]),getAgendaByEvent:r=>(console.warn("[STUB] getAgendaByEvent - Not implemented"),[]),saveAgendaItem:r=>{console.warn("[STUB] saveAgendaItem - Not implemented")},updateAgendaItem:(r,t)=>{console.warn("[STUB] updateAgendaItem - Not implemented")},deleteAgendaItem:r=>{console.warn("[STUB] deleteAgendaItem - Not implemented")},generateAgendaId:()=>(console.warn("[STUB] generateAgendaId - Returning random ID"),"A_"+Math.random().toString(36).substr(2,9)),addCustomField:(r,t)=>{console.warn("[STUB] addCustomField - Not implemented")},deleteCustomField:(r,t)=>{console.warn("[STUB] deleteCustomField - Not implemented")},reorderCustomFields:(r,t)=>{console.warn("[STUB] reorderCustomFields - Not implemented")},generateCustomFieldId:()=>(console.warn("[STUB] generateCustomFieldId - Returning random ID"),"CF_"+Math.random().toString(36).substr(2,9)),getColumnVisibility:r=>(console.warn("[STUB] getColumnVisibility - Returning defaults"),{phone:!0,company:!0,position:!0,attendance:!0,registered:!0}),updateColumnVisibility:(r,t)=>{console.warn("[STUB] updateColumnVisibility - Not implemented")},getBrandingSettings:r=>(console.warn("[STUB] getBrandingSettings - Returning defaults"),{logoSize:"medium",logoAlignment:"left",primaryColor:"#7C3AED",backgroundColor:"#FFFFFF",fontFamily:"sans-serif"}),updateBrandingSettings:(r,t)=>{console.warn("[STUB] updateBrandingSettings - Not implemented")},getBadgeSettings:r=>(console.warn("[STUB] getBadgeSettings - Returning defaults"),{showQR:!0,showAttendance:!0,backgroundColor:"#FFFFFF",textColor:"#000000",accentColor:"#7C3AED"}),updateBadgeSettings:(r,t)=>{console.warn("[STUB] updateBadgeSettings - Not implemented")}};function pT({eventId:r,onUpdated:t}){const[n,o]=I.useState({logoAlignment:"center",logoSize:"medium",primaryColor:"#000000",backgroundColor:"#ffffff",fontFamily:"sans-serif"}),[u,d]=I.useState(!1),[p,w]=I.useState(!1),b=I.useRef(null);I.useEffect(()=>{y()},[r]);const y=()=>{const D=j0.getBrandingSettings(r);o(D)},_=D=>{const j=D.target.files?.[0];if(!j)return;if(!j.type.startsWith("image/")){alert("Please upload an image file (PNG, JPG, etc.)");return}if(j.size>2*1024*1024){alert("Image size should be less than 2MB");return}const M=new FileReader;M.onload=V=>{const z=V.target?.result;o(B=>({...B,logoUrl:z}))},M.readAsDataURL(j)},A=()=>{o(D=>({...D,logoUrl:void 0})),b.current&&(b.current.value="")},k=()=>{d(!0);try{j0.updateBrandingSettings(r,n),alert("Branding settings saved successfully!"),t?.()}catch(D){console.error("Error saving branding:",D),alert("Failed to save branding settings")}finally{d(!1)}},R=()=>`${window.location.origin}${window.location.pathname}#/register/${r}`;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ir,{children:[c.jsx(Br,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs(Fr,{className:"flex items-center gap-2",children:[c.jsx(iw,{className:"h-5 w-5"}),"Registration Page Branding"]}),c.jsx(Yo,{children:"Customize the look and feel of your public registration form"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ne,{variant:"outline",size:"sm",onClick:()=>{const D=new URL(window.location.href);D.searchParams.set("designer",r),D.searchParams.set("from","admin=event"),window.location.href=D.toString()},children:[c.jsx(aS,{className:"mr-2 h-4 w-4"}),"Design Badge"]}),c.jsxs(Ne,{variant:"outline",size:"sm",onClick:()=>w(!p),children:[c.jsx(nw,{className:"mr-2 h-4 w-4"}),p?"Hide Preview":"Show Preview"]}),c.jsxs(Ne,{size:"sm",onClick:k,disabled:u,children:[c.jsx(aw,{className:"mr-2 h-4 w-4"}),u?"Saving...":"Save Changes"]})]})]})}),c.jsxs(gr,{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx($e,{children:"Event Logo"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:_,className:"hidden",id:"logo-upload"}),c.jsxs(Ne,{variant:"outline",onClick:()=>b.current?.click(),className:"w-full",children:[c.jsx(ic,{className:"mr-2 h-4 w-4"}),n.logoUrl?"Change Logo":"Upload Logo"]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"PNG, JPG up to 2MB. Recommended size: 400x150px"})]}),n.logoUrl&&c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:n.logoUrl,alt:"Logo preview",className:"h-20 w-auto object-contain border rounded"}),c.jsx(Ne,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6",onClick:A,children:c.jsx(oc,{className:"h-3 w-3"})})]})]})]}),n.logoUrl&&c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{children:"Logo Size"}),c.jsxs(vi,{value:n.logoSize,onValueChange:D=>o(j=>({...j,logoSize:D})),children:[c.jsx(Ci,{children:c.jsx(bi,{})}),c.jsxs(Ei,{children:[c.jsx(Jt,{value:"small",children:"Small"}),c.jsx(Jt,{value:"medium",children:"Medium"}),c.jsx(Jt,{value:"large",children:"Large"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{children:"Logo Alignment"}),c.jsxs(vi,{value:n.logoAlignment,onValueChange:D=>o(j=>({...j,logoAlignment:D})),children:[c.jsx(Ci,{children:c.jsx(bi,{})}),c.jsxs(Ei,{children:[c.jsx(Jt,{value:"left",children:"Left"}),c.jsx(Jt,{value:"center",children:"Center"}),c.jsx(Jt,{value:"right",children:"Right"})]})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"customHeader",children:"Custom Header Text"}),c.jsx(ho,{id:"customHeader",placeholder:"e.g., 'Join us for the 2025 Annual Summit'",value:n.customHeader||"",onChange:D=>o(j=>({...j,customHeader:D.target.value})),rows:2}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional tagline displayed below the logo"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"primaryColor",children:"Primary Color"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(tt,{id:"primaryColor",type:"color",value:n.primaryColor,onChange:D=>o(j=>({...j,primaryColor:D.target.value})),className:"w-20 h-10 p-1 cursor-pointer"}),c.jsx(tt,{type:"text",value:n.primaryColor,onChange:D=>o(j=>({...j,primaryColor:D.target.value})),placeholder:"#000000",className:"flex-1"})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for buttons and accents"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"backgroundColor",children:"Background Color"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(tt,{id:"backgroundColor",type:"color",value:n.backgroundColor,onChange:D=>o(j=>({...j,backgroundColor:D.target.value})),className:"w-20 h-10 p-1 cursor-pointer"}),c.jsx(tt,{type:"text",value:n.backgroundColor,onChange:D=>o(j=>({...j,backgroundColor:D.target.value})),placeholder:"#ffffff",className:"flex-1"})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Page background color"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{children:"Font Family"}),c.jsxs(vi,{value:n.fontFamily,onValueChange:D=>o(j=>({...j,fontFamily:D})),children:[c.jsx(Ci,{children:c.jsx(bi,{})}),c.jsxs(Ei,{children:[c.jsx(Jt,{value:"sans-serif",children:"Sans-Serif (Default)"}),c.jsx(Jt,{value:"serif",children:"Serif"}),c.jsx(Jt,{value:"monospace",children:"Monospace"})]})]})]}),c.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[c.jsx($e,{children:"Registration URL"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(tt,{value:R(),readOnly:!0,className:"flex-1"}),c.jsx(Ne,{variant:"outline",onClick:()=>{navigator.clipboard.writeText(R()),alert("Registration URL copied to clipboard!")},children:"Copy"})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Share this URL for public registration with your custom branding"})]})]})]}),p&&c.jsxs(ir,{children:[c.jsxs(Br,{children:[c.jsx(Fr,{children:"Live Preview"}),c.jsx(Yo,{children:"This is how your registration form will appear to participants"})]}),c.jsx(gr,{children:c.jsx("div",{className:"border-2 rounded-lg p-8",style:{backgroundColor:n.backgroundColor},children:c.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[n.logoUrl&&c.jsx("div",{className:`flex ${n.logoAlignment==="left"?"justify-start":n.logoAlignment==="right"?"justify-end":"justify-center"}`,children:c.jsx("img",{src:n.logoUrl,alt:"Logo",className:`object-contain ${n.logoSize==="small"?"h-12":n.logoSize==="large"?"h-24":"h-16"}`})}),n.customHeader&&c.jsx("p",{className:"text-center text-lg",style:{color:n.primaryColor},children:n.customHeader}),c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl mb-2",children:"Event Name"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Sample event information"})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg border space-y-4",children:[c.jsx(tt,{placeholder:"Full Name *",disabled:!0}),c.jsx(tt,{placeholder:"Email Address *",disabled:!0}),c.jsx(Ne,{className:"w-full",disabled:!0,style:{backgroundColor:n.primaryColor,borderColor:n.primaryColor},children:"Complete Registration"})]})]})})})]})]})}function xT({eventId:r}){const[t,n]=I.useState([]),[o,u]=I.useState(!1),[d,p]=I.useState(!1),[w,b]=I.useState(null),[y,_]=I.useState(!1),[A,k]=I.useState("visual"),[R,D]=I.useState(!1),[j,M]=I.useState(!1),[V,z]=I.useState(null),[B,U]=I.useState(!1),[H,Y]=I.useState({sent:0,total:0,failed:0}),[W,X]=I.useState(!1),[$,Q]=I.useState(null),[ue,ae]=I.useState(""),[te,fe]=I.useState({name:"",subject:"",body:"",type:"registration_confirmation",attachments:[],include_qr_code:!1});I.useEffect(()=>{ee()},[r]);const ee=async()=>{try{const{data:J,error:Se}=await Je.from("email_templates").select("*").eq("event_id",r).order("created_at",{ascending:!1});Se?console.error("Error loading email templates:",Se):n(J||[])}catch(J){console.error("Error loading email templates:",J)}},Ae=async J=>{const Se=J.target.files?.[0];if(Se){if(Se.size>5*1024*1024){alert("File size must be less than 5MB");return}try{D(!0);const Le=Se.name.split(".").pop(),bt=`${r}/${Date.now()}_${Math.random().toString(36).substring(7)}.${Le}`,{error:ke}=await Je.storage.from("email-attachments").upload(bt,Se,{cacheControl:"3600",upsert:!1});if(ke){console.error("Error uploading file:",ke),ke.message.includes("Bucket not found")||ke.message.includes("not found")?alert(` Storage bucket "email-attachments" belum dibuat!

Silakan:
1. Buka Supabase Dashboard > Storage
2. Create bucket: "email-attachments"
3. Centang "Public bucket"
4. Refresh page ini`):ke.message.includes("row-level security")||ke.message.includes("policy")?alert(` Storage bucket policy belum di-set!

Silakan:
1. Buka Supabase Dashboard > Storage > email-attachments
2. Go to Policies tab
3. Disable RLS atau tambah policy untuk INSERT
4. Refresh page ini`):alert("Failed to upload file: "+ke.message);return}const{data:{publicUrl:Xt}}=Je.storage.from("email-attachments").getPublicUrl(bt);fe({...te,attachments:[...te.attachments,Xt]})}catch(Le){console.error("Error uploading file:",Le),alert("Failed to upload file")}finally{D(!1),J.target.value=""}}},_e=J=>{fe({...te,attachments:te.attachments.filter(Se=>Se!==J)})},le=J=>{const Se=J.split("/");return Se[Se.length-1].split("_").slice(1).join("_")},ce=()=>{fe({name:"",subject:"",body:"",type:"registration_confirmation",attachments:[],include_qr_code:!1}),u(!0)},he=J=>{b(J),fe({name:J.name,subject:J.subject,body:J.body,type:J.type,attachments:J.attachments||[],include_qr_code:J.include_qr_code||!1}),p(!0)},K=J=>{fe({name:`${J.name} (Copy)`,subject:J.subject,body:J.body,type:J.type,attachments:J.attachments||[],include_qr_code:J.include_qr_code||!1}),u(!0)},pe=async()=>{if(!te.name||!te.subject||!te.body){alert("Please fill in all fields");return}_(!0);try{const{error:J}=await Je.from("email_templates").insert([{event_id:r,name:te.name,subject:te.subject,body:te.body,type:te.type,attachments:te.attachments.length>0?te.attachments:null,include_qr_code:te.include_qr_code}]);J?(console.error("Error creating template:",J),alert("Error creating template")):(u(!1),ee())}catch(J){console.error("Error creating template:",J),alert("Error creating template")}finally{_(!1)}},Be=async()=>{if(!w||!te.name||!te.subject||!te.body){alert("Please fill in all fields");return}_(!0);try{const{error:J}=await Je.from("email_templates").update({name:te.name,subject:te.subject,body:te.body,type:te.type,attachments:te.attachments.length>0?te.attachments:null,include_qr_code:te.include_qr_code,updated_at:new Date().toISOString()}).eq("id",w.id);J?(console.error("Error updating template:",J),alert("Error updating template")):(p(!1),b(null),ee())}catch(J){console.error("Error updating template:",J),alert("Error updating template")}finally{_(!1)}},Ve=async J=>{if(confirm("Are you sure you want to delete this template?"))try{const{error:Se}=await Je.from("email_templates").delete().eq("id",J);Se?(console.error("Error deleting template:",Se),alert("Error deleting template")):ee()}catch(Se){console.error("Error deleting template:",Se),alert("Error deleting template")}},Ee=(J,Se,Le)=>J.replace(/\{\{name\}\}/g,Se.name||"").replace(/\{\{email\}\}/g,Se.email||"").replace(/\{\{phone\}\}/g,Se.phone||"").replace(/\{\{company\}\}/g,Se.company||"").replace(/\{\{position\}\}/g,Se.position||"").replace(/\{\{event_name\}\}/g,Le.name||"").replace(/\{\{event_date\}\}/g,Le.startDate||"").replace(/\{\{participant_id\}\}/g,Se.id||""),we=async()=>{if(V)try{U(!0);const{data:J}=await Je.from("events").select("*").eq("id",r).single(),{data:Se,error:Le}=await Je.from("participants").select("*").eq("eventId",r);if(Le||!Se)throw new Error("Failed to load participants");Y({sent:0,total:Se.length,failed:0}),console.log("=== STARTING EMAIL BLAST ==="),console.log("Template:",V.name),console.log("Recipients:",Se.length),console.log("Subject:",V.subject);let bt=0,ke=0;for(let Xt=0;Xt<Se.length;Xt++){const lt=Se[Xt];try{const mt=Ee(V.subject,lt,J),Vn=Ee(V.body,lt,J);console.log(` Sending ${Xt+1}/${Se.length} to: ${lt.email}`);const{data:$t,error:Et}=await Je.functions.invoke("send-email",{body:{to:lt.email,subject:mt,html:Vn,participantId:lt.id,templateId:V.id}});Et?(console.error(` Failed to send to ${lt.email}:`,Et),ke++,await Je.rpc("update_participant_email_status",{p_participant_id:lt.id,p_template_id:V.id,p_template_name:V.name,p_subject:mt,p_status:"failed",p_error_message:Et.message||"Failed to send"})):(console.log(` Sent to ${lt.email}`),bt++,await Je.rpc("update_participant_email_status",{p_participant_id:lt.id,p_template_id:V.id,p_template_name:V.name,p_subject:mt,p_status:"sent",p_error_message:null})),Y({sent:bt,total:Se.length,failed:ke}),await new Promise(It=>setTimeout(It,100))}catch(mt){console.error("Error sending to:",lt.email,mt),ke++,Y({sent:bt,total:Se.length,failed:ke})}}console.log(`
=== EMAIL BLAST COMPLETE ===`),console.log(`Total: ${Se.length}`),console.log(`Sent: ${bt}`),console.log(`Failed: ${ke}`),alert(` Email blast complete!

Sent: ${bt}
Failed: ${ke}
Total: ${Se.length}`),M(!1),z(null)}catch(J){console.error("Error sending emails:",J),alert("Error sending emails: "+J.message)}finally{U(!1)}},Ce=J=>{Q(J),ae(""),X(!0)},Re=async()=>{if(!$||!ue){alert("Please enter a test email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ue)){alert("Please enter a valid email address");return}try{U(!0);const{data:Se}=await Je.from("events").select("*").eq("id",r).single(),Le={id:"SAMPLE-ID-12345",name:"John Doe",email:ue,phone:"+62 812-3456-7890",company:"Sample Company",position:"Sample Position"},bt=Ee($.subject,Le,Se),ke=Ee($.body,Le,Se);console.log("=== TEST EMAIL PREVIEW ==="),console.log("To:",ue),console.log("Subject:",bt);const{data:Xt,error:lt}=await Je.functions.invoke("send-email",{body:{to:ue,subject:bt,html:ke,participantId:Le.id,templateId:$.id}});if(lt){console.error(" Failed to send test email:",lt),alert(` Failed to send test email

Error: ${lt.message}`);return}console.log(" Test email sent successfully:",Xt),alert(` Test email sent to ${ue}!

Check your inbox.`),X(!1),Q(null),ae("")}catch(Se){console.error("Error sending test email:",Se),alert("Error sending test email: "+Se.message)}finally{U(!1)}},qe=(J,Se)=>{const Le=Se.selectionStart,bt=Se.selectionEnd,ke=te.body,Xt=ke.substring(0,Le)+J+ke.substring(bt);fe({...te,body:Xt}),setTimeout(()=>{Se.focus(),Se.setSelectionRange(Le+J.length,Le+J.length)},0)},Ke=(J,Se,Le)=>{const bt=Le.selectionStart,ke=Le.selectionEnd,Xt=te.body.substring(bt,ke),lt=te.body;if(Xt){const mt=lt.substring(0,bt)+J+Xt+Se+lt.substring(ke);fe({...te,body:mt}),setTimeout(()=>{Le.focus(),Le.setSelectionRange(bt+J.length,bt+J.length+Xt.length)},0)}else{const mt=lt.substring(0,bt)+J+Se+lt.substring(ke);fe({...te,body:mt}),setTimeout(()=>{Le.focus(),Le.setSelectionRange(bt+J.length,bt+J.length)},0)}},We=J=>{if(A==="visual"&&J?.isContentEditable){document.execCommand("bold",!1);const Se=J.innerHTML;fe({...te,body:Se})}else{const Se=document.getElementById("body-html");Se&&Ke("<strong>","</strong>",Se)}},Ct=J=>{if(A==="visual"&&J?.isContentEditable){document.execCommand("italic",!1);const Se=J.innerHTML;fe({...te,body:Se})}else{const Se=document.getElementById("body-html");Se&&Ke("<em>","</em>",Se)}},nt=J=>{const Se=prompt("Enter URL:");if(Se)if(A==="visual"&&J?.isContentEditable){document.execCommand("createLink",!1,Se);const Le=J.innerHTML;fe({...te,body:Le})}else{const Le=document.getElementById("body-html");Le&&Ke(`<a href="${Se}">`,"</a>",Le)}},Wt=(J,Se)=>{const Le=`{{${J}}}`;if(A==="visual"&&Se?.isContentEditable){document.execCommand("insertText",!1,Le);const bt=Se.innerHTML;fe({...te,body:bt})}else{const bt=document.getElementById("body-html");bt&&qe(Le,bt)}},Oe=J=>{switch(J){case"registration_confirmation":return"Registration Confirmation";case"reminder":return"Reminder";case"custom":return"Custom";default:return J}},rt=J=>{switch(J){case"registration_confirmation":return"bg-green-100 text-green-800 border-green-300";case"reminder":return"bg-blue-100 text-blue-800 border-blue-300";case"custom":return"bg-purple-100 text-purple-800 border-purple-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:c.jsx(ks,{className:"h-6 w-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Email Templates"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage email templates for participant communication"})]})]}),c.jsxs(Ne,{onClick:ce,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg",children:[c.jsx(js,{className:"mr-2 h-4 w-4"}),"Create Template"]})]}),t.length===0?c.jsx(ir,{className:"border-dashed border-2",children:c.jsxs(gr,{className:"flex flex-col items-center justify-center py-12",children:[c.jsx(ks,{className:"h-12 w-12 text-gray-400 mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No email templates yet"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4 text-center max-w-md",children:"Create your first email template to start communicating with participants"}),c.jsxs(Ne,{onClick:ce,variant:"outline",children:[c.jsx(js,{className:"mr-2 h-4 w-4"}),"Create First Template"]})]})}):c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(J=>c.jsxs(ir,{className:"hover:shadow-lg transition-shadow",children:[c.jsx(Br,{className:"pb-3",children:c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsx(Fr,{className:"text-lg",children:J.name}),c.jsx(Yo,{className:"mt-1",children:c.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-medium border ${rt(J.type)}`,children:Oe(J.type)})})]})})}),c.jsxs(gr,{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Subject:"}),c.jsx("div",{className:"text-sm text-gray-900",children:J.subject})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Body Preview:"}),c.jsx("div",{className:"text-sm text-gray-600 line-clamp-3 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:J.body}})]}),J.attachments&&J.attachments.length>0&&c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-900",children:[c.jsx(uf,{className:"h-3 w-3"}),c.jsxs("span",{className:"font-medium",children:[J.attachments.length," Attachment",J.attachments.length>1?"s":""]})]}),c.jsxs("div",{className:"mt-1 space-y-1",children:[J.attachments.slice(0,2).map((Se,Le)=>c.jsxs("div",{className:"text-xs text-blue-700 truncate",children:[" ",le(Se)]},Le)),J.attachments.length>2&&c.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["+",J.attachments.length-2," more"]})]})]}),J.include_qr_code&&c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-900",children:[c.jsx("span",{className:"text-base",children:""}),c.jsx("span",{className:"font-medium",children:"QR Code Enabled"})]}),c.jsx("div",{className:"mt-1 text-xs text-purple-700",children:"Participant QR codes will be attached"})]}),c.jsx("div",{className:"pt-2 space-y-2",children:c.jsxs(Ne,{onClick:()=>Ce(J),variant:"outline",className:"w-full border-blue-300 text-blue-700 hover:bg-blue-50",size:"sm",children:[c.jsx(ks,{className:"mr-2 h-3 w-3"}),"Send Test Email"]})}),c.jsxs("div",{className:"flex gap-2 border-t pt-2",children:[c.jsxs(Ne,{onClick:()=>he(J),variant:"outline",size:"sm",className:"flex-1",children:[c.jsx(Qa,{className:"mr-1 h-3 w-3"}),"Edit"]}),c.jsxs(Ne,{onClick:()=>K(J),variant:"outline",size:"sm",className:"flex-1",children:[c.jsx(pE,{className:"mr-1 h-3 w-3"}),"Duplicate"]}),c.jsx(Ne,{onClick:()=>Ve(J.id),variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50 hover:text-red-700",children:c.jsx(na,{className:"h-3 w-3"})})]})]})]},J.id))}),c.jsx(Qn,{open:o,onOpenChange:u,children:c.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsx(or,{children:c.jsx(ar,{children:"Create Email Template"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx($e,{htmlFor:"name",children:"Template Name *"}),c.jsx(tt,{id:"name",value:te.name,onChange:J=>fe({...te,name:J.target.value}),placeholder:"e.g., Registration Confirmation"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"type",children:"Template Type *"}),c.jsxs(vi,{value:te.type,onValueChange:J=>fe({...te,type:J}),children:[c.jsx(Ci,{children:c.jsx(bi,{})}),c.jsxs(Ei,{children:[c.jsx(Jt,{value:"registration_confirmation",children:"Registration Confirmation"}),c.jsx(Jt,{value:"reminder",children:"Reminder"}),c.jsx(Jt,{value:"custom",children:"Custom"})]})]})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"subject",children:"Email Subject *"}),c.jsx(tt,{id:"subject",value:te.subject,onChange:J=>fe({...te,subject:J.target.value}),placeholder:"e.g., Welcome to {{event_name}}!"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"body",children:"Email Body *"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-gray-50 border rounded-lg flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const J=document.getElementById("body");We(J)},className:"h-8 w-8 p-0",title:"Bold",children:c.jsx(s0,{className:"h-4 w-4"})}),c.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const J=document.getElementById("body");Ct(J)},className:"h-8 w-8 p-0",title:"Italic",children:c.jsx(i0,{className:"h-4 w-4"})}),c.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const J=document.getElementById("body");nt(J)},className:"h-8 w-8 p-0",title:"Insert Link",children:c.jsx(Fm,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300"}),c.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Insert:"}),c.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{const J=document.getElementById("body");Wt("name",J)},className:"h-7 text-xs",children:"Name"}),c.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{const J=document.getElementById("body");Wt("email",J)},className:"h-7 text-xs",children:"Email"}),c.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{const J=document.getElementById("body");Wt("event_name",J)},className:"h-7 text-xs",children:"Event Name"}),c.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{const J=document.getElementById("body");Wt("company",J)},className:"h-7 text-xs",children:"Company"})]}),c.jsxs(v0,{value:A,onValueChange:J=>k(J),className:"w-full",children:[c.jsxs(b0,{className:"grid w-full grid-cols-2 mb-2",children:[c.jsx(xi,{value:"visual",children:"Visual"}),c.jsx(xi,{value:"html",children:"HTML"})]}),c.jsx(wi,{value:"visual",className:"mt-0",children:c.jsx("div",{id:"body",contentEditable:!0,suppressContentEditableWarning:!0,onInput:J=>{const Se=J.currentTarget.innerHTML;fe({...te,body:Se})},dangerouslySetInnerHTML:{__html:te.body||"<p>Dear {{name}},</p><p><br></p><p>Thank you for registering for {{event_name}}!</p><p><br></p><p>Use the toolbar above to format text.</p><p><br></p><p>Best regards,<br>Event Team</p>"},className:"min-h-[350px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 font-sans overflow-y-auto",style:{whiteSpace:"pre-wrap"}})}),c.jsx(wi,{value:"html",className:"mt-0",children:c.jsx(ho,{id:"body-html",value:te.body,onChange:J=>fe({...te,body:J.target.value}),placeholder:`<p>Dear {{name}},</p>
<p>Thank you for registering for {{event_name}}!</p>`,rows:14,className:"font-mono text-xs w-full max-w-full break-all resize-none"})})]})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"attachments",children:"Attachments (Optional)"}),c.jsxs("div",{className:"mt-2 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:Ae,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"}),c.jsxs(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("file-upload")?.click(),disabled:R,children:[c.jsx(ic,{className:"h-4 w-4 mr-2"}),R?"Uploading...":"Upload File"]}),c.jsx("span",{className:"text-xs text-gray-500",children:"Max 5MB (PDF, DOC, XLS, Images)"})]}),te.attachments.length>0&&c.jsx("div",{className:"border rounded-lg p-3 space-y-2",children:te.attachments.map((J,Se)=>c.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsx(uf,{className:"h-4 w-4 text-gray-500 flex-shrink-0"}),c.jsx("span",{className:"text-sm text-gray-700 truncate",children:le(J)})]}),c.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>_e(J),className:"h-7 w-7 p-0 flex-shrink-0",children:c.jsx(oc,{className:"h-4 w-4"})})]},Se))})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-blue-900 mb-2",children:"Available Placeholders:"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-blue-800",children:[c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{name}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{email}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_name}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_date}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_location}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{company}}"})]})]}),c.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg",children:[c.jsx(Ko,{id:"include-qr-create",checked:te.include_qr_code,onCheckedChange:J=>fe({...te,include_qr_code:J})}),c.jsxs("div",{className:"flex-1",children:[c.jsx($e,{htmlFor:"include-qr-create",className:"text-sm font-medium text-purple-900 cursor-pointer",children:" Include Participant QR Code"}),c.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Each participant will receive their unique QR code as an attachment"})]})]})]}),c.jsxs(ro,{children:[c.jsx(Ne,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),c.jsx(Ne,{onClick:pe,disabled:y,children:y?"Creating...":"Create Template"})]})]})}),c.jsx(Qn,{open:d,onOpenChange:p,children:c.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsx(or,{children:c.jsx(ar,{children:"Edit Email Template"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-name",children:"Template Name *"}),c.jsx(tt,{id:"edit-name",value:te.name,onChange:J=>fe({...te,name:J.target.value}),placeholder:"e.g., Registration Confirmation"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-type",children:"Template Type *"}),c.jsxs(vi,{value:te.type,onValueChange:J=>fe({...te,type:J}),children:[c.jsx(Ci,{children:c.jsx(bi,{})}),c.jsxs(Ei,{children:[c.jsx(Jt,{value:"registration_confirmation",children:"Registration Confirmation"}),c.jsx(Jt,{value:"reminder",children:"Reminder"}),c.jsx(Jt,{value:"custom",children:"Custom"})]})]})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-subject",children:"Email Subject *"}),c.jsx(tt,{id:"edit-subject",value:te.subject,onChange:J=>fe({...te,subject:J.target.value}),placeholder:"e.g., Welcome to {{event_name}}!"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-body",children:"Email Body *"}),c.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-gray-50 border rounded-lg flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const J=document.getElementById("edit-body");We(J)},className:"h-8 w-8 p-0",title:"Bold",children:c.jsx(s0,{className:"h-4 w-4"})}),c.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const J=document.getElementById("edit-body");Ct(J)},className:"h-8 w-8 p-0",title:"Italic",children:c.jsx(i0,{className:"h-4 w-4"})}),c.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const J=document.getElementById("edit-body");nt(J)},className:"h-8 w-8 p-0",title:"Insert Link",children:c.jsx(Fm,{className:"h-4 w-4"})})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300"}),c.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Insert:"}),c.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{const J=document.getElementById("edit-body");Wt("name",J)},className:"h-7 text-xs",children:"Name"}),c.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{const J=document.getElementById("edit-body");Wt("email",J)},className:"h-7 text-xs",children:"Email"}),c.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{const J=document.getElementById("edit-body");Wt("event_name",J)},className:"h-7 text-xs",children:"Event Name"}),c.jsx(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>{const J=document.getElementById("edit-body");Wt("company",J)},className:"h-7 text-xs",children:"Company"})]}),c.jsxs(v0,{value:A,onValueChange:J=>k(J),className:"w-full",children:[c.jsxs(b0,{className:"grid w-full grid-cols-2 mb-2",children:[c.jsx(xi,{value:"visual",children:"Visual"}),c.jsx(xi,{value:"html",children:"HTML"})]}),c.jsx(wi,{value:"visual",className:"mt-0",children:c.jsx("div",{id:"edit-body",contentEditable:!0,suppressContentEditableWarning:!0,onInput:J=>{const Se=J.currentTarget.innerHTML;fe({...te,body:Se})},dangerouslySetInnerHTML:{__html:te.body||"<p>Dear {{name}}...</p>"},className:"min-h-[350px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 font-sans overflow-y-auto",style:{whiteSpace:"pre-wrap"}})}),c.jsx(wi,{value:"html",className:"mt-0",children:c.jsx(ho,{id:"edit-body-html",value:te.body,onChange:J=>fe({...te,body:J.target.value}),placeholder:"<p>Dear {{name}},</p>",rows:14,className:"font-mono text-xs w-full max-w-full break-all resize-none"})})]})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-attachments",children:"Attachments (Optional)"}),c.jsxs("div",{className:"mt-2 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"file",id:"edit-file-upload",className:"hidden",onChange:Ae,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"}),c.jsxs(Ne,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("edit-file-upload")?.click(),disabled:R,children:[c.jsx(ic,{className:"h-4 w-4 mr-2"}),R?"Uploading...":"Upload File"]}),c.jsx("span",{className:"text-xs text-gray-500",children:"Max 5MB (PDF, DOC, XLS, Images)"})]}),te.attachments.length>0&&c.jsx("div",{className:"border rounded-lg p-3 space-y-2",children:te.attachments.map((J,Se)=>c.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsx(uf,{className:"h-4 w-4 text-gray-500 flex-shrink-0"}),c.jsx("span",{className:"text-sm text-gray-700 truncate",children:le(J)})]}),c.jsx(Ne,{type:"button",variant:"ghost",size:"sm",onClick:()=>_e(J),className:"h-7 w-7 p-0 flex-shrink-0",children:c.jsx(oc,{className:"h-4 w-4"})})]},Se))})]})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsx("div",{className:"text-xs font-semibold text-blue-900 mb-2",children:"Available Placeholders:"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-blue-800",children:[c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{name}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{email}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_name}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_date}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_location}}"}),c.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{company}}"})]})]}),c.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg",children:[c.jsx(Ko,{id:"include-qr-edit",checked:te.include_qr_code,onCheckedChange:J=>fe({...te,include_qr_code:J})}),c.jsxs("div",{className:"flex-1",children:[c.jsx($e,{htmlFor:"include-qr-edit",className:"text-sm font-medium text-purple-900 cursor-pointer",children:" Include Participant QR Code"}),c.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Each participant will receive their unique QR code as an attachment"})]})]})]}),c.jsxs(ro,{children:[c.jsx(Ne,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),c.jsx(Ne,{onClick:Be,disabled:y,children:y?"Saving...":"Save Changes"})]})]})}),c.jsx(Qn,{open:j,onOpenChange:M,children:c.jsxs(Jn,{className:"max-w-lg",children:[c.jsx(or,{children:c.jsx(ar,{children:"Send Email Blast"})}),B?c.jsx("div",{className:"py-8",children:c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx(Nr,{className:"h-12 w-12 animate-spin mx-auto text-purple-600"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-lg font-semibold",children:"Sending emails..."}),c.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[H.sent," of ",H.total," sent",H.failed>0&&c.jsxs("span",{className:"text-red-600 ml-2",children:["(",H.failed," failed)"]})]}),c.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${H.sent/H.total*100}%`}})})]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs(qs,{className:"border-blue-200 bg-blue-50",children:[c.jsx(ks,{className:"h-4 w-4 text-blue-600"}),c.jsxs(Xs,{className:"text-blue-900",children:[c.jsxs("div",{className:"font-semibold mb-1",children:["Template: ",V?.name]}),c.jsx("div",{className:"text-sm",children:"This will send personalized emails to all participants."})]})]}),c.jsxs("div",{className:"bg-gray-50 border rounded-lg p-4 space-y-2",children:[c.jsx("div",{className:"text-sm font-semibold",children:"Preview:"}),c.jsxs("div",{className:"text-xs text-gray-700",children:[c.jsx("strong",{children:"Subject:"})," ",V?.subject]}),c.jsxs("div",{className:"text-xs text-gray-700",children:[c.jsx("strong",{children:"Placeholders will be replaced:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-0.5 text-gray-600",children:[c.jsxs("li",{children:["{{name}}","  Participant name"]}),c.jsxs("li",{children:["{{email}}","  Participant email"]}),c.jsxs("li",{children:["{{event_name}}","  Your event name"]}),c.jsxs("li",{children:["{{event_date}}","  Event date"]})]})]}),V?.attachments&&V.attachments.length>0&&c.jsxs("div",{className:"text-xs text-gray-700",children:[c.jsx("strong",{children:"Attachments:"})," ",V.attachments.length," file(s)"]}),V?.include_qr_code&&c.jsxs("div",{className:"text-xs text-gray-700",children:[c.jsx("strong",{children:"QR Code:"})," Enabled (each participant gets unique QR)"]})]}),c.jsx(qs,{className:"border-amber-200 bg-amber-50",children:c.jsxs(Xs,{className:"text-amber-900 text-sm",children:[c.jsx("strong",{children:" Important:"})," Currently in simulation mode. To actually send emails, you need to configure an email service (SendGrid, AWS SES, etc.) in your Supabase Edge Functions."]})})]}),c.jsxs(ro,{children:[c.jsx(Ne,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),c.jsxs(Ne,{onClick:we,className:"gradient-primary",children:[c.jsx(Za,{className:"mr-2 h-4 w-4"}),"Send Emails"]})]})]})]})}),c.jsx(Qn,{open:W,onOpenChange:X,children:c.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs(or,{children:[c.jsx(ar,{children:"Send Test Email"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Send a preview email to test how it looks before sending to all participants"})]}),B?c.jsxs("div",{className:"py-8 text-center",children:[c.jsx(Nr,{className:"h-12 w-12 animate-spin mx-auto text-purple-600"}),c.jsx("p",{className:"mt-4 text-gray-700",children:"Sending test email..."})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Template:"}),c.jsx("span",{className:"text-sm text-gray-900 ml-2",children:$?.name})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Subject:"}),c.jsx("span",{className:"text-sm text-gray-900 ml-2",children:$?.subject})]})]}),c.jsx(qs,{className:"border-blue-200 bg-blue-50",children:c.jsxs(Xs,{className:"text-sm text-blue-900",children:[" The test email will use sample participant data:",c.jsxs("div",{className:"mt-2 ml-4 text-xs space-y-1 text-blue-800",children:[c.jsx("div",{children:" Name: John Doe"}),c.jsxs("div",{children:[" Email: ",ue||"[your test email]"]}),c.jsx("div",{children:" Phone: +62 812-3456-7890"}),c.jsx("div",{children:" Company: Sample Company"}),c.jsx("div",{children:" Position: Sample Position"})]})]})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx($e,{htmlFor:"testEmail",children:"Send test email to:"}),c.jsx(tt,{id:"testEmail",type:"email",placeholder:"your.email@example.com",value:ue,onChange:J=>ae(J.target.value),className:"w-full"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Enter your email address to receive the test email"})]}),c.jsxs("div",{className:"space-y-2",children:[$?.attachments&&$.attachments.length>0&&c.jsxs("div",{className:"text-sm text-gray-700",children:[" ",c.jsx("strong",{children:$.attachments.length})," attachment(s) will be included"]}),$?.include_qr_code&&c.jsx("div",{className:"text-sm text-gray-700",children:" Participant QR code will be included"})]}),c.jsx(qs,{className:"border-amber-200 bg-amber-50",children:c.jsxs(Xs,{className:"text-sm text-amber-900",children:[" ",c.jsx("strong",{children:"Simulation Mode:"})," Currently in simulation mode. Email preview will be shown in the browser console. Configure an email service (SendGrid/AWS SES) to actually send emails."]})}),c.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[c.jsx(Ne,{onClick:()=>{X(!1),Q(null),ae("")},variant:"outline",children:"Cancel"}),c.jsxs(Ne,{onClick:Re,className:"gradient-primary",disabled:!ue,children:[c.jsx(ks,{className:"mr-2 h-4 w-4"}),"Send Test Email"]})]})]})]})})]})}function wT({eventId:r,onSelectionChange:t,initialSelection:n=[]}){const[o,u]=I.useState([]),[d,p]=I.useState([]),[w,b]=I.useState(new Set(n)),[y,_]=I.useState(""),[A,k]=I.useState(null),[R,D]=I.useState(null),[j,M]=I.useState(!0);I.useEffect(()=>{V()},[r]),I.useEffect(()=>{z()},[o,y,A,R]),I.useEffect(()=>{t(Array.from(w),"manual",void 0)},[w]);const V=async()=>{try{M(!0),console.log("Fetching participants for eventId:",r);const{data:W,error:X}=await Je.from("participants").select('id, name, email, phone, company, position, "registeredAt"').eq('"eventId"',r).order("name");if(X)throw console.error("Error fetching participants:",X),X;console.log("Loaded participants:",W?.length||0,"participants:",W),u(W||[])}catch(W){console.error("Error fetching participants:",W)}finally{M(!1)}},z=()=>{let W=[...o];if(y){const X=y.toLowerCase();W=W.filter($=>$.name?.toLowerCase().includes(X)||$.email?.toLowerCase().includes(X)||$.company?.toLowerCase().includes(X)||$.position?.toLowerCase().includes(X))}A&&R&&W.sort((X,$)=>{let Q=X[A]||"",ue=$[A]||"";return typeof Q=="string"&&(Q=Q.toLowerCase()),typeof ue=="string"&&(ue=ue.toLowerCase()),Q<ue?R==="asc"?-1:1:Q>ue?R==="asc"?1:-1:0}),p(W)},B=W=>{A===W?R==="asc"?D("desc"):R==="desc"&&(k(null),D(null)):(k(W),D("asc"))},U=W=>A!==W?c.jsx(Jx,{className:"h-3 w-3 ml-1 text-gray-400"}):R==="asc"?c.jsx(ew,{className:"h-3 w-3 ml-1 text-purple-600"}):c.jsx(Zx,{className:"h-3 w-3 ml-1 text-purple-600"}),H=W=>{const X=new Set(w);X.has(W)?X.delete(W):X.add(W),b(X)},Y=()=>{w.size===d.length?b(new Set):b(new Set(d.map(W=>W.id)))};return j?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[c.jsx(Ju,{className:"h-8 w-8 animate-spin text-purple-600"}),c.jsx("p",{className:"text-gray-600",children:"Loading participants..."})]}):o.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4 border-2 border-dashed border-gray-300 rounded-lg",children:[c.jsx(Ja,{className:"h-12 w-12 text-gray-400"}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No participants found"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add participants to this event first"})]})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ja,{className:"h-5 w-5 text-blue-600"}),c.jsxs("span",{className:"font-semibold text-blue-900",children:[w.size," of ",o.length," participants selected"]})]})}),c.jsxs("div",{className:"relative",children:[c.jsx($0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),c.jsx(tt,{placeholder:"Search by name, email, company, or position...",value:y,onChange:W=>_(W.target.value),className:"pl-10"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ko,{checked:w.size===d.length&&d.length>0,onCheckedChange:Y}),c.jsxs($e,{className:"cursor-pointer font-medium",children:["Select All ",y&&`(filtered: ${d.length})`]})]}),w.size>0&&c.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>b(new Set),children:"Clear Selection"})]}),c.jsx("div",{className:"border rounded-lg bg-white overflow-hidden",children:c.jsx("div",{className:"overflow-y-auto max-h-[280px]",style:{overscrollBehavior:"contain"},children:c.jsxs("table",{className:"w-full text-xs border-collapse",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"32px"}}),c.jsx("col",{style:{width:"15%"}}),c.jsx("col",{style:{width:"23%"}}),c.jsx("col",{style:{width:"17%"}}),c.jsx("col",{style:{width:"15%"}}),c.jsx("col",{style:{width:"auto"}})]}),c.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:c.jsxs("tr",{className:"border-b",children:[c.jsx("th",{className:"p-1.5 text-left bg-gray-100",children:c.jsx(Ko,{checked:w.size===d.length&&d.length>0,onCheckedChange:Y})}),c.jsx("th",{className:"p-1.5 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("name"),children:c.jsxs("div",{className:"flex items-center",children:["Name",U("name")]})}),c.jsx("th",{className:"p-1.5 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("email"),children:c.jsxs("div",{className:"flex items-center",children:["Email",U("email")]})}),c.jsx("th",{className:"p-1.5 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("company"),children:c.jsxs("div",{className:"flex items-center",children:["Company",U("company")]})}),c.jsx("th",{className:"p-1.5 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("position"),children:c.jsxs("div",{className:"flex items-center",children:["Position",U("position")]})}),c.jsx("th",{className:"p-1.5 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("registeredAt"),children:c.jsxs("div",{className:"flex items-center",children:["Registered",U("registeredAt")]})})]})}),c.jsx("tbody",{className:"divide-y bg-white",children:d.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500 text-sm",children:y?"No participants found matching your search":"No participants available"})}):d.map(W=>c.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer transition-colors ${w.has(W.id)?"bg-blue-50":""}`,onClick:()=>H(W.id),children:[c.jsx("td",{className:"p-1.5",children:c.jsx(Ko,{checked:w.has(W.id),onCheckedChange:()=>H(W.id),onClick:X=>X.stopPropagation()})}),c.jsx("td",{className:"p-1.5 font-medium text-gray-900 truncate",title:W.name,children:W.name}),c.jsx("td",{className:"p-1.5 text-gray-600 truncate",title:W.email,children:W.email}),c.jsx("td",{className:"p-1.5 text-gray-600 truncate",title:W.company,children:W.company||"-"}),c.jsx("td",{className:"p-1.5 text-gray-600 truncate",title:W.position,children:W.position||"-"}),c.jsx("td",{className:"p-1.5 text-gray-500 whitespace-nowrap",children:W.registeredAt?new Date(W.registeredAt).toLocaleDateString("id-ID",{day:"2-digit",month:"short"}):"-"})]},W.id))})]})})})]})}function yT({open:r,onClose:t,eventId:n,onSuccess:o}){const[u,d]=I.useState(1),[p,w]=I.useState(!1),[b,y]=I.useState("email"),[_,A]=I.useState(""),[k,R]=I.useState(""),[D,j]=I.useState([]),[M,V]=I.useState(""),[z,B]=I.useState([]),[U,H]=I.useState("all"),[Y,W]=I.useState({});I.useEffect(()=>{r?(X(),b==="email"&&$()):(d(1),y("email"),A(""),R(""),V(""),B([]),H("all"),W({}))},[r,n]);const X=async()=>{},$=async()=>{const{data:ee}=await Je.from("email_templates").select("id, name, subject, body").eq("event_id",n).order("name");j(ee||[])},Q=(ee,Ae,_e)=>{B(ee),H(Ae),W(_e||{})},ue=async()=>{try{w(!0);const ee=D.find(_e=>_e.id===k);if(!ee){alert("Please select a template");return}const{error:Ae}=await Je.from("campaigns").insert({event_id:n,name:_,channel:b,template_id:k,template_name:ee.name,template_subject:ee.subject,target_type:U,target_filter:Y,target_participant_ids:U==="manual"?z:[],status:"draft",total_recipients:z.length,sent_count:0,failed_count:0,pending_count:z.length,notes:M}).select().single();if(Ae)throw Ae;alert(` Campaign "${_}" created!

Ready to send to ${z.length} participants.`),o(),t()}catch(ee){console.error("Error creating campaign:",ee),alert("Error creating campaign: "+ee.message)}finally{w(!1)}},ae=()=>b!==null,te=()=>_.trim()!==""&&k!=="",fe=()=>z.length>0;return c.jsx(Qn,{open:r,onOpenChange:t,children:c.jsxs(Jn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[c.jsxs(or,{children:[c.jsx(ar,{children:"Create New Campaign"}),c.jsx("div",{className:"flex items-center gap-2 mt-4",children:[{num:1,label:"Channel"},{num:2,label:"Details"},{num:3,label:"Participants"}].map(ee=>c.jsxs("div",{className:"flex items-center flex-1",children:[c.jsxs("div",{className:"flex flex-col items-center flex-1",children:[c.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${u>=ee.num?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"}`,children:u>ee.num?c.jsx(V0,{className:"h-5 w-5"}):ee.num}),c.jsx("div",{className:`text-xs mt-1 ${u>=ee.num?"text-purple-600 font-semibold":"text-gray-500"}`,children:ee.label})]}),ee.num<3&&c.jsx("div",{className:`flex-1 h-1 mx-2 ${u>ee.num?"bg-purple-600":"bg-gray-200"}`})]},ee.num))})]}),c.jsxs("div",{className:"py-6",children:[u===1&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Choose Channel"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select how you want to reach your participants"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("button",{onClick:()=>y("email"),className:`p-6 border-2 rounded-lg transition-all ${b==="email"?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:c.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[c.jsx("div",{className:`p-3 rounded-full ${b==="email"?"bg-purple-600":"bg-gray-200"}`,children:c.jsx(ks,{className:`h-8 w-8 ${b==="email"?"text-white":"text-gray-600"}`})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-lg",children:"Email"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send personalized emails with templates"})]}),c.jsxs(Xo,{variant:b==="email"?"default":"outline",children:[D.length," templates available"]})]})}),c.jsx("button",{onClick:()=>y("whatsapp"),disabled:!0,className:"p-6 border-2 rounded-lg border-gray-200 opacity-50 cursor-not-allowed",children:c.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[c.jsx("div",{className:"p-3 rounded-full bg-gray-200",children:c.jsx(sw,{className:"h-8 w-8 text-gray-600"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-lg",children:"WhatsApp"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send messages via WhatsApp"})]}),c.jsx(Xo,{variant:"outline",children:"Coming Soon"})]})})]}),c.jsx(qs,{children:c.jsxs(Xs,{children:[b==="email"&&" Email campaigns use your configured SendGrid service",b==="whatsapp"&&" WhatsApp integration coming soon"]})})]}),u===2&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Campaign Details"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure your campaign settings"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx($e,{children:"Campaign Name *"}),c.jsx(tt,{placeholder:"e.g., H-3 Reminder Blast",value:_,onChange:ee=>A(ee.target.value)}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Give your campaign a descriptive name"})]}),b==="email"&&c.jsxs("div",{children:[c.jsx($e,{children:"Email Template *"}),c.jsxs(vi,{value:k,onValueChange:R,children:[c.jsx(Ci,{children:c.jsx(bi,{placeholder:"Choose a template..."})}),c.jsx(Ei,{children:D.length===0?c.jsx(Jt,{value:"none",disabled:!0,children:"No templates available"}):D.map(ee=>c.jsx(Jt,{value:ee.id,children:ee.name},ee.id))})]}),k&&c.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded border text-sm",children:[c.jsx("div",{className:"font-medium",children:D.find(ee=>ee.id===k)?.subject}),c.jsxs("div",{className:"text-gray-600 mt-1 text-xs",children:[D.find(ee=>ee.id===k)?.body.substring(0,150),"..."]})]})]}),c.jsxs("div",{children:[c.jsx($e,{children:"Notes (Optional)"}),c.jsx(ho,{placeholder:"Add any notes about this campaign...",value:M,onChange:ee=>V(ee.target.value),rows:3})]})]})]}),u===3&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Target Participants"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select who will receive this campaign"})]}),c.jsx(wT,{eventId:n,onSelectionChange:Q,initialSelection:z})]})]}),c.jsxs(ro,{className:"flex justify-between",children:[c.jsx("div",{children:u>1&&c.jsxs(Ne,{variant:"outline",onClick:()=>d(u-1),disabled:p,children:[c.jsx(U0,{className:"h-4 w-4 mr-2"}),"Back"]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ne,{variant:"ghost",onClick:t,disabled:p,children:"Cancel"}),u<3?c.jsxs(Ne,{onClick:()=>d(u+1),disabled:p||u===1&&!ae()||u===2&&!te(),children:["Next",c.jsx(Qx,{className:"h-4 w-4 ml-2"})]}):c.jsxs(Ne,{onClick:ue,disabled:p||!fe(),children:[c.jsx(Za,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]})]})]})})}function vT({eventId:r}){const[t,n]=I.useState([]),[o,u]=I.useState(!0),[d,p]=I.useState(!1),[w,b]=I.useState(null),[y,_]=I.useState(!1),[A,k]=I.useState(null);I.useEffect(()=>{R()},[r]);const R=async()=>{try{u(!0);const{data:U,error:H}=await Je.from("campaigns").select("*").eq("event_id",r).order("created_at",{ascending:!1});if(H)throw H;n(U||[])}catch(U){console.error("Error fetching campaigns:",U)}finally{u(!1)}},D=async U=>{if(confirm(`Send campaign "${U.name}" to ${U.total_recipients} participants?`))try{k(U.id),await Je.from("campaigns").update({status:"sending",sent_at:new Date().toISOString()}).eq("id",U.id);const{data:H}=await Je.rpc("get_campaign_participants",{p_event_id:r,p_target_type:U.target_type,p_target_filter:U.target_filter||{},p_target_participant_ids:U.target_participant_ids||[]});if(!H||H.length===0){alert("No participants found for this campaign");return}const{data:Y}=await Je.from("email_templates").select("*").eq("id",U.template_id).single();if(!Y){alert("Template not found");return}const{data:W}=await Je.from("events").select("*").eq("id",r).single();let X=0,$=0;for(const Q of H)try{const ue=j(Y.subject,Q,W),ae=j(Y.body,Q,W),{error:te}=await Je.functions.invoke("send-email",{body:{to:Q.email,subject:ue,html:ae,participantId:Q.id,templateId:Y.id}});te?(console.error(`Failed to send to ${Q.email}:`,te),$++,await Je.from("email_logs").insert({campaign_id:U.id,participant_id:Q.id,template_id:Y.id,template_name:Y.name,subject:ue,status:"failed",error_message:te.message})):(console.log(` Sent to ${Q.email}`),X++,await Je.from("email_logs").insert({campaign_id:U.id,participant_id:Q.id,template_id:Y.id,template_name:Y.name,subject:ue,status:"sent"}),await Je.rpc("update_participant_email_status",{p_participant_id:Q.id,p_template_id:Y.id,p_template_name:Y.name,p_subject:ue,p_status:"sent",p_error_message:null})),await Je.rpc("update_campaign_progress",{p_campaign_id:U.id,p_sent_increment:X>0?1:0,p_failed_increment:$>0?1:0}),await new Promise(fe=>setTimeout(fe,100))}catch(ue){console.error("Error sending email:",ue),$++}alert(` Campaign complete!

Sent: ${X}
Failed: ${$}
Total: ${H.length}`),R()}catch(H){console.error("Error sending campaign:",H),alert("Error sending campaign: "+H.message)}finally{k(null)}},j=(U,H,Y)=>U.replace(/\{\{name\}\}/g,H.name||"").replace(/\{\{email\}\}/g,H.email||"").replace(/\{\{phone\}\}/g,H.phone||"").replace(/\{\{company\}\}/g,H.company||"").replace(/\{\{position\}\}/g,H.position||"").replace(/\{\{event_name\}\}/g,Y?.name||"").replace(/\{\{event_date\}\}/g,Y?.startDate||"").replace(/\{\{participant_id\}\}/g,H.id||""),M=async U=>{if(confirm(`Delete campaign "${U.name}"?

This will also delete all associated email logs.`))try{const{error:H}=await Je.from("campaigns").delete().eq("id",U.id);if(H)throw H;alert("Campaign deleted successfully"),R()}catch(H){console.error("Error deleting campaign:",H),alert("Error deleting campaign: "+H.message)}},V=U=>{const H={draft:{label:"Draft",className:"bg-gray-100 text-gray-700",icon:gd},sending:{label:"Sending...",className:"bg-blue-100 text-blue-700",icon:cE},completed:{label:"Completed",className:"bg-green-100 text-green-700",icon:V0},failed:{label:"Failed",className:"bg-red-100 text-red-700",icon:Zo},cancelled:{label:"Cancelled",className:"bg-gray-100 text-gray-700",icon:Zo}},{label:Y,className:W,icon:X}=H[U];return c.jsxs(Xo,{className:W,children:[c.jsx(X,{className:"h-3 w-3 mr-1"}),Y]})},z=U=>U==="email"?c.jsxs(Xo,{variant:"outline",className:"bg-purple-50",children:[c.jsx(ks,{className:"h-3 w-3 mr-1"}),"Email"]}):c.jsxs(Xo,{variant:"outline",className:"bg-green-50",children:[c.jsx(sw,{className:"h-3 w-3 mr-1"}),"WhatsApp"]}),B=U=>{const H={all:{label:"All Participants",icon:""},filtered:{label:"Filtered",icon:""},manual:{label:"Manual Selection",icon:""}};return c.jsxs("span",{className:"text-sm text-gray-600",children:[H[U].icon," ",H[U].label]})};return o?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx(Ju,{className:"h-8 w-8 animate-spin text-gray-400"})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Blast Campaigns"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage email and WhatsApp campaigns"})]}),c.jsxs(Ne,{onClick:()=>p(!0),size:"lg",children:[c.jsx(js,{className:"h-5 w-5 mr-2"}),"Create Campaign"]})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[c.jsxs(ir,{children:[c.jsx(Br,{className:"pb-3",children:c.jsx(Fr,{className:"text-sm font-medium text-gray-600",children:"Total Campaigns"})}),c.jsx(gr,{children:c.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),c.jsxs(ir,{children:[c.jsx(Br,{className:"pb-3",children:c.jsx(Fr,{className:"text-sm font-medium text-gray-600",children:"Completed"})}),c.jsx(gr,{children:c.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(U=>U.status==="completed").length})})]}),c.jsxs(ir,{children:[c.jsx(Br,{className:"pb-3",children:c.jsx(Fr,{className:"text-sm font-medium text-gray-600",children:"Total Sent"})}),c.jsx(gr,{children:c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.reduce((U,H)=>U+H.sent_count,0)})})]}),c.jsxs(ir,{children:[c.jsx(Br,{className:"pb-3",children:c.jsx(Fr,{className:"text-sm font-medium text-gray-600",children:"Success Rate"})}),c.jsx(gr,{children:c.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[t.length>0?Math.round(t.reduce((U,H)=>U+H.sent_count,0)/t.reduce((U,H)=>U+H.total_recipients,0)*100):0,"%"]})})]})]}),c.jsxs(ir,{children:[c.jsx(Br,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Fr,{children:"Campaign History"}),c.jsxs(Ne,{variant:"outline",size:"sm",onClick:R,children:[c.jsx(Ju,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),c.jsx(gr,{children:t.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Za,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No campaigns yet"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first campaign to start sending emails"}),c.jsxs(Ne,{onClick:()=>p(!0),children:[c.jsx(js,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs(oo,{children:[c.jsx(ao,{children:c.jsxs(mr,{children:[c.jsx(Nt,{children:"Campaign Name"}),c.jsx(Nt,{children:"Channel"}),c.jsx(Nt,{children:"Template"}),c.jsx(Nt,{children:"Target"}),c.jsx(Nt,{children:"Status"}),c.jsx(Nt,{children:"Progress"}),c.jsx(Nt,{children:"Created"}),c.jsx(Nt,{className:"text-right",children:"Actions"})]})}),c.jsx(lo,{children:t.map(U=>c.jsxs(mr,{children:[c.jsx(_t,{className:"font-medium",children:U.name}),c.jsx(_t,{children:z(U.channel)}),c.jsx(_t,{children:c.jsx("div",{className:"max-w-xs truncate",title:U.template_subject,children:U.template_name})}),c.jsx(_t,{children:B(U.target_type)}),c.jsx(_t,{children:V(U.status)}),c.jsx(_t,{children:c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsxs("span",{className:"text-green-600",children:[U.sent_count," sent"]}),U.failed_count>0&&c.jsxs("span",{className:"text-red-600",children:[U.failed_count," failed"]})]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["of ",U.total_recipients," recipients"]})]})}),c.jsx(_t,{className:"text-sm text-gray-600",children:new Date(U.created_at).toLocaleDateString()}),c.jsx(_t,{className:"text-right",children:c.jsxs("div",{className:"flex gap-2 justify-end",children:[U.status==="draft"&&c.jsxs(Ne,{size:"sm",onClick:()=>D(U),disabled:A===U.id,children:[c.jsx(Za,{className:"h-4 w-4 mr-1"}),"Send"]}),c.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>{b(U),_(!0)},children:c.jsx(nw,{className:"h-4 w-4"})}),U.status==="draft"&&c.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>M(U),children:c.jsx(na,{className:"h-4 w-4 text-red-600"})})]})})]},U.id))})]})})})]}),c.jsx(yT,{open:d,onClose:()=>p(!1),eventId:r,onSuccess:R}),w&&c.jsx(Qn,{open:y,onOpenChange:_,children:c.jsxs(Jn,{className:"max-w-2xl",children:[c.jsxs(or,{children:[c.jsx(ar,{children:w.name}),c.jsx(yi,{children:"Campaign details and statistics"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx($e,{className:"text-sm text-gray-600",children:"Channel"}),c.jsx("div",{className:"mt-1",children:z(w.channel)})]}),c.jsxs("div",{children:[c.jsx($e,{className:"text-sm text-gray-600",children:"Status"}),c.jsx("div",{className:"mt-1",children:V(w.status)})]}),c.jsxs("div",{children:[c.jsx($e,{className:"text-sm text-gray-600",children:"Template"}),c.jsx("div",{className:"mt-1 font-medium",children:w.template_name})]}),c.jsxs("div",{children:[c.jsx($e,{className:"text-sm text-gray-600",children:"Target Type"}),c.jsx("div",{className:"mt-1",children:B(w.target_type)})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx($e,{className:"text-sm text-gray-600 mb-3 block",children:"Statistics"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.sent_count}),c.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Sent"})]}),c.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:w.failed_count}),c.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Failed"})]}),c.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:w.total_recipients}),c.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Total"})]})]})]}),w.notes&&c.jsxs("div",{children:[c.jsx($e,{className:"text-sm text-gray-600",children:"Notes"}),c.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded border text-sm",children:w.notes})]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(w.created_at).toLocaleString(),w.completed_at&&c.jsxs(c.Fragment,{children:["  Completed: ",new Date(w.completed_at).toLocaleString()]})]})]}),c.jsx(ro,{children:c.jsx(Ne,{variant:"outline",onClick:()=>_(!1),children:"Close"})})]})})]})}function bT({eventId:r,accessToken:t,onLogout:n,onBackToEvents:o}){const[u,d]=I.useState(null),[p,w]=I.useState("participants");I.useEffect(()=>{const k=new URLSearchParams(window.location.search).get("tab");k&&["participants","agenda","branding","emails","blast"].includes(k)&&w(k)},[]),I.useEffect(()=>{r&&(async()=>{try{const{data:k,error:R}=await Je.from("events").select("*").eq("id",r).single();R?console.error("Error loading event:",R):d(k)}catch(k){console.error("Error loading event:",k)}})()},[r]);const b=A=>{w(A);const k=new URL(window.location.href);k.searchParams.set("tab",A),window.history.pushState({},"",k)},y=async()=>{await Je.auth.signOut(),n()},_=()=>{o()};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50",children:[c.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:c.jsx("div",{className:"container mx-auto px-6 py-5",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(Ne,{onClick:_,variant:"ghost",size:"sm",className:"hover:bg-purple-100 hover:text-purple-700",children:[c.jsx(U0,{className:"mr-2 h-4 w-4"}),"Back to Events"]}),c.jsxs("div",{className:"border-l border-gray-300 pl-4",children:[c.jsx("h1",{className:"text-2xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:u?.name||"Event Management Dashboard"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage registrations, attendance, and event schedule"})]})]}),c.jsxs(Ne,{onClick:y,variant:"outline",className:"border-gray-300 hover:border-gray-400",children:[c.jsx(rw,{className:"mr-2 h-4 w-4"}),"Logout"]})]})})}),c.jsx("main",{className:"container mx-auto px-6 py-8",children:c.jsxs(v0,{value:p,onValueChange:b,className:"space-y-8",children:[c.jsxs(b0,{className:"flex w-full max-w-5xl mx-auto gap-2 bg-white/80 backdrop-blur-sm p-2 rounded-2xl shadow-md border border-gray-200 h-14",children:[c.jsxs(xi,{value:"participants",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[c.jsx(Ja,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Participants"})]}),c.jsxs(xi,{value:"agenda",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[c.jsx(sc,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Agenda"})]}),c.jsxs(xi,{value:"branding",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[c.jsx(iw,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Branding"})]}),c.jsxs(xi,{value:"emails",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[c.jsx(ks,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Templates"})]}),c.jsxs(xi,{value:"blast",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[c.jsx(Za,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Blast"})]})]}),c.jsx(wi,{value:"participants",children:c.jsx(gT,{eventId:r,accessToken:t})}),c.jsx(wi,{value:"agenda",children:c.jsx(mT,{eventId:r,accessToken:t})}),c.jsx(wi,{value:"branding",children:c.jsx(pT,{eventId:r})}),c.jsx(wi,{value:"emails",children:c.jsx(xT,{eventId:r})}),c.jsx(wi,{value:"blast",children:c.jsx(vT,{eventId:r})})]})})]})}function CT({onEventSelected:r,onLogout:t}){const[n,o]=I.useState([]),[u,d]=I.useState(!1),[p,w]=I.useState(!1),[b,y]=I.useState(null),[_,A]=I.useState({name:"",startDate:"",endDate:"",location:"",description:""});I.useEffect(()=>{k()},[]);const k=async()=>{try{const{data:H,error:Y}=await Je.from("events").select("*").order("createdAt",{ascending:!1});Y?console.error("Error loading events:",Y):o(H||[])}catch(H){console.error("Error loading events:",H)}},R=()=>{A({name:"",startDate:"",endDate:"",location:"",description:""}),d(!0)},D=H=>{y(H),A({name:H.name,startDate:H.startDate,endDate:H.endDate,location:H.location,description:H.description}),w(!0)},j=async()=>{if(!_.name||!_.startDate){alert("Please fill in required fields (Event Name and Start Date)");return}try{const H=`evt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:Y}=await Je.from("events").insert([{id:H,name:_.name,startDate:_.startDate,endDate:_.endDate||null,location:_.location,description:_.description,createdAt:new Date().toISOString()}]);Y?(console.error("Error creating event:",Y),alert("Failed to create event")):(k(),d(!1))}catch(H){console.error("Error creating event:",H),alert("Failed to create event")}},M=async()=>{if(b){if(!_.name||!_.startDate){alert("Please fill in required fields (Event Name and Start Date)");return}try{const{error:H}=await Je.from("events").update({name:_.name,startDate:_.startDate,endDate:_.endDate||null,location:_.location,description:_.description}).eq("id",b.id);H?(console.error("Error updating event:",H),alert("Failed to update event")):(k(),w(!1),y(null))}catch(H){console.error("Error updating event:",H),alert("Failed to update event")}}},V=async(H,Y)=>{if(confirm(`Are you sure you want to delete "${Y}"?

This will permanently delete all participants, agenda items, and attendance records associated with this event.`))try{const{error:W}=await Je.from("events").delete().eq("id",H);W?(console.error("Error deleting event:",W),alert("Failed to delete event")):k()}catch(W){console.error("Error deleting event:",W),alert("Failed to delete event")}},z=H=>{r(H)},B=async()=>{await Je.auth.signOut(),t()},U=H=>H?new Date(H).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50",children:[c.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:c.jsxs("div",{className:"container mx-auto px-6 py-5 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Event Management System"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select an event to manage or create a new one"})]}),c.jsxs(Ne,{onClick:B,variant:"outline",className:"border-gray-300 hover:border-gray-400",children:[c.jsx(rw,{className:"mr-2 h-4 w-4"}),"Logout"]})]})}),c.jsx("main",{className:"container mx-auto px-6 py-12",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-10",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-3xl mb-2",children:"Your Events"}),c.jsxs("p",{className:"text-gray-600 text-lg",children:[n.length," ",n.length===1?"event":"events"," total"]})]}),c.jsxs(Ne,{onClick:R,size:"lg",className:"gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 h-12 px-6",children:[c.jsx(js,{className:"mr-2 h-5 w-5"}),"Create New Event"]})]}),n.length===0?c.jsx(ir,{className:"border-2 border-dashed border-gray-300 bg-white/60 backdrop-blur-sm",children:c.jsxs(gr,{className:"flex flex-col items-center justify-center py-20",children:[c.jsx("div",{className:"w-20 h-20 gradient-primary-soft rounded-2xl flex items-center justify-center mb-6",children:c.jsx(YC,{className:"h-10 w-10 text-purple-600"})}),c.jsx("h3",{className:"text-2xl mb-3",children:"No events yet"}),c.jsx("p",{className:"text-gray-600 mb-8 text-center max-w-md text-lg",children:"Get started by creating your first event. You'll be able to manage participants, agenda, and track attendance."}),c.jsxs(Ne,{onClick:R,size:"lg",className:"gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 h-12 px-6",children:[c.jsx(js,{className:"mr-2 h-5 w-5"}),"Create Your First Event"]})]})}):c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(H=>c.jsxs(ir,{className:"card-elevated bg-white border-0 overflow-hidden group",children:[c.jsx("div",{className:"h-2 gradient-primary"}),c.jsxs(Br,{className:"pb-4",children:[c.jsx(Fr,{className:"line-clamp-1 text-xl",children:H.name}),c.jsxs("div",{className:"space-y-2 text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(sc,{className:"h-4 w-4 text-purple-500"}),c.jsxs("span",{className:"text-sm",children:[U(H.startDate),H.endDate&&` - ${U(H.endDate)}`]})]}),H.location&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(W0,{className:"h-4 w-4 text-pink-500"}),c.jsx("span",{className:"text-sm line-clamp-1",children:H.location})]})]})]}),c.jsxs(gr,{children:[H.description&&c.jsx("p",{className:"text-sm text-gray-600 mb-5 line-clamp-2",children:H.description}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ne,{onClick:()=>z(H.id),className:"flex-1 gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:["Manage",c.jsx(Qx,{className:"ml-2 h-4 w-4"})]}),c.jsx(Ne,{onClick:()=>D(H),variant:"outline",size:"icon",className:"border-gray-300 hover:border-purple-500 hover:text-purple-600",children:c.jsx(Qa,{className:"h-4 w-4"})}),c.jsx(Ne,{onClick:()=>V(H.id,H.name),variant:"outline",size:"icon",className:"border-gray-300 hover:border-red-500 hover:text-red-600",children:c.jsx(na,{className:"h-4 w-4"})})]})]})]},H.id))})]})}),c.jsx(Qn,{open:u,onOpenChange:d,children:c.jsxs(Jn,{className:"max-w-2xl",children:[c.jsxs(or,{children:[c.jsx(ar,{children:"Create New Event"}),c.jsx(yi,{children:"Create a new event to manage participants and agenda"})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{children:[c.jsx($e,{htmlFor:"name",children:"Event Name *"}),c.jsx(tt,{id:"name",value:_.name,onChange:H=>A({..._,name:H.target.value}),placeholder:"e.g., Annual Tech Conference 2024"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx($e,{htmlFor:"startDate",children:"Start Date *"}),c.jsx(tt,{id:"startDate",type:"date",value:_.startDate,onChange:H=>A({..._,startDate:H.target.value})})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"endDate",children:"End Date"}),c.jsx(tt,{id:"endDate",type:"date",value:_.endDate,onChange:H=>A({..._,endDate:H.target.value})})]})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"location",children:"Location"}),c.jsx(tt,{id:"location",value:_.location,onChange:H=>A({..._,location:H.target.value}),placeholder:"e.g., Convention Center Hall A"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"description",children:"Description"}),c.jsx(ho,{id:"description",value:_.description,onChange:H=>A({..._,description:H.target.value}),placeholder:"Brief description of the event...",rows:3})]})]}),c.jsxs(ro,{children:[c.jsx(Ne,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),c.jsx(Ne,{onClick:j,children:"Create Event"})]})]})}),c.jsx(Qn,{open:p,onOpenChange:w,children:c.jsxs(Jn,{className:"max-w-2xl",children:[c.jsxs(or,{children:[c.jsx(ar,{children:"Edit Event"}),c.jsx(yi,{children:"Update event details"})]}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-name",children:"Event Name *"}),c.jsx(tt,{id:"edit-name",value:_.name,onChange:H=>A({..._,name:H.target.value}),placeholder:"e.g., Annual Tech Conference 2024"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-startDate",children:"Start Date *"}),c.jsx(tt,{id:"edit-startDate",type:"date",value:_.startDate,onChange:H=>A({..._,startDate:H.target.value})})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-endDate",children:"End Date"}),c.jsx(tt,{id:"edit-endDate",type:"date",value:_.endDate,onChange:H=>A({..._,endDate:H.target.value})})]})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-location",children:"Location"}),c.jsx(tt,{id:"edit-location",value:_.location,onChange:H=>A({..._,location:H.target.value}),placeholder:"e.g., Convention Center Hall A"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"edit-description",children:"Description"}),c.jsx(ho,{id:"edit-description",value:_.description,onChange:H=>A({..._,description:H.target.value}),placeholder:"Brief description of the event...",rows:3})]})]}),c.jsxs(ro,{children:[c.jsx(Ne,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),c.jsx(Ne,{onClick:M,children:"Save Changes"})]})]})})]})}var kd="Switch",[ET]=ms(kd),[ST,_T]=ET(kd),Kv=I.forwardRef((r,t)=>{const{__scopeSwitch:n,name:o,checked:u,defaultChecked:d,required:p,disabled:w,value:b="on",onCheckedChange:y,form:_,...A}=r,[k,R]=I.useState(null),D=tn(t,B=>R(B)),j=I.useRef(!1),M=k?_||!!k.closest("form"):!0,[V,z]=Os({prop:u,defaultProp:d??!1,onChange:y,caller:kd});return c.jsxs(ST,{scope:n,checked:V,disabled:w,children:[c.jsx(kt.button,{type:"button",role:"switch","aria-checked":V,"aria-required":p,"data-state":Jv(V),"data-disabled":w?"":void 0,disabled:w,value:b,...A,ref:D,onClick:Mt(r.onClick,B=>{z(U=>!U),M&&(j.current=B.isPropagationStopped(),j.current||B.stopPropagation())})}),M&&c.jsx(Qv,{control:k,bubbles:!j.current,name:o,value:b,checked:V,required:p,disabled:w,form:_,style:{transform:"translateX(-100%)"}})]})});Kv.displayName=kd;var Yv="SwitchThumb",Zv=I.forwardRef((r,t)=>{const{__scopeSwitch:n,...o}=r,u=_T(Yv,n);return c.jsx(kt.span,{"data-state":Jv(u.checked),"data-disabled":u.disabled?"":void 0,...o,ref:t})});Zv.displayName=Yv;var AT="SwitchBubbleInput",Qv=I.forwardRef(({__scopeSwitch:r,control:t,checked:n,bubbles:o=!0,...u},d)=>{const p=I.useRef(null),w=tn(p,d),b=Ad(n),y=_d(t);return I.useEffect(()=>{const _=p.current;if(!_)return;const A=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(A,"checked").set;if(b!==n&&R){const D=new Event("click",{bubbles:o});R.call(_,n),_.dispatchEvent(D)}},[b,n,o]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...u,tabIndex:-1,ref:w,style:{...u.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Qv.displayName=AT;function Jv(r){return r?"checked":"unchecked"}var NT=Kv,IT=Zv;function e2({className:r,...t}){return c.jsx(NT,{"data-slot":"switch",className:Ot("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:c.jsx(IT,{"data-slot":"switch-thumb",className:Ot("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var Qe;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Qe||(Qe={}));var zp=new Map([[Qe.QR_CODE,"QR_CODE"],[Qe.AZTEC,"AZTEC"],[Qe.CODABAR,"CODABAR"],[Qe.CODE_39,"CODE_39"],[Qe.CODE_93,"CODE_93"],[Qe.CODE_128,"CODE_128"],[Qe.DATA_MATRIX,"DATA_MATRIX"],[Qe.MAXICODE,"MAXICODE"],[Qe.ITF,"ITF"],[Qe.EAN_13,"EAN_13"],[Qe.EAN_8,"EAN_8"],[Qe.PDF_417,"PDF_417"],[Qe.RSS_14,"RSS_14"],[Qe.RSS_EXPANDED,"RSS_EXPANDED"],[Qe.UPC_A,"UPC_A"],[Qe.UPC_E,"UPC_E"],[Qe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Vp;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(Vp||(Vp={}));function TT(r){return Object.values(Qe).includes(r)}var ud;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ud||(ud={}));var RT=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[ud.SCAN_TYPE_CAMERA,ud.SCAN_TYPE_FILE],r})(),t2=(function(){function r(t,n){this.format=t,this.formatName=n}return r.prototype.toString=function(){return this.formatName},r.create=function(t){if(!zp.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new r(t,zp.get(t))},r})(),Wp=(function(){function r(){}return r.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},r.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},r})(),O0;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(O0||(O0={}));var kT=(function(){function r(){}return r.createFrom=function(t){return{errorMessage:t,type:O0.UNKWOWN_ERROR}},r})(),jT=(function(){function r(t){this.verbose=t}return r.prototype.log=function(t){this.verbose&&console.log(t)},r.prototype.warn=function(t){this.verbose&&console.warn(t)},r.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},r.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},r})();function mi(r){return typeof r>"u"||r===null}var $a=(function(){function r(){}return r.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},r.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),n2=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var o=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(u),p=Object.keys(t),w=0,b=p;w<b.length;w++){var y=b[w];if(d.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},r})(),ec={exports:{}},OT=ec.exports,$p;function PT(){return $p||($p=1,(function(r,t){(function(n,o){o(t)})(OT,(function(n){function o(O){return O==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,e){O.__proto__=e}||function(O,e){for(var i in e)e.hasOwnProperty(i)&&(O[i]=e[i])};function d(O,e){u(O,e);function i(){this.constructor=O}O.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}function p(O,e){var i=Object.setPrototypeOf;i?i(O,e):O.__proto__=e}function w(O,e){e===void 0&&(e=O.constructor);var i=Error.captureStackTrace;i&&i(O,e)}var b=(function(O){d(e,O);function e(i){var a=this.constructor,h=O.call(this,i)||this;return Object.defineProperty(h,"name",{value:a.name,enumerable:!1}),p(h,a.prototype),w(h),h}return e})(Error);class y extends b{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}y.kind="Exception";class _ extends y{}_.kind="ArgumentException";class A extends y{}A.kind="IllegalArgumentException";class k{constructor(e){if(this.binarizer=e,e===null)throw new A("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,i){return this.binarizer.getBlackRow(e,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,i,a,h){const f=this.binarizer.getLuminanceSource().crop(e,i,a,h);return new k(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends y{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class D{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(e,i,a,h,f){for(;f--;)a[h++]=e[i++]}static currentTimeMillis(){return Date.now()}}class M extends y{}M.kind="IndexOutOfBoundsException";class V extends M{constructor(e=void 0,i=void 0){super(i),this.index=e,this.message=i}}V.kind="ArrayIndexOutOfBoundsException";class z{static fill(e,i){for(let a=0,h=e.length;a<h;a++)e[a]=i}static fillWithin(e,i,a,h){z.rangeCheck(e.length,i,a);for(let f=i;f<a;f++)e[f]=h}static rangeCheck(e,i,a){if(i>a)throw new A("fromIndex("+i+") > toIndex("+a+")");if(i<0)throw new V(i);if(a>e)throw new V(a)}static asList(...e){return e}static create(e,i,a){return Array.from({length:e}).map(f=>Array.from({length:i}).fill(a))}static createInt32Array(e,i,a){return Array.from({length:e}).map(f=>Int32Array.from({length:i}).fill(a))}static equals(e,i){if(!e||!i||!e.length||!i.length||e.length!==i.length)return!1;for(let a=0,h=e.length;a<h;a++)if(e[a]!==i[a])return!1;return!0}static hashCode(e){if(e===null)return 0;let i=1;for(const a of e)i=31*i+a;return i}static fillUint8Array(e,i){for(let a=0;a!==e.length;a++)e[a]=i}static copyOf(e,i){return e.slice(0,i)}static copyOfUint8Array(e,i){if(e.length<=i){const a=new Uint8Array(i);return a.set(e),a}return e.slice(0,i)}static copyOfRange(e,i,a){const h=a-i,f=new Int32Array(h);return j.arraycopy(e,i,f,0,h),f}static binarySearch(e,i,a){a===void 0&&(a=z.numberComparator);let h=0,f=e.length-1;for(;h<=f;){const g=f+h>>1,x=a(i,e[g]);if(x>0)h=g+1;else if(x<0)f=g-1;else return g}return-h-1}static numberComparator(e,i){return e-i}}class B{static numberOfTrailingZeros(e){let i;if(e===0)return 32;let a=31;return i=e<<16,i!==0&&(a-=16,e=i),i=e<<8,i!==0&&(a-=8,e=i),i=e<<4,i!==0&&(a-=4,e=i),i=e<<2,i!==0&&(a-=2,e=i),a-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let i=1;return e>>>16||(i+=16,e<<=16),e>>>24||(i+=8,e<<=8),e>>>28||(i+=4,e<<=4),e>>>30||(i+=2,e<<=2),i-=e>>>31,i}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,i){return Math.trunc(e/i)}static parseInt(e,i=void 0){return parseInt(e,i)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(e,i){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,i==null?this.bits=U.makeArray(e):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const i=U.makeArray(e);j.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const i=this.size;if(e>=i)return i;const a=this.bits;let h=Math.floor(e/32),f=a[h];f&=~((1<<(e&31))-1);const g=a.length;for(;f===0;){if(++h===g)return i;f=a[h]}const x=h*32+B.numberOfTrailingZeros(f);return x>i?i:x}getNextUnset(e){const i=this.size;if(e>=i)return i;const a=this.bits;let h=Math.floor(e/32),f=~a[h];f&=~((1<<(e&31))-1);const g=a.length;for(;f===0;){if(++h===g)return i;f=~a[h]}const x=h*32+B.numberOfTrailingZeros(f);return x>i?i:x}setBulk(e,i){this.bits[Math.floor(e/32)]=i}setRange(e,i){if(i<e||e<0||i>this.size)throw new A;if(i===e)return;i--;const a=Math.floor(e/32),h=Math.floor(i/32),f=this.bits;for(let g=a;g<=h;g++){const x=g>a?0:e&31,E=(2<<(g<h?31:i&31))-(1<<x);f[g]|=E}}clear(){const e=this.bits.length,i=this.bits;for(let a=0;a<e;a++)i[a]=0}isRange(e,i,a){if(i<e||e<0||i>this.size)throw new A;if(i===e)return!0;i--;const h=Math.floor(e/32),f=Math.floor(i/32),g=this.bits;for(let x=h;x<=f;x++){const C=x>h?0:e&31,T=(2<<(x<f?31:i&31))-(1<<C)&4294967295;if((g[x]&T)!==(a?T:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,i){if(i<0||i>32)throw new A("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let a=i;a>0;a--)this.appendBit((e>>a-1&1)===1)}appendBitArray(e){const i=e.size;this.ensureCapacity(this.size+i);for(let a=0;a<i;a++)this.appendBit(e.get(a))}xor(e){if(this.size!==e.size)throw new A("Sizes don't match");const i=this.bits;for(let a=0,h=i.length;a<h;a++)i[a]^=e.bits[a]}toBytes(e,i,a,h){for(let f=0;f<h;f++){let g=0;for(let x=0;x<8;x++)this.get(e)&&(g|=1<<7-x),e++;i[a+f]=g}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),a=i+1,h=this.bits;for(let f=0;f<a;f++){let g=h[f];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,e[i-f]=g}if(this.size!==a*32){const f=a*32-this.size;let g=e[0]>>>f;for(let x=1;x<a;x++){const C=e[x];g|=C<<32-f,e[x-1]=g,g=C>>>f}e[a-1]=g}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof U))return!1;const i=e;return this.size===i.size&&z.equals(this.bits,i.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let e="";for(let i=0,a=this.size;i<a;i++)(i&7)===0&&(e+=" "),e+=this.get(i)?"X":".";return e}clone(){return new U(this.size,this.bits.slice())}}var H;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var Y=H;class W extends y{static getFormatInstance(){return new W}}W.kind="FormatException";var X;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(X||(X={}));class ${constructor(e,i,a,...h){this.valueIdentifier=e,this.name=a,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=h,$.VALUE_IDENTIFIER_TO_ECI.set(e,this),$.NAME_TO_ECI.set(a,this);const f=this.values;for(let g=0,x=f.length;g!==x;g++){const C=f[g];$.VALUES_TO_ECI.set(C,this)}for(const g of h)$.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new W("incorect value");const i=$.VALUES_TO_ECI.get(e);if(i===void 0)throw new W("incorect value");return i}static getCharacterSetECIByName(e){const i=$.NAME_TO_ECI.get(e);if(i===void 0)throw new W("incorect value");return i}equals(e){if(!(e instanceof $))return!1;const i=e;return this.getName()===i.getName()}}$.VALUE_IDENTIFIER_TO_ECI=new Map,$.VALUES_TO_ECI=new Map,$.NAME_TO_ECI=new Map,$.Cp437=new $(X.Cp437,Int32Array.from([0,2]),"Cp437"),$.ISO8859_1=new $(X.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),$.ISO8859_2=new $(X.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),$.ISO8859_3=new $(X.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),$.ISO8859_4=new $(X.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),$.ISO8859_5=new $(X.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),$.ISO8859_6=new $(X.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),$.ISO8859_7=new $(X.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),$.ISO8859_8=new $(X.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),$.ISO8859_9=new $(X.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),$.ISO8859_10=new $(X.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),$.ISO8859_11=new $(X.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),$.ISO8859_13=new $(X.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),$.ISO8859_14=new $(X.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),$.ISO8859_15=new $(X.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),$.ISO8859_16=new $(X.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),$.SJIS=new $(X.SJIS,20,"SJIS","Shift_JIS"),$.Cp1250=new $(X.Cp1250,21,"Cp1250","windows-1250"),$.Cp1251=new $(X.Cp1251,22,"Cp1251","windows-1251"),$.Cp1252=new $(X.Cp1252,23,"Cp1252","windows-1252"),$.Cp1256=new $(X.Cp1256,24,"Cp1256","windows-1256"),$.UnicodeBigUnmarked=new $(X.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),$.UTF8=new $(X.UTF8,26,"UTF8","UTF-8"),$.ASCII=new $(X.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),$.Big5=new $(X.Big5,28,"Big5"),$.GB18030=new $(X.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),$.EUC_KR=new $(X.EUC_KR,30,"EUC_KR","EUC-KR");class Q extends y{}Q.kind="UnsupportedOperationException";class ue{static decode(e,i){const a=this.encodingName(i);return this.customDecoder?this.customDecoder(e,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(e,a):new TextDecoder(a).decode(e)}static shouldDecodeOnFallback(e){return!ue.isBrowser()&&e==="ISO-8859-1"}static encode(e,i){const a=this.encodingName(i);return this.customEncoder?this.customEncoder(e,a):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof $?e:$.getCharacterSetECIByName(e)}static decodeFallback(e,i){const a=this.encodingCharacterSet(i);if(ue.isDecodeFallbackSupported(a)){let h="";for(let f=0,g=e.length;f<g;f++){let x=e[f].toString(16);x.length<2&&(x="0"+x),h+="%"+x}return decodeURIComponent(h)}if(a.equals($.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Q(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals($.UTF8)||e.equals($.ISO8859_1)||e.equals($.ASCII)}static encodeFallback(e){const a=btoa(unescape(encodeURIComponent(e))).split(""),h=[];for(let f=0;f<a.length;f++)h.push(a[f].charCodeAt(0));return new Uint8Array(h)}}class ae{static castAsNonUtf8Char(e,i=null){const a=i?i.getName():this.ISO88591;return ue.decode(new Uint8Array([e]),a)}static guessEncoding(e,i){if(i!=null&&i.get(Y.CHARACTER_SET)!==void 0)return i.get(Y.CHARACTER_SET).toString();const a=e.length;let h=!0,f=!0,g=!0,x=0,C=0,E=0,T=0,P=0,F=0,q=0,ne=0,se=0,de=0,ye=0;const Ue=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let ze=0;ze<a&&(h||f||g);ze++){const De=e[ze]&255;g&&(x>0?(De&128)===0?g=!1:x--:(De&128)!==0&&((De&64)===0?g=!1:(x++,(De&32)===0?C++:(x++,(De&16)===0?E++:(x++,(De&8)===0?T++:g=!1))))),h&&(De>127&&De<160?h=!1:De>159&&(De<192||De===215||De===247)&&ye++),f&&(P>0?De<64||De===127||De>252?f=!1:P--:De===128||De===160||De>239?f=!1:De>160&&De<224?(F++,ne=0,q++,q>se&&(se=q)):De>127?(P++,q=0,ne++,ne>de&&(de=ne)):(q=0,ne=0))}return g&&x>0&&(g=!1),f&&P>0&&(f=!1),g&&(Ue||C+E+T>0)?ae.UTF8:f&&(ae.ASSUME_SHIFT_JIS||se>=3||de>=3)?ae.SHIFT_JIS:h&&f?se===2&&F===2||ye*10>=a?ae.SHIFT_JIS:ae.ISO88591:h?ae.ISO88591:f?ae.SHIFT_JIS:g?ae.UTF8:ae.PLATFORM_DEFAULT_ENCODING}static format(e,...i){let a=-1;function h(g,x,C,E,T,P){if(g==="%%")return"%";if(i[++a]===void 0)return;g=E?parseInt(E.substr(1)):void 0;let F=T?parseInt(T.substr(1)):void 0,q;switch(P){case"s":q=i[a];break;case"c":q=i[a][0];break;case"f":q=parseFloat(i[a]).toFixed(g);break;case"p":q=parseFloat(i[a]).toPrecision(g);break;case"e":q=parseFloat(i[a]).toExponential(g);break;case"x":q=parseInt(i[a]).toString(F||16);break;case"d":q=parseFloat(parseInt(i[a],F||10).toPrecision(g)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(F);let ne=parseInt(C),se=C&&C[0]+""=="0"?"0":" ";for(;q.length<ne;)q=x!==void 0?q+se:se+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(f,h)}static getBytes(e,i){return ue.encode(e,i)}static getCharCode(e,i=0){return e.charCodeAt(i)}static getCharAt(e){return String.fromCharCode(e)}}ae.SHIFT_JIS=$.SJIS.getName(),ae.GB2312="GB2312",ae.ISO88591=$.ISO8859_1.getName(),ae.EUC_JP="EUC_JP",ae.UTF8=$.UTF8.getName(),ae.PLATFORM_DEFAULT_ENCODING=ae.UTF8,ae.ASSUME_SHIFT_JIS=!1;class te{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ae.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,i,a){for(let h=i;i<i+a;h++)this.append(e[h]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,i){this.value=this.value.substr(0,e)+i+this.value.substr(e+1)}substring(e,i){return this.value.substring(e,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,i){this.value=this.value.substr(0,e)+i+this.value.substr(e+i.length)}}class fe{constructor(e,i,a,h){if(this.width=e,this.height=i,this.rowSize=a,this.bits=h,i==null&&(i=e),this.height=i,e<1||i<1)throw new A("Both dimensions must be greater than 0");a==null&&(a=Math.floor((e+31)/32)),this.rowSize=a,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const i=e.length,a=e[0].length,h=new fe(a,i);for(let f=0;f<i;f++){const g=e[f];for(let x=0;x<a;x++)g[x]&&h.set(x,f)}return h}static parseFromString(e,i,a){if(e===null)throw new A("stringRepresentation cannot be null");const h=new Array(e.length);let f=0,g=0,x=-1,C=0,E=0;for(;E<e.length;)if(e.charAt(E)===`
`||e.charAt(E)==="\r"){if(f>g){if(x===-1)x=f-g;else if(f-g!==x)throw new A("row lengths do not match");g=f,C++}E++}else if(e.substring(E,E+i.length)===i)E+=i.length,h[f]=!0,f++;else if(e.substring(E,E+a.length)===a)E+=a.length,h[f]=!1,f++;else throw new A("illegal character encountered: "+e.substring(E));if(f>g){if(x===-1)x=f-g;else if(f-g!==x)throw new A("row lengths do not match");C++}const T=new fe(x,C);for(let P=0;P<f;P++)h[P]&&T.set(Math.floor(P%x),Math.floor(P/x));return T}get(e,i){const a=i*this.rowSize+Math.floor(e/32);return(this.bits[a]>>>(e&31)&1)!==0}set(e,i){const a=i*this.rowSize+Math.floor(e/32);this.bits[a]|=1<<(e&31)&4294967295}unset(e,i){const a=i*this.rowSize+Math.floor(e/32);this.bits[a]&=~(1<<(e&31)&4294967295)}flip(e,i){const a=i*this.rowSize+Math.floor(e/32);this.bits[a]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new A("input matrix dimensions do not match");const i=new U(Math.floor(this.width/32)+1),a=this.rowSize,h=this.bits;for(let f=0,g=this.height;f<g;f++){const x=f*a,C=e.getRow(f,i).getBitArray();for(let E=0;E<a;E++)h[x+E]^=C[E]}}clear(){const e=this.bits,i=e.length;for(let a=0;a<i;a++)e[a]=0}setRegion(e,i,a,h){if(i<0||e<0)throw new A("Left and top must be nonnegative");if(h<1||a<1)throw new A("Height and width must be at least 1");const f=e+a,g=i+h;if(g>this.height||f>this.width)throw new A("The region must fit inside the matrix");const x=this.rowSize,C=this.bits;for(let E=i;E<g;E++){const T=E*x;for(let P=e;P<f;P++)C[T+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(e,i){i==null||i.getSize()<this.width?i=new U(this.width):i.clear();const a=this.rowSize,h=this.bits,f=e*a;for(let g=0;g<a;g++)i.setBulk(g*32,h[f+g]);return i}setRow(e,i){j.arraycopy(i.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),i=this.getHeight();let a=new U(e),h=new U(e);for(let f=0,g=Math.floor((i+1)/2);f<g;f++)a=this.getRow(f,a),h=this.getRow(i-1-f,h),a.reverse(),h.reverse(),this.setRow(f,h),this.setRow(i-1-f,a)}getEnclosingRectangle(){const e=this.width,i=this.height,a=this.rowSize,h=this.bits;let f=e,g=i,x=-1,C=-1;for(let E=0;E<i;E++)for(let T=0;T<a;T++){const P=h[E*a+T];if(P!==0){if(E<g&&(g=E),E>C&&(C=E),T*32<f){let F=0;for(;(P<<31-F&4294967295)===0;)F++;T*32+F<f&&(f=T*32+F)}if(T*32+31>x){let F=31;for(;!(P>>>F);)F--;T*32+F>x&&(x=T*32+F)}}}return x<f||C<g?null:Int32Array.from([f,g,x-f+1,C-g+1])}getTopLeftOnBit(){const e=this.rowSize,i=this.bits;let a=0;for(;a<i.length&&i[a]===0;)a++;if(a===i.length)return null;const h=a/e;let f=a%e*32;const g=i[a];let x=0;for(;(g<<31-x&4294967295)===0;)x++;return f+=x,Int32Array.from([f,h])}getBottomRightOnBit(){const e=this.rowSize,i=this.bits;let a=i.length-1;for(;a>=0&&i[a]===0;)a--;if(a<0)return null;const h=Math.floor(a/e);let f=Math.floor(a%e)*32;const g=i[a];let x=31;for(;!(g>>>x);)x--;return f+=x,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof fe))return!1;const i=e;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&z.equals(this.bits,i.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+z.hashCode(this.bits),e}toString(e="X ",i="  ",a=`
`){return this.buildToString(e,i,a)}buildToString(e,i,a){let h=new te;for(let f=0,g=this.height;f<g;f++){for(let x=0,C=this.width;x<C;x++)h.append(this.get(x,f)?e:i);h.append(a)}return h.toString()}clone(){return new fe(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends y{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class Ae extends D{constructor(e){super(e),this.luminances=Ae.EMPTY,this.buckets=new Int32Array(Ae.LUMINANCE_BUCKETS)}getBlackRow(e,i){const a=this.getLuminanceSource(),h=a.getWidth();i==null||i.getSize()<h?i=new U(h):i.clear(),this.initArrays(h);const f=a.getRow(e,this.luminances),g=this.buckets;for(let C=0;C<h;C++)g[(f[C]&255)>>Ae.LUMINANCE_SHIFT]++;const x=Ae.estimateBlackPoint(g);if(h<3)for(let C=0;C<h;C++)(f[C]&255)<x&&i.set(C);else{let C=f[0]&255,E=f[1]&255;for(let T=1;T<h-1;T++){const P=f[T+1]&255;(E*4-C-P)/2<x&&i.set(T),C=E,E=P}}return i}getBlackMatrix(){const e=this.getLuminanceSource(),i=e.getWidth(),a=e.getHeight(),h=new fe(i,a);this.initArrays(i);const f=this.buckets;for(let C=1;C<5;C++){const E=Math.floor(a*C/5),T=e.getRow(E,this.luminances),P=Math.floor(i*4/5);for(let F=Math.floor(i/5);F<P;F++){const q=T[F]&255;f[q>>Ae.LUMINANCE_SHIFT]++}}const g=Ae.estimateBlackPoint(f),x=e.getMatrix();for(let C=0;C<a;C++){const E=C*i;for(let T=0;T<i;T++)(x[E+T]&255)<g&&h.set(T,C)}return h}createBinarizer(e){return new Ae(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const i=this.buckets;for(let a=0;a<Ae.LUMINANCE_BUCKETS;a++)i[a]=0}static estimateBlackPoint(e){const i=e.length;let a=0,h=0,f=0;for(let T=0;T<i;T++)e[T]>f&&(h=T,f=e[T]),e[T]>a&&(a=e[T]);let g=0,x=0;for(let T=0;T<i;T++){const P=T-h,F=e[T]*P*P;F>x&&(g=T,x=F)}if(h>g){const T=h;h=g,g=T}if(g-h<=i/16)throw new ee;let C=g-1,E=-1;for(let T=g-1;T>h;T--){const P=T-h,F=P*P*(g-T)*(a-e[T]);F>E&&(C=T,E=F)}return C<<Ae.LUMINANCE_SHIFT}}Ae.LUMINANCE_BITS=5,Ae.LUMINANCE_SHIFT=8-Ae.LUMINANCE_BITS,Ae.LUMINANCE_BUCKETS=1<<Ae.LUMINANCE_BITS,Ae.EMPTY=Uint8ClampedArray.from([0]);class _e extends Ae{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),i=e.getWidth(),a=e.getHeight();if(i>=_e.MINIMUM_DIMENSION&&a>=_e.MINIMUM_DIMENSION){const h=e.getMatrix();let f=i>>_e.BLOCK_SIZE_POWER;(i&_e.BLOCK_SIZE_MASK)!==0&&f++;let g=a>>_e.BLOCK_SIZE_POWER;(a&_e.BLOCK_SIZE_MASK)!==0&&g++;const x=_e.calculateBlackPoints(h,f,g,i,a),C=new fe(i,a);_e.calculateThresholdForBlock(h,f,g,i,a,x,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new _e(e)}static calculateThresholdForBlock(e,i,a,h,f,g,x){const C=f-_e.BLOCK_SIZE,E=h-_e.BLOCK_SIZE;for(let T=0;T<a;T++){let P=T<<_e.BLOCK_SIZE_POWER;P>C&&(P=C);const F=_e.cap(T,2,a-3);for(let q=0;q<i;q++){let ne=q<<_e.BLOCK_SIZE_POWER;ne>E&&(ne=E);const se=_e.cap(q,2,i-3);let de=0;for(let Ue=-2;Ue<=2;Ue++){const ze=g[F+Ue];de+=ze[se-2]+ze[se-1]+ze[se]+ze[se+1]+ze[se+2]}const ye=de/25;_e.thresholdBlock(e,ne,P,ye,h,x)}}}static cap(e,i,a){return e<i?i:e>a?a:e}static thresholdBlock(e,i,a,h,f,g){for(let x=0,C=a*f+i;x<_e.BLOCK_SIZE;x++,C+=f)for(let E=0;E<_e.BLOCK_SIZE;E++)(e[C+E]&255)<=h&&g.set(i+E,a+x)}static calculateBlackPoints(e,i,a,h,f){const g=f-_e.BLOCK_SIZE,x=h-_e.BLOCK_SIZE,C=new Array(a);for(let E=0;E<a;E++){C[E]=new Int32Array(i);let T=E<<_e.BLOCK_SIZE_POWER;T>g&&(T=g);for(let P=0;P<i;P++){let F=P<<_e.BLOCK_SIZE_POWER;F>x&&(F=x);let q=0,ne=255,se=0;for(let ye=0,Ue=T*h+F;ye<_e.BLOCK_SIZE;ye++,Ue+=h){for(let ze=0;ze<_e.BLOCK_SIZE;ze++){const De=e[Ue+ze]&255;q+=De,De<ne&&(ne=De),De>se&&(se=De)}if(se-ne>_e.MIN_DYNAMIC_RANGE)for(ye++,Ue+=h;ye<_e.BLOCK_SIZE;ye++,Ue+=h)for(let ze=0;ze<_e.BLOCK_SIZE;ze++)q+=e[Ue+ze]&255}let de=q>>_e.BLOCK_SIZE_POWER*2;if(se-ne<=_e.MIN_DYNAMIC_RANGE&&(de=ne/2,E>0&&P>0)){const ye=(C[E-1][P]+2*C[E][P-1]+C[E-1][P-1])/4;ne<ye&&(de=ye)}C[E][P]=de}}return C}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class le{constructor(e,i){this.width=e,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,i,a,h){throw new Q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Q("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let i=new te;for(let a=0;a<this.height;a++){const h=this.getRow(a,e);for(let f=0;f<this.width;f++){const g=h[f]&255;let x;g<64?x="#":g<128?x="+":g<192?x=".":x=" ",i.append(x)}i.append(`
`)}return i.toString()}}class ce extends le{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,i){const a=this.delegate.getRow(e,i),h=this.getWidth();for(let f=0;f<h;f++)a[f]=255-(a[f]&255);return a}getMatrix(){const e=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(i);for(let h=0;h<i;h++)a[h]=255-(e[h]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(e,i,a,h){return new ce(this.delegate.crop(e,i,a,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ce(this.delegate.rotateCounterClockwise45())}}class he extends le{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=he.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const i=e.getContext("2d").getImageData(0,0,e.width,e.height);return he.toGrayscaleBuffer(i.data,e.width,e.height)}static toGrayscaleBuffer(e,i,a){const h=new Uint8ClampedArray(i*a);for(let f=0,g=0,x=e.length;f<x;f+=4,g++){let C;if(e[f+3]===0)C=255;else{const T=e[f],P=e[f+1],F=e[f+2];C=306*T+601*P+117*F+512>>10}h[g]=C}return h}getRow(e,i){if(e<0||e>=this.getHeight())throw new A("Requested row is outside the image: "+e);const a=this.getWidth(),h=e*a;return i===null?i=this.buffer.slice(h,h+a):(i.length<a&&(i=new Uint8ClampedArray(a)),i.set(this.buffer.slice(h,h+a))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,i,a,h){return super.crop(e,i,a,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const i=this.getTempCanvasElement(),a=i.getContext("2d"),h=e*he.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*g),C=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*g);return i.width=x,i.height=C,a.translate(x/2,C/2),a.rotate(h),a.drawImage(this.canvas,f/-2,g/-2),this.buffer=he.makeBufferFromCanvasImageData(i),this}invert(){return new ce(this)}}he.DEGREE_TO_RADIANS=Math.PI/180;class K{constructor(e,i,a){this.deviceId=e,this.label=i,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var pe=(globalThis||Su||self||window||void 0)&&(globalThis||Su||self||window||void 0).__awaiter||function(O,e,i,a){function h(f){return f instanceof i?f:new i(function(g){g(f)})}return new(i||(i=Promise))(function(f,g){function x(T){try{E(a.next(T))}catch(P){g(P)}}function C(T){try{E(a.throw(T))}catch(P){g(P)}}function E(T){T.done?f(T.value):h(T.value).then(x,C)}E((a=a.apply(O,e||[])).next())})};class Be{constructor(e,i=500,a){this.reader=e,this.timeBetweenScansMillis=i,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const a of e){const h=a.kind==="video"?"videoinput":a.kind;if(h!=="videoinput")continue;const f=a.deviceId||a.id,g=a.label||`Video device ${i.length+1}`,x=a.groupId,C={deviceId:f,label:g,kind:h,groupId:x};i.push(C)}return i})}getVideoInputDevices(){return pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new K(i.deviceId,i.label))})}findDeviceById(e){return pe(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(a=>a.deviceId===e):null})}decodeFromInputVideoDevice(e,i){return pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,i)})}decodeOnceFromVideoDevice(e,i){return pe(this,void 0,void 0,function*(){this.reset();let a;e?a={deviceId:{exact:e}}:a={facingMode:"environment"};const h={video:a};return yield this.decodeOnceFromConstraints(h,i)})}decodeOnceFromConstraints(e,i){return pe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(a,i)})}decodeOnceFromStream(e,i){return pe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(e,i);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(e,i,a){return pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,i,a)})}decodeFromVideoDevice(e,i,a){return pe(this,void 0,void 0,function*(){let h;e?h={deviceId:{exact:e}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,i,a)})}decodeFromConstraints(e,i,a){return pe(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(h,i,a)})}decodeFromStream(e,i,a){return pe(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(e,i);return yield this.decodeContinuously(h,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,i){return pe(this,void 0,void 0,function*(){const a=this.prepareVideoElement(i);return this.addVideoSource(a,e),this.videoElement=a,this.stream=e,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(e){return new Promise((i,a)=>this.playVideoOnLoad(e,()=>i()))}playVideoOnLoad(e,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",i),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,i){const a=document.getElementById(e);if(!a)throw new _(`element with id '${e}' not found`);if(a.nodeName.toLowerCase()!==i.toLowerCase())throw new _(`element with id '${e}' must be an ${i} element`);return a}decodeFromImage(e,i){if(!e&&!i)throw new _("either imageElement with a src set or an url must be provided");return i&&!e?this.decodeFromImageUrl(i):this.decodeFromImageElement(e)}decodeFromVideo(e,i){if(!e&&!i)throw new _("Either an element with a src set or an URL must be provided");return i&&!e?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,i,a){if(e===void 0&&i===void 0)throw new _("Either an element with a src set or an URL must be provided");return i&&!e?this.decodeFromVideoUrlContinuously(i,a):this.decodeFromVideoElementContinuously(e,a)}decodeFromImageElement(e){if(!e)throw new _("An image element must be provided.");this.reset();const i=this.prepareImageElement(e);this.imageElement=i;let a;return this.isImageLoaded(i)?a=this.decodeOnce(i,!1,!0):a=this._decodeOnLoadImage(i),a}decodeFromVideoElement(e){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(e,i){const a=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(a,i)}_decodeFromVideoElementSetup(e){if(!e)throw new _("A video element must be provided.");this.reset();const i=this.prepareVideoElement(e);return this.videoElement=i,i}decodeFromImageUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const a=this._decodeOnLoadImage(i);return i.src=e,a}decodeFromVideoUrl(e){if(!e)throw new _("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElement(i);return i.src=e,a}decodeFromVideoUrlContinuously(e,i){if(!e)throw new _("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(a,i);return a.src=e,h}_decodeOnLoadImage(e){return new Promise((i,a)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(i,a),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,i){return pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,i)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let i;return typeof e>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof e=="string"&&(i=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(i=e),i}prepareVideoElement(e){let i;return!e&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof e=="string"&&(i=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(i=e),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(e,i=!0,a=!0){this._stopAsyncDecode=!1;const h=(f,g)=>{if(this._stopAsyncDecode){g(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(e);f(x)}catch(x){const C=i&&x instanceof ee,T=(x instanceof R||x instanceof W)&&a;if(C||T)return setTimeout(h,this._timeBetweenDecodingAttempts,f,g);g(x)}};return new Promise((f,g)=>h(f,g))}decodeContinuously(e,i){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(e);i(h,null),setTimeout(a,this.timeBetweenScansMillis)}catch(h){i(null,h);const f=h instanceof R||h instanceof W,g=h instanceof ee;(f||g)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(e){const i=this.createBinaryBitmap(e);return this.decodeBitmap(i)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,i,a){i||(i={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(e,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(e,i,a=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(e,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const i=this.getCaptureCanvas(e),a=new he(i),h=new _e(a);return new k(h)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const i=this.createCaptureCanvas(e);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let a,h;return typeof e<"u"&&(e instanceof HTMLVideoElement?(a=e.videoWidth,h=e.videoHeight):e instanceof HTMLImageElement&&(a=e.naturalWidth||e.width,h=e.naturalHeight||e.height)),i.style.width=a+"px",i.style.height=h+"px",i.width=a,i.height=h,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,i){try{e.srcObject=i}catch{e.src=URL.createObjectURL(i)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Ve{constructor(e,i,a=i==null?0:8*i.length,h,f,g=j.currentTimeMillis()){this.text=e,this.rawBytes=i,this.numBits=a,this.resultPoints=h,this.format=f,this.timestamp=g,this.text=e,this.rawBytes=i,a==null?this.numBits=i==null?0:8*i.length:this.numBits=a,this.resultPoints=h,this.format=f,this.resultMetadata=null,g==null?this.timestamp=j.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,i)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const i=this.resultPoints;if(i===null)this.resultPoints=e;else if(e!==null&&e.length>0){const a=new Array(i.length+e.length);j.arraycopy(i,0,a,0,i.length),j.arraycopy(e,0,a,i.length,e.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ee;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ee||(Ee={}));var we=Ee,Ce;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ce||(Ce={}));var Re=Ce;class qe{constructor(e,i,a,h,f=-1,g=-1){this.rawBytes=e,this.text=i,this.byteSegments=a,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=g,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ke{exp(e){return this.expTable[e]}log(e){if(e===0)throw new A;return this.logTable[e]}static addOrSubtract(e,i){return e^i}}class We{constructor(e,i){if(i.length===0)throw new A;this.field=e;const a=i.length;if(a>1&&i[0]===0){let h=1;for(;h<a&&i[h]===0;)h++;h===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-h),j.arraycopy(i,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const i=this.coefficients;let a;if(e===1){a=0;for(let g=0,x=i.length;g!==x;g++){const C=i[g];a=Ke.addOrSubtract(a,C)}return a}a=i[0];const h=i.length,f=this.field;for(let g=1;g<h;g++)a=Ke.addOrSubtract(f.multiply(e,a),i[g]);return a}addOrSubtract(e){if(!this.field.equals(e.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let i=this.coefficients,a=e.coefficients;if(i.length>a.length){const g=i;i=a,a=g}let h=new Int32Array(a.length);const f=a.length-i.length;j.arraycopy(a,0,h,0,f);for(let g=f;g<a.length;g++)h[g]=Ke.addOrSubtract(i[g-f],a[g]);return new We(this.field,h)}multiply(e){if(!this.field.equals(e.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const i=this.coefficients,a=i.length,h=e.coefficients,f=h.length,g=new Int32Array(a+f-1),x=this.field;for(let C=0;C<a;C++){const E=i[C];for(let T=0;T<f;T++)g[C+T]=Ke.addOrSubtract(g[C+T],x.multiply(E,h[T]))}return new We(x,g)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const i=this.coefficients.length,a=this.field,h=new Int32Array(i),f=this.coefficients;for(let g=0;g<i;g++)h[g]=a.multiply(f[g],e);return new We(a,h)}multiplyByMonomial(e,i){if(e<0)throw new A;if(i===0)return this.field.getZero();const a=this.coefficients,h=a.length,f=new Int32Array(h+e),g=this.field;for(let x=0;x<h;x++)f[x]=g.multiply(a[x],i);return new We(g,f)}divide(e){if(!this.field.equals(e.field))throw new A("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new A("Divide by 0");const i=this.field;let a=i.getZero(),h=this;const f=e.getCoefficient(e.getDegree()),g=i.inverse(f);for(;h.getDegree()>=e.getDegree()&&!h.isZero();){const x=h.getDegree()-e.getDegree(),C=i.multiply(h.getCoefficient(h.getDegree()),g),E=e.multiplyByMonomial(x,C),T=i.buildMonomial(x,C);a=a.addOrSubtract(T),h=h.addOrSubtract(E)}return[a,h]}toString(){let e="";for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);if(a!==0){if(a<0?(e+=" - ",a=-a):e.length>0&&(e+=" + "),i===0||a!==1){const h=this.field.log(a);h===0?e+="1":h===1?e+="a":(e+="a^",e+=h)}i!==0&&(i===1?e+="x":(e+="x^",e+=i))}}return e}}class Ct extends y{}Ct.kind="ArithmeticException";class nt extends Ke{constructor(e,i,a){super(),this.primitive=e,this.size=i,this.generatorBase=a;const h=new Int32Array(i);let f=1;for(let x=0;x<i;x++)h[x]=f,f*=2,f>=i&&(f^=e,f&=i-1);this.expTable=h;const g=new Int32Array(i);for(let x=0;x<i-1;x++)g[h[x]]=x;this.logTable=g,this.zero=new We(this,Int32Array.from([0])),this.one=new We(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,i){if(e<0)throw new A;if(i===0)return this.zero;const a=new Int32Array(e+1);return a[0]=i,new We(this,a)}inverse(e){if(e===0)throw new Ct;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,i){return e===0||i===0?0:this.expTable[(this.logTable[e]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}nt.AZTEC_DATA_12=new nt(4201,4096,1),nt.AZTEC_DATA_10=new nt(1033,1024,1),nt.AZTEC_DATA_6=new nt(67,64,1),nt.AZTEC_PARAM=new nt(19,16,1),nt.QR_CODE_FIELD_256=new nt(285,256,0),nt.DATA_MATRIX_FIELD_256=new nt(301,256,1),nt.AZTEC_DATA_8=nt.DATA_MATRIX_FIELD_256,nt.MAXICODE_FIELD_64=nt.AZTEC_DATA_6;class Wt extends y{}Wt.kind="ReedSolomonException";class Oe extends y{}Oe.kind="IllegalStateException";class rt{constructor(e){this.field=e}decode(e,i){const a=this.field,h=new We(a,e),f=new Int32Array(i);let g=!0;for(let q=0;q<i;q++){const ne=h.evaluateAt(a.exp(q+a.getGeneratorBase()));f[f.length-1-q]=ne,ne!==0&&(g=!1)}if(g)return;const x=new We(a,f),C=this.runEuclideanAlgorithm(a.buildMonomial(i,1),x,i),E=C[0],T=C[1],P=this.findErrorLocations(E),F=this.findErrorMagnitudes(T,P);for(let q=0;q<P.length;q++){const ne=e.length-1-a.log(P[q]);if(ne<0)throw new Wt("Bad error location");e[ne]=nt.addOrSubtract(e[ne],F[q])}}runEuclideanAlgorithm(e,i,a){if(e.getDegree()<i.getDegree()){const q=e;e=i,i=q}const h=this.field;let f=e,g=i,x=h.getZero(),C=h.getOne();for(;g.getDegree()>=(a/2|0);){let q=f,ne=x;if(f=g,x=C,f.isZero())throw new Wt("r_{i-1} was zero");g=q;let se=h.getZero();const de=f.getCoefficient(f.getDegree()),ye=h.inverse(de);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){const Ue=g.getDegree()-f.getDegree(),ze=h.multiply(g.getCoefficient(g.getDegree()),ye);se=se.addOrSubtract(h.buildMonomial(Ue,ze)),g=g.addOrSubtract(f.multiplyByMonomial(Ue,ze))}if(C=se.multiply(x).addOrSubtract(ne),g.getDegree()>=f.getDegree())throw new Oe("Division algorithm failed to reduce polynomial?")}const E=C.getCoefficient(0);if(E===0)throw new Wt("sigmaTilde(0) was zero");const T=h.inverse(E),P=C.multiplyScalar(T),F=g.multiplyScalar(T);return[P,F]}findErrorLocations(e){const i=e.getDegree();if(i===1)return Int32Array.from([e.getCoefficient(1)]);const a=new Int32Array(i);let h=0;const f=this.field;for(let g=1;g<f.getSize()&&h<i;g++)e.evaluateAt(g)===0&&(a[h]=f.inverse(g),h++);if(h!==i)throw new Wt("Error locator degree does not match number of roots");return a}findErrorMagnitudes(e,i){const a=i.length,h=new Int32Array(a),f=this.field;for(let g=0;g<a;g++){const x=f.inverse(i[g]);let C=1;for(let E=0;E<a;E++)if(g!==E){const T=f.multiply(i[E],x),P=(T&1)===0?T|1:T&-2;C=f.multiply(C,P)}h[g]=f.multiply(e.evaluateAt(x),f.inverse(C)),f.getGeneratorBase()!==0&&(h[g]=f.multiply(h[g],x))}return h}}var J;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(J||(J={}));class Se{decode(e){this.ddata=e;let i=e.getBits(),a=this.extractBits(i),h=this.correctBits(a),f=Se.convertBoolArrayToByteArray(h),g=Se.getEncodedData(h),x=new qe(f,g,null,null);return x.setNumBits(h.length),x}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let i=e.length,a=J.UPPER,h=J.UPPER,f="",g=0;for(;g<i;)if(h===J.BINARY){if(i-g<5)break;let x=Se.readCode(e,g,5);if(g+=5,x===0){if(i-g<11)break;x=Se.readCode(e,g,11)+31,g+=11}for(let C=0;C<x;C++){if(i-g<8){g=i;break}const E=Se.readCode(e,g,8);f+=ae.castAsNonUtf8Char(E),g+=8}h=a}else{let x=h===J.DIGIT?4:5;if(i-g<x)break;let C=Se.readCode(e,g,x);g+=x;let E=Se.getCharacter(h,C);E.startsWith("CTRL_")?(a=h,h=Se.getTable(E.charAt(5)),E.charAt(6)==="L"&&(a=h)):(f+=E,h=a)}return f}static getTable(e){switch(e){case"L":return J.LOWER;case"P":return J.PUNCT;case"M":return J.MIXED;case"D":return J.DIGIT;case"B":return J.BINARY;case"U":default:return J.UPPER}}static getCharacter(e,i){switch(e){case J.UPPER:return Se.UPPER_TABLE[i];case J.LOWER:return Se.LOWER_TABLE[i];case J.MIXED:return Se.MIXED_TABLE[i];case J.PUNCT:return Se.PUNCT_TABLE[i];case J.DIGIT:return Se.DIGIT_TABLE[i];default:throw new Oe("Bad table")}}correctBits(e){let i,a;this.ddata.getNbLayers()<=2?(a=6,i=nt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,i=nt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,i=nt.AZTEC_DATA_10):(a=12,i=nt.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=e.length/a;if(f<h)throw new W;let g=e.length%a,x=new Int32Array(f);for(let F=0;F<f;F++,g+=a)x[F]=Se.readCode(e,g,a);try{new rt(i).decode(x,f-h)}catch(F){throw new W(F)}let C=(1<<a)-1,E=0;for(let F=0;F<h;F++){let q=x[F];if(q===0||q===C)throw new W;(q===1||q===C-1)&&E++}let T=new Array(h*a-E),P=0;for(let F=0;F<h;F++){let q=x[F];if(q===1||q===C-1)T.fill(q>1,P,P+a-1),P+=a-1;else for(let ne=a-1;ne>=0;--ne)T[P++]=(q&1<<ne)!==0}return T}extractBits(e){let i=this.ddata.isCompact(),a=this.ddata.getNbLayers(),h=(i?11:14)+a*4,f=new Int32Array(h),g=new Array(this.totalBitsInLayer(a,i));if(i)for(let x=0;x<f.length;x++)f[x]=x;else{let x=h+1+2*B.truncDivision(B.truncDivision(h,2)-1,15),C=h/2,E=B.truncDivision(x,2);for(let T=0;T<C;T++){let P=T+B.truncDivision(T,15);f[C-T-1]=E-P-1,f[C+T]=E+P+1}}for(let x=0,C=0;x<a;x++){let E=(a-x)*4+(i?9:12),T=x*2,P=h-1-T;for(let F=0;F<E;F++){let q=F*2;for(let ne=0;ne<2;ne++)g[C+q+ne]=e.get(f[T+ne],f[T+F]),g[C+2*E+q+ne]=e.get(f[T+F],f[P-ne]),g[C+4*E+q+ne]=e.get(f[P-ne],f[P-F]),g[C+6*E+q+ne]=e.get(f[P-F],f[T+ne])}C+=E*8}return g}static readCode(e,i,a){let h=0;for(let f=i;f<i+a;f++)h<<=1,e[f]&&(h|=1);return h}static readByte(e,i){let a=e.length-i;return a>=8?Se.readCode(e,i,8):Se.readCode(e,i,a)<<8-a}static convertBoolArrayToByteArray(e){let i=new Uint8Array((e.length+7)/8);for(let a=0;a<i.length;a++)i[a]=Se.readByte(e,8*a);return i}totalBitsInLayer(e,i){return((i?88:112)+16*e)*e}}Se.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Se.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Se.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Se.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Se.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Le{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,i,a,h){const f=e-a,g=i-h;return Math.sqrt(f*f+g*g)}static sum(e){let i=0;for(let a=0,h=e.length;a!==h;a++){const f=e[a];i+=f}return i}}class bt{static floatToIntBits(e){return e}}bt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ke{constructor(e,i){this.x=e,this.y=i}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ke){const i=e;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*bt.floatToIntBits(this.x)+bt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const i=this.distance(e[0],e[1]),a=this.distance(e[1],e[2]),h=this.distance(e[0],e[2]);let f,g,x;if(a>=i&&a>=h?(g=e[0],f=e[1],x=e[2]):h>=a&&h>=i?(g=e[1],f=e[0],x=e[2]):(g=e[2],f=e[0],x=e[1]),this.crossProductZ(f,g,x)<0){const C=f;f=x,x=C}e[0]=f,e[1]=g,e[2]=x}static distance(e,i){return Le.distance(e.x,e.y,i.x,i.y)}static crossProductZ(e,i,a){const h=i.x,f=i.y;return(a.x-h)*(e.y-f)-(a.y-f)*(e.x-h)}}class Xt{constructor(e,i){this.bits=e,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class lt extends Xt{constructor(e,i,a,h,f){super(e,i),this.compact=a,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mt{constructor(e,i,a,h){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),i==null&&(i=mt.INIT_SIZE),a==null&&(a=e.getWidth()/2|0),h==null&&(h=e.getHeight()/2|0);const f=i/2|0;if(this.leftInit=a-f,this.rightInit=a+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let e=this.leftInit,i=this.rightInit,a=this.upInit,h=this.downInit,f=!1,g=!0,x=!1,C=!1,E=!1,T=!1,P=!1;const F=this.width,q=this.height;for(;g;){g=!1;let ne=!0;for(;(ne||!C)&&i<F;)ne=this.containsBlackPoint(a,h,i,!1),ne?(i++,g=!0,C=!0):C||i++;if(i>=F){f=!0;break}let se=!0;for(;(se||!E)&&h<q;)se=this.containsBlackPoint(e,i,h,!0),se?(h++,g=!0,E=!0):E||h++;if(h>=q){f=!0;break}let de=!0;for(;(de||!T)&&e>=0;)de=this.containsBlackPoint(a,h,e,!1),de?(e--,g=!0,T=!0):T||e--;if(e<0){f=!0;break}let ye=!0;for(;(ye||!P)&&a>=0;)ye=this.containsBlackPoint(e,i,a,!0),ye?(a--,g=!0,P=!0):P||a--;if(a<0){f=!0;break}g&&(x=!0)}if(!f&&x){const ne=i-e;let se=null;for(let ze=1;se===null&&ze<ne;ze++)se=this.getBlackPointOnSegment(e,h-ze,e+ze,h);if(se==null)throw new ee;let de=null;for(let ze=1;de===null&&ze<ne;ze++)de=this.getBlackPointOnSegment(e,a+ze,e+ze,a);if(de==null)throw new ee;let ye=null;for(let ze=1;ye===null&&ze<ne;ze++)ye=this.getBlackPointOnSegment(i,a+ze,i-ze,a);if(ye==null)throw new ee;let Ue=null;for(let ze=1;Ue===null&&ze<ne;ze++)Ue=this.getBlackPointOnSegment(i,h-ze,i-ze,h);if(Ue==null)throw new ee;return this.centerEdges(Ue,se,ye,de)}else throw new ee}getBlackPointOnSegment(e,i,a,h){const f=Le.round(Le.distance(e,i,a,h)),g=(a-e)/f,x=(h-i)/f,C=this.image;for(let E=0;E<f;E++){const T=Le.round(e+E*g),P=Le.round(i+E*x);if(C.get(T,P))return new ke(T,P)}return null}centerEdges(e,i,a,h){const f=e.getX(),g=e.getY(),x=i.getX(),C=i.getY(),E=a.getX(),T=a.getY(),P=h.getX(),F=h.getY(),q=mt.CORR;return f<this.width/2?[new ke(P-q,F+q),new ke(x+q,C+q),new ke(E-q,T-q),new ke(f+q,g-q)]:[new ke(P+q,F+q),new ke(x+q,C-q),new ke(E-q,T+q),new ke(f-q,g-q)]}containsBlackPoint(e,i,a,h){const f=this.image;if(h){for(let g=e;g<=i;g++)if(f.get(g,a))return!0}else for(let g=e;g<=i;g++)if(f.get(a,g))return!0;return!1}}mt.INIT_SIZE=10,mt.CORR=1;class Vn{static checkAndNudgePoints(e,i){const a=e.getWidth(),h=e.getHeight();let f=!0;for(let g=0;g<i.length&&f;g+=2){const x=Math.floor(i[g]),C=Math.floor(i[g+1]);if(x<-1||x>a||C<-1||C>h)throw new ee;f=!1,x===-1?(i[g]=0,f=!0):x===a&&(i[g]=a-1,f=!0),C===-1?(i[g+1]=0,f=!0):C===h&&(i[g+1]=h-1,f=!0)}f=!0;for(let g=i.length-2;g>=0&&f;g-=2){const x=Math.floor(i[g]),C=Math.floor(i[g+1]);if(x<-1||x>a||C<-1||C>h)throw new ee;f=!1,x===-1?(i[g]=0,f=!0):x===a&&(i[g]=a-1,f=!0),C===-1?(i[g+1]=0,f=!0):C===h&&(i[g+1]=h-1,f=!0)}}}class $t{constructor(e,i,a,h,f,g,x,C,E){this.a11=e,this.a21=i,this.a31=a,this.a12=h,this.a22=f,this.a32=g,this.a13=x,this.a23=C,this.a33=E}static quadrilateralToQuadrilateral(e,i,a,h,f,g,x,C,E,T,P,F,q,ne,se,de){const ye=$t.quadrilateralToSquare(e,i,a,h,f,g,x,C);return $t.squareToQuadrilateral(E,T,P,F,q,ne,se,de).times(ye)}transformPoints(e){const i=e.length,a=this.a11,h=this.a12,f=this.a13,g=this.a21,x=this.a22,C=this.a23,E=this.a31,T=this.a32,P=this.a33;for(let F=0;F<i;F+=2){const q=e[F],ne=e[F+1],se=f*q+C*ne+P;e[F]=(a*q+g*ne+E)/se,e[F+1]=(h*q+x*ne+T)/se}}transformPointsWithValues(e,i){const a=this.a11,h=this.a12,f=this.a13,g=this.a21,x=this.a22,C=this.a23,E=this.a31,T=this.a32,P=this.a33,F=e.length;for(let q=0;q<F;q++){const ne=e[q],se=i[q],de=f*ne+C*se+P;e[q]=(a*ne+g*se+E)/de,i[q]=(h*ne+x*se+T)/de}}static squareToQuadrilateral(e,i,a,h,f,g,x,C){const E=e-a+f-x,T=i-h+g-C;if(E===0&&T===0)return new $t(a-e,f-a,e,h-i,g-h,i,0,0,1);{const P=a-f,F=x-f,q=h-g,ne=C-g,se=P*ne-F*q,de=(E*ne-F*T)/se,ye=(P*T-E*q)/se;return new $t(a-e+de*a,x-e+ye*x,e,h-i+de*h,C-i+ye*C,i,de,ye,1)}}static quadrilateralToSquare(e,i,a,h,f,g,x,C){return $t.squareToQuadrilateral(e,i,a,h,f,g,x,C).buildAdjoint()}buildAdjoint(){return new $t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new $t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Et extends Vn{sampleGrid(e,i,a,h,f,g,x,C,E,T,P,F,q,ne,se,de,ye,Ue,ze){const De=$t.quadrilateralToQuadrilateral(h,f,g,x,C,E,T,P,F,q,ne,se,de,ye,Ue,ze);return this.sampleGridWithTransform(e,i,a,De)}sampleGridWithTransform(e,i,a,h){if(i<=0||a<=0)throw new ee;const f=new fe(i,a),g=new Float32Array(2*i);for(let x=0;x<a;x++){const C=g.length,E=x+.5;for(let T=0;T<C;T+=2)g[T]=T/2+.5,g[T+1]=E;h.transformPoints(g),Vn.checkAndNudgePoints(e,g);try{for(let T=0;T<C;T+=2)e.get(Math.floor(g[T]),Math.floor(g[T+1]))&&f.set(T/2,x)}catch{throw new ee}}return f}}class It{static setGridSampler(e){It.gridSampler=e}static getInstance(){return It.gridSampler}}It.gridSampler=new Et;class sn{constructor(e,i){this.x=e,this.y=i}toResultPoint(){return new ke(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Wn{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let i=this.getMatrixCenter(),a=this.getBullsEyeCorners(i);if(e){let g=a[0];a[0]=a[2],a[2]=g}this.extractParameters(a);let h=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),f=this.getMatrixCornerPoints(a);return new lt(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ee;let i=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(e[0],e[1],i),this.sampleLine(e[1],e[2],i),this.sampleLine(e[2],e[3],i),this.sampleLine(e[3],e[0],i)]);this.shift=this.getRotation(a,i);let h=0;for(let g=0;g<4;g++){let x=a[(this.shift+g)%4];this.compact?(h<<=7,h+=x>>1&127):(h<<=10,h+=(x>>2&992)+(x>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(e,i){let a=0;e.forEach((h,f,g)=>{let x=(h>>i-2<<1)+(h&1);a=(a<<3)+x}),a=((a&1)<<11)+(a>>1);for(let h=0;h<4;h++)if(B.bitCount(a^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new ee}getCorrectedParameterData(e,i){let a,h;i?(a=7,h=2):(a=10,h=4);let f=a-h,g=new Int32Array(a);for(let C=a-1;C>=0;--C)g[C]=e&15,e>>=4;try{new rt(nt.AZTEC_PARAM).decode(g,f)}catch{throw new ee}let x=0;for(let C=0;C<h;C++)x=(x<<4)+g[C];return x}getBullsEyeCorners(e){let i=e,a=e,h=e,f=e,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(i,g,1,-1),F=this.getFirstDifferent(a,g,1,1),q=this.getFirstDifferent(h,g,-1,1),ne=this.getFirstDifferent(f,g,-1,-1);if(this.nbCenterLayers>2){let se=this.distancePoint(ne,P)*this.nbCenterLayers/(this.distancePoint(f,i)*(this.nbCenterLayers+2));if(se<.75||se>1.25||!this.isWhiteOrBlackRectangle(P,F,q,ne))break}i=P,a=F,h=q,f=ne,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let x=new ke(i.getX()+.5,i.getY()-.5),C=new ke(a.getX()+.5,a.getY()+.5),E=new ke(h.getX()-.5,h.getY()+.5),T=new ke(f.getX()-.5,f.getY()-.5);return this.expandSquare([x,C,E,T],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,i,a,h;try{let x=new mt(this.image).detect();e=x[0],i=x[1],a=x[2],h=x[3]}catch{let C=this.image.getWidth()/2,E=this.image.getHeight()/2;e=this.getFirstDifferent(new sn(C+7,E-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new sn(C+7,E+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new sn(C-7,E+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new sn(C-7,E-7),!1,-1,-1).toResultPoint()}let f=Le.round((e.getX()+h.getX()+i.getX()+a.getX())/4),g=Le.round((e.getY()+h.getY()+i.getY()+a.getY())/4);try{let x=new mt(this.image,15,f,g).detect();e=x[0],i=x[1],a=x[2],h=x[3]}catch{e=this.getFirstDifferent(new sn(f+7,g-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new sn(f+7,g+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new sn(f-7,g+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new sn(f-7,g-7),!1,-1,-1).toResultPoint()}return f=Le.round((e.getX()+h.getX()+i.getX()+a.getX())/4),g=Le.round((e.getY()+h.getY()+i.getY()+a.getY())/4),new sn(f,g)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,i,a,h,f){let g=It.getInstance(),x=this.getDimension(),C=x/2-this.nbCenterLayers,E=x/2+this.nbCenterLayers;return g.sampleGrid(e,x,x,C,C,E,C,E,E,C,E,i.getX(),i.getY(),a.getX(),a.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(e,i,a){let h=0,f=this.distanceResultPoint(e,i),g=f/a,x=e.getX(),C=e.getY(),E=g*(i.getX()-e.getX())/f,T=g*(i.getY()-e.getY())/f;for(let P=0;P<a;P++)this.image.get(Le.round(x+P*E),Le.round(C+P*T))&&(h|=1<<a-P-1);return h}isWhiteOrBlackRectangle(e,i,a,h){let f=3;e=new sn(e.getX()-f,e.getY()+f),i=new sn(i.getX()-f,i.getY()-f),a=new sn(a.getX()+f,a.getY()-f),h=new sn(h.getX()+f,h.getY()+f);let g=this.getColor(h,e);if(g===0)return!1;let x=this.getColor(e,i);return x!==g||(x=this.getColor(i,a),x!==g)?!1:(x=this.getColor(a,h),x===g)}getColor(e,i){let a=this.distancePoint(e,i),h=(i.getX()-e.getX())/a,f=(i.getY()-e.getY())/a,g=0,x=e.getX(),C=e.getY(),E=this.image.get(e.getX(),e.getY()),T=Math.ceil(a);for(let F=0;F<T;F++)x+=h,C+=f,this.image.get(Le.round(x),Le.round(C))!==E&&g++;let P=g/a;return P>.1&&P<.9?0:P<=.1===E?1:-1}getFirstDifferent(e,i,a,h){let f=e.getX()+a,g=e.getY()+h;for(;this.isValid(f,g)&&this.image.get(f,g)===i;)f+=a,g+=h;for(f-=a,g-=h;this.isValid(f,g)&&this.image.get(f,g)===i;)f+=a;for(f-=a;this.isValid(f,g)&&this.image.get(f,g)===i;)g+=h;return g-=h,new sn(f,g)}expandSquare(e,i,a){let h=a/(2*i),f=e[0].getX()-e[2].getX(),g=e[0].getY()-e[2].getY(),x=(e[0].getX()+e[2].getX())/2,C=(e[0].getY()+e[2].getY())/2,E=new ke(x+h*f,C+h*g),T=new ke(x-h*f,C-h*g);f=e[1].getX()-e[3].getX(),g=e[1].getY()-e[3].getY(),x=(e[1].getX()+e[3].getX())/2,C=(e[1].getY()+e[3].getY())/2;let P=new ke(x+h*f,C+h*g),F=new ke(x-h*f,C-h*g);return[E,P,T,F]}isValid(e,i){return e>=0&&e<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(e){let i=Le.round(e.getX()),a=Le.round(e.getY());return this.isValid(i,a)}distancePoint(e,i){return Le.distance(e.getX(),e.getY(),i.getX(),i.getY())}distanceResultPoint(e,i){return Le.distance(e.getX(),e.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class ns{decode(e,i=null){let a=null,h=new Wn(e.getBlackMatrix()),f=null,g=null;try{let T=h.detectMirror(!1);f=T.getPoints(),this.reportFoundResultPoints(i,f),g=new Se().decode(T)}catch(T){a=T}if(g==null)try{let T=h.detectMirror(!0);f=T.getPoints(),this.reportFoundResultPoints(i,f),g=new Se().decode(T)}catch(T){throw a??T}let x=new Ve(g.getText(),g.getRawBytes(),g.getNumBits(),f,we.AZTEC,j.currentTimeMillis()),C=g.getByteSegments();C!=null&&x.putMetadata(Re.BYTE_SEGMENTS,C);let E=g.getECLevel();return E!=null&&x.putMetadata(Re.ERROR_CORRECTION_LEVEL,E),x}reportFoundResultPoints(e,i){if(e!=null){let a=e.get(Y.NEED_RESULT_POINT_CALLBACK);a!=null&&i.forEach((h,f,g)=>{a.foundPossibleResultPoint(h)})}}reset(){}}class dl extends Be{constructor(e=500){super(new ns,e)}}class wn{decode(e,i){try{return this.doDecode(e,i)}catch{if(i&&i.get(Y.TRY_HARDER)===!0&&e.isRotateSupported()){const f=e.rotateCounterClockwise(),g=this.doDecode(f,i),x=g.getResultMetadata();let C=270;x!==null&&x.get(Re.ORIENTATION)===!0&&(C=C+x.get(Re.ORIENTATION)%360),g.putMetadata(Re.ORIENTATION,C);const E=g.getResultPoints();if(E!==null){const T=f.getHeight();for(let P=0;P<E.length;P++)E[P]=new ke(T-E[P].getY()-1,E[P].getX())}return g}else throw new ee}}reset(){}doDecode(e,i){const a=e.getWidth(),h=e.getHeight();let f=new U(a);const g=i&&i.get(Y.TRY_HARDER)===!0,x=Math.max(1,h>>(g?8:5));let C;g?C=h:C=15;const E=Math.trunc(h/2);for(let T=0;T<C;T++){const P=Math.trunc((T+1)/2),F=(T&1)===0,q=E+x*(F?P:-P);if(q<0||q>=h)break;try{f=e.getBlackRow(q,f)}catch{continue}for(let ne=0;ne<2;ne++){if(ne===1&&(f.reverse(),i&&i.get(Y.NEED_RESULT_POINT_CALLBACK)===!0)){const se=new Map;i.forEach((de,ye)=>se.set(ye,de)),se.delete(Y.NEED_RESULT_POINT_CALLBACK),i=se}try{const se=this.decodeRow(q,f,i);if(ne===1){se.putMetadata(Re.ORIENTATION,180);const de=se.getResultPoints();de!==null&&(de[0]=new ke(a-de[0].getX()-1,de[0].getY()),de[1]=new ke(a-de[1].getX()-1,de[1].getY()))}return se}catch{}}}throw new ee}static recordPattern(e,i,a){const h=a.length;for(let E=0;E<h;E++)a[E]=0;const f=e.getSize();if(i>=f)throw new ee;let g=!e.get(i),x=0,C=i;for(;C<f;){if(e.get(C)!==g)a[x]++;else{if(++x===h)break;a[x]=1,g=!g}C++}if(!(x===h||x===h-1&&C===f))throw new ee}static recordPatternInReverse(e,i,a){let h=a.length,f=e.get(i);for(;i>0&&h>=0;)e.get(--i)!==f&&(h--,f=!f);if(h>=0)throw new ee;wn.recordPattern(e,i+1,a)}static patternMatchVariance(e,i,a){const h=e.length;let f=0,g=0;for(let E=0;E<h;E++)f+=e[E],g+=i[E];if(f<g)return Number.POSITIVE_INFINITY;const x=f/g;a*=x;let C=0;for(let E=0;E<h;E++){const T=e[E],P=i[E]*x,F=T>P?T-P:P-T;if(F>a)return Number.POSITIVE_INFINITY;C+=F}return C/f}}class Ge extends wn{static findStartPattern(e){const i=e.getSize(),a=e.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),g=a,x=!1;const C=6;for(let E=a;E<i;E++)if(e.get(E)!==x)f[h]++;else{if(h===C-1){let T=Ge.MAX_AVG_VARIANCE,P=-1;for(let F=Ge.CODE_START_A;F<=Ge.CODE_START_C;F++){const q=wn.patternMatchVariance(f,Ge.CODE_PATTERNS[F],Ge.MAX_INDIVIDUAL_VARIANCE);q<T&&(T=q,P=F)}if(P>=0&&e.isRange(Math.max(0,g-(E-g)/2),g,!1))return Int32Array.from([g,E,P]);g+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,x=!x}throw new ee}static decodeCode(e,i,a){wn.recordPattern(e,a,i);let h=Ge.MAX_AVG_VARIANCE,f=-1;for(let g=0;g<Ge.CODE_PATTERNS.length;g++){const x=Ge.CODE_PATTERNS[g],C=this.patternMatchVariance(i,x,Ge.MAX_INDIVIDUAL_VARIANCE);C<h&&(h=C,f=g)}if(f>=0)return f;throw new ee}decodeRow(e,i,a){const h=a&&a.get(Y.ASSUME_GS1)===!0,f=Ge.findStartPattern(i),g=f[2];let x=0;const C=new Uint8Array(20);C[x++]=g;let E;switch(g){case Ge.CODE_START_A:E=Ge.CODE_CODE_A;break;case Ge.CODE_START_B:E=Ge.CODE_CODE_B;break;case Ge.CODE_START_C:E=Ge.CODE_CODE_C;break;default:throw new W}let T=!1,P=!1,F="",q=f[0],ne=f[1];const se=Int32Array.from([0,0,0,0,0,0]);let de=0,ye=0,Ue=g,ze=0,De=!0,Bt=!1,Rt=!1;for(;!T;){const vs=P;switch(P=!1,de=ye,ye=Ge.decodeCode(i,se,ne),C[x++]=ye,ye!==Ge.CODE_STOP&&(De=!0),ye!==Ge.CODE_STOP&&(ze++,Ue+=ze*ye),q=ne,ne+=se.reduce((Li,Il)=>Li+Il,0),ye){case Ge.CODE_START_A:case Ge.CODE_START_B:case Ge.CODE_START_C:throw new W}switch(E){case Ge.CODE_CODE_A:if(ye<64)Rt===Bt?F+=String.fromCharCode(32+ye):F+=String.fromCharCode(32+ye+128),Rt=!1;else if(ye<96)Rt===Bt?F+=String.fromCharCode(ye-64):F+=String.fromCharCode(ye+64),Rt=!1;else switch(ye!==Ge.CODE_STOP&&(De=!1),ye){case Ge.CODE_FNC_1:h&&(F.length===0?F+="]C1":F+="");break;case Ge.CODE_FNC_2:case Ge.CODE_FNC_3:break;case Ge.CODE_FNC_4_A:!Bt&&Rt?(Bt=!0,Rt=!1):Bt&&Rt?(Bt=!1,Rt=!1):Rt=!0;break;case Ge.CODE_SHIFT:P=!0,E=Ge.CODE_CODE_B;break;case Ge.CODE_CODE_B:E=Ge.CODE_CODE_B;break;case Ge.CODE_CODE_C:E=Ge.CODE_CODE_C;break;case Ge.CODE_STOP:T=!0;break}break;case Ge.CODE_CODE_B:if(ye<96)Rt===Bt?F+=String.fromCharCode(32+ye):F+=String.fromCharCode(32+ye+128),Rt=!1;else switch(ye!==Ge.CODE_STOP&&(De=!1),ye){case Ge.CODE_FNC_1:h&&(F.length===0?F+="]C1":F+="");break;case Ge.CODE_FNC_2:case Ge.CODE_FNC_3:break;case Ge.CODE_FNC_4_B:!Bt&&Rt?(Bt=!0,Rt=!1):Bt&&Rt?(Bt=!1,Rt=!1):Rt=!0;break;case Ge.CODE_SHIFT:P=!0,E=Ge.CODE_CODE_A;break;case Ge.CODE_CODE_A:E=Ge.CODE_CODE_A;break;case Ge.CODE_CODE_C:E=Ge.CODE_CODE_C;break;case Ge.CODE_STOP:T=!0;break}break;case Ge.CODE_CODE_C:if(ye<100)ye<10&&(F+="0"),F+=ye;else switch(ye!==Ge.CODE_STOP&&(De=!1),ye){case Ge.CODE_FNC_1:h&&(F.length===0?F+="]C1":F+="");break;case Ge.CODE_CODE_A:E=Ge.CODE_CODE_A;break;case Ge.CODE_CODE_B:E=Ge.CODE_CODE_B;break;case Ge.CODE_STOP:T=!0;break}break}vs&&(E=E===Ge.CODE_CODE_A?Ge.CODE_CODE_B:Ge.CODE_CODE_A)}const vr=ne-q;if(ne=i.getNextUnset(ne),!i.isRange(ne,Math.min(i.getSize(),ne+(ne-q)/2),!1))throw new ee;if(Ue-=ze*de,Ue%103!==de)throw new R;const qr=F.length;if(qr===0)throw new ee;qr>0&&De&&(E===Ge.CODE_CODE_C?F=F.substring(0,qr-2):F=F.substring(0,qr-1));const Mn=(f[1]+f[0])/2,en=q+vr/2,_n=C.length,dr=new Uint8Array(_n);for(let vs=0;vs<_n;vs++)dr[vs]=C[vs];const ii=[new ke(Mn,e),new ke(en,e)];return new Ve(F,dr,0,ii,we.CODE_128,new Date().getTime())}}Ge.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ge.MAX_AVG_VARIANCE=.25,Ge.MAX_INDIVIDUAL_VARIANCE=.7,Ge.CODE_SHIFT=98,Ge.CODE_CODE_C=99,Ge.CODE_CODE_B=100,Ge.CODE_CODE_A=101,Ge.CODE_FNC_1=102,Ge.CODE_FNC_2=97,Ge.CODE_FNC_3=96,Ge.CODE_FNC_4_A=101,Ge.CODE_FNC_4_B=100,Ge.CODE_START_A=103,Ge.CODE_START_B=104,Ge.CODE_START_C=105,Ge.CODE_STOP=106;class Sn extends wn{constructor(e=!1,i=!1){super(),this.usingCheckDigit=e,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,i,a){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=Sn.findAsteriskPattern(i,h),g=i.getNextSet(f[1]),x=i.getSize(),C,E;do{Sn.recordPattern(i,g,h);let se=Sn.toNarrowWidePattern(h);if(se<0)throw new ee;C=Sn.patternToChar(se),this.decodeRowResult+=C,E=g;for(let de of h)g+=de;g=i.getNextSet(g)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let T=0;for(let se of h)T+=se;let P=g-E-T;if(g!==x&&P*2<T)throw new ee;if(this.usingCheckDigit){let se=this.decodeRowResult.length-1,de=0;for(let ye=0;ye<se;ye++)de+=Sn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ye));if(this.decodeRowResult.charAt(se)!==Sn.ALPHABET_STRING.charAt(de%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,se)}if(this.decodeRowResult.length===0)throw new ee;let F;this.extendedMode?F=Sn.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;let q=(f[1]+f[0])/2,ne=E+T/2;return new Ve(F,null,0,[new ke(q,e),new ke(ne,e)],we.CODE_39,new Date().getTime())}static findAsteriskPattern(e,i){let a=e.getSize(),h=e.getNextSet(0),f=0,g=h,x=!1,C=i.length;for(let E=h;E<a;E++)if(e.get(E)!==x)i[f]++;else{if(f===C-1){if(this.toNarrowWidePattern(i)===Sn.ASTERISK_ENCODING&&e.isRange(Math.max(0,g-Math.floor((E-g)/2)),g,!1))return[g,E];g+=i[0]+i[1],i.copyWithin(0,2,2+f-1),i[f-1]=0,i[f]=0,f--}else f++;i[f]=1,x=!x}throw new ee}static toNarrowWidePattern(e){let i=e.length,a=0,h;do{let f=2147483647;for(let C of e)C<f&&C>a&&(f=C);a=f,h=0;let g=0,x=0;for(let C=0;C<i;C++){let E=e[C];E>a&&(x|=1<<i-1-C,h++,g+=E)}if(h===3){for(let C=0;C<i&&h>0;C++){let E=e[C];if(E>a&&(h--,E*2>=g))return-1}return x}}while(h>3);return-1}static patternToChar(e){for(let i=0;i<Sn.CHARACTER_ENCODINGS.length;i++)if(Sn.CHARACTER_ENCODINGS[i]===e)return Sn.ALPHABET_STRING.charAt(i);if(e===Sn.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(e){let i=e.length,a="";for(let h=0;h<i;h++){let f=e.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let g=e.charAt(h+1),x="\0";switch(f){case"+":if(g>="A"&&g<="Z")x=String.fromCharCode(g.charCodeAt(0)+32);else throw new W;break;case"$":if(g>="A"&&g<="Z")x=String.fromCharCode(g.charCodeAt(0)-64);else throw new W;break;case"%":if(g>="A"&&g<="E")x=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")x=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")x=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")x=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")x="\0";else if(g==="V")x="@";else if(g==="W")x="`";else if(g==="X"||g==="Y"||g==="Z")x="";else throw new W;break;case"/":if(g>="A"&&g<="O")x=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")x=":";else throw new W;break}a+=x,h++}else a+=f}return a}}Sn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Sn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Sn.ASTERISK_ENCODING=148;class Kt extends wn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,i,a){let h=this.decodeStart(i),f=this.decodeEnd(i),g=new te;Kt.decodeMiddle(i,h[1],f[0],g);let x=g.toString(),C=null;a!=null&&(C=a.get(Y.ALLOWED_LENGTHS)),C==null&&(C=Kt.DEFAULT_ALLOWED_LENGTHS);let E=x.length,T=!1,P=0;for(let ne of C){if(E===ne){T=!0;break}ne>P&&(P=ne)}if(!T&&E>P&&(T=!0),!T)throw new W;const F=[new ke(h[1],e),new ke(f[0],e)];return new Ve(x,null,0,F,we.ITF,new Date().getTime())}static decodeMiddle(e,i,a,h){let f=new Int32Array(10),g=new Int32Array(5),x=new Int32Array(5);for(f.fill(0),g.fill(0),x.fill(0);i<a;){wn.recordPattern(e,i,f);for(let E=0;E<5;E++){let T=2*E;g[E]=f[T],x[E]=f[T+1]}let C=Kt.decodeDigit(g);h.append(C.toString()),C=this.decodeDigit(x),h.append(C.toString()),f.forEach(function(E){i+=E})}}decodeStart(e){let i=Kt.skipWhiteSpace(e),a=Kt.findGuardPattern(e,i,Kt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(e,a[0]),a}validateQuietZone(e,i){let a=this.narrowLineWidth*10;a=a<i?a:i;for(let h=i-1;a>0&&h>=0&&!e.get(h);h--)a--;if(a!==0)throw new ee}static skipWhiteSpace(e){const i=e.getSize(),a=e.getNextSet(0);if(a===i)throw new ee;return a}decodeEnd(e){e.reverse();try{let i=Kt.skipWhiteSpace(e),a;try{a=Kt.findGuardPattern(e,i,Kt.END_PATTERN_REVERSED[0])}catch(f){f instanceof ee&&(a=Kt.findGuardPattern(e,i,Kt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,a[0]);let h=a[0];return a[0]=e.getSize()-a[1],a[1]=e.getSize()-h,a}finally{e.reverse()}}static findGuardPattern(e,i,a){let h=a.length,f=new Int32Array(h),g=e.getSize(),x=!1,C=0,E=i;f.fill(0);for(let T=i;T<g;T++)if(e.get(T)!==x)f[C]++;else{if(C===h-1){if(wn.patternMatchVariance(f,a,Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return[E,T];E+=f[0]+f[1],j.arraycopy(f,2,f,0,C-1),f[C-1]=0,f[C]=0,C--}else C++;f[C]=1,x=!x}throw new ee}static decodeDigit(e){let i=Kt.MAX_AVG_VARIANCE,a=-1,h=Kt.PATTERNS.length;for(let f=0;f<h;f++){let g=Kt.PATTERNS[f],x=wn.patternMatchVariance(e,g,Kt.MAX_INDIVIDUAL_VARIANCE);x<i?(i=x,a=f):x===i&&(a=-1)}if(a>=0)return a%10;throw new ee}}Kt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Kt.MAX_AVG_VARIANCE=.38,Kt.MAX_INDIVIDUAL_VARIANCE=.5,Kt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Kt.START_PATTERN=Int32Array.from([1,1,1,1]),Kt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ln extends wn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let i=!1,a,h=0,f=Int32Array.from([0,0,0]);for(;!i;){f=Int32Array.from([0,0,0]),a=ln.findGuardPattern(e,h,!1,this.START_END_PATTERN,f);let g=a[0];h=a[1];let x=g-(h-g);x>=0&&(i=e.isRange(x,g,!1))}return a}static checkChecksum(e){return ln.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let i=e.length;if(i===0)return!1;let a=parseInt(e.charAt(i-1),10);return ln.getStandardUPCEANChecksum(e.substring(0,i-1))===a}static getStandardUPCEANChecksum(e){let i=e.length,a=0;for(let h=i-1;h>=0;h-=2){let f=e.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new W;a+=f}a*=3;for(let h=i-2;h>=0;h-=2){let f=e.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new W;a+=f}return(1e3-a)%10}static decodeEnd(e,i){return ln.findGuardPattern(e,i,!1,ln.START_END_PATTERN,new Int32Array(ln.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,i,a,h){return this.findGuardPattern(e,i,a,h,new Int32Array(h.length))}static findGuardPattern(e,i,a,h,f){let g=e.getSize();i=a?e.getNextUnset(i):e.getNextSet(i);let x=0,C=i,E=h.length,T=a;for(let P=i;P<g;P++)if(e.get(P)!==T)f[x]++;else{if(x===E-1){if(wn.patternMatchVariance(f,h,ln.MAX_INDIVIDUAL_VARIANCE)<ln.MAX_AVG_VARIANCE)return Int32Array.from([C,P]);C+=f[0]+f[1];let F=f.slice(2,f.length-1);for(let q=0;q<x-1;q++)f[q]=F[q];f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,T=!T}throw new ee}static decodeDigit(e,i,a,h){this.recordPattern(e,a,i);let f=this.MAX_AVG_VARIANCE,g=-1,x=h.length;for(let C=0;C<x;C++){let E=h[C],T=wn.patternMatchVariance(i,E,ln.MAX_INDIVIDUAL_VARIANCE);T<f&&(f=T,g=C)}if(g>=0)return g;throw new ee}}ln.MAX_AVG_VARIANCE=.48,ln.MAX_INDIVIDUAL_VARIANCE=.7,ln.START_END_PATTERN=Int32Array.from([1,1,1]),ln.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ln.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ln.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ps{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,i,a){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(i,a,h),g=h.toString(),x=ps.parseExtensionString(g),C=[new ke((a[0]+a[1])/2,e),new ke(f,e)],E=new Ve(g,null,0,C,we.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&E.putAllMetadata(x),E}decodeMiddle(e,i,a){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=e.getSize(),g=i[1],x=0;for(let E=0;E<5&&g<f;E++){let T=ln.decodeDigit(e,h,g,ln.L_AND_G_PATTERNS);a+=String.fromCharCode(48+T%10);for(let P of h)g+=P;T>=10&&(x|=1<<4-E),E!==4&&(g=e.getNextSet(g),g=e.getNextUnset(g))}if(a.length!==5)throw new ee;let C=this.determineCheckDigit(x);if(ps.extensionChecksum(a.toString())!==C)throw new ee;return g}static extensionChecksum(e){let i=e.length,a=0;for(let h=i-2;h>=0;h-=2)a+=e.charAt(h).charCodeAt(0)-48;a*=3;for(let h=i-1;h>=0;h-=2)a+=e.charAt(h).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(e){for(let i=0;i<10;i++)if(e===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new ee}static parseExtensionString(e){if(e.length!==5)return null;let i=ps.parseExtension5String(e);return i==null?null:new Map([[Re.SUGGESTED_PRICE,i]])}static parseExtension5String(e){let i;switch(e.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let a=parseInt(e.substring(1)),h=(a/100).toString(),f=a%100,g=f<10?"0"+f:f.toString();return i+h+"."+g}}class ei{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,i,a){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(i,a,h),g=h.toString(),x=ei.parseExtensionString(g),C=[new ke((a[0]+a[1])/2,e),new ke(f,e)],E=new Ve(g,null,0,C,we.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&E.putAllMetadata(x),E}decodeMiddle(e,i,a){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=e.getSize(),g=i[1],x=0;for(let C=0;C<2&&g<f;C++){let E=ln.decodeDigit(e,h,g,ln.L_AND_G_PATTERNS);a+=String.fromCharCode(48+E%10);for(let T of h)g+=T;E>=10&&(x|=1<<1-C),C!==1&&(g=e.getNextSet(g),g=e.getNextUnset(g))}if(a.length!==2)throw new ee;if(parseInt(a.toString())%4!==x)throw new ee;return g}static parseExtensionString(e){return e.length!==2?null:new Map([[Re.ISSUE_NUMBER,parseInt(e)]])}}class Ai{static decodeRow(e,i,a){let h=ln.findGuardPattern(i,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ps().decodeRow(e,i,h)}catch{return new ei().decodeRow(e,i,h)}}}Ai.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Lt extends ln{constructor(){super(),this.decodeRowStringBuffer="",Lt.L_AND_G_PATTERNS=Lt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let i=Lt.L_PATTERNS[e-10],a=new Int32Array(i.length);for(let h=0;h<i.length;h++)a[h]=i[i.length-h-1];Lt.L_AND_G_PATTERNS[e]=a}}decodeRow(e,i,a){let h=Lt.findStartGuardPattern(i),f=a==null?null:a.get(Y.NEED_RESULT_POINT_CALLBACK);if(f!=null){const De=new ke((h[0]+h[1])/2,e);f.foundPossibleResultPoint(De)}let g=this.decodeMiddle(i,h,this.decodeRowStringBuffer),x=g.rowOffset,C=g.resultString;if(f!=null){const De=new ke(x,e);f.foundPossibleResultPoint(De)}let E=this.decodeEnd(i,x);if(f!=null){const De=new ke((E[0]+E[1])/2,e);f.foundPossibleResultPoint(De)}let T=E[1],P=T+(T-E[0]);if(P>=i.getSize()||!i.isRange(T,P,!1))throw new ee;let F=C.toString();if(F.length<8)throw new W;if(!Lt.checkChecksum(F))throw new R;let q=(h[1]+h[0])/2,ne=(E[1]+E[0])/2,se=this.getBarcodeFormat(),de=[new ke(q,e),new ke(ne,e)],ye=new Ve(F,null,0,de,se,new Date().getTime()),Ue=0;try{let De=Ai.decodeRow(e,i,E[1]);ye.putMetadata(Re.UPC_EAN_EXTENSION,De.getText()),ye.putAllMetadata(De.getResultMetadata()),ye.addResultPoints(De.getResultPoints()),Ue=De.getText().length}catch{}let ze=a==null?null:a.get(Y.ALLOWED_EAN_EXTENSIONS);if(ze!=null){let De=!1;for(let Bt in ze)if(Ue.toString()===Bt){De=!0;break}if(!De)throw new ee}return ye}decodeEnd(e,i){return Lt.findGuardPattern(e,i,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Lt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let i=e.length;if(i===0)return!1;let a=parseInt(e.charAt(i-1),10);return Lt.getStandardUPCEANChecksum(e.substring(0,i-1))===a}static getStandardUPCEANChecksum(e){let i=e.length,a=0;for(let h=i-1;h>=0;h-=2){let f=e.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new W;a+=f}a*=3;for(let h=i-2;h>=0;h-=2){let f=e.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new W;a+=f}return(1e3-a)%10}}class xr extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,i,a){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=e.getSize(),g=i[1],x=0;for(let E=0;E<6&&g<f;E++){let T=Lt.decodeDigit(e,h,g,Lt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+T%10);for(let P of h)g+=P;T>=10&&(x|=1<<5-E)}a=xr.determineFirstDigit(a,x),g=Lt.findGuardPattern(e,g,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&g<f;E++){let T=Lt.decodeDigit(e,h,g,Lt.L_PATTERNS);a+=String.fromCharCode(48+T);for(let P of h)g+=P}return{rowOffset:g,resultString:a}}getBarcodeFormat(){return we.EAN_13}static determineFirstDigit(e,i){for(let a=0;a<10;a++)if(i===this.FIRST_DIGIT_ENCODINGS[a])return e=String.fromCharCode(48+a)+e,e;throw new ee}}xr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ie extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,i,a){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=e.getSize(),g=i[1];for(let C=0;C<4&&g<f;C++){let E=Lt.decodeDigit(e,h,g,Lt.L_PATTERNS);a+=String.fromCharCode(48+E);for(let T of h)g+=T}g=Lt.findGuardPattern(e,g,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&g<f;C++){let E=Lt.decodeDigit(e,h,g,Lt.L_PATTERNS);a+=String.fromCharCode(48+E);for(let T of h)g+=T}return{rowOffset:g,resultString:a}}getBarcodeFormat(){return we.EAN_8}}class Ie extends Lt{constructor(){super(...arguments),this.ean13Reader=new xr}getBarcodeFormat(){return we.UPC_A}decode(e,i){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,i,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,i,a))}decodeMiddle(e,i,a){return this.ean13Reader.decodeMiddle(e,i,a)}maybeReturnResult(e){let i=e.getText();if(i.charAt(0)==="0"){let a=new Ve(i.substring(1),null,null,e.getResultPoints(),we.UPC_A);return e.getResultMetadata()!=null&&a.putAllMetadata(e.getResultMetadata()),a}else throw new ee}reset(){this.ean13Reader.reset()}}class je extends Lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,i,a){const h=this.decodeMiddleCounters.map(E=>E);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=e.getSize();let g=i[1],x=0;for(let E=0;E<6&&g<f;E++){const T=je.decodeDigit(e,h,g,je.L_AND_G_PATTERNS);a+=String.fromCharCode(48+T%10);for(let P of h)g+=P;T>=10&&(x|=1<<5-E)}let C=je.determineNumSysAndCheckDigit(a,x);return{rowOffset:g,resultString:C}}decodeEnd(e,i){return je.findGuardPatternWithoutCounters(e,i,!0,je.MIDDLE_END_PATTERN)}checkChecksum(e){return Lt.checkChecksum(je.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,i){for(let a=0;a<=1;a++)for(let h=0;h<10;h++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][h]){let f=String.fromCharCode(48+a),g=String.fromCharCode(48+h);return f+e+g}throw ee.getNotFoundInstance()}getBarcodeFormat(){return we.UPC_E}static convertUPCEtoUPCA(e){const i=e.slice(1,7).split("").map(f=>f.charCodeAt(0)),a=new te;a.append(e.charAt(0));let h=i[5];switch(h){case 0:case 1:case 2:a.appendChars(i,0,2),a.append(h),a.append("0000"),a.appendChars(i,2,3);break;case 3:a.appendChars(i,0,3),a.append("00000"),a.appendChars(i,3,2);break;case 4:a.appendChars(i,0,4),a.append("00000"),a.append(i[4]);break;default:a.appendChars(i,0,5),a.append("0000"),a.append(h);break}return e.length>=8&&a.append(e.charAt(7)),a.toString()}}je.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),je.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ze extends wn{constructor(e){super();let i=e==null?null:e.get(Y.POSSIBLE_FORMATS),a=[];o(i)?(a.push(new xr),a.push(new Ie),a.push(new ie),a.push(new je)):(i.indexOf(we.EAN_13)>-1&&a.push(new xr),i.indexOf(we.UPC_A)>-1&&a.push(new Ie),i.indexOf(we.EAN_8)>-1&&a.push(new ie),i.indexOf(we.UPC_E)>-1&&a.push(new je)),this.readers=a}decodeRow(e,i,a){for(let h of this.readers)try{const f=h.decodeRow(e,i,a),g=f.getBarcodeFormat()===we.EAN_13&&f.getText().charAt(0)==="0",x=a==null?null:a.get(Y.POSSIBLE_FORMATS),C=x==null||x.includes(we.UPC_A);if(g&&C){const E=f.getRawBytes(),T=new Ve(f.getText().substring(1),E,E?E.length:null,f.getResultPoints(),we.UPC_A);return T.putAllMetadata(f.getResultMetadata()),T}return f}catch{}throw new ee}reset(){for(let e of this.readers)e.reset()}}class pt extends wn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,i){for(let a=0;a<i.length;a++)if(wn.patternMatchVariance(e,i[a],pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return a;throw new ee}static count(e){return Le.sum(new Int32Array(e))}static increment(e,i){let a=0,h=i[0];for(let f=1;f<e.length;f++)i[f]>h&&(h=i[f],a=f);e[a]++}static decrement(e,i){let a=0,h=i[0];for(let f=1;f<e.length;f++)i[f]<h&&(h=i[f],a=f);e[a]--}static isFinderPattern(e){let i=e[0]+e[1],a=i+e[2]+e[3],h=i/a;if(h>=pt.MIN_FINDER_PATTERN_RATIO&&h<=pt.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let x of e)x>g&&(g=x),x<f&&(f=x);return g<10*f}return!1}}pt.MAX_AVG_VARIANCE=.2,pt.MAX_INDIVIDUAL_VARIANCE=.45,pt.MIN_FINDER_PATTERN_RATIO=9.5/12,pt.MAX_FINDER_PATTERN_RATIO=12.5/14;class zt{constructor(e,i){this.value=e,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof zt))return!1;const i=e;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class on{constructor(e,i,a,h,f){this.value=e,this.startEnd=i,this.value=e,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new ke(a,f)),this.resultPoints.push(new ke(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof on))return!1;const i=e;return this.value===i.value}hashCode(){return this.value}}class Gt{constructor(){}static getRSSvalue(e,i,a){let h=0;for(let C of e)h+=C;let f=0,g=0,x=e.length;for(let C=0;C<x-1;C++){let E;for(E=1,g|=1<<C;E<e[C];E++,g&=~(1<<C)){let T=Gt.combins(h-E-1,x-C-2);if(a&&g===0&&h-E-(x-C-1)>=x-C-1&&(T-=Gt.combins(h-E-(x-C),x-C-2)),x-C-1>1){let P=0;for(let F=h-E-(x-C-2);F>i;F--)P+=Gt.combins(h-E-F-1,x-C-3);T-=P*(x-1-C)}else h-E>i&&T--;f+=T}h-=E}return f}static combins(e,i){let a,h;e-i>i?(h=i,a=e-i):(h=e-i,a=i);let f=1,g=1;for(let x=e;x>a;x--)f*=x,g<=h&&(f/=g,g++);for(;g<=h;)f/=g,g++;return f}}class Ur{static buildBitArray(e){let i=e.length*2-1;e[e.length-1].getRightChar()==null&&(i-=1);let a=12*i,h=new U(a),f=0,x=e[0].getRightChar().getValue();for(let C=11;C>=0;--C)(x&1<<C)!=0&&h.set(f),f++;for(let C=1;C<e.length;++C){let E=e[C],T=E.getLeftChar().getValue();for(let P=11;P>=0;--P)(T&1<<P)!=0&&h.set(f),f++;if(E.getRightChar()!=null){let P=E.getRightChar().getValue();for(let F=11;F>=0;--F)(P&1<<F)!=0&&h.set(f),f++}}return h}}class Tn{constructor(e,i){i?this.decodedInformation=null:(this.finished=e,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class zr{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class hn extends zr{constructor(e,i){super(e),this.value=i}getValue(){return this.value}isFNC1(){return this.value===hn.FNC1}}hn.FNC1="$";class rs extends zr{constructor(e,i,a){super(e),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class lr extends zr{constructor(e,i,a){if(super(e),i<0||i>10||a<0||a>10)throw new W;this.firstDigit=i,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===lr.FNC1}isSecondDigitFNC1(){return this.secondDigit===lr.FNC1}isAnyFNC1(){return this.firstDigit===lr.FNC1||this.secondDigit===lr.FNC1}}lr.FNC1=10;class Xe{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new ee;let i=e.substring(0,2);for(let f of Xe.TWO_DIGIT_DATA_LENGTH)if(f[0]===i)return f[1]===Xe.VARIABLE_LENGTH?Xe.processVariableAI(2,f[2],e):Xe.processFixedAI(2,f[1],e);if(e.length<3)throw new ee;let a=e.substring(0,3);for(let f of Xe.THREE_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===Xe.VARIABLE_LENGTH?Xe.processVariableAI(3,f[2],e):Xe.processFixedAI(3,f[1],e);for(let f of Xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===Xe.VARIABLE_LENGTH?Xe.processVariableAI(4,f[2],e):Xe.processFixedAI(4,f[1],e);if(e.length<4)throw new ee;let h=e.substring(0,4);for(let f of Xe.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===Xe.VARIABLE_LENGTH?Xe.processVariableAI(4,f[2],e):Xe.processFixedAI(4,f[1],e);throw new ee}static processFixedAI(e,i,a){if(a.length<e)throw new ee;let h=a.substring(0,e);if(a.length<e+i)throw new ee;let f=a.substring(e,e+i),g=a.substring(e+i),x="("+h+")"+f,C=Xe.parseFieldsInGeneralPurpose(g);return C==null?x:x+C}static processVariableAI(e,i,a){let h=a.substring(0,e),f;a.length<e+i?f=a.length:f=e+i;let g=a.substring(e,f),x=a.substring(f),C="("+h+")"+g,E=Xe.parseFieldsInGeneralPurpose(x);return E==null?C:C+E}}Xe.VARIABLE_LENGTH=[],Xe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Xe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Xe.VARIABLE_LENGTH,20],["22",Xe.VARIABLE_LENGTH,29],["30",Xe.VARIABLE_LENGTH,8],["37",Xe.VARIABLE_LENGTH,8],["90",Xe.VARIABLE_LENGTH,30],["91",Xe.VARIABLE_LENGTH,30],["92",Xe.VARIABLE_LENGTH,30],["93",Xe.VARIABLE_LENGTH,30],["94",Xe.VARIABLE_LENGTH,30],["95",Xe.VARIABLE_LENGTH,30],["96",Xe.VARIABLE_LENGTH,30],["97",Xe.VARIABLE_LENGTH,3],["98",Xe.VARIABLE_LENGTH,30],["99",Xe.VARIABLE_LENGTH,30]],Xe.THREE_DIGIT_DATA_LENGTH=[["240",Xe.VARIABLE_LENGTH,30],["241",Xe.VARIABLE_LENGTH,30],["242",Xe.VARIABLE_LENGTH,6],["250",Xe.VARIABLE_LENGTH,30],["251",Xe.VARIABLE_LENGTH,30],["253",Xe.VARIABLE_LENGTH,17],["254",Xe.VARIABLE_LENGTH,20],["400",Xe.VARIABLE_LENGTH,30],["401",Xe.VARIABLE_LENGTH,30],["402",17],["403",Xe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Xe.VARIABLE_LENGTH,20],["421",Xe.VARIABLE_LENGTH,15],["422",3],["423",Xe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Xe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Xe.VARIABLE_LENGTH,15],["391",Xe.VARIABLE_LENGTH,18],["392",Xe.VARIABLE_LENGTH,15],["393",Xe.VARIABLE_LENGTH,18],["703",Xe.VARIABLE_LENGTH,30]],Xe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Xe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Xe.VARIABLE_LENGTH,20],["8003",Xe.VARIABLE_LENGTH,30],["8004",Xe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Xe.VARIABLE_LENGTH,30],["8008",Xe.VARIABLE_LENGTH,12],["8018",18],["8020",Xe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Xe.VARIABLE_LENGTH,70],["8200",Xe.VARIABLE_LENGTH,70]];class Ni{constructor(e){this.buffer=new te,this.information=e}decodeAllCodes(e,i){let a=i,h=null;do{let f=this.decodeGeneralPurposeField(a,h),g=Xe.parseFieldsInGeneralPurpose(f.getNewString());if(g!=null&&e.append(g),f.isRemaining()?h=""+f.getRemainingValue():h=null,a===f.getNewPosition())break;a=f.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let i=e;i<e+3;++i)if(this.information.get(i))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(e,4);return f===0?new lr(this.information.getSize(),lr.FNC1,lr.FNC1):new lr(this.information.getSize(),f-1,lr.FNC1)}let i=this.extractNumericValueFromBitArray(e,7),a=(i-8)/11,h=(i-8)%11;return new lr(e+7,a,h)}extractNumericValueFromBitArray(e,i){return Ni.extractNumericValueFromBitArray(this.information,e,i)}static extractNumericValueFromBitArray(e,i,a){let h=0;for(let f=0;f<a;++f)e.get(i+f)&&(h|=1<<a-f-1);return h}decodeGeneralPurposeField(e,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(e);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new rs(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new rs(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,i;do{let a=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),e=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),e=i.isFinished()):(i=this.parseNumericBlock(),e=i.isFinished()),!(a!==this.current.getPosition())&&!e)break}while(!e);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let i;return e.isSecondDigitFNC1()?i=new rs(this.current.getPosition(),this.buffer.toString()):i=new rs(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Tn(!0,i)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let i=new rs(this.current.getPosition(),this.buffer.toString());return new Tn(!0,i)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Tn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let i=new rs(this.current.getPosition(),this.buffer.toString());return new Tn(!0,i)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Tn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let i=new rs(this.current.getPosition(),this.buffer.toString());return new Tn(!0,i)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Tn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,5);if(i>=5&&i<16)return!0;if(e+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(e,7);if(a>=64&&a<116)return!0;if(e+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(e,8);return h>=232&&h<253}decodeIsoIec646(e){let i=this.extractNumericValueFromBitArray(e,5);if(i===15)return new hn(e+5,hn.FNC1);if(i>=5&&i<15)return new hn(e+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(e,7);if(a>=64&&a<90)return new hn(e+7,""+(a+1));if(a>=90&&a<116)return new hn(e+7,""+(a+7));let h=this.extractNumericValueFromBitArray(e,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new W}return new hn(e+8,f)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,5);if(i>=5&&i<16)return!0;if(e+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(e,6);return a>=16&&a<63}decodeAlphanumeric(e){let i=this.extractNumericValueFromBitArray(e,5);if(i===15)return new hn(e+5,hn.FNC1);if(i>=5&&i<15)return new hn(e+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(e,6);if(a>=32&&a<58)return new hn(e+6,""+(a+33));let h;switch(a){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Oe("Decoding invalid alphanumeric value: "+a)}return new hn(e+6,h)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let i=0;i<5&&i+e<this.information.getSize();++i)if(i===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+i))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let i=e;i<e+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let i=0;i<4&&i+e<this.information.getSize();++i)if(this.information.get(e+i))return!1;return!0}}class hl{constructor(e){this.information=e,this.generalDecoder=new Ni(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wr extends hl{constructor(e){super(e)}encodeCompressedGtin(e,i){e.append("(01)");let a=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,i,a)}encodeCompressedGtinWithoutAI(e,i,a){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*h,10);f/100===0&&e.append("0"),f/10===0&&e.append("0"),e.append(f)}wr.appendCheckDigit(e,a)}static appendCheckDigit(e,i){let a=0;for(let h=0;h<13;h++){let f=e.charAt(h+i).charCodeAt(0)-48;a+=(h&1)===0?3*f:f}a=10-a%10,a===10&&(a=0),e.append(a)}}wr.GTIN_SIZE=40;class kr extends wr{constructor(e){super(e)}parseInformation(){let e=new te;e.append("(01)");let i=e.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(kr.HEADER_SIZE,4);return e.append(a),this.encodeCompressedGtinWithoutAI(e,kr.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(e,kr.HEADER_SIZE+44)}}kr.HEADER_SIZE=4;class wo extends hl{constructor(e){super(e)}parseInformation(){let e=new te;return this.getGeneralDecoder().decodeAllCodes(e,wo.HEADER_SIZE)}}wo.HEADER_SIZE=5;class yo extends wr{constructor(e){super(e)}encodeCompressedWeight(e,i,a){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(i,a);this.addWeightCode(e,h);let f=this.checkWeight(h),g=1e5;for(let x=0;x<5;++x)f/g===0&&e.append("0"),g/=10;e.append(f)}}class ss extends yo{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=ss.HEADER_SIZE+yo.GTIN_SIZE+ss.WEIGHT_SIZE)throw new ee;let e=new te;return this.encodeCompressedGtin(e,ss.HEADER_SIZE),this.encodeCompressedWeight(e,ss.HEADER_SIZE+yo.GTIN_SIZE,ss.WEIGHT_SIZE),e.toString()}}ss.HEADER_SIZE=5,ss.WEIGHT_SIZE=15;class wc extends ss{constructor(e){super(e)}addWeightCode(e,i){e.append("(3103)")}checkWeight(e){return e}}class yc extends ss{constructor(e){super(e)}addWeightCode(e,i){i<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Vr extends wr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Vr.HEADER_SIZE+wr.GTIN_SIZE)throw new ee;let e=new te;this.encodeCompressedGtin(e,Vr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Vr.HEADER_SIZE+wr.GTIN_SIZE,Vr.LAST_DIGIT_SIZE);e.append("(392"),e.append(i),e.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Vr.HEADER_SIZE+wr.GTIN_SIZE+Vr.LAST_DIGIT_SIZE,null);return e.append(a.getNewString()),e.toString()}}Vr.HEADER_SIZE=8,Vr.LAST_DIGIT_SIZE=2;class er extends wr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<er.HEADER_SIZE+wr.GTIN_SIZE)throw new ee;let e=new te;this.encodeCompressedGtin(e,er.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(er.HEADER_SIZE+wr.GTIN_SIZE,er.LAST_DIGIT_SIZE);e.append("(393"),e.append(i),e.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(er.HEADER_SIZE+wr.GTIN_SIZE+er.LAST_DIGIT_SIZE,er.FIRST_THREE_DIGITS_SIZE);a/100==0&&e.append("0"),a/10==0&&e.append("0"),e.append(a);let h=this.getGeneralDecoder().decodeGeneralPurposeField(er.HEADER_SIZE+wr.GTIN_SIZE+er.LAST_DIGIT_SIZE+er.FIRST_THREE_DIGITS_SIZE,null);return e.append(h.getNewString()),e.toString()}}er.HEADER_SIZE=8,er.LAST_DIGIT_SIZE=2,er.FIRST_THREE_DIGITS_SIZE=10;class fn extends yo{constructor(e,i,a){super(e),this.dateCode=a,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=fn.HEADER_SIZE+fn.GTIN_SIZE+fn.WEIGHT_SIZE+fn.DATE_SIZE)throw new ee;let e=new te;return this.encodeCompressedGtin(e,fn.HEADER_SIZE),this.encodeCompressedWeight(e,fn.HEADER_SIZE+fn.GTIN_SIZE,fn.WEIGHT_SIZE),this.encodeCompressedDate(e,fn.HEADER_SIZE+fn.GTIN_SIZE+fn.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,fn.DATE_SIZE);if(a==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let h=a%32;a/=32;let f=a%12+1;a/=12;let g=a;g/10==0&&e.append("0"),e.append(g),f/10==0&&e.append("0"),e.append(f),h/10==0&&e.append("0"),e.append(h)}addWeightCode(e,i){e.append("("),e.append(this.firstAIdigits),e.append(i/1e5),e.append(")")}checkWeight(e){return e%1e5}}fn.HEADER_SIZE=8,fn.WEIGHT_SIZE=20,fn.DATE_SIZE=16;function vc(O){try{if(O.get(1))return new kr(O);if(!O.get(2))return new wo(O);switch(Ni.extractNumericValueFromBitArray(O,1,4)){case 4:return new wc(O);case 5:return new yc(O)}switch(Ni.extractNumericValueFromBitArray(O,1,5)){case 12:return new Vr(O);case 13:return new er(O)}switch(Ni.extractNumericValueFromBitArray(O,1,7)){case 56:return new fn(O,"310","11");case 57:return new fn(O,"320","11");case 58:return new fn(O,"310","13");case 59:return new fn(O,"320","13");case 60:return new fn(O,"310","15");case 61:return new fn(O,"320","15");case 62:return new fn(O,"310","17");case 63:return new fn(O,"320","17")}}catch(e){throw console.log(e),new Oe("unknown decoder: "+O)}}class nn{constructor(e,i,a,h){this.leftchar=e,this.rightchar=i,this.finderpattern=a,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,i){return e instanceof nn?nn.equalsOrNull(e.leftchar,i.leftchar)&&nn.equalsOrNull(e.rightchar,i.rightchar)&&nn.equalsOrNull(e.finderpattern,i.finderpattern):!1}static equalsOrNull(e,i){return e===null?i===null:nn.equals(e,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class fl{constructor(e,i,a){this.pairs=e,this.rowNumber=i,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,i){return e instanceof fl?this.checkEqualitity(e,i)&&e.wasReversed===i.wasReversed:!1}checkEqualitity(e,i){if(!e||!i)return;let a;return e.forEach((h,f)=>{i.forEach(g=>{h.getLeftChar().getValue()===g.getLeftChar().getValue()&&h.getRightChar().getValue()===g.getRightChar().getValue()&&h.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(a=!0)})}),a}}class Te extends pt{constructor(e){super(...arguments),this.pairs=new Array(Te.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,i,a){this.pairs.length=0,this.startFromEven=!1;try{return Te.constructResult(this.decodeRow2pairs(e,i))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Te.constructResult(this.decodeRow2pairs(e,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,i){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,e))}catch(f){if(f instanceof ee){if(!this.pairs.length)throw new ee;a=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(e,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new ee}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return e&&(this.rows=this.rows.reverse()),i}checkRows(e,i){for(let a=i;a<this.rows.length;a++){let h=this.rows[a];this.pairs.length=0;for(let g of e)this.pairs.push(g.getPairs());if(this.pairs.push(h.getPairs()),!Te.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(e);f.push(h);try{return this.checkRows(f,a+1)}catch(g){this.verbose&&console.log(g)}}throw new ee}static isValidSequence(e){for(let i of Te.FINDER_PATTERN_SEQUENCES){if(e.length>i.length)continue;let a=!0;for(let h=0;h<e.length;h++)if(e[h].getFinderPattern().getValue()!=i[h]){a=!1;break}if(a)return!0}return!1}storeRow(e,i){let a=0,h=!1,f=!1;for(;a<this.rows.length;){let g=this.rows[a];if(g.getRowNumber()>e){f=g.isEquivalent(this.pairs);break}h=g.isEquivalent(this.pairs),a++}f||h||Te.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new fl(this.pairs,e,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,i){for(let a of i)if(a.getPairs().length!==e.length){for(let h of a.getPairs())for(let f of e)if(nn.equals(h,f))break}}static isPartialRow(e,i){for(let a of i){let h=!0;for(let f of e){let g=!1;for(let x of a.getPairs())if(f.equals(x)){g=!0;break}if(!g){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(e){let i=Ur.buildBitArray(e),h=vc(i).parseInformation(),f=e[0].getFinderPattern().getResultPoints(),g=e[e.length-1].getFinderPattern().getResultPoints(),x=[f[0],f[1],g[0],g[1]];return new Ve(h,null,null,x,we.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),i=e.getLeftChar(),a=e.getRightChar();if(a==null)return!1;let h=a.getChecksumPortion(),f=2;for(let x=1;x<this.pairs.size();++x){let C=this.pairs.get(x);h+=C.getLeftChar().getChecksumPortion(),f++;let E=C.getRightChar();E!=null&&(h+=E.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==i.getValue()}static getNextSecondBar(e,i){let a;return e.get(i)?(a=e.getNextUnset(i),a=e.getNextSet(a)):(a=e.getNextSet(i),a=e.getNextUnset(a)),a}retrieveNextPair(e,i,a){let h=i.length%2==0;this.startFromEven&&(h=!h);let f,g=!0,x=-1;do this.findNextPair(e,i,x),f=this.parseFoundFinderPattern(e,a,h),f==null?x=Te.getNextSecondBar(e,this.startEnd[0]):g=!1;while(g);let C=this.decodeDataCharacter(e,f,h,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new ee;let E;try{E=this.decodeDataCharacter(e,f,h,!1)}catch(T){E=null,this.verbose&&console.log(T)}return new nn(C,E,f,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,i,a){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=e.getSize(),g;a>=0?g=a:this.isEmptyPair(i)?g=0:g=i[i.length-1].getFinderPattern().getStartEnd()[1];let x=i.length%2!=0;this.startFromEven&&(x=!x);let C=!1;for(;g<f&&(C=!e.get(g),!!C);)g++;let E=0,T=g;for(let P=g;P<f;P++)if(e.get(P)!=C)h[E]++;else{if(E==3){if(x&&Te.reverseCounters(h),Te.isFinderPattern(h)){this.startEnd[0]=T,this.startEnd[1]=P;return}x&&Te.reverseCounters(h),T+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,E--}else E++;h[E]=1,C=!C}throw new ee}static reverseCounters(e){let i=e.length;for(let a=0;a<i/2;++a){let h=e[a];e[a]=e[i-a-1],e[i-a-1]=h}}parseFoundFinderPattern(e,i,a){let h,f,g;if(a){let E=this.startEnd[0]-1;for(;E>=0&&!e.get(E);)E--;E++,h=this.startEnd[0]-E,f=E,g=this.startEnd[1]}else f=this.startEnd[0],g=e.getNextUnset(this.startEnd[1]+1),h=g-this.startEnd[1];let x=this.getDecodeFinderCounters();j.arraycopy(x,0,x,1,x.length-1),x[0]=h;let C;try{C=this.parseFinderValue(x,Te.FINDER_PATTERNS)}catch{return null}return new on(C,[f,g],f,g,i)}decodeDataCharacter(e,i,a,h){let f=this.getDataCharacterCounters();for(let en=0;en<f.length;en++)f[en]=0;if(h)Te.recordPatternInReverse(e,i.getStartEnd()[0],f);else{Te.recordPattern(e,i.getStartEnd()[1],f);for(let en=0,_n=f.length-1;en<_n;en++,_n--){let dr=f[en];f[en]=f[_n],f[_n]=dr}}let g=17,x=Le.sum(new Int32Array(f))/g,C=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(x-C)/C>.3)throw new ee;let E=this.getOddCounts(),T=this.getEvenCounts(),P=this.getOddRoundingErrors(),F=this.getEvenRoundingErrors();for(let en=0;en<f.length;en++){let _n=1*f[en]/x,dr=_n+.5;if(dr<1){if(_n<.3)throw new ee;dr=1}else if(dr>8){if(_n>8.7)throw new ee;dr=8}let ii=en/2;(en&1)==0?(E[ii]=dr,P[ii]=_n-dr):(T[ii]=dr,F[ii]=_n-dr)}this.adjustOddEvenCounts(g);let q=4*i.getValue()+(a?0:2)+(h?0:1)-1,ne=0,se=0;for(let en=E.length-1;en>=0;en--){if(Te.isNotA1left(i,a,h)){let _n=Te.WEIGHTS[q][2*en];se+=E[en]*_n}ne+=E[en]}let de=0;for(let en=T.length-1;en>=0;en--)if(Te.isNotA1left(i,a,h)){let _n=Te.WEIGHTS[q][2*en+1];de+=T[en]*_n}let ye=se+de;if((ne&1)!=0||ne>13||ne<4)throw new ee;let Ue=(13-ne)/2,ze=Te.SYMBOL_WIDEST[Ue],De=9-ze,Bt=Gt.getRSSvalue(E,ze,!0),Rt=Gt.getRSSvalue(T,De,!1),vr=Te.EVEN_TOTAL_SUBSET[Ue],qr=Te.GSUM[Ue],Mn=Bt*vr+Rt+qr;return new zt(Mn,ye)}static isNotA1left(e,i,a){return!(e.getValue()==0&&i&&a)}adjustOddEvenCounts(e){let i=Le.sum(new Int32Array(this.getOddCounts())),a=Le.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;i>13?f=!0:i<4&&(h=!0);let g=!1,x=!1;a>13?x=!0:a<4&&(g=!0);let C=i+a-e,E=(i&1)==1,T=(a&1)==0;if(C==1)if(E){if(T)throw new ee;f=!0}else{if(!T)throw new ee;x=!0}else if(C==-1)if(E){if(T)throw new ee;h=!0}else{if(!T)throw new ee;g=!0}else if(C==0){if(E){if(!T)throw new ee;i<a?(h=!0,x=!0):(f=!0,g=!0)}else if(T)throw new ee}else throw new ee;if(h){if(f)throw new ee;Te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(x)throw new ee;Te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Te.SYMBOL_WIDEST=[7,5,4,3,1],Te.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Te.GSUM=[0,348,1388,2948,3988],Te.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Te.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Te.FINDER_PAT_A=0,Te.FINDER_PAT_B=1,Te.FINDER_PAT_C=2,Te.FINDER_PAT_D=3,Te.FINDER_PAT_E=4,Te.FINDER_PAT_F=5,Te.FINDER_PATTERN_SEQUENCES=[[Te.FINDER_PAT_A,Te.FINDER_PAT_A],[Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B],[Te.FINDER_PAT_A,Te.FINDER_PAT_C,Te.FINDER_PAT_B,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_C],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F]],Te.MAX_PAIRS=11;class bc extends zt{constructor(e,i,a){super(e,i),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class un extends pt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,i,a){const h=this.decodePair(i,!1,e,a);un.addOrTally(this.possibleLeftPairs,h),i.reverse();let f=this.decodePair(i,!0,e,a);un.addOrTally(this.possibleRightPairs,f),i.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&un.checkChecksum(g,x))return un.constructResult(g,x)}throw new ee}static addOrTally(e,i){if(i==null)return;let a=!1;for(let h of e)if(h.getValue()===i.getValue()){h.incrementCount(),a=!0;break}a||e.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,i){let a=4537077*e.getValue()+i.getValue(),h=new String(a).toString(),f=new te;for(let E=13-h.length;E>0;E--)f.append("0");f.append(h);let g=0;for(let E=0;E<13;E++){let T=f.charAt(E).charCodeAt(0)-48;g+=(E&1)===0?3*T:T}g=10-g%10,g===10&&(g=0),f.append(g.toString());let x=e.getFinderPattern().getResultPoints(),C=i.getFinderPattern().getResultPoints();return new Ve(f.toString(),null,0,[x[0],x[1],C[0],C[1]],we.RSS_14,new Date().getTime())}static checkChecksum(e,i){let a=(e.getChecksumPortion()+16*i.getChecksumPortion())%79,h=9*e.getFinderPattern().getValue()+i.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,a===h}decodePair(e,i,a,h){try{let f=this.findFinderPattern(e,i),g=this.parseFoundFinderPattern(e,a,i,f),x=h==null?null:h.get(Y.NEED_RESULT_POINT_CALLBACK);if(x!=null){let T=(f[0]+f[1])/2;i&&(T=e.getSize()-1-T),x.foundPossibleResultPoint(new ke(T,a))}let C=this.decodeDataCharacter(e,g,!0),E=this.decodeDataCharacter(e,g,!1);return new bc(1597*C.getValue()+E.getValue(),C.getChecksumPortion()+4*E.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(e,i,a){let h=this.getDataCharacterCounters();for(let de=0;de<h.length;de++)h[de]=0;if(a)wn.recordPatternInReverse(e,i.getStartEnd()[0],h);else{wn.recordPattern(e,i.getStartEnd()[1]+1,h);for(let de=0,ye=h.length-1;de<ye;de++,ye--){let Ue=h[de];h[de]=h[ye],h[ye]=Ue}}let f=a?16:15,g=Le.sum(new Int32Array(h))/f,x=this.getOddCounts(),C=this.getEvenCounts(),E=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors();for(let de=0;de<h.length;de++){let ye=h[de]/g,Ue=Math.floor(ye+.5);Ue<1?Ue=1:Ue>8&&(Ue=8);let ze=Math.floor(de/2);(de&1)===0?(x[ze]=Ue,E[ze]=ye-Ue):(C[ze]=Ue,T[ze]=ye-Ue)}this.adjustOddEvenCounts(a,f);let P=0,F=0;for(let de=x.length-1;de>=0;de--)F*=9,F+=x[de],P+=x[de];let q=0,ne=0;for(let de=C.length-1;de>=0;de--)q*=9,q+=C[de],ne+=C[de];let se=F+3*q;if(a){if((P&1)!==0||P>12||P<4)throw new ee;let de=(12-P)/2,ye=un.OUTSIDE_ODD_WIDEST[de],Ue=9-ye,ze=Gt.getRSSvalue(x,ye,!1),De=Gt.getRSSvalue(C,Ue,!0),Bt=un.OUTSIDE_EVEN_TOTAL_SUBSET[de],Rt=un.OUTSIDE_GSUM[de];return new zt(ze*Bt+De+Rt,se)}else{if((ne&1)!==0||ne>10||ne<4)throw new ee;let de=(10-ne)/2,ye=un.INSIDE_ODD_WIDEST[de],Ue=9-ye,ze=Gt.getRSSvalue(x,ye,!0),De=Gt.getRSSvalue(C,Ue,!1),Bt=un.INSIDE_ODD_TOTAL_SUBSET[de],Rt=un.INSIDE_GSUM[de];return new zt(De*Bt+ze+Rt,se)}}findFinderPattern(e,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let h=e.getSize(),f=!1,g=0;for(;g<h&&(f=!e.get(g),i!==f);)g++;let x=0,C=g;for(let E=g;E<h;E++)if(e.get(E)!==f)a[x]++;else{if(x===3){if(pt.isFinderPattern(a))return[C,E];C+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,x--}else x++;a[x]=1,f=!f}throw new ee}parseFoundFinderPattern(e,i,a,h){let f=e.get(h[0]),g=h[0]-1;for(;g>=0&&f!==e.get(g);)g--;g++;const x=h[0]-g,C=this.getDecodeFinderCounters(),E=new Int32Array(C.length);j.arraycopy(C,0,E,1,C.length-1),E[0]=x;const T=this.parseFinderValue(E,un.FINDER_PATTERNS);let P=g,F=h[1];return a&&(P=e.getSize()-1-P,F=e.getSize()-1-F),new on(T,[g,h[1]],P,F,i)}adjustOddEvenCounts(e,i){let a=Le.sum(new Int32Array(this.getOddCounts())),h=Le.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1,x=!1,C=!1;e?(a>12?g=!0:a<4&&(f=!0),h>12?C=!0:h<4&&(x=!0)):(a>11?g=!0:a<5&&(f=!0),h>10?C=!0:h<4&&(x=!0));let E=a+h-i,T=(a&1)===(e?1:0),P=(h&1)===1;if(E===1)if(T){if(P)throw new ee;g=!0}else{if(!P)throw new ee;C=!0}else if(E===-1)if(T){if(P)throw new ee;f=!0}else{if(!P)throw new ee;x=!0}else if(E===0){if(T){if(!P)throw new ee;a<h?(f=!0,C=!0):(g=!0,x=!0)}else if(P)throw new ee}else throw new ee;if(f){if(g)throw new ee;pt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&pt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(C)throw new ee;pt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&pt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}un.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],un.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],un.OUTSIDE_GSUM=[0,161,961,2015,2715],un.INSIDE_GSUM=[0,336,1036,1516],un.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],un.INSIDE_ODD_WIDEST=[2,4,6,8],un.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ii extends wn{constructor(e,i){super(),this.readers=[],this.verbose=i===!0;const a=e?e.get(Y.POSSIBLE_FORMATS):null,h=e&&e.get(Y.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(we.EAN_13)||a.includes(we.UPC_A)||a.includes(we.EAN_8)||a.includes(we.UPC_E))&&this.readers.push(new Ze(e)),a.includes(we.CODE_39)&&this.readers.push(new Sn(h)),a.includes(we.CODE_128)&&this.readers.push(new Ge),a.includes(we.ITF)&&this.readers.push(new Kt),a.includes(we.RSS_14)&&this.readers.push(new un),a.includes(we.RSS_EXPANDED)&&this.readers.push(new Te(this.verbose))):(this.readers.push(new Ze(e)),this.readers.push(new Sn),this.readers.push(new Ze(e)),this.readers.push(new Ge),this.readers.push(new Kt),this.readers.push(new un),this.readers.push(new Te(this.verbose)))}decodeRow(e,i,a){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(e,i,a)}catch{}throw new ee}reset(){this.readers.forEach(e=>e.reset())}}class Cc extends Be{constructor(e=500,i){super(new Ii(i),e,i)}}class qt{constructor(e,i,a){this.ecCodewords=e,this.ecBlocks=[i],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Pt{constructor(e,i){this.count=e,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Vt{constructor(e,i,a,h,f,g){this.versionNumber=e,this.symbolSizeRows=i,this.symbolSizeColumns=a,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=g;let x=0;const C=g.getECCodewords(),E=g.getECBlocks();for(let T of E)x+=T.getCount()*(T.getDataCodewords()+C);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,i){if((e&1)!==0||(i&1)!==0)throw new W;for(let a of Vt.VERSIONS)if(a.symbolSizeRows===e&&a.symbolSizeColumns===i)return a;throw new W}toString(){return""+this.versionNumber}static buildVersions(){return[new Vt(1,10,10,8,8,new qt(5,new Pt(1,3))),new Vt(2,12,12,10,10,new qt(7,new Pt(1,5))),new Vt(3,14,14,12,12,new qt(10,new Pt(1,8))),new Vt(4,16,16,14,14,new qt(12,new Pt(1,12))),new Vt(5,18,18,16,16,new qt(14,new Pt(1,18))),new Vt(6,20,20,18,18,new qt(18,new Pt(1,22))),new Vt(7,22,22,20,20,new qt(20,new Pt(1,30))),new Vt(8,24,24,22,22,new qt(24,new Pt(1,36))),new Vt(9,26,26,24,24,new qt(28,new Pt(1,44))),new Vt(10,32,32,14,14,new qt(36,new Pt(1,62))),new Vt(11,36,36,16,16,new qt(42,new Pt(1,86))),new Vt(12,40,40,18,18,new qt(48,new Pt(1,114))),new Vt(13,44,44,20,20,new qt(56,new Pt(1,144))),new Vt(14,48,48,22,22,new qt(68,new Pt(1,174))),new Vt(15,52,52,24,24,new qt(42,new Pt(2,102))),new Vt(16,64,64,14,14,new qt(56,new Pt(2,140))),new Vt(17,72,72,16,16,new qt(36,new Pt(4,92))),new Vt(18,80,80,18,18,new qt(48,new Pt(4,114))),new Vt(19,88,88,20,20,new qt(56,new Pt(4,144))),new Vt(20,96,96,22,22,new qt(68,new Pt(4,174))),new Vt(21,104,104,24,24,new qt(56,new Pt(6,136))),new Vt(22,120,120,18,18,new qt(68,new Pt(6,175))),new Vt(23,132,132,20,20,new qt(62,new Pt(8,163))),new Vt(24,144,144,22,22,new qt(62,new Pt(8,156),new Pt(2,155))),new Vt(25,8,18,6,16,new qt(7,new Pt(1,5))),new Vt(26,8,32,6,14,new qt(11,new Pt(1,10))),new Vt(27,12,26,10,24,new qt(14,new Pt(1,16))),new Vt(28,12,36,10,16,new qt(18,new Pt(1,22))),new Vt(29,16,36,14,16,new qt(24,new Pt(1,32))),new Vt(30,16,48,14,22,new qt(28,new Pt(1,49)))]}}Vt.VERSIONS=Vt.buildVersions();class Ir{constructor(e){const i=e.getHeight();if(i<8||i>144||(i&1)!==0)throw new W;this.version=Ir.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new fe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const i=e.getHeight(),a=e.getWidth();return Vt.getVersionForDimensions(i,a)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let i=0,a=4,h=0;const f=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let x=!1,C=!1,E=!1,T=!1;do if(a===f&&h===0&&!x)e[i++]=this.readCorner1(f,g)&255,a-=2,h+=2,x=!0;else if(a===f-2&&h===0&&(g&3)!==0&&!C)e[i++]=this.readCorner2(f,g)&255,a-=2,h+=2,C=!0;else if(a===f+4&&h===2&&(g&7)===0&&!E)e[i++]=this.readCorner3(f,g)&255,a-=2,h+=2,E=!0;else if(a===f-2&&h===0&&(g&7)===4&&!T)e[i++]=this.readCorner4(f,g)&255,a-=2,h+=2,T=!0;else{do a<f&&h>=0&&!this.readMappingMatrix.get(h,a)&&(e[i++]=this.readUtah(a,h,f,g)&255),a-=2,h+=2;while(a>=0&&h<g);a+=1,h+=3;do a>=0&&h<g&&!this.readMappingMatrix.get(h,a)&&(e[i++]=this.readUtah(a,h,f,g)&255),a+=2,h-=2;while(a<f&&h>=0);a+=3,h+=1}while(a<f||h<g);if(i!==this.version.getTotalCodewords())throw new W;return e}readModule(e,i,a,h){return e<0&&(e+=a,i+=4-(a+4&7)),i<0&&(i+=h,e+=4-(h+4&7)),this.readMappingMatrix.set(i,e),this.mappingBitMatrix.get(i,e)}readUtah(e,i,a,h){let f=0;return this.readModule(e-2,i-2,a,h)&&(f|=1),f<<=1,this.readModule(e-2,i-1,a,h)&&(f|=1),f<<=1,this.readModule(e-1,i-2,a,h)&&(f|=1),f<<=1,this.readModule(e-1,i-1,a,h)&&(f|=1),f<<=1,this.readModule(e-1,i,a,h)&&(f|=1),f<<=1,this.readModule(e,i-2,a,h)&&(f|=1),f<<=1,this.readModule(e,i-1,a,h)&&(f|=1),f<<=1,this.readModule(e,i,a,h)&&(f|=1),f}readCorner1(e,i){let a=0;return this.readModule(e-1,0,e,i)&&(a|=1),a<<=1,this.readModule(e-1,1,e,i)&&(a|=1),a<<=1,this.readModule(e-1,2,e,i)&&(a|=1),a<<=1,this.readModule(0,i-2,e,i)&&(a|=1),a<<=1,this.readModule(0,i-1,e,i)&&(a|=1),a<<=1,this.readModule(1,i-1,e,i)&&(a|=1),a<<=1,this.readModule(2,i-1,e,i)&&(a|=1),a<<=1,this.readModule(3,i-1,e,i)&&(a|=1),a}readCorner2(e,i){let a=0;return this.readModule(e-3,0,e,i)&&(a|=1),a<<=1,this.readModule(e-2,0,e,i)&&(a|=1),a<<=1,this.readModule(e-1,0,e,i)&&(a|=1),a<<=1,this.readModule(0,i-4,e,i)&&(a|=1),a<<=1,this.readModule(0,i-3,e,i)&&(a|=1),a<<=1,this.readModule(0,i-2,e,i)&&(a|=1),a<<=1,this.readModule(0,i-1,e,i)&&(a|=1),a<<=1,this.readModule(1,i-1,e,i)&&(a|=1),a}readCorner3(e,i){let a=0;return this.readModule(e-1,0,e,i)&&(a|=1),a<<=1,this.readModule(e-1,i-1,e,i)&&(a|=1),a<<=1,this.readModule(0,i-3,e,i)&&(a|=1),a<<=1,this.readModule(0,i-2,e,i)&&(a|=1),a<<=1,this.readModule(0,i-1,e,i)&&(a|=1),a<<=1,this.readModule(1,i-3,e,i)&&(a|=1),a<<=1,this.readModule(1,i-2,e,i)&&(a|=1),a<<=1,this.readModule(1,i-1,e,i)&&(a|=1),a}readCorner4(e,i){let a=0;return this.readModule(e-3,0,e,i)&&(a|=1),a<<=1,this.readModule(e-2,0,e,i)&&(a|=1),a<<=1,this.readModule(e-1,0,e,i)&&(a|=1),a<<=1,this.readModule(0,i-2,e,i)&&(a|=1),a<<=1,this.readModule(0,i-1,e,i)&&(a|=1),a<<=1,this.readModule(1,i-1,e,i)&&(a|=1),a<<=1,this.readModule(2,i-1,e,i)&&(a|=1),a<<=1,this.readModule(3,i-1,e,i)&&(a|=1),a}extractDataRegion(e){const i=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(e.getHeight()!==i)throw new A("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),g=i/h|0,x=a/f|0,C=g*h,E=x*f,T=new fe(E,C);for(let P=0;P<g;++P){const F=P*h;for(let q=0;q<x;++q){const ne=q*f;for(let se=0;se<h;++se){const de=P*(h+2)+1+se,ye=F+se;for(let Ue=0;Ue<f;++Ue){const ze=q*(f+2)+1+Ue;if(e.get(ze,de)){const De=ne+Ue;T.set(De,ye)}}}}}return T}}class gl{constructor(e,i){this.numDataCodewords=e,this.codewords=i}static getDataBlocks(e,i){const a=i.getECBlocks();let h=0;const f=a.getECBlocks();for(let se of f)h+=se.getCount();const g=new Array(h);let x=0;for(let se of f)for(let de=0;de<se.getCount();de++){const ye=se.getDataCodewords(),Ue=a.getECCodewords()+ye;g[x++]=new gl(ye,new Uint8Array(Ue))}const E=g[0].codewords.length-a.getECCodewords(),T=E-1;let P=0;for(let se=0;se<T;se++)for(let de=0;de<x;de++)g[de].codewords[se]=e[P++];const F=i.getVersionNumber()===24,q=F?8:x;for(let se=0;se<q;se++)g[se].codewords[E-1]=e[P++];const ne=g[0].codewords.length;for(let se=E;se<ne;se++)for(let de=0;de<x;de++){const ye=F?(de+8)%x:de,Ue=F&&ye>7?se-1:se;g[ye].codewords[Ue]=e[P++]}if(P!==e.length)throw new A;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ml{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new A(""+e);let i=0,a=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(a>0){const g=8-a,x=e<g?e:g,C=g-x,E=255>>8-x<<C;i=(f[h]&E)>>C,e-=x,a+=x,a===8&&(a=0,h++)}if(e>0){for(;e>=8;)i=i<<8|f[h]&255,h++,e-=8;if(e>0){const g=8-e,x=255>>g<<g;i=i<<e|(f[h]&x)>>g,a+=e}}return this.bitOffset=a,this.byteOffset=h,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Pn;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Pn||(Pn={}));class Wr{static decode(e){const i=new ml(e),a=new te,h=new te,f=new Array;let g=Pn.ASCII_ENCODE;do if(g===Pn.ASCII_ENCODE)g=this.decodeAsciiSegment(i,a,h);else{switch(g){case Pn.C40_ENCODE:this.decodeC40Segment(i,a);break;case Pn.TEXT_ENCODE:this.decodeTextSegment(i,a);break;case Pn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,a);break;case Pn.EDIFACT_ENCODE:this.decodeEdifactSegment(i,a);break;case Pn.BASE256_ENCODE:this.decodeBase256Segment(i,a,f);break;default:throw new W}g=Pn.ASCII_ENCODE}while(g!==Pn.PAD_ENCODE&&i.available()>0);return h.length()>0&&a.append(h.toString()),new qe(e,a.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(e,i,a){let h=!1;do{let f=e.readBits(8);if(f===0)throw new W;if(f<=128)return h&&(f+=128),i.append(String.fromCharCode(f-1)),Pn.ASCII_ENCODE;if(f===129)return Pn.PAD_ENCODE;if(f<=229){const g=f-130;g<10&&i.append("0"),i.append(""+g)}else switch(f){case 230:return Pn.C40_ENCODE;case 231:return Pn.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:i.append("[)>05"),a.insert(0,"");break;case 237:i.append("[)>06"),a.insert(0,"");break;case 238:return Pn.ANSIX12_ENCODE;case 239:return Pn.TEXT_ENCODE;case 240:return Pn.EDIFACT_ENCODE;case 241:break;default:if(f!==254||e.available()!==0)throw new W;break}}while(e.available()>0);return Pn.ASCII_ENCODE}static decodeC40Segment(e,i){let a=!1;const h=[];let f=0;do{if(e.available()===8)return;const g=e.readBits(8);if(g===254)return;this.parseTwoBytes(g,e.readBits(8),h);for(let x=0;x<3;x++){const C=h[x];switch(f){case 0:if(C<3)f=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[C];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E)}else throw new W;break;case 1:a?(i.append(String.fromCharCode(C+128)),a=!1):i.append(String.fromCharCode(C)),f=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[C];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E)}else switch(C){case 27:i.append("");break;case 30:a=!0;break;default:throw new W}f=0;break;case 3:a?(i.append(String.fromCharCode(C+224)),a=!1):i.append(String.fromCharCode(C+96)),f=0;break;default:throw new W}}}while(e.available()>0)}static decodeTextSegment(e,i){let a=!1,h=[],f=0;do{if(e.available()===8)return;const g=e.readBits(8);if(g===254)return;this.parseTwoBytes(g,e.readBits(8),h);for(let x=0;x<3;x++){const C=h[x];switch(f){case 0:if(C<3)f=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[C];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E)}else throw new W;break;case 1:a?(i.append(String.fromCharCode(C+128)),a=!1):i.append(String.fromCharCode(C)),f=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[C];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E)}else switch(C){case 27:i.append("");break;case 30:a=!0;break;default:throw new W}f=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[C];a?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),a=!1):i.append(E),f=0}else throw new W;break;default:throw new W}}}while(e.available()>0)}static decodeAnsiX12Segment(e,i){const a=[];do{if(e.available()===8)return;const h=e.readBits(8);if(h===254)return;this.parseTwoBytes(h,e.readBits(8),a);for(let f=0;f<3;f++){const g=a[f];switch(g){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(g<14)i.append(String.fromCharCode(g+44));else if(g<40)i.append(String.fromCharCode(g+51));else throw new W;break}}}while(e.available()>0)}static parseTwoBytes(e,i,a){let h=(e<<8)+i-1,f=Math.floor(h/1600);a[0]=f,h-=f*1600,f=Math.floor(h/40),a[1]=f,a[2]=h-f*40}static decodeEdifactSegment(e,i){do{if(e.available()<=16)return;for(let a=0;a<4;a++){let h=e.readBits(6);if(h===31){const f=8-e.getBitOffset();f!==8&&e.readBits(f);return}(h&32)===0&&(h|=64),i.append(String.fromCharCode(h))}}while(e.available()>0)}static decodeBase256Segment(e,i,a){let h=1+e.getByteOffset();const f=this.unrandomize255State(e.readBits(8),h++);let g;if(f===0?g=e.available()/8|0:f<250?g=f:g=250*(f-249)+this.unrandomize255State(e.readBits(8),h++),g<0)throw new W;const x=new Uint8Array(g);for(let C=0;C<g;C++){if(e.available()<8)throw new W;x[C]=this.unrandomize255State(e.readBits(8),h++)}a.push(x);try{i.append(ue.decode(x,ae.ISO88591))}catch(C){throw new Oe("Platform does not support required encoding: "+C.message)}}static unrandomize255State(e,i){const a=149*i%255+1,h=e-a;return h>=0?h:h+256}}Wr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Wr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Wr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Wr.TEXT_SHIFT2_SET_CHARS=Wr.C40_SHIFT2_SET_CHARS,Wr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ia{constructor(){this.rsDecoder=new rt(nt.DATA_MATRIX_FIELD_256)}decode(e){const i=new Ir(e),a=i.getVersion(),h=i.readCodewords(),f=gl.getDataBlocks(h,a);let g=0;for(let E of f)g+=E.getNumDataCodewords();const x=new Uint8Array(g),C=f.length;for(let E=0;E<C;E++){const T=f[E],P=T.getCodewords(),F=T.getNumDataCodewords();this.correctErrors(P,F);for(let q=0;q<F;q++)x[q*C+E]=P[q]}return Wr.decode(x)}correctErrors(e,i){const a=new Int32Array(e);try{this.rsDecoder.decode(a,e.length-i)}catch{throw new R}for(let h=0;h<i;h++)e[h]=a[h]}}class dn{constructor(e){this.image=e,this.rectangleDetector=new mt(this.image)}detect(){const e=this.rectangleDetector.detect();let i=this.detectSolid1(e);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new ee;i=this.shiftToModuleCenter(i);const a=i[0],h=i[1],f=i[2],g=i[3];let x=this.transitionsBetween(a,g)+1,C=this.transitionsBetween(f,g)+1;(x&1)===1&&(x+=1),(C&1)===1&&(C+=1),4*x<7*C&&4*C<7*x&&(x=C=Math.max(x,C));let E=dn.sampleGrid(this.image,a,h,f,g,x,C);return new Xt(E,[a,h,f,g])}static shiftPoint(e,i,a){let h=(i.getX()-e.getX())/(a+1),f=(i.getY()-e.getY())/(a+1);return new ke(e.getX()+h,e.getY()+f)}static moveAway(e,i,a){let h=e.getX(),f=e.getY();return h<i?h-=1:h+=1,f<a?f-=1:f+=1,new ke(h,f)}detectSolid1(e){let i=e[0],a=e[1],h=e[3],f=e[2],g=this.transitionsBetween(i,a),x=this.transitionsBetween(a,h),C=this.transitionsBetween(h,f),E=this.transitionsBetween(f,i),T=g,P=[f,i,a,h];return T>x&&(T=x,P[0]=i,P[1]=a,P[2]=h,P[3]=f),T>C&&(T=C,P[0]=a,P[1]=h,P[2]=f,P[3]=i),T>E&&(P[0]=h,P[1]=f,P[2]=i,P[3]=a),P}detectSolid2(e){let i=e[0],a=e[1],h=e[2],f=e[3],g=this.transitionsBetween(i,f),x=dn.shiftPoint(a,h,(g+1)*4),C=dn.shiftPoint(h,a,(g+1)*4),E=this.transitionsBetween(x,i),T=this.transitionsBetween(C,f);return E<T?(e[0]=i,e[1]=a,e[2]=h,e[3]=f):(e[0]=a,e[1]=h,e[2]=f,e[3]=i),e}correctTopRight(e){let i=e[0],a=e[1],h=e[2],f=e[3],g=this.transitionsBetween(i,f),x=this.transitionsBetween(a,f),C=dn.shiftPoint(i,a,(x+1)*4),E=dn.shiftPoint(h,a,(g+1)*4);g=this.transitionsBetween(C,f),x=this.transitionsBetween(E,f);let T=new ke(f.getX()+(h.getX()-a.getX())/(g+1),f.getY()+(h.getY()-a.getY())/(g+1)),P=new ke(f.getX()+(i.getX()-a.getX())/(x+1),f.getY()+(i.getY()-a.getY())/(x+1));if(!this.isValid(T))return this.isValid(P)?P:null;if(!this.isValid(P))return T;let F=this.transitionsBetween(C,T)+this.transitionsBetween(E,T),q=this.transitionsBetween(C,P)+this.transitionsBetween(E,P);return F>q?T:P}shiftToModuleCenter(e){let i=e[0],a=e[1],h=e[2],f=e[3],g=this.transitionsBetween(i,f)+1,x=this.transitionsBetween(h,f)+1,C=dn.shiftPoint(i,a,x*4),E=dn.shiftPoint(h,a,g*4);g=this.transitionsBetween(C,f)+1,x=this.transitionsBetween(E,f)+1,(g&1)===1&&(g+=1),(x&1)===1&&(x+=1);let T=(i.getX()+a.getX()+h.getX()+f.getX())/4,P=(i.getY()+a.getY()+h.getY()+f.getY())/4;i=dn.moveAway(i,T,P),a=dn.moveAway(a,T,P),h=dn.moveAway(h,T,P),f=dn.moveAway(f,T,P);let F,q;return C=dn.shiftPoint(i,a,x*4),C=dn.shiftPoint(C,f,g*4),F=dn.shiftPoint(a,i,x*4),F=dn.shiftPoint(F,h,g*4),E=dn.shiftPoint(h,f,x*4),E=dn.shiftPoint(E,a,g*4),q=dn.shiftPoint(f,h,x*4),q=dn.shiftPoint(q,i,g*4),[C,F,E,q]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,i,a,h,f,g,x){return It.getInstance().sampleGrid(e,g,x,.5,.5,g-.5,.5,g-.5,x-.5,.5,x-.5,i.getX(),i.getY(),f.getX(),f.getY(),h.getX(),h.getY(),a.getX(),a.getY())}transitionsBetween(e,i){let a=Math.trunc(e.getX()),h=Math.trunc(e.getY()),f=Math.trunc(i.getX()),g=Math.trunc(i.getY()),x=Math.abs(g-h)>Math.abs(f-a);if(x){let se=a;a=h,h=se,se=f,f=g,g=se}let C=Math.abs(f-a),E=Math.abs(g-h),T=-C/2,P=h<g?1:-1,F=a<f?1:-1,q=0,ne=this.image.get(x?h:a,x?a:h);for(let se=a,de=h;se!==f;se+=F){let ye=this.image.get(x?de:se,x?se:de);if(ye!==ne&&(q++,ne=ye),T+=E,T>0){if(de===g)break;de+=P,T-=C}}return q}}class $r{constructor(){this.decoder=new ia}decode(e,i=null){let a,h;if(i!=null&&i.has(Y.PURE_BARCODE)){const E=$r.extractPureBits(e.getBlackMatrix());a=this.decoder.decode(E),h=$r.NO_POINTS}else{const E=new dn(e.getBlackMatrix()).detect();a=this.decoder.decode(E.getBits()),h=E.getPoints()}const f=a.getRawBytes(),g=new Ve(a.getText(),f,8*f.length,h,we.DATA_MATRIX,j.currentTimeMillis()),x=a.getByteSegments();x!=null&&g.putMetadata(Re.BYTE_SEGMENTS,x);const C=a.getECLevel();return C!=null&&g.putMetadata(Re.ERROR_CORRECTION_LEVEL,C),g}reset(){}static extractPureBits(e){const i=e.getTopLeftOnBit(),a=e.getBottomRightOnBit();if(i==null||a==null)throw new ee;const h=this.moduleSize(i,e);let f=i[1];const g=a[1];let x=i[0];const E=(a[0]-x+1)/h,T=(g-f+1)/h;if(E<=0||T<=0)throw new ee;const P=h/2;f+=P,x+=P;const F=new fe(E,T);for(let q=0;q<T;q++){const ne=f+q*h;for(let se=0;se<E;se++)e.get(x+se*h,ne)&&F.set(se,q)}return F}static moduleSize(e,i){const a=i.getWidth();let h=e[0];const f=e[1];for(;h<a&&i.get(h,f);)h++;if(h===a)throw new ee;const g=h-e[0];if(g===0)throw new ee;return g}}$r.NO_POINTS=[];class Md extends Be{constructor(e=500){super(new $r,e)}}var Ti;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(Ti||(Ti={}));class rn{constructor(e,i,a){this.value=e,this.stringValue=i,this.bits=a,rn.FOR_BITS.set(a,this),rn.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return rn.L;case"M":return rn.M;case"Q":return rn.Q;case"H":return rn.H;default:throw new _(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof rn))return!1;const i=e;return this.value===i.value}static forBits(e){if(e<0||e>=rn.FOR_BITS.size)throw new A;return rn.FOR_BITS.get(e)}}rn.FOR_BITS=new Map,rn.FOR_VALUE=new Map,rn.L=new rn(Ti.L,"L",1),rn.M=new rn(Ti.M,"M",0),rn.Q=new rn(Ti.Q,"Q",3),rn.H=new rn(Ti.H,"H",2);class $n{constructor(e){this.errorCorrectionLevel=rn.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,i){return B.bitCount(e^i)}static decodeFormatInformation(e,i){const a=$n.doDecodeFormatInformation(e,i);return a!==null?a:$n.doDecodeFormatInformation(e^$n.FORMAT_INFO_MASK_QR,i^$n.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,i){let a=Number.MAX_SAFE_INTEGER,h=0;for(const f of $n.FORMAT_INFO_DECODE_LOOKUP){const g=f[0];if(g===e||g===i)return new $n(f[1]);let x=$n.numBitsDiffering(e,g);x<a&&(h=f[1],a=x),e!==i&&(x=$n.numBitsDiffering(i,g),x<a&&(h=f[1],a=x))}return a<=3?new $n(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof $n))return!1;const i=e;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}$n.FORMAT_INFO_MASK_QR=21522,$n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ge{constructor(e,...i){this.ecCodewordsPerBlock=e,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const i=this.ecBlocks;for(const a of i)e+=a.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class G{constructor(e,i){this.count=e,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,i,...a){this.versionNumber=e,this.alignmentPatternCenters=i,this.ecBlocks=a;let h=0;const f=a[0].getECCodewordsPerBlock(),g=a[0].getECBlocks();for(const x of g)h+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new W;try{return this.getVersionForNumber((e-17)/4)}catch{throw new W}}static getVersionForNumber(e){if(e<1||e>40)throw new A;return ht.VERSIONS[e-1]}static decodeVersionInformation(e){let i=Number.MAX_SAFE_INTEGER,a=0;for(let h=0;h<ht.VERSION_DECODE_INFO.length;h++){const f=ht.VERSION_DECODE_INFO[h];if(f===e)return ht.getVersionForNumber(h+7);const g=$n.numBitsDiffering(e,f);g<i&&(a=h+7,i=g)}return i<=3?ht.getVersionForNumber(a):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),i=new fe(e);i.setRegion(0,0,9,9),i.setRegion(e-8,0,8,9),i.setRegion(0,e-8,9,8);const a=this.alignmentPatternCenters.length;for(let h=0;h<a;h++){const f=this.alignmentPatternCenters[h]-2;for(let g=0;g<a;g++)h===0&&(g===0||g===a-1)||h===a-1&&g===0||i.setRegion(this.alignmentPatternCenters[g]-2,f,5,5)}return i.setRegion(6,9,1,e-17),i.setRegion(9,6,e-17,1),this.versionNumber>6&&(i.setRegion(e-11,0,3,6),i.setRegion(0,e-11,6,3)),i}toString(){return""+this.versionNumber}}ht.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ht.VERSIONS=[new ht(1,new Int32Array(0),new ge(7,new G(1,19)),new ge(10,new G(1,16)),new ge(13,new G(1,13)),new ge(17,new G(1,9))),new ht(2,Int32Array.from([6,18]),new ge(10,new G(1,34)),new ge(16,new G(1,28)),new ge(22,new G(1,22)),new ge(28,new G(1,16))),new ht(3,Int32Array.from([6,22]),new ge(15,new G(1,55)),new ge(26,new G(1,44)),new ge(18,new G(2,17)),new ge(22,new G(2,13))),new ht(4,Int32Array.from([6,26]),new ge(20,new G(1,80)),new ge(18,new G(2,32)),new ge(26,new G(2,24)),new ge(16,new G(4,9))),new ht(5,Int32Array.from([6,30]),new ge(26,new G(1,108)),new ge(24,new G(2,43)),new ge(18,new G(2,15),new G(2,16)),new ge(22,new G(2,11),new G(2,12))),new ht(6,Int32Array.from([6,34]),new ge(18,new G(2,68)),new ge(16,new G(4,27)),new ge(24,new G(4,19)),new ge(28,new G(4,15))),new ht(7,Int32Array.from([6,22,38]),new ge(20,new G(2,78)),new ge(18,new G(4,31)),new ge(18,new G(2,14),new G(4,15)),new ge(26,new G(4,13),new G(1,14))),new ht(8,Int32Array.from([6,24,42]),new ge(24,new G(2,97)),new ge(22,new G(2,38),new G(2,39)),new ge(22,new G(4,18),new G(2,19)),new ge(26,new G(4,14),new G(2,15))),new ht(9,Int32Array.from([6,26,46]),new ge(30,new G(2,116)),new ge(22,new G(3,36),new G(2,37)),new ge(20,new G(4,16),new G(4,17)),new ge(24,new G(4,12),new G(4,13))),new ht(10,Int32Array.from([6,28,50]),new ge(18,new G(2,68),new G(2,69)),new ge(26,new G(4,43),new G(1,44)),new ge(24,new G(6,19),new G(2,20)),new ge(28,new G(6,15),new G(2,16))),new ht(11,Int32Array.from([6,30,54]),new ge(20,new G(4,81)),new ge(30,new G(1,50),new G(4,51)),new ge(28,new G(4,22),new G(4,23)),new ge(24,new G(3,12),new G(8,13))),new ht(12,Int32Array.from([6,32,58]),new ge(24,new G(2,92),new G(2,93)),new ge(22,new G(6,36),new G(2,37)),new ge(26,new G(4,20),new G(6,21)),new ge(28,new G(7,14),new G(4,15))),new ht(13,Int32Array.from([6,34,62]),new ge(26,new G(4,107)),new ge(22,new G(8,37),new G(1,38)),new ge(24,new G(8,20),new G(4,21)),new ge(22,new G(12,11),new G(4,12))),new ht(14,Int32Array.from([6,26,46,66]),new ge(30,new G(3,115),new G(1,116)),new ge(24,new G(4,40),new G(5,41)),new ge(20,new G(11,16),new G(5,17)),new ge(24,new G(11,12),new G(5,13))),new ht(15,Int32Array.from([6,26,48,70]),new ge(22,new G(5,87),new G(1,88)),new ge(24,new G(5,41),new G(5,42)),new ge(30,new G(5,24),new G(7,25)),new ge(24,new G(11,12),new G(7,13))),new ht(16,Int32Array.from([6,26,50,74]),new ge(24,new G(5,98),new G(1,99)),new ge(28,new G(7,45),new G(3,46)),new ge(24,new G(15,19),new G(2,20)),new ge(30,new G(3,15),new G(13,16))),new ht(17,Int32Array.from([6,30,54,78]),new ge(28,new G(1,107),new G(5,108)),new ge(28,new G(10,46),new G(1,47)),new ge(28,new G(1,22),new G(15,23)),new ge(28,new G(2,14),new G(17,15))),new ht(18,Int32Array.from([6,30,56,82]),new ge(30,new G(5,120),new G(1,121)),new ge(26,new G(9,43),new G(4,44)),new ge(28,new G(17,22),new G(1,23)),new ge(28,new G(2,14),new G(19,15))),new ht(19,Int32Array.from([6,30,58,86]),new ge(28,new G(3,113),new G(4,114)),new ge(26,new G(3,44),new G(11,45)),new ge(26,new G(17,21),new G(4,22)),new ge(26,new G(9,13),new G(16,14))),new ht(20,Int32Array.from([6,34,62,90]),new ge(28,new G(3,107),new G(5,108)),new ge(26,new G(3,41),new G(13,42)),new ge(30,new G(15,24),new G(5,25)),new ge(28,new G(15,15),new G(10,16))),new ht(21,Int32Array.from([6,28,50,72,94]),new ge(28,new G(4,116),new G(4,117)),new ge(26,new G(17,42)),new ge(28,new G(17,22),new G(6,23)),new ge(30,new G(19,16),new G(6,17))),new ht(22,Int32Array.from([6,26,50,74,98]),new ge(28,new G(2,111),new G(7,112)),new ge(28,new G(17,46)),new ge(30,new G(7,24),new G(16,25)),new ge(24,new G(34,13))),new ht(23,Int32Array.from([6,30,54,78,102]),new ge(30,new G(4,121),new G(5,122)),new ge(28,new G(4,47),new G(14,48)),new ge(30,new G(11,24),new G(14,25)),new ge(30,new G(16,15),new G(14,16))),new ht(24,Int32Array.from([6,28,54,80,106]),new ge(30,new G(6,117),new G(4,118)),new ge(28,new G(6,45),new G(14,46)),new ge(30,new G(11,24),new G(16,25)),new ge(30,new G(30,16),new G(2,17))),new ht(25,Int32Array.from([6,32,58,84,110]),new ge(26,new G(8,106),new G(4,107)),new ge(28,new G(8,47),new G(13,48)),new ge(30,new G(7,24),new G(22,25)),new ge(30,new G(22,15),new G(13,16))),new ht(26,Int32Array.from([6,30,58,86,114]),new ge(28,new G(10,114),new G(2,115)),new ge(28,new G(19,46),new G(4,47)),new ge(28,new G(28,22),new G(6,23)),new ge(30,new G(33,16),new G(4,17))),new ht(27,Int32Array.from([6,34,62,90,118]),new ge(30,new G(8,122),new G(4,123)),new ge(28,new G(22,45),new G(3,46)),new ge(30,new G(8,23),new G(26,24)),new ge(30,new G(12,15),new G(28,16))),new ht(28,Int32Array.from([6,26,50,74,98,122]),new ge(30,new G(3,117),new G(10,118)),new ge(28,new G(3,45),new G(23,46)),new ge(30,new G(4,24),new G(31,25)),new ge(30,new G(11,15),new G(31,16))),new ht(29,Int32Array.from([6,30,54,78,102,126]),new ge(30,new G(7,116),new G(7,117)),new ge(28,new G(21,45),new G(7,46)),new ge(30,new G(1,23),new G(37,24)),new ge(30,new G(19,15),new G(26,16))),new ht(30,Int32Array.from([6,26,52,78,104,130]),new ge(30,new G(5,115),new G(10,116)),new ge(28,new G(19,47),new G(10,48)),new ge(30,new G(15,24),new G(25,25)),new ge(30,new G(23,15),new G(25,16))),new ht(31,Int32Array.from([6,30,56,82,108,134]),new ge(30,new G(13,115),new G(3,116)),new ge(28,new G(2,46),new G(29,47)),new ge(30,new G(42,24),new G(1,25)),new ge(30,new G(23,15),new G(28,16))),new ht(32,Int32Array.from([6,34,60,86,112,138]),new ge(30,new G(17,115)),new ge(28,new G(10,46),new G(23,47)),new ge(30,new G(10,24),new G(35,25)),new ge(30,new G(19,15),new G(35,16))),new ht(33,Int32Array.from([6,30,58,86,114,142]),new ge(30,new G(17,115),new G(1,116)),new ge(28,new G(14,46),new G(21,47)),new ge(30,new G(29,24),new G(19,25)),new ge(30,new G(11,15),new G(46,16))),new ht(34,Int32Array.from([6,34,62,90,118,146]),new ge(30,new G(13,115),new G(6,116)),new ge(28,new G(14,46),new G(23,47)),new ge(30,new G(44,24),new G(7,25)),new ge(30,new G(59,16),new G(1,17))),new ht(35,Int32Array.from([6,30,54,78,102,126,150]),new ge(30,new G(12,121),new G(7,122)),new ge(28,new G(12,47),new G(26,48)),new ge(30,new G(39,24),new G(14,25)),new ge(30,new G(22,15),new G(41,16))),new ht(36,Int32Array.from([6,24,50,76,102,128,154]),new ge(30,new G(6,121),new G(14,122)),new ge(28,new G(6,47),new G(34,48)),new ge(30,new G(46,24),new G(10,25)),new ge(30,new G(2,15),new G(64,16))),new ht(37,Int32Array.from([6,28,54,80,106,132,158]),new ge(30,new G(17,122),new G(4,123)),new ge(28,new G(29,46),new G(14,47)),new ge(30,new G(49,24),new G(10,25)),new ge(30,new G(24,15),new G(46,16))),new ht(38,Int32Array.from([6,32,58,84,110,136,162]),new ge(30,new G(4,122),new G(18,123)),new ge(28,new G(13,46),new G(32,47)),new ge(30,new G(48,24),new G(14,25)),new ge(30,new G(42,15),new G(32,16))),new ht(39,Int32Array.from([6,26,54,82,110,138,166]),new ge(30,new G(20,117),new G(4,118)),new ge(28,new G(40,47),new G(7,48)),new ge(30,new G(43,24),new G(22,25)),new ge(30,new G(10,15),new G(67,16))),new ht(40,Int32Array.from([6,30,58,86,114,142,170]),new ge(30,new G(19,118),new G(6,119)),new ge(28,new G(18,47),new G(31,48)),new ge(30,new G(34,24),new G(34,25)),new ge(30,new G(20,15),new G(61,16)))];var Rn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class Dt{constructor(e,i){this.value=e,this.isMasked=i}unmaskBitMatrix(e,i){for(let a=0;a<i;a++)for(let h=0;h<i;h++)this.isMasked(a,h)&&e.flip(h,a)}}Dt.values=new Map([[Rn.DATA_MASK_000,new Dt(Rn.DATA_MASK_000,(O,e)=>(O+e&1)===0)],[Rn.DATA_MASK_001,new Dt(Rn.DATA_MASK_001,(O,e)=>(O&1)===0)],[Rn.DATA_MASK_010,new Dt(Rn.DATA_MASK_010,(O,e)=>e%3===0)],[Rn.DATA_MASK_011,new Dt(Rn.DATA_MASK_011,(O,e)=>(O+e)%3===0)],[Rn.DATA_MASK_100,new Dt(Rn.DATA_MASK_100,(O,e)=>(Math.floor(O/2)+Math.floor(e/3)&1)===0)],[Rn.DATA_MASK_101,new Dt(Rn.DATA_MASK_101,(O,e)=>O*e%6===0)],[Rn.DATA_MASK_110,new Dt(Rn.DATA_MASK_110,(O,e)=>O*e%6<3)],[Rn.DATA_MASK_111,new Dt(Rn.DATA_MASK_111,(O,e)=>(O+e+O*e%3&1)===0)]]);class Ec{constructor(e){const i=e.getHeight();if(i<21||(i&3)!==1)throw new W;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let f=0;f<6;f++)e=this.copyBit(f,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let f=5;f>=0;f--)e=this.copyBit(8,f,e);const i=this.bitMatrix.getHeight();let a=0;const h=i-7;for(let f=i-1;f>=h;f--)a=this.copyBit(8,f,a);for(let f=i-8;f<i;f++)a=this.copyBit(f,8,a);if(this.parsedFormatInfo=$n.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),i=Math.floor((e-17)/4);if(i<=6)return ht.getVersionForNumber(i);let a=0;const h=e-11;for(let g=5;g>=0;g--)for(let x=e-9;x>=h;x--)a=this.copyBit(x,g,a);let f=ht.decodeVersionInformation(a);if(f!==null&&f.getDimensionForVersion()===e)return this.parsedVersion=f,f;a=0;for(let g=5;g>=0;g--)for(let x=e-9;x>=h;x--)a=this.copyBit(g,x,a);if(f=ht.decodeVersionInformation(a),f!==null&&f.getDimensionForVersion()===e)return this.parsedVersion=f,f;throw new W}copyBit(e,i,a){return(this.isMirror?this.bitMatrix.get(i,e):this.bitMatrix.get(e,i))?a<<1|1:a<<1}readCodewords(){const e=this.readFormatInformation(),i=this.readVersion(),a=Dt.values.get(e.getDataMask()),h=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,h);const f=i.buildFunctionPattern();let g=!0;const x=new Uint8Array(i.getTotalCodewords());let C=0,E=0,T=0;for(let P=h-1;P>0;P-=2){P===6&&P--;for(let F=0;F<h;F++){const q=g?h-1-F:F;for(let ne=0;ne<2;ne++)f.get(P-ne,q)||(T++,E<<=1,this.bitMatrix.get(P-ne,q)&&(E|=1),T===8&&(x[C++]=E,T=0,E=0))}g=!g}if(C!==i.getTotalCodewords())throw new W;return x}remask(){if(this.parsedFormatInfo===null)return;const e=Dt.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,i)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let i=0,a=e.getWidth();i<a;i++)for(let h=i+1,f=e.getHeight();h<f;h++)e.get(i,h)!==e.get(h,i)&&(e.flip(h,i),e.flip(i,h))}}class oa{constructor(e,i){this.numDataCodewords=e,this.codewords=i}static getDataBlocks(e,i,a){if(e.length!==i.getTotalCodewords())throw new A;const h=i.getECBlocksForLevel(a);let f=0;const g=h.getECBlocks();for(const ne of g)f+=ne.getCount();const x=new Array(f);let C=0;for(const ne of g)for(let se=0;se<ne.getCount();se++){const de=ne.getDataCodewords(),ye=h.getECCodewordsPerBlock()+de;x[C++]=new oa(de,new Uint8Array(ye))}const E=x[0].codewords.length;let T=x.length-1;for(;T>=0&&x[T].codewords.length!==E;)T--;T++;const P=E-h.getECCodewordsPerBlock();let F=0;for(let ne=0;ne<P;ne++)for(let se=0;se<C;se++)x[se].codewords[ne]=e[F++];for(let ne=T;ne<C;ne++)x[ne].codewords[P]=e[F++];const q=x[0].codewords.length;for(let ne=P;ne<q;ne++)for(let se=0;se<C;se++){const de=se<T?ne:ne+1;x[se].codewords[de]=e[F++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var yr;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(yr||(yr={}));class ft{constructor(e,i,a,h){this.value=e,this.stringValue=i,this.characterCountBitsForVersions=a,this.bits=h,ft.FOR_BITS.set(h,this),ft.FOR_VALUE.set(e,this)}static forBits(e){const i=ft.FOR_BITS.get(e);if(i===void 0)throw new A;return i}getCharacterCountBits(e){const i=e.getVersionNumber();let a;return i<=9?a=0:i<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof ft))return!1;const i=e;return this.value===i.value}toString(){return this.stringValue}}ft.FOR_BITS=new Map,ft.FOR_VALUE=new Map,ft.TERMINATOR=new ft(yr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ft.NUMERIC=new ft(yr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ft.ALPHANUMERIC=new ft(yr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ft.STRUCTURED_APPEND=new ft(yr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ft.BYTE=new ft(yr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ft.ECI=new ft(yr.ECI,"ECI",Int32Array.from([0,0,0]),7),ft.KANJI=new ft(yr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ft.FNC1_FIRST_POSITION=new ft(yr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ft.FNC1_SECOND_POSITION=new ft(yr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ft.HANZI=new ft(yr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class gn{static decode(e,i,a,h){const f=new ml(e);let g=new te;const x=new Array;let C=-1,E=-1;try{let T=null,P=!1,F;do{if(f.available()<4)F=ft.TERMINATOR;else{const q=f.readBits(4);F=ft.forBits(q)}switch(F){case ft.TERMINATOR:break;case ft.FNC1_FIRST_POSITION:case ft.FNC1_SECOND_POSITION:P=!0;break;case ft.STRUCTURED_APPEND:if(f.available()<16)throw new W;C=f.readBits(8),E=f.readBits(8);break;case ft.ECI:const q=gn.parseECIValue(f);if(T=$.getCharacterSetECIByValue(q),T===null)throw new W;break;case ft.HANZI:const ne=f.readBits(4),se=f.readBits(F.getCharacterCountBits(i));ne===gn.GB2312_SUBSET&&gn.decodeHanziSegment(f,g,se);break;default:const de=f.readBits(F.getCharacterCountBits(i));switch(F){case ft.NUMERIC:gn.decodeNumericSegment(f,g,de);break;case ft.ALPHANUMERIC:gn.decodeAlphanumericSegment(f,g,de,P);break;case ft.BYTE:gn.decodeByteSegment(f,g,de,T,x,h);break;case ft.KANJI:gn.decodeKanjiSegment(f,g,de);break;default:throw new W}break}}while(F!==ft.TERMINATOR)}catch{throw new W}return new qe(e,g.toString(),x.length===0?null:x,a===null?null:a.toString(),C,E)}static decodeHanziSegment(e,i,a){if(a*13>e.available())throw new W;const h=new Uint8Array(2*a);let f=0;for(;a>0;){const g=e.readBits(13);let x=g/96<<8&4294967295|g%96;x<959?x+=41377:x+=42657,h[f]=x>>8&255,h[f+1]=x&255,f+=2,a--}try{i.append(ue.decode(h,ae.GB2312))}catch(g){throw new W(g)}}static decodeKanjiSegment(e,i,a){if(a*13>e.available())throw new W;const h=new Uint8Array(2*a);let f=0;for(;a>0;){const g=e.readBits(13);let x=g/192<<8&4294967295|g%192;x<7936?x+=33088:x+=49472,h[f]=x>>8,h[f+1]=x,f+=2,a--}try{i.append(ue.decode(h,ae.SHIFT_JIS))}catch(g){throw new W(g)}}static decodeByteSegment(e,i,a,h,f,g){if(8*a>e.available())throw new W;const x=new Uint8Array(a);for(let E=0;E<a;E++)x[E]=e.readBits(8);let C;h===null?C=ae.guessEncoding(x,g):C=h.getName();try{i.append(ue.decode(x,C))}catch(E){throw new W(E)}f.push(x)}static toAlphaNumericChar(e){if(e>=gn.ALPHANUMERIC_CHARS.length)throw new W;return gn.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,i,a,h){const f=i.length();for(;a>1;){if(e.available()<11)throw new W;const g=e.readBits(11);i.append(gn.toAlphaNumericChar(Math.floor(g/45))),i.append(gn.toAlphaNumericChar(g%45)),a-=2}if(a===1){if(e.available()<6)throw new W;i.append(gn.toAlphaNumericChar(e.readBits(6)))}if(h)for(let g=f;g<i.length();g++)i.charAt(g)==="%"&&(g<i.length()-1&&i.charAt(g+1)==="%"?i.deleteCharAt(g+1):i.setCharAt(g,""))}static decodeNumericSegment(e,i,a){for(;a>=3;){if(e.available()<10)throw new W;const h=e.readBits(10);if(h>=1e3)throw new W;i.append(gn.toAlphaNumericChar(Math.floor(h/100))),i.append(gn.toAlphaNumericChar(Math.floor(h/10)%10)),i.append(gn.toAlphaNumericChar(h%10)),a-=3}if(a===2){if(e.available()<7)throw new W;const h=e.readBits(7);if(h>=100)throw new W;i.append(gn.toAlphaNumericChar(Math.floor(h/10))),i.append(gn.toAlphaNumericChar(h%10))}else if(a===1){if(e.available()<4)throw new W;const h=e.readBits(4);if(h>=10)throw new W;i.append(gn.toAlphaNumericChar(h))}}static parseECIValue(e){const i=e.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const a=e.readBits(8);return(i&63)<<8&4294967295|a}if((i&224)===192){const a=e.readBits(16);return(i&31)<<16&4294967295|a}throw new W}}gn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",gn.GB2312_SUBSET=1;class pl{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const i=e[0];e[0]=e[2],e[2]=i}}class xl{constructor(){this.rsDecoder=new rt(nt.QR_CODE_FIELD_256)}decodeBooleanArray(e,i){return this.decodeBitMatrix(fe.parseFromBooleanArray(e),i)}decodeBitMatrix(e,i){const a=new Ec(e);let h=null;try{return this.decodeBitMatrixParser(a,i)}catch(f){h=f}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const f=this.decodeBitMatrixParser(a,i);return f.setOther(new pl(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(e,i){const a=e.readVersion(),h=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),g=oa.getDataBlocks(f,a,h);let x=0;for(const T of g)x+=T.getNumDataCodewords();const C=new Uint8Array(x);let E=0;for(const T of g){const P=T.getCodewords(),F=T.getNumDataCodewords();this.correctErrors(P,F);for(let q=0;q<F;q++)C[E++]=P[q]}return gn.decode(C,a,h,i)}correctErrors(e,i){const a=new Int32Array(e);try{this.rsDecoder.decode(a,e.length-i)}catch{throw new R}for(let h=0;h<i;h++)e[h]=a[h]}}class Ri extends ke{constructor(e,i,a){super(e,i),this.estimatedModuleSize=a}aboutEquals(e,i,a){if(Math.abs(i-this.getY())<=e&&Math.abs(a-this.getX())<=e){const h=Math.abs(e-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(e,i,a){const h=(this.getX()+i)/2,f=(this.getY()+e)/2,g=(this.estimatedModuleSize+a)/2;return new Ri(h,f,g)}}class Hr{constructor(e,i,a,h,f,g,x){this.image=e,this.startX=i,this.startY=a,this.width=h,this.height=f,this.moduleSize=g,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,i=this.height,a=this.width,h=e+a,f=this.startY+i/2,g=new Int32Array(3),x=this.image;for(let C=0;C<i;C++){const E=f+((C&1)===0?Math.floor((C+1)/2):-Math.floor((C+1)/2));g[0]=0,g[1]=0,g[2]=0;let T=e;for(;T<h&&!x.get(T,E);)T++;let P=0;for(;T<h;){if(x.get(T,E))if(P===1)g[1]++;else if(P===2){if(this.foundPatternCross(g)){const F=this.handlePossibleCenter(g,E,T);if(F!==null)return F}g[0]=g[2],g[1]=1,g[2]=0,P=1}else g[++P]++;else P===1&&P++,g[P]++;T++}if(this.foundPatternCross(g)){const F=this.handlePossibleCenter(g,E,h);if(F!==null)return F}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(e,i){return i-e[2]-e[1]/2}foundPatternCross(e){const i=this.moduleSize,a=i/2;for(let h=0;h<3;h++)if(Math.abs(i-e[h])>=a)return!1;return!0}crossCheckVertical(e,i,a,h){const f=this.image,g=f.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let C=e;for(;C>=0&&f.get(i,C)&&x[1]<=a;)x[1]++,C--;if(C<0||x[1]>a)return NaN;for(;C>=0&&!f.get(i,C)&&x[0]<=a;)x[0]++,C--;if(x[0]>a)return NaN;for(C=e+1;C<g&&f.get(i,C)&&x[1]<=a;)x[1]++,C++;if(C===g||x[1]>a)return NaN;for(;C<g&&!f.get(i,C)&&x[2]<=a;)x[2]++,C++;if(x[2]>a)return NaN;const E=x[0]+x[1]+x[2];return 5*Math.abs(E-h)>=2*h?NaN:this.foundPatternCross(x)?Hr.centerFromEnd(x,C):NaN}handlePossibleCenter(e,i,a){const h=e[0]+e[1]+e[2],f=Hr.centerFromEnd(e,a),g=this.crossCheckVertical(i,f,2*e[1],h);if(!isNaN(g)){const x=(e[0]+e[1]+e[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(x,g,f))return E.combineEstimate(g,f,x);const C=new Ri(f,g,x);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class is extends ke{constructor(e,i,a,h){super(e,i),this.estimatedModuleSize=a,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,i,a){if(Math.abs(i-this.getY())<=e&&Math.abs(a-this.getX())<=e){const h=Math.abs(e-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(e,i,a){const h=this.count+1,f=(this.count*this.getX()+i)/h,g=(this.count*this.getY()+e)/h,x=(this.count*this.estimatedModuleSize+a)/h;return new is(f,g,x,h)}}class Bs{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Cn{constructor(e,i){this.image=e,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const i=e!=null&&e.get(Y.TRY_HARDER)!==void 0,a=e!=null&&e.get(Y.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),g=h.getWidth();let x=Math.floor(3*f/(4*Cn.MAX_MODULES));(x<Cn.MIN_SKIP||i)&&(x=Cn.MIN_SKIP);let C=!1;const E=new Int32Array(5);for(let P=x-1;P<f&&!C;P+=x){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let F=0;for(let q=0;q<g;q++)if(h.get(q,P))(F&1)===1&&F++,E[F]++;else if((F&1)===0)if(F===4)if(Cn.foundPatternCross(E)){if(this.handlePossibleCenter(E,P,q,a)===!0)if(x=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const se=this.findRowSkip();se>E[2]&&(P+=se-E[2]-x,q=g-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,F=3;continue}F=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,F=3;else E[++F]++;else E[F]++;Cn.foundPatternCross(E)&&this.handlePossibleCenter(E,P,g,a)===!0&&(x=E[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const T=this.selectBestPatterns();return ke.orderBestPatterns(T),new Bs(T)}static centerFromEnd(e,i){return i-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let i=0;for(let f=0;f<5;f++){const g=e[f];if(g===0)return!1;i+=g}if(i<7)return!1;const a=i/7,h=a/2;return Math.abs(a-e[0])<h&&Math.abs(a-e[1])<h&&Math.abs(3*a-e[2])<3*h&&Math.abs(a-e[3])<h&&Math.abs(a-e[4])<h}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,i,a,h){const f=this.getCrossCheckStateCount();let g=0;const x=this.image;for(;e>=g&&i>=g&&x.get(i-g,e-g);)f[2]++,g++;if(e<g||i<g)return!1;for(;e>=g&&i>=g&&!x.get(i-g,e-g)&&f[1]<=a;)f[1]++,g++;if(e<g||i<g||f[1]>a)return!1;for(;e>=g&&i>=g&&x.get(i-g,e-g)&&f[0]<=a;)f[0]++,g++;if(f[0]>a)return!1;const C=x.getHeight(),E=x.getWidth();for(g=1;e+g<C&&i+g<E&&x.get(i+g,e+g);)f[2]++,g++;if(e+g>=C||i+g>=E)return!1;for(;e+g<C&&i+g<E&&!x.get(i+g,e+g)&&f[3]<a;)f[3]++,g++;if(e+g>=C||i+g>=E||f[3]>=a)return!1;for(;e+g<C&&i+g<E&&x.get(i+g,e+g)&&f[4]<a;)f[4]++,g++;if(f[4]>=a)return!1;const T=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(T-h)<2*h&&Cn.foundPatternCross(f)}crossCheckVertical(e,i,a,h){const f=this.image,g=f.getHeight(),x=this.getCrossCheckStateCount();let C=e;for(;C>=0&&f.get(i,C);)x[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(i,C)&&x[1]<=a;)x[1]++,C--;if(C<0||x[1]>a)return NaN;for(;C>=0&&f.get(i,C)&&x[0]<=a;)x[0]++,C--;if(x[0]>a)return NaN;for(C=e+1;C<g&&f.get(i,C);)x[2]++,C++;if(C===g)return NaN;for(;C<g&&!f.get(i,C)&&x[3]<a;)x[3]++,C++;if(C===g||x[3]>=a)return NaN;for(;C<g&&f.get(i,C)&&x[4]<a;)x[4]++,C++;if(x[4]>=a)return NaN;const E=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(E-h)>=2*h?NaN:Cn.foundPatternCross(x)?Cn.centerFromEnd(x,C):NaN}crossCheckHorizontal(e,i,a,h){const f=this.image,g=f.getWidth(),x=this.getCrossCheckStateCount();let C=e;for(;C>=0&&f.get(C,i);)x[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(C,i)&&x[1]<=a;)x[1]++,C--;if(C<0||x[1]>a)return NaN;for(;C>=0&&f.get(C,i)&&x[0]<=a;)x[0]++,C--;if(x[0]>a)return NaN;for(C=e+1;C<g&&f.get(C,i);)x[2]++,C++;if(C===g)return NaN;for(;C<g&&!f.get(C,i)&&x[3]<a;)x[3]++,C++;if(C===g||x[3]>=a)return NaN;for(;C<g&&f.get(C,i)&&x[4]<a;)x[4]++,C++;if(x[4]>=a)return NaN;const E=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(E-h)>=h?NaN:Cn.foundPatternCross(x)?Cn.centerFromEnd(x,C):NaN}handlePossibleCenter(e,i,a,h){const f=e[0]+e[1]+e[2]+e[3]+e[4];let g=Cn.centerFromEnd(e,a),x=this.crossCheckVertical(i,Math.floor(g),e[2],f);if(!isNaN(x)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(x),e[2],f),!isNaN(g)&&(!h||this.crossCheckDiagonal(Math.floor(x),Math.floor(g),e[2],f)))){const C=f/7;let E=!1;const T=this.possibleCenters;for(let P=0,F=T.length;P<F;P++){const q=T[P];if(q.aboutEquals(C,x,g)){T[P]=q.combineEstimate(x,g,C),E=!0;break}}if(!E){const P=new is(g,x,C);T.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const a of this.possibleCenters)if(a.getCount()>=Cn.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,i=0;const a=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=Cn.CENTER_QUORUM&&(e++,i+=g.getEstimatedModuleSize());if(e<3)return!1;const h=i/a;let f=0;for(const g of this.possibleCenters)f+=Math.abs(g.getEstimatedModuleSize()-h);return f<=.05*i}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new ee;const i=this.possibleCenters;let a;if(e>3){let h=0,f=0;for(const C of this.possibleCenters){const E=C.getEstimatedModuleSize();h+=E,f+=E*E}a=h/e;let g=Math.sqrt(f/e-a*a);i.sort((C,E)=>{const T=Math.abs(E.getEstimatedModuleSize()-a),P=Math.abs(C.getEstimatedModuleSize()-a);return T<P?-1:T>P?1:0});const x=Math.max(.2*a,g);for(let C=0;C<i.length&&i.length>3;C++){const E=i[C];Math.abs(E.getEstimatedModuleSize()-a)>x&&(i.splice(C,1),C--)}}if(i.length>3){let h=0;for(const f of i)h+=f.getEstimatedModuleSize();a=h/i.length,i.sort((f,g)=>{if(g.getCount()===f.getCount()){const x=Math.abs(g.getEstimatedModuleSize()-a),C=Math.abs(f.getEstimatedModuleSize()-a);return x<C?1:x>C?-1:0}else return g.getCount()-f.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Cn.CENTER_QUORUM=2,Cn.MIN_SKIP=3,Cn.MAX_MODULES=57;class xs{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(Y.NEED_RESULT_POINT_CALLBACK);const a=new Cn(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(a)}processFinderPatternInfo(e){const i=e.getTopLeft(),a=e.getTopRight(),h=e.getBottomLeft(),f=this.calculateModuleSize(i,a,h);if(f<1)throw new ee("No pattern found in proccess finder.");const g=xs.computeDimension(i,a,h,f),x=ht.getProvisionalVersionForDimension(g),C=x.getDimensionForVersion()-7;let E=null;if(x.getAlignmentPatternCenters().length>0){const q=a.getX()-i.getX()+h.getX(),ne=a.getY()-i.getY()+h.getY(),se=1-3/C,de=Math.floor(i.getX()+se*(q-i.getX())),ye=Math.floor(i.getY()+se*(ne-i.getY()));for(let Ue=4;Ue<=16;Ue<<=1)try{E=this.findAlignmentInRegion(f,de,ye,Ue);break}catch(ze){if(!(ze instanceof ee))throw ze}}const T=xs.createTransform(i,a,h,E,g),P=xs.sampleGrid(this.image,T,g);let F;return E===null?F=[h,i,a]:F=[h,i,a,E],new Xt(P,F)}static createTransform(e,i,a,h,f){const g=f-3.5;let x,C,E,T;return h!==null?(x=h.getX(),C=h.getY(),E=g-3,T=E):(x=i.getX()-e.getX()+a.getX(),C=i.getY()-e.getY()+a.getY(),E=g,T=g),$t.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,E,T,3.5,g,e.getX(),e.getY(),i.getX(),i.getY(),x,C,a.getX(),a.getY())}static sampleGrid(e,i,a){return It.getInstance().sampleGridWithTransform(e,a,a,i)}static computeDimension(e,i,a,h){const f=Le.round(ke.distance(e,i)/h),g=Le.round(ke.distance(e,a)/h);let x=Math.floor((f+g)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new ee("Dimensions could be not found.")}return x}calculateModuleSize(e,i,a){return(this.calculateModuleSizeOneWay(e,i)+this.calculateModuleSizeOneWay(e,a))/2}calculateModuleSizeOneWay(e,i){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(i.getX()),Math.floor(i.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(a)?h/7:isNaN(h)?a/7:(a+h)/14}sizeOfBlackWhiteBlackRunBothWays(e,i,a,h){let f=this.sizeOfBlackWhiteBlackRun(e,i,a,h),g=1,x=e-(a-e);x<0?(g=e/(e-x),x=0):x>=this.image.getWidth()&&(g=(this.image.getWidth()-1-e)/(x-e),x=this.image.getWidth()-1);let C=Math.floor(i-(h-i)*g);return g=1,C<0?(g=i/(i-C),C=0):C>=this.image.getHeight()&&(g=(this.image.getHeight()-1-i)/(C-i),C=this.image.getHeight()-1),x=Math.floor(e+(x-e)*g),f+=this.sizeOfBlackWhiteBlackRun(e,i,x,C),f-1}sizeOfBlackWhiteBlackRun(e,i,a,h){const f=Math.abs(h-i)>Math.abs(a-e);if(f){let q=e;e=i,i=q,q=a,a=h,h=q}const g=Math.abs(a-e),x=Math.abs(h-i);let C=-g/2;const E=e<a?1:-1,T=i<h?1:-1;let P=0;const F=a+E;for(let q=e,ne=i;q!==F;q+=E){const se=f?ne:q,de=f?q:ne;if(P===1===this.image.get(se,de)){if(P===2)return Le.distance(q,ne,e,i);P++}if(C+=x,C>0){if(ne===h)break;ne+=T,C-=g}}return P===2?Le.distance(a+E,h,e,i):NaN}findAlignmentInRegion(e,i,a,h){const f=Math.floor(h*e),g=Math.max(0,i-f),x=Math.min(this.image.getWidth()-1,i+f);if(x-g<e*3)throw new ee("Alignment top exceeds estimated module size.");const C=Math.max(0,a-f),E=Math.min(this.image.getHeight()-1,a+f);if(E-C<e*3)throw new ee("Alignment bottom exceeds estimated module size.");return new Hr(this.image,g,C,x-g,E-C,e,this.resultPointCallback).find()}}class cr{constructor(){this.decoder=new xl}getDecoder(){return this.decoder}decode(e,i){let a,h;if(i!=null&&i.get(Y.PURE_BARCODE)!==void 0){const C=cr.extractPureBits(e.getBlackMatrix());a=this.decoder.decodeBitMatrix(C,i),h=cr.NO_POINTS}else{const C=new xs(e.getBlackMatrix()).detect(i);a=this.decoder.decodeBitMatrix(C.getBits(),i),h=C.getPoints()}a.getOther()instanceof pl&&a.getOther().applyMirroredCorrection(h);const f=new Ve(a.getText(),a.getRawBytes(),void 0,h,we.QR_CODE,void 0),g=a.getByteSegments();g!==null&&f.putMetadata(Re.BYTE_SEGMENTS,g);const x=a.getECLevel();return x!==null&&f.putMetadata(Re.ERROR_CORRECTION_LEVEL,x),a.hasStructuredAppend()&&(f.putMetadata(Re.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),f.putMetadata(Re.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),f}reset(){}static extractPureBits(e){const i=e.getTopLeftOnBit(),a=e.getBottomRightOnBit();if(i===null||a===null)throw new ee;const h=this.moduleSize(i,e);let f=i[1],g=a[1],x=i[0],C=a[0];if(x>=C||f>=g)throw new ee;if(g-f!==C-x&&(C=x+(g-f),C>=e.getWidth()))throw new ee;const E=Math.round((C-x+1)/h),T=Math.round((g-f+1)/h);if(E<=0||T<=0)throw new ee;if(T!==E)throw new ee;const P=Math.floor(h/2);f+=P,x+=P;const F=x+Math.floor((E-1)*h)-C;if(F>0){if(F>P)throw new ee;x-=F}const q=f+Math.floor((T-1)*h)-g;if(q>0){if(q>P)throw new ee;f-=q}const ne=new fe(E,T);for(let se=0;se<T;se++){const de=f+Math.floor(se*h);for(let ye=0;ye<E;ye++)e.get(x+Math.floor(ye*h),de)&&ne.set(ye,se)}return ne}static moduleSize(e,i){const a=i.getHeight(),h=i.getWidth();let f=e[0],g=e[1],x=!0,C=0;for(;f<h&&g<a;){if(x!==i.get(f,g)){if(++C===5)break;x=!x}f++,g++}if(f===h||g===a)throw new ee;return(f-e[0])/7}}cr.NO_POINTS=new Array;class vt{PDF417Common(){}static getBitCountSum(e){return Le.sum(e)}static toIntArray(e){if(e==null||!e.length)return vt.EMPTY_INT_ARRAY;const i=new Int32Array(e.length);let a=0;for(const h of e)i[a++]=h;return i}static getCodeword(e){const i=z.binarySearch(vt.SYMBOL_TABLE,e&262143);return i<0?-1:(vt.CODEWORD_TABLE[i]-1)%vt.NUMBER_OF_CODEWORDS}}vt.NUMBER_OF_CODEWORDS=929,vt.MAX_CODEWORDS_IN_BARCODE=vt.NUMBER_OF_CODEWORDS-1,vt.MIN_ROWS_IN_BARCODE=3,vt.MAX_ROWS_IN_BARCODE=90,vt.MODULES_IN_CODEWORD=17,vt.MODULES_IN_STOP_PATTERN=18,vt.BARS_IN_MODULE=8,vt.EMPTY_INT_ARRAY=new Int32Array([]),vt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),vt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Sc{constructor(e,i){this.bits=e,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Tt{static detectMultiple(e,i,a){let h=e.getBlackMatrix(),f=Tt.detect(a,h);return f.length||(h=h.clone(),h.rotate180(),f=Tt.detect(a,h)),new Sc(h,f)}static detect(e,i){const a=new Array;let h=0,f=0,g=!1;for(;h<i.getHeight();){const x=Tt.findVertices(i,h,f);if(x[0]==null&&x[3]==null){if(!g)break;g=!1,f=0;for(const C of a)C[1]!=null&&(h=Math.trunc(Math.max(h,C[1].getY()))),C[3]!=null&&(h=Math.max(h,Math.trunc(C[3].getY())));h+=Tt.ROW_STEP;continue}if(g=!0,a.push(x),!e)break;x[2]!=null?(f=Math.trunc(x[2].getX()),h=Math.trunc(x[2].getY())):(f=Math.trunc(x[4].getX()),h=Math.trunc(x[4].getY()))}return a}static findVertices(e,i,a){const h=e.getHeight(),f=e.getWidth(),g=new Array(8);return Tt.copyToResult(g,Tt.findRowsWithPattern(e,h,f,i,a,Tt.START_PATTERN),Tt.INDEXES_START_PATTERN),g[4]!=null&&(a=Math.trunc(g[4].getX()),i=Math.trunc(g[4].getY())),Tt.copyToResult(g,Tt.findRowsWithPattern(e,h,f,i,a,Tt.STOP_PATTERN),Tt.INDEXES_STOP_PATTERN),g}static copyToResult(e,i,a){for(let h=0;h<a.length;h++)e[a[h]]=i[h]}static findRowsWithPattern(e,i,a,h,f,g){const x=new Array(4);let C=!1;const E=new Int32Array(g.length);for(;h<i;h+=Tt.ROW_STEP){let P=Tt.findGuardPattern(e,f,h,a,!1,g,E);if(P!=null){for(;h>0;){const F=Tt.findGuardPattern(e,f,--h,a,!1,g,E);if(F!=null)P=F;else{h++;break}}x[0]=new ke(P[0],h),x[1]=new ke(P[1],h),C=!0;break}}let T=h+1;if(C){let P=0,F=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;T<i;T++){const q=Tt.findGuardPattern(e,F[0],T,a,!1,g,E);if(q!=null&&Math.abs(F[0]-q[0])<Tt.MAX_PATTERN_DRIFT&&Math.abs(F[1]-q[1])<Tt.MAX_PATTERN_DRIFT)F=q,P=0;else{if(P>Tt.SKIPPED_ROW_COUNT_MAX)break;P++}}T-=P+1,x[2]=new ke(F[0],T),x[3]=new ke(F[1],T)}return T-h<Tt.BARCODE_MIN_HEIGHT&&z.fill(x,null),x}static findGuardPattern(e,i,a,h,f,g,x){z.fillWithin(x,0,x.length,0);let C=i,E=0;for(;e.get(C,a)&&C>0&&E++<Tt.MAX_PIXEL_DRIFT;)C--;let T=C,P=0,F=g.length;for(let q=f;T<h;T++)if(e.get(T,a)!==q)x[P]++;else{if(P===F-1){if(Tt.patternMatchVariance(x,g,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return new Int32Array([C,T]);C+=x[0]+x[1],j.arraycopy(x,2,x,0,P-1),x[P-1]=0,x[P]=0,P--}else P++;x[P]=1,q=!q}return P===F-1&&Tt.patternMatchVariance(x,g,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE?new Int32Array([C,T-1]):null}static patternMatchVariance(e,i,a){let h=e.length,f=0,g=0;for(let E=0;E<h;E++)f+=e[E],g+=i[E];if(f<g)return 1/0;let x=f/g;a*=x;let C=0;for(let E=0;E<h;E++){let T=e[E],P=i[E]*x,F=T>P?T-P:P-T;if(F>a)return 1/0;C+=F}return C/f}}Tt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Tt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Tt.MAX_AVG_VARIANCE=.42,Tt.MAX_INDIVIDUAL_VARIANCE=.8,Tt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Tt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Tt.MAX_PIXEL_DRIFT=3,Tt.MAX_PATTERN_DRIFT=5,Tt.SKIPPED_ROW_COUNT_MAX=25,Tt.ROW_STEP=5,Tt.BARCODE_MIN_HEIGHT=10;class Hn{constructor(e,i){if(i.length===0)throw new A;this.field=e;let a=i.length;if(a>1&&i[0]===0){let h=1;for(;h<a&&i[h]===0;)h++;h===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-h),j.arraycopy(i,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let i=this.coefficients[0],a=this.coefficients.length;for(let h=1;h<a;h++)i=this.field.add(this.field.multiply(e,i),this.coefficients[h]);return i}add(e){if(!this.field.equals(e.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let i=this.coefficients,a=e.coefficients;if(i.length>a.length){let g=i;i=a,a=g}let h=new Int32Array(a.length),f=a.length-i.length;j.arraycopy(a,0,h,0,f);for(let g=f;g<a.length;g++)h[g]=this.field.add(i[g-f],a[g]);return new Hn(this.field,h)}subtract(e){if(!this.field.equals(e.field))throw new A("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Hn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Hn(this.field,new Int32Array([0]));let i=this.coefficients,a=i.length,h=e.coefficients,f=h.length,g=new Int32Array(a+f-1);for(let x=0;x<a;x++){let C=i[x];for(let E=0;E<f;E++)g[x+E]=this.field.add(g[x+E],this.field.multiply(C,h[E]))}return new Hn(this.field,g)}negative(){let e=this.coefficients.length,i=new Int32Array(e);for(let a=0;a<e;a++)i[a]=this.field.subtract(0,this.coefficients[a]);return new Hn(this.field,i)}multiplyScalar(e){if(e===0)return new Hn(this.field,new Int32Array([0]));if(e===1)return this;let i=this.coefficients.length,a=new Int32Array(i);for(let h=0;h<i;h++)a[h]=this.field.multiply(this.coefficients[h],e);return new Hn(this.field,a)}multiplyByMonomial(e,i){if(e<0)throw new A;if(i===0)return new Hn(this.field,new Int32Array([0]));let a=this.coefficients.length,h=new Int32Array(a+e);for(let f=0;f<a;f++)h[f]=this.field.multiply(this.coefficients[f],i);return new Hn(this.field,h)}toString(){let e=new te;for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);a!==0&&(a<0?(e.append(" - "),a=-a):e.length()>0&&e.append(" + "),(i===0||a!==1)&&e.append(a),i!==0&&(i===1?e.append("x"):(e.append("x^"),e.append(i))))}return e.toString()}}class _c{add(e,i){return(e+i)%this.modulus}subtract(e,i){return(this.modulus+e-i)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new A;return this.logTable[e]}inverse(e){if(e===0)throw new Ct;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,i){return e===0||i===0?0:this.expTable[(this.logTable[e]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class ki extends _c{constructor(e,i){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let a=1;for(let h=0;h<e;h++)this.expTable[h]=a,a=a*i%e;for(let h=0;h<e-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new Hn(this,new Int32Array([0])),this.one=new Hn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,i){if(e<0)throw new A;if(i===0)return this.zero;let a=new Int32Array(e+1);return a[0]=i,new Hn(this,a)}}ki.PDF417_GF=new ki(vt.NUMBER_OF_CODEWORDS,3);class wl{constructor(){this.field=ki.PDF417_GF}decode(e,i,a){let h=new Hn(this.field,e),f=new Int32Array(i),g=!1;for(let ne=i;ne>0;ne--){let se=h.evaluateAt(this.field.exp(ne));f[i-ne]=se,se!==0&&(g=!0)}if(!g)return 0;let x=this.field.getOne();if(a!=null)for(const ne of a){let se=this.field.exp(e.length-1-ne),de=new Hn(this.field,new Int32Array([this.field.subtract(0,se),1]));x=x.multiply(de)}let C=new Hn(this.field,f),E=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),C,i),T=E[0],P=E[1],F=this.findErrorLocations(T),q=this.findErrorMagnitudes(P,T,F);for(let ne=0;ne<F.length;ne++){let se=e.length-1-this.field.log(F[ne]);if(se<0)throw R.getChecksumInstance();e[se]=this.field.subtract(e[se],q[ne])}return F.length}runEuclideanAlgorithm(e,i,a){if(e.getDegree()<i.getDegree()){let F=e;e=i,i=F}let h=e,f=i,g=this.field.getZero(),x=this.field.getOne();for(;f.getDegree()>=Math.round(a/2);){let F=h,q=g;if(h=f,g=x,h.isZero())throw R.getChecksumInstance();f=F;let ne=this.field.getZero(),se=h.getCoefficient(h.getDegree()),de=this.field.inverse(se);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let ye=f.getDegree()-h.getDegree(),Ue=this.field.multiply(f.getCoefficient(f.getDegree()),de);ne=ne.add(this.field.buildMonomial(ye,Ue)),f=f.subtract(h.multiplyByMonomial(ye,Ue))}x=ne.multiply(g).subtract(q).negative()}let C=x.getCoefficient(0);if(C===0)throw R.getChecksumInstance();let E=this.field.inverse(C),T=x.multiply(E),P=f.multiply(E);return[T,P]}findErrorLocations(e){let i=e.getDegree(),a=new Int32Array(i),h=0;for(let f=1;f<this.field.getSize()&&h<i;f++)e.evaluateAt(f)===0&&(a[h]=this.field.inverse(f),h++);if(h!==i)throw R.getChecksumInstance();return a}findErrorMagnitudes(e,i,a){let h=i.getDegree(),f=new Int32Array(h);for(let E=1;E<=h;E++)f[h-E]=this.field.multiply(E,i.getCoefficient(E));let g=new Hn(this.field,f),x=a.length,C=new Int32Array(x);for(let E=0;E<x;E++){let T=this.field.inverse(a[E]),P=this.field.subtract(0,e.evaluateAt(T)),F=this.field.inverse(g.evaluateAt(T));C[E]=this.field.multiply(P,F)}return C}}class ti{constructor(e,i,a,h,f){e instanceof ti?this.constructor_2(e):this.constructor_1(e,i,a,h,f)}constructor_1(e,i,a,h,f){const g=i==null||a==null,x=h==null||f==null;if(g&&x)throw new ee;g?(i=new ke(0,h.getY()),a=new ke(0,f.getY())):x&&(h=new ke(e.getWidth()-1,i.getY()),f=new ke(e.getWidth()-1,a.getY())),this.image=e,this.topLeft=i,this.bottomLeft=a,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(i.getX(),a.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(i.getY(),h.getY())),this.maxY=Math.trunc(Math.max(a.getY(),f.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,i){return e==null?i:i==null?e:new ti(e.image,e.topLeft,e.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(e,i,a){let h=this.topLeft,f=this.bottomLeft,g=this.topRight,x=this.bottomRight;if(e>0){let C=a?this.topLeft:this.topRight,E=Math.trunc(C.getY()-e);E<0&&(E=0);let T=new ke(C.getX(),E);a?h=T:g=T}if(i>0){let C=a?this.bottomLeft:this.bottomRight,E=Math.trunc(C.getY()+i);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let T=new ke(C.getX(),E);a?f=T:x=T}return new ti(this.image,h,f,g,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class vo{constructor(e,i,a,h){this.columnCount=e,this.errorCorrectionLevel=h,this.rowCountUpperPart=i,this.rowCountLowerPart=a,this.rowCount=i+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ws{constructor(){this.buffer=""}static form(e,i){let a=-1;function h(g,x,C,E,T,P){if(g==="%%")return"%";if(i[++a]===void 0)return;g=E?parseInt(E.substr(1)):void 0;let F=T?parseInt(T.substr(1)):void 0,q;switch(P){case"s":q=i[a];break;case"c":q=i[a][0];break;case"f":q=parseFloat(i[a]).toFixed(g);break;case"p":q=parseFloat(i[a]).toPrecision(g);break;case"e":q=parseFloat(i[a]).toExponential(g);break;case"x":q=parseInt(i[a]).toString(F||16);break;case"d":q=parseFloat(parseInt(i[a],F||10).toPrecision(g)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(F);let ne=parseInt(C),se=C&&C[0]+""=="0"?"0":" ";for(;q.length<ne;)q=x!==void 0?q+se:se+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(f,h)}format(e,...i){this.buffer+=ws.form(e,i)}toString(){return this.buffer}}class os{constructor(e){this.boundingBox=new ti(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let i=this.getCodeword(e);if(i!=null)return i;for(let a=1;a<os.MAX_NEARBY_DISTANCE;a++){let h=this.imageRowToCodewordIndex(e)-a;if(h>=0&&(i=this.codewords[h],i!=null)||(h=this.imageRowToCodewordIndex(e)+a,h<this.codewords.length&&(i=this.codewords[h],i!=null)))return i}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,i){this.codewords[this.imageRowToCodewordIndex(e)]=i}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new ws;let i=0;for(const a of this.codewords){if(a==null){e.format("%3d:    |   %n",i++);continue}e.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}return e.toString()}}os.MAX_NEARBY_DISTANCE=5;class Fs{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let i=this.values.get(e);i==null&&(i=0),i++,this.values.set(e,i)}getValue(){let e=-1,i=new Array;for(const[a,h]of this.values.entries()){const f={getKey:()=>a,getValue:()=>h};f.getValue()>e?(e=f.getValue(),i=[],i.push(f.getKey())):f.getValue()===e&&i.push(f.getKey())}return vt.toIntArray(i)}getConfidence(e){return this.values.get(e)}}class Ac extends os{constructor(e,i){super(e),this._isLeft=i}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,e);let a=this.getBoundingBox(),h=this._isLeft?a.getTopLeft():a.getTopRight(),f=this._isLeft?a.getBottomLeft():a.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),C=-1,E=1,T=0;for(let P=g;P<x;P++){if(i[P]==null)continue;let F=i[P],q=F.getRowNumber()-C;if(q===0)T++;else if(q===1)E=Math.max(E,T),T=1,C=F.getRowNumber();else if(q<0||F.getRowNumber()>=e.getRowCount()||q>P)i[P]=null;else{let ne;E>2?ne=(E-2)*q:ne=q;let se=ne>=P;for(let de=1;de<=ne&&!se;de++)se=i[P-de]!=null;se?i[P]=null:(C=F.getRowNumber(),T=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let i=new Int32Array(e.getRowCount());for(let a of this.getCodewords())if(a!=null){let h=a.getRowNumber();if(h>=i.length)continue;i[h]++}return i}adjustIncompleteIndicatorColumnRowNumbers(e){let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),h=this._isLeft?i.getBottomLeft():i.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(a.getY())),g=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.getCodewords(),C=-1;for(let E=f;E<g;E++){if(x[E]==null)continue;let T=x[E];T.setRowNumberAsRowIndicatorColumn();let P=T.getRowNumber()-C;P===0||(P===1?C=T.getRowNumber():T.getRowNumber()>=e.getRowCount()?x[E]=null:C=T.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),i=new Fs,a=new Fs,h=new Fs,f=new Fs;for(let x of e){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let C=x.getValue()%30,E=x.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:a.setValue(C*3+1);break;case 1:f.setValue(C/3),h.setValue(C%3);break;case 2:i.setValue(C+1);break}}if(i.getValue().length===0||a.getValue().length===0||h.getValue().length===0||f.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+h.getValue()[0]<vt.MIN_ROWS_IN_BARCODE||a.getValue()[0]+h.getValue()[0]>vt.MAX_ROWS_IN_BARCODE)return null;let g=new vo(i.getValue()[0],a.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(e,g),g}removeIncorrectCodewords(e,i){for(let a=0;a<e.length;a++){let h=e[a];if(e[a]==null)continue;let f=h.getValue()%30,g=h.getRowNumber();if(g>i.getRowCount()){e[a]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:f*3+1!==i.getRowCountUpperPart()&&(e[a]=null);break;case 1:(Math.trunc(f/3)!==i.getErrorCorrectionLevel()||f%3!==i.getRowCountLowerPart())&&(e[a]=null);break;case 2:f+1!==i.getColumnCount()&&(e[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class bo{constructor(e,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=vt.MAX_CODEWORDS_IN_BARCODE,i;do i=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let a=this.detectionResultColumns[i].getCodewords();for(let h=0;h<a.length;h++)a[h]!=null&&(a[h].hasValidRowNumber()||this.adjustRowNumbers(i,h,a))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<e.length;a++)if(e[a]!=null&&i[a]!=null&&e[a].getRowNumber()===i[a].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[a];f!=null&&(f.setRowNumber(e[a].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let h=i[a].getRowNumber(),f=0;for(let g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){let x=this.detectionResultColumns[g].getCodewords()[a];x!=null&&(f=bo.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,i=this.detectionResultColumns[0].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let h=i[a].getRowNumber(),f=0;for(let g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){let x=this.detectionResultColumns[g].getCodewords()[a];x!=null&&(f=bo.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,i,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(e)?(a.setRowNumber(e),i=0):++i),i}adjustRowNumbers(e,i,a){if(!this.detectionResultColumns[e-1])return;let h=a[i],f=this.detectionResultColumns[e-1].getCodewords(),g=f;this.detectionResultColumns[e+1]!=null&&(g=this.detectionResultColumns[e+1].getCodewords());let x=new Array(14);x[2]=f[i],x[3]=g[i],i>0&&(x[0]=a[i-1],x[4]=f[i-1],x[5]=g[i-1]),i>1&&(x[8]=a[i-2],x[10]=f[i-2],x[11]=g[i-2]),i<a.length-1&&(x[1]=a[i+1],x[6]=f[i+1],x[7]=g[i+1]),i<a.length-2&&(x[9]=a[i+2],x[12]=f[i+2],x[13]=g[i+2]);for(let C of x)if(bo.adjustRowNumber(h,C))return}static adjustRowNumber(e,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===e.getBucket()?(e.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,i){this.detectionResultColumns[e]=i}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new ws;for(let a=0;a<e.getCodewords().length;a++){i.format("CW %3d:",a);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){i.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[a];if(f==null){i.format("    |   ");continue}i.format(" %3d|%3d",f.getRowNumber(),f.getValue())}i.format("%n")}return i.toString()}}class ni{constructor(e,i,a,h){this.rowNumber=ni.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(i),this.bucket=Math.trunc(a),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==ni.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}ni.BARCODE_ROW_UNKNOWN=-1;class Gn{static initialize(){for(let e=0;e<vt.SYMBOL_TABLE.length;e++){let i=vt.SYMBOL_TABLE[e],a=i&1;for(let h=0;h<vt.BARS_IN_MODULE;h++){let f=0;for(;(i&1)===a;)f+=1,i>>=1;a=i&1,Gn.RATIOS_TABLE[e]||(Gn.RATIOS_TABLE[e]=new Array(vt.BARS_IN_MODULE)),Gn.RATIOS_TABLE[e][vt.BARS_IN_MODULE-h-1]=Math.fround(f/vt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let i=Gn.getDecodedCodewordValue(Gn.sampleBitCounts(e));return i!==-1?i:Gn.getClosestDecodedValue(e)}static sampleBitCounts(e){let i=Le.sum(e),a=new Int32Array(vt.BARS_IN_MODULE),h=0,f=0;for(let g=0;g<vt.MODULES_IN_CODEWORD;g++){let x=i/(2*vt.MODULES_IN_CODEWORD)+g*i/vt.MODULES_IN_CODEWORD;f+e[h]<=x&&(f+=e[h],h++),a[h]++}return a}static getDecodedCodewordValue(e){let i=Gn.getBitValue(e);return vt.getCodeword(i)===-1?-1:i}static getBitValue(e){let i=0;for(let a=0;a<e.length;a++)for(let h=0;h<e[a];h++)i=i<<1|(a%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(e){let i=Le.sum(e),a=new Array(vt.BARS_IN_MODULE);if(i>1)for(let g=0;g<a.length;g++)a[g]=Math.fround(e[g]/i);let h=bt.MAX_VALUE,f=-1;this.bSymbolTableReady||Gn.initialize();for(let g=0;g<Gn.RATIOS_TABLE.length;g++){let x=0,C=Gn.RATIOS_TABLE[g];for(let E=0;E<vt.BARS_IN_MODULE;E++){let T=Math.fround(C[E]-a[E]);if(x+=Math.fround(T*T),x>=h)break}x<h&&(h=x,f=vt.SYMBOL_TABLE[g])}return f}}Gn.bSymbolTableReady=!1,Gn.RATIOS_TABLE=new Array(vt.SYMBOL_TABLE.length).map(O=>new Array(vt.BARS_IN_MODULE));class aa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class yl{static parseLong(e,i=void 0){return parseInt(e,i)}}class ys extends y{}ys.kind="NullPointerException";class vl{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,i,a){if(e==null)throw new ys;if(i<0||i>e.length||a<0||i+a>e.length||i+a<0)throw new M;if(a===0)return;for(let h=0;h<a;h++)this.write(e[i+h])}flush(){}close(){}}class la extends y{}class Nc extends vl{constructor(e=32){if(super(),this.count=0,e<0)throw new A("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let a=this.buf.length<<1;if(a-e<0&&(a=e),a<0){if(e<0)throw new la;a=B.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,a)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,i,a){if(i<0||i>e.length||a<0||i+a-e.length>0)throw new M;this.ensureCapacity(this.count+a),j.arraycopy(e,i,this.buf,this.count,a),this.count+=a}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Yt;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Yt||(Yt={}));function Co(){if(typeof window<"u")return window.BigInt||null;if(typeof Su<"u")return Su.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Eo;function kn(O){if(typeof Eo>"u"&&(Eo=Co()),Eo===null)throw new Error("BigInt is not supported!");return Eo(O)}function ji(){let O=[];O[0]=kn(1);let e=kn(900);O[1]=e;for(let i=2;i<16;i++)O[i]=O[i-1]*e;return O}class ve{static decode(e,i){let a=new te(""),h=$.ISO8859_1;a.enableDecoding(h);let f=1,g=e[f++],x=new aa;for(;f<e[0];){switch(g){case ve.TEXT_COMPACTION_MODE_LATCH:f=ve.textCompaction(e,f,a);break;case ve.BYTE_COMPACTION_MODE_LATCH:case ve.BYTE_COMPACTION_MODE_LATCH_6:f=ve.byteCompaction(g,e,h,f,a);break;case ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(e[f++]);break;case ve.NUMERIC_COMPACTION_MODE_LATCH:f=ve.numericCompaction(e,f,a);break;case ve.ECI_CHARSET:$.getCharacterSetECIByValue(e[f++]);break;case ve.ECI_GENERAL_PURPOSE:f+=2;break;case ve.ECI_USER_DEFINED:f++;break;case ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=ve.decodeMacroBlock(e,f,x);break;case ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ve.MACRO_PDF417_TERMINATOR:throw new W;default:f--,f=ve.textCompaction(e,f,a);break}if(f<e.length)g=e[f++];else throw W.getFormatInstance()}if(a.length()===0)throw W.getFormatInstance();let C=new qe(null,a.toString(),null,i);return C.setOther(x),C}static decodeMacroBlock(e,i,a){if(i+ve.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw W.getFormatInstance();let h=new Int32Array(ve.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<ve.NUMBER_OF_SEQUENCE_CODEWORDS;x++,i++)h[x]=e[i];a.setSegmentIndex(B.parseInt(ve.decodeBase900toBase10(h,ve.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new te;i=ve.textCompaction(e,i,f),a.setFileId(f.toString());let g=-1;for(e[i]===ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=i+1);i<e[0];)switch(e[i]){case ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,e[i]){case ve.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new te;i=ve.textCompaction(e,i+1,x),a.setFileName(x.toString());break;case ve.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new te;i=ve.textCompaction(e,i+1,C),a.setSender(C.toString());break;case ve.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new te;i=ve.textCompaction(e,i+1,E),a.setAddressee(E.toString());break;case ve.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let T=new te;i=ve.numericCompaction(e,i+1,T),a.setSegmentCount(B.parseInt(T.toString()));break;case ve.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new te;i=ve.numericCompaction(e,i+1,P),a.setTimestamp(yl.parseLong(P.toString()));break;case ve.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let F=new te;i=ve.numericCompaction(e,i+1,F),a.setChecksum(B.parseInt(F.toString()));break;case ve.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new te;i=ve.numericCompaction(e,i+1,q),a.setFileSize(yl.parseLong(q.toString()));break;default:throw W.getFormatInstance()}break;case ve.MACRO_PDF417_TERMINATOR:i++,a.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(g!==-1){let x=i-g;a.isLastSegment()&&x--,a.setOptionalData(z.copyOfRange(e,g,g+x))}return i}static textCompaction(e,i,a){let h=new Int32Array((e[0]-i)*2),f=new Int32Array((e[0]-i)*2),g=0,x=!1;for(;i<e[0]&&!x;){let C=e[i++];if(C<ve.TEXT_COMPACTION_MODE_LATCH)h[g]=C/30,h[g+1]=C%30,g+=2;else switch(C){case ve.TEXT_COMPACTION_MODE_LATCH:h[g++]=ve.TEXT_COMPACTION_MODE_LATCH;break;case ve.BYTE_COMPACTION_MODE_LATCH:case ve.BYTE_COMPACTION_MODE_LATCH_6:case ve.NUMERIC_COMPACTION_MODE_LATCH:case ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ve.MACRO_PDF417_TERMINATOR:i--,x=!0;break;case ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[g]=ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=e[i++],f[g]=C,g++;break}}return ve.decodeTextCompaction(h,f,g,a),i}static decodeTextCompaction(e,i,a,h){let f=Yt.ALPHA,g=Yt.ALPHA,x=0;for(;x<a;){let C=e[x],E="";switch(f){case Yt.ALPHA:if(C<26)E=String.fromCharCode(65+C);else switch(C){case 26:E=" ";break;case ve.LL:f=Yt.LOWER;break;case ve.ML:f=Yt.MIXED;break;case ve.PS:g=f,f=Yt.PUNCT_SHIFT;break;case ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(i[x]);break;case ve.TEXT_COMPACTION_MODE_LATCH:f=Yt.ALPHA;break}break;case Yt.LOWER:if(C<26)E=String.fromCharCode(97+C);else switch(C){case 26:E=" ";break;case ve.AS:g=f,f=Yt.ALPHA_SHIFT;break;case ve.ML:f=Yt.MIXED;break;case ve.PS:g=f,f=Yt.PUNCT_SHIFT;break;case ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(i[x]);break;case ve.TEXT_COMPACTION_MODE_LATCH:f=Yt.ALPHA;break}break;case Yt.MIXED:if(C<ve.PL)E=ve.MIXED_CHARS[C];else switch(C){case ve.PL:f=Yt.PUNCT;break;case 26:E=" ";break;case ve.LL:f=Yt.LOWER;break;case ve.AL:f=Yt.ALPHA;break;case ve.PS:g=f,f=Yt.PUNCT_SHIFT;break;case ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(i[x]);break;case ve.TEXT_COMPACTION_MODE_LATCH:f=Yt.ALPHA;break}break;case Yt.PUNCT:if(C<ve.PAL)E=ve.PUNCT_CHARS[C];else switch(C){case ve.PAL:f=Yt.ALPHA;break;case ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(i[x]);break;case ve.TEXT_COMPACTION_MODE_LATCH:f=Yt.ALPHA;break}break;case Yt.ALPHA_SHIFT:if(f=g,C<26)E=String.fromCharCode(65+C);else switch(C){case 26:E=" ";break;case ve.TEXT_COMPACTION_MODE_LATCH:f=Yt.ALPHA;break}break;case Yt.PUNCT_SHIFT:if(f=g,C<ve.PAL)E=ve.PUNCT_CHARS[C];else switch(C){case ve.PAL:f=Yt.ALPHA;break;case ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(i[x]);break;case ve.TEXT_COMPACTION_MODE_LATCH:f=Yt.ALPHA;break}break}E!==""&&h.append(E),x++}}static byteCompaction(e,i,a,h,f){let g=new Nc,x=0,C=0,E=!1;switch(e){case ve.BYTE_COMPACTION_MODE_LATCH:let T=new Int32Array(6),P=i[h++];for(;h<i[0]&&!E;)switch(T[x++]=P,C=900*C+P,P=i[h++],P){case ve.TEXT_COMPACTION_MODE_LATCH:case ve.BYTE_COMPACTION_MODE_LATCH:case ve.NUMERIC_COMPACTION_MODE_LATCH:case ve.BYTE_COMPACTION_MODE_LATCH_6:case ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ve.MACRO_PDF417_TERMINATOR:h--,E=!0;break;default:if(x%5===0&&x>0){for(let F=0;F<6;++F)g.write(Number(kn(C)>>kn(8*(5-F))));C=0,x=0}break}h===i[0]&&P<ve.TEXT_COMPACTION_MODE_LATCH&&(T[x++]=P);for(let F=0;F<x;F++)g.write(T[F]);break;case ve.BYTE_COMPACTION_MODE_LATCH_6:for(;h<i[0]&&!E;){let F=i[h++];if(F<ve.TEXT_COMPACTION_MODE_LATCH)x++,C=900*C+F;else switch(F){case ve.TEXT_COMPACTION_MODE_LATCH:case ve.BYTE_COMPACTION_MODE_LATCH:case ve.NUMERIC_COMPACTION_MODE_LATCH:case ve.BYTE_COMPACTION_MODE_LATCH_6:case ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ve.MACRO_PDF417_TERMINATOR:h--,E=!0;break}if(x%5===0&&x>0){for(let q=0;q<6;++q)g.write(Number(kn(C)>>kn(8*(5-q))));C=0,x=0}}break}return f.append(ue.decode(g.toByteArray(),a)),h}static numericCompaction(e,i,a){let h=0,f=!1,g=new Int32Array(ve.MAX_NUMERIC_CODEWORDS);for(;i<e[0]&&!f;){let x=e[i++];if(i===e[0]&&(f=!0),x<ve.TEXT_COMPACTION_MODE_LATCH)g[h]=x,h++;else switch(x){case ve.TEXT_COMPACTION_MODE_LATCH:case ve.BYTE_COMPACTION_MODE_LATCH:case ve.BYTE_COMPACTION_MODE_LATCH_6:case ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ve.MACRO_PDF417_TERMINATOR:i--,f=!0;break}(h%ve.MAX_NUMERIC_CODEWORDS===0||x===ve.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(a.append(ve.decodeBase900toBase10(g,h)),h=0)}return i}static decodeBase900toBase10(e,i){let a=kn(0);for(let f=0;f<i;f++)a+=ve.EXP900[i-f-1]*kn(e[f]);let h=a.toString();if(h.charAt(0)!=="1")throw new W;return h.substring(1)}}ve.TEXT_COMPACTION_MODE_LATCH=900,ve.BYTE_COMPACTION_MODE_LATCH=901,ve.NUMERIC_COMPACTION_MODE_LATCH=902,ve.BYTE_COMPACTION_MODE_LATCH_6=924,ve.ECI_USER_DEFINED=925,ve.ECI_GENERAL_PURPOSE=926,ve.ECI_CHARSET=927,ve.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ve.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ve.MACRO_PDF417_TERMINATOR=922,ve.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ve.MAX_NUMERIC_CODEWORDS=15,ve.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ve.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ve.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ve.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ve.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ve.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ve.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ve.PL=25,ve.LL=27,ve.AS=27,ve.ML=28,ve.AL=28,ve.PS=29,ve.PAL=29,ve.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ve.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ve.EXP900=Co()?ji():[],ve.NUMBER_OF_SEQUENCE_CODEWORDS=2;class jt{constructor(){}static decode(e,i,a,h,f,g,x){let C=new ti(e,i,a,h,f),E=null,T=null,P;for(let ne=!0;;ne=!1){if(i!=null&&(E=jt.getRowIndicatorColumn(e,C,i,!0,g,x)),h!=null&&(T=jt.getRowIndicatorColumn(e,C,h,!1,g,x)),P=jt.merge(E,T),P==null)throw ee.getNotFoundInstance();let se=P.getBoundingBox();if(ne&&se!=null&&(se.getMinY()<C.getMinY()||se.getMaxY()>C.getMaxY()))C=se;else break}P.setBoundingBox(C);let F=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,E),P.setDetectionResultColumn(F,T);let q=E!=null;for(let ne=1;ne<=F;ne++){let se=q?ne:F-ne;if(P.getDetectionResultColumn(se)!==void 0)continue;let de;se===0||se===F?de=new Ac(C,se===0):de=new os(C),P.setDetectionResultColumn(se,de);let ye=-1,Ue=ye;for(let ze=C.getMinY();ze<=C.getMaxY();ze++){if(ye=jt.getStartColumn(P,se,ze,q),ye<0||ye>C.getMaxX()){if(Ue===-1)continue;ye=Ue}let De=jt.detectCodeword(e,C.getMinX(),C.getMaxX(),q,ye,ze,g,x);De!=null&&(de.setCodeword(ze,De),Ue=ye,g=Math.min(g,De.getWidth()),x=Math.max(x,De.getWidth()))}}return jt.createDecoderResult(P)}static merge(e,i){if(e==null&&i==null)return null;let a=jt.getBarcodeMetadata(e,i);if(a==null)return null;let h=ti.merge(jt.adjustBoundingBox(e),jt.adjustBoundingBox(i));return new bo(a,h)}static adjustBoundingBox(e){if(e==null)return null;let i=e.getRowHeights();if(i==null)return null;let a=jt.getMax(i),h=0;for(let x of i)if(h+=a-x,x>0)break;let f=e.getCodewords();for(let x=0;h>0&&f[x]==null;x++)h--;let g=0;for(let x=i.length-1;x>=0&&(g+=a-i[x],!(i[x]>0));x--);for(let x=f.length-1;g>0&&f[x]==null;x--)g--;return e.getBoundingBox().addMissingRows(h,g,e.isLeft())}static getMax(e){let i=-1;for(let a of e)i=Math.max(i,a);return i}static getBarcodeMetadata(e,i){let a;if(e==null||(a=e.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let h;return i==null||(h=i.getBarcodeMetadata())==null?a:a.getColumnCount()!==h.getColumnCount()&&a.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&a.getRowCount()!==h.getRowCount()?null:a}static getRowIndicatorColumn(e,i,a,h,f,g){let x=new Ac(i,h);for(let C=0;C<2;C++){let E=C===0?1:-1,T=Math.trunc(Math.trunc(a.getX()));for(let P=Math.trunc(Math.trunc(a.getY()));P<=i.getMaxY()&&P>=i.getMinY();P+=E){let F=jt.detectCodeword(e,0,e.getWidth(),h,T,P,f,g);F!=null&&(x.setCodeword(P,F),h?T=F.getStartX():T=F.getEndX())}}return x}static adjustCodewordCount(e,i){let a=i[0][1],h=a.getValue(),f=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-jt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(h.length===0){if(f<1||f>vt.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();a.setValue(f)}else h[0]!==f&&a.setValue(f)}static createDecoderResult(e){let i=jt.createBarcodeMatrix(e);jt.adjustCodewordCount(e,i);let a=new Array,h=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),f=[],g=new Array;for(let C=0;C<e.getBarcodeRowCount();C++)for(let E=0;E<e.getBarcodeColumnCount();E++){let T=i[C][E+1].getValue(),P=C*e.getBarcodeColumnCount()+E;T.length===0?a.push(P):T.length===1?h[P]=T[0]:(g.push(P),f.push(T))}let x=new Array(f.length);for(let C=0;C<x.length;C++)x[C]=f[C];return jt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),h,vt.toIntArray(a),vt.toIntArray(g),x)}static createDecoderResultFromAmbiguousValues(e,i,a,h,f){let g=new Int32Array(h.length),x=100;for(;x-- >0;){for(let C=0;C<g.length;C++)i[h[C]]=f[C][g[C]];try{return jt.decodeCodewords(i,e,a)}catch(C){if(!(C instanceof R))throw C}if(g.length===0)throw R.getChecksumInstance();for(let C=0;C<g.length;C++)if(g[C]<f[C].length-1){g[C]++;break}else if(g[C]=0,C===g.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(e){let i=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let h=0;h<i.length;h++)for(let f=0;f<i[h].length;f++)i[h][f]=new Fs;let a=0;for(let h of e.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let g=f.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][a].setValue(f.getValue())}}}a++}return i}static isValidBarcodeColumn(e,i){return i>=0&&i<=e.getBarcodeColumnCount()+1}static getStartColumn(e,i,a,h){let f=h?1:-1,g=null;if(jt.isValidBarcodeColumn(e,i-f)&&(g=e.getDetectionResultColumn(i-f).getCodeword(a)),g!=null)return h?g.getEndX():g.getStartX();if(g=e.getDetectionResultColumn(i).getCodewordNearby(a),g!=null)return h?g.getStartX():g.getEndX();if(jt.isValidBarcodeColumn(e,i-f)&&(g=e.getDetectionResultColumn(i-f).getCodewordNearby(a)),g!=null)return h?g.getEndX():g.getStartX();let x=0;for(;jt.isValidBarcodeColumn(e,i-f);){i-=f;for(let C of e.getDetectionResultColumn(i).getCodewords())if(C!=null)return(h?C.getEndX():C.getStartX())+f*x*(C.getEndX()-C.getStartX());x++}return h?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,i,a,h,f,g,x,C){f=jt.adjustCodewordStartColumn(e,i,a,h,f,g);let E=jt.getModuleBitCount(e,i,a,h,f,g);if(E==null)return null;let T,P=Le.sum(E);if(h)T=f+P;else{for(let ne=0;ne<E.length/2;ne++){let se=E[ne];E[ne]=E[E.length-1-ne],E[E.length-1-ne]=se}T=f,f=T-P}if(!jt.checkCodewordSkew(P,x,C))return null;let F=Gn.getDecodedValue(E),q=vt.getCodeword(F);return q===-1?null:new ni(f,T,jt.getCodewordBucketNumber(F),q)}static getModuleBitCount(e,i,a,h,f,g){let x=f,C=new Int32Array(8),E=0,T=h?1:-1,P=h;for(;(h?x<a:x>=i)&&E<C.length;)e.get(x,g)===P?(C[E]++,x+=T):(E++,P=!P);return E===C.length||x===(h?a:i)&&E===C.length-1?C:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,i,a,h,f,g){let x=f,C=h?-1:1;for(let E=0;E<2;E++){for(;(h?x>=i:x<a)&&h===e.get(x,g);){if(Math.abs(f-x)>jt.CODEWORD_SKEW_SIZE)return f;x+=C}C=-C,h=!h}return x}static checkCodewordSkew(e,i,a){return i-jt.CODEWORD_SKEW_SIZE<=e&&e<=a+jt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,i,a){if(e.length===0)throw W.getFormatInstance();let h=1<<i+1,f=jt.correctErrors(e,a,h);jt.verifyCodewordCount(e,h);let g=ve.decode(e,""+i);return g.setErrorsCorrected(f),g.setErasures(a.length),g}static correctErrors(e,i,a){if(i!=null&&i.length>a/2+jt.MAX_ERRORS||a<0||a>jt.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return jt.errorCorrection.decode(e,a,i)}static verifyCodewordCount(e,i){if(e.length<4)throw W.getFormatInstance();let a=e[0];if(a>e.length)throw W.getFormatInstance();if(a===0)if(i<e.length)e[0]=e.length-i;else throw W.getFormatInstance()}static getBitCountForCodeword(e){let i=new Int32Array(8),a=0,h=i.length-1;for(;!((e&1)!==a&&(a=e&1,h--,h<0));)i[h]++,e>>=1;return i}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return jt.getCodewordBucketNumber(jt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let i=new ws;for(let a=0;a<e.length;a++){i.format("Row %2d: ",a);for(let h=0;h<e[a].length;h++){let f=e[a][h];f.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}i.format("%n")}return i.toString()}}jt.CODEWORD_SKEW_SIZE=2,jt.MAX_ERRORS=3,jt.MAX_EC_CODEWORDS=512,jt.errorCorrection=new wl;class qn{decode(e,i=null){let a=qn.decode(e,i,!1);if(a==null||a.length===0||a[0]==null)throw ee.getNotFoundInstance();return a[0]}decodeMultiple(e,i=null){try{return qn.decode(e,i,!0)}catch(a){throw a instanceof W||a instanceof R?ee.getNotFoundInstance():a}}static decode(e,i,a){const h=new Array,f=Tt.detectMultiple(e,i,a);for(const g of f.getPoints()){const x=jt.decode(f.getBits(),g[4],g[5],g[6],g[7],qn.getMinCodewordWidth(g),qn.getMaxCodewordWidth(g)),C=new Ve(x.getText(),x.getRawBytes(),void 0,g,we.PDF_417);C.putMetadata(Re.ERROR_CORRECTION_LEVEL,x.getECLevel());const E=x.getOther();E!=null&&C.putMetadata(Re.PDF417_EXTRA_METADATA,E),h.push(C)}return h.map(g=>g)}static getMaxWidth(e,i){return e==null||i==null?0:Math.trunc(Math.abs(e.getX()-i.getX()))}static getMinWidth(e,i){return e==null||i==null?B.MAX_VALUE:Math.trunc(Math.abs(e.getX()-i.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(qn.getMaxWidth(e[0],e[4]),qn.getMaxWidth(e[6],e[2])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN),Math.max(qn.getMaxWidth(e[1],e[5]),qn.getMaxWidth(e[7],e[3])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(qn.getMinWidth(e[0],e[4]),qn.getMinWidth(e[6],e[2])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN),Math.min(qn.getMinWidth(e[1],e[5]),qn.getMinWidth(e[7],e[3])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Oi extends y{}Oi.kind="ReaderException";class ca{constructor(e,i){this.verbose=e===!0,i&&this.setHints(i)}decode(e,i){return i&&this.setHints(i),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const i=!o(e)&&e.get(Y.TRY_HARDER)===!0,a=o(e)?null:e.get(Y.POSSIBLE_FORMATS),h=new Array;if(!o(a)){const f=a.some(g=>g===we.UPC_A||g===we.UPC_E||g===we.EAN_13||g===we.EAN_8||g===we.CODABAR||g===we.CODE_39||g===we.CODE_93||g===we.CODE_128||g===we.ITF||g===we.RSS_14||g===we.RSS_EXPANDED);f&&!i&&h.push(new Ii(e,this.verbose)),a.includes(we.QR_CODE)&&h.push(new cr),a.includes(we.DATA_MATRIX)&&h.push(new $r),a.includes(we.AZTEC)&&h.push(new ns),a.includes(we.PDF_417)&&h.push(new qn),f&&i&&h.push(new Ii(e,this.verbose))}h.length===0&&(i||h.push(new Ii(e,this.verbose)),h.push(new cr),h.push(new $r),h.push(new ns),h.push(new qn),i&&h.push(new Ii(e,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Oi("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(e,this.hints)}catch(a){if(a instanceof Oi)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class So extends Be{constructor(e=null,i=500){const a=new ca;a.setHints(e),super(a,i)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class ua extends Be{constructor(e=500){super(new qn,e)}}class Ic extends Be{constructor(e=500){super(new cr,e)}}var bl;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(bl||(bl={}));var Dn=bl;class Cl{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new We(e,Int32Array.from([1])))}buildGenerator(e){const i=this.cachedGenerators;if(e>=i.length){let a=i[i.length-1];const h=this.field;for(let f=i.length;f<=e;f++){const g=a.multiply(new We(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));i.push(g),a=g}}return i[e]}encode(e,i){if(i===0)throw new A("No error correction bytes");const a=e.length-i;if(a<=0)throw new A("No data bytes provided");const h=this.buildGenerator(i),f=new Int32Array(a);j.arraycopy(e,0,f,0,a);let g=new We(this.field,f);g=g.multiplyByMonomial(i,1);const C=g.divide(h)[1].getCoefficients(),E=i-C.length;for(let T=0;T<E;T++)e[a+T]=0;j.arraycopy(C,0,e,a+E,C.length)}}class mn{constructor(){}static applyMaskPenaltyRule1(e){return mn.applyMaskPenaltyRule1Internal(e,!0)+mn.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let i=0;const a=e.getArray(),h=e.getWidth(),f=e.getHeight();for(let g=0;g<f-1;g++){const x=a[g];for(let C=0;C<h-1;C++){const E=x[C];E===x[C+1]&&E===a[g+1][C]&&E===a[g+1][C+1]&&i++}}return mn.N2*i}static applyMaskPenaltyRule3(e){let i=0;const a=e.getArray(),h=e.getWidth(),f=e.getHeight();for(let g=0;g<f;g++)for(let x=0;x<h;x++){const C=a[g];x+6<h&&C[x]===1&&C[x+1]===0&&C[x+2]===1&&C[x+3]===1&&C[x+4]===1&&C[x+5]===0&&C[x+6]===1&&(mn.isWhiteHorizontal(C,x-4,x)||mn.isWhiteHorizontal(C,x+7,x+11))&&i++,g+6<f&&a[g][x]===1&&a[g+1][x]===0&&a[g+2][x]===1&&a[g+3][x]===1&&a[g+4][x]===1&&a[g+5][x]===0&&a[g+6][x]===1&&(mn.isWhiteVertical(a,x,g-4,g)||mn.isWhiteVertical(a,x,g+7,g+11))&&i++}return i*mn.N3}static isWhiteHorizontal(e,i,a){i=Math.max(i,0),a=Math.min(a,e.length);for(let h=i;h<a;h++)if(e[h]===1)return!1;return!0}static isWhiteVertical(e,i,a,h){a=Math.max(a,0),h=Math.min(h,e.length);for(let f=a;f<h;f++)if(e[f][i]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let i=0;const a=e.getArray(),h=e.getWidth(),f=e.getHeight();for(let C=0;C<f;C++){const E=a[C];for(let T=0;T<h;T++)E[T]===1&&i++}const g=e.getHeight()*e.getWidth();return Math.floor(Math.abs(i*2-g)*10/g)*mn.N4}static getDataMaskBit(e,i,a){let h,f;switch(e){case 0:h=a+i&1;break;case 1:h=a&1;break;case 2:h=i%3;break;case 3:h=(a+i)%3;break;case 4:h=Math.floor(a/2)+Math.floor(i/3)&1;break;case 5:f=a*i,h=(f&1)+f%3;break;case 6:f=a*i,h=(f&1)+f%3&1;break;case 7:f=a*i,h=f%3+(a+i&1)&1;break;default:throw new A("Invalid mask pattern: "+e)}return h===0}static applyMaskPenaltyRule1Internal(e,i){let a=0;const h=i?e.getHeight():e.getWidth(),f=i?e.getWidth():e.getHeight(),g=e.getArray();for(let x=0;x<h;x++){let C=0,E=-1;for(let T=0;T<f;T++){const P=i?g[x][T]:g[T][x];P===E?C++:(C>=5&&(a+=mn.N1+(C-5)),C=1,E=P)}C>=5&&(a+=mn.N1+(C-5))}return a}}mn.N1=3,mn.N2=3,mn.N3=40,mn.N4=10;class da{constructor(e,i){this.width=e,this.height=i;const a=new Array(i);for(let h=0;h!==i;h++)a[h]=new Uint8Array(e);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(e,i){return this.bytes[i][e]}getArray(){return this.bytes}setNumber(e,i,a){this.bytes[i][e]=a}setBoolean(e,i,a){this.bytes[i][e]=a?1:0}clear(e){for(const i of this.bytes)z.fill(i,e)}equals(e){if(!(e instanceof da))return!1;const i=e;if(this.width!==i.width||this.height!==i.height)return!1;for(let a=0,h=this.height;a<h;++a){const f=this.bytes[a],g=i.bytes[a];for(let x=0,C=this.width;x<C;++x)if(f[x]!==g[x])return!1}return!0}toString(){const e=new te;for(let i=0,a=this.height;i<a;++i){const h=this.bytes[i];for(let f=0,g=this.width;f<g;++f)switch(h[f]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class ri{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new te;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<ri.NUM_MASK_PATTERNS}}ri.NUM_MASK_PATTERNS=8;class an extends y{}an.kind="WriterException";class xt{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,i,a,h,f){xt.clearMatrix(f),xt.embedBasicPatterns(a,f),xt.embedTypeInfo(i,h,f),xt.maybeEmbedVersionInfo(a,f),xt.embedDataBits(e,h,f)}static embedBasicPatterns(e,i){xt.embedPositionDetectionPatternsAndSeparators(i),xt.embedDarkDotAtLeftBottomCorner(i),xt.maybeEmbedPositionAdjustmentPatterns(e,i),xt.embedTimingPatterns(i)}static embedTypeInfo(e,i,a){const h=new U;xt.makeTypeInfoBits(e,i,h);for(let f=0,g=h.getSize();f<g;++f){const x=h.get(h.getSize()-1-f),C=xt.TYPE_INFO_COORDINATES[f],E=C[0],T=C[1];if(a.setBoolean(E,T,x),f<8){const P=a.getWidth()-f-1;a.setBoolean(P,8,x)}else{const F=a.getHeight()-7+(f-8);a.setBoolean(8,F,x)}}}static maybeEmbedVersionInfo(e,i){if(e.getVersionNumber()<7)return;const a=new U;xt.makeVersionInfoBits(e,a);let h=17;for(let f=0;f<6;++f)for(let g=0;g<3;++g){const x=a.get(h);h--,i.setBoolean(f,i.getHeight()-11+g,x),i.setBoolean(i.getHeight()-11+g,f,x)}}static embedDataBits(e,i,a){let h=0,f=-1,g=a.getWidth()-1,x=a.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);x>=0&&x<a.getHeight();){for(let C=0;C<2;++C){const E=g-C;if(!xt.isEmpty(a.get(E,x)))continue;let T;h<e.getSize()?(T=e.get(h),++h):T=!1,i!==255&&mn.getDataMaskBit(i,E,x)&&(T=!T),a.setBoolean(E,x,T)}x+=f}f=-f,x+=f,g-=2}if(h!==e.getSize())throw new an("Not all bits consumed: "+h+"/"+e.getSize())}static findMSBSet(e){return 32-B.numberOfLeadingZeros(e)}static calculateBCHCode(e,i){if(i===0)throw new A("0 polynomial");const a=xt.findMSBSet(i);for(e<<=a-1;xt.findMSBSet(e)>=a;)e^=i<<xt.findMSBSet(e)-a;return e}static makeTypeInfoBits(e,i,a){if(!ri.isValidMaskPattern(i))throw new an("Invalid mask pattern");const h=e.getBits()<<3|i;a.appendBits(h,5);const f=xt.calculateBCHCode(h,xt.TYPE_INFO_POLY);a.appendBits(f,10);const g=new U;if(g.appendBits(xt.TYPE_INFO_MASK_PATTERN,15),a.xor(g),a.getSize()!==15)throw new an("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(e,i){i.appendBits(e.getVersionNumber(),6);const a=xt.calculateBCHCode(e.getVersionNumber(),xt.VERSION_INFO_POLY);if(i.appendBits(a,12),i.getSize()!==18)throw new an("should not happen but we got: "+i.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let i=8;i<e.getWidth()-8;++i){const a=(i+1)%2;xt.isEmpty(e.get(i,6))&&e.setNumber(i,6,a),xt.isEmpty(e.get(6,i))&&e.setNumber(6,i,a)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new an;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,i,a){for(let h=0;h<8;++h){if(!xt.isEmpty(a.get(e+h,i)))throw new an;a.setNumber(e+h,i,0)}}static embedVerticalSeparationPattern(e,i,a){for(let h=0;h<7;++h){if(!xt.isEmpty(a.get(e,i+h)))throw new an;a.setNumber(e,i+h,0)}}static embedPositionAdjustmentPattern(e,i,a){for(let h=0;h<5;++h){const f=xt.POSITION_ADJUSTMENT_PATTERN[h];for(let g=0;g<5;++g)a.setNumber(e+g,i+h,f[g])}}static embedPositionDetectionPattern(e,i,a){for(let h=0;h<7;++h){const f=xt.POSITION_DETECTION_PATTERN[h];for(let g=0;g<7;++g)a.setNumber(e+g,i+h,f[g])}}static embedPositionDetectionPatternsAndSeparators(e){const i=xt.POSITION_DETECTION_PATTERN[0].length;xt.embedPositionDetectionPattern(0,0,e),xt.embedPositionDetectionPattern(e.getWidth()-i,0,e),xt.embedPositionDetectionPattern(0,e.getWidth()-i,e);const a=8;xt.embedHorizontalSeparationPattern(0,a-1,e),xt.embedHorizontalSeparationPattern(e.getWidth()-a,a-1,e),xt.embedHorizontalSeparationPattern(0,e.getWidth()-a,e);const h=7;xt.embedVerticalSeparationPattern(h,0,e),xt.embedVerticalSeparationPattern(e.getHeight()-h-1,0,e),xt.embedVerticalSeparationPattern(h,e.getHeight()-h,e)}static maybeEmbedPositionAdjustmentPatterns(e,i){if(e.getVersionNumber()<2)return;const a=e.getVersionNumber()-1,h=xt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let f=0,g=h.length;f!==g;f++){const x=h[f];if(x>=0)for(let C=0;C!==g;C++){const E=h[C];E>=0&&xt.isEmpty(i.get(E,x))&&xt.embedPositionAdjustmentPattern(E-2,x-2,i)}}}}xt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),xt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),xt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),xt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),xt.VERSION_INFO_POLY=7973,xt.TYPE_INFO_POLY=1335,xt.TYPE_INFO_MASK_PATTERN=21522;class Ld{constructor(e,i){this.dataBytes=e,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class cn{constructor(){}static calculateMaskPenalty(e){return mn.applyMaskPenaltyRule1(e)+mn.applyMaskPenaltyRule2(e)+mn.applyMaskPenaltyRule3(e)+mn.applyMaskPenaltyRule4(e)}static encode(e,i,a=null){let h=cn.DEFAULT_BYTE_MODE_ENCODING;const f=a!==null&&a.get(Dn.CHARACTER_SET)!==void 0;f&&(h=a.get(Dn.CHARACTER_SET).toString());const g=this.chooseMode(e,h),x=new U;if(g===ft.BYTE&&(f||cn.DEFAULT_BYTE_MODE_ENCODING!==h)){const ze=$.getCharacterSetECIByName(h);ze!==void 0&&this.appendECI(ze,x)}this.appendModeInfo(g,x);const C=new U;this.appendBytes(e,g,C,h);let E;if(a!==null&&a.get(Dn.QR_VERSION)!==void 0){const ze=Number.parseInt(a.get(Dn.QR_VERSION).toString(),10);E=ht.getVersionForNumber(ze);const De=this.calculateBitsNeeded(g,x,C,E);if(!this.willFit(De,E,i))throw new an("Data too big for requested version")}else E=this.recommendVersion(i,g,x,C);const T=new U;T.appendBitArray(x);const P=g===ft.BYTE?C.getSizeInBytes():e.length;this.appendLengthInfo(P,E,g,T),T.appendBitArray(C);const F=E.getECBlocksForLevel(i),q=E.getTotalCodewords()-F.getTotalECCodewords();this.terminateBits(q,T);const ne=this.interleaveWithECBytes(T,E.getTotalCodewords(),q,F.getNumBlocks()),se=new ri;se.setECLevel(i),se.setMode(g),se.setVersion(E);const de=E.getDimensionForVersion(),ye=new da(de,de),Ue=this.chooseMaskPattern(ne,i,E,ye);return se.setMaskPattern(Ue),xt.buildMatrix(ne,i,E,Ue,ye),se.setMatrix(ye),se}static recommendVersion(e,i,a,h){const f=this.calculateBitsNeeded(i,a,h,ht.getVersionForNumber(1)),g=this.chooseVersion(f,e),x=this.calculateBitsNeeded(i,a,h,g);return this.chooseVersion(x,e)}static calculateBitsNeeded(e,i,a,h){return i.getSize()+e.getCharacterCountBits(h)+a.getSize()}static getAlphanumericCode(e){return e<cn.ALPHANUMERIC_TABLE.length?cn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,i=null){if($.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(e))return ft.KANJI;let a=!1,h=!1;for(let f=0,g=e.length;f<g;++f){const x=e.charAt(f);if(cn.isDigit(x))a=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)h=!0;else return ft.BYTE}return h?ft.ALPHANUMERIC:a?ft.NUMERIC:ft.BYTE}static isOnlyDoubleByteKanji(e){let i;try{i=ue.encode(e,$.SJIS)}catch{return!1}const a=i.length;if(a%2!==0)return!1;for(let h=0;h<a;h+=2){const f=i[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(e,i,a,h){let f=Number.MAX_SAFE_INTEGER,g=-1;for(let x=0;x<ri.NUM_MASK_PATTERNS;x++){xt.buildMatrix(e,i,a,x,h);let C=this.calculateMaskPenalty(h);C<f&&(f=C,g=x)}return g}static chooseVersion(e,i){for(let a=1;a<=40;a++){const h=ht.getVersionForNumber(a);if(cn.willFit(e,h,i))return h}throw new an("Data too big")}static willFit(e,i,a){const h=i.getTotalCodewords(),g=i.getECBlocksForLevel(a).getTotalECCodewords(),x=h-g,C=(e+7)/8;return x>=C}static terminateBits(e,i){const a=e*8;if(i.getSize()>a)throw new an("data bits cannot fit in the QR Code"+i.getSize()+" > "+a);for(let g=0;g<4&&i.getSize()<a;++g)i.appendBit(!1);const h=i.getSize()&7;if(h>0)for(let g=h;g<8;g++)i.appendBit(!1);const f=e-i.getSizeInBytes();for(let g=0;g<f;++g)i.appendBits((g&1)===0?236:17,8);if(i.getSize()!==a)throw new an("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,i,a,h,f,g){if(h>=a)throw new an("Block ID too large");const x=e%a,C=a-x,E=Math.floor(e/a),T=E+1,P=Math.floor(i/a),F=P+1,q=E-P,ne=T-F;if(q!==ne)throw new an("EC bytes mismatch");if(a!==C+x)throw new an("RS blocks mismatch");if(e!==(P+q)*C+(F+ne)*x)throw new an("Total bytes mismatch");h<C?(f[0]=P,g[0]=q):(f[0]=F,g[0]=ne)}static interleaveWithECBytes(e,i,a,h){if(e.getSizeInBytes()!==a)throw new an("Number of bits and data bytes does not match");let f=0,g=0,x=0;const C=new Array;for(let T=0;T<h;++T){const P=new Int32Array(1),F=new Int32Array(1);cn.getNumDataBytesAndNumECBytesForBlockID(i,a,h,T,P,F);const q=P[0],ne=new Uint8Array(q);e.toBytes(8*f,ne,0,q);const se=cn.generateECBytes(ne,F[0]);C.push(new Ld(ne,se)),g=Math.max(g,q),x=Math.max(x,se.length),f+=P[0]}if(a!==f)throw new an("Data bytes does not match offset");const E=new U;for(let T=0;T<g;++T)for(const P of C){const F=P.getDataBytes();T<F.length&&E.appendBits(F[T],8)}for(let T=0;T<x;++T)for(const P of C){const F=P.getErrorCorrectionBytes();T<F.length&&E.appendBits(F[T],8)}if(i!==E.getSizeInBytes())throw new an("Interleaving error: "+i+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(e,i){const a=e.length,h=new Int32Array(a+i);for(let g=0;g<a;g++)h[g]=e[g]&255;new Cl(nt.QR_CODE_FIELD_256).encode(h,i);const f=new Uint8Array(i);for(let g=0;g<i;g++)f[g]=h[a+g];return f}static appendModeInfo(e,i){i.appendBits(e.getBits(),4)}static appendLengthInfo(e,i,a,h){const f=a.getCharacterCountBits(i);if(e>=1<<f)throw new an(e+" is bigger than "+((1<<f)-1));h.appendBits(e,f)}static appendBytes(e,i,a,h){switch(i){case ft.NUMERIC:cn.appendNumericBytes(e,a);break;case ft.ALPHANUMERIC:cn.appendAlphanumericBytes(e,a);break;case ft.BYTE:cn.append8BitBytes(e,a,h);break;case ft.KANJI:cn.appendKanjiBytes(e,a);break;default:throw new an("Invalid mode: "+i)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const i=cn.getDigit(e);return i>=0&&i<=9}static appendNumericBytes(e,i){const a=e.length;let h=0;for(;h<a;){const f=cn.getDigit(e.charAt(h));if(h+2<a){const g=cn.getDigit(e.charAt(h+1)),x=cn.getDigit(e.charAt(h+2));i.appendBits(f*100+g*10+x,10),h+=3}else if(h+1<a){const g=cn.getDigit(e.charAt(h+1));i.appendBits(f*10+g,7),h+=2}else i.appendBits(f,4),h++}}static appendAlphanumericBytes(e,i){const a=e.length;let h=0;for(;h<a;){const f=cn.getAlphanumericCode(e.charCodeAt(h));if(f===-1)throw new an;if(h+1<a){const g=cn.getAlphanumericCode(e.charCodeAt(h+1));if(g===-1)throw new an;i.appendBits(f*45+g,11),h+=2}else i.appendBits(f,6),h++}}static append8BitBytes(e,i,a){let h;try{h=ue.encode(e,a)}catch(f){throw new an(f)}for(let f=0,g=h.length;f!==g;f++){const x=h[f];i.appendBits(x,8)}}static appendKanjiBytes(e,i){let a;try{a=ue.encode(e,$.SJIS)}catch(f){throw new an(f)}const h=a.length;for(let f=0;f<h;f+=2){const g=a[f]&255,x=a[f+1]&255,C=g<<8&4294967295|x;let E=-1;if(C>=33088&&C<=40956?E=C-33088:C>=57408&&C<=60351&&(E=C-49472),E===-1)throw new an("Invalid byte sequence");const T=(E>>8)*192+(E&255);i.appendBits(T,13)}}static appendECI(e,i){i.appendBits(ft.ECI.getBits(),4),i.appendBits(e.getValue(),8)}}cn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),cn.DEFAULT_BYTE_MODE_ENCODING=$.UTF8.getName();class si{write(e,i,a,h=null){if(e.length===0)throw new A("Found empty contents");if(i<0||a<0)throw new A("Requested dimensions are too small: "+i+"x"+a);let f=rn.L,g=si.QUIET_ZONE_SIZE;h!==null&&(h.get(Dn.ERROR_CORRECTION)!==void 0&&(f=rn.fromString(h.get(Dn.ERROR_CORRECTION).toString())),h.get(Dn.MARGIN)!==void 0&&(g=Number.parseInt(h.get(Dn.MARGIN).toString(),10)));const x=cn.encode(e,f,h);return this.renderResult(x,i,a,g)}writeToDom(e,i,a,h,f=null){typeof e=="string"&&(e=document.querySelector(e));const g=this.write(i,a,h,f);e&&e.appendChild(g)}renderResult(e,i,a,h){const f=e.getMatrix();if(f===null)throw new Oe;const g=f.getWidth(),x=f.getHeight(),C=g+h*2,E=x+h*2,T=Math.max(i,C),P=Math.max(a,E),F=Math.min(Math.floor(T/C),Math.floor(P/E)),q=Math.floor((T-g*F)/2),ne=Math.floor((P-x*F)/2),se=this.createSVGElement(T,P);for(let de=0,ye=ne;de<x;de++,ye+=F)for(let Ue=0,ze=q;Ue<g;Ue++,ze+=F)if(f.get(Ue,de)===1){const De=this.createSvgRectElement(ze,ye,F,F);se.appendChild(De)}return se}createSVGElement(e,i){const a=document.createElementNS(si.SVG_NS,"svg");return a.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width",i.toString()),a}createSvgRectElement(e,i,a,h){const f=document.createElementNS(si.SVG_NS,"rect");return f.setAttributeNS(null,"x",e.toString()),f.setAttributeNS(null,"y",i.toString()),f.setAttributeNS(null,"height",a.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}si.QUIET_ZONE_SIZE=4,si.SVG_NS="http://www.w3.org/2000/svg";class Pi{encode(e,i,a,h,f){if(e.length===0)throw new A("Found empty contents");if(i!==we.QR_CODE)throw new A("Can only encode QR_CODE, but got "+i);if(a<0||h<0)throw new A(`Requested dimensions are too small: ${a}x${h}`);let g=rn.L,x=Pi.QUIET_ZONE_SIZE;f!==null&&(f.get(Dn.ERROR_CORRECTION)!==void 0&&(g=rn.fromString(f.get(Dn.ERROR_CORRECTION).toString())),f.get(Dn.MARGIN)!==void 0&&(x=Number.parseInt(f.get(Dn.MARGIN).toString(),10)));const C=cn.encode(e,g,f);return Pi.renderResult(C,a,h,x)}static renderResult(e,i,a,h){const f=e.getMatrix();if(f===null)throw new Oe;const g=f.getWidth(),x=f.getHeight(),C=g+h*2,E=x+h*2,T=Math.max(i,C),P=Math.max(a,E),F=Math.min(Math.floor(T/C),Math.floor(P/E)),q=Math.floor((T-g*F)/2),ne=Math.floor((P-x*F)/2),se=new fe(T,P);for(let de=0,ye=ne;de<x;de++,ye+=F)for(let Ue=0,ze=q;Ue<g;Ue++,ze+=F)f.get(Ue,de)===1&&se.setRegion(ze,ye,F,F);return se}}Pi.QUIET_ZONE_SIZE=4;class Bd{encode(e,i,a,h,f){let g;switch(i){case we.QR_CODE:g=new Pi;break;default:throw new A("No encoder available for format "+i)}return g.encode(e,i,a,h,f)}}class as extends le{constructor(e,i,a,h,f,g,x,C){if(super(g,x),this.yuvData=e,this.dataWidth=i,this.dataHeight=a,this.left=h,this.top=f,h+g>i||f+x>a)throw new A("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(g,x)}getRow(e,i){if(e<0||e>=this.getHeight())throw new A("Requested row is outside the image: "+e);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const h=(e+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,h,i,0,a),i}getMatrix(){const e=this.getWidth(),i=this.getHeight();if(e===this.dataWidth&&i===this.dataHeight)return this.yuvData;const a=e*i,h=new Uint8ClampedArray(a);let f=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return j.arraycopy(this.yuvData,f,h,0,a),h;for(let g=0;g<i;g++){const x=g*e;j.arraycopy(this.yuvData,f,h,x,e),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(e,i,a,h){return new as(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+i,a,h,!1)}renderThumbnail(){const e=this.getWidth()/as.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/as.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(e*i),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let g=0;g<i;g++){const x=g*e;for(let C=0;C<e;C++){const E=h[f+C*as.THUMBNAIL_SCALE_FACTOR]&255;a[x+C]=4278190080|E*65793}f+=this.dataWidth*as.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/as.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/as.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,i){const a=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<i;h++,f+=this.dataWidth){const g=f+e/2;for(let x=f,C=f+e-1;x<g;x++,C--){const E=a[x];a[x]=a[C],a[C]=E}}}invert(){return new ce(this)}}as.THUMBNAIL_SCALE_FACTOR=2;class _o extends le{constructor(e,i,a,h,f,g,x){if(super(i,a),this.dataWidth=h,this.dataHeight=f,this.left=g,this.top=x,e.BYTES_PER_ELEMENT===4){const C=i*a,E=new Uint8ClampedArray(C);for(let T=0;T<C;T++){const P=e[T],F=P>>16&255,q=P>>7&510,ne=P&255;E[T]=(F+q+ne)/4&255}this.luminances=E}else this.luminances=e;if(h===void 0&&(this.dataWidth=i),f===void 0&&(this.dataHeight=a),g===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+a>this.dataHeight)throw new A("Crop rectangle does not fit within image data.")}getRow(e,i){if(e<0||e>=this.getHeight())throw new A("Requested row is outside the image: "+e);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const h=(e+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,h,i,0,a),i}getMatrix(){const e=this.getWidth(),i=this.getHeight();if(e===this.dataWidth&&i===this.dataHeight)return this.luminances;const a=e*i,h=new Uint8ClampedArray(a);let f=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return j.arraycopy(this.luminances,f,h,0,a),h;for(let g=0;g<i;g++){const x=g*e;j.arraycopy(this.luminances,f,h,x,e),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(e,i,a,h){return new _o(this.luminances,a,h,this.dataWidth,this.dataHeight,this.left+e,this.top+i)}invert(){return new ce(this)}}class Tc extends ${static forName(e){return this.getCharacterSetECIByName(e)}}class El{}El.ISO_8859_1=$.ISO8859_1;class Rc{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Sl{static singletonList(e){return[e]}static min(e,i){return e.sort(i)[0]}}class Fd{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Di extends Fd{constructor(e,i,a){super(e),this.value=i,this.bitCount=a}appendTo(e,i){e.appendBits(this.value,this.bitCount)}add(e,i){return new Di(this,e,i)}addBinaryShift(e,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Di(this,e,i)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+B.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class _l extends Di{constructor(e,i,a){super(e,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=a}appendTo(e,i){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):a===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(i[this.binaryShiftStart+a],8)}addBinaryShift(e,i){return new _l(this,e,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ud(O,e,i){return new _l(O,e,i)}function Ao(O,e,i){return new Di(O,e,i)}const zd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Us=0,Mi=1,tr=2,kc=3,Gr=4,jc=new Di(null,0,0),ha=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Oc(O){for(let e of O)z.fill(e,-1);return O[Us][Gr]=0,O[Mi][Gr]=0,O[Mi][Us]=28,O[kc][Gr]=0,O[tr][Gr]=0,O[tr][Us]=15,O}const Al=Oc(z.createInt32Array(6,6));class ur{constructor(e,i,a,h){this.token=e,this.mode=i,this.binaryShiftByteCount=a,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,i){let a=this.bitCount,h=this.token;if(e!==this.mode){let g=ha[this.mode][e];h=Ao(h,g&65535,g>>16),a+=g>>16}let f=e===tr?4:5;return h=Ao(h,i,f),new ur(h,e,0,a+f)}shiftAndAppend(e,i){let a=this.token,h=this.mode===tr?4:5;return a=Ao(a,Al[this.mode][e],h),a=Ao(a,i,5),new ur(a,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(e){let i=this.token,a=this.mode,h=this.bitCount;if(this.mode===Gr||this.mode===tr){let x=ha[a][Us];i=Ao(i,x&65535,x>>16),h+=x>>16,a=Us}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new ur(i,a,this.binaryShiftByteCount+1,h+f);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(e+1)),g}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Ud(i,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new ur(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let i=this.bitCount+(ha[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?i+=ur.calculateBinaryShiftCost(e)-ur.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(i+=10),i<=e.bitCount}toBitArray(e){let i=[];for(let h=this.endBinaryShift(e.length).token;h!==null;h=h.getPrevious())i.unshift(h);let a=new U;for(const h of i)h.appendTo(a,e);return a}toString(){return ae.format("%s bits=%d bytes=%d",zd[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}ur.INITIAL_STATE=new ur(jc,Us,0,0);function Vd(O){const e=ae.getCharCode(" "),i=ae.getCharCode("."),a=ae.getCharCode(",");O[Us][e]=1;const h=ae.getCharCode("Z"),f=ae.getCharCode("A");for(let F=f;F<=h;F++)O[Us][F]=F-f+2;O[Mi][e]=1;const g=ae.getCharCode("z"),x=ae.getCharCode("a");for(let F=x;F<=g;F++)O[Mi][F]=F-x+2;O[tr][e]=1;const C=ae.getCharCode("9"),E=ae.getCharCode("0");for(let F=E;F<=C;F++)O[tr][F]=F-E+2;O[tr][a]=12,O[tr][i]=13;const T=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let F=0;F<T.length;F++)O[kc][ae.getCharCode(T[F])]=F;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let F=0;F<P.length;F++)ae.getCharCode(P[F])>0&&(O[Gr][ae.getCharCode(P[F])]=F);return O}const Nl=Vd(z.createInt32Array(5,256));class No{constructor(e){this.text=e}encode(){const e=ae.getCharCode(" "),i=ae.getCharCode(`
`);let a=Sl.singletonList(ur.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let g,x=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case ae.getCharCode("\r"):g=x===i?2:0;break;case ae.getCharCode("."):g=x===e?3:0;break;case ae.getCharCode(","):g=x===e?4:0;break;case ae.getCharCode(":"):g=x===e?5:0;break;default:g=0}g>0?(a=No.updateStateListForPair(a,f,g),f++):a=this.updateStateListForChar(a,f)}return Sl.min(a,(f,g)=>f.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,i){const a=[];for(let h of e)this.updateStateForChar(h,i,a);return No.simplifyStates(a)}updateStateForChar(e,i,a){let h=this.text[i]&255,f=Nl[e.getMode()][h]>0,g=null;for(let x=0;x<=Gr;x++){let C=Nl[x][h];if(C>0){if(g==null&&(g=e.endBinaryShift(i)),!f||x===e.getMode()||x===tr){const E=g.latchAndAppend(x,C);a.push(E)}if(!f&&Al[e.getMode()][x]>=0){const E=g.shiftAndAppend(x,C);a.push(E)}}}if(e.getBinaryShiftByteCount()>0||Nl[e.getMode()][h]===0){let x=e.addBinaryShiftChar(i);a.push(x)}}static updateStateListForPair(e,i,a){const h=[];for(let f of e)this.updateStateForPair(f,i,a,h);return this.simplifyStates(h)}static updateStateForPair(e,i,a,h){let f=e.endBinaryShift(i);if(h.push(f.latchAndAppend(Gr,a)),e.getMode()!==Gr&&h.push(f.shiftAndAppend(Gr,a)),a===3||a===4){let g=f.latchAndAppend(tr,16-a).latchAndAppend(tr,1);h.push(g)}if(e.getBinaryShiftByteCount()>0){let g=e.addBinaryShiftChar(i).addBinaryShiftChar(i+1);h.push(g)}}static simplifyStates(e){let i=[];for(const a of e){let h=!0;for(const f of i){if(f.isBetterThanOrEqualTo(a)){h=!1;break}a.isBetterThanOrEqualTo(f)&&(i=i.filter(g=>g!==f))}h&&i.push(a)}return i}}class Ht{constructor(){}static encodeBytes(e){return Ht.encode(e,Ht.DEFAULT_EC_PERCENT,Ht.DEFAULT_AZTEC_LAYERS)}static encode(e,i,a){let h=new No(e).encode(),f=B.truncDivision(h.getSize()*i,100)+11,g=h.getSize()+f,x,C,E,T,P;if(a!==Ht.DEFAULT_AZTEC_LAYERS){if(x=a<0,C=Math.abs(a),C>(x?Ht.MAX_NB_BITS_COMPACT:Ht.MAX_NB_BITS))throw new A(ae.format("Illegal value %s for layers",a));E=Ht.totalBitsInLayer(C,x),T=Ht.WORD_SIZE[C];let De=E-E%T;if(P=Ht.stuffBits(h,T),P.getSize()+f>De)throw new A("Data to large for user specified layer");if(x&&P.getSize()>T*64)throw new A("Data to large for user specified layer")}else{T=0,P=null;for(let De=0;;De++){if(De>Ht.MAX_NB_BITS)throw new A("Data too large for an Aztec code");if(x=De<=3,C=x?De+1:De,E=Ht.totalBitsInLayer(C,x),g>E)continue;(P==null||T!==Ht.WORD_SIZE[C])&&(T=Ht.WORD_SIZE[C],P=Ht.stuffBits(h,T));let Bt=E-E%T;if(!(x&&P.getSize()>T*64)&&P.getSize()+f<=Bt)break}}let F=Ht.generateCheckWords(P,E,T),q=P.getSize()/T,ne=Ht.generateModeMessage(x,C,q),se=(x?11:14)+C*4,de=new Int32Array(se),ye;if(x){ye=se;for(let De=0;De<de.length;De++)de[De]=De}else{ye=se+1+2*B.truncDivision(B.truncDivision(se,2)-1,15);let De=B.truncDivision(se,2),Bt=B.truncDivision(ye,2);for(let Rt=0;Rt<De;Rt++){let vr=Rt+B.truncDivision(Rt,15);de[De-Rt-1]=Bt-vr-1,de[De+Rt]=Bt+vr+1}}let Ue=new fe(ye);for(let De=0,Bt=0;De<C;De++){let Rt=(C-De)*4+(x?9:12);for(let vr=0;vr<Rt;vr++){let qr=vr*2;for(let Mn=0;Mn<2;Mn++)F.get(Bt+qr+Mn)&&Ue.set(de[De*2+Mn],de[De*2+vr]),F.get(Bt+Rt*2+qr+Mn)&&Ue.set(de[De*2+vr],de[se-1-De*2-Mn]),F.get(Bt+Rt*4+qr+Mn)&&Ue.set(de[se-1-De*2-Mn],de[se-1-De*2-vr]),F.get(Bt+Rt*6+qr+Mn)&&Ue.set(de[se-1-De*2-vr],de[De*2+Mn])}Bt+=Rt*8}if(Ht.drawModeMessage(Ue,x,ye,ne),x)Ht.drawBullsEye(Ue,B.truncDivision(ye,2),5);else{Ht.drawBullsEye(Ue,B.truncDivision(ye,2),7);for(let De=0,Bt=0;De<B.truncDivision(se,2)-1;De+=15,Bt+=16)for(let Rt=B.truncDivision(ye,2)&1;Rt<ye;Rt+=2)Ue.set(B.truncDivision(ye,2)-Bt,Rt),Ue.set(B.truncDivision(ye,2)+Bt,Rt),Ue.set(Rt,B.truncDivision(ye,2)-Bt),Ue.set(Rt,B.truncDivision(ye,2)+Bt)}let ze=new Rc;return ze.setCompact(x),ze.setSize(ye),ze.setLayers(C),ze.setCodeWords(q),ze.setMatrix(Ue),ze}static drawBullsEye(e,i,a){for(let h=0;h<a;h+=2)for(let f=i-h;f<=i+h;f++)e.set(f,i-h),e.set(f,i+h),e.set(i-h,f),e.set(i+h,f);e.set(i-a,i-a),e.set(i-a+1,i-a),e.set(i-a,i-a+1),e.set(i+a,i-a),e.set(i+a,i-a+1),e.set(i+a,i+a-1)}static generateModeMessage(e,i,a){let h=new U;return e?(h.appendBits(i-1,2),h.appendBits(a-1,6),h=Ht.generateCheckWords(h,28,4)):(h.appendBits(i-1,5),h.appendBits(a-1,11),h=Ht.generateCheckWords(h,40,4)),h}static drawModeMessage(e,i,a,h){let f=B.truncDivision(a,2);if(i)for(let g=0;g<7;g++){let x=f-3+g;h.get(g)&&e.set(x,f-5),h.get(g+7)&&e.set(f+5,x),h.get(20-g)&&e.set(x,f+5),h.get(27-g)&&e.set(f-5,x)}else for(let g=0;g<10;g++){let x=f-5+g+B.truncDivision(g,5);h.get(g)&&e.set(x,f-7),h.get(g+10)&&e.set(f+7,x),h.get(29-g)&&e.set(x,f+7),h.get(39-g)&&e.set(f-7,x)}}static generateCheckWords(e,i,a){let h=e.getSize()/a,f=new Cl(Ht.getGF(a)),g=B.truncDivision(i,a),x=Ht.bitsToWords(e,a,g);f.encode(x,g-h);let C=i%a,E=new U;E.appendBits(0,C);for(const T of Array.from(x))E.appendBits(T,a);return E}static bitsToWords(e,i,a){let h=new Int32Array(a),f,g;for(f=0,g=e.getSize()/i;f<g;f++){let x=0;for(let C=0;C<i;C++)x|=e.get(f*i+C)?1<<i-C-1:0;h[f]=x}return h}static getGF(e){switch(e){case 4:return nt.AZTEC_PARAM;case 6:return nt.AZTEC_DATA_6;case 8:return nt.AZTEC_DATA_8;case 10:return nt.AZTEC_DATA_10;case 12:return nt.AZTEC_DATA_12;default:throw new A("Unsupported word size "+e)}}static stuffBits(e,i){let a=new U,h=e.getSize(),f=(1<<i)-2;for(let g=0;g<h;g+=i){let x=0;for(let C=0;C<i;C++)(g+C>=h||e.get(g+C))&&(x|=1<<i-1-C);(x&f)===f?(a.appendBits(x&f,i),g--):(x&f)===0?(a.appendBits(x|1,i),g--):a.appendBits(x,i)}return a}static totalBitsInLayer(e,i){return((i?88:112)+16*e)*e}}Ht.DEFAULT_EC_PERCENT=33,Ht.DEFAULT_AZTEC_LAYERS=0,Ht.MAX_NB_BITS=32,Ht.MAX_NB_BITS_COMPACT=4,Ht.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Io{encode(e,i,a,h){return this.encodeWithHints(e,i,a,h,null)}encodeWithHints(e,i,a,h,f){let g=El.ISO_8859_1,x=Ht.DEFAULT_EC_PERCENT,C=Ht.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Dn.CHARACTER_SET)&&(g=Tc.forName(f.get(Dn.CHARACTER_SET).toString())),f.has(Dn.ERROR_CORRECTION)&&(x=B.parseInt(f.get(Dn.ERROR_CORRECTION).toString())),f.has(Dn.AZTEC_LAYERS)&&(C=B.parseInt(f.get(Dn.AZTEC_LAYERS).toString()))),Io.encodeLayers(e,i,a,h,g,x,C)}static encodeLayers(e,i,a,h,f,g,x){if(i!==we.AZTEC)throw new A("Can only encode AZTEC, but got "+i);let C=Ht.encode(ae.getBytes(e,f),g,x);return Io.renderResult(C,a,h)}static renderResult(e,i,a){let h=e.getMatrix();if(h==null)throw new Oe;let f=h.getWidth(),g=h.getHeight(),x=Math.max(i,f),C=Math.max(a,g),E=Math.min(x/f,C/g),T=(x-f*E)/2,P=(C-g*E)/2,F=new fe(x,C);for(let q=0,ne=P;q<g;q++,ne+=E)for(let se=0,de=T;se<f;se++,de+=E)h.get(se,q)&&F.setRegion(de,ne,E,E);return F}}n.AbstractExpandedDecoder=hl,n.ArgumentException=_,n.ArithmeticException=Ct,n.AztecCode=Rc,n.AztecCodeReader=ns,n.AztecCodeWriter=Io,n.AztecDecoder=Se,n.AztecDetector=Wn,n.AztecDetectorResult=lt,n.AztecEncoder=Ht,n.AztecHighLevelEncoder=No,n.AztecPoint=sn,n.BarcodeFormat=we,n.Binarizer=D,n.BinaryBitmap=k,n.BitArray=U,n.BitMatrix=fe,n.BitSource=ml,n.BrowserAztecCodeReader=dl,n.BrowserBarcodeReader=Cc,n.BrowserCodeReader=Be,n.BrowserDatamatrixCodeReader=Md,n.BrowserMultiFormatReader=So,n.BrowserPDF417Reader=ua,n.BrowserQRCodeReader=Ic,n.BrowserQRCodeSvgWriter=si,n.CharacterSetECI=$,n.ChecksumException=R,n.Code128Reader=Ge,n.Code39Reader=Sn,n.DataMatrixDecodedBitStreamParser=Wr,n.DataMatrixReader=$r,n.DecodeHintType=Y,n.DecoderResult=qe,n.DefaultGridSampler=Et,n.DetectorResult=Xt,n.EAN13Reader=xr,n.EncodeHintType=Dn,n.Exception=y,n.FormatException=W,n.GenericGF=nt,n.GenericGFPoly=We,n.GlobalHistogramBinarizer=Ae,n.GridSampler=Vn,n.GridSamplerInstance=It,n.HTMLCanvasElementLuminanceSource=he,n.HybridBinarizer=_e,n.ITFReader=Kt,n.IllegalArgumentException=A,n.IllegalStateException=Oe,n.InvertedLuminanceSource=ce,n.LuminanceSource=le,n.MathUtils=Le,n.MultiFormatOneDReader=Ii,n.MultiFormatReader=ca,n.MultiFormatWriter=Bd,n.NotFoundException=ee,n.OneDReader=wn,n.PDF417DecodedBitStreamParser=ve,n.PDF417DecoderErrorCorrection=wl,n.PDF417Reader=qn,n.PDF417ResultMetadata=aa,n.PerspectiveTransform=$t,n.PlanarYUVLuminanceSource=as,n.QRCodeByteMatrix=da,n.QRCodeDataMask=Dt,n.QRCodeDecodedBitStreamParser=gn,n.QRCodeDecoderErrorCorrectionLevel=rn,n.QRCodeDecoderFormatInformation=$n,n.QRCodeEncoder=cn,n.QRCodeEncoderQRCode=ri,n.QRCodeMaskUtil=mn,n.QRCodeMatrixUtil=xt,n.QRCodeMode=ft,n.QRCodeReader=cr,n.QRCodeVersion=ht,n.QRCodeWriter=Pi,n.RGBLuminanceSource=_o,n.RSS14Reader=un,n.RSSExpandedReader=Te,n.ReaderException=Oi,n.ReedSolomonDecoder=rt,n.ReedSolomonEncoder=Cl,n.ReedSolomonException=Wt,n.Result=Ve,n.ResultMetadataType=Re,n.ResultPoint=ke,n.StringUtils=ae,n.UnsupportedOperationException=Q,n.VideoInputDevice=K,n.WhiteRectangleDetector=mt,n.WriterException=an,n.ZXingArrays=z,n.ZXingCharset=Tc,n.ZXingInteger=B,n.ZXingStandardCharsets=El,n.ZXingStringBuilder=te,n.ZXingStringEncoding=ue,n.ZXingSystem=j,n.createAbstractExpandedDecoder=vc,Object.defineProperty(n,"__esModule",{value:!0})}))})(ec,ec.exports)),ec.exports}var bn=PT();const DT=hc(bn),MT=D0({__proto__:null,default:DT},[bn]);var Hp=(function(){function r(t,n,o){if(this.formatMap=new Map([[Qe.QR_CODE,bn.BarcodeFormat.QR_CODE],[Qe.AZTEC,bn.BarcodeFormat.AZTEC],[Qe.CODABAR,bn.BarcodeFormat.CODABAR],[Qe.CODE_39,bn.BarcodeFormat.CODE_39],[Qe.CODE_93,bn.BarcodeFormat.CODE_93],[Qe.CODE_128,bn.BarcodeFormat.CODE_128],[Qe.DATA_MATRIX,bn.BarcodeFormat.DATA_MATRIX],[Qe.MAXICODE,bn.BarcodeFormat.MAXICODE],[Qe.ITF,bn.BarcodeFormat.ITF],[Qe.EAN_13,bn.BarcodeFormat.EAN_13],[Qe.EAN_8,bn.BarcodeFormat.EAN_8],[Qe.PDF_417,bn.BarcodeFormat.PDF_417],[Qe.RSS_14,bn.BarcodeFormat.RSS_14],[Qe.RSS_EXPANDED,bn.BarcodeFormat.RSS_EXPANDED],[Qe.UPC_A,bn.BarcodeFormat.UPC_A],[Qe.UPC_E,bn.BarcodeFormat.UPC_E],[Qe.UPC_EAN_EXTENSION,bn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!MT)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var u=this.createZXingFormats(t),d=new Map;d.set(bn.DecodeHintType.POSSIBLE_FORMATS,u),d.set(bn.DecodeHintType.TRY_HARDER,!1),this.hints=d}return r.prototype.decodeAsync=function(t){var n=this;return new Promise(function(o,u){try{o(n.decode(t))}catch(d){u(d)}})},r.prototype.decode=function(t){var n=new bn.MultiFormatReader(this.verbose,this.hints),o=new bn.HTMLCanvasElementLuminanceSource(t),u=new bn.BinaryBitmap(new bn.HybridBinarizer(o)),d=n.decode(u);return{text:d.text,format:t2.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,o,u){t.set(n,o)}),t},r.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},r.prototype.createZXingFormats=function(t){for(var n=[],o=0,u=t;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return n},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),LT=function(r,t,n,o){function u(d){return d instanceof n?d:new n(function(p){p(d)})}return new(n||(n=Promise))(function(d,p){function w(_){try{y(o.next(_))}catch(A){p(A)}}function b(_){try{y(o.throw(_))}catch(A){p(A)}}function y(_){_.done?d(_.value):u(_.value).then(w,b)}y((o=o.apply(r,t||[])).next())})},BT=function(r,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(_){return b([y,_])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,u&&(d=y[0]&2?u.return:y[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,y[1])).done)return d;switch(u=0,d&&(y=[y[0]&2,d.value]),y[0]){case 0:case 1:d=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,u=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){n.label=y[1];break}if(y[0]===6&&n.label<d[1]){n.label=d[1],d=y;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(y);break}d[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(r,n)}catch(_){y=[6,_],u=0}finally{o=d=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Gp=(function(){function r(t,n,o){if(this.formatMap=new Map([[Qe.QR_CODE,"qr_code"],[Qe.AZTEC,"aztec"],[Qe.CODABAR,"codabar"],[Qe.CODE_39,"code_39"],[Qe.CODE_93,"code_93"],[Qe.CODE_128,"code_128"],[Qe.DATA_MATRIX,"data_matrix"],[Qe.ITF,"itf"],[Qe.EAN_13,"ean_13"],[Qe.EAN_8,"ean_8"],[Qe.PDF_417,"pdf417"],[Qe.UPC_A,"upc_a"],[Qe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var u=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},r.prototype.decodeAsync=function(t){return LT(this,void 0,void 0,function(){var n,o;return BT(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=u.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:t2.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(t){for(var n=null,o=0,u=0,d=t;u<d.length;u++){var p=d[u],w=p.boundingBox.width*p.boundingBox.height;w>o&&(o=w,n=p)}if(!n)throw"No largest barcode found";return n},r.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],o=0,u=t;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},r.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},r.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,o,u){t.set(n,o)}),t},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),qp=function(r,t,n,o){function u(d){return d instanceof n?d:new n(function(p){p(d)})}return new(n||(n=Promise))(function(d,p){function w(_){try{y(o.next(_))}catch(A){p(A)}}function b(_){try{y(o.throw(_))}catch(A){p(A)}}function y(_){_.done?d(_.value):u(_.value).then(w,b)}y((o=o.apply(r,t||[])).next())})},Xp=function(r,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(_){return b([y,_])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,u&&(d=y[0]&2?u.return:y[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,y[1])).done)return d;switch(u=0,d&&(y=[y[0]&2,d.value]),y[0]){case 0:case 1:d=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,u=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){n.label=y[1];break}if(y[0]===6&&n.label<d[1]){n.label=d[1],d=y;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(y);break}d[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(r,n)}catch(_){y=[6,_],u=0}finally{o=d=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},FT=(function(){function r(t,n,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&Gp.isSupported()?(this.primaryDecoder=new Gp(t,o,u),this.secondaryDecoder=new Hp(t,o,u)):this.primaryDecoder=new Hp(t,o,u)}return r.prototype.decodeAsync=function(t){return qp(this,void 0,void 0,function(){var n;return Xp(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(t){return qp(this,void 0,void 0,function(){var n,o;return Xp(this,function(u){switch(u.label){case 0:n=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,o=this.executionResults;n<o.length;n++){var u=o[n];t+=u}var d=t/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),v1=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},r(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),dd=function(r,t,n,o){function u(d){return d instanceof n?d:new n(function(p){p(d)})}return new(n||(n=Promise))(function(d,p){function w(_){try{y(o.next(_))}catch(A){p(A)}}function b(_){try{y(o.throw(_))}catch(A){p(A)}}function y(_){_.done?d(_.value):u(_.value).then(w,b)}y((o=o.apply(r,t||[])).next())})},hd=function(r,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(_){return b([y,_])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,u&&(d=y[0]&2?u.return:y[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,y[1])).done)return d;switch(u=0,d&&(y=[y[0]&2,d.value]),y[0]){case 0:case 1:d=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,u=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){n.label=y[1];break}if(y[0]===6&&n.label<d[1]){n.label=d[1],d=y;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(y);break}d[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(r,n)}catch(_){y=[6,_],u=0}finally{o=d=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},r2=(function(){function r(t,n){this.name=t,this.track=n}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(t){var n={};n[this.name]=t;var o={advanced:[n]};return this.track.applyConstraints(o)},r.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},r})(),UT=(function(r){v1(t,r);function t(n,o){return r.call(this,n,o)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var o={};o[this.name]=n;var u={advanced:[o]};return this.track.applyConstraints(u)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(r2),zT=(function(r){v1(t,r);function t(n){return r.call(this,"zoom",n)||this}return t})(UT),VT=(function(r){v1(t,r);function t(n){return r.call(this,"torch",n)||this}return t})(r2),WT=(function(){function r(t){this.track=t}return r.prototype.zoomFeature=function(){return new zT(this.track)},r.prototype.torchFeature=function(){return new VT(this.track)},r})(),$T=(function(){function r(t,n,o){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return r.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},r.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=t.surface.clientWidth,u=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(o,u),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(t,n,o,u){return dd(this,void 0,void 0,function(){var d,p;return hd(this,function(w){switch(w.label){case 0:return d=new r(t,n,u),o.aspectRatio?(p={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:w.sent(),w.label=2;case 2:return d.setupSurface(),[2,d]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(t){this.failIfClosed();var n=this,o=function(){setTimeout(t,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(t){return dd(this,void 0,void 0,function(){return hd(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,o){var u=t.mediaStream.getVideoTracks(),d=u.length,p=0;t.mediaStream.getVideoTracks().forEach(function(w){t.mediaStream.removeTrack(w),w.stop(),++p,p>=d&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},r.prototype.getCapabilities=function(){return new WT(this.getFirstTrackOrFail())},r})(),HT=(function(){function r(t){this.mediaStream=t}return r.prototype.render=function(t,n,o){return dd(this,void 0,void 0,function(){return hd(this,function(u){return[2,$T.create(t,this.mediaStream,n,o)]})})},r.create=function(t){return dd(this,void 0,void 0,function(){var n,o;return hd(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=u.sent(),[2,new r(o)]}})})},r})(),Kp=function(r,t,n,o){function u(d){return d instanceof n?d:new n(function(p){p(d)})}return new(n||(n=Promise))(function(d,p){function w(_){try{y(o.next(_))}catch(A){p(A)}}function b(_){try{y(o.throw(_))}catch(A){p(A)}}function y(_){_.done?d(_.value):u(_.value).then(w,b)}y((o=o.apply(r,t||[])).next())})},Yp=function(r,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(_){return b([y,_])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,u&&(d=y[0]&2?u.return:y[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,y[1])).done)return d;switch(u=0,d&&(y=[y[0]&2,d.value]),y[0]){case 0:case 1:d=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,u=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){n.label=y[1];break}if(y[0]===6&&n.label<d[1]){n.label=d[1],d=y;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(y);break}d[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(r,n)}catch(_){y=[6,_],u=0}finally{o=d=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},GT=(function(){function r(){}return r.failIfNotSupported=function(){return Kp(this,void 0,void 0,function(){return Yp(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(t){return Kp(this,void 0,void 0,function(){return Yp(this,function(n){return[2,HT.create(t)]})})},r})(),qT=function(r,t,n,o){function u(d){return d instanceof n?d:new n(function(p){p(d)})}return new(n||(n=Promise))(function(d,p){function w(_){try{y(o.next(_))}catch(A){p(A)}}function b(_){try{y(o.throw(_))}catch(A){p(A)}}function y(_){_.done?d(_.value):u(_.value).then(w,b)}y((o=o.apply(r,t||[])).next())})},XT=function(r,t){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,p;return p={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function w(y){return function(_){return b([y,_])}}function b(y){if(o)throw new TypeError("Generator is already executing.");for(;p&&(p=0,y[0]&&(n=0)),n;)try{if(o=1,u&&(d=y[0]&2?u.return:y[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,y[1])).done)return d;switch(u=0,d&&(y=[y[0]&2,d.value]),y[0]){case 0:case 1:d=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,u=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!d||y[1]>d[0]&&y[1]<d[3])){n.label=y[1];break}if(y[0]===6&&n.label<d[1]){n.label=d[1],d=y;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(y);break}d[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(r,n)}catch(_){y=[6,_],u=0}finally{o=d=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},KT=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var t=$a.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(t=$a.insecureContextCameraQueryError()),Promise.reject(t)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},r.getCamerasFromMediaDevices=function(){return qT(this,void 0,void 0,function(){var t,n,o,u,d,p,w;return XT(this,function(b){switch(b.label){case 0:return t=function(y){for(var _=y.getVideoTracks(),A=0,k=_;A<k.length;A++){var R=k[A];R.enabled=!1,R.stop(),y.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=b.sent(),u=[],d=0,p=o;d<p.length;d++)w=p[d],w.kind==="videoinput"&&u.push({id:w.deviceId,label:w.label});return t(n),[2,u]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var o=function(d){for(var p=[],w=0,b=d;w<b.length;w++){var y=b[w];y.kind==="video"&&p.push({id:y.id,label:y.label})}t(p)},u=MediaStreamTrack;u.getSources(o)})},r})(),On;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(On||(On={}));var YT=(function(){function r(){this.state=On.NOT_STARTED,this.onGoingTransactionNewState=On.UNKNOWN}return r.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},r.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===On.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=On.UNKNOWN,this.directTransition(t)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===On.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=On.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==On.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(t){switch(this.state){case On.UNKNOWN:throw"Transition from unknown is not allowed";case On.NOT_STARTED:this.failIfNewStateIs(t,[On.PAUSED]);break;case On.SCANNING:break;case On.PAUSED:break}},r.prototype.failIfNewStateIs=function(t,n){for(var o=0,u=n;o<u.length;o++){var d=u[o];if(t===d)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},r})(),ZT=(function(){function r(t){this.stateManager=t}return r.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},r.prototype.directTransition=function(t){this.stateManager.directTransition(t)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===On.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==On.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===On.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===On.PAUSED},r})(),QT=(function(){function r(){}return r.create=function(){return new ZT(new YT)},r})(),JT=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},r(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Zr=(function(r){JT(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(RT),e8=(function(){function r(t,n){this.logger=n,this.fps=Zr.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Zr.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?n2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!mi(this.qrbox)},r.create=function(t,n){return new r(t,n)},r})(),t8=(function(){function r(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new jT(this.verbose),this.qrcode=new FT(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=QT.create()}return r.prototype.start=function(t,n,o,u){var d=this;if(!t)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;u?p=u:p=this.verbose?this.logger.log:function(){};var w=e8.create(n,this.logger);this.clearElement();var b=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=b,_=document.getElementById(this.elementId);_.clientWidth?_.clientWidth:Zr.DEFAULT_WIDTH,_.style.position="relative",this.shouldScan=!0,this.element=_;var A=this,k=this.stateManagerProxy.startTransition(On.SCANNING);return new Promise(function(R,D){var j=y?w.videoConstraints:A.createVideoConstraints(t);if(!j){k.cancel(),D("videoConstraints should be defined");return}var M={};(!y||w.aspectRatio)&&(M.aspectRatio=w.aspectRatio);var V={onRenderSurfaceReady:function(z,B){A.setupUi(z,B,w),A.isScanning=!0,A.foreverScan(w,o,p)}};GT.failIfNotSupported().then(function(z){z.create(j).then(function(B){return B.render(d.element,M,V).then(function(U){A.renderedCamera=U,k.execute(),R(null)}).catch(function(U){k.cancel(),D(U)})}).catch(function(B){k.cancel(),D($a.errorGettingUserMedia(B))})}).catch(function(z){k.cancel(),D($a.cameraStreamingNotSupported())})})},r.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(On.PAUSED),this.showPausedState(),(mi(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(On.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(On.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(t.element){var d=document.getElementById(Zr.SHADED_REGION_ELEMENT_ID);d&&t.element.removeChild(d)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),n.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(o){return o.decodedText})},r.prototype.scanFileV2=function(t,n){var o=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(mi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(t);var p=new Image;p.onload=function(){var w=p.width,b=p.height,y=document.getElementById(o.elementId),_=y.clientWidth?y.clientWidth:Zr.DEFAULT_WIDTH,A=Math.max(y.clientHeight?y.clientHeight:b,Zr.FILE_SCAN_MIN_HEIGHT),k=o.computeCanvasDrawConfig(w,b,_,A);if(n){var R=o.createCanvasElement(_,A,"qr-canvas-visible");R.style.display="inline-block",y.appendChild(R);var D=R.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=_,D.canvas.height=A,D.drawImage(p,0,0,w,b,k.x,k.y,k.width,k.height)}var j=Zr.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(p.width,k.width),V=Math.max(p.height,k.height),z=M+2*j,B=V+2*j,U=o.createCanvasElement(z,B);y.appendChild(U);var H=U.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=z,H.canvas.height=B,H.drawImage(p,0,0,w,b,j,j,M,V);try{o.qrcode.decodeRobustlyAsync(U).then(function(Y){u(Wp.createFromQrcodeResult(Y))}).catch(d)}catch(Y){d("QR code parse error, error = ".concat(Y))}},p.onerror=d,p.onabort=d,p.onstalled=d,p.onsuspend=d,p.src=URL.createObjectURL(t)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return KT.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(t){if(t){if(!n2.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(t){var n=[Qe.QR_CODE,Qe.AZTEC,Qe.CODABAR,Qe.CODE_39,Qe.CODE_93,Qe.CODE_128,Qe.DATA_MATRIX,Qe.MAXICODE,Qe.ITF,Qe.EAN_13,Qe.EAN_8,Qe.PDF_417,Qe.RSS_14,Qe.RSS_EXPANDED,Qe.UPC_A,Qe.UPC_E,Qe.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,d=t.formatsToSupport;u<d.length;u++){var p=d[u];TT(p)?o.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},r.prototype.getUseBarCodeDetectorIfSupported=function(t){if(mi(t))return!0;if(!mi(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(mi(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return mi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(t,n,o){var u=this,d=o.qrbox;this.validateQrboxConfig(d);var p=this.toQrdimensions(t,n,d),w=function(y){if(y<Zr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Zr.MIN_QR_BOX_SIZE,"px.")},b=function(y){return y>t&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y};w(p.width),w(p.height),p.width=b(p.width)},r.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(t,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(t,n)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},r.prototype.setupUi=function(t,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,o);var u=mi(o.qrbox)?{width:t,height:n}:o.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(t,n,u);d.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=o.isShadedBoxEnabled()&&d.height<=n,w={x:0,y:0,width:t,height:n},b=p?this.getShadedRegionBounds(t,n,d):w,y=this.createCanvasElement(b.width,b.height),_={willReadFrequently:!0},A=y.getContext("2d",_);A.canvas.width=b.width,A.canvas.height=b.height,this.element.append(y),p&&this.possiblyInsertShadingElement(this.element,t,n,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=A,this.canvasElement=y},r.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=$a.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},r.prototype.scanContext=function(t,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return t(u.text,Wp.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var d=$a.codeParseError(u);return n(d,kT.createFrom(d)),!1})},r.prototype.foreverScan=function(t,n,o){var u=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),p=d.videoWidth/d.clientWidth,w=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*p,y=this.qrRegion.height*w,_=this.qrRegion.x*p,A=this.qrRegion.y*w;this.context.drawImage(d,_,A,b,y,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(t,n,o)},u.getTimeoutFps(t.fps))};this.scanContext(n,o).then(function(R){!R&&t.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(n,o).finally(function(){k()})):k()}).catch(function(R){u.logger.logError("Error happend while scanning context",R),k()})}},r.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",o="deviceId",u={user:!0,environment:!0},d="exact",p=function(D){if(D in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},w=Object.keys(t);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var b=Object.keys(t)[0];if(b!==n&&b!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var y=t.facingMode;if(typeof y=="string"){if(p(y))return{facingMode:y}}else if(typeof y=="object")if(d in y){if(p(y["".concat(d)]))return{facingMode:{exact:y["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var _=typeof y;throw"Invalid type of 'facingMode' = ".concat(_)}}else{var A=t.deviceId;if(typeof A=="string")return{deviceId:A};if(typeof A=="object"){if(d in A)return{deviceId:{exact:A["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var k=typeof A;throw"Invalid type of 'deviceId' = ".concat(k)}}}var R=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},r.prototype.computeCanvasDrawConfig=function(t,n,o,u){if(t<=o&&n<=u){var d=(o-t)/2,p=(u-n)/2;return{x:d,y:p,width:t,height:n}}else{var w=t,b=n;return t>o&&(n=o/t*n,t=o),n>u&&(t=u/n*t,n=u),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(b)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,o,u)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},r.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Zr.BORDER_SHADER_MATCH_COLOR:Zr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(t,n,o){var u=t,d=n,p=document.createElement("canvas");return p.style.width="".concat(u,"px"),p.style.height="".concat(d,"px"),p.style.display="none",p.id=mi(o)?"qr-canvas":o,p},r.prototype.getShadedRegionBounds=function(t,n,o){if(o.width>t||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},r.prototype.possiblyInsertShadingElement=function(t,n,o,u){if(!(n-u.width<1||o-u.height<1)){var d=document.createElement("div");d.style.position="absolute";var p=(n-u.width)/2,w=(o-u.height)/2;if(d.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Zr.SHADED_REGION_ELEMENT_ID),n-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var b=5,y=40;this.insertShaderBorders(d,y,b,-b,null,0,!0),this.insertShaderBorders(d,y,b,-b,null,0,!1),this.insertShaderBorders(d,y,b,null,-b,0,!0),this.insertShaderBorders(d,y,b,null,-b,0,!1),this.insertShaderBorders(d,b,y+b,-b,null,-b,!0),this.insertShaderBorders(d,b,y+b,null,-b,-b,!0),this.insertShaderBorders(d,b,y+b,-b,null,-b,!1),this.insertShaderBorders(d,b,y+b,null,-b,-b,!1),this.hasBorderShaders=!0}t.append(d)}},r.prototype.insertShaderBorders=function(t,n,o,u,d,p,w){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Zr.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(o,"px"),u!==null&&(b.style.top="".concat(u,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),w?b.style.left="".concat(p,"px"):b.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),t.appendChild(b)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(t){return 1e3/t},r})(),Zp;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Zp||(Zp={}));var Fa={},kf,Qp;function n8(){return Qp||(Qp=1,kf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),kf}var jf={},eo={},Jp;function ra(){if(Jp)return eo;Jp=1;let r;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return eo.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},eo.getSymbolTotalCodewords=function(o){return t[o]},eo.getBCHDigit=function(n){let o=0;for(;n!==0;)o++,n>>>=1;return o},eo.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');r=o},eo.isKanjiModeEnabled=function(){return typeof r<"u"},eo.toSJIS=function(o){return r(o)},eo}var Of={},ex;function b1(){return ex||(ex=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+n)}}r.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},r.from=function(o,u){if(r.isValid(o))return o;try{return t(o)}catch{return u}}})(Of)),Of}var Pf,tx;function r8(){if(tx)return Pf;tx=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let o=0;o<n;o++)this.putBit((t>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Pf=r,Pf}var Df,nx;function s8(){if(nx)return Df;nx=1;function r(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return r.prototype.set=function(t,n,o,u){const d=t*this.size+n;this.data[d]=o,u&&(this.reservedBit[d]=!0)},r.prototype.get=function(t,n){return this.data[t*this.size+n]},r.prototype.xor=function(t,n,o){this.data[t*this.size+n]^=o},r.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]},Df=r,Df}var Mf={},rx;function i8(){return rx||(rx=1,(function(r){const t=ra().getSymbolSize;r.getRowColCoords=function(o){if(o===1)return[];const u=Math.floor(o/7)+2,d=t(o),p=d===145?26:Math.ceil((d-13)/(2*u-2))*2,w=[d-7];for(let b=1;b<u-1;b++)w[b]=w[b-1]-p;return w.push(6),w.reverse()},r.getPositions=function(o){const u=[],d=r.getRowColCoords(o),p=d.length;for(let w=0;w<p;w++)for(let b=0;b<p;b++)w===0&&b===0||w===0&&b===p-1||w===p-1&&b===0||u.push([d[w],d[b]]);return u}})(Mf)),Mf}var Lf={},sx;function o8(){if(sx)return Lf;sx=1;const r=ra().getSymbolSize,t=7;return Lf.getPositions=function(o){const u=r(o);return[[0,0],[u-t,0],[0,u-t]]},Lf}var Bf={},ix;function a8(){return ix||(ix=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(u){return u!=null&&u!==""&&!isNaN(u)&&u>=0&&u<=7},r.from=function(u){return r.isValid(u)?parseInt(u,10):void 0},r.getPenaltyN1=function(u){const d=u.size;let p=0,w=0,b=0,y=null,_=null;for(let A=0;A<d;A++){w=b=0,y=_=null;for(let k=0;k<d;k++){let R=u.get(A,k);R===y?w++:(w>=5&&(p+=t.N1+(w-5)),y=R,w=1),R=u.get(k,A),R===_?b++:(b>=5&&(p+=t.N1+(b-5)),_=R,b=1)}w>=5&&(p+=t.N1+(w-5)),b>=5&&(p+=t.N1+(b-5))}return p},r.getPenaltyN2=function(u){const d=u.size;let p=0;for(let w=0;w<d-1;w++)for(let b=0;b<d-1;b++){const y=u.get(w,b)+u.get(w,b+1)+u.get(w+1,b)+u.get(w+1,b+1);(y===4||y===0)&&p++}return p*t.N2},r.getPenaltyN3=function(u){const d=u.size;let p=0,w=0,b=0;for(let y=0;y<d;y++){w=b=0;for(let _=0;_<d;_++)w=w<<1&2047|u.get(y,_),_>=10&&(w===1488||w===93)&&p++,b=b<<1&2047|u.get(_,y),_>=10&&(b===1488||b===93)&&p++}return p*t.N3},r.getPenaltyN4=function(u){let d=0;const p=u.data.length;for(let b=0;b<p;b++)d+=u.data[b];return Math.abs(Math.ceil(d*100/p/5)-10)*t.N4};function n(o,u,d){switch(o){case r.Patterns.PATTERN000:return(u+d)%2===0;case r.Patterns.PATTERN001:return u%2===0;case r.Patterns.PATTERN010:return d%3===0;case r.Patterns.PATTERN011:return(u+d)%3===0;case r.Patterns.PATTERN100:return(Math.floor(u/2)+Math.floor(d/3))%2===0;case r.Patterns.PATTERN101:return u*d%2+u*d%3===0;case r.Patterns.PATTERN110:return(u*d%2+u*d%3)%2===0;case r.Patterns.PATTERN111:return(u*d%3+(u+d)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}r.applyMask=function(u,d){const p=d.size;for(let w=0;w<p;w++)for(let b=0;b<p;b++)d.isReserved(b,w)||d.xor(b,w,n(u,b,w))},r.getBestMask=function(u,d){const p=Object.keys(r.Patterns).length;let w=0,b=1/0;for(let y=0;y<p;y++){d(y),r.applyMask(y,u);const _=r.getPenaltyN1(u)+r.getPenaltyN2(u)+r.getPenaltyN3(u)+r.getPenaltyN4(u);r.applyMask(y,u),_<b&&(b=_,w=y)}return w}})(Bf)),Bf}var Wu={},ox;function s2(){if(ox)return Wu;ox=1;const r=b1(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Wu.getBlocksCount=function(u,d){switch(d){case r.L:return t[(u-1)*4+0];case r.M:return t[(u-1)*4+1];case r.Q:return t[(u-1)*4+2];case r.H:return t[(u-1)*4+3];default:return}},Wu.getTotalCodewordsCount=function(u,d){switch(d){case r.L:return n[(u-1)*4+0];case r.M:return n[(u-1)*4+1];case r.Q:return n[(u-1)*4+2];case r.H:return n[(u-1)*4+3];default:return}},Wu}var Ff={},Yl={},ax;function l8(){if(ax)return Yl;ax=1;const r=new Uint8Array(512),t=new Uint8Array(256);return(function(){let o=1;for(let u=0;u<255;u++)r[u]=o,t[o]=u,o<<=1,o&256&&(o^=285);for(let u=255;u<512;u++)r[u]=r[u-255]})(),Yl.log=function(o){if(o<1)throw new Error("log("+o+")");return t[o]},Yl.exp=function(o){return r[o]},Yl.mul=function(o,u){return o===0||u===0?0:r[t[o]+t[u]]},Yl}var lx;function c8(){return lx||(lx=1,(function(r){const t=l8();r.mul=function(o,u){const d=new Uint8Array(o.length+u.length-1);for(let p=0;p<o.length;p++)for(let w=0;w<u.length;w++)d[p+w]^=t.mul(o[p],u[w]);return d},r.mod=function(o,u){let d=new Uint8Array(o);for(;d.length-u.length>=0;){const p=d[0];for(let b=0;b<u.length;b++)d[b]^=t.mul(u[b],p);let w=0;for(;w<d.length&&d[w]===0;)w++;d=d.slice(w)}return d},r.generateECPolynomial=function(o){let u=new Uint8Array([1]);for(let d=0;d<o;d++)u=r.mul(u,new Uint8Array([1,t.exp(d)]));return u}})(Ff)),Ff}var Uf,cx;function u8(){if(cx)return Uf;cx=1;const r=c8();function t(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(o){this.degree=o,this.genPoly=r.generateECPolynomial(this.degree)},t.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const u=new Uint8Array(o.length+this.degree);u.set(o);const d=r.mod(u,this.genPoly),p=this.degree-d.length;if(p>0){const w=new Uint8Array(this.degree);return w.set(d,p),w}return d},Uf=t,Uf}var zf={},Vf={},Wf={},ux;function i2(){return ux||(ux=1,Wf.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),Wf}var Hs={},dx;function o2(){if(dx)return Hs;dx=1;const r="[0-9]+",t="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;Hs.KANJI=new RegExp(n,"g"),Hs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Hs.BYTE=new RegExp(o,"g"),Hs.NUMERIC=new RegExp(r,"g"),Hs.ALPHANUMERIC=new RegExp(t,"g");const u=new RegExp("^"+n+"$"),d=new RegExp("^"+r+"$"),p=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Hs.testKanji=function(b){return u.test(b)},Hs.testNumeric=function(b){return d.test(b)},Hs.testAlphanumeric=function(b){return p.test(b)},Hs}var hx;function sa(){return hx||(hx=1,(function(r){const t=i2(),n=o2();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(d,p){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!t.isValid(p))throw new Error("Invalid version: "+p);return p>=1&&p<10?d.ccBits[0]:p<27?d.ccBits[1]:d.ccBits[2]},r.getBestModeForData=function(d){return n.testNumeric(d)?r.NUMERIC:n.testAlphanumeric(d)?r.ALPHANUMERIC:n.testKanji(d)?r.KANJI:r.BYTE},r.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},r.isValid=function(d){return d&&d.bit&&d.ccBits};function o(u){if(typeof u!="string")throw new Error("Param is not a string");switch(u.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+u)}}r.from=function(d,p){if(r.isValid(d))return d;try{return o(d)}catch{return p}}})(Vf)),Vf}var fx;function d8(){return fx||(fx=1,(function(r){const t=ra(),n=s2(),o=b1(),u=sa(),d=i2(),p=7973,w=t.getBCHDigit(p);function b(k,R,D){for(let j=1;j<=40;j++)if(R<=r.getCapacity(j,D,k))return j}function y(k,R){return u.getCharCountIndicator(k,R)+4}function _(k,R){let D=0;return k.forEach(function(j){const M=y(j.mode,R);D+=M+j.getBitsLength()}),D}function A(k,R){for(let D=1;D<=40;D++)if(_(k,D)<=r.getCapacity(D,R,u.MIXED))return D}r.from=function(R,D){return d.isValid(R)?parseInt(R,10):D},r.getCapacity=function(R,D,j){if(!d.isValid(R))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=u.BYTE);const M=t.getSymbolTotalCodewords(R),V=n.getTotalCodewordsCount(R,D),z=(M-V)*8;if(j===u.MIXED)return z;const B=z-y(j,R);switch(j){case u.NUMERIC:return Math.floor(B/10*3);case u.ALPHANUMERIC:return Math.floor(B/11*2);case u.KANJI:return Math.floor(B/13);case u.BYTE:default:return Math.floor(B/8)}},r.getBestVersionForData=function(R,D){let j;const M=o.from(D,o.M);if(Array.isArray(R)){if(R.length>1)return A(R,M);if(R.length===0)return 1;j=R[0]}else j=R;return b(j.mode,j.getLength(),M)},r.getEncodedBits=function(R){if(!d.isValid(R)||R<7)throw new Error("Invalid QR Code version");let D=R<<12;for(;t.getBCHDigit(D)-w>=0;)D^=p<<t.getBCHDigit(D)-w;return R<<12|D}})(zf)),zf}var $f={},gx;function h8(){if(gx)return $f;gx=1;const r=ra(),t=1335,n=21522,o=r.getBCHDigit(t);return $f.getEncodedBits=function(d,p){const w=d.bit<<3|p;let b=w<<10;for(;r.getBCHDigit(b)-o>=0;)b^=t<<r.getBCHDigit(b)-o;return(w<<10|b)^n},$f}var Hf={},Gf,mx;function f8(){if(mx)return Gf;mx=1;const r=sa();function t(n){this.mode=r.NUMERIC,this.data=n.toString()}return t.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(o){let u,d,p;for(u=0;u+3<=this.data.length;u+=3)d=this.data.substr(u,3),p=parseInt(d,10),o.put(p,10);const w=this.data.length-u;w>0&&(d=this.data.substr(u),p=parseInt(d,10),o.put(p,w*3+1))},Gf=t,Gf}var qf,px;function g8(){if(px)return qf;px=1;const r=sa(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(o){this.mode=r.ALPHANUMERIC,this.data=o}return n.getBitsLength=function(u){return 11*Math.floor(u/2)+6*(u%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(u){let d;for(d=0;d+2<=this.data.length;d+=2){let p=t.indexOf(this.data[d])*45;p+=t.indexOf(this.data[d+1]),u.put(p,11)}this.data.length%2&&u.put(t.indexOf(this.data[d]),6)},qf=n,qf}var Xf,xx;function m8(){if(xx)return Xf;xx=1;const r=sa();function t(n){this.mode=r.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return t.getBitsLength=function(o){return o*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){for(let o=0,u=this.data.length;o<u;o++)n.put(this.data[o],8)},Xf=t,Xf}var Kf,wx;function p8(){if(wx)return Kf;wx=1;const r=sa(),t=ra();function n(o){this.mode=r.KANJI,this.data=o}return n.getBitsLength=function(u){return u*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(o){let u;for(u=0;u<this.data.length;u++){let d=t.toSJIS(this.data[u]);if(d>=33088&&d<=40956)d-=33088;else if(d>=57408&&d<=60351)d-=49472;else throw new Error("Invalid SJIS character: "+this.data[u]+`
Make sure your charset is UTF-8`);d=(d>>>8&255)*192+(d&255),o.put(d,13)}},Kf=n,Kf}var Yf={exports:{}},yx;function x8(){return yx||(yx=1,(function(r){var t={single_source_shortest_paths:function(n,o,u){var d={},p={};p[o]=0;var w=t.PriorityQueue.make();w.push(o,0);for(var b,y,_,A,k,R,D,j,M;!w.empty();){b=w.pop(),y=b.value,A=b.cost,k=n[y]||{};for(_ in k)k.hasOwnProperty(_)&&(R=k[_],D=A+R,j=p[_],M=typeof p[_]>"u",(M||j>D)&&(p[_]=D,w.push(_,D),d[_]=y))}if(typeof u<"u"&&typeof p[u]>"u"){var V=["Could not find a path from ",o," to ",u,"."].join("");throw new Error(V)}return d},extract_shortest_path_from_predecessor_list:function(n,o){for(var u=[],d=o;d;)u.push(d),n[d],d=n[d];return u.reverse(),u},find_path:function(n,o,u){var d=t.single_source_shortest_paths(n,o,u);return t.extract_shortest_path_from_predecessor_list(d,u)},PriorityQueue:{make:function(n){var o=t.PriorityQueue,u={},d;n=n||{};for(d in o)o.hasOwnProperty(d)&&(u[d]=o[d]);return u.queue=[],u.sorter=n.sorter||o.default_sorter,u},default_sorter:function(n,o){return n.cost-o.cost},push:function(n,o){var u={value:n,cost:o};this.queue.push(u),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(Yf)),Yf.exports}var vx;function w8(){return vx||(vx=1,(function(r){const t=sa(),n=f8(),o=g8(),u=m8(),d=p8(),p=o2(),w=ra(),b=x8();function y(V){return unescape(encodeURIComponent(V)).length}function _(V,z,B){const U=[];let H;for(;(H=V.exec(B))!==null;)U.push({data:H[0],index:H.index,mode:z,length:H[0].length});return U}function A(V){const z=_(p.NUMERIC,t.NUMERIC,V),B=_(p.ALPHANUMERIC,t.ALPHANUMERIC,V);let U,H;return w.isKanjiModeEnabled()?(U=_(p.BYTE,t.BYTE,V),H=_(p.KANJI,t.KANJI,V)):(U=_(p.BYTE_KANJI,t.BYTE,V),H=[]),z.concat(B,U,H).sort(function(W,X){return W.index-X.index}).map(function(W){return{data:W.data,mode:W.mode,length:W.length}})}function k(V,z){switch(z){case t.NUMERIC:return n.getBitsLength(V);case t.ALPHANUMERIC:return o.getBitsLength(V);case t.KANJI:return d.getBitsLength(V);case t.BYTE:return u.getBitsLength(V)}}function R(V){return V.reduce(function(z,B){const U=z.length-1>=0?z[z.length-1]:null;return U&&U.mode===B.mode?(z[z.length-1].data+=B.data,z):(z.push(B),z)},[])}function D(V){const z=[];for(let B=0;B<V.length;B++){const U=V[B];switch(U.mode){case t.NUMERIC:z.push([U,{data:U.data,mode:t.ALPHANUMERIC,length:U.length},{data:U.data,mode:t.BYTE,length:U.length}]);break;case t.ALPHANUMERIC:z.push([U,{data:U.data,mode:t.BYTE,length:U.length}]);break;case t.KANJI:z.push([U,{data:U.data,mode:t.BYTE,length:y(U.data)}]);break;case t.BYTE:z.push([{data:U.data,mode:t.BYTE,length:y(U.data)}])}}return z}function j(V,z){const B={},U={start:{}};let H=["start"];for(let Y=0;Y<V.length;Y++){const W=V[Y],X=[];for(let $=0;$<W.length;$++){const Q=W[$],ue=""+Y+$;X.push(ue),B[ue]={node:Q,lastCount:0},U[ue]={};for(let ae=0;ae<H.length;ae++){const te=H[ae];B[te]&&B[te].node.mode===Q.mode?(U[te][ue]=k(B[te].lastCount+Q.length,Q.mode)-k(B[te].lastCount,Q.mode),B[te].lastCount+=Q.length):(B[te]&&(B[te].lastCount=Q.length),U[te][ue]=k(Q.length,Q.mode)+4+t.getCharCountIndicator(Q.mode,z))}}H=X}for(let Y=0;Y<H.length;Y++)U[H[Y]].end=0;return{map:U,table:B}}function M(V,z){let B;const U=t.getBestModeForData(V);if(B=t.from(z,U),B!==t.BYTE&&B.bit<U.bit)throw new Error('"'+V+'" cannot be encoded with mode '+t.toString(B)+`.
 Suggested mode is: `+t.toString(U));switch(B===t.KANJI&&!w.isKanjiModeEnabled()&&(B=t.BYTE),B){case t.NUMERIC:return new n(V);case t.ALPHANUMERIC:return new o(V);case t.KANJI:return new d(V);case t.BYTE:return new u(V)}}r.fromArray=function(z){return z.reduce(function(B,U){return typeof U=="string"?B.push(M(U,null)):U.data&&B.push(M(U.data,U.mode)),B},[])},r.fromString=function(z,B){const U=A(z,w.isKanjiModeEnabled()),H=D(U),Y=j(H,B),W=b.find_path(Y.map,"start","end"),X=[];for(let $=1;$<W.length-1;$++)X.push(Y.table[W[$]].node);return r.fromArray(R(X))},r.rawSplit=function(z){return r.fromArray(A(z,w.isKanjiModeEnabled()))}})(Hf)),Hf}var bx;function y8(){if(bx)return jf;bx=1;const r=ra(),t=b1(),n=r8(),o=s8(),u=i8(),d=o8(),p=a8(),w=s2(),b=u8(),y=d8(),_=h8(),A=sa(),k=w8();function R(Y,W){const X=Y.size,$=d.getPositions(W);for(let Q=0;Q<$.length;Q++){const ue=$[Q][0],ae=$[Q][1];for(let te=-1;te<=7;te++)if(!(ue+te<=-1||X<=ue+te))for(let fe=-1;fe<=7;fe++)ae+fe<=-1||X<=ae+fe||(te>=0&&te<=6&&(fe===0||fe===6)||fe>=0&&fe<=6&&(te===0||te===6)||te>=2&&te<=4&&fe>=2&&fe<=4?Y.set(ue+te,ae+fe,!0,!0):Y.set(ue+te,ae+fe,!1,!0))}}function D(Y){const W=Y.size;for(let X=8;X<W-8;X++){const $=X%2===0;Y.set(X,6,$,!0),Y.set(6,X,$,!0)}}function j(Y,W){const X=u.getPositions(W);for(let $=0;$<X.length;$++){const Q=X[$][0],ue=X[$][1];for(let ae=-2;ae<=2;ae++)for(let te=-2;te<=2;te++)ae===-2||ae===2||te===-2||te===2||ae===0&&te===0?Y.set(Q+ae,ue+te,!0,!0):Y.set(Q+ae,ue+te,!1,!0)}}function M(Y,W){const X=Y.size,$=y.getEncodedBits(W);let Q,ue,ae;for(let te=0;te<18;te++)Q=Math.floor(te/3),ue=te%3+X-8-3,ae=($>>te&1)===1,Y.set(Q,ue,ae,!0),Y.set(ue,Q,ae,!0)}function V(Y,W,X){const $=Y.size,Q=_.getEncodedBits(W,X);let ue,ae;for(ue=0;ue<15;ue++)ae=(Q>>ue&1)===1,ue<6?Y.set(ue,8,ae,!0):ue<8?Y.set(ue+1,8,ae,!0):Y.set($-15+ue,8,ae,!0),ue<8?Y.set(8,$-ue-1,ae,!0):ue<9?Y.set(8,15-ue-1+1,ae,!0):Y.set(8,15-ue-1,ae,!0);Y.set($-8,8,1,!0)}function z(Y,W){const X=Y.size;let $=-1,Q=X-1,ue=7,ae=0;for(let te=X-1;te>0;te-=2)for(te===6&&te--;;){for(let fe=0;fe<2;fe++)if(!Y.isReserved(Q,te-fe)){let ee=!1;ae<W.length&&(ee=(W[ae]>>>ue&1)===1),Y.set(Q,te-fe,ee),ue--,ue===-1&&(ae++,ue=7)}if(Q+=$,Q<0||X<=Q){Q-=$,$=-$;break}}}function B(Y,W,X){const $=new n;X.forEach(function(fe){$.put(fe.mode.bit,4),$.put(fe.getLength(),A.getCharCountIndicator(fe.mode,Y)),fe.write($)});const Q=r.getSymbolTotalCodewords(Y),ue=w.getTotalCodewordsCount(Y,W),ae=(Q-ue)*8;for($.getLengthInBits()+4<=ae&&$.put(0,4);$.getLengthInBits()%8!==0;)$.putBit(0);const te=(ae-$.getLengthInBits())/8;for(let fe=0;fe<te;fe++)$.put(fe%2?17:236,8);return U($,Y,W)}function U(Y,W,X){const $=r.getSymbolTotalCodewords(W),Q=w.getTotalCodewordsCount(W,X),ue=$-Q,ae=w.getBlocksCount(W,X),te=$%ae,fe=ae-te,ee=Math.floor($/ae),Ae=Math.floor(ue/ae),_e=Ae+1,le=ee-Ae,ce=new b(le);let he=0;const K=new Array(ae),pe=new Array(ae);let Be=0;const Ve=new Uint8Array(Y.buffer);for(let qe=0;qe<ae;qe++){const Ke=qe<fe?Ae:_e;K[qe]=Ve.slice(he,he+Ke),pe[qe]=ce.encode(K[qe]),he+=Ke,Be=Math.max(Be,Ke)}const Ee=new Uint8Array($);let we=0,Ce,Re;for(Ce=0;Ce<Be;Ce++)for(Re=0;Re<ae;Re++)Ce<K[Re].length&&(Ee[we++]=K[Re][Ce]);for(Ce=0;Ce<le;Ce++)for(Re=0;Re<ae;Re++)Ee[we++]=pe[Re][Ce];return Ee}function H(Y,W,X,$){let Q;if(Array.isArray(Y))Q=k.fromArray(Y);else if(typeof Y=="string"){let ee=W;if(!ee){const Ae=k.rawSplit(Y);ee=y.getBestVersionForData(Ae,X)}Q=k.fromString(Y,ee||40)}else throw new Error("Invalid data");const ue=y.getBestVersionForData(Q,X);if(!ue)throw new Error("The amount of data is too big to be stored in a QR Code");if(!W)W=ue;else if(W<ue)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ue+`.
`);const ae=B(W,X,Q),te=r.getSymbolSize(W),fe=new o(te);return R(fe,W),D(fe),j(fe,W),V(fe,X,0),W>=7&&M(fe,W),z(fe,ae),isNaN($)&&($=p.getBestMask(fe,V.bind(null,fe,X))),p.applyMask($,fe),V(fe,X,$),{modules:fe,version:W,errorCorrectionLevel:X,maskPattern:$,segments:Q}}return jf.create=function(W,X){if(typeof W>"u"||W==="")throw new Error("No input text");let $=t.M,Q,ue;return typeof X<"u"&&($=t.from(X.errorCorrectionLevel,t.M),Q=y.from(X.version),ue=p.from(X.maskPattern),X.toSJISFunc&&r.setToSJISFunction(X.toSJISFunc)),H(W,Q,$,ue)},jf}var Zf={},Qf={},Cx;function a2(){return Cx||(Cx=1,(function(r){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let o=n.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+n);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(d){return[d,d]}))),o.length===6&&o.push("F","F");const u=parseInt(o.join(""),16);return{r:u>>24&255,g:u>>16&255,b:u>>8&255,a:u&255,hex:"#"+o.slice(0,6).join("")}}r.getOptions=function(o){o||(o={}),o.color||(o.color={});const u=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,d=o.width&&o.width>=21?o.width:void 0,p=o.scale||4;return{width:d,scale:d?4:p,margin:u,color:{dark:t(o.color.dark||"#000000ff"),light:t(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},r.getScale=function(o,u){return u.width&&u.width>=o+u.margin*2?u.width/(o+u.margin*2):u.scale},r.getImageWidth=function(o,u){const d=r.getScale(o,u);return Math.floor((o+u.margin*2)*d)},r.qrToImageData=function(o,u,d){const p=u.modules.size,w=u.modules.data,b=r.getScale(p,d),y=Math.floor((p+d.margin*2)*b),_=d.margin*b,A=[d.color.light,d.color.dark];for(let k=0;k<y;k++)for(let R=0;R<y;R++){let D=(k*y+R)*4,j=d.color.light;if(k>=_&&R>=_&&k<y-_&&R<y-_){const M=Math.floor((k-_)/b),V=Math.floor((R-_)/b);j=A[w[M*p+V]?1:0]}o[D++]=j.r,o[D++]=j.g,o[D++]=j.b,o[D]=j.a}}})(Qf)),Qf}var Ex;function v8(){return Ex||(Ex=1,(function(r){const t=a2();function n(u,d,p){u.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=p,d.width=p,d.style.height=p+"px",d.style.width=p+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(d,p,w){let b=w,y=p;typeof b>"u"&&(!p||!p.getContext)&&(b=p,p=void 0),p||(y=o()),b=t.getOptions(b);const _=t.getImageWidth(d.modules.size,b),A=y.getContext("2d"),k=A.createImageData(_,_);return t.qrToImageData(k.data,d,b),n(A,y,_),A.putImageData(k,0,0),y},r.renderToDataURL=function(d,p,w){let b=w;typeof b>"u"&&(!p||!p.getContext)&&(b=p,p=void 0),b||(b={});const y=r.render(d,p,b),_=b.type||"image/png",A=b.rendererOpts||{};return y.toDataURL(_,A.quality)}})(Zf)),Zf}var Jf={},Sx;function b8(){if(Sx)return Jf;Sx=1;const r=a2();function t(u,d){const p=u.a/255,w=d+'="'+u.hex+'"';return p<1?w+" "+d+'-opacity="'+p.toFixed(2).slice(1)+'"':w}function n(u,d,p){let w=u+d;return typeof p<"u"&&(w+=" "+p),w}function o(u,d,p){let w="",b=0,y=!1,_=0;for(let A=0;A<u.length;A++){const k=Math.floor(A%d),R=Math.floor(A/d);!k&&!y&&(y=!0),u[A]?(_++,A>0&&k>0&&u[A-1]||(w+=y?n("M",k+p,.5+R+p):n("m",b,0),b=0,y=!1),k+1<d&&u[A+1]||(w+=n("h",_),_=0)):b++}return w}return Jf.render=function(d,p,w){const b=r.getOptions(p),y=d.modules.size,_=d.modules.data,A=y+b.margin*2,k=b.color.light.a?"<path "+t(b.color.light,"fill")+' d="M0 0h'+A+"v"+A+'H0z"/>':"",R="<path "+t(b.color.dark,"stroke")+' d="'+o(_,y,b.margin)+'"/>',D='viewBox="0 0 '+A+" "+A+'"',M='<svg xmlns="http://www.w3.org/2000/svg" '+(b.width?'width="'+b.width+'" height="'+b.width+'" ':"")+D+' shape-rendering="crispEdges">'+k+R+`</svg>
`;return typeof w=="function"&&w(null,M),M},Jf}var _x;function C8(){if(_x)return Fa;_x=1;const r=n8(),t=y8(),n=v8(),o=b8();function u(d,p,w,b,y){const _=[].slice.call(arguments,1),A=_.length,k=typeof _[A-1]=="function";if(!k&&!r())throw new Error("Callback required as last argument");if(k){if(A<2)throw new Error("Too few arguments provided");A===2?(y=w,w=p,p=b=void 0):A===3&&(p.getContext&&typeof y>"u"?(y=b,b=void 0):(y=b,b=w,w=p,p=void 0))}else{if(A<1)throw new Error("Too few arguments provided");return A===1?(w=p,p=b=void 0):A===2&&!p.getContext&&(b=w,w=p,p=void 0),new Promise(function(R,D){try{const j=t.create(w,b);R(d(j,p,b))}catch(j){D(j)}})}try{const R=t.create(w,b);y(null,d(R,p,b))}catch(R){y(R)}}return Fa.create=t.create,Fa.toCanvas=u.bind(null,n.render),Fa.toDataURL=u.bind(null,n.renderToDataURL),Fa.toString=u.bind(null,function(d,p,w){return o.render(d,w)}),Fa}var E8=C8();const l2=hc(E8);function S8({agendaId:r}){const[t,n]=I.useState(""),[o,u]=I.useState(!1),[d,p]=I.useState(!1),[w,b]=I.useState(!1),[y,_]=I.useState(null),[A,k]=I.useState(null),[R,D]=I.useState([]),[j,M]=I.useState([]),[V,z]=I.useState([]),[B,U]=I.useState(!0),[H,Y]=I.useState(!1),[W,X]=I.useState(!1),[$,Q]=I.useState(!1),[ue,ae]=I.useState(null),[te,fe]=I.useState(!1),[ee,Ae]=I.useState(""),[_e,le]=I.useState(new Date),[ce,he]=I.useState(!1),K=I.useRef(null);I.useEffect(()=>((async()=>{console.log("=".repeat(80)),console.log("[STANDALONE CHECK-IN] Page loaded for agenda ID:",r),console.log("[STANDALONE CHECK-IN] Initializing with strict event isolation..."),console.log("=".repeat(80)),await pe(),await Be()})(),()=>{We()}),[r]),I.useEffect(()=>{y&&Be()},[y?.id]),I.useEffect(()=>{const Oe=Se=>{console.log("[AUTO-REFRESH] Storage event detected:",Se.key),(Se.key==="event_participants"||Se.key==="event_agenda")&&(console.log("[AUTO-REFRESH] Data changed, refreshing with event scope..."),y?.eventId&&console.log("[SECURITY] Auto-refresh scoped to event:",y.eventId),Be(),Se.key==="event_agenda"&&pe())},rt=Se=>{console.log("[AUTO-REFRESH] Custom participantsUpdated event detected"),y?.eventId&&console.log("[SECURITY] Custom event refresh scoped to event:",y.eventId),Be()};window.addEventListener("storage",Oe),window.addEventListener("participantsUpdated",rt);const J=setInterval(()=>{console.log("[AUTO-REFRESH] Polling for updates..."),y?.eventId&&console.log("[SECURITY] Poll refresh scoped to event:",y.eventId),Be()},3e3);return()=>{window.removeEventListener("storage",Oe),window.removeEventListener("participantsUpdated",rt),clearInterval(J)}},[y?.eventId]),I.useEffect(()=>{if(y&&R.length>0){const Oe=R.filter(rt=>rt.attendance&&rt.attendance.some(J=>J.agendaItem===y.title));z(Oe)}},[y,R]);const pe=async()=>{U(!0);try{console.log("[SECURITY] Fetching agenda item by ID:",r);const{data:Oe,error:rt}=await Je.from("agenda_items").select("*").eq("id",r).single();if(rt||!Oe){console.error("[SECURITY] Agenda item not found:",r),ae("Agenda item not found");return}if(!Oe.eventId){console.error("[SECURITY] CRITICAL: Agenda item missing eventId!",Oe),ae("Invalid agenda configuration - missing event association");return}console.log("[SECURITY] Agenda item loaded. Event ID:",Oe.eventId);const J={id:Oe.id,eventId:Oe.eventId,title:Oe.title,description:Oe.description,startTime:Oe.startTime,endTime:Oe.endTime,location:Oe.location,createdAt:Oe.createdAt,order:0};_(J);const{data:Se,error:Le}=await Je.from("events").select("*").eq("id",J.eventId).single();if(Se&&!Le){console.log("[SECURITY] Event details loaded:",Se.name);const bt={id:Se.id,name:Se.name,startDate:Se.startDate,endDate:Se.endDate,location:Se.location,description:Se.description,createdAt:Se.createdAt,customFields:Se.customFields||[],branding:Se.branding};k(bt)}else console.warn("[SECURITY] Event not found for eventId:",J.eventId)}catch(Oe){console.error("[SECURITY] Error fetching agenda:",Oe),ae("Failed to load agenda")}finally{U(!1)}},Be=async()=>{try{if(!y){console.warn("[SECURITY] Cannot fetch participants - agenda not loaded yet");return}if(!y.eventId){console.error("[SECURITY] CRITICAL: Cannot fetch participants - agenda missing eventId!"),ae("Security error: Invalid event configuration");return}console.log("[SECURITY] Fetching participants ONLY for event:",y.eventId);const{data:Oe,error:rt}=await Je.from("participants").select("*").eq("eventId",y.eventId);if(rt)throw new Error(`Failed to fetch participants: ${rt.message}`);const J=Oe||[];console.log("[SECURITY] Successfully filtered participants by eventId:",{eventId:y.eventId,participantCount:J.length,agendaTitle:y.title});const Se=J.filter(bt=>bt.eventId!==y.eventId);Se.length>0?console.error("[SECURITY] CRITICAL: Found participants from other events!",Se):console.log("[SECURITY]  All participants verified to belong to event:",y.eventId),D(J),le(new Date);const Le=J.filter(bt=>bt.attendance&&bt.attendance.some(ke=>ke.agendaItem===y.title));console.log("[SECURITY] Checked-in count for this session:",Le.length),console.log("[SECURITY] Data isolation summary:",{eventId:y.eventId,eventName:A?.name||"Loading...",sessionTitle:y.title,totalParticipantsInEvent:J.length,checkedInToThisSession:Le.length,dataIsolationVerified:Se.length===0}),console.log("=".repeat(80)),z(Le)}catch(Oe){console.error("[SECURITY] Error fetching participants:",Oe),ae("Failed to load participants")}},Ve=async Oe=>{if(!(!A||!y))try{let rt=null,J={size:"CR80",customWidth:100,customHeight:150,backgroundColor:"#ffffff",backgroundImageUrl:void 0,backgroundImageFit:"cover",logoUrl:void 0};if(A.badge_template){const $t=A.badge_template;J={size:$t.size||"CR80",customWidth:$t.customWidth,customHeight:$t.customHeight,backgroundColor:$t.backgroundColor||"#ffffff",backgroundImageUrl:$t.backgroundImageUrl,backgroundImageFit:$t.backgroundImageFit||"cover",logoUrl:$t.logoUrl},rt=$t.components}else{const $t=localStorage.getItem(`badge_canvas_${A.id}`);rt=$t?JSON.parse($t):null}const Se=await l2.toDataURL(Oe.id,{width:300,margin:1}),Le=window.open("","_blank");if(!Le){alert("Please allow popups to print badges");return}const ke={CR80:{width:85.6,height:53.98},A6:{width:105,height:148},A7:{width:74,height:105},custom:{width:J.customWidth||100,height:J.customHeight||150}}[J.size||"CR80"],Xt=ke.width,lt=ke.height;let mt="",Vn="";if(rt&&rt.length>0){const $t=J.backgroundImageUrl?`background-image: url(${J.backgroundImageUrl});
             background-size: ${J.backgroundImageFit||"cover"};
             background-position: center;
             background-repeat: no-repeat;`:"";Vn=`
          .badge {
            width: ${Xt}mm;
            height: ${lt}mm;
            background-color: ${J.backgroundColor};
            ${$t}
            box-sizing: border-box;
            position: relative;
            border: 1px solid #ddd;
          }
          .badge-component {
            position: absolute;
            overflow: hidden;
          }
        `,rt.filter(Et=>Et.enabled).forEach(Et=>{const It=`
              left: ${Et.x}%;
              top: ${Et.y}%;
              width: ${Et.width}%;
              height: ${Et.height}%;
              font-size: ${Et.fontSize||16}px;
              font-family: ${Et.fontFamily||"sans-serif"};
              font-weight: ${Et.fontWeight||"normal"};
              font-style: ${Et.fontStyle||"normal"};
              text-align: ${Et.textAlign||"left"};
              color: ${Et.color||"#000000"};
              display: flex;
              align-items: center;
            `;if(Et.type==="eventName")mt+=`<div class="badge-component" style="${It}">${A.name}</div>`;else if(Et.type==="field"&&Et.fieldName){const sn=Et.fieldName.startsWith("custom_")?Oe.customData?.[Et.fieldName]:Oe[Et.fieldName];mt+=`
                <div class="badge-component" style="${It}">
                  <div style="width: 100%;">
                    <div style="opacity: 0.6; font-size: 0.7em;">${Et.label}</div>
                    <div>${sn||"-"}</div>
                  </div>
                </div>
              `}else if(Et.type==="qrcode")mt+=`
                <div class="badge-component" style="${It} justify-content: center;">
                  <img src="${Se}" style="width: 100%; height: 100%; object-fit: contain;" />
                </div>
              `;else if(Et.type==="logo"){const sn=J.logoUrl||A.branding?.logoUrl;sn&&(mt+=`
                  <div class="badge-component" style="${It} justify-content: center;">
                    <img src="${sn}" style="width: 100%; height: 100%; object-fit: contain;" />
                  </div>
                `)}else Et.type==="customText"&&(mt+=`<div class="badge-component" style="${It}">${Et.customText||"Custom Text"}</div>`)})}else{const $t={small:{title:"14px",text:"12px"},medium:{title:"18px",text:"14px"},large:{title:"24px",text:"18px"}},Et={small:"60px",medium:"80px",large:"100px"};Vn=`
          .badge {
            width: ${Xt}mm;
            height: ${lt}mm;
            background-color: ${J.backgroundColor};
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            // @ts-ignore - alignment property from legacy schema
            align-items: ${J.alignment==="left"?"flex-start":J.alignment==="right"?"flex-end":"center"};
            // @ts-ignore
            text-align: ${J.alignment};
            border: 1px solid #ddd;
          }
        `,(J.components||[]).filter(It=>It.enabled).sort((It,sn)=>It.order-sn.order).forEach(It=>{if(It.type==="eventName")mt+=`<div style="font-size: ${$t[J.fontSize||"medium"].title}; font-weight: bold; margin: 8px 0;">${A.name}</div>`;else if(It.type==="field"&&It.fieldName){const sn=It.fieldName.startsWith("custom_")?Oe.customData?.[It.fieldName]:Oe[It.fieldName];mt+=`
                <div style="margin: 8px 0;">
                  <div style="font-size: ${$t[J.fontSize||"medium"].text}; opacity: 0.7;">${It.label}</div>
                  <div style="font-size: ${$t[J.fontSize||"medium"].text};">${sn||"-"}</div>
                </div>
              `}else It.type==="qrcode"?mt+=`<img src="${Se}" style="width: ${Et[J.qrCodeSize||"medium"]}; height: ${Et[J.qrCodeSize||"medium"]}; margin: 8px 0;" />`:It.type==="logo"&&J.logoUrl&&(mt+=`<img src="${J.logoUrl}" style="max-width: 100px; max-height: 40px; object-fit: contain; margin: 8px 0;" />`)})}Le.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Badge - ${Oe.name}</title>
            <style>
              @media print {
                @page {
                  size: ${Xt}mm ${lt}mm;
                  margin: 0;
                }
                body {
                  margin: 0;
                  padding: 0;
                }
              }
              body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
              }
              ${Vn}
            </style>
          </head>
          <body>
            <div class="badge">
              ${mt}
            </div>
            <script>
              window.onload = () => {
                setTimeout(() => {
                  window.print();
                  window.close();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `),Le.document.close()}catch(rt){console.error("Error printing badge:",rt),alert("Failed to print badge")}},Ee=()=>{if(!A)return;const Oe=new URL(window.location.origin+window.location.pathname);Oe.searchParams.set("designer",A.id),Oe.searchParams.set("from",`checkin=${r}`),window.open(Oe.toString(),"_blank","noopener")},we=Oe=>{if(n(Oe),!Oe.trim()){M([]);return}const rt=Oe.toLowerCase(),J=R.filter(Se=>Se.name?.toLowerCase().includes(rt)||Se.email?.toLowerCase().includes(rt)||Se.company?.toLowerCase().includes(rt));console.log("Search results:",J),M(J)},Ce=()=>{u(!0),n(""),M([])},Re=()=>{b(!0),setTimeout(()=>Ke(),300)},qe=()=>{We(),b(!1)},Ke=async()=>{if(H){console.log("[SCANNER] Camera already active");return}console.log("[SCANNER] Starting camera...");try{K.current||(console.log("[SCANNER] Initializing Html5Qrcode"),K.current=new t8("qr-reader-standalone"));const Oe={fps:10,qrbox:{width:250,height:250},aspectRatio:1};console.log("[SCANNER] Config:",Oe),await K.current.start({facingMode:"environment"},Oe,async rt=>{console.log("[SCANNER] QR Code detected:",rt),X(!0),await We(),setTimeout(async()=>{X(!1),await Ct(rt)},1500)},rt=>{rt&&!rt.includes("NotFoundException")&&console.log("[SCANNER] Scan error:",rt)}),Y(!0),console.log("[SCANNER] Camera started successfully")}catch(Oe){console.error("[SCANNER] Error starting camera:",Oe),alert("Failed to start camera. Please check camera permissions and try again."),Y(!1)}},We=async()=>{if(K.current){try{await K.current.getState()===2&&await K.current.stop()}catch(Oe){console.error("Error stopping camera:",Oe)}Y(!1)}},Ct=async Oe=>{if(!y){console.error("[SECURITY] Cannot check in - agenda not loaded");return}if(!y.eventId){console.error("[SECURITY] CRITICAL: Cannot check in - agenda missing eventId!"),alert("Security error: Invalid event configuration");return}Q(!0);try{const rt=Oe.trim();console.log("[SECURITY] Attempting check-in for participant:",rt),console.log("[SECURITY] Event context:",{eventId:y.eventId,agendaTitle:y.title,agendaId:y.id});const{data:J,error:Se}=await Je.from("participants").select("*").eq("id",rt).eq("eventId",y.eventId).single();if(Se||!J)throw console.error("[SECURITY] Participant not found. Searched for ID:",rt),console.log("[SECURITY] Available participant IDs in this event:",R.map(ke=>ke.id)),new Error(`Participant not found with ID: ${rt}`);const Le=J;if(console.log("[SECURITY] Found participant:",Le),Le.eventId!==y.eventId)throw console.error("[SECURITY] CRITICAL: Attempted cross-event check-in!",{participantEventId:Le.eventId,agendaEventId:y.eventId,participantId:rt,participantName:Le.name}),new Error("Security violation: Participant does not belong to this event");if(console.log("[SECURITY] Security check passed - participant belongs to event:",y.eventId),Le.attendance?.some(ke=>ke.agendaItem===y.title))Ae(`${Le.name} is already checked in!`),fe(!0);else{const ke=[...Le.attendance||[],{agendaItem:y.title,timestamp:new Date().toISOString()}];console.log("[SECURITY] Recording attendance for participant in event:",y.eventId);const{error:Xt}=await Je.from("participants").update({attendance:ke}).eq("id",rt);if(Xt)throw new Error(`Failed to record attendance: ${Xt.message}`);Ae(` Check-in successful for ${Le.name}`),fe(!0),ce&&setTimeout(()=>{Ve(Le)},500)}await Be(),setTimeout(()=>{b(!1),u(!1)},1500)}catch(rt){console.error("[LOCAL] Error recording attendance:",rt),alert(rt.message||"Failed to record attendance. Please try again.")}finally{Q(!1)}},nt=Oe=>Oe?new Date(Oe).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",Wt=Oe=>Oe?new Date(Oe).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"";return B?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-white",children:[c.jsx(Nr,{className:"h-12 w-12 animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-lg",children:"Loading check-in page..."})]})}):ue||!y?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-400 via-red-500 to-red-600 flex items-center justify-center p-6",children:c.jsxs("div",{className:"text-center text-white max-w-md",children:[c.jsx(Zo,{className:"h-16 w-16 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl mb-2",children:"Security Error"}),c.jsx("p",{className:"text-lg opacity-90 mb-4",children:ue||"Agenda not found"}),c.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-sm",children:c.jsx("p",{className:"opacity-90",children:"This check-in page requires proper event association. The session may have been deleted or is missing required configuration."})})]})}):y&&!y.eventId?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-400 via-orange-500 to-orange-600 flex items-center justify-center p-6",children:c.jsxs("div",{className:"text-center text-white max-w-md",children:[c.jsx(Zo,{className:"h-16 w-16 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl mb-2",children:"Configuration Error"}),c.jsx("p",{className:"text-lg opacity-90 mb-4",children:"This session is not associated with any event"}),c.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-sm",children:c.jsx("p",{className:"opacity-90",children:"Please contact the event administrator. This session needs to be properly configured with an event association before check-ins can be performed."})})]})}):c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 p-6",children:[A&&c.jsx("div",{className:"max-w-2xl mx-auto mb-4",children:c.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-white border border-white/30",children:c.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[c.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full animate-pulse"}),c.jsx("span",{className:"opacity-90",children:"Event:"}),c.jsx("span",{className:"font-semibold",children:A.name}),c.jsx("span",{className:"mx-2 opacity-50",children:""}),c.jsxs("span",{className:"text-xs opacity-75",children:["ID: ",A.id]})]})})}),c.jsxs("div",{className:"max-w-2xl mx-auto text-center text-white mb-12",children:[c.jsx("h1",{className:"text-4xl mb-4",children:y.title}),c.jsxs("p",{className:"text-lg opacity-90 mb-2",children:[nt(y.startTime),y.endTime&&` - ${Wt(y.endTime)}`]}),y.location&&c.jsx("p",{className:"text-base opacity-80",children:y.location})]}),c.jsx("div",{className:"max-w-md mx-auto mb-6",children:c.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx($E,{className:"h-4 w-4 text-white"}),c.jsx($e,{htmlFor:"auto-print",className:"text-white text-sm",children:"Auto-Print Badge on Check-In"})]}),c.jsx(e2,{id:"auto-print",checked:ce,onCheckedChange:he})]}),c.jsxs(Ne,{variant:"outline",size:"sm",onClick:Ee,className:"w-full bg-white/10 hover:bg-white/20 text-white border-white/30",children:[c.jsx(JE,{className:"mr-2 h-4 w-4"}),"Design Badge Template"]})]})}),c.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[c.jsxs(Ne,{onClick:Ce,className:"w-full h-16 bg-gray-900 hover:bg-gray-800 text-white text-lg",size:"lg",children:[c.jsx($0,{className:"mr-3 h-6 w-6"}),"Search"]}),c.jsxs(Ne,{onClick:Re,className:"w-full h-16 bg-gray-900 hover:bg-gray-800 text-white text-lg",size:"lg",children:[c.jsx(ow,{className:"mr-3 h-6 w-6"}),"QR Scan"]}),c.jsx("div",{className:"text-white text-center text-sm mt-6 space-y-2",children:c.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-4 py-3 border border-white/20",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[c.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full"}),c.jsx("div",{className:"opacity-75 text-xs",children:"Secure Event Scope Active"})]}),c.jsx("div",{className:"font-semibold",children:A?.name||"Loading..."}),c.jsxs("div",{className:"opacity-75 mt-2",children:["Total Registered: ",R.length," participants"]}),y?.eventId&&c.jsxs("div",{className:"text-xs opacity-50 mt-2 font-mono",children:["Event ID: ",y.eventId.substring(0,8),"..."]})]})}),c.jsxs(Ne,{onClick:()=>p(!0),variant:"outline",className:"w-full h-16 bg-white/10 hover:bg-white/20 text-white border-white/30 text-lg backdrop-blur-sm",size:"lg",children:[c.jsx(eE,{className:"mr-3 h-6 w-6"}),"View Dashboard"]})]}),c.jsxs("div",{className:"max-w-2xl mx-auto mt-16 text-center text-white/70 text-sm space-y-2",children:[c.jsxs("p",{children:[" ",V.length," participants checked in"]}),c.jsxs("p",{className:"flex items-center justify-center gap-2 text-xs",children:[c.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Auto-updating  Last updated: ",_e.toLocaleTimeString()]})]}),c.jsx(Qn,{open:o,onOpenChange:u,children:c.jsxs(Jn,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[c.jsx(or,{children:c.jsx(ar,{children:"Search Participants"})}),c.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[c.jsx("div",{className:"flex gap-2",children:c.jsx(tt,{placeholder:"Search by name, email, or company...",value:t,onChange:Oe=>we(Oe.target.value),autoFocus:!0})}),c.jsx("div",{className:"flex-1 overflow-y-auto border rounded-lg",children:j.length>0?c.jsxs(oo,{children:[c.jsx(ao,{children:c.jsxs(mr,{children:[c.jsx(Nt,{children:"Name"}),c.jsx(Nt,{children:"Company"}),c.jsx(Nt,{children:"Status"}),c.jsx(Nt,{className:"text-right",children:"Action"})]})}),c.jsx(lo,{children:j.map(Oe=>{const rt=Oe.attendance?.some(J=>J.agendaItem===y.title);return c.jsxs(mr,{children:[c.jsx(_t,{children:c.jsxs("div",{children:[c.jsx("div",{children:Oe.name}),c.jsx("div",{className:"text-sm text-muted-foreground",children:Oe.email})]})}),c.jsx(_t,{children:Oe.company||"-"}),c.jsx(_t,{children:rt?c.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[c.jsx(Wa,{className:"h-4 w-4"}),"Checked In"]}):c.jsx("span",{className:"text-muted-foreground",children:"Not Checked In"})}),c.jsx(_t,{className:"text-right",children:!rt&&c.jsx(Ne,{size:"sm",onClick:()=>Ct(Oe.id),disabled:$,children:$?c.jsx(Nr,{className:"h-4 w-4 animate-spin"}):"Check In"})})]},Oe.id)})})]}):c.jsx("div",{className:"text-center py-12 text-muted-foreground",children:t?c.jsxs("div",{children:[c.jsxs("p",{className:"mb-2",children:['No participants found matching "',t,'"']}),c.jsxs("p",{className:"text-sm",children:["Total participants: ",R.length]})]}):c.jsx("p",{children:"Start typing to search participants"})})})]})]})}),c.jsx(Qn,{open:w,onOpenChange:Oe=>!Oe&&qe(),children:c.jsxs(Jn,{className:"max-w-lg",children:[c.jsx(or,{children:c.jsx(ar,{children:"Scan QR Code"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{id:"qr-reader-standalone",className:`${H?"block":"hidden"} rounded-lg overflow-hidden border-2 border-primary relative z-20`,style:{minHeight:"300px"}}),W&&c.jsx("div",{className:"absolute inset-0 bg-green-500/90 rounded-lg flex items-center justify-center z-50 animate-in fade-in",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 animate-in zoom-in duration-500",children:c.jsx(Wa,{className:"w-16 h-16 text-green-500"})}),c.jsx("p",{className:"text-white text-xl",children:"QR Code Detected!"})]})}),H&&!W&&c.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64",children:c.jsxs("div",{className:"relative w-full h-full",children:[c.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-green-500 rounded-tl-lg"}),c.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-green-500 rounded-tr-lg"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-green-500 rounded-bl-lg"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-green-500 rounded-br-lg"})]})}),c.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:c.jsx("p",{className:"text-white bg-black/50 inline-block px-4 py-2 rounded-lg text-sm",children:"Position QR code within the frame"})})]}),!H&&!W&&c.jsxs("div",{className:"h-64 flex flex-col items-center justify-center bg-muted rounded-lg gap-3 p-4",children:[c.jsx(Bm,{className:"h-12 w-12 text-muted-foreground opacity-30"}),c.jsx("p",{className:"text-muted-foreground text-sm",children:"Camera will start automatically"}),c.jsxs(Ne,{onClick:Ke,variant:"default",size:"sm",children:[c.jsx(Bm,{className:"mr-2 h-4 w-4"}),"Start Camera Manually"]})]})]}),c.jsxs(Ne,{onClick:qe,variant:"outline",className:"w-full",children:[c.jsx(oc,{className:"mr-2 h-4 w-4"}),"Close"]})]})]})}),c.jsx(Qn,{open:d,onOpenChange:p,children:c.jsxs(Jn,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[c.jsx(or,{children:c.jsxs(ar,{children:["Check-In Dashboard - ",y.title]})}),c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[A&&c.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[c.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),c.jsx("span",{className:"text-blue-700",children:"Event:"}),c.jsx("span",{className:"font-semibold text-blue-900",children:A.name}),c.jsx("span",{className:"mx-2 text-blue-400",children:""}),c.jsx("span",{className:"text-xs text-blue-600",children:"Isolated Data View"})]})}),c.jsx("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-3xl mb-1",children:V.length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Checked In"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-3xl mb-1",children:R.length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Registered (This Event)"})]})]})}),V.length===0?c.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[c.jsx(Wa,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),c.jsx("p",{children:"No participants checked in yet"})]}):c.jsx("div",{className:"border rounded-lg",children:c.jsxs(oo,{children:[c.jsx(ao,{children:c.jsxs(mr,{children:[c.jsx(Nt,{children:"Name"}),c.jsx(Nt,{children:"Email"}),c.jsx(Nt,{children:"Company"}),c.jsx(Nt,{children:"Position"}),c.jsx(Nt,{children:"Check-In Time"})]})}),c.jsx(lo,{children:V.map(Oe=>{const rt=Oe.attendance.find(J=>J.agendaItem===y.title);return c.jsxs(mr,{children:[c.jsx(_t,{children:Oe.name}),c.jsx(_t,{className:"text-sm",children:Oe.email}),c.jsx(_t,{children:Oe.company||"-"}),c.jsx(_t,{children:Oe.position||"-"}),c.jsx(_t,{children:rt&&c.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[c.jsx(gd,{className:"h-3 w-3"}),new Date(rt.timestamp).toLocaleTimeString()]})})]},Oe.id)})})]})})]})]})}),c.jsx(Qn,{open:te,onOpenChange:fe,children:c.jsx(Jn,{className:"max-w-md",children:c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-in zoom-in duration-500",children:c.jsx(Wa,{className:"w-12 h-12 text-green-600"})}),c.jsx("h3",{className:"text-2xl mb-2",children:"Check-In Successful!"}),c.jsx("p",{className:"text-lg text-muted-foreground",children:ee}),c.jsx(Ne,{onClick:()=>fe(!1),className:"mt-6",size:"lg",children:"Close"})]})})}),c.jsx("style",{children:`
      #qr-reader-standalone video, 
      #qr-reader-standalone canvas {
        width: 100% !important;
        height: auto !important;
        object-fit: cover; /* This makes the video cover the box nicely */
        min-height: 300px; /* Match your container's min-height */
      }
    `})]})}function _8({eventId:r}){const[t,n]=I.useState(null),[o,u]=I.useState(null),[d,p]=I.useState(!0),[w,b]=I.useState(!1),[y,_]=I.useState(null),[A,k]=I.useState(!1),[R,D]=I.useState({name:"",email:"",phone:"",company:"",position:"",customData:{}});I.useEffect(()=>{j()},[r]);const j=async()=>{p(!0);try{const{data:$,error:Q}=await Je.from("events").select("*").eq("id",r).single();if(Q||!$){_("Event not found. Please check the registration link."),p(!1);return}const ue={id:$.id,name:$.name,startDate:$.startDate,endDate:$.endDate,location:$.location,description:$.description,createdAt:$.createdAt,customFields:$.customFields||[],branding:$.branding};n(ue);const ae=$.branding||{logoUrl:"",headerText:"",primaryColor:"#7C3AED",backgroundColor:"#FFFFFF",fontFamily:"sans-serif"};u(ae),console.log("[REGISTRATION] Loaded event:",ue.name),console.log("[REGISTRATION] Branding settings:",ae),p(!1)}catch($){console.error("[REGISTRATION] Error loading event:",$),_("Failed to load registration form. Please try again."),p(!1)}},M=($,Q)=>{D(ue=>({...ue,[$]:Q}))},V=($,Q)=>{D(ue=>({...ue,customData:{...ue.customData,[$]:Q}}))},z=()=>{D({name:"",email:"",phone:"",company:"",position:"",customData:{}}),k(!1),_(null),window.scrollTo({top:0,behavior:"smooth"})},B=()=>{if(!R.name.trim())return _("Please enter your name"),!1;if(!R.email.trim())return _("Please enter your email"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R.email))return _("Please enter a valid email address"),!1;if(t?.customFields){for(const Q of t.customFields)if(Q.required&&!R.customData[Q.id])return _(`${Q.label} is required`),!1}return!0},U=async $=>{if($.preventDefault(),_(null),!!B()){b(!0);try{const ue={id:`part_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,eventId:r,name:R.name,email:R.email,phone:R.phone,company:R.company,position:R.position,registeredAt:new Date().toISOString(),attendance:[],customData:R.customData},{error:ae}=await Je.from("participants").insert([ue]);if(ae)throw new Error(`Failed to register: ${ae.message}`);console.log("[REGISTRATION] Participant registered:",ue.id),k(!0)}catch(Q){console.error("[REGISTRATION] Error submitting form:",Q),_(Q instanceof Error?Q.message:"Failed to submit registration. Please try again.")}finally{b(!1)}}};if(d)return c.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",style:{backgroundColor:"#f0f9ff"},children:c.jsx(ir,{className:"w-full max-w-2xl",children:c.jsx(gr,{className:"py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Nr,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading registration form..."})]})})})});if(y&&!t)return c.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",style:{backgroundColor:"#f0f9ff"},children:c.jsx(ir,{className:"w-full max-w-2xl",children:c.jsx(gr,{className:"py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Zo,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),c.jsx("h2",{className:"text-2xl mb-2",children:"Registration Unavailable"}),c.jsx("p",{className:"text-muted-foreground",children:y})]})})})});const H=t?.customFields?.sort(($,Q)=>$.order-Q.order)||[],Y=()=>{if(!o?.logoSize)return"h-16";switch(o.logoSize){case"small":return"h-12";case"medium":return"h-16";case"large":return"h-24";default:return"h-16"}},W=()=>{if(!o?.logoAlignment)return"justify-center";switch(o.logoAlignment){case"left":return"justify-start";case"center":return"justify-center";case"right":return"justify-end";default:return"justify-center"}},X=()=>{if(!o?.fontFamily)return"font-sans";switch(o.fontFamily){case"sans-serif":return"font-sans";case"serif":return"font-serif";case"monospace":return"font-mono";default:return"font-sans"}};return c.jsxs("div",{className:`min-h-screen py-12 px-6 ${X()}`,style:{backgroundColor:o?.backgroundColor||"#f0f9ff"},children:[c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsx(ir,{className:"mb-6",children:c.jsxs(Br,{className:"text-center",children:[o?.logoUrl&&c.jsx("div",{className:`flex ${W()} mb-4`,children:c.jsx("img",{src:o.logoUrl,alt:"Event Logo",className:`${Y()} object-contain`})}),o?.customHeader&&c.jsx("p",{className:"text-lg mb-2",style:{color:o.primaryColor},children:o.customHeader}),c.jsx(Fr,{className:"text-3xl",children:t?.name}),c.jsx("div",{className:"text-muted-foreground text-base mt-2",children:c.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[t?.startDate&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(sc,{className:"h-4 w-4"}),c.jsx("span",{children:new Date(t.startDate).toLocaleDateString()})]}),t?.location&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(W0,{className:"h-4 w-4"}),c.jsx("span",{children:t.location})]})]})}),t?.description&&c.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:t.description})]})}),c.jsxs(ir,{children:[c.jsxs(Br,{children:[c.jsx(Fr,{children:"Register Now"}),c.jsx(Yo,{children:"Please fill out the form below to register"})]}),c.jsxs(gr,{children:[c.jsx("style",{children:`
              .registration-form label:has(+ input[required])::after,
              .registration-form label:has(+ textarea[required])::after,
              .registration-form label:has(+ select[required])::after {
                content: ' *';
                color: ${o?.primaryColor||"#dc2626"};
              }
            `}),c.jsxs("form",{onSubmit:U,className:"space-y-6 registration-form",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"BASIC INFORMATION"}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"name",children:"Full Name"}),c.jsx(tt,{id:"name",value:R.name,onChange:$=>M("name",$.target.value),placeholder:"Enter your full name",required:!0})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"email",children:"Email Address"}),c.jsx(tt,{id:"email",type:"email",value:R.email,onChange:$=>M("email",$.target.value),placeholder:"your.email@example.com",required:!0})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"phone",children:"Phone Number"}),c.jsx(tt,{id:"phone",type:"tel",value:R.phone,onChange:$=>M("phone",$.target.value),placeholder:"+1 (555) 000-0000"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"company",children:"Company"}),c.jsx(tt,{id:"company",value:R.company,onChange:$=>M("company",$.target.value),placeholder:"Your company name"})]}),c.jsxs("div",{children:[c.jsx($e,{htmlFor:"position",children:"Position/Title"}),c.jsx(tt,{id:"position",value:R.position,onChange:$=>M("position",$.target.value),placeholder:"Your job title"})]})]}),H.length>0&&c.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[c.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"ADDITIONAL INFORMATION"}),H.map($=>c.jsxs("div",{children:[c.jsxs($e,{htmlFor:$.id,children:[$.label," ",$.required&&"*"]}),$.type==="textarea"?c.jsx(ho,{id:$.id,value:R.customData[$.id]||"",onChange:Q=>V($.id,Q.target.value),required:$.required}):$.type==="select"?c.jsxs("select",{id:$.id,value:R.customData[$.id]||"",onChange:Q=>V($.id,Q.target.value),required:$.required,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[c.jsx("option",{value:"",children:"Select..."}),$.options?.map(Q=>c.jsx("option",{value:Q,children:Q},Q))]}):c.jsx(tt,{id:$.id,type:$.type,value:R.customData[$.id]||"",onChange:Q=>V($.id,Q.target.value),required:$.required})]},$.id))]}),y&&c.jsxs("div",{className:"bg-destructive/10 text-destructive p-3 rounded-lg flex items-center gap-2",children:[c.jsx(Zo,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:y})]}),c.jsx(Ne,{type:"submit",className:"w-full",size:"lg",disabled:w,style:o?.primaryColor?{backgroundColor:o.primaryColor,borderColor:o.primaryColor}:void 0,children:w?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Complete Registration"})]})]})]}),c.jsx("p",{className:"text-center text-sm text-muted-foreground mt-6",children:"By registering, you agree to receive event-related communications."})]}),c.jsx(Qn,{open:A,onOpenChange:$=>!$&&z(),children:c.jsxs(Jn,{className:"sm:max-w-md",onInteractOutside:$=>$.preventDefault(),onEscapeKeyDown:z,children:[c.jsxs(or,{className:"text-center",children:[c.jsx("div",{className:"flex justify-center mb-4",children:o?.logoUrl&&c.jsx("img",{src:o.logoUrl,alt:"Event Logo",className:"h-12 object-contain"})}),c.jsx("div",{className:"flex justify-center mb-4",children:c.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{backgroundColor:o?.primaryColor?`${o.primaryColor}20`:"#dcfce7"},children:c.jsx(Wa,{className:"h-10 w-10",style:{color:o?.primaryColor||"#16a34a"}})})}),c.jsx(ar,{className:"text-2xl text-center",children:"Registration Successful!"}),c.jsxs(yi,{className:"text-center text-base pt-2",children:["Thank you for registering for ",c.jsx("strong",{children:t?.name}),".",c.jsx("br",{}),c.jsx("br",{}),"You will receive an email shortly containing your QR code and further event details."]})]}),c.jsx(ro,{className:"sm:justify-center pt-4",children:c.jsx(Ne,{onClick:z,className:"w-full sm:w-auto",size:"lg",style:o?.primaryColor?{backgroundColor:o.primaryColor,borderColor:o.primaryColor}:void 0,children:"Register Another Participant"})})]})})]})}var Un=function(){return Un=Object.assign||function(r){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(r[u]=t[u])}return r},Un.apply(this,arguments)},Ax={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Nx={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},$u={width:"20px",height:"20px",position:"absolute",zIndex:1},A8={top:Un(Un({},Ax),{top:"-5px"}),right:Un(Un({},Nx),{left:void 0,right:"-5px"}),bottom:Un(Un({},Ax),{top:void 0,bottom:"-5px"}),left:Un(Un({},Nx),{left:"-5px"}),topRight:Un(Un({},$u),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Un(Un({},$u),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Un(Un({},$u),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Un(Un({},$u),{left:"-10px",top:"-10px",cursor:"nw-resize"})},N8=I.memo(function(r){var t=r.onResizeStart,n=r.direction,o=r.children,u=r.replaceStyles,d=r.className,p=I.useCallback(function(y){t(y,n)},[t,n]),w=I.useCallback(function(y){t(y,n)},[t,n]),b=I.useMemo(function(){return Un(Un({position:"absolute",userSelect:"none"},A8[n]),u??{})},[u,n]);return c.jsx("div",{className:d||void 0,style:b,onMouseDown:p,onTouchStart:w,children:o})}),I8=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},r(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Gs=function(){return Gs=Object.assign||function(r){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(r[u]=t[u])}return r},Gs.apply(this,arguments)},T8={width:"auto",height:"auto"},Hu=function(r,t,n){return Math.max(Math.min(r,n),t)},Ix=function(r,t,n){var o=Math.round(r/t);return o*t+n*(o-1)},Ua=function(r,t){return new RegExp(r,"i").test(t)},Gu=function(r){return!!(r.touches&&r.touches.length)},R8=function(r){return!!((r.clientX||r.clientX===0)&&(r.clientY||r.clientY===0))},Tx=function(r,t,n){n===void 0&&(n=0);var o=t.reduce(function(d,p,w){return Math.abs(p-r)<Math.abs(t[d]-r)?w:d},0),u=Math.abs(t[o]-r);return n===0||u<n?t[o]:r},e0=function(r){return r=r.toString(),r==="auto"||r.endsWith("px")||r.endsWith("%")||r.endsWith("vh")||r.endsWith("vw")||r.endsWith("vmax")||r.endsWith("vmin")?r:"".concat(r,"px")},qu=function(r,t,n,o){if(r&&typeof r=="string"){if(r.endsWith("px"))return Number(r.replace("px",""));if(r.endsWith("%")){var u=Number(r.replace("%",""))/100;return t*u}if(r.endsWith("vw")){var u=Number(r.replace("vw",""))/100;return n*u}if(r.endsWith("vh")){var u=Number(r.replace("vh",""))/100;return o*u}}return r},k8=function(r,t,n,o,u,d,p){return o=qu(o,r.width,t,n),u=qu(u,r.height,t,n),d=qu(d,r.width,t,n),p=qu(p,r.height,t,n),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof u>"u"?void 0:Number(u),minWidth:typeof d>"u"?void 0:Number(d),minHeight:typeof p>"u"?void 0:Number(p)}},j8=function(r){return Array.isArray(r)?r:[r,r]},O8=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Rx="__resizable_base__",P8=(function(r){I8(t,r);function t(n){var o,u,d,p,w=r.call(this,n)||this;return w.ratio=1,w.resizable=null,w.parentLeft=0,w.parentTop=0,w.resizableLeft=0,w.resizableRight=0,w.resizableTop=0,w.resizableBottom=0,w.targetLeft=0,w.targetTop=0,w.delta={width:0,height:0},w.appendBase=function(){if(!w.resizable||!w.window)return null;var b=w.parentNode;if(!b)return null;var y=w.window.document.createElement("div");return y.style.width="100%",y.style.height="100%",y.style.position="absolute",y.style.transform="scale(0, 0)",y.style.left="0",y.style.flex="0 0 100%",y.classList?y.classList.add(Rx):y.className+=Rx,b.appendChild(y),y},w.removeBase=function(b){var y=w.parentNode;y&&y.removeChild(b)},w.state={isResizing:!1,width:(u=(o=w.propsSize)===null||o===void 0?void 0:o.width)!==null&&u!==void 0?u:"auto",height:(p=(d=w.propsSize)===null||d===void 0?void 0:d.height)!==null&&p!==void 0?p:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},w.onResizeStart=w.onResizeStart.bind(w),w.onMouseMove=w.onMouseMove.bind(w),w.onMouseUp=w.onMouseUp.bind(w),w}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||T8},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var n=0,o=0;if(this.resizable&&this.window){var u=this.resizable.offsetWidth,d=this.resizable.offsetHeight,p=this.resizable.style.position;p!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:u,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:d,this.resizable.style.position=p}return{width:n,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var n=this,o=this.props.size,u=function(w){var b;if(typeof n.state[w]>"u"||n.state[w]==="auto")return"auto";if(n.propsSize&&n.propsSize[w]&&(!((b=n.propsSize[w])===null||b===void 0)&&b.toString().endsWith("%"))){if(n.state[w].toString().endsWith("%"))return n.state[w].toString();var y=n.getParentSize(),_=Number(n.state[w].toString().replace("px","")),A=_/y[w]*100;return"".concat(A,"%")}return e0(n.state[w])},d=o&&typeof o.width<"u"&&!this.state.isResizing?e0(o.width):u("width"),p=o&&typeof o.height<"u"&&!this.state.isResizing?e0(o.height):u("height");return{width:d,height:p}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var o=!1,u=this.parentNode.style.flexWrap;u!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var d={width:n.offsetWidth,height:n.offsetHeight};return o&&(this.parentNode.style.flexWrap=u),this.removeBase(n),d},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(n,o){var u=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===n&&(typeof u>"u"||u==="auto")?"auto":n},t.prototype.calculateNewMaxFromBoundary=function(n,o){var u=this.props.boundsByDirection,d=this.state.direction,p=u&&Ua("left",d),w=u&&Ua("top",d),b,y;if(this.props.bounds==="parent"){var _=this.parentNode;_&&(b=p?this.resizableRight-this.parentLeft:_.offsetWidth+(this.parentLeft-this.resizableLeft),y=w?this.resizableBottom-this.parentTop:_.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(b=p?this.resizableRight:this.window.innerWidth-this.resizableLeft,y=w?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(b=p?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),y=w?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return b&&Number.isFinite(b)&&(n=n&&n<b?n:b),y&&Number.isFinite(y)&&(o=o&&o<y?o:y),{maxWidth:n,maxHeight:o}},t.prototype.calculateNewSizeFromDirection=function(n,o){var u=this.props.scale||1,d=j8(this.props.resizeRatio||1),p=d[0],w=d[1],b=this.state,y=b.direction,_=b.original,A=this.props,k=A.lockAspectRatio,R=A.lockAspectRatioExtraHeight,D=A.lockAspectRatioExtraWidth,j=_.width,M=_.height,V=R||0,z=D||0;return Ua("right",y)&&(j=_.width+(n-_.x)*p/u,k&&(M=(j-z)/this.ratio+V)),Ua("left",y)&&(j=_.width-(n-_.x)*p/u,k&&(M=(j-z)/this.ratio+V)),Ua("bottom",y)&&(M=_.height+(o-_.y)*w/u,k&&(j=(M-V)*this.ratio+z)),Ua("top",y)&&(M=_.height-(o-_.y)*w/u,k&&(j=(M-V)*this.ratio+z)),{newWidth:j,newHeight:M}},t.prototype.calculateNewSizeFromAspectRatio=function(n,o,u,d){var p=this.props,w=p.lockAspectRatio,b=p.lockAspectRatioExtraHeight,y=p.lockAspectRatioExtraWidth,_=typeof d.width>"u"?10:d.width,A=typeof u.width>"u"||u.width<0?n:u.width,k=typeof d.height>"u"?10:d.height,R=typeof u.height>"u"||u.height<0?o:u.height,D=b||0,j=y||0;if(w){var M=(k-D)*this.ratio+j,V=(R-D)*this.ratio+j,z=(_-j)/this.ratio+D,B=(A-j)/this.ratio+D,U=Math.max(_,M),H=Math.min(A,V),Y=Math.max(k,z),W=Math.min(R,B);n=Hu(n,U,H),o=Hu(o,Y,W)}else n=Hu(n,_,A),o=Hu(o,k,R);return{newWidth:n,newHeight:o}},t.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var u=o.getBoundingClientRect();this.parentLeft=u.left*n,this.parentTop=u.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var d=this.props.bounds.getBoundingClientRect();this.targetLeft=d.left*n,this.targetTop=d.top*n}if(this.resizable){var p=this.resizable.getBoundingClientRect(),w=p.left,b=p.top,y=p.right,_=p.bottom;this.resizableLeft=w*n,this.resizableRight=y*n,this.resizableTop=b*n,this.resizableBottom=_*n}},t.prototype.onResizeStart=function(n,o){if(!(!this.resizable||!this.window)){var u=0,d=0;if(n.nativeEvent&&R8(n.nativeEvent)?(u=n.nativeEvent.clientX,d=n.nativeEvent.clientY):n.nativeEvent&&Gu(n.nativeEvent)&&(u=n.nativeEvent.touches[0].clientX,d=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var p=this.props.onResizeStart(n,o,this.resizable);if(p===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var w,b=this.window.getComputedStyle(this.resizable);if(b.flexBasis!=="auto"){var y=this.parentNode;if(y){var _=this.window.getComputedStyle(y).flexDirection;this.flexDir=_.startsWith("row")?"row":"column",w=b.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var A={original:{x:u,y:d,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Gs(Gs({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:o,flexBasis:w};this.setState(A)}},t.prototype.onMouseMove=function(n){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Gu(n))try{n.preventDefault(),n.stopPropagation()}catch{}var u=this.props,d=u.maxWidth,p=u.maxHeight,w=u.minWidth,b=u.minHeight,y=Gu(n)?n.touches[0].clientX:n.clientX,_=Gu(n)?n.touches[0].clientY:n.clientY,A=this.state,k=A.direction,R=A.original,D=A.width,j=A.height,M=this.getParentSize(),V=k8(M,this.window.innerWidth,this.window.innerHeight,d,p,w,b);d=V.maxWidth,p=V.maxHeight,w=V.minWidth,b=V.minHeight;var z=this.calculateNewSizeFromDirection(y,_),B=z.newHeight,U=z.newWidth,H=this.calculateNewMaxFromBoundary(d,p);this.props.snap&&this.props.snap.x&&(U=Tx(U,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(B=Tx(B,this.props.snap.y,this.props.snapGap));var Y=this.calculateNewSizeFromAspectRatio(U,B,{width:H.maxWidth,height:H.maxHeight},{width:w,height:b});if(U=Y.newWidth,B=Y.newHeight,this.props.grid){var W=Ix(U,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),X=Ix(B,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),$=this.props.snapGap||0,Q=$===0||Math.abs(W-U)<=$?W:U,ue=$===0||Math.abs(X-B)<=$?X:B;U=Q,B=ue}var ae={width:U-R.width,height:B-R.height};if(this.delta=ae,D&&typeof D=="string"){if(D.endsWith("%")){var te=U/M.width*100;U="".concat(te,"%")}else if(D.endsWith("vw")){var fe=U/this.window.innerWidth*100;U="".concat(fe,"vw")}else if(D.endsWith("vh")){var ee=U/this.window.innerHeight*100;U="".concat(ee,"vh")}}if(j&&typeof j=="string"){if(j.endsWith("%")){var te=B/M.height*100;B="".concat(te,"%")}else if(j.endsWith("vw")){var fe=B/this.window.innerWidth*100;B="".concat(fe,"vw")}else if(j.endsWith("vh")){var ee=B/this.window.innerHeight*100;B="".concat(ee,"vh")}}var Ae={width:this.createSizeForCssProperty(U,"width"),height:this.createSizeForCssProperty(B,"height")};this.flexDir==="row"?Ae.flexBasis=Ae.width:this.flexDir==="column"&&(Ae.flexBasis=Ae.height);var _e=this.state.width!==Ae.width,le=this.state.height!==Ae.height,ce=this.state.flexBasis!==Ae.flexBasis,he=_e||le||ce;he&&il.flushSync(function(){o.setState(Ae)}),this.props.onResize&&he&&this.props.onResize(n,k,this.resizable,ae)}},t.prototype.onMouseUp=function(n){var o,u,d=this.state,p=d.isResizing,w=d.direction;d.original,!(!p||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,w,this.resizable,this.delta),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(u=this.props.size.height)!==null&&u!==void 0?u:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Gs(Gs({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(n){var o,u;this.setState({width:(o=n.width)!==null&&o!==void 0?o:"auto",height:(u=n.height)!==null&&u!==void 0?u:"auto"})},t.prototype.renderResizer=function(){var n=this,o=this.props,u=o.enable,d=o.handleStyles,p=o.handleClasses,w=o.handleWrapperStyle,b=o.handleWrapperClass,y=o.handleComponent;if(!u)return null;var _=Object.keys(u).map(function(A){return u[A]!==!1?c.jsx(N8,{direction:A,onResizeStart:n.onResizeStart,replaceStyles:d&&d[A],className:p&&p[A],children:y&&y[A]?y[A]:null},A):null});return c.jsx("div",{className:b,style:w,children:_})},t.prototype.render=function(){var n=this,o=Object.keys(this.props).reduce(function(p,w){return O8.indexOf(w)!==-1||(p[w]=n.props[w]),p},{}),u=Gs(Gs(Gs({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(u.flexBasis=this.state.flexBasis);var d=this.props.as||"div";return c.jsxs(d,Gs({style:u,className:this.props.className},o,{ref:function(p){p&&(n.resizable=p)},children:[this.state.isResizing&&c.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t})(I.PureComponent),C1="Radio",[D8,c2]=ms(C1),[M8,L8]=D8(C1),u2=I.forwardRef((r,t)=>{const{__scopeRadio:n,name:o,checked:u=!1,required:d,disabled:p,value:w="on",onCheck:b,form:y,..._}=r,[A,k]=I.useState(null),R=tn(t,M=>k(M)),D=I.useRef(!1),j=A?y||!!A.closest("form"):!0;return c.jsxs(M8,{scope:n,checked:u,disabled:p,children:[c.jsx(kt.button,{type:"button",role:"radio","aria-checked":u,"data-state":g2(u),"data-disabled":p?"":void 0,disabled:p,value:w,..._,ref:R,onClick:Mt(r.onClick,M=>{u||b?.(),j&&(D.current=M.isPropagationStopped(),D.current||M.stopPropagation())})}),j&&c.jsx(f2,{control:A,bubbles:!D.current,name:o,value:w,checked:u,required:d,disabled:p,form:y,style:{transform:"translateX(-100%)"}})]})});u2.displayName=C1;var d2="RadioIndicator",h2=I.forwardRef((r,t)=>{const{__scopeRadio:n,forceMount:o,...u}=r,d=L8(d2,n);return c.jsx(mo,{present:o||d.checked,children:c.jsx(kt.span,{"data-state":g2(d.checked),"data-disabled":d.disabled?"":void 0,...u,ref:t})})});h2.displayName=d2;var B8="RadioBubbleInput",f2=I.forwardRef(({__scopeRadio:r,control:t,checked:n,bubbles:o=!0,...u},d)=>{const p=I.useRef(null),w=tn(p,d),b=Ad(n),y=_d(t);return I.useEffect(()=>{const _=p.current;if(!_)return;const A=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(A,"checked").set;if(b!==n&&R){const D=new Event("click",{bubbles:o});R.call(_,n),_.dispatchEvent(D)}},[b,n,o]),c.jsx(kt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...u,tabIndex:-1,ref:w,style:{...u.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});f2.displayName=B8;function g2(r){return r?"checked":"unchecked"}var F8=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],jd="RadioGroup",[U8]=ms(jd,[xd,c2]),m2=xd(),p2=c2(),[z8,V8]=U8(jd),x2=I.forwardRef((r,t)=>{const{__scopeRadioGroup:n,name:o,defaultValue:u,value:d,required:p=!1,disabled:w=!1,orientation:b,dir:y,loop:_=!0,onValueChange:A,...k}=r,R=m2(n),D=gc(y),[j,M]=Os({prop:d,defaultProp:u??null,onChange:A,caller:jd});return c.jsx(z8,{scope:n,name:o,required:p,disabled:w,value:j,onValueChange:M,children:c.jsx(sy,{asChild:!0,...R,orientation:b,dir:D,loop:_,children:c.jsx(kt.div,{role:"radiogroup","aria-required":p,"aria-orientation":b,"data-disabled":w?"":void 0,dir:D,...k,ref:t})})})});x2.displayName=jd;var w2="RadioGroupItem",y2=I.forwardRef((r,t)=>{const{__scopeRadioGroup:n,disabled:o,...u}=r,d=V8(w2,n),p=d.disabled||o,w=m2(n),b=p2(n),y=I.useRef(null),_=tn(t,y),A=d.value===u.value,k=I.useRef(!1);return I.useEffect(()=>{const R=j=>{F8.includes(j.key)&&(k.current=!0)},D=()=>k.current=!1;return document.addEventListener("keydown",R),document.addEventListener("keyup",D),()=>{document.removeEventListener("keydown",R),document.removeEventListener("keyup",D)}},[]),c.jsx(iy,{asChild:!0,...w,focusable:!p,active:A,children:c.jsx(u2,{disabled:p,required:d.required,checked:A,...b,...u,name:d.name,ref:_,onCheck:()=>d.onValueChange(u.value),onKeyDown:Mt(R=>{R.key==="Enter"&&R.preventDefault()}),onFocus:Mt(u.onFocus,()=>{k.current&&y.current?.click()})})})});y2.displayName=w2;var W8="RadioGroupIndicator",v2=I.forwardRef((r,t)=>{const{__scopeRadioGroup:n,...o}=r,u=p2(n);return c.jsx(h2,{...u,...o,ref:t})});v2.displayName=W8;var $8=x2,H8=y2,G8=v2;function q8({className:r,...t}){return c.jsx($8,{"data-slot":"radio-group",className:Ot("grid gap-3",r),...t})}function X8({className:r,...t}){return c.jsx(H8,{"data-slot":"radio-group-item",className:Ot("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...t,children:c.jsx(G8,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:c.jsx(fE,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var Od="Collapsible",[K8,b2]=ms(Od),[Y8,E1]=K8(Od),C2=I.forwardRef((r,t)=>{const{__scopeCollapsible:n,open:o,defaultOpen:u,disabled:d,onOpenChange:p,...w}=r,[b,y]=Os({prop:o,defaultProp:u??!1,onChange:p,caller:Od});return c.jsx(Y8,{scope:n,disabled:d,contentId:Ys(),open:b,onOpenToggle:I.useCallback(()=>y(_=>!_),[y]),children:c.jsx(kt.div,{"data-state":_1(b),"data-disabled":d?"":void 0,...w,ref:t})})});C2.displayName=Od;var E2="CollapsibleTrigger",S2=I.forwardRef((r,t)=>{const{__scopeCollapsible:n,...o}=r,u=E1(E2,n);return c.jsx(kt.button,{type:"button","aria-controls":u.contentId,"aria-expanded":u.open||!1,"data-state":_1(u.open),"data-disabled":u.disabled?"":void 0,disabled:u.disabled,...o,ref:t,onClick:Mt(r.onClick,u.onOpenToggle)})});S2.displayName=E2;var S1="CollapsibleContent",_2=I.forwardRef((r,t)=>{const{forceMount:n,...o}=r,u=E1(S1,r.__scopeCollapsible);return c.jsx(mo,{present:n||u.open,children:({present:d})=>c.jsx(Z8,{...o,ref:t,present:d})})});_2.displayName=S1;var Z8=I.forwardRef((r,t)=>{const{__scopeCollapsible:n,present:o,children:u,...d}=r,p=E1(S1,n),[w,b]=I.useState(o),y=I.useRef(null),_=tn(t,y),A=I.useRef(0),k=A.current,R=I.useRef(0),D=R.current,j=p.open||w,M=I.useRef(j),V=I.useRef(void 0);return I.useEffect(()=>{const z=requestAnimationFrame(()=>M.current=!1);return()=>cancelAnimationFrame(z)},[]),pr(()=>{const z=y.current;if(z){V.current=V.current||{transitionDuration:z.style.transitionDuration,animationName:z.style.animationName},z.style.transitionDuration="0s",z.style.animationName="none";const B=z.getBoundingClientRect();A.current=B.height,R.current=B.width,M.current||(z.style.transitionDuration=V.current.transitionDuration,z.style.animationName=V.current.animationName),b(o)}},[p.open,o]),c.jsx(kt.div,{"data-state":_1(p.open),"data-disabled":p.disabled?"":void 0,id:p.contentId,hidden:!j,...d,ref:_,style:{"--radix-collapsible-content-height":k?`${k}px`:void 0,"--radix-collapsible-content-width":D?`${D}px`:void 0,...r.style},children:j&&u})});function _1(r){return r?"open":"closed"}var Q8=C2,J8=S2,eR=_2,Ls="Accordion",tR=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[A1,nR,rR]=t1(Ls),[Pd]=ms(Ls,[rR,b2]),N1=b2(),A2=Bn.forwardRef((r,t)=>{const{type:n,...o}=r,u=o,d=o;return c.jsx(A1.Provider,{scope:r.__scopeAccordion,children:n==="multiple"?c.jsx(aR,{...d,ref:t}):c.jsx(oR,{...u,ref:t})})});A2.displayName=Ls;var[N2,sR]=Pd(Ls),[I2,iR]=Pd(Ls,{collapsible:!1}),oR=Bn.forwardRef((r,t)=>{const{value:n,defaultValue:o,onValueChange:u=()=>{},collapsible:d=!1,...p}=r,[w,b]=Os({prop:n,defaultProp:o??"",onChange:u,caller:Ls});return c.jsx(N2,{scope:r.__scopeAccordion,value:Bn.useMemo(()=>w?[w]:[],[w]),onItemOpen:b,onItemClose:Bn.useCallback(()=>d&&b(""),[d,b]),children:c.jsx(I2,{scope:r.__scopeAccordion,collapsible:d,children:c.jsx(T2,{...p,ref:t})})})}),aR=Bn.forwardRef((r,t)=>{const{value:n,defaultValue:o,onValueChange:u=()=>{},...d}=r,[p,w]=Os({prop:n,defaultProp:o??[],onChange:u,caller:Ls}),b=Bn.useCallback(_=>w((A=[])=>[...A,_]),[w]),y=Bn.useCallback(_=>w((A=[])=>A.filter(k=>k!==_)),[w]);return c.jsx(N2,{scope:r.__scopeAccordion,value:p,onItemOpen:b,onItemClose:y,children:c.jsx(I2,{scope:r.__scopeAccordion,collapsible:!0,children:c.jsx(T2,{...d,ref:t})})})}),[lR,Dd]=Pd(Ls),T2=Bn.forwardRef((r,t)=>{const{__scopeAccordion:n,disabled:o,dir:u,orientation:d="vertical",...p}=r,w=Bn.useRef(null),b=tn(w,t),y=nR(n),A=gc(u)==="ltr",k=Mt(r.onKeyDown,R=>{if(!tR.includes(R.key))return;const D=R.target,j=y().filter(X=>!X.ref.current?.disabled),M=j.findIndex(X=>X.ref.current===D),V=j.length;if(M===-1)return;R.preventDefault();let z=M;const B=0,U=V-1,H=()=>{z=M+1,z>U&&(z=B)},Y=()=>{z=M-1,z<B&&(z=U)};switch(R.key){case"Home":z=B;break;case"End":z=U;break;case"ArrowRight":d==="horizontal"&&(A?H():Y());break;case"ArrowDown":d==="vertical"&&H();break;case"ArrowLeft":d==="horizontal"&&(A?Y():H());break;case"ArrowUp":d==="vertical"&&Y();break}const W=z%V;j[W].ref.current?.focus()});return c.jsx(lR,{scope:n,disabled:o,direction:u,orientation:d,children:c.jsx(A1.Slot,{scope:n,children:c.jsx(kt.div,{...p,"data-orientation":d,ref:b,onKeyDown:o?void 0:k})})})}),fd="AccordionItem",[cR,I1]=Pd(fd),R2=Bn.forwardRef((r,t)=>{const{__scopeAccordion:n,value:o,...u}=r,d=Dd(fd,n),p=sR(fd,n),w=N1(n),b=Ys(),y=o&&p.value.includes(o)||!1,_=d.disabled||r.disabled;return c.jsx(cR,{scope:n,open:y,disabled:_,triggerId:b,children:c.jsx(Q8,{"data-orientation":d.orientation,"data-state":M2(y),...w,...u,ref:t,disabled:_,open:y,onOpenChange:A=>{A?p.onItemOpen(o):p.onItemClose(o)}})})});R2.displayName=fd;var k2="AccordionHeader",j2=Bn.forwardRef((r,t)=>{const{__scopeAccordion:n,...o}=r,u=Dd(Ls,n),d=I1(k2,n);return c.jsx(kt.h3,{"data-orientation":u.orientation,"data-state":M2(d.open),"data-disabled":d.disabled?"":void 0,...o,ref:t})});j2.displayName=k2;var P0="AccordionTrigger",O2=Bn.forwardRef((r,t)=>{const{__scopeAccordion:n,...o}=r,u=Dd(Ls,n),d=I1(P0,n),p=iR(P0,n),w=N1(n);return c.jsx(A1.ItemSlot,{scope:n,children:c.jsx(J8,{"aria-disabled":d.open&&!p.collapsible||void 0,"data-orientation":u.orientation,id:d.triggerId,...w,...o,ref:t})})});O2.displayName=P0;var P2="AccordionContent",D2=Bn.forwardRef((r,t)=>{const{__scopeAccordion:n,...o}=r,u=Dd(Ls,n),d=I1(P2,n),p=N1(n);return c.jsx(eR,{role:"region","aria-labelledby":d.triggerId,"data-orientation":u.orientation,...p,...o,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...r.style}})});D2.displayName=P2;function M2(r){return r?"open":"closed"}var uR=A2,dR=R2,hR=j2,fR=O2,gR=D2;function L2({...r}){return c.jsx(uR,{"data-slot":"accordion",...r})}function Xa({className:r,...t}){return c.jsx(dR,{"data-slot":"accordion-item",className:Ot("border-b last:border-b-0",r),...t})}function Ka({className:r,children:t,...n}){return c.jsx(hR,{className:"flex",children:c.jsxs(fR,{"data-slot":"accordion-trigger",className:Ot("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",r),...n,children:[t,c.jsx(z0,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function Ya({className:r,children:t,...n}){return c.jsx(gR,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:c.jsx("div",{className:Ot("pt-0 pb-4",r),children:t})})}const kx={CR80:{width:85.6,height:53.98,label:"CR80 (Credit Card)"},A6:{width:105,height:148,label:"A6"},A7:{width:74,height:105,label:"A7"},custom:{width:100,height:150,label:"Custom Size"}},jx=3.5,Zu=r=>{if(!r)return"#000000";const t=r.trim().toLowerCase();return t==="#fff"||t==="#ffffff"||t==="white"?"#000000":r};function mR({eventId:r,onClose:t}){return c.jsx(pR,{eventId:r,onClose:t})}function pR({eventId:r,onClose:t}){const[n,o]=I.useState(null),[u,d]=I.useState(null),[p,w]=I.useState([]),[b,y]=I.useState([]),[_,A]=I.useState(null),[k,R]=I.useState(!1),[D,j]=I.useState(!1),[M,V]=I.useState(!1),[z,B]=I.useState(1),U=()=>{t?t():window.history.back()};I.useEffect(()=>{r&&(Y(),X())},[r]);const H=Ee=>({...Ee,fontSize:Ee.fontSize??16,fontFamily:Ee.fontFamily??"sans-serif",fontWeight:Ee.fontWeight??"normal",fontStyle:Ee.fontStyle??"normal",textAlign:Ee.textAlign??"center",color:Zu(Ee.color)}),Y=()=>{const Ee=j0.getBadgeSettings(r),we={...Ee,backgroundColor:Ee.backgroundColor};o(we);const Ce=localStorage.getItem(`badge_canvas_${r}`);if(Ce)try{const Re=JSON.parse(Ce);y(Re.map(qe=>H(qe)))}catch(Re){console.error("Error loading canvas layout:",Re),W(we)}else W(we)},W=Ee=>{if(Ee.components){const we=Ee.components.map((Ce,Re)=>({...Ce,x:10,y:10+Re*15,width:Ce.type==="qrcode"?25:80,height:Ce.type==="qrcode"?25:10,fontSize:16,fontFamily:"sans-serif",fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#000000"})).map(H);y(we)}},X=async()=>{try{let Ee=Je.from("events").select("*").eq("id",r);const{data:we,error:Ce}=await Ee.single();if(Ce){console.warn("Event not found by ID, searching by legacy ID..."),console.error("Error loading event:",Ce);return}if(we){const Re={id:we.id,name:we.name,description:we.description,startDate:we.start_date,endDate:we.end_date,location:we.location,customFields:we.custom_fields||[],branding:we.branding||{}};d(Re);const qe=[{name:"name",label:"Name"},{name:"email",label:"Email"},{name:"phone",label:"Phone"},{name:"company",label:"Company"},{name:"position",label:"Position"}],Ke=(we.custom_fields||[]).map(We=>({name:We.id,label:We.label}));if(w([...qe,...Ke]),we.badge_template){const We=we.badge_template;o({size:We.size||"CR80",customWidth:We.customWidth||100,customHeight:We.customHeight||150,backgroundColor:We.backgroundColor||"#f3f4f6",backgroundImageUrl:We.backgroundImageUrl||"",backgroundImageFit:We.backgroundImageFit||"cover",logoUrl:We.logoUrl||"",showQR:!0,showAttendance:!1,textColor:"#000000",accentColor:"#000000",components:[]}),We.components&&y(We.components.map(Ct=>H(Ct)))}}}catch(Ee){console.error("Error loading event from Supabase:",Ee)}},$=async()=>{if(n){R(!0);try{const Ee={size:n.size||"CR80",customWidth:n.customWidth,customHeight:n.customHeight,backgroundColor:n.backgroundColor,backgroundImageUrl:n.backgroundImageUrl,backgroundImageFit:n.backgroundImageFit,logoUrl:n.logoUrl,components:b},{error:we}=await Je.from("events").update({badge_template:Ee}).eq("id",r);if(we)throw new Error(`Failed to save badge template: ${we.message}`);localStorage.setItem(`badge_canvas_${r}`,JSON.stringify(b)),j(!0),setTimeout(()=>{j(!1),t?.()},1500)}catch(Ee){console.error("Error saving badge settings:",Ee),alert("Failed to save badge settings: "+(Ee instanceof Error?Ee.message:"Unknown error"))}finally{R(!1)}}},Q=Ee=>{n&&o({...n,...Ee})},ue=(Ee,we,Ce,Re,qe)=>{if(!pe||!Be){console.warn("Canvas dimensions not ready; skipping component add.");return}const Ke=we??pe/2,We=Ce??Be/2,Ct=Ee==="qrcode"?25:60,nt=Ee==="qrcode"?25:12,Wt=Math.max(0,Math.min(100-Ct,Ke/pe*100)),Oe=Math.max(0,Math.min(100-nt,We/Be*100)),rt={id:Date.now().toString(),type:Ee,fieldName:Re,label:qe||Ee,enabled:!0,order:b.length,x:Wt,y:Oe,width:Ct,height:nt,fontSize:16,fontFamily:"sans-serif",fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#000000"},J=H(rt);y(Se=>[...Se,J]),A(J.id)},ae=(Ee,we)=>{y(Ce=>Ce.map(Re=>Re.id===Ee?{...Re,...we}:Re))},te=(Ee,we,Ce)=>{ue(Ee,pe/2,Be/2,we,Ce)},fe=Ee=>Math.min(2,Math.max(.5,Ee)),ee=Ee=>{const we=parseFloat(fe(Ee).toFixed(2));B(we)},Ae=Ee=>{ee(z+Ee)},_e=Ee=>{y(we=>we.filter(Ce=>Ce.id!==Ee)),_===Ee&&A(null)},le=async Ee=>{const we=Ee.target.files?.[0];if(we){if(!we.type.startsWith("image/")){alert("Please upload an image file (PNG or JPG)");return}if(we.size>5*1024*1024){alert("Image must be smaller than 5MB");return}V(!0);try{const Ce=new FileReader;Ce.onload=()=>{const Re=Ce.result;Q({backgroundImageUrl:Re})},Ce.readAsDataURL(we)}catch(Ce){console.error("Error uploading background image:",Ce),alert("Failed to upload image: "+(Ce.message||"Unknown error"))}finally{V(!1)}}};if(!n||!u)return c.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading Badge Designer..."})]})});const ce=kx[n.size||"CR80"],he=n.size==="custom"?n.customWidth||100:ce.width,K=n.size==="custom"?n.customHeight||100:ce.height,pe=he*jx,Be=K*jx,Ve=b.find(Ee=>Ee.id===_);return c.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[c.jsxs("header",{className:"flex-shrink-0 px-8 py-5 bg-gradient-to-r from-white to-purple-50 border-b border-purple-200 flex items-center justify-between shadow-sm",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-purple-800 bg-clip-text text-transparent",children:"Badge Designer"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.name})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ne,{onClick:U,variant:"outline",className:"px-6 h-10 border-gray-300 text-gray-700 hover:bg-gray-100",children:"Cancel"}),c.jsx(Ne,{onClick:$,disabled:k,className:"px-8 h-10 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white border-none font-semibold shadow-lg hover:shadow-xl transition-all",children:k?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Saving"]}):D?c.jsxs(c.Fragment,{children:[c.jsx(Wa,{className:"mr-2 h-5 w-5"}),"Saved!"]}):c.jsxs(c.Fragment,{children:[c.jsx(aw,{className:"mr-2 h-5 w-5"}),"Save Template"]})})]})]}),c.jsx("main",{className:"flex-1 min-h-0 px-6 py-6 overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:c.jsxs("div",{className:"mx-auto flex h-full min-h-0 gap-4",children:[c.jsxs("section",{className:"w-64 flex-shrink-0 flex flex-col overflow-hidden rounded-xl border border-purple-200 bg-white shadow-md hover:shadow-lg transition-shadow",children:[c.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200",children:c.jsx("h3",{className:"text-sm font-bold text-purple-900 uppercase tracking-wider",children:" Controls"})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:c.jsxs(L2,{type:"multiple",defaultValue:["size","palette"],className:"w-full",children:[c.jsxs(Xa,{value:"size",className:"border border-purple-100 rounded-lg hover:border-purple-300 transition-colors",children:[c.jsx(Ka,{className:"px-3 py-2 text-sm font-semibold text-purple-900 hover:bg-purple-50",children:"Badge Size"}),c.jsx(Ya,{className:"px-3 pt-2 pb-3",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx(q8,{value:n.size,onValueChange:Ee=>Q({size:Ee}),className:"space-y-2",children:Object.entries(kx).map(([Ee,{label:we}])=>c.jsxs("label",{htmlFor:`size-${Ee}`,className:"flex items-center gap-2 rounded-md px-2 py-1.5 text-sm text-gray-700 hover:bg-purple-50 cursor-pointer",children:[c.jsx(X8,{value:Ee,id:`size-${Ee}`}),c.jsx("span",{children:we})]},Ee))}),n.size==="custom"&&c.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-medium text-gray-600",children:"Width (mm)"}),c.jsx(tt,{type:"number",value:n.customWidth||100,onChange:Ee=>Q({customWidth:parseInt(Ee.target.value)}),className:"h-8 text-xs"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-medium text-gray-600",children:"Height (mm)"}),c.jsx(tt,{type:"number",value:n.customHeight||150,onChange:Ee=>Q({customHeight:parseInt(Ee.target.value)}),className:"h-8 text-xs"})]})]}),c.jsxs("div",{className:"text-xs text-purple-700 bg-purple-50 rounded px-2 py-1.5 font-medium",children:[he.toFixed(1),"mm  ",K.toFixed(1),"mm"]})]})})]}),c.jsxs(Xa,{value:"palette",className:"border border-purple-100 rounded-lg mt-2 hover:border-purple-300 transition-colors",children:[c.jsx(Ka,{className:"px-3 py-2 text-sm font-semibold text-purple-900 hover:bg-purple-50",children:" Component Palette"}),c.jsx(Ya,{className:"px-3 pt-2 pb-3",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Zl,{type:"eventName",label:"Event Name",onAdd:te,children:[c.jsx(df,{className:"h-4 w-4 mr-2 text-purple-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Event Name"})]}),c.jsxs(Zl,{type:"qrcode",label:"QR Code",onAdd:te,children:[c.jsx(ow,{className:"h-4 w-4 mr-2 text-purple-600"}),c.jsx("span",{className:"text-sm font-medium",children:"QR Code"})]}),c.jsxs(Zl,{type:"logo",label:"Event Logo",onAdd:te,children:[c.jsx(EE,{className:"h-4 w-4 mr-2 text-purple-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Event Logo"})]}),c.jsx("div",{className:"border-t border-purple-100 my-2"}),c.jsx("div",{className:"text-xs font-bold text-purple-700 uppercase tracking-wider my-2",children:" Participant Fields"}),p.map(Ee=>c.jsxs(Zl,{type:"field",fieldName:Ee.name,label:Ee.label,onAdd:te,children:[c.jsx(df,{className:"h-4 w-4 mr-2 text-purple-600"}),c.jsx("span",{className:"text-sm font-medium",children:Ee.label})]},Ee.name)),c.jsx("div",{className:"border-t border-purple-100 my-2"}),c.jsxs(Zl,{type:"customText",label:"Custom Text",onAdd:te,children:[c.jsx(df,{className:"h-4 w-4 mr-2 text-purple-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Custom Text"})]})]})})]}),c.jsxs(Xa,{value:"background",className:"border border-purple-100 rounded-lg mt-2 hover:border-purple-300 transition-colors",children:[c.jsx(Ka,{className:"px-3 py-2 text-sm font-semibold text-purple-900 hover:bg-purple-50",children:" Background"}),c.jsx(Ya,{className:"px-3 pt-2 pb-3",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-bold text-purple-700",children:"Color"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(tt,{type:"color",value:n.backgroundColor,onChange:Ee=>Q({backgroundColor:Ee.target.value}),className:"w-10 h-8 p-1 rounded border-2 border-purple-300"}),c.jsx(tt,{type:"text",value:n.backgroundColor,onChange:Ee=>Q({backgroundColor:Ee.target.value}),placeholder:"#ffffff",className:"h-8 text-xs flex-1 border-purple-200 focus:border-purple-500"})]})]}),c.jsx("div",{className:"border-t border-purple-100 pt-2"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-bold text-purple-700",children:"Image"}),c.jsxs(Ne,{variant:"outline",size:"sm",disabled:M,className:"h-8 text-xs w-full border-purple-300 text-purple-700 hover:bg-purple-50",onClick:()=>document.getElementById("bg-file-input")?.click(),children:[c.jsx(ic,{className:"h-3 w-3 mr-1"}),M?"Uploading":"Upload"]}),c.jsx("input",{id:"bg-file-input",type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:le,className:"hidden"})]}),n.backgroundImageUrl&&c.jsx(Ne,{variant:"outline",size:"sm",onClick:()=>Q({backgroundImageUrl:"",backgroundImageFit:"cover"}),className:"h-8 text-xs w-full text-red-600 border-red-200 hover:bg-red-50",children:"Remove Image"})]})})]})]})})]}),c.jsxs("section",{className:"flex-1 min-h-0 flex flex-col overflow-hidden rounded-xl border border-purple-200 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[c.jsxs("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200 flex items-center justify-between",children:[c.jsx("h2",{className:"text-sm font-bold text-purple-900 uppercase tracking-wider",children:" Canvas Preview"}),c.jsxs("div",{className:"flex items-center gap-2 bg-purple-100 rounded-full px-2 py-1 border border-purple-200",children:[c.jsx(Ne,{type:"button",size:"sm",variant:"ghost",onClick:()=>Ae(-.1),className:"h-6 w-6 p-0 text-purple-700 hover:bg-purple-200",children:c.jsx(LE,{className:"h-3 w-3"})}),c.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.05",value:z,onChange:Ee=>ee(parseFloat(Ee.target.value)),className:"w-24 accent-purple-600 h-2 rounded-full"}),c.jsx(Ne,{type:"button",size:"sm",variant:"ghost",onClick:()=>Ae(.1),className:"h-6 w-6 p-0 text-purple-700 hover:bg-purple-200",children:c.jsx(js,{className:"h-3 w-3"})}),c.jsxs("span",{className:"text-xs font-bold w-10 text-center text-purple-900",children:[Math.round(z*100),"%"]})]})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto bg-gradient-to-b from-purple-50 to-purple-100 p-6",children:c.jsx("div",{className:"relative transform transition-transform duration-200 ease-out shadow-2xl rounded-lg",style:{transform:`scale(${z})`,transformOrigin:"center"},children:c.jsx(xR,{width:pe,height:Be,backgroundColor:n.backgroundColor,backgroundImageUrl:n.backgroundImageUrl,backgroundImageFit:n.backgroundImageFit,components:b,selectedComponentId:_,onComponentSelect:A,onComponentMove:(Ee,we,Ce)=>ae(Ee,{x:we,y:Ce}),onComponentResize:(Ee,we,Ce)=>ae(Ee,{width:we,height:Ce}),event:u})})}),c.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-purple-100 border-t border-purple-200",children:c.jsxs("span",{className:"text-xs text-purple-900 font-bold",children:["Size: ",he.toFixed(1),"mm  ",K.toFixed(1),"mm"]})})]}),c.jsxs("section",{className:"w-64 flex-shrink-0 flex flex-col overflow-hidden rounded-xl border border-purple-200 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200",children:c.jsx("h3",{className:"text-sm font-bold text-purple-900 uppercase tracking-wider",children:" Component Settings"})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:Ve?c.jsx(yR,{component:Ve,onUpdate:Ee=>ae(Ve.id,Ee),onDelete:()=>_e(Ve.id),logoUrl:n.logoUrl,onLogoUrlChange:Ee=>Q({logoUrl:Ee})}):c.jsx("div",{className:"h-full flex items-center justify-center text-center",children:c.jsxs("div",{children:[c.jsx(FE,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Select a component on canvas to edit"})]})})})]})]})})]})}function Zl({type:r,fieldName:t,label:n,onAdd:o,children:u}){return c.jsx("button",{type:"button",onClick:()=>o(r,t,n),className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-purple-50 to-transparent border border-purple-200 rounded-lg hover:from-purple-100 hover:to-purple-50 hover:border-purple-400 hover:shadow-sm transition-all text-left text-sm font-semibold text-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-1 active:scale-95",children:u})}function xR({width:r,height:t,backgroundColor:n,backgroundImageUrl:o,backgroundImageFit:u="cover",components:d,selectedComponentId:p,onComponentSelect:w,onComponentMove:b,onComponentResize:y,event:_}){const A=I.useRef(null),k={width:`${r}px`,height:`${t}px`,backgroundColor:n};o&&(k.backgroundImage=`url(${o})`,k.backgroundSize=u,k.backgroundPosition="center",k.backgroundRepeat="no-repeat");const R={backgroundSize:"10px 10px",backgroundImage:"linear-gradient(to right, rgba(124, 58, 237, 0.2) 1px, transparent 1px), linear-gradient(to bottom, rgba(124, 58, 237, 0.2) 1px, transparent 1px)",opacity:.5},D=r/2,j=t/2;return c.jsxs("div",{ref:A,"data-badge-canvas":"true",className:"relative border-2 border-gray-400 shadow-2xl transition-all rounded-lg overflow-hidden bg-white cursor-default",style:k,onClick:M=>{M.stopPropagation(),w(null)},children:[c.jsx("div",{className:"absolute inset-0 pointer-events-none",style:R,"aria-hidden":"true"}),c.jsx("div",{className:"absolute pointer-events-none",style:{left:0,top:`${j/t*100}%`,width:"100%",height:"1px",backgroundColor:"rgba(200, 100, 255, 0.3)",borderTop:"1px dashed rgba(124, 58, 237, 0.4)"},"aria-hidden":"true"}),c.jsx("div",{className:"absolute pointer-events-none",style:{left:`${D/r*100}%`,top:0,width:"1px",height:"100%",backgroundColor:"rgba(200, 100, 255, 0.3)",borderLeft:"1px dashed rgba(124, 58, 237, 0.4)"},"aria-hidden":"true"}),d.map(M=>c.jsx(wR,{component:M,isSelected:p===M.id,canvasWidth:r,canvasHeight:t,onSelect:()=>w(M.id),onMove:b,onResize:y,event:_},M.id)),d.length===0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:c.jsxs("div",{className:"text-center text-gray-400",children:[c.jsx(js,{className:"h-10 w-10 mx-auto mb-3 opacity-30"}),c.jsx("p",{className:"text-sm font-medium",children:"Click components to add them"}),c.jsx("p",{className:"text-xs mt-1 opacity-70",children:"They will appear centered on the badge"})]})})]})}function wR({component:r,isSelected:t,canvasWidth:n,canvasHeight:o,onSelect:u,onMove:d,onResize:p,event:w}){const[b,y]=I.useState(""),[_,A]=I.useState(!1),[k,R]=I.useState({x:0,y:0}),D=I.useRef(null);I.useEffect(()=>{r.type==="qrcode"&&l2.toDataURL("SAMPLE-QR-CODE",{width:200,margin:1}).then(y)},[r.type]);const j=z=>{z.target.closest(".resize-handle")||(z.stopPropagation(),A(!0),R({x:z.clientX-r.x/100*n,y:z.clientY-r.y/100*o}))};I.useEffect(()=>{if(!_)return;const z=U=>{const H=(U.clientX-k.x)/n*100,Y=(U.clientY-k.y)/o*100;d(r.id,Math.max(0,Math.min(100-r.width,H)),Math.max(0,Math.min(100-r.height,Y)))},B=()=>{A(!1)};return document.addEventListener("mousemove",z),document.addEventListener("mouseup",B),()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",B)}},[_,k,n,o,r.id,r.width,r.height,d]);const M=(z,B,U,H)=>{const Y=U.offsetWidth/n*100,W=U.offsetHeight/o*100;p(r.id,Math.min(100,Y),Math.min(100,W))},V=()=>r.type==="eventName"?c.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:Zu(r.color)},children:r.customText&&r.customText.trim().length>0?r.customText:w.name}):r.type==="field"?c.jsxs("div",{className:"w-full h-full overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:Zu(r.color)},children:[c.jsx("div",{className:"opacity-60 text-xs",children:r.label}),c.jsxs("div",{children:["Sample ",r.label]})]}):r.type==="qrcode"&&b?c.jsx("div",{className:"w-full h-full flex items-center justify-center",children:c.jsx("img",{src:b,alt:"QR Code",className:"w-full h-full object-contain"})}):r.type==="logo"&&w.branding?.logoUrl?c.jsx("div",{className:"w-full h-full flex items-center justify-center",children:c.jsx("img",{src:w.branding.logoUrl,alt:"Logo",className:"w-full h-full object-contain"})}):r.type==="customText"?c.jsx("div",{className:"w-full h-full flex items-center overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:Zu(r.color)},children:r.customText||"Custom Text"}):null;return c.jsx(P8,{size:{width:`${r.width}%`,height:`${r.height}%`},onResizeStop:M,enable:{top:t,right:t,bottom:t,left:t,topRight:t,bottomRight:t,bottomLeft:t,topLeft:t},minWidth:"5%",minHeight:"3%",maxWidth:"100%",maxHeight:"100%",style:{position:"absolute",left:`${r.x}%`,top:`${r.y}%`,cursor:_?"grabbing":"grab"},className:`${t?"ring-2 ring-purple-500 ring-offset-2 shadow-lg":"hover:ring-1 hover:ring-purple-300"}`,handleClasses:{top:"resize-handle",right:"resize-handle",bottom:"resize-handle",left:"resize-handle",topRight:"resize-handle",bottomRight:"resize-handle",bottomLeft:"resize-handle",topLeft:"resize-handle"},children:c.jsxs("div",{ref:D,"data-component-id":r.id,className:"w-full h-full relative",onMouseDown:j,onClick:z=>{z.stopPropagation(),u()},children:[V(),t&&c.jsx("div",{className:"absolute -top-7 left-0 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-3 py-1 rounded-md text-xs whitespace-nowrap pointer-events-none shadow-md font-medium",children:r.label||r.type})]})})}function yR({component:r,onUpdate:t,onDelete:n,logoUrl:o,onLogoUrlChange:u}){const d=["field","eventName","customText"].includes(r.type),p=[...d?["text"]:[],"position",...r.type==="logo"?["logo"]:[]];return c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between border-b bg-gradient-to-r from-purple-50 to-blue-50 px-4 py-3",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Component Settings"}),c.jsx(Ne,{variant:"ghost",size:"sm",onClick:n,className:"h-7 w-7 p-0 text-rose-500 hover:bg-rose-50 hover:text-rose-600",children:c.jsx(na,{className:"h-3.5 w-3.5"})})]}),c.jsxs("div",{className:"px-4 py-4 space-y-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Component Type"}),c.jsx("p",{className:"text-sm font-semibold text-purple-700",children:r.label||r.type})]}),c.jsxs(L2,{type:"multiple",defaultValue:p,className:"flex flex-col gap-3",children:[d&&c.jsxs(Xa,{value:"text",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[c.jsx(Ka,{className:"px-3 text-sm font-semibold text-slate-700",children:"Text & Formatting"}),c.jsxs(Ya,{className:"px-3 max-h-\\[calc(100vh-360px)\\] overflow-y-auto space-y-4",children:[(r.type==="customText"||r.type==="eventName")&&c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:r.type==="eventName"?"Display Text Override":"Text Content"}),c.jsx(tt,{value:r.customText||"",onChange:w=>t({customText:w.target.value}),placeholder:r.type==="eventName"?"Leave blank to use event name":"Enter custom text",className:"h-9 text-sm"}),r.type==="eventName"&&c.jsx("p",{className:"text-[11px] text-slate-500",children:"Leaving this empty will display the event name automatically."})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Font Size"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tt,{type:"number",value:r.fontSize||16,onChange:w=>t({fontSize:parseInt(w.target.value)}),min:8,max:72,className:"h-9 text-sm"}),c.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"px"})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Font Family"}),c.jsxs(vi,{value:r.fontFamily||"sans-serif",onValueChange:w=>t({fontFamily:w}),children:[c.jsx(Ci,{className:"h-9 text-sm",children:c.jsx(bi,{})}),c.jsxs(Ei,{children:[c.jsx(Jt,{value:"sans-serif",children:"Sans Serif"}),c.jsx(Jt,{value:"serif",children:"Serif"}),c.jsx(Jt,{value:"monospace",children:"Monospace"}),c.jsx(Jt,{value:"Arial",children:"Arial"}),c.jsx(Jt,{value:"Times New Roman",children:"Times New Roman"}),c.jsx(Jt,{value:"Courier New",children:"Courier New"})]})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Style"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ne,{variant:r.fontWeight==="bold"?"default":"outline",size:"sm",onClick:()=>t({fontWeight:r.fontWeight==="bold"?"normal":"bold"}),className:`h-9 flex-1 ${r.fontWeight==="bold"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:c.jsx(s0,{className:"h-3.5 w-3.5"})}),c.jsx(Ne,{variant:r.fontStyle==="italic"?"default":"outline",size:"sm",onClick:()=>t({fontStyle:r.fontStyle==="italic"?"normal":"italic"}),className:`h-9 flex-1 ${r.fontStyle==="italic"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:c.jsx(i0,{className:"h-3.5 w-3.5"})})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Alignment"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ne,{variant:r.textAlign==="left"?"default":"outline",size:"sm",onClick:()=>t({textAlign:"left"}),className:`h-9 flex-1 ${r.textAlign==="left"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:c.jsx(UC,{className:"h-3.5 w-3.5"})}),c.jsx(Ne,{variant:r.textAlign==="center"?"default":"outline",size:"sm",onClick:()=>t({textAlign:"center"}),className:`h-9 flex-1 ${r.textAlign==="center"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:c.jsx(BC,{className:"h-3.5 w-3.5"})}),c.jsx(Ne,{variant:r.textAlign==="right"?"default":"outline",size:"sm",onClick:()=>t({textAlign:"right"}),className:`h-9 flex-1 ${r.textAlign==="right"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:c.jsx(VC,{className:"h-3.5 w-3.5"})})]})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Text Color"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(tt,{type:"color",value:r.color||"#1f2937",onChange:w=>t({color:w.target.value}),className:"w-12 h-9 p-1 rounded-lg border border-slate-200"}),c.jsx(tt,{type:"text",value:r.color||"#1f2937",onChange:w=>t({color:w.target.value}),placeholder:"#1f2937",className:"h-9 text-sm flex-1"})]})]})]})]}),c.jsxs(Xa,{value:"position",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[c.jsx(Ka,{className:"px-3 text-sm font-semibold text-slate-700",children:"Position & Size"}),c.jsxs(Ya,{className:"px-3 space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Position X (%)"}),c.jsx(tt,{type:"number",value:r.x.toFixed(1),onChange:w=>t({x:parseFloat(w.target.value)}),min:0,max:100,className:"h-9 text-sm"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Position Y (%)"}),c.jsx(tt,{type:"number",value:r.y.toFixed(1),onChange:w=>t({y:parseFloat(w.target.value)}),min:0,max:100,className:"h-9 text-sm"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Width (%)"}),c.jsx(tt,{type:"number",value:r.width.toFixed(1),onChange:w=>t({width:parseFloat(w.target.value)}),min:5,max:100,className:"h-9 text-sm"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Height (%)"}),c.jsx(tt,{type:"number",value:r.height.toFixed(1),onChange:w=>t({height:parseFloat(w.target.value)}),min:3,max:100,className:"h-9 text-sm"})]})]}),c.jsxs("div",{className:"flex items-center gap-3 border-t pt-3",children:[c.jsx(e2,{checked:r.enabled,onCheckedChange:w=>t({enabled:w})}),c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Show on badge"})]})]})]}),r.type==="logo"&&c.jsxs(Xa,{value:"logo",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[c.jsx(Ka,{className:"px-3 text-sm font-semibold text-slate-700",children:"Logo Options"}),c.jsxs(Ya,{className:"px-3 space-y-2",children:[c.jsx($e,{className:"text-xs font-semibold text-slate-600",children:"Logo URL"}),c.jsx(tt,{type:"url",value:o||"",onChange:w=>u(w.target.value),placeholder:"https://example.com/logo.png",className:"h-9 text-sm"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Or set in Event Branding settings."})]})]})]})]})]})}function vR(){const[r,t]=I.useState(null),[n,o]=I.useState(null),[u,d]=I.useState(!0),[p,w]=I.useState(null),[b,y]=I.useState(null),[_,A]=I.useState(null);I.useEffect(()=>{const M=new URLSearchParams(window.location.search),V=window.location.hash,z=M.get("designer");if(z){A(z),d(!1);return}const B=V.match(/^#\/designer\/(.+)$/);if(B&&B[1]){A(B[1]),d(!1);return}else z||A(null);const U=M.get("checkin");if(U){w(U),d(!1);return}const H=M.get("register");if(H){y(H),d(!1);return}const Y=V.match(/^#\/register\/(.+)$/);if(Y&&Y[1]){y(Y[1]),d(!1);return}const W=M.get("event");W&&o(W),(async()=>{try{const{data:{session:Q}}=await Je.auth.getSession();Q?.access_token&&t(Q.access_token)}catch(Q){console.error("Error checking session:",Q)}finally{d(!1)}})();const $=()=>{const Q=window.location.hash,ue=Q.match(/^#\/register\/(.+)$/),ae=Q.match(/^#\/designer\/(.+)$/);ue&&ue[1]?(y(ue[1]),A(null)):ae&&ae[1]?(A(ae[1]),y(null),w(null)):!Q||Q==="#/"||Q==="#"?(y(null),A(null)):(!Q||Q==="#/"||Q==="#")&&y(null)};return window.addEventListener("hashchange",$),()=>window.removeEventListener("hashchange",$)},[]);const k=M=>{t(M)},R=()=>{t(null),o(null);const M=new URL(window.location.href);M.searchParams.delete("event"),window.history.pushState({},"",M)},D=M=>{o(M);const V=new URL(window.location.href);V.searchParams.set("event",M),window.history.pushState({},"",V)},j=()=>{o(null);const M=new URL(window.location.href);M.searchParams.delete("event"),window.history.pushState({},"",M)};return u?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):p?c.jsx(S8,{agendaId:p}):b?c.jsx(_8,{eventId:b}):_?c.jsx(mR,{eventId:_,onClose:()=>{const M=new URL(window.location.href),V=M.searchParams.get("from");if(V&&V.startsWith("checkin=")){const z=V.replace("checkin=",""),B=new URL(window.location.origin+window.location.pathname);B.searchParams.set("checkin",z),window.location.replace(B.toString())}else if(V&&V.startsWith("admin=")){const z=new URL(window.location.origin+window.location.pathname);z.searchParams.set("event",_),z.searchParams.set("tab","branding"),window.location.replace(z.toString())}else M.searchParams.delete("designer"),M.searchParams.delete("from"),window.location.replace(M.origin+M.pathname)}}):r?n?c.jsx(bT,{eventId:n,accessToken:r,onLogout:R,onBackToEvents:j}):c.jsx(CT,{onEventSelected:D,onLogout:R}):c.jsx(R3,{onAuthenticated:k})}Lb.createRoot(document.getElementById("root")).render(c.jsx(vR,{}));
