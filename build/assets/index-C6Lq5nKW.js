function K0(r,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const d in o)if(d!=="default"&&!(d in r)){const u=Object.getOwnPropertyDescriptor(o,d);u&&Object.defineProperty(r,d,u.get?u:{enumerable:!0,get:()=>o[d]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const u of d)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function n(d){const u={};return d.integrity&&(u.integrity=d.integrity),d.referrerPolicy&&(u.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?u.credentials="include":d.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(d){if(d.ep)return;d.ep=!0;const u=n(d);fetch(d.href,u)}})();var Dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ac(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function yC(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var n=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var d=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(n,o,d.get?d:{enumerable:!0,get:function(){return r[o]}})}),n}var xf={exports:{}},cc={},wf={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function vC(){if(Fg)return Jt;Fg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),g=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.iterator;function T(re){return re===null||typeof re!="object"?null:(re=E&&re[E]||re["@@iterator"],typeof re=="function"?re:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,k={};function P(re,we,Ie){this.props=re,this.context=we,this.refs=k,this.updater=Ie||I}P.prototype.isReactComponent={},P.prototype.setState=function(re,we){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,we,"setState")},P.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function L(){}L.prototype=P.prototype;function U(re,we,Ie){this.props=re,this.context=we,this.refs=k,this.updater=Ie||I}var B=U.prototype=new L;B.constructor=U,O(B,P.prototype),B.isPureReactComponent=!0;var G=Array.isArray,ee=Object.prototype.hasOwnProperty,se={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function te(re,we,Ie){var Oe,ye={},Y=null,le=null;if(we!=null)for(Oe in we.ref!==void 0&&(le=we.ref),we.key!==void 0&&(Y=""+we.key),we)ee.call(we,Oe)&&!V.hasOwnProperty(Oe)&&(ye[Oe]=we[Oe]);var Ce=arguments.length-2;if(Ce===1)ye.children=Ie;else if(1<Ce){for(var De=Array(Ce),Ye=0;Ye<Ce;Ye++)De[Ye]=arguments[Ye+2];ye.children=De}if(re&&re.defaultProps)for(Oe in Ce=re.defaultProps,Ce)ye[Oe]===void 0&&(ye[Oe]=Ce[Oe]);return{$$typeof:r,type:re,key:Y,ref:le,props:ye,_owner:se.current}}function ne(re,we){return{$$typeof:r,type:re.type,key:we,ref:re.ref,props:re.props,_owner:re._owner}}function ce(re){return typeof re=="object"&&re!==null&&re.$$typeof===r}function oe(re){var we={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(Ie){return we[Ie]})}var H=/\/+/g;function W(re,we){return typeof re=="object"&&re!==null&&re.key!=null?oe(""+re.key):we.toString(36)}function de(re,we,Ie,Oe,ye){var Y=typeof re;(Y==="undefined"||Y==="boolean")&&(re=null);var le=!1;if(re===null)le=!0;else switch(Y){case"string":case"number":le=!0;break;case"object":switch(re.$$typeof){case r:case e:le=!0}}if(le)return le=re,ye=ye(le),re=Oe===""?"."+W(le,0):Oe,G(ye)?(Ie="",re!=null&&(Ie=re.replace(H,"$&/")+"/"),de(ye,we,Ie,"",function(Ye){return Ye})):ye!=null&&(ce(ye)&&(ye=ne(ye,Ie+(!ye.key||le&&le.key===ye.key?"":(""+ye.key).replace(H,"$&/")+"/")+re)),we.push(ye)),1;if(le=0,Oe=Oe===""?".":Oe+":",G(re))for(var Ce=0;Ce<re.length;Ce++){Y=re[Ce];var De=Oe+W(Y,Ce);le+=de(Y,we,Ie,De,ye)}else if(De=T(re),typeof De=="function")for(re=De.call(re),Ce=0;!(Y=re.next()).done;)Y=Y.value,De=Oe+W(Y,Ce++),le+=de(Y,we,Ie,De,ye);else if(Y==="object")throw we=String(re),Error("Objects are not valid as a React child (found: "+(we==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":we)+"). If you meant to render a collection of children, use an array instead.");return le}function X(re,we,Ie){if(re==null)return re;var Oe=[],ye=0;return de(re,Oe,"","",function(Y){return we.call(Ie,Y,ye++)}),Oe}function q(re){if(re._status===-1){var we=re._result;we=we(),we.then(function(Ie){(re._status===0||re._status===-1)&&(re._status=1,re._result=Ie)},function(Ie){(re._status===0||re._status===-1)&&(re._status=2,re._result=Ie)}),re._status===-1&&(re._status=0,re._result=we)}if(re._status===1)return re._result.default;throw re._result}var ie={current:null},z={transition:null},ue={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:z,ReactCurrentOwner:se};function be(){throw Error("act(...) is not supported in production builds of React.")}return Jt.Children={map:X,forEach:function(re,we,Ie){X(re,function(){we.apply(this,arguments)},Ie)},count:function(re){var we=0;return X(re,function(){we++}),we},toArray:function(re){return X(re,function(we){return we})||[]},only:function(re){if(!ce(re))throw Error("React.Children.only expected to receive a single React element child.");return re}},Jt.Component=P,Jt.Fragment=n,Jt.Profiler=d,Jt.PureComponent=U,Jt.StrictMode=o,Jt.Suspense=v,Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Jt.act=be,Jt.cloneElement=function(re,we,Ie){if(re==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+re+".");var Oe=O({},re.props),ye=re.key,Y=re.ref,le=re._owner;if(we!=null){if(we.ref!==void 0&&(Y=we.ref,le=se.current),we.key!==void 0&&(ye=""+we.key),re.type&&re.type.defaultProps)var Ce=re.type.defaultProps;for(De in we)ee.call(we,De)&&!V.hasOwnProperty(De)&&(Oe[De]=we[De]===void 0&&Ce!==void 0?Ce[De]:we[De])}var De=arguments.length-2;if(De===1)Oe.children=Ie;else if(1<De){Ce=Array(De);for(var Ye=0;Ye<De;Ye++)Ce[Ye]=arguments[Ye+2];Oe.children=Ce}return{$$typeof:r,type:re.type,key:ye,ref:Y,props:Oe,_owner:le}},Jt.createContext=function(re){return re={$$typeof:g,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},re.Provider={$$typeof:u,_context:re},re.Consumer=re},Jt.createElement=te,Jt.createFactory=function(re){var we=te.bind(null,re);return we.type=re,we},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(re){return{$$typeof:x,render:re}},Jt.isValidElement=ce,Jt.lazy=function(re){return{$$typeof:S,_payload:{_status:-1,_result:re},_init:q}},Jt.memo=function(re,we){return{$$typeof:y,type:re,compare:we===void 0?null:we}},Jt.startTransition=function(re){var we=z.transition;z.transition={};try{re()}finally{z.transition=we}},Jt.unstable_act=be,Jt.useCallback=function(re,we){return ie.current.useCallback(re,we)},Jt.useContext=function(re){return ie.current.useContext(re)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(re){return ie.current.useDeferredValue(re)},Jt.useEffect=function(re,we){return ie.current.useEffect(re,we)},Jt.useId=function(){return ie.current.useId()},Jt.useImperativeHandle=function(re,we,Ie){return ie.current.useImperativeHandle(re,we,Ie)},Jt.useInsertionEffect=function(re,we){return ie.current.useInsertionEffect(re,we)},Jt.useLayoutEffect=function(re,we){return ie.current.useLayoutEffect(re,we)},Jt.useMemo=function(re,we){return ie.current.useMemo(re,we)},Jt.useReducer=function(re,we,Ie){return ie.current.useReducer(re,we,Ie)},Jt.useRef=function(re){return ie.current.useRef(re)},Jt.useState=function(re){return ie.current.useState(re)},Jt.useSyncExternalStore=function(re,we,Ie){return ie.current.useSyncExternalStore(re,we,Ie)},Jt.useTransition=function(){return ie.current.useTransition()},Jt.version="18.3.1",Jt}var Ug;function Z0(){return Ug||(Ug=1,wf.exports=vC()),wf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function bC(){if(zg)return cc;zg=1;var r=Z0(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,d=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function g(x,v,y){var S,E={},T=null,I=null;y!==void 0&&(T=""+y),v.key!==void 0&&(T=""+v.key),v.ref!==void 0&&(I=v.ref);for(S in v)o.call(v,S)&&!u.hasOwnProperty(S)&&(E[S]=v[S]);if(x&&x.defaultProps)for(S in v=x.defaultProps,v)E[S]===void 0&&(E[S]=v[S]);return{$$typeof:e,type:x,key:T,ref:I,props:E,_owner:d.current}}return cc.Fragment=n,cc.jsx=g,cc.jsxs=g,cc}var $g;function CC(){return $g||($g=1,xf.exports=bC()),xf.exports}var s=CC(),Md={},yf={exports:{}},as={},vf={exports:{}},bf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function EC(){return Vg||(Vg=1,(function(r){function e(z,ue){var be=z.length;z.push(ue);e:for(;0<be;){var re=be-1>>>1,we=z[re];if(0<d(we,ue))z[re]=ue,z[be]=we,be=re;else break e}}function n(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var ue=z[0],be=z.pop();if(be!==ue){z[0]=be;e:for(var re=0,we=z.length,Ie=we>>>1;re<Ie;){var Oe=2*(re+1)-1,ye=z[Oe],Y=Oe+1,le=z[Y];if(0>d(ye,be))Y<we&&0>d(le,ye)?(z[re]=le,z[Y]=be,re=Y):(z[re]=ye,z[Oe]=be,re=Oe);else if(Y<we&&0>d(le,be))z[re]=le,z[Y]=be,re=Y;else break e}}return ue}function d(z,ue){var be=z.sortIndex-ue.sortIndex;return be!==0?be:z.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var g=Date,x=g.now();r.unstable_now=function(){return g.now()-x}}var v=[],y=[],S=1,E=null,T=3,I=!1,O=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(z){for(var ue=n(y);ue!==null;){if(ue.callback===null)o(y);else if(ue.startTime<=z)o(y),ue.sortIndex=ue.expirationTime,e(v,ue);else break;ue=n(y)}}function G(z){if(k=!1,B(z),!O)if(n(v)!==null)O=!0,q(ee);else{var ue=n(y);ue!==null&&ie(G,ue.startTime-z)}}function ee(z,ue){O=!1,k&&(k=!1,L(te),te=-1),I=!0;var be=T;try{for(B(ue),E=n(v);E!==null&&(!(E.expirationTime>ue)||z&&!oe());){var re=E.callback;if(typeof re=="function"){E.callback=null,T=E.priorityLevel;var we=re(E.expirationTime<=ue);ue=r.unstable_now(),typeof we=="function"?E.callback=we:E===n(v)&&o(v),B(ue)}else o(v);E=n(v)}if(E!==null)var Ie=!0;else{var Oe=n(y);Oe!==null&&ie(G,Oe.startTime-ue),Ie=!1}return Ie}finally{E=null,T=be,I=!1}}var se=!1,V=null,te=-1,ne=5,ce=-1;function oe(){return!(r.unstable_now()-ce<ne)}function H(){if(V!==null){var z=r.unstable_now();ce=z;var ue=!0;try{ue=V(!0,z)}finally{ue?W():(se=!1,V=null)}}else se=!1}var W;if(typeof U=="function")W=function(){U(H)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,X=de.port2;de.port1.onmessage=H,W=function(){X.postMessage(null)}}else W=function(){P(H,0)};function q(z){V=z,se||(se=!0,W())}function ie(z,ue){te=P(function(){z(r.unstable_now())},ue)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_continueExecution=function(){O||I||(O=!0,q(ee))},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_getFirstCallbackNode=function(){return n(v)},r.unstable_next=function(z){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var be=T;T=ue;try{return z()}finally{T=be}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(z,ue){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var be=T;T=z;try{return ue()}finally{T=be}},r.unstable_scheduleCallback=function(z,ue,be){var re=r.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?re+be:re):be=re,z){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=be+we,z={id:S++,callback:ue,priorityLevel:z,startTime:be,expirationTime:we,sortIndex:-1},be>re?(z.sortIndex=be,e(y,z),n(v)===null&&z===n(y)&&(k?(L(te),te=-1):k=!0,ie(G,be-re))):(z.sortIndex=we,e(v,z),O||I||(O=!0,q(ee))),z},r.unstable_shouldYield=oe,r.unstable_wrapCallback=function(z){var ue=T;return function(){var be=T;T=ue;try{return z.apply(this,arguments)}finally{T=be}}}})(bf)),bf}var Wg;function SC(){return Wg||(Wg=1,vf.exports=EC()),vf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function _C(){if(Hg)return as;Hg=1;var r=Z0(),e=SC();function n(i){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+i,p=1;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,d={};function u(i,c){g(i,c),g(i+"Capture",c)}function g(i,c){for(d[i]=c,i=0;i<c.length;i++)o.add(c[i])}var x=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},E={};function T(i){return v.call(E,i)?!0:v.call(S,i)?!1:y.test(i)?E[i]=!0:(S[i]=!0,!1)}function I(i,c,p,b){if(p!==null&&p.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return b?!1:p!==null?!p.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function O(i,c,p,b){if(c===null||typeof c>"u"||I(i,c,p,b))return!0;if(b)return!1;if(p!==null)switch(p.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function k(i,c,p,b,N,j,F){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=b,this.attributeNamespace=N,this.mustUseProperty=p,this.propertyName=i,this.type=c,this.sanitizeURL=j,this.removeEmptyString=F}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new k(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var c=i[0];P[c]=new k(c,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new k(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new k(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new k(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new k(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new k(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new k(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new k(i,5,!1,i.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var c=i.replace(L,U);P[c]=new k(c,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var c=i.replace(L,U);P[c]=new k(c,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var c=i.replace(L,U);P[c]=new k(c,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new k(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new k(i,1,!1,i.toLowerCase(),null,!0,!0)});function B(i,c,p,b){var N=P.hasOwnProperty(c)?P[c]:null;(N!==null?N.type!==0:b||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(O(c,p,N,b)&&(p=null),b||N===null?T(c)&&(p===null?i.removeAttribute(c):i.setAttribute(c,""+p)):N.mustUseProperty?i[N.propertyName]=p===null?N.type===3?!1:"":p:(c=N.attributeName,b=N.attributeNamespace,p===null?i.removeAttribute(c):(N=N.type,p=N===3||N===4&&p===!0?"":""+p,b?i.setAttributeNS(b,c,p):i.setAttribute(c,p))))}var G=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),se=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),oe=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),z=Symbol.iterator;function ue(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var be=Object.assign,re;function we(i){if(re===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);re=c&&c[1]||""}return`
`+re+i}var Ie=!1;function Oe(i,c){if(!i||Ie)return"";Ie=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ke){var b=ke}Reflect.construct(i,[],c)}else{try{c.call()}catch(ke){b=ke}i.call(c.prototype)}else{try{throw Error()}catch(ke){b=ke}i()}}catch(ke){if(ke&&b&&typeof ke.stack=="string"){for(var N=ke.stack.split(`
`),j=b.stack.split(`
`),F=N.length-1,ae=j.length-1;1<=F&&0<=ae&&N[F]!==j[ae];)ae--;for(;1<=F&&0<=ae;F--,ae--)if(N[F]!==j[ae]){if(F!==1||ae!==1)do if(F--,ae--,0>ae||N[F]!==j[ae]){var fe=`
`+N[F].replace(" at new "," at ");return i.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",i.displayName)),fe}while(1<=F&&0<=ae);break}}}finally{Ie=!1,Error.prepareStackTrace=p}return(i=i?i.displayName||i.name:"")?we(i):""}function ye(i){switch(i.tag){case 5:return we(i.type);case 16:return we("Lazy");case 13:return we("Suspense");case 19:return we("SuspenseList");case 0:case 2:case 15:return i=Oe(i.type,!1),i;case 11:return i=Oe(i.type.render,!1),i;case 1:return i=Oe(i.type,!0),i;default:return""}}function Y(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case V:return"Fragment";case se:return"Portal";case ne:return"Profiler";case te:return"StrictMode";case W:return"Suspense";case de:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case oe:return(i.displayName||"Context")+".Consumer";case ce:return(i._context.displayName||"Context")+".Provider";case H:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return c=i.displayName||null,c!==null?c:Y(i.type)||"Memo";case q:c=i._payload,i=i._init;try{return Y(i(c))}catch{}}return null}function le(i){var c=i.type;switch(i.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=c.render,i=i.displayName||i.name||"",c.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y(c);case 8:return c===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ce(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function De(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ye(i){var c=De(i)?"checked":"value",p=Object.getOwnPropertyDescriptor(i.constructor.prototype,c),b=""+i[c];if(!i.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var N=p.get,j=p.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return N.call(this)},set:function(F){b=""+F,j.call(this,F)}}),Object.defineProperty(i,c,{enumerable:p.enumerable}),{getValue:function(){return b},setValue:function(F){b=""+F},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function We(i){i._valueTracker||(i._valueTracker=Ye(i))}function ut(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var p=c.getValue(),b="";return i&&(b=De(i)?i.checked?"true":"false":i.value),i=b,i!==p?(c.setValue(i),!0):!1}function Ze(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ot(i,c){var p=c.checked;return be({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??i._wrapperState.initialChecked})}function Me(i,c){var p=c.defaultValue==null?"":c.defaultValue,b=c.checked!=null?c.checked:c.defaultChecked;p=Ce(c.value!=null?c.value:p),i._wrapperState={initialChecked:b,initialValue:p,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function at(i,c){c=c.checked,c!=null&&B(i,"checked",c,!1)}function Z(i,c){at(i,c);var p=Ce(c.value),b=c.type;if(p!=null)b==="number"?(p===0&&i.value===""||i.value!=p)&&(i.value=""+p):i.value!==""+p&&(i.value=""+p);else if(b==="submit"||b==="reset"){i.removeAttribute("value");return}c.hasOwnProperty("value")?Be(i,c.type,p):c.hasOwnProperty("defaultValue")&&Be(i,c.type,Ce(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(i.defaultChecked=!!c.defaultChecked)}function Te(i,c,p){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var b=c.type;if(!(b!=="submit"&&b!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+i._wrapperState.initialValue,p||c===i.value||(i.value=c),i.defaultValue=c}p=i.name,p!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,p!==""&&(i.name=p)}function Be(i,c,p){(c!=="number"||Ze(i.ownerDocument)!==i)&&(p==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+p&&(i.defaultValue=""+p))}var Rt=Array.isArray;function Ue(i,c,p,b){if(i=i.options,c){c={};for(var N=0;N<p.length;N++)c["$"+p[N]]=!0;for(p=0;p<i.length;p++)N=c.hasOwnProperty("$"+i[p].value),i[p].selected!==N&&(i[p].selected=N),N&&b&&(i[p].defaultSelected=!0)}else{for(p=""+Ce(p),c=null,N=0;N<i.length;N++){if(i[N].value===p){i[N].selected=!0,b&&(i[N].defaultSelected=!0);return}c!==null||i[N].disabled||(c=i[N])}c!==null&&(c.selected=!0)}}function Pt(i,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return be({},c,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Mt(i,c){var p=c.value;if(p==null){if(p=c.children,c=c.defaultValue,p!=null){if(c!=null)throw Error(n(92));if(Rt(p)){if(1<p.length)throw Error(n(93));p=p[0]}c=p}c==null&&(c=""),p=c}i._wrapperState={initialValue:Ce(p)}}function Yt(i,c){var p=Ce(c.value),b=Ce(c.defaultValue);p!=null&&(p=""+p,p!==i.value&&(i.value=p),c.defaultValue==null&&i.defaultValue!==p&&(i.defaultValue=p)),b!=null&&(i.defaultValue=""+b)}function kr(i){var c=i.textContent;c===i._wrapperState.initialValue&&c!==""&&c!==null&&(i.value=c)}function Vt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(i,c){return i==null||i==="http://www.w3.org/1999/xhtml"?Vt(c):i==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Gt,qt=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,p,b,N){MSApp.execUnsafeLocalFunction(function(){return i(c,p,b,N)})}:i})(function(i,c){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=c;else{for(Gt=Gt||document.createElement("div"),Gt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Gt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;c.firstChild;)i.appendChild(c.firstChild)}});function Hn(i,c){if(c){var p=i.firstChild;if(p&&p===i.lastChild&&p.nodeType===3){p.nodeValue=c;return}}i.textContent=c}var yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ns=["Webkit","ms","Moz","O"];Object.keys(yn).forEach(function(i){Ns.forEach(function(c){c=c+i.charAt(0).toUpperCase()+i.substring(1),yn[c]=yn[i]})});function vn(i,c,p){return c==null||typeof c=="boolean"||c===""?"":p||typeof c!="number"||c===0||yn.hasOwnProperty(i)&&yn[i]?(""+c).trim():c+"px"}function Je(i,c){i=i.style;for(var p in c)if(c.hasOwnProperty(p)){var b=p.indexOf("--")===0,N=vn(p,c[p],b);p==="float"&&(p="cssFloat"),b?i.setProperty(p,N):i[p]=N}}var pn=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function en(i,c){if(c){if(pn[i]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function rn(i,c){if(i.indexOf("-")===-1)return typeof c.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Er=null;function lr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Hr=null,tt=null,Kt=null;function Or(i){if(i=Xl(i)){if(typeof Hr!="function")throw Error(n(280));var c=i.stateNode;c&&(c=Kc(c),Hr(i.stateNode,i.type,c))}}function kt(i){tt?Kt?Kt.push(i):Kt=[i]:tt=i}function Wt(){if(tt){var i=tt,c=Kt;if(Kt=tt=null,Or(i),c)for(i=0;i<c.length;i++)Or(c[i])}}function sn(i,c){return i(c)}function nn(){}var En=!1;function bn(i,c,p){if(En)return i(c,p);En=!0;try{return sn(i,c,p)}finally{En=!1,(tt!==null||Kt!==null)&&(nn(),Wt())}}function dn(i,c){var p=i.stateNode;if(p===null)return null;var b=Kc(p);if(b===null)return null;p=b[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(i=i.type,b=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!b;break e;default:i=!1}if(i)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var ds=!1;if(x)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){ds=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{ds=!1}function rr(i,c,p,b,N,j,F,ae,fe){var ke=Array.prototype.slice.call(arguments,3);try{c.apply(p,ke)}catch(Ve){this.onError(Ve)}}var jn=!1,Gn=null,Jn=!1,rt=null,oi={onError:function(i){jn=!0,Gn=i}};function Ma(i,c,p,b,N,j,F,ae,fe){jn=!1,Gn=null,rr.apply(oi,arguments)}function wr(i,c,p,b,N,j,F,ae,fe){if(Ma.apply(this,arguments),jn){if(jn){var ke=Gn;jn=!1,Gn=null}else throw Error(n(198));Jn||(Jn=!0,rt=ke)}}function Pr(i){var c=i,p=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(p=c.return),i=c.return;while(i)}return c.tag===3?p:null}function _i(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function Ni(i){if(Pr(i)!==i)throw Error(n(188))}function es(i){var c=i.alternate;if(!c){if(c=Pr(i),c===null)throw Error(n(188));return c!==i?null:i}for(var p=i,b=c;;){var N=p.return;if(N===null)break;var j=N.alternate;if(j===null){if(b=N.return,b!==null){p=b;continue}break}if(N.child===j.child){for(j=N.child;j;){if(j===p)return Ni(N),i;if(j===b)return Ni(N),c;j=j.sibling}throw Error(n(188))}if(p.return!==b.return)p=N,b=j;else{for(var F=!1,ae=N.child;ae;){if(ae===p){F=!0,p=N,b=j;break}if(ae===b){F=!0,b=N,p=j;break}ae=ae.sibling}if(!F){for(ae=j.child;ae;){if(ae===p){F=!0,p=j,b=N;break}if(ae===b){F=!0,b=j,p=N;break}ae=ae.sibling}if(!F)throw Error(n(189))}}if(p.alternate!==b)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?i:c}function So(i){return i=es(i),i!==null?_o(i):null}function _o(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var c=_o(i);if(c!==null)return c;i=i.sibling}return null}var Gr=e.unstable_scheduleCallback,sr=e.unstable_cancelCallback,xn=e.unstable_shouldYield,J=e.unstable_requestPaint,pe=e.unstable_now,_e=e.unstable_getCurrentPriorityLevel,ge=e.unstable_ImmediatePriority,ht=e.unstable_UserBlockingPriority,qe=e.unstable_NormalPriority,et=e.unstable_LowPriority,vt=e.unstable_IdlePriority,nt=null,st=null;function Ct(i){if(st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(nt,i,void 0,(i.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:Tn,As=Math.log,us=Math.LN2;function Tn(i){return i>>>=0,i===0?32:31-(As(i)/us|0)|0}var cr=64,Xi=4194304;function hn(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function qr(i,c){var p=i.pendingLanes;if(p===0)return 0;var b=0,N=i.suspendedLanes,j=i.pingedLanes,F=p&268435455;if(F!==0){var ae=F&~N;ae!==0?b=hn(ae):(j&=F,j!==0&&(b=hn(j)))}else F=p&~N,F!==0?b=hn(F):j!==0&&(b=hn(j));if(b===0)return 0;if(c!==0&&c!==b&&(c&N)===0&&(N=b&-b,j=c&-c,N>=j||N===16&&(j&4194240)!==0))return c;if((b&4)!==0&&(b|=p&16),c=i.entangledLanes,c!==0)for(i=i.entanglements,c&=b;0<c;)p=31-In(c),N=1<<p,b|=i[p],c&=~N;return b}function Ku(i,c){switch(i){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(i,c){for(var p=i.suspendedLanes,b=i.pingedLanes,N=i.expirationTimes,j=i.pendingLanes;0<j;){var F=31-In(j),ae=1<<F,fe=N[F];fe===-1?((ae&p)===0||(ae&b)!==0)&&(N[F]=Ku(ae,c)):fe<=c&&(i.expiredLanes|=ae),j&=~ae}}function fn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function dr(){var i=cr;return cr<<=1,(cr&4194240)===0&&(cr=64),i}function Ee(i){for(var c=[],p=0;31>p;p++)c.push(i);return c}function K(i,c,p){i.pendingLanes|=c,c!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,c=31-In(c),i[c]=p}function bt(i,c){var p=i.pendingLanes&~c;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=c,i.mutableReadLanes&=c,i.entangledLanes&=c,c=i.entanglements;var b=i.eventTimes;for(i=i.expirationTimes;0<p;){var N=31-In(p),j=1<<N;c[N]=0,b[N]=-1,i[N]=-1,p&=~j}}function qn(i,c){var p=i.entangledLanes|=c;for(i=i.entanglements;p;){var b=31-In(p),N=1<<b;N&c|i[b]&c&&(i[b]|=c),p&=~N}}var Xt=0;function Pc(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var No,Dr,Et,Sn,Rl,kl=!1,Ki=[],hs=null,js=null,li=null,Mn=new Map,Fs=new Map,Sr=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dc(i,c){switch(i){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":Mn.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(c.pointerId)}}function Bt(i,c,p,b,N,j){return i===null||i.nativeEvent!==j?(i={blockedOn:c,domEventName:p,eventSystemFlags:b,nativeEvent:j,targetContainers:[N]},c!==null&&(c=Xl(c),c!==null&&Dr(c)),i):(i.eventSystemFlags|=b,c=i.targetContainers,N!==null&&c.indexOf(N)===-1&&c.push(N),i)}function ur(i,c,p,b,N){switch(c){case"focusin":return hs=Bt(hs,i,c,p,b,N),!0;case"dragenter":return js=Bt(js,i,c,p,b,N),!0;case"mouseover":return li=Bt(li,i,c,p,b,N),!0;case"pointerover":var j=N.pointerId;return Mn.set(j,Bt(Mn.get(j)||null,i,c,p,b,N)),!0;case"gotpointercapture":return j=N.pointerId,Fs.set(j,Bt(Fs.get(j)||null,i,c,p,b,N)),!0}return!1}function Mc(i){var c=Ga(i.target);if(c!==null){var p=Pr(c);if(p!==null){if(c=p.tag,c===13){if(c=_i(p),c!==null){i.blockedOn=c,Rl(i.priority,function(){Et(p)});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){i.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Zi(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var p=Ao(i.domEventName,i.eventSystemFlags,c[0],i.nativeEvent);if(p===null){p=i.nativeEvent;var b=new p.constructor(p.type,p);Er=b,p.target.dispatchEvent(b),Er=null}else return c=Xl(p),c!==null&&Dr(c),i.blockedOn=p,!1;c.shift()}return!0}function Ol(i,c,p){Zi(i)&&p.delete(c)}function Ai(){kl=!1,hs!==null&&Zi(hs)&&(hs=null),js!==null&&Zi(js)&&(js=null),li!==null&&Zi(li)&&(li=null),Mn.forEach(Ol),Fs.forEach(Ol)}function La(i,c){i.blockedOn===c&&(i.blockedOn=null,kl||(kl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ai)))}function Us(i){function c(N){return La(N,i)}if(0<Ki.length){La(Ki[0],i);for(var p=1;p<Ki.length;p++){var b=Ki[p];b.blockedOn===i&&(b.blockedOn=null)}}for(hs!==null&&La(hs,i),js!==null&&La(js,i),li!==null&&La(li,i),Mn.forEach(c),Fs.forEach(c),p=0;p<Sr.length;p++)b=Sr[p],b.blockedOn===i&&(b.blockedOn=null);for(;0<Sr.length&&(p=Sr[0],p.blockedOn===null);)Mc(p),p.blockedOn===null&&Sr.shift()}var Is=G.ReactCurrentBatchConfig,ci=!0;function Lc(i,c,p,b){var N=Xt,j=Is.transition;Is.transition=null;try{Xt=1,ji(i,c,p,b)}finally{Xt=N,Is.transition=j}}function Ba(i,c,p,b){var N=Xt,j=Is.transition;Is.transition=null;try{Xt=4,ji(i,c,p,b)}finally{Xt=N,Is.transition=j}}function ji(i,c,p,b){if(ci){var N=Ao(i,c,p,b);if(N===null)ah(i,c,b,hr,p),Dc(i,b);else if(ur(N,i,c,p,b))b.stopPropagation();else if(Dc(i,b),c&4&&-1<It.indexOf(i)){for(;N!==null;){var j=Xl(N);if(j!==null&&No(j),j=Ao(i,c,p,b),j===null&&ah(i,c,b,hr,p),j===N)break;N=j}N!==null&&b.stopPropagation()}else ah(i,c,b,null,p)}}var hr=null;function Ao(i,c,p,b){if(hr=null,i=lr(b),i=Ga(i),i!==null)if(c=Pr(i),c===null)i=null;else if(p=c.tag,p===13){if(i=_i(c),i!==null)return i;i=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null);return hr=i,null}function Pl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_e()){case ge:return 1;case ht:return 4;case qe:case et:return 16;case vt:return 536870912;default:return 16}default:return 16}}var zs=null,Dl=null,jo=null;function Bc(){if(jo)return jo;var i,c=Dl,p=c.length,b,N="value"in zs?zs.value:zs.textContent,j=N.length;for(i=0;i<p&&c[i]===N[i];i++);var F=p-i;for(b=1;b<=F&&c[p-b]===N[j-b];b++);return jo=N.slice(i,1<b?1-b:void 0)}function an(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function Fa(){return!0}function Ua(){return!1}function Xn(i){function c(p,b,N,j,F){this._reactName=p,this._targetInst=N,this.type=b,this.nativeEvent=j,this.target=F,this.currentTarget=null;for(var ae in i)i.hasOwnProperty(ae)&&(p=i[ae],this[ae]=p?p(j):j[ae]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Fa:Ua,this.isPropagationStopped=Ua,this}return be(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),c}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Re=Xn(Qi),$t=be({},Qi,{view:0,detail:0}),fr=Xn($t),Ji,Io,za,To=be({},$t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==za&&(za&&i.type==="mousemove"?(Ji=i.screenX-za.screenX,Io=i.screenY-za.screenY):Io=Ji=0,za=i),Ji)},movementY:function(i){return"movementY"in i?i.movementY:Io}}),Fc=Xn(To),Ml=be({},To,{dataTransfer:0}),er=Xn(Ml),Ll=be({},$t,{relatedTarget:0}),_n=Xn(Ll),Ro=be({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ii=Xn(Ro),gn=be({},Qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Nt=Xn(gn),Zu=be({},Qi,{data:0}),wn=Xn(Zu),Ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ea={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ts(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=Qu[i])?!!c[i]:!1}function $a(){return Ts}var Uc=be({},$t,{key:function(i){if(i.key){var c=Ti[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=an(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ea[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(i){return i.type==="keypress"?an(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?an(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Bl=Xn(Uc),zc=be({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fl=Xn(zc),Ju=be({},$t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),ta=Xn(Ju),Ul=be({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),eh=Xn(Ul),Va=be({},To,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),th=Xn(Va),di=[9,13,27,32],na=x&&"CompositionEvent"in window,yr=null;x&&"documentMode"in document&&(yr=document.documentMode);var $c=x&&"TextEvent"in window&&!yr,fs=x&&(!na||yr&&8<yr&&11>=yr),Vc=" ",ko=!1;function Wc(i,c){switch(i){case"keyup":return di.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var _r=!1;function nh(i,c){switch(i){case"compositionend":return zl(c);case"keypress":return c.which!==32?null:(ko=!0,Vc);case"textInput":return i=c.data,i===Vc&&ko?null:i;default:return null}}function $l(i,c){if(_r)return i==="compositionend"||!na&&Wc(i,c)?(i=Bc(),jo=Dl=zs=null,_r=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return fs&&c.locale!=="ko"?null:c.data;default:return null}}var Wa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!Wa[i.type]:c==="textarea"}function Ha(i,c,p,b){kt(b),c=qc(c,"onChange"),0<c.length&&(p=new Re("onChange","change",null,p,b),i.push({event:p,listeners:c}))}var D=null,t=null;function a(i){tp(i,0)}function l(i){var c=Do(i);if(ut(c))return i}function h(i,c){if(i==="change")return c}var f=!1;if(x){var m;if(x){var w="oninput"in document;if(!w){var C=document.createElement("div");C.setAttribute("oninput","return;"),w=typeof C.oninput=="function"}m=w}else m=!1;f=m&&(!document.documentMode||9<document.documentMode)}function _(){D&&(D.detachEvent("onpropertychange",R),t=D=null)}function R(i){if(i.propertyName==="value"&&l(t)){var c=[];Ha(c,t,i,lr(i)),bn(a,c)}}function M(i,c,p){i==="focusin"?(_(),D=c,t=p,D.attachEvent("onpropertychange",R)):i==="focusout"&&_()}function $(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return l(t)}function Q(i,c){if(i==="click")return l(c)}function he(i,c){if(i==="input"||i==="change")return l(c)}function me(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var ve=typeof Object.is=="function"?Object.is:me;function je(i,c){if(ve(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var p=Object.keys(i),b=Object.keys(c);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var N=p[b];if(!v.call(c,N)||!ve(i[N],c[N]))return!1}return!0}function Ge(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Xe(i,c){var p=Ge(i);i=0;for(var b;p;){if(p.nodeType===3){if(b=i+p.textContent.length,i<=c&&b>=c)return{node:p,offset:c-i};i=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Ge(p)}}function ze(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?ze(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function Zt(){for(var i=window,c=Ze();c instanceof i.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)i=c.contentWindow;else break;c=Ze(i.document)}return c}function Ft(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}function Mr(i){var c=Zt(),p=i.focusedElem,b=i.selectionRange;if(c!==p&&p&&p.ownerDocument&&ze(p.ownerDocument.documentElement,p)){if(b!==null&&Ft(p)){if(c=b.start,i=b.end,i===void 0&&(i=c),"selectionStart"in p)p.selectionStart=c,p.selectionEnd=Math.min(i,p.value.length);else if(i=(c=p.ownerDocument||document)&&c.defaultView||window,i.getSelection){i=i.getSelection();var N=p.textContent.length,j=Math.min(b.start,N);b=b.end===void 0?j:Math.min(b.end,N),!i.extend&&j>b&&(N=b,b=j,j=N),N=Xe(p,j);var F=Xe(p,b);N&&F&&(i.rangeCount!==1||i.anchorNode!==N.node||i.anchorOffset!==N.offset||i.focusNode!==F.node||i.focusOffset!==F.offset)&&(c=c.createRange(),c.setStart(N.node,N.offset),i.removeAllRanges(),j>b?(i.addRange(c),i.extend(F.node,F.offset)):(c.setEnd(F.node,F.offset),i.addRange(c)))}}for(c=[],i=p;i=i.parentNode;)i.nodeType===1&&c.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<c.length;p++)i=c[p],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var ms=x&&"documentMode"in document&&11>=document.documentMode,tr=null,un=null,Un=null,Nr=!1;function Ri(i,c,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Nr||tr==null||tr!==Ze(b)||(b=tr,"selectionStart"in b&&Ft(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Un&&je(Un,b)||(Un=b,b=qc(un,"onSelect"),0<b.length&&(c=new Re("onSelect","select",null,c,p),i.push({event:c,listeners:b}),c.target=tr)))}function $s(i,c){var p={};return p[i.toLowerCase()]=c.toLowerCase(),p["Webkit"+i]="webkit"+c,p["Moz"+i]="moz"+c,p}var ra={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionend:$s("Transition","TransitionEnd")},Vl={},qm={};x&&(qm=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Hc(i){if(Vl[i])return Vl[i];if(!ra[i])return i;var c=ra[i],p;for(p in c)if(c.hasOwnProperty(p)&&p in qm)return Vl[i]=c[p];return i}var Xm=Hc("animationend"),Ym=Hc("animationiteration"),Km=Hc("animationstart"),Zm=Hc("transitionend"),Qm=new Map,Jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(i,c){Qm.set(i,c),u(c,[i])}for(var rh=0;rh<Jm.length;rh++){var sh=Jm[rh],jb=sh.toLowerCase(),Ib=sh[0].toUpperCase()+sh.slice(1);sa(jb,"on"+Ib)}sa(Xm,"onAnimationEnd"),sa(Ym,"onAnimationIteration"),sa(Km,"onAnimationStart"),sa("dblclick","onDoubleClick"),sa("focusin","onFocus"),sa("focusout","onBlur"),sa(Zm,"onTransitionEnd"),g("onMouseEnter",["mouseout","mouseover"]),g("onMouseLeave",["mouseout","mouseover"]),g("onPointerEnter",["pointerout","pointerover"]),g("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function ep(i,c,p){var b=i.type||"unknown-event";i.currentTarget=p,wr(b,c,void 0,i),i.currentTarget=null}function tp(i,c){c=(c&4)!==0;for(var p=0;p<i.length;p++){var b=i[p],N=b.event;b=b.listeners;e:{var j=void 0;if(c)for(var F=b.length-1;0<=F;F--){var ae=b[F],fe=ae.instance,ke=ae.currentTarget;if(ae=ae.listener,fe!==j&&N.isPropagationStopped())break e;ep(N,ae,ke),j=fe}else for(F=0;F<b.length;F++){if(ae=b[F],fe=ae.instance,ke=ae.currentTarget,ae=ae.listener,fe!==j&&N.isPropagationStopped())break e;ep(N,ae,ke),j=fe}}}if(Jn)throw i=rt,Jn=!1,rt=null,i}function Rn(i,c){var p=c[hh];p===void 0&&(p=c[hh]=new Set);var b=i+"__bubble";p.has(b)||(np(c,i,2,!1),p.add(b))}function ih(i,c,p){var b=0;c&&(b|=4),np(p,i,b,c)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function Hl(i){if(!i[Gc]){i[Gc]=!0,o.forEach(function(p){p!=="selectionchange"&&(Tb.has(p)||ih(p,!1,i),ih(p,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[Gc]||(c[Gc]=!0,ih("selectionchange",!1,c))}}function np(i,c,p,b){switch(Pl(c)){case 1:var N=Lc;break;case 4:N=Ba;break;default:N=ji}p=N.bind(null,c,p,i),N=void 0,!ds||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(N=!0),b?N!==void 0?i.addEventListener(c,p,{capture:!0,passive:N}):i.addEventListener(c,p,!0):N!==void 0?i.addEventListener(c,p,{passive:N}):i.addEventListener(c,p,!1)}function ah(i,c,p,b,N){var j=b;if((c&1)===0&&(c&2)===0&&b!==null)e:for(;;){if(b===null)return;var F=b.tag;if(F===3||F===4){var ae=b.stateNode.containerInfo;if(ae===N||ae.nodeType===8&&ae.parentNode===N)break;if(F===4)for(F=b.return;F!==null;){var fe=F.tag;if((fe===3||fe===4)&&(fe=F.stateNode.containerInfo,fe===N||fe.nodeType===8&&fe.parentNode===N))return;F=F.return}for(;ae!==null;){if(F=Ga(ae),F===null)return;if(fe=F.tag,fe===5||fe===6){b=j=F;continue e}ae=ae.parentNode}}b=b.return}bn(function(){var ke=j,Ve=lr(p),He=[];e:{var Fe=Qm.get(i);if(Fe!==void 0){var ot=Re,ft=i;switch(i){case"keypress":if(an(p)===0)break e;case"keydown":case"keyup":ot=Bl;break;case"focusin":ft="focus",ot=_n;break;case"focusout":ft="blur",ot=_n;break;case"beforeblur":case"afterblur":ot=_n;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=er;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=ta;break;case Xm:case Ym:case Km:ot=Ii;break;case Zm:ot=eh;break;case"scroll":ot=fr;break;case"wheel":ot=th;break;case"copy":case"cut":case"paste":ot=Nt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Fl}var gt=(c&4)!==0,nr=!gt&&i==="scroll",Se=gt?Fe!==null?Fe+"Capture":null:Fe;gt=[];for(var xe=ke,Ne;xe!==null;){Ne=xe;var Qe=Ne.stateNode;if(Ne.tag===5&&Qe!==null&&(Ne=Qe,Se!==null&&(Qe=dn(xe,Se),Qe!=null&&gt.push(Gl(xe,Qe,Ne)))),nr)break;xe=xe.return}0<gt.length&&(Fe=new ot(Fe,ft,null,p,Ve),He.push({event:Fe,listeners:gt}))}}if((c&7)===0){e:{if(Fe=i==="mouseover"||i==="pointerover",ot=i==="mouseout"||i==="pointerout",Fe&&p!==Er&&(ft=p.relatedTarget||p.fromElement)&&(Ga(ft)||ft[ki]))break e;if((ot||Fe)&&(Fe=Ve.window===Ve?Ve:(Fe=Ve.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,ot?(ft=p.relatedTarget||p.toElement,ot=ke,ft=ft?Ga(ft):null,ft!==null&&(nr=Pr(ft),ft!==nr||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(ot=null,ft=ke),ot!==ft)){if(gt=Fc,Qe="onMouseLeave",Se="onMouseEnter",xe="mouse",(i==="pointerout"||i==="pointerover")&&(gt=Fl,Qe="onPointerLeave",Se="onPointerEnter",xe="pointer"),nr=ot==null?Fe:Do(ot),Ne=ft==null?Fe:Do(ft),Fe=new gt(Qe,xe+"leave",ot,p,Ve),Fe.target=nr,Fe.relatedTarget=Ne,Qe=null,Ga(Ve)===ke&&(gt=new gt(Se,xe+"enter",ft,p,Ve),gt.target=Ne,gt.relatedTarget=nr,Qe=gt),nr=Qe,ot&&ft)t:{for(gt=ot,Se=ft,xe=0,Ne=gt;Ne;Ne=Oo(Ne))xe++;for(Ne=0,Qe=Se;Qe;Qe=Oo(Qe))Ne++;for(;0<xe-Ne;)gt=Oo(gt),xe--;for(;0<Ne-xe;)Se=Oo(Se),Ne--;for(;xe--;){if(gt===Se||Se!==null&&gt===Se.alternate)break t;gt=Oo(gt),Se=Oo(Se)}gt=null}else gt=null;ot!==null&&rp(He,Fe,ot,gt,!1),ft!==null&&nr!==null&&rp(He,nr,ft,gt,!0)}}e:{if(Fe=ke?Do(ke):window,ot=Fe.nodeName&&Fe.nodeName.toLowerCase(),ot==="select"||ot==="input"&&Fe.type==="file")var xt=h;else if(tn(Fe))if(f)xt=he;else{xt=$;var At=M}else(ot=Fe.nodeName)&&ot.toLowerCase()==="input"&&(Fe.type==="checkbox"||Fe.type==="radio")&&(xt=Q);if(xt&&(xt=xt(i,ke))){Ha(He,xt,p,Ve);break e}At&&At(i,Fe,ke),i==="focusout"&&(At=Fe._wrapperState)&&At.controlled&&Fe.type==="number"&&Be(Fe,"number",Fe.value)}switch(At=ke?Do(ke):window,i){case"focusin":(tn(At)||At.contentEditable==="true")&&(tr=At,un=ke,Un=null);break;case"focusout":Un=un=tr=null;break;case"mousedown":Nr=!0;break;case"contextmenu":case"mouseup":case"dragend":Nr=!1,Ri(He,p,Ve);break;case"selectionchange":if(ms)break;case"keydown":case"keyup":Ri(He,p,Ve)}var jt;if(na)e:{switch(i){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else _r?Wc(i,p)&&(Lt="onCompositionEnd"):i==="keydown"&&p.keyCode===229&&(Lt="onCompositionStart");Lt&&(fs&&p.locale!=="ko"&&(_r||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&_r&&(jt=Bc()):(zs=Ve,Dl="value"in zs?zs.value:zs.textContent,_r=!0)),At=qc(ke,Lt),0<At.length&&(Lt=new wn(Lt,i,null,p,Ve),He.push({event:Lt,listeners:At}),jt?Lt.data=jt:(jt=zl(p),jt!==null&&(Lt.data=jt)))),(jt=$c?nh(i,p):$l(i,p))&&(ke=qc(ke,"onBeforeInput"),0<ke.length&&(Ve=new wn("onBeforeInput","beforeinput",null,p,Ve),He.push({event:Ve,listeners:ke}),Ve.data=jt))}tp(He,c)})}function Gl(i,c,p){return{instance:i,listener:c,currentTarget:p}}function qc(i,c){for(var p=c+"Capture",b=[];i!==null;){var N=i,j=N.stateNode;N.tag===5&&j!==null&&(N=j,j=dn(i,p),j!=null&&b.unshift(Gl(i,j,N)),j=dn(i,c),j!=null&&b.push(Gl(i,j,N))),i=i.return}return b}function Oo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function rp(i,c,p,b,N){for(var j=c._reactName,F=[];p!==null&&p!==b;){var ae=p,fe=ae.alternate,ke=ae.stateNode;if(fe!==null&&fe===b)break;ae.tag===5&&ke!==null&&(ae=ke,N?(fe=dn(p,j),fe!=null&&F.unshift(Gl(p,fe,ae))):N||(fe=dn(p,j),fe!=null&&F.push(Gl(p,fe,ae)))),p=p.return}F.length!==0&&i.push({event:c,listeners:F})}var Rb=/\r\n?/g,kb=/\u0000|\uFFFD/g;function sp(i){return(typeof i=="string"?i:""+i).replace(Rb,`
`).replace(kb,"")}function Xc(i,c,p){if(c=sp(c),sp(i)!==c&&p)throw Error(n(425))}function Yc(){}var oh=null,lh=null;function ch(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var dh=typeof setTimeout=="function"?setTimeout:void 0,Ob=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,Pb=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(i){return ip.resolve(null).then(i).catch(Db)}:dh;function Db(i){setTimeout(function(){throw i})}function uh(i,c){var p=c,b=0;do{var N=p.nextSibling;if(i.removeChild(p),N&&N.nodeType===8)if(p=N.data,p==="/$"){if(b===0){i.removeChild(N),Us(c);return}b--}else p!=="$"&&p!=="$?"&&p!=="$!"||b++;p=N}while(p);Us(c)}function ia(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return i}function ap(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var p=i.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return i;c--}else p==="/$"&&c++}i=i.previousSibling}return null}var Po=Math.random().toString(36).slice(2),ui="__reactFiber$"+Po,ql="__reactProps$"+Po,ki="__reactContainer$"+Po,hh="__reactEvents$"+Po,Mb="__reactListeners$"+Po,Lb="__reactHandles$"+Po;function Ga(i){var c=i[ui];if(c)return c;for(var p=i.parentNode;p;){if(c=p[ki]||p[ui]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(i=ap(i);i!==null;){if(p=i[ui])return p;i=ap(i)}return c}i=p,p=i.parentNode}return null}function Xl(i){return i=i[ui]||i[ki],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Do(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Kc(i){return i[ql]||null}var fh=[],Mo=-1;function aa(i){return{current:i}}function kn(i){0>Mo||(i.current=fh[Mo],fh[Mo]=null,Mo--)}function Nn(i,c){Mo++,fh[Mo]=i.current,i.current=c}var oa={},Lr=aa(oa),ts=aa(!1),qa=oa;function Lo(i,c){var p=i.type.contextTypes;if(!p)return oa;var b=i.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===c)return b.__reactInternalMemoizedMaskedChildContext;var N={},j;for(j in p)N[j]=c[j];return b&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=c,i.__reactInternalMemoizedMaskedChildContext=N),N}function ns(i){return i=i.childContextTypes,i!=null}function Zc(){kn(ts),kn(Lr)}function op(i,c,p){if(Lr.current!==oa)throw Error(n(168));Nn(Lr,c),Nn(ts,p)}function lp(i,c,p){var b=i.stateNode;if(c=c.childContextTypes,typeof b.getChildContext!="function")return p;b=b.getChildContext();for(var N in b)if(!(N in c))throw Error(n(108,le(i)||"Unknown",N));return be({},p,b)}function Qc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||oa,qa=Lr.current,Nn(Lr,i),Nn(ts,ts.current),!0}function cp(i,c,p){var b=i.stateNode;if(!b)throw Error(n(169));p?(i=lp(i,c,qa),b.__reactInternalMemoizedMergedChildContext=i,kn(ts),kn(Lr),Nn(Lr,i)):kn(ts),Nn(ts,p)}var Oi=null,Jc=!1,mh=!1;function dp(i){Oi===null?Oi=[i]:Oi.push(i)}function Bb(i){Jc=!0,dp(i)}function la(){if(!mh&&Oi!==null){mh=!0;var i=0,c=Xt;try{var p=Oi;for(Xt=1;i<p.length;i++){var b=p[i];do b=b(!0);while(b!==null)}Oi=null,Jc=!1}catch(N){throw Oi!==null&&(Oi=Oi.slice(i+1)),Gr(ge,la),N}finally{Xt=c,mh=!1}}return null}var Bo=[],Fo=0,ed=null,td=0,Rs=[],ks=0,Xa=null,Pi=1,Di="";function Ya(i,c){Bo[Fo++]=td,Bo[Fo++]=ed,ed=i,td=c}function up(i,c,p){Rs[ks++]=Pi,Rs[ks++]=Di,Rs[ks++]=Xa,Xa=i;var b=Pi;i=Di;var N=32-In(b)-1;b&=~(1<<N),p+=1;var j=32-In(c)+N;if(30<j){var F=N-N%5;j=(b&(1<<F)-1).toString(32),b>>=F,N-=F,Pi=1<<32-In(c)+N|p<<N|b,Di=j+i}else Pi=1<<j|p<<N|b,Di=i}function ph(i){i.return!==null&&(Ya(i,1),up(i,1,0))}function gh(i){for(;i===ed;)ed=Bo[--Fo],Bo[Fo]=null,td=Bo[--Fo],Bo[Fo]=null;for(;i===Xa;)Xa=Rs[--ks],Rs[ks]=null,Di=Rs[--ks],Rs[ks]=null,Pi=Rs[--ks],Rs[ks]=null}var ps=null,gs=null,Ln=!1,Vs=null;function hp(i,c){var p=Ms(5,null,null,0);p.elementType="DELETED",p.stateNode=c,p.return=i,c=i.deletions,c===null?(i.deletions=[p],i.flags|=16):c.push(p)}function fp(i,c){switch(i.tag){case 5:var p=i.type;return c=c.nodeType!==1||p.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(i.stateNode=c,ps=i,gs=ia(c.firstChild),!0):!1;case 6:return c=i.pendingProps===""||c.nodeType!==3?null:c,c!==null?(i.stateNode=c,ps=i,gs=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(p=Xa!==null?{id:Pi,overflow:Di}:null,i.memoizedState={dehydrated:c,treeContext:p,retryLane:1073741824},p=Ms(18,null,null,0),p.stateNode=c,p.return=i,i.child=p,ps=i,gs=null,!0):!1;default:return!1}}function xh(i){return(i.mode&1)!==0&&(i.flags&128)===0}function wh(i){if(Ln){var c=gs;if(c){var p=c;if(!fp(i,c)){if(xh(i))throw Error(n(418));c=ia(p.nextSibling);var b=ps;c&&fp(i,c)?hp(b,p):(i.flags=i.flags&-4097|2,Ln=!1,ps=i)}}else{if(xh(i))throw Error(n(418));i.flags=i.flags&-4097|2,Ln=!1,ps=i}}}function mp(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ps=i}function nd(i){if(i!==ps)return!1;if(!Ln)return mp(i),Ln=!0,!1;var c;if((c=i.tag!==3)&&!(c=i.tag!==5)&&(c=i.type,c=c!=="head"&&c!=="body"&&!ch(i.type,i.memoizedProps)),c&&(c=gs)){if(xh(i))throw pp(),Error(n(418));for(;c;)hp(i,c),c=ia(c.nextSibling)}if(mp(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,c=0;i;){if(i.nodeType===8){var p=i.data;if(p==="/$"){if(c===0){gs=ia(i.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++}i=i.nextSibling}gs=null}}else gs=ps?ia(i.stateNode.nextSibling):null;return!0}function pp(){for(var i=gs;i;)i=ia(i.nextSibling)}function Uo(){gs=ps=null,Ln=!1}function yh(i){Vs===null?Vs=[i]:Vs.push(i)}var Fb=G.ReactCurrentBatchConfig;function Yl(i,c,p){if(i=p.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var b=p.stateNode}if(!b)throw Error(n(147,i));var N=b,j=""+i;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===j?c.ref:(c=function(F){var ae=N.refs;F===null?delete ae[j]:ae[j]=F},c._stringRef=j,c)}if(typeof i!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,i))}return i}function rd(i,c){throw i=Object.prototype.toString.call(c),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i))}function gp(i){var c=i._init;return c(i._payload)}function xp(i){function c(Se,xe){if(i){var Ne=Se.deletions;Ne===null?(Se.deletions=[xe],Se.flags|=16):Ne.push(xe)}}function p(Se,xe){if(!i)return null;for(;xe!==null;)c(Se,xe),xe=xe.sibling;return null}function b(Se,xe){for(Se=new Map;xe!==null;)xe.key!==null?Se.set(xe.key,xe):Se.set(xe.index,xe),xe=xe.sibling;return Se}function N(Se,xe){return Se=ga(Se,xe),Se.index=0,Se.sibling=null,Se}function j(Se,xe,Ne){return Se.index=Ne,i?(Ne=Se.alternate,Ne!==null?(Ne=Ne.index,Ne<xe?(Se.flags|=2,xe):Ne):(Se.flags|=2,xe)):(Se.flags|=1048576,xe)}function F(Se){return i&&Se.alternate===null&&(Se.flags|=2),Se}function ae(Se,xe,Ne,Qe){return xe===null||xe.tag!==6?(xe=uf(Ne,Se.mode,Qe),xe.return=Se,xe):(xe=N(xe,Ne),xe.return=Se,xe)}function fe(Se,xe,Ne,Qe){var xt=Ne.type;return xt===V?Ve(Se,xe,Ne.props.children,Qe,Ne.key):xe!==null&&(xe.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===q&&gp(xt)===xe.type)?(Qe=N(xe,Ne.props),Qe.ref=Yl(Se,xe,Ne),Qe.return=Se,Qe):(Qe=Ad(Ne.type,Ne.key,Ne.props,null,Se.mode,Qe),Qe.ref=Yl(Se,xe,Ne),Qe.return=Se,Qe)}function ke(Se,xe,Ne,Qe){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Ne.containerInfo||xe.stateNode.implementation!==Ne.implementation?(xe=hf(Ne,Se.mode,Qe),xe.return=Se,xe):(xe=N(xe,Ne.children||[]),xe.return=Se,xe)}function Ve(Se,xe,Ne,Qe,xt){return xe===null||xe.tag!==7?(xe=ro(Ne,Se.mode,Qe,xt),xe.return=Se,xe):(xe=N(xe,Ne),xe.return=Se,xe)}function He(Se,xe,Ne){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return xe=uf(""+xe,Se.mode,Ne),xe.return=Se,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case ee:return Ne=Ad(xe.type,xe.key,xe.props,null,Se.mode,Ne),Ne.ref=Yl(Se,null,xe),Ne.return=Se,Ne;case se:return xe=hf(xe,Se.mode,Ne),xe.return=Se,xe;case q:var Qe=xe._init;return He(Se,Qe(xe._payload),Ne)}if(Rt(xe)||ue(xe))return xe=ro(xe,Se.mode,Ne,null),xe.return=Se,xe;rd(Se,xe)}return null}function Fe(Se,xe,Ne,Qe){var xt=xe!==null?xe.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return xt!==null?null:ae(Se,xe,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case ee:return Ne.key===xt?fe(Se,xe,Ne,Qe):null;case se:return Ne.key===xt?ke(Se,xe,Ne,Qe):null;case q:return xt=Ne._init,Fe(Se,xe,xt(Ne._payload),Qe)}if(Rt(Ne)||ue(Ne))return xt!==null?null:Ve(Se,xe,Ne,Qe,null);rd(Se,Ne)}return null}function ot(Se,xe,Ne,Qe,xt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number")return Se=Se.get(Ne)||null,ae(xe,Se,""+Qe,xt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case ee:return Se=Se.get(Qe.key===null?Ne:Qe.key)||null,fe(xe,Se,Qe,xt);case se:return Se=Se.get(Qe.key===null?Ne:Qe.key)||null,ke(xe,Se,Qe,xt);case q:var At=Qe._init;return ot(Se,xe,Ne,At(Qe._payload),xt)}if(Rt(Qe)||ue(Qe))return Se=Se.get(Ne)||null,Ve(xe,Se,Qe,xt,null);rd(xe,Qe)}return null}function ft(Se,xe,Ne,Qe){for(var xt=null,At=null,jt=xe,Lt=xe=0,Cr=null;jt!==null&&Lt<Ne.length;Lt++){jt.index>Lt?(Cr=jt,jt=null):Cr=jt.sibling;var cn=Fe(Se,jt,Ne[Lt],Qe);if(cn===null){jt===null&&(jt=Cr);break}i&&jt&&cn.alternate===null&&c(Se,jt),xe=j(cn,xe,Lt),At===null?xt=cn:At.sibling=cn,At=cn,jt=Cr}if(Lt===Ne.length)return p(Se,jt),Ln&&Ya(Se,Lt),xt;if(jt===null){for(;Lt<Ne.length;Lt++)jt=He(Se,Ne[Lt],Qe),jt!==null&&(xe=j(jt,xe,Lt),At===null?xt=jt:At.sibling=jt,At=jt);return Ln&&Ya(Se,Lt),xt}for(jt=b(Se,jt);Lt<Ne.length;Lt++)Cr=ot(jt,Se,Lt,Ne[Lt],Qe),Cr!==null&&(i&&Cr.alternate!==null&&jt.delete(Cr.key===null?Lt:Cr.key),xe=j(Cr,xe,Lt),At===null?xt=Cr:At.sibling=Cr,At=Cr);return i&&jt.forEach(function(xa){return c(Se,xa)}),Ln&&Ya(Se,Lt),xt}function gt(Se,xe,Ne,Qe){var xt=ue(Ne);if(typeof xt!="function")throw Error(n(150));if(Ne=xt.call(Ne),Ne==null)throw Error(n(151));for(var At=xt=null,jt=xe,Lt=xe=0,Cr=null,cn=Ne.next();jt!==null&&!cn.done;Lt++,cn=Ne.next()){jt.index>Lt?(Cr=jt,jt=null):Cr=jt.sibling;var xa=Fe(Se,jt,cn.value,Qe);if(xa===null){jt===null&&(jt=Cr);break}i&&jt&&xa.alternate===null&&c(Se,jt),xe=j(xa,xe,Lt),At===null?xt=xa:At.sibling=xa,At=xa,jt=Cr}if(cn.done)return p(Se,jt),Ln&&Ya(Se,Lt),xt;if(jt===null){for(;!cn.done;Lt++,cn=Ne.next())cn=He(Se,cn.value,Qe),cn!==null&&(xe=j(cn,xe,Lt),At===null?xt=cn:At.sibling=cn,At=cn);return Ln&&Ya(Se,Lt),xt}for(jt=b(Se,jt);!cn.done;Lt++,cn=Ne.next())cn=ot(jt,Se,Lt,cn.value,Qe),cn!==null&&(i&&cn.alternate!==null&&jt.delete(cn.key===null?Lt:cn.key),xe=j(cn,xe,Lt),At===null?xt=cn:At.sibling=cn,At=cn);return i&&jt.forEach(function(wC){return c(Se,wC)}),Ln&&Ya(Se,Lt),xt}function nr(Se,xe,Ne,Qe){if(typeof Ne=="object"&&Ne!==null&&Ne.type===V&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case ee:e:{for(var xt=Ne.key,At=xe;At!==null;){if(At.key===xt){if(xt=Ne.type,xt===V){if(At.tag===7){p(Se,At.sibling),xe=N(At,Ne.props.children),xe.return=Se,Se=xe;break e}}else if(At.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===q&&gp(xt)===At.type){p(Se,At.sibling),xe=N(At,Ne.props),xe.ref=Yl(Se,At,Ne),xe.return=Se,Se=xe;break e}p(Se,At);break}else c(Se,At);At=At.sibling}Ne.type===V?(xe=ro(Ne.props.children,Se.mode,Qe,Ne.key),xe.return=Se,Se=xe):(Qe=Ad(Ne.type,Ne.key,Ne.props,null,Se.mode,Qe),Qe.ref=Yl(Se,xe,Ne),Qe.return=Se,Se=Qe)}return F(Se);case se:e:{for(At=Ne.key;xe!==null;){if(xe.key===At)if(xe.tag===4&&xe.stateNode.containerInfo===Ne.containerInfo&&xe.stateNode.implementation===Ne.implementation){p(Se,xe.sibling),xe=N(xe,Ne.children||[]),xe.return=Se,Se=xe;break e}else{p(Se,xe);break}else c(Se,xe);xe=xe.sibling}xe=hf(Ne,Se.mode,Qe),xe.return=Se,Se=xe}return F(Se);case q:return At=Ne._init,nr(Se,xe,At(Ne._payload),Qe)}if(Rt(Ne))return ft(Se,xe,Ne,Qe);if(ue(Ne))return gt(Se,xe,Ne,Qe);rd(Se,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,xe!==null&&xe.tag===6?(p(Se,xe.sibling),xe=N(xe,Ne),xe.return=Se,Se=xe):(p(Se,xe),xe=uf(Ne,Se.mode,Qe),xe.return=Se,Se=xe),F(Se)):p(Se,xe)}return nr}var zo=xp(!0),wp=xp(!1),sd=aa(null),id=null,$o=null,vh=null;function bh(){vh=$o=id=null}function Ch(i){var c=sd.current;kn(sd),i._currentValue=c}function Eh(i,c,p){for(;i!==null;){var b=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,b!==null&&(b.childLanes|=c)):b!==null&&(b.childLanes&c)!==c&&(b.childLanes|=c),i===p)break;i=i.return}}function Vo(i,c){id=i,vh=$o=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&c)!==0&&(rs=!0),i.firstContext=null)}function Os(i){var c=i._currentValue;if(vh!==i)if(i={context:i,memoizedValue:c,next:null},$o===null){if(id===null)throw Error(n(308));$o=i,id.dependencies={lanes:0,firstContext:i}}else $o=$o.next=i;return c}var Ka=null;function Sh(i){Ka===null?Ka=[i]:Ka.push(i)}function yp(i,c,p,b){var N=c.interleaved;return N===null?(p.next=p,Sh(c)):(p.next=N.next,N.next=p),c.interleaved=p,Mi(i,b)}function Mi(i,c){i.lanes|=c;var p=i.alternate;for(p!==null&&(p.lanes|=c),p=i,i=i.return;i!==null;)i.childLanes|=c,p=i.alternate,p!==null&&(p.childLanes|=c),p=i,i=i.return;return p.tag===3?p.stateNode:null}var ca=!1;function _h(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vp(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Li(i,c){return{eventTime:i,lane:c,tag:0,payload:null,callback:null,next:null}}function da(i,c,p){var b=i.updateQueue;if(b===null)return null;if(b=b.shared,(on&2)!==0){var N=b.pending;return N===null?c.next=c:(c.next=N.next,N.next=c),b.pending=c,Mi(i,p)}return N=b.interleaved,N===null?(c.next=c,Sh(b)):(c.next=N.next,N.next=c),b.interleaved=c,Mi(i,p)}function ad(i,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194240)!==0)){var b=c.lanes;b&=i.pendingLanes,p|=b,c.lanes=p,qn(i,p)}}function bp(i,c){var p=i.updateQueue,b=i.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var N=null,j=null;if(p=p.firstBaseUpdate,p!==null){do{var F={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};j===null?N=j=F:j=j.next=F,p=p.next}while(p!==null);j===null?N=j=c:j=j.next=c}else N=j=c;p={baseState:b.baseState,firstBaseUpdate:N,lastBaseUpdate:j,shared:b.shared,effects:b.effects},i.updateQueue=p;return}i=p.lastBaseUpdate,i===null?p.firstBaseUpdate=c:i.next=c,p.lastBaseUpdate=c}function od(i,c,p,b){var N=i.updateQueue;ca=!1;var j=N.firstBaseUpdate,F=N.lastBaseUpdate,ae=N.shared.pending;if(ae!==null){N.shared.pending=null;var fe=ae,ke=fe.next;fe.next=null,F===null?j=ke:F.next=ke,F=fe;var Ve=i.alternate;Ve!==null&&(Ve=Ve.updateQueue,ae=Ve.lastBaseUpdate,ae!==F&&(ae===null?Ve.firstBaseUpdate=ke:ae.next=ke,Ve.lastBaseUpdate=fe))}if(j!==null){var He=N.baseState;F=0,Ve=ke=fe=null,ae=j;do{var Fe=ae.lane,ot=ae.eventTime;if((b&Fe)===Fe){Ve!==null&&(Ve=Ve.next={eventTime:ot,lane:0,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null});e:{var ft=i,gt=ae;switch(Fe=c,ot=p,gt.tag){case 1:if(ft=gt.payload,typeof ft=="function"){He=ft.call(ot,He,Fe);break e}He=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=gt.payload,Fe=typeof ft=="function"?ft.call(ot,He,Fe):ft,Fe==null)break e;He=be({},He,Fe);break e;case 2:ca=!0}}ae.callback!==null&&ae.lane!==0&&(i.flags|=64,Fe=N.effects,Fe===null?N.effects=[ae]:Fe.push(ae))}else ot={eventTime:ot,lane:Fe,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},Ve===null?(ke=Ve=ot,fe=He):Ve=Ve.next=ot,F|=Fe;if(ae=ae.next,ae===null){if(ae=N.shared.pending,ae===null)break;Fe=ae,ae=Fe.next,Fe.next=null,N.lastBaseUpdate=Fe,N.shared.pending=null}}while(!0);if(Ve===null&&(fe=He),N.baseState=fe,N.firstBaseUpdate=ke,N.lastBaseUpdate=Ve,c=N.shared.interleaved,c!==null){N=c;do F|=N.lane,N=N.next;while(N!==c)}else j===null&&(N.shared.lanes=0);Ja|=F,i.lanes=F,i.memoizedState=He}}function Cp(i,c,p){if(i=c.effects,c.effects=null,i!==null)for(c=0;c<i.length;c++){var b=i[c],N=b.callback;if(N!==null){if(b.callback=null,b=p,typeof N!="function")throw Error(n(191,N));N.call(b)}}}var Kl={},hi=aa(Kl),Zl=aa(Kl),Ql=aa(Kl);function Za(i){if(i===Kl)throw Error(n(174));return i}function Nh(i,c){switch(Nn(Ql,c),Nn(Zl,i),Nn(hi,Kl),i=c.nodeType,i){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:it(null,"");break;default:i=i===8?c.parentNode:c,c=i.namespaceURI||null,i=i.tagName,c=it(c,i)}kn(hi),Nn(hi,c)}function Wo(){kn(hi),kn(Zl),kn(Ql)}function Ep(i){Za(Ql.current);var c=Za(hi.current),p=it(c,i.type);c!==p&&(Nn(Zl,i),Nn(hi,p))}function Ah(i){Zl.current===i&&(kn(hi),kn(Zl))}var zn=aa(0);function ld(i){for(var c=i;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var jh=[];function Ih(){for(var i=0;i<jh.length;i++)jh[i]._workInProgressVersionPrimary=null;jh.length=0}var cd=G.ReactCurrentDispatcher,Th=G.ReactCurrentBatchConfig,Qa=0,$n=null,mr=null,vr=null,dd=!1,Jl=!1,ec=0,Ub=0;function Br(){throw Error(n(321))}function Rh(i,c){if(c===null)return!1;for(var p=0;p<c.length&&p<i.length;p++)if(!ve(i[p],c[p]))return!1;return!0}function kh(i,c,p,b,N,j){if(Qa=j,$n=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,cd.current=i===null||i.memoizedState===null?Wb:Hb,i=p(b,N),Jl){j=0;do{if(Jl=!1,ec=0,25<=j)throw Error(n(301));j+=1,vr=mr=null,c.updateQueue=null,cd.current=Gb,i=p(b,N)}while(Jl)}if(cd.current=fd,c=mr!==null&&mr.next!==null,Qa=0,vr=mr=$n=null,dd=!1,c)throw Error(n(300));return i}function Oh(){var i=ec!==0;return ec=0,i}function fi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?$n.memoizedState=vr=i:vr=vr.next=i,vr}function Ps(){if(mr===null){var i=$n.alternate;i=i!==null?i.memoizedState:null}else i=mr.next;var c=vr===null?$n.memoizedState:vr.next;if(c!==null)vr=c,mr=i;else{if(i===null)throw Error(n(310));mr=i,i={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},vr===null?$n.memoizedState=vr=i:vr=vr.next=i}return vr}function tc(i,c){return typeof c=="function"?c(i):c}function Ph(i){var c=Ps(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=i;var b=mr,N=b.baseQueue,j=p.pending;if(j!==null){if(N!==null){var F=N.next;N.next=j.next,j.next=F}b.baseQueue=N=j,p.pending=null}if(N!==null){j=N.next,b=b.baseState;var ae=F=null,fe=null,ke=j;do{var Ve=ke.lane;if((Qa&Ve)===Ve)fe!==null&&(fe=fe.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),b=ke.hasEagerState?ke.eagerState:i(b,ke.action);else{var He={lane:Ve,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};fe===null?(ae=fe=He,F=b):fe=fe.next=He,$n.lanes|=Ve,Ja|=Ve}ke=ke.next}while(ke!==null&&ke!==j);fe===null?F=b:fe.next=ae,ve(b,c.memoizedState)||(rs=!0),c.memoizedState=b,c.baseState=F,c.baseQueue=fe,p.lastRenderedState=b}if(i=p.interleaved,i!==null){N=i;do j=N.lane,$n.lanes|=j,Ja|=j,N=N.next;while(N!==i)}else N===null&&(p.lanes=0);return[c.memoizedState,p.dispatch]}function Dh(i){var c=Ps(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=i;var b=p.dispatch,N=p.pending,j=c.memoizedState;if(N!==null){p.pending=null;var F=N=N.next;do j=i(j,F.action),F=F.next;while(F!==N);ve(j,c.memoizedState)||(rs=!0),c.memoizedState=j,c.baseQueue===null&&(c.baseState=j),p.lastRenderedState=j}return[j,b]}function Sp(){}function _p(i,c){var p=$n,b=Ps(),N=c(),j=!ve(b.memoizedState,N);if(j&&(b.memoizedState=N,rs=!0),b=b.queue,Mh(jp.bind(null,p,b,i),[i]),b.getSnapshot!==c||j||vr!==null&&vr.memoizedState.tag&1){if(p.flags|=2048,nc(9,Ap.bind(null,p,b,N,c),void 0,null),br===null)throw Error(n(349));(Qa&30)!==0||Np(p,c,N)}return N}function Np(i,c,p){i.flags|=16384,i={getSnapshot:c,value:p},c=$n.updateQueue,c===null?(c={lastEffect:null,stores:null},$n.updateQueue=c,c.stores=[i]):(p=c.stores,p===null?c.stores=[i]:p.push(i))}function Ap(i,c,p,b){c.value=p,c.getSnapshot=b,Ip(c)&&Tp(i)}function jp(i,c,p){return p(function(){Ip(c)&&Tp(i)})}function Ip(i){var c=i.getSnapshot;i=i.value;try{var p=c();return!ve(i,p)}catch{return!0}}function Tp(i){var c=Mi(i,1);c!==null&&qs(c,i,1,-1)}function Rp(i){var c=fi();return typeof i=="function"&&(i=i()),c.memoizedState=c.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:i},c.queue=i,i=i.dispatch=Vb.bind(null,$n,i),[c.memoizedState,i]}function nc(i,c,p,b){return i={tag:i,create:c,destroy:p,deps:b,next:null},c=$n.updateQueue,c===null?(c={lastEffect:null,stores:null},$n.updateQueue=c,c.lastEffect=i.next=i):(p=c.lastEffect,p===null?c.lastEffect=i.next=i:(b=p.next,p.next=i,i.next=b,c.lastEffect=i)),i}function kp(){return Ps().memoizedState}function ud(i,c,p,b){var N=fi();$n.flags|=i,N.memoizedState=nc(1|c,p,void 0,b===void 0?null:b)}function hd(i,c,p,b){var N=Ps();b=b===void 0?null:b;var j=void 0;if(mr!==null){var F=mr.memoizedState;if(j=F.destroy,b!==null&&Rh(b,F.deps)){N.memoizedState=nc(c,p,j,b);return}}$n.flags|=i,N.memoizedState=nc(1|c,p,j,b)}function Op(i,c){return ud(8390656,8,i,c)}function Mh(i,c){return hd(2048,8,i,c)}function Pp(i,c){return hd(4,2,i,c)}function Dp(i,c){return hd(4,4,i,c)}function Mp(i,c){if(typeof c=="function")return i=i(),c(i),function(){c(null)};if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function Lp(i,c,p){return p=p!=null?p.concat([i]):null,hd(4,4,Mp.bind(null,c,i),p)}function Lh(){}function Bp(i,c){var p=Ps();c=c===void 0?null:c;var b=p.memoizedState;return b!==null&&c!==null&&Rh(c,b[1])?b[0]:(p.memoizedState=[i,c],i)}function Fp(i,c){var p=Ps();c=c===void 0?null:c;var b=p.memoizedState;return b!==null&&c!==null&&Rh(c,b[1])?b[0]:(i=i(),p.memoizedState=[i,c],i)}function Up(i,c,p){return(Qa&21)===0?(i.baseState&&(i.baseState=!1,rs=!0),i.memoizedState=p):(ve(p,c)||(p=dr(),$n.lanes|=p,Ja|=p,i.baseState=!0),c)}function zb(i,c){var p=Xt;Xt=p!==0&&4>p?p:4,i(!0);var b=Th.transition;Th.transition={};try{i(!1),c()}finally{Xt=p,Th.transition=b}}function zp(){return Ps().memoizedState}function $b(i,c,p){var b=ma(i);if(p={lane:b,action:p,hasEagerState:!1,eagerState:null,next:null},$p(i))Vp(c,p);else if(p=yp(i,c,p,b),p!==null){var N=Yr();qs(p,i,b,N),Wp(p,c,b)}}function Vb(i,c,p){var b=ma(i),N={lane:b,action:p,hasEagerState:!1,eagerState:null,next:null};if($p(i))Vp(c,N);else{var j=i.alternate;if(i.lanes===0&&(j===null||j.lanes===0)&&(j=c.lastRenderedReducer,j!==null))try{var F=c.lastRenderedState,ae=j(F,p);if(N.hasEagerState=!0,N.eagerState=ae,ve(ae,F)){var fe=c.interleaved;fe===null?(N.next=N,Sh(c)):(N.next=fe.next,fe.next=N),c.interleaved=N;return}}catch{}finally{}p=yp(i,c,N,b),p!==null&&(N=Yr(),qs(p,i,b,N),Wp(p,c,b))}}function $p(i){var c=i.alternate;return i===$n||c!==null&&c===$n}function Vp(i,c){Jl=dd=!0;var p=i.pending;p===null?c.next=c:(c.next=p.next,p.next=c),i.pending=c}function Wp(i,c,p){if((p&4194240)!==0){var b=c.lanes;b&=i.pendingLanes,p|=b,c.lanes=p,qn(i,p)}}var fd={readContext:Os,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},Wb={readContext:Os,useCallback:function(i,c){return fi().memoizedState=[i,c===void 0?null:c],i},useContext:Os,useEffect:Op,useImperativeHandle:function(i,c,p){return p=p!=null?p.concat([i]):null,ud(4194308,4,Mp.bind(null,c,i),p)},useLayoutEffect:function(i,c){return ud(4194308,4,i,c)},useInsertionEffect:function(i,c){return ud(4,2,i,c)},useMemo:function(i,c){var p=fi();return c=c===void 0?null:c,i=i(),p.memoizedState=[i,c],i},useReducer:function(i,c,p){var b=fi();return c=p!==void 0?p(c):c,b.memoizedState=b.baseState=c,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:c},b.queue=i,i=i.dispatch=$b.bind(null,$n,i),[b.memoizedState,i]},useRef:function(i){var c=fi();return i={current:i},c.memoizedState=i},useState:Rp,useDebugValue:Lh,useDeferredValue:function(i){return fi().memoizedState=i},useTransition:function(){var i=Rp(!1),c=i[0];return i=zb.bind(null,i[1]),fi().memoizedState=i,[c,i]},useMutableSource:function(){},useSyncExternalStore:function(i,c,p){var b=$n,N=fi();if(Ln){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),br===null)throw Error(n(349));(Qa&30)!==0||Np(b,c,p)}N.memoizedState=p;var j={value:p,getSnapshot:c};return N.queue=j,Op(jp.bind(null,b,j,i),[i]),b.flags|=2048,nc(9,Ap.bind(null,b,j,p,c),void 0,null),p},useId:function(){var i=fi(),c=br.identifierPrefix;if(Ln){var p=Di,b=Pi;p=(b&~(1<<32-In(b)-1)).toString(32)+p,c=":"+c+"R"+p,p=ec++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=Ub++,c=":"+c+"r"+p.toString(32)+":";return i.memoizedState=c},unstable_isNewReconciler:!1},Hb={readContext:Os,useCallback:Bp,useContext:Os,useEffect:Mh,useImperativeHandle:Lp,useInsertionEffect:Pp,useLayoutEffect:Dp,useMemo:Fp,useReducer:Ph,useRef:kp,useState:function(){return Ph(tc)},useDebugValue:Lh,useDeferredValue:function(i){var c=Ps();return Up(c,mr.memoizedState,i)},useTransition:function(){var i=Ph(tc)[0],c=Ps().memoizedState;return[i,c]},useMutableSource:Sp,useSyncExternalStore:_p,useId:zp,unstable_isNewReconciler:!1},Gb={readContext:Os,useCallback:Bp,useContext:Os,useEffect:Mh,useImperativeHandle:Lp,useInsertionEffect:Pp,useLayoutEffect:Dp,useMemo:Fp,useReducer:Dh,useRef:kp,useState:function(){return Dh(tc)},useDebugValue:Lh,useDeferredValue:function(i){var c=Ps();return mr===null?c.memoizedState=i:Up(c,mr.memoizedState,i)},useTransition:function(){var i=Dh(tc)[0],c=Ps().memoizedState;return[i,c]},useMutableSource:Sp,useSyncExternalStore:_p,useId:zp,unstable_isNewReconciler:!1};function Ws(i,c){if(i&&i.defaultProps){c=be({},c),i=i.defaultProps;for(var p in i)c[p]===void 0&&(c[p]=i[p]);return c}return c}function Bh(i,c,p,b){c=i.memoizedState,p=p(b,c),p=p==null?c:be({},c,p),i.memoizedState=p,i.lanes===0&&(i.updateQueue.baseState=p)}var md={isMounted:function(i){return(i=i._reactInternals)?Pr(i)===i:!1},enqueueSetState:function(i,c,p){i=i._reactInternals;var b=Yr(),N=ma(i),j=Li(b,N);j.payload=c,p!=null&&(j.callback=p),c=da(i,j,N),c!==null&&(qs(c,i,N,b),ad(c,i,N))},enqueueReplaceState:function(i,c,p){i=i._reactInternals;var b=Yr(),N=ma(i),j=Li(b,N);j.tag=1,j.payload=c,p!=null&&(j.callback=p),c=da(i,j,N),c!==null&&(qs(c,i,N,b),ad(c,i,N))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var p=Yr(),b=ma(i),N=Li(p,b);N.tag=2,c!=null&&(N.callback=c),c=da(i,N,b),c!==null&&(qs(c,i,b,p),ad(c,i,b))}};function Hp(i,c,p,b,N,j,F){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(b,j,F):c.prototype&&c.prototype.isPureReactComponent?!je(p,b)||!je(N,j):!0}function Gp(i,c,p){var b=!1,N=oa,j=c.contextType;return typeof j=="object"&&j!==null?j=Os(j):(N=ns(c)?qa:Lr.current,b=c.contextTypes,j=(b=b!=null)?Lo(i,N):oa),c=new c(p,j),i.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=md,i.stateNode=c,c._reactInternals=i,b&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=N,i.__reactInternalMemoizedMaskedChildContext=j),c}function qp(i,c,p,b){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,b),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,b),c.state!==i&&md.enqueueReplaceState(c,c.state,null)}function Fh(i,c,p,b){var N=i.stateNode;N.props=p,N.state=i.memoizedState,N.refs={},_h(i);var j=c.contextType;typeof j=="object"&&j!==null?N.context=Os(j):(j=ns(c)?qa:Lr.current,N.context=Lo(i,j)),N.state=i.memoizedState,j=c.getDerivedStateFromProps,typeof j=="function"&&(Bh(i,c,j,p),N.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(c=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),c!==N.state&&md.enqueueReplaceState(N,N.state,null),od(i,p,N,b),N.state=i.memoizedState),typeof N.componentDidMount=="function"&&(i.flags|=4194308)}function Ho(i,c){try{var p="",b=c;do p+=ye(b),b=b.return;while(b);var N=p}catch(j){N=`
Error generating stack: `+j.message+`
`+j.stack}return{value:i,source:c,stack:N,digest:null}}function Uh(i,c,p){return{value:i,source:null,stack:p??null,digest:c??null}}function zh(i,c){try{console.error(c.value)}catch(p){setTimeout(function(){throw p})}}var qb=typeof WeakMap=="function"?WeakMap:Map;function Xp(i,c,p){p=Li(-1,p),p.tag=3,p.payload={element:null};var b=c.value;return p.callback=function(){bd||(bd=!0,nf=b),zh(i,c)},p}function Yp(i,c,p){p=Li(-1,p),p.tag=3;var b=i.type.getDerivedStateFromError;if(typeof b=="function"){var N=c.value;p.payload=function(){return b(N)},p.callback=function(){zh(i,c)}}var j=i.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(p.callback=function(){zh(i,c),typeof b!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var F=c.stack;this.componentDidCatch(c.value,{componentStack:F!==null?F:""})}),p}function Kp(i,c,p){var b=i.pingCache;if(b===null){b=i.pingCache=new qb;var N=new Set;b.set(c,N)}else N=b.get(c),N===void 0&&(N=new Set,b.set(c,N));N.has(p)||(N.add(p),i=oC.bind(null,i,c,p),c.then(i,i))}function Zp(i){do{var c;if((c=i.tag===13)&&(c=i.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return i;i=i.return}while(i!==null);return null}function Qp(i,c,p,b,N){return(i.mode&1)===0?(i===c?i.flags|=65536:(i.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(c=Li(-1,1),c.tag=2,da(p,c,1))),p.lanes|=1),i):(i.flags|=65536,i.lanes=N,i)}var Xb=G.ReactCurrentOwner,rs=!1;function Xr(i,c,p,b){c.child=i===null?wp(c,null,p,b):zo(c,i.child,p,b)}function Jp(i,c,p,b,N){p=p.render;var j=c.ref;return Vo(c,N),b=kh(i,c,p,b,j,N),p=Oh(),i!==null&&!rs?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~N,Bi(i,c,N)):(Ln&&p&&ph(c),c.flags|=1,Xr(i,c,b,N),c.child)}function eg(i,c,p,b,N){if(i===null){var j=p.type;return typeof j=="function"&&!df(j)&&j.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(c.tag=15,c.type=j,tg(i,c,j,b,N)):(i=Ad(p.type,null,b,c,c.mode,N),i.ref=c.ref,i.return=c,c.child=i)}if(j=i.child,(i.lanes&N)===0){var F=j.memoizedProps;if(p=p.compare,p=p!==null?p:je,p(F,b)&&i.ref===c.ref)return Bi(i,c,N)}return c.flags|=1,i=ga(j,b),i.ref=c.ref,i.return=c,c.child=i}function tg(i,c,p,b,N){if(i!==null){var j=i.memoizedProps;if(je(j,b)&&i.ref===c.ref)if(rs=!1,c.pendingProps=b=j,(i.lanes&N)!==0)(i.flags&131072)!==0&&(rs=!0);else return c.lanes=i.lanes,Bi(i,c,N)}return $h(i,c,p,b,N)}function ng(i,c,p){var b=c.pendingProps,N=b.children,j=i!==null?i.memoizedState:null;if(b.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nn(qo,xs),xs|=p;else{if((p&1073741824)===0)return i=j!==null?j.baseLanes|p:p,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:i,cachePool:null,transitions:null},c.updateQueue=null,Nn(qo,xs),xs|=i,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=j!==null?j.baseLanes:p,Nn(qo,xs),xs|=b}else j!==null?(b=j.baseLanes|p,c.memoizedState=null):b=p,Nn(qo,xs),xs|=b;return Xr(i,c,N,p),c.child}function rg(i,c){var p=c.ref;(i===null&&p!==null||i!==null&&i.ref!==p)&&(c.flags|=512,c.flags|=2097152)}function $h(i,c,p,b,N){var j=ns(p)?qa:Lr.current;return j=Lo(c,j),Vo(c,N),p=kh(i,c,p,b,j,N),b=Oh(),i!==null&&!rs?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~N,Bi(i,c,N)):(Ln&&b&&ph(c),c.flags|=1,Xr(i,c,p,N),c.child)}function sg(i,c,p,b,N){if(ns(p)){var j=!0;Qc(c)}else j=!1;if(Vo(c,N),c.stateNode===null)gd(i,c),Gp(c,p,b),Fh(c,p,b,N),b=!0;else if(i===null){var F=c.stateNode,ae=c.memoizedProps;F.props=ae;var fe=F.context,ke=p.contextType;typeof ke=="object"&&ke!==null?ke=Os(ke):(ke=ns(p)?qa:Lr.current,ke=Lo(c,ke));var Ve=p.getDerivedStateFromProps,He=typeof Ve=="function"||typeof F.getSnapshotBeforeUpdate=="function";He||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ae!==b||fe!==ke)&&qp(c,F,b,ke),ca=!1;var Fe=c.memoizedState;F.state=Fe,od(c,b,F,N),fe=c.memoizedState,ae!==b||Fe!==fe||ts.current||ca?(typeof Ve=="function"&&(Bh(c,p,Ve,b),fe=c.memoizedState),(ae=ca||Hp(c,p,ae,b,Fe,fe,ke))?(He||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(c.flags|=4194308)):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=b,c.memoizedState=fe),F.props=b,F.state=fe,F.context=ke,b=ae):(typeof F.componentDidMount=="function"&&(c.flags|=4194308),b=!1)}else{F=c.stateNode,vp(i,c),ae=c.memoizedProps,ke=c.type===c.elementType?ae:Ws(c.type,ae),F.props=ke,He=c.pendingProps,Fe=F.context,fe=p.contextType,typeof fe=="object"&&fe!==null?fe=Os(fe):(fe=ns(p)?qa:Lr.current,fe=Lo(c,fe));var ot=p.getDerivedStateFromProps;(Ve=typeof ot=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ae!==He||Fe!==fe)&&qp(c,F,b,fe),ca=!1,Fe=c.memoizedState,F.state=Fe,od(c,b,F,N);var ft=c.memoizedState;ae!==He||Fe!==ft||ts.current||ca?(typeof ot=="function"&&(Bh(c,p,ot,b),ft=c.memoizedState),(ke=ca||Hp(c,p,ke,b,Fe,ft,fe)||!1)?(Ve||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(b,ft,fe),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(b,ft,fe)),typeof F.componentDidUpdate=="function"&&(c.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof F.componentDidUpdate!="function"||ae===i.memoizedProps&&Fe===i.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ae===i.memoizedProps&&Fe===i.memoizedState||(c.flags|=1024),c.memoizedProps=b,c.memoizedState=ft),F.props=b,F.state=ft,F.context=fe,b=ke):(typeof F.componentDidUpdate!="function"||ae===i.memoizedProps&&Fe===i.memoizedState||(c.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ae===i.memoizedProps&&Fe===i.memoizedState||(c.flags|=1024),b=!1)}return Vh(i,c,p,b,j,N)}function Vh(i,c,p,b,N,j){rg(i,c);var F=(c.flags&128)!==0;if(!b&&!F)return N&&cp(c,p,!1),Bi(i,c,j);b=c.stateNode,Xb.current=c;var ae=F&&typeof p.getDerivedStateFromError!="function"?null:b.render();return c.flags|=1,i!==null&&F?(c.child=zo(c,i.child,null,j),c.child=zo(c,null,ae,j)):Xr(i,c,ae,j),c.memoizedState=b.state,N&&cp(c,p,!0),c.child}function ig(i){var c=i.stateNode;c.pendingContext?op(i,c.pendingContext,c.pendingContext!==c.context):c.context&&op(i,c.context,!1),Nh(i,c.containerInfo)}function ag(i,c,p,b,N){return Uo(),yh(N),c.flags|=256,Xr(i,c,p,b),c.child}var Wh={dehydrated:null,treeContext:null,retryLane:0};function Hh(i){return{baseLanes:i,cachePool:null,transitions:null}}function og(i,c,p){var b=c.pendingProps,N=zn.current,j=!1,F=(c.flags&128)!==0,ae;if((ae=F)||(ae=i!==null&&i.memoizedState===null?!1:(N&2)!==0),ae?(j=!0,c.flags&=-129):(i===null||i.memoizedState!==null)&&(N|=1),Nn(zn,N&1),i===null)return wh(c),i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((c.mode&1)===0?c.lanes=1:i.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(F=b.children,i=b.fallback,j?(b=c.mode,j=c.child,F={mode:"hidden",children:F},(b&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=F):j=jd(F,b,0,null),i=ro(i,b,p,null),j.return=c,i.return=c,j.sibling=i,c.child=j,c.child.memoizedState=Hh(p),c.memoizedState=Wh,i):Gh(c,F));if(N=i.memoizedState,N!==null&&(ae=N.dehydrated,ae!==null))return Yb(i,c,F,b,ae,N,p);if(j){j=b.fallback,F=c.mode,N=i.child,ae=N.sibling;var fe={mode:"hidden",children:b.children};return(F&1)===0&&c.child!==N?(b=c.child,b.childLanes=0,b.pendingProps=fe,c.deletions=null):(b=ga(N,fe),b.subtreeFlags=N.subtreeFlags&14680064),ae!==null?j=ga(ae,j):(j=ro(j,F,p,null),j.flags|=2),j.return=c,b.return=c,b.sibling=j,c.child=b,b=j,j=c.child,F=i.child.memoizedState,F=F===null?Hh(p):{baseLanes:F.baseLanes|p,cachePool:null,transitions:F.transitions},j.memoizedState=F,j.childLanes=i.childLanes&~p,c.memoizedState=Wh,b}return j=i.child,i=j.sibling,b=ga(j,{mode:"visible",children:b.children}),(c.mode&1)===0&&(b.lanes=p),b.return=c,b.sibling=null,i!==null&&(p=c.deletions,p===null?(c.deletions=[i],c.flags|=16):p.push(i)),c.child=b,c.memoizedState=null,b}function Gh(i,c){return c=jd({mode:"visible",children:c},i.mode,0,null),c.return=i,i.child=c}function pd(i,c,p,b){return b!==null&&yh(b),zo(c,i.child,null,p),i=Gh(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function Yb(i,c,p,b,N,j,F){if(p)return c.flags&256?(c.flags&=-257,b=Uh(Error(n(422))),pd(i,c,F,b)):c.memoizedState!==null?(c.child=i.child,c.flags|=128,null):(j=b.fallback,N=c.mode,b=jd({mode:"visible",children:b.children},N,0,null),j=ro(j,N,F,null),j.flags|=2,b.return=c,j.return=c,b.sibling=j,c.child=b,(c.mode&1)!==0&&zo(c,i.child,null,F),c.child.memoizedState=Hh(F),c.memoizedState=Wh,j);if((c.mode&1)===0)return pd(i,c,F,null);if(N.data==="$!"){if(b=N.nextSibling&&N.nextSibling.dataset,b)var ae=b.dgst;return b=ae,j=Error(n(419)),b=Uh(j,b,void 0),pd(i,c,F,b)}if(ae=(F&i.childLanes)!==0,rs||ae){if(b=br,b!==null){switch(F&-F){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(b.suspendedLanes|F))!==0?0:N,N!==0&&N!==j.retryLane&&(j.retryLane=N,Mi(i,N),qs(b,i,N,-1))}return cf(),b=Uh(Error(n(421))),pd(i,c,F,b)}return N.data==="$?"?(c.flags|=128,c.child=i.child,c=lC.bind(null,i),N._reactRetry=c,null):(i=j.treeContext,gs=ia(N.nextSibling),ps=c,Ln=!0,Vs=null,i!==null&&(Rs[ks++]=Pi,Rs[ks++]=Di,Rs[ks++]=Xa,Pi=i.id,Di=i.overflow,Xa=c),c=Gh(c,b.children),c.flags|=4096,c)}function lg(i,c,p){i.lanes|=c;var b=i.alternate;b!==null&&(b.lanes|=c),Eh(i.return,c,p)}function qh(i,c,p,b,N){var j=i.memoizedState;j===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:N}:(j.isBackwards=c,j.rendering=null,j.renderingStartTime=0,j.last=b,j.tail=p,j.tailMode=N)}function cg(i,c,p){var b=c.pendingProps,N=b.revealOrder,j=b.tail;if(Xr(i,c,b.children,p),b=zn.current,(b&2)!==0)b=b&1|2,c.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&lg(i,p,c);else if(i.tag===19)lg(i,p,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}b&=1}if(Nn(zn,b),(c.mode&1)===0)c.memoizedState=null;else switch(N){case"forwards":for(p=c.child,N=null;p!==null;)i=p.alternate,i!==null&&ld(i)===null&&(N=p),p=p.sibling;p=N,p===null?(N=c.child,c.child=null):(N=p.sibling,p.sibling=null),qh(c,!1,N,p,j);break;case"backwards":for(p=null,N=c.child,c.child=null;N!==null;){if(i=N.alternate,i!==null&&ld(i)===null){c.child=N;break}i=N.sibling,N.sibling=p,p=N,N=i}qh(c,!0,p,null,j);break;case"together":qh(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function gd(i,c){(c.mode&1)===0&&i!==null&&(i.alternate=null,c.alternate=null,c.flags|=2)}function Bi(i,c,p){if(i!==null&&(c.dependencies=i.dependencies),Ja|=c.lanes,(p&c.childLanes)===0)return null;if(i!==null&&c.child!==i.child)throw Error(n(153));if(c.child!==null){for(i=c.child,p=ga(i,i.pendingProps),c.child=p,p.return=c;i.sibling!==null;)i=i.sibling,p=p.sibling=ga(i,i.pendingProps),p.return=c;p.sibling=null}return c.child}function Kb(i,c,p){switch(c.tag){case 3:ig(c),Uo();break;case 5:Ep(c);break;case 1:ns(c.type)&&Qc(c);break;case 4:Nh(c,c.stateNode.containerInfo);break;case 10:var b=c.type._context,N=c.memoizedProps.value;Nn(sd,b._currentValue),b._currentValue=N;break;case 13:if(b=c.memoizedState,b!==null)return b.dehydrated!==null?(Nn(zn,zn.current&1),c.flags|=128,null):(p&c.child.childLanes)!==0?og(i,c,p):(Nn(zn,zn.current&1),i=Bi(i,c,p),i!==null?i.sibling:null);Nn(zn,zn.current&1);break;case 19:if(b=(p&c.childLanes)!==0,(i.flags&128)!==0){if(b)return cg(i,c,p);c.flags|=128}if(N=c.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Nn(zn,zn.current),b)break;return null;case 22:case 23:return c.lanes=0,ng(i,c,p)}return Bi(i,c,p)}var dg,Xh,ug,hg;dg=function(i,c){for(var p=c.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Xh=function(){},ug=function(i,c,p,b){var N=i.memoizedProps;if(N!==b){i=c.stateNode,Za(hi.current);var j=null;switch(p){case"input":N=Ot(i,N),b=Ot(i,b),j=[];break;case"select":N=be({},N,{value:void 0}),b=be({},b,{value:void 0}),j=[];break;case"textarea":N=Pt(i,N),b=Pt(i,b),j=[];break;default:typeof N.onClick!="function"&&typeof b.onClick=="function"&&(i.onclick=Yc)}en(p,b);var F;p=null;for(ke in N)if(!b.hasOwnProperty(ke)&&N.hasOwnProperty(ke)&&N[ke]!=null)if(ke==="style"){var ae=N[ke];for(F in ae)ae.hasOwnProperty(F)&&(p||(p={}),p[F]="")}else ke!=="dangerouslySetInnerHTML"&&ke!=="children"&&ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&ke!=="autoFocus"&&(d.hasOwnProperty(ke)?j||(j=[]):(j=j||[]).push(ke,null));for(ke in b){var fe=b[ke];if(ae=N?.[ke],b.hasOwnProperty(ke)&&fe!==ae&&(fe!=null||ae!=null))if(ke==="style")if(ae){for(F in ae)!ae.hasOwnProperty(F)||fe&&fe.hasOwnProperty(F)||(p||(p={}),p[F]="");for(F in fe)fe.hasOwnProperty(F)&&ae[F]!==fe[F]&&(p||(p={}),p[F]=fe[F])}else p||(j||(j=[]),j.push(ke,p)),p=fe;else ke==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,ae=ae?ae.__html:void 0,fe!=null&&ae!==fe&&(j=j||[]).push(ke,fe)):ke==="children"?typeof fe!="string"&&typeof fe!="number"||(j=j||[]).push(ke,""+fe):ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&(d.hasOwnProperty(ke)?(fe!=null&&ke==="onScroll"&&Rn("scroll",i),j||ae===fe||(j=[])):(j=j||[]).push(ke,fe))}p&&(j=j||[]).push("style",p);var ke=j;(c.updateQueue=ke)&&(c.flags|=4)}},hg=function(i,c,p,b){p!==b&&(c.flags|=4)};function rc(i,c){if(!Ln)switch(i.tailMode){case"hidden":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?i.tail=null:p.sibling=null;break;case"collapsed":p=i.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:b.sibling=null}}function Fr(i){var c=i.alternate!==null&&i.alternate.child===i.child,p=0,b=0;if(c)for(var N=i.child;N!==null;)p|=N.lanes|N.childLanes,b|=N.subtreeFlags&14680064,b|=N.flags&14680064,N.return=i,N=N.sibling;else for(N=i.child;N!==null;)p|=N.lanes|N.childLanes,b|=N.subtreeFlags,b|=N.flags,N.return=i,N=N.sibling;return i.subtreeFlags|=b,i.childLanes=p,c}function Zb(i,c,p){var b=c.pendingProps;switch(gh(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(c),null;case 1:return ns(c.type)&&Zc(),Fr(c),null;case 3:return b=c.stateNode,Wo(),kn(ts),kn(Lr),Ih(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(i===null||i.child===null)&&(nd(c)?c.flags|=4:i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Vs!==null&&(af(Vs),Vs=null))),Xh(i,c),Fr(c),null;case 5:Ah(c);var N=Za(Ql.current);if(p=c.type,i!==null&&c.stateNode!=null)ug(i,c,p,b,N),i.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!b){if(c.stateNode===null)throw Error(n(166));return Fr(c),null}if(i=Za(hi.current),nd(c)){b=c.stateNode,p=c.type;var j=c.memoizedProps;switch(b[ui]=c,b[ql]=j,i=(c.mode&1)!==0,p){case"dialog":Rn("cancel",b),Rn("close",b);break;case"iframe":case"object":case"embed":Rn("load",b);break;case"video":case"audio":for(N=0;N<Wl.length;N++)Rn(Wl[N],b);break;case"source":Rn("error",b);break;case"img":case"image":case"link":Rn("error",b),Rn("load",b);break;case"details":Rn("toggle",b);break;case"input":Me(b,j),Rn("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!j.multiple},Rn("invalid",b);break;case"textarea":Mt(b,j),Rn("invalid",b)}en(p,j),N=null;for(var F in j)if(j.hasOwnProperty(F)){var ae=j[F];F==="children"?typeof ae=="string"?b.textContent!==ae&&(j.suppressHydrationWarning!==!0&&Xc(b.textContent,ae,i),N=["children",ae]):typeof ae=="number"&&b.textContent!==""+ae&&(j.suppressHydrationWarning!==!0&&Xc(b.textContent,ae,i),N=["children",""+ae]):d.hasOwnProperty(F)&&ae!=null&&F==="onScroll"&&Rn("scroll",b)}switch(p){case"input":We(b),Te(b,j,!0);break;case"textarea":We(b),kr(b);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(b.onclick=Yc)}b=N,c.updateQueue=b,b!==null&&(c.flags|=4)}else{F=N.nodeType===9?N:N.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Vt(p)),i==="http://www.w3.org/1999/xhtml"?p==="script"?(i=F.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof b.is=="string"?i=F.createElement(p,{is:b.is}):(i=F.createElement(p),p==="select"&&(F=i,b.multiple?F.multiple=!0:b.size&&(F.size=b.size))):i=F.createElementNS(i,p),i[ui]=c,i[ql]=b,dg(i,c,!1,!1),c.stateNode=i;e:{switch(F=rn(p,b),p){case"dialog":Rn("cancel",i),Rn("close",i),N=b;break;case"iframe":case"object":case"embed":Rn("load",i),N=b;break;case"video":case"audio":for(N=0;N<Wl.length;N++)Rn(Wl[N],i);N=b;break;case"source":Rn("error",i),N=b;break;case"img":case"image":case"link":Rn("error",i),Rn("load",i),N=b;break;case"details":Rn("toggle",i),N=b;break;case"input":Me(i,b),N=Ot(i,b),Rn("invalid",i);break;case"option":N=b;break;case"select":i._wrapperState={wasMultiple:!!b.multiple},N=be({},b,{value:void 0}),Rn("invalid",i);break;case"textarea":Mt(i,b),N=Pt(i,b),Rn("invalid",i);break;default:N=b}en(p,N),ae=N;for(j in ae)if(ae.hasOwnProperty(j)){var fe=ae[j];j==="style"?Je(i,fe):j==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,fe!=null&&qt(i,fe)):j==="children"?typeof fe=="string"?(p!=="textarea"||fe!=="")&&Hn(i,fe):typeof fe=="number"&&Hn(i,""+fe):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(d.hasOwnProperty(j)?fe!=null&&j==="onScroll"&&Rn("scroll",i):fe!=null&&B(i,j,fe,F))}switch(p){case"input":We(i),Te(i,b,!1);break;case"textarea":We(i),kr(i);break;case"option":b.value!=null&&i.setAttribute("value",""+Ce(b.value));break;case"select":i.multiple=!!b.multiple,j=b.value,j!=null?Ue(i,!!b.multiple,j,!1):b.defaultValue!=null&&Ue(i,!!b.multiple,b.defaultValue,!0);break;default:typeof N.onClick=="function"&&(i.onclick=Yc)}switch(p){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Fr(c),null;case 6:if(i&&c.stateNode!=null)hg(i,c,i.memoizedProps,b);else{if(typeof b!="string"&&c.stateNode===null)throw Error(n(166));if(p=Za(Ql.current),Za(hi.current),nd(c)){if(b=c.stateNode,p=c.memoizedProps,b[ui]=c,(j=b.nodeValue!==p)&&(i=ps,i!==null))switch(i.tag){case 3:Xc(b.nodeValue,p,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Xc(b.nodeValue,p,(i.mode&1)!==0)}j&&(c.flags|=4)}else b=(p.nodeType===9?p:p.ownerDocument).createTextNode(b),b[ui]=c,c.stateNode=b}return Fr(c),null;case 13:if(kn(zn),b=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ln&&gs!==null&&(c.mode&1)!==0&&(c.flags&128)===0)pp(),Uo(),c.flags|=98560,j=!1;else if(j=nd(c),b!==null&&b.dehydrated!==null){if(i===null){if(!j)throw Error(n(318));if(j=c.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(n(317));j[ui]=c}else Uo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Fr(c),j=!1}else Vs!==null&&(af(Vs),Vs=null),j=!0;if(!j)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=p,c):(b=b!==null,b!==(i!==null&&i.memoizedState!==null)&&b&&(c.child.flags|=8192,(c.mode&1)!==0&&(i===null||(zn.current&1)!==0?pr===0&&(pr=3):cf())),c.updateQueue!==null&&(c.flags|=4),Fr(c),null);case 4:return Wo(),Xh(i,c),i===null&&Hl(c.stateNode.containerInfo),Fr(c),null;case 10:return Ch(c.type._context),Fr(c),null;case 17:return ns(c.type)&&Zc(),Fr(c),null;case 19:if(kn(zn),j=c.memoizedState,j===null)return Fr(c),null;if(b=(c.flags&128)!==0,F=j.rendering,F===null)if(b)rc(j,!1);else{if(pr!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(F=ld(i),F!==null){for(c.flags|=128,rc(j,!1),b=F.updateQueue,b!==null&&(c.updateQueue=b,c.flags|=4),c.subtreeFlags=0,b=p,p=c.child;p!==null;)j=p,i=b,j.flags&=14680066,F=j.alternate,F===null?(j.childLanes=0,j.lanes=i,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=F.childLanes,j.lanes=F.lanes,j.child=F.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=F.memoizedProps,j.memoizedState=F.memoizedState,j.updateQueue=F.updateQueue,j.type=F.type,i=F.dependencies,j.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),p=p.sibling;return Nn(zn,zn.current&1|2),c.child}i=i.sibling}j.tail!==null&&pe()>Xo&&(c.flags|=128,b=!0,rc(j,!1),c.lanes=4194304)}else{if(!b)if(i=ld(F),i!==null){if(c.flags|=128,b=!0,p=i.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),rc(j,!0),j.tail===null&&j.tailMode==="hidden"&&!F.alternate&&!Ln)return Fr(c),null}else 2*pe()-j.renderingStartTime>Xo&&p!==1073741824&&(c.flags|=128,b=!0,rc(j,!1),c.lanes=4194304);j.isBackwards?(F.sibling=c.child,c.child=F):(p=j.last,p!==null?p.sibling=F:c.child=F,j.last=F)}return j.tail!==null?(c=j.tail,j.rendering=c,j.tail=c.sibling,j.renderingStartTime=pe(),c.sibling=null,p=zn.current,Nn(zn,b?p&1|2:p&1),c):(Fr(c),null);case 22:case 23:return lf(),b=c.memoizedState!==null,i!==null&&i.memoizedState!==null!==b&&(c.flags|=8192),b&&(c.mode&1)!==0?(xs&1073741824)!==0&&(Fr(c),c.subtreeFlags&6&&(c.flags|=8192)):Fr(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function Qb(i,c){switch(gh(c),c.tag){case 1:return ns(c.type)&&Zc(),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return Wo(),kn(ts),kn(Lr),Ih(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 5:return Ah(c),null;case 13:if(kn(zn),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Uo()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return kn(zn),null;case 4:return Wo(),null;case 10:return Ch(c.type._context),null;case 22:case 23:return lf(),null;case 24:return null;default:return null}}var xd=!1,Ur=!1,Jb=typeof WeakSet=="function"?WeakSet:Set,dt=null;function Go(i,c){var p=i.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(b){Yn(i,c,b)}else p.current=null}function Yh(i,c,p){try{p()}catch(b){Yn(i,c,b)}}var fg=!1;function eC(i,c){if(oh=ci,i=Zt(),Ft(i)){if("selectionStart"in i)var p={start:i.selectionStart,end:i.selectionEnd};else e:{p=(p=i.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var N=b.anchorOffset,j=b.focusNode;b=b.focusOffset;try{p.nodeType,j.nodeType}catch{p=null;break e}var F=0,ae=-1,fe=-1,ke=0,Ve=0,He=i,Fe=null;t:for(;;){for(var ot;He!==p||N!==0&&He.nodeType!==3||(ae=F+N),He!==j||b!==0&&He.nodeType!==3||(fe=F+b),He.nodeType===3&&(F+=He.nodeValue.length),(ot=He.firstChild)!==null;)Fe=He,He=ot;for(;;){if(He===i)break t;if(Fe===p&&++ke===N&&(ae=F),Fe===j&&++Ve===b&&(fe=F),(ot=He.nextSibling)!==null)break;He=Fe,Fe=He.parentNode}He=ot}p=ae===-1||fe===-1?null:{start:ae,end:fe}}else p=null}p=p||{start:0,end:0}}else p=null;for(lh={focusedElem:i,selectionRange:p},ci=!1,dt=c;dt!==null;)if(c=dt,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,dt=i;else for(;dt!==null;){c=dt;try{var ft=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var gt=ft.memoizedProps,nr=ft.memoizedState,Se=c.stateNode,xe=Se.getSnapshotBeforeUpdate(c.elementType===c.type?gt:Ws(c.type,gt),nr);Se.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:var Ne=c.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Qe){Yn(c,c.return,Qe)}if(i=c.sibling,i!==null){i.return=c.return,dt=i;break}dt=c.return}return ft=fg,fg=!1,ft}function sc(i,c,p){var b=c.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var N=b=b.next;do{if((N.tag&i)===i){var j=N.destroy;N.destroy=void 0,j!==void 0&&Yh(c,p,j)}N=N.next}while(N!==b)}}function wd(i,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&i)===i){var b=p.create;p.destroy=b()}p=p.next}while(p!==c)}}function Kh(i){var c=i.ref;if(c!==null){var p=i.stateNode;switch(i.tag){case 5:i=p;break;default:i=p}typeof c=="function"?c(i):c.current=i}}function mg(i){var c=i.alternate;c!==null&&(i.alternate=null,mg(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&(delete c[ui],delete c[ql],delete c[hh],delete c[Mb],delete c[Lb])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function pg(i){return i.tag===5||i.tag===3||i.tag===4}function gg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||pg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Zh(i,c,p){var b=i.tag;if(b===5||b===6)i=i.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(i,c):p.insertBefore(i,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(i,p)):(c=p,c.appendChild(i)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=Yc));else if(b!==4&&(i=i.child,i!==null))for(Zh(i,c,p),i=i.sibling;i!==null;)Zh(i,c,p),i=i.sibling}function Qh(i,c,p){var b=i.tag;if(b===5||b===6)i=i.stateNode,c?p.insertBefore(i,c):p.appendChild(i);else if(b!==4&&(i=i.child,i!==null))for(Qh(i,c,p),i=i.sibling;i!==null;)Qh(i,c,p),i=i.sibling}var Ar=null,Hs=!1;function ua(i,c,p){for(p=p.child;p!==null;)xg(i,c,p),p=p.sibling}function xg(i,c,p){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(nt,p)}catch{}switch(p.tag){case 5:Ur||Go(p,c);case 6:var b=Ar,N=Hs;Ar=null,ua(i,c,p),Ar=b,Hs=N,Ar!==null&&(Hs?(i=Ar,p=p.stateNode,i.nodeType===8?i.parentNode.removeChild(p):i.removeChild(p)):Ar.removeChild(p.stateNode));break;case 18:Ar!==null&&(Hs?(i=Ar,p=p.stateNode,i.nodeType===8?uh(i.parentNode,p):i.nodeType===1&&uh(i,p),Us(i)):uh(Ar,p.stateNode));break;case 4:b=Ar,N=Hs,Ar=p.stateNode.containerInfo,Hs=!0,ua(i,c,p),Ar=b,Hs=N;break;case 0:case 11:case 14:case 15:if(!Ur&&(b=p.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){N=b=b.next;do{var j=N,F=j.destroy;j=j.tag,F!==void 0&&((j&2)!==0||(j&4)!==0)&&Yh(p,c,F),N=N.next}while(N!==b)}ua(i,c,p);break;case 1:if(!Ur&&(Go(p,c),b=p.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=p.memoizedProps,b.state=p.memoizedState,b.componentWillUnmount()}catch(ae){Yn(p,c,ae)}ua(i,c,p);break;case 21:ua(i,c,p);break;case 22:p.mode&1?(Ur=(b=Ur)||p.memoizedState!==null,ua(i,c,p),Ur=b):ua(i,c,p);break;default:ua(i,c,p)}}function wg(i){var c=i.updateQueue;if(c!==null){i.updateQueue=null;var p=i.stateNode;p===null&&(p=i.stateNode=new Jb),c.forEach(function(b){var N=cC.bind(null,i,b);p.has(b)||(p.add(b),b.then(N,N))})}}function Gs(i,c){var p=c.deletions;if(p!==null)for(var b=0;b<p.length;b++){var N=p[b];try{var j=i,F=c,ae=F;e:for(;ae!==null;){switch(ae.tag){case 5:Ar=ae.stateNode,Hs=!1;break e;case 3:Ar=ae.stateNode.containerInfo,Hs=!0;break e;case 4:Ar=ae.stateNode.containerInfo,Hs=!0;break e}ae=ae.return}if(Ar===null)throw Error(n(160));xg(j,F,N),Ar=null,Hs=!1;var fe=N.alternate;fe!==null&&(fe.return=null),N.return=null}catch(ke){Yn(N,c,ke)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)yg(c,i),c=c.sibling}function yg(i,c){var p=i.alternate,b=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Gs(c,i),mi(i),b&4){try{sc(3,i,i.return),wd(3,i)}catch(gt){Yn(i,i.return,gt)}try{sc(5,i,i.return)}catch(gt){Yn(i,i.return,gt)}}break;case 1:Gs(c,i),mi(i),b&512&&p!==null&&Go(p,p.return);break;case 5:if(Gs(c,i),mi(i),b&512&&p!==null&&Go(p,p.return),i.flags&32){var N=i.stateNode;try{Hn(N,"")}catch(gt){Yn(i,i.return,gt)}}if(b&4&&(N=i.stateNode,N!=null)){var j=i.memoizedProps,F=p!==null?p.memoizedProps:j,ae=i.type,fe=i.updateQueue;if(i.updateQueue=null,fe!==null)try{ae==="input"&&j.type==="radio"&&j.name!=null&&at(N,j),rn(ae,F);var ke=rn(ae,j);for(F=0;F<fe.length;F+=2){var Ve=fe[F],He=fe[F+1];Ve==="style"?Je(N,He):Ve==="dangerouslySetInnerHTML"?qt(N,He):Ve==="children"?Hn(N,He):B(N,Ve,He,ke)}switch(ae){case"input":Z(N,j);break;case"textarea":Yt(N,j);break;case"select":var Fe=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!j.multiple;var ot=j.value;ot!=null?Ue(N,!!j.multiple,ot,!1):Fe!==!!j.multiple&&(j.defaultValue!=null?Ue(N,!!j.multiple,j.defaultValue,!0):Ue(N,!!j.multiple,j.multiple?[]:"",!1))}N[ql]=j}catch(gt){Yn(i,i.return,gt)}}break;case 6:if(Gs(c,i),mi(i),b&4){if(i.stateNode===null)throw Error(n(162));N=i.stateNode,j=i.memoizedProps;try{N.nodeValue=j}catch(gt){Yn(i,i.return,gt)}}break;case 3:if(Gs(c,i),mi(i),b&4&&p!==null&&p.memoizedState.isDehydrated)try{Us(c.containerInfo)}catch(gt){Yn(i,i.return,gt)}break;case 4:Gs(c,i),mi(i);break;case 13:Gs(c,i),mi(i),N=i.child,N.flags&8192&&(j=N.memoizedState!==null,N.stateNode.isHidden=j,!j||N.alternate!==null&&N.alternate.memoizedState!==null||(tf=pe())),b&4&&wg(i);break;case 22:if(Ve=p!==null&&p.memoizedState!==null,i.mode&1?(Ur=(ke=Ur)||Ve,Gs(c,i),Ur=ke):Gs(c,i),mi(i),b&8192){if(ke=i.memoizedState!==null,(i.stateNode.isHidden=ke)&&!Ve&&(i.mode&1)!==0)for(dt=i,Ve=i.child;Ve!==null;){for(He=dt=Ve;dt!==null;){switch(Fe=dt,ot=Fe.child,Fe.tag){case 0:case 11:case 14:case 15:sc(4,Fe,Fe.return);break;case 1:Go(Fe,Fe.return);var ft=Fe.stateNode;if(typeof ft.componentWillUnmount=="function"){b=Fe,p=Fe.return;try{c=b,ft.props=c.memoizedProps,ft.state=c.memoizedState,ft.componentWillUnmount()}catch(gt){Yn(b,p,gt)}}break;case 5:Go(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){Cg(He);continue}}ot!==null?(ot.return=Fe,dt=ot):Cg(He)}Ve=Ve.sibling}e:for(Ve=null,He=i;;){if(He.tag===5){if(Ve===null){Ve=He;try{N=He.stateNode,ke?(j=N.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(ae=He.stateNode,fe=He.memoizedProps.style,F=fe!=null&&fe.hasOwnProperty("display")?fe.display:null,ae.style.display=vn("display",F))}catch(gt){Yn(i,i.return,gt)}}}else if(He.tag===6){if(Ve===null)try{He.stateNode.nodeValue=ke?"":He.memoizedProps}catch(gt){Yn(i,i.return,gt)}}else if((He.tag!==22&&He.tag!==23||He.memoizedState===null||He===i)&&He.child!==null){He.child.return=He,He=He.child;continue}if(He===i)break e;for(;He.sibling===null;){if(He.return===null||He.return===i)break e;Ve===He&&(Ve=null),He=He.return}Ve===He&&(Ve=null),He.sibling.return=He.return,He=He.sibling}}break;case 19:Gs(c,i),mi(i),b&4&&wg(i);break;case 21:break;default:Gs(c,i),mi(i)}}function mi(i){var c=i.flags;if(c&2){try{e:{for(var p=i.return;p!==null;){if(pg(p)){var b=p;break e}p=p.return}throw Error(n(160))}switch(b.tag){case 5:var N=b.stateNode;b.flags&32&&(Hn(N,""),b.flags&=-33);var j=gg(i);Qh(i,j,N);break;case 3:case 4:var F=b.stateNode.containerInfo,ae=gg(i);Zh(i,ae,F);break;default:throw Error(n(161))}}catch(fe){Yn(i,i.return,fe)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function tC(i,c,p){dt=i,vg(i)}function vg(i,c,p){for(var b=(i.mode&1)!==0;dt!==null;){var N=dt,j=N.child;if(N.tag===22&&b){var F=N.memoizedState!==null||xd;if(!F){var ae=N.alternate,fe=ae!==null&&ae.memoizedState!==null||Ur;ae=xd;var ke=Ur;if(xd=F,(Ur=fe)&&!ke)for(dt=N;dt!==null;)F=dt,fe=F.child,F.tag===22&&F.memoizedState!==null?Eg(N):fe!==null?(fe.return=F,dt=fe):Eg(N);for(;j!==null;)dt=j,vg(j),j=j.sibling;dt=N,xd=ae,Ur=ke}bg(i)}else(N.subtreeFlags&8772)!==0&&j!==null?(j.return=N,dt=j):bg(i)}}function bg(i){for(;dt!==null;){var c=dt;if((c.flags&8772)!==0){var p=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Ur||wd(5,c);break;case 1:var b=c.stateNode;if(c.flags&4&&!Ur)if(p===null)b.componentDidMount();else{var N=c.elementType===c.type?p.memoizedProps:Ws(c.type,p.memoizedProps);b.componentDidUpdate(N,p.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var j=c.updateQueue;j!==null&&Cp(c,j,b);break;case 3:var F=c.updateQueue;if(F!==null){if(p=null,c.child!==null)switch(c.child.tag){case 5:p=c.child.stateNode;break;case 1:p=c.child.stateNode}Cp(c,F,p)}break;case 5:var ae=c.stateNode;if(p===null&&c.flags&4){p=ae;var fe=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":fe.autoFocus&&p.focus();break;case"img":fe.src&&(p.src=fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ke=c.alternate;if(ke!==null){var Ve=ke.memoizedState;if(Ve!==null){var He=Ve.dehydrated;He!==null&&Us(He)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ur||c.flags&512&&Kh(c)}catch(Fe){Yn(c,c.return,Fe)}}if(c===i){dt=null;break}if(p=c.sibling,p!==null){p.return=c.return,dt=p;break}dt=c.return}}function Cg(i){for(;dt!==null;){var c=dt;if(c===i){dt=null;break}var p=c.sibling;if(p!==null){p.return=c.return,dt=p;break}dt=c.return}}function Eg(i){for(;dt!==null;){var c=dt;try{switch(c.tag){case 0:case 11:case 15:var p=c.return;try{wd(4,c)}catch(fe){Yn(c,p,fe)}break;case 1:var b=c.stateNode;if(typeof b.componentDidMount=="function"){var N=c.return;try{b.componentDidMount()}catch(fe){Yn(c,N,fe)}}var j=c.return;try{Kh(c)}catch(fe){Yn(c,j,fe)}break;case 5:var F=c.return;try{Kh(c)}catch(fe){Yn(c,F,fe)}}}catch(fe){Yn(c,c.return,fe)}if(c===i){dt=null;break}var ae=c.sibling;if(ae!==null){ae.return=c.return,dt=ae;break}dt=c.return}}var nC=Math.ceil,yd=G.ReactCurrentDispatcher,Jh=G.ReactCurrentOwner,Ds=G.ReactCurrentBatchConfig,on=0,br=null,ir=null,jr=0,xs=0,qo=aa(0),pr=0,ic=null,Ja=0,vd=0,ef=0,ac=null,ss=null,tf=0,Xo=1/0,Fi=null,bd=!1,nf=null,ha=null,Cd=!1,fa=null,Ed=0,oc=0,rf=null,Sd=-1,_d=0;function Yr(){return(on&6)!==0?pe():Sd!==-1?Sd:Sd=pe()}function ma(i){return(i.mode&1)===0?1:(on&2)!==0&&jr!==0?jr&-jr:Fb.transition!==null?(_d===0&&(_d=dr()),_d):(i=Xt,i!==0||(i=window.event,i=i===void 0?16:Pl(i.type)),i)}function qs(i,c,p,b){if(50<oc)throw oc=0,rf=null,Error(n(185));K(i,p,b),((on&2)===0||i!==br)&&(i===br&&((on&2)===0&&(vd|=p),pr===4&&pa(i,jr)),is(i,b),p===1&&on===0&&(c.mode&1)===0&&(Xo=pe()+500,Jc&&la()))}function is(i,c){var p=i.callbackNode;Yi(i,c);var b=qr(i,i===br?jr:0);if(b===0)p!==null&&sr(p),i.callbackNode=null,i.callbackPriority=0;else if(c=b&-b,i.callbackPriority!==c){if(p!=null&&sr(p),c===1)i.tag===0?Bb(_g.bind(null,i)):dp(_g.bind(null,i)),Pb(function(){(on&6)===0&&la()}),p=null;else{switch(Pc(b)){case 1:p=ge;break;case 4:p=ht;break;case 16:p=qe;break;case 536870912:p=vt;break;default:p=qe}p=Og(p,Sg.bind(null,i))}i.callbackPriority=c,i.callbackNode=p}}function Sg(i,c){if(Sd=-1,_d=0,(on&6)!==0)throw Error(n(327));var p=i.callbackNode;if(Yo()&&i.callbackNode!==p)return null;var b=qr(i,i===br?jr:0);if(b===0)return null;if((b&30)!==0||(b&i.expiredLanes)!==0||c)c=Nd(i,b);else{c=b;var N=on;on|=2;var j=Ag();(br!==i||jr!==c)&&(Fi=null,Xo=pe()+500,to(i,c));do try{iC();break}catch(ae){Ng(i,ae)}while(!0);bh(),yd.current=j,on=N,ir!==null?c=0:(br=null,jr=0,c=pr)}if(c!==0){if(c===2&&(N=fn(i),N!==0&&(b=N,c=sf(i,N))),c===1)throw p=ic,to(i,0),pa(i,b),is(i,pe()),p;if(c===6)pa(i,b);else{if(N=i.current.alternate,(b&30)===0&&!rC(N)&&(c=Nd(i,b),c===2&&(j=fn(i),j!==0&&(b=j,c=sf(i,j))),c===1))throw p=ic,to(i,0),pa(i,b),is(i,pe()),p;switch(i.finishedWork=N,i.finishedLanes=b,c){case 0:case 1:throw Error(n(345));case 2:no(i,ss,Fi);break;case 3:if(pa(i,b),(b&130023424)===b&&(c=tf+500-pe(),10<c)){if(qr(i,0)!==0)break;if(N=i.suspendedLanes,(N&b)!==b){Yr(),i.pingedLanes|=i.suspendedLanes&N;break}i.timeoutHandle=dh(no.bind(null,i,ss,Fi),c);break}no(i,ss,Fi);break;case 4:if(pa(i,b),(b&4194240)===b)break;for(c=i.eventTimes,N=-1;0<b;){var F=31-In(b);j=1<<F,F=c[F],F>N&&(N=F),b&=~j}if(b=N,b=pe()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*nC(b/1960))-b,10<b){i.timeoutHandle=dh(no.bind(null,i,ss,Fi),b);break}no(i,ss,Fi);break;case 5:no(i,ss,Fi);break;default:throw Error(n(329))}}}return is(i,pe()),i.callbackNode===p?Sg.bind(null,i):null}function sf(i,c){var p=ac;return i.current.memoizedState.isDehydrated&&(to(i,c).flags|=256),i=Nd(i,c),i!==2&&(c=ss,ss=p,c!==null&&af(c)),i}function af(i){ss===null?ss=i:ss.push.apply(ss,i)}function rC(i){for(var c=i;;){if(c.flags&16384){var p=c.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var b=0;b<p.length;b++){var N=p[b],j=N.getSnapshot;N=N.value;try{if(!ve(j(),N))return!1}catch{return!1}}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function pa(i,c){for(c&=~ef,c&=~vd,i.suspendedLanes|=c,i.pingedLanes&=~c,i=i.expirationTimes;0<c;){var p=31-In(c),b=1<<p;i[p]=-1,c&=~b}}function _g(i){if((on&6)!==0)throw Error(n(327));Yo();var c=qr(i,0);if((c&1)===0)return is(i,pe()),null;var p=Nd(i,c);if(i.tag!==0&&p===2){var b=fn(i);b!==0&&(c=b,p=sf(i,b))}if(p===1)throw p=ic,to(i,0),pa(i,c),is(i,pe()),p;if(p===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=c,no(i,ss,Fi),is(i,pe()),null}function of(i,c){var p=on;on|=1;try{return i(c)}finally{on=p,on===0&&(Xo=pe()+500,Jc&&la())}}function eo(i){fa!==null&&fa.tag===0&&(on&6)===0&&Yo();var c=on;on|=1;var p=Ds.transition,b=Xt;try{if(Ds.transition=null,Xt=1,i)return i()}finally{Xt=b,Ds.transition=p,on=c,(on&6)===0&&la()}}function lf(){xs=qo.current,kn(qo)}function to(i,c){i.finishedWork=null,i.finishedLanes=0;var p=i.timeoutHandle;if(p!==-1&&(i.timeoutHandle=-1,Ob(p)),ir!==null)for(p=ir.return;p!==null;){var b=p;switch(gh(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Zc();break;case 3:Wo(),kn(ts),kn(Lr),Ih();break;case 5:Ah(b);break;case 4:Wo();break;case 13:kn(zn);break;case 19:kn(zn);break;case 10:Ch(b.type._context);break;case 22:case 23:lf()}p=p.return}if(br=i,ir=i=ga(i.current,null),jr=xs=c,pr=0,ic=null,ef=vd=Ja=0,ss=ac=null,Ka!==null){for(c=0;c<Ka.length;c++)if(p=Ka[c],b=p.interleaved,b!==null){p.interleaved=null;var N=b.next,j=p.pending;if(j!==null){var F=j.next;j.next=N,b.next=F}p.pending=b}Ka=null}return i}function Ng(i,c){do{var p=ir;try{if(bh(),cd.current=fd,dd){for(var b=$n.memoizedState;b!==null;){var N=b.queue;N!==null&&(N.pending=null),b=b.next}dd=!1}if(Qa=0,vr=mr=$n=null,Jl=!1,ec=0,Jh.current=null,p===null||p.return===null){pr=1,ic=c,ir=null;break}e:{var j=i,F=p.return,ae=p,fe=c;if(c=jr,ae.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var ke=fe,Ve=ae,He=Ve.tag;if((Ve.mode&1)===0&&(He===0||He===11||He===15)){var Fe=Ve.alternate;Fe?(Ve.updateQueue=Fe.updateQueue,Ve.memoizedState=Fe.memoizedState,Ve.lanes=Fe.lanes):(Ve.updateQueue=null,Ve.memoizedState=null)}var ot=Zp(F);if(ot!==null){ot.flags&=-257,Qp(ot,F,ae,j,c),ot.mode&1&&Kp(j,ke,c),c=ot,fe=ke;var ft=c.updateQueue;if(ft===null){var gt=new Set;gt.add(fe),c.updateQueue=gt}else ft.add(fe);break e}else{if((c&1)===0){Kp(j,ke,c),cf();break e}fe=Error(n(426))}}else if(Ln&&ae.mode&1){var nr=Zp(F);if(nr!==null){(nr.flags&65536)===0&&(nr.flags|=256),Qp(nr,F,ae,j,c),yh(Ho(fe,ae));break e}}j=fe=Ho(fe,ae),pr!==4&&(pr=2),ac===null?ac=[j]:ac.push(j),j=F;do{switch(j.tag){case 3:j.flags|=65536,c&=-c,j.lanes|=c;var Se=Xp(j,fe,c);bp(j,Se);break e;case 1:ae=fe;var xe=j.type,Ne=j.stateNode;if((j.flags&128)===0&&(typeof xe.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(ha===null||!ha.has(Ne)))){j.flags|=65536,c&=-c,j.lanes|=c;var Qe=Yp(j,ae,c);bp(j,Qe);break e}}j=j.return}while(j!==null)}Ig(p)}catch(xt){c=xt,ir===p&&p!==null&&(ir=p=p.return);continue}break}while(!0)}function Ag(){var i=yd.current;return yd.current=fd,i===null?fd:i}function cf(){(pr===0||pr===3||pr===2)&&(pr=4),br===null||(Ja&268435455)===0&&(vd&268435455)===0||pa(br,jr)}function Nd(i,c){var p=on;on|=2;var b=Ag();(br!==i||jr!==c)&&(Fi=null,to(i,c));do try{sC();break}catch(N){Ng(i,N)}while(!0);if(bh(),on=p,yd.current=b,ir!==null)throw Error(n(261));return br=null,jr=0,pr}function sC(){for(;ir!==null;)jg(ir)}function iC(){for(;ir!==null&&!xn();)jg(ir)}function jg(i){var c=kg(i.alternate,i,xs);i.memoizedProps=i.pendingProps,c===null?Ig(i):ir=c,Jh.current=null}function Ig(i){var c=i;do{var p=c.alternate;if(i=c.return,(c.flags&32768)===0){if(p=Zb(p,c,xs),p!==null){ir=p;return}}else{if(p=Qb(p,c),p!==null){p.flags&=32767,ir=p;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{pr=6,ir=null;return}}if(c=c.sibling,c!==null){ir=c;return}ir=c=i}while(c!==null);pr===0&&(pr=5)}function no(i,c,p){var b=Xt,N=Ds.transition;try{Ds.transition=null,Xt=1,aC(i,c,p,b)}finally{Ds.transition=N,Xt=b}return null}function aC(i,c,p,b){do Yo();while(fa!==null);if((on&6)!==0)throw Error(n(327));p=i.finishedWork;var N=i.finishedLanes;if(p===null)return null;if(i.finishedWork=null,i.finishedLanes=0,p===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var j=p.lanes|p.childLanes;if(bt(i,j),i===br&&(ir=br=null,jr=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Cd||(Cd=!0,Og(qe,function(){return Yo(),null})),j=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||j){j=Ds.transition,Ds.transition=null;var F=Xt;Xt=1;var ae=on;on|=4,Jh.current=null,eC(i,p),yg(p,i),Mr(lh),ci=!!oh,lh=oh=null,i.current=p,tC(p),J(),on=ae,Xt=F,Ds.transition=j}else i.current=p;if(Cd&&(Cd=!1,fa=i,Ed=N),j=i.pendingLanes,j===0&&(ha=null),Ct(p.stateNode),is(i,pe()),c!==null)for(b=i.onRecoverableError,p=0;p<c.length;p++)N=c[p],b(N.value,{componentStack:N.stack,digest:N.digest});if(bd)throw bd=!1,i=nf,nf=null,i;return(Ed&1)!==0&&i.tag!==0&&Yo(),j=i.pendingLanes,(j&1)!==0?i===rf?oc++:(oc=0,rf=i):oc=0,la(),null}function Yo(){if(fa!==null){var i=Pc(Ed),c=Ds.transition,p=Xt;try{if(Ds.transition=null,Xt=16>i?16:i,fa===null)var b=!1;else{if(i=fa,fa=null,Ed=0,(on&6)!==0)throw Error(n(331));var N=on;for(on|=4,dt=i.current;dt!==null;){var j=dt,F=j.child;if((dt.flags&16)!==0){var ae=j.deletions;if(ae!==null){for(var fe=0;fe<ae.length;fe++){var ke=ae[fe];for(dt=ke;dt!==null;){var Ve=dt;switch(Ve.tag){case 0:case 11:case 15:sc(8,Ve,j)}var He=Ve.child;if(He!==null)He.return=Ve,dt=He;else for(;dt!==null;){Ve=dt;var Fe=Ve.sibling,ot=Ve.return;if(mg(Ve),Ve===ke){dt=null;break}if(Fe!==null){Fe.return=ot,dt=Fe;break}dt=ot}}}var ft=j.alternate;if(ft!==null){var gt=ft.child;if(gt!==null){ft.child=null;do{var nr=gt.sibling;gt.sibling=null,gt=nr}while(gt!==null)}}dt=j}}if((j.subtreeFlags&2064)!==0&&F!==null)F.return=j,dt=F;else e:for(;dt!==null;){if(j=dt,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:sc(9,j,j.return)}var Se=j.sibling;if(Se!==null){Se.return=j.return,dt=Se;break e}dt=j.return}}var xe=i.current;for(dt=xe;dt!==null;){F=dt;var Ne=F.child;if((F.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=F,dt=Ne;else e:for(F=xe;dt!==null;){if(ae=dt,(ae.flags&2048)!==0)try{switch(ae.tag){case 0:case 11:case 15:wd(9,ae)}}catch(xt){Yn(ae,ae.return,xt)}if(ae===F){dt=null;break e}var Qe=ae.sibling;if(Qe!==null){Qe.return=ae.return,dt=Qe;break e}dt=ae.return}}if(on=N,la(),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(nt,i)}catch{}b=!0}return b}finally{Xt=p,Ds.transition=c}}return!1}function Tg(i,c,p){c=Ho(p,c),c=Xp(i,c,1),i=da(i,c,1),c=Yr(),i!==null&&(K(i,1,c),is(i,c))}function Yn(i,c,p){if(i.tag===3)Tg(i,i,p);else for(;c!==null;){if(c.tag===3){Tg(c,i,p);break}else if(c.tag===1){var b=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(ha===null||!ha.has(b))){i=Ho(p,i),i=Yp(c,i,1),c=da(c,i,1),i=Yr(),c!==null&&(K(c,1,i),is(c,i));break}}c=c.return}}function oC(i,c,p){var b=i.pingCache;b!==null&&b.delete(c),c=Yr(),i.pingedLanes|=i.suspendedLanes&p,br===i&&(jr&p)===p&&(pr===4||pr===3&&(jr&130023424)===jr&&500>pe()-tf?to(i,0):ef|=p),is(i,c)}function Rg(i,c){c===0&&((i.mode&1)===0?c=1:(c=Xi,Xi<<=1,(Xi&130023424)===0&&(Xi=4194304)));var p=Yr();i=Mi(i,c),i!==null&&(K(i,c,p),is(i,p))}function lC(i){var c=i.memoizedState,p=0;c!==null&&(p=c.retryLane),Rg(i,p)}function cC(i,c){var p=0;switch(i.tag){case 13:var b=i.stateNode,N=i.memoizedState;N!==null&&(p=N.retryLane);break;case 19:b=i.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(c),Rg(i,p)}var kg;kg=function(i,c,p){if(i!==null)if(i.memoizedProps!==c.pendingProps||ts.current)rs=!0;else{if((i.lanes&p)===0&&(c.flags&128)===0)return rs=!1,Kb(i,c,p);rs=(i.flags&131072)!==0}else rs=!1,Ln&&(c.flags&1048576)!==0&&up(c,td,c.index);switch(c.lanes=0,c.tag){case 2:var b=c.type;gd(i,c),i=c.pendingProps;var N=Lo(c,Lr.current);Vo(c,p),N=kh(null,c,b,i,N,p);var j=Oh();return c.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,ns(b)?(j=!0,Qc(c)):j=!1,c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,_h(c),N.updater=md,c.stateNode=N,N._reactInternals=c,Fh(c,b,i,p),c=Vh(null,c,b,!0,j,p)):(c.tag=0,Ln&&j&&ph(c),Xr(null,c,N,p),c=c.child),c;case 16:b=c.elementType;e:{switch(gd(i,c),i=c.pendingProps,N=b._init,b=N(b._payload),c.type=b,N=c.tag=uC(b),i=Ws(b,i),N){case 0:c=$h(null,c,b,i,p);break e;case 1:c=sg(null,c,b,i,p);break e;case 11:c=Jp(null,c,b,i,p);break e;case 14:c=eg(null,c,b,Ws(b.type,i),p);break e}throw Error(n(306,b,""))}return c;case 0:return b=c.type,N=c.pendingProps,N=c.elementType===b?N:Ws(b,N),$h(i,c,b,N,p);case 1:return b=c.type,N=c.pendingProps,N=c.elementType===b?N:Ws(b,N),sg(i,c,b,N,p);case 3:e:{if(ig(c),i===null)throw Error(n(387));b=c.pendingProps,j=c.memoizedState,N=j.element,vp(i,c),od(c,b,null,p);var F=c.memoizedState;if(b=F.element,j.isDehydrated)if(j={element:b,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},c.updateQueue.baseState=j,c.memoizedState=j,c.flags&256){N=Ho(Error(n(423)),c),c=ag(i,c,b,p,N);break e}else if(b!==N){N=Ho(Error(n(424)),c),c=ag(i,c,b,p,N);break e}else for(gs=ia(c.stateNode.containerInfo.firstChild),ps=c,Ln=!0,Vs=null,p=wp(c,null,b,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Uo(),b===N){c=Bi(i,c,p);break e}Xr(i,c,b,p)}c=c.child}return c;case 5:return Ep(c),i===null&&wh(c),b=c.type,N=c.pendingProps,j=i!==null?i.memoizedProps:null,F=N.children,ch(b,N)?F=null:j!==null&&ch(b,j)&&(c.flags|=32),rg(i,c),Xr(i,c,F,p),c.child;case 6:return i===null&&wh(c),null;case 13:return og(i,c,p);case 4:return Nh(c,c.stateNode.containerInfo),b=c.pendingProps,i===null?c.child=zo(c,null,b,p):Xr(i,c,b,p),c.child;case 11:return b=c.type,N=c.pendingProps,N=c.elementType===b?N:Ws(b,N),Jp(i,c,b,N,p);case 7:return Xr(i,c,c.pendingProps,p),c.child;case 8:return Xr(i,c,c.pendingProps.children,p),c.child;case 12:return Xr(i,c,c.pendingProps.children,p),c.child;case 10:e:{if(b=c.type._context,N=c.pendingProps,j=c.memoizedProps,F=N.value,Nn(sd,b._currentValue),b._currentValue=F,j!==null)if(ve(j.value,F)){if(j.children===N.children&&!ts.current){c=Bi(i,c,p);break e}}else for(j=c.child,j!==null&&(j.return=c);j!==null;){var ae=j.dependencies;if(ae!==null){F=j.child;for(var fe=ae.firstContext;fe!==null;){if(fe.context===b){if(j.tag===1){fe=Li(-1,p&-p),fe.tag=2;var ke=j.updateQueue;if(ke!==null){ke=ke.shared;var Ve=ke.pending;Ve===null?fe.next=fe:(fe.next=Ve.next,Ve.next=fe),ke.pending=fe}}j.lanes|=p,fe=j.alternate,fe!==null&&(fe.lanes|=p),Eh(j.return,p,c),ae.lanes|=p;break}fe=fe.next}}else if(j.tag===10)F=j.type===c.type?null:j.child;else if(j.tag===18){if(F=j.return,F===null)throw Error(n(341));F.lanes|=p,ae=F.alternate,ae!==null&&(ae.lanes|=p),Eh(F,p,c),F=j.sibling}else F=j.child;if(F!==null)F.return=j;else for(F=j;F!==null;){if(F===c){F=null;break}if(j=F.sibling,j!==null){j.return=F.return,F=j;break}F=F.return}j=F}Xr(i,c,N.children,p),c=c.child}return c;case 9:return N=c.type,b=c.pendingProps.children,Vo(c,p),N=Os(N),b=b(N),c.flags|=1,Xr(i,c,b,p),c.child;case 14:return b=c.type,N=Ws(b,c.pendingProps),N=Ws(b.type,N),eg(i,c,b,N,p);case 15:return tg(i,c,c.type,c.pendingProps,p);case 17:return b=c.type,N=c.pendingProps,N=c.elementType===b?N:Ws(b,N),gd(i,c),c.tag=1,ns(b)?(i=!0,Qc(c)):i=!1,Vo(c,p),Gp(c,b,N),Fh(c,b,N,p),Vh(null,c,b,!0,i,p);case 19:return cg(i,c,p);case 22:return ng(i,c,p)}throw Error(n(156,c.tag))};function Og(i,c){return Gr(i,c)}function dC(i,c,p,b){this.tag=i,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(i,c,p,b){return new dC(i,c,p,b)}function df(i){return i=i.prototype,!(!i||!i.isReactComponent)}function uC(i){if(typeof i=="function")return df(i)?1:0;if(i!=null){if(i=i.$$typeof,i===H)return 11;if(i===X)return 14}return 2}function ga(i,c){var p=i.alternate;return p===null?(p=Ms(i.tag,c,i.key,i.mode),p.elementType=i.elementType,p.type=i.type,p.stateNode=i.stateNode,p.alternate=i,i.alternate=p):(p.pendingProps=c,p.type=i.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=i.flags&14680064,p.childLanes=i.childLanes,p.lanes=i.lanes,p.child=i.child,p.memoizedProps=i.memoizedProps,p.memoizedState=i.memoizedState,p.updateQueue=i.updateQueue,c=i.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=i.sibling,p.index=i.index,p.ref=i.ref,p}function Ad(i,c,p,b,N,j){var F=2;if(b=i,typeof i=="function")df(i)&&(F=1);else if(typeof i=="string")F=5;else e:switch(i){case V:return ro(p.children,N,j,c);case te:F=8,N|=8;break;case ne:return i=Ms(12,p,c,N|2),i.elementType=ne,i.lanes=j,i;case W:return i=Ms(13,p,c,N),i.elementType=W,i.lanes=j,i;case de:return i=Ms(19,p,c,N),i.elementType=de,i.lanes=j,i;case ie:return jd(p,N,j,c);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ce:F=10;break e;case oe:F=9;break e;case H:F=11;break e;case X:F=14;break e;case q:F=16,b=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return c=Ms(F,p,c,N),c.elementType=i,c.type=b,c.lanes=j,c}function ro(i,c,p,b){return i=Ms(7,i,b,c),i.lanes=p,i}function jd(i,c,p,b){return i=Ms(22,i,b,c),i.elementType=ie,i.lanes=p,i.stateNode={isHidden:!1},i}function uf(i,c,p){return i=Ms(6,i,null,c),i.lanes=p,i}function hf(i,c,p){return c=Ms(4,i.children!==null?i.children:[],i.key,c),c.lanes=p,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}function hC(i,c,p,b,N){this.tag=c,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ee(0),this.expirationTimes=Ee(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.identifierPrefix=b,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function ff(i,c,p,b,N,j,F,ae,fe){return i=new hC(i,c,p,ae,fe),c===1?(c=1,j===!0&&(c|=8)):c=0,j=Ms(3,null,null,c),i.current=j,j.stateNode=i,j.memoizedState={element:b,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},_h(j),i}function fC(i,c,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:b==null?null:""+b,children:i,containerInfo:c,implementation:p}}function Pg(i){if(!i)return oa;i=i._reactInternals;e:{if(Pr(i)!==i||i.tag!==1)throw Error(n(170));var c=i;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(ns(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(i.tag===1){var p=i.type;if(ns(p))return lp(i,p,c)}return c}function Dg(i,c,p,b,N,j,F,ae,fe){return i=ff(p,b,!0,i,N,j,F,ae,fe),i.context=Pg(null),p=i.current,b=Yr(),N=ma(p),j=Li(b,N),j.callback=c??null,da(p,j,N),i.current.lanes=N,K(i,N,b),is(i,b),i}function Id(i,c,p,b){var N=c.current,j=Yr(),F=ma(N);return p=Pg(p),c.context===null?c.context=p:c.pendingContext=p,c=Li(j,F),c.payload={element:i},b=b===void 0?null:b,b!==null&&(c.callback=b),i=da(N,c,F),i!==null&&(qs(i,N,F,j),ad(i,N,F)),F}function Td(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Mg(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var p=i.retryLane;i.retryLane=p!==0&&p<c?p:c}}function mf(i,c){Mg(i,c),(i=i.alternate)&&Mg(i,c)}function mC(){return null}var Lg=typeof reportError=="function"?reportError:function(i){console.error(i)};function pf(i){this._internalRoot=i}Rd.prototype.render=pf.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(n(409));Id(i,c,null,null)},Rd.prototype.unmount=pf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;eo(function(){Id(null,i,null,null)}),c[ki]=null}};function Rd(i){this._internalRoot=i}Rd.prototype.unstable_scheduleHydration=function(i){if(i){var c=Sn();i={blockedOn:null,target:i,priority:c};for(var p=0;p<Sr.length&&c!==0&&c<Sr[p].priority;p++);Sr.splice(p,0,i),p===0&&Mc(i)}};function gf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function kd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Bg(){}function pC(i,c,p,b,N){if(N){if(typeof b=="function"){var j=b;b=function(){var ke=Td(F);j.call(ke)}}var F=Dg(c,b,i,0,null,!1,!1,"",Bg);return i._reactRootContainer=F,i[ki]=F.current,Hl(i.nodeType===8?i.parentNode:i),eo(),F}for(;N=i.lastChild;)i.removeChild(N);if(typeof b=="function"){var ae=b;b=function(){var ke=Td(fe);ae.call(ke)}}var fe=ff(i,0,!1,null,null,!1,!1,"",Bg);return i._reactRootContainer=fe,i[ki]=fe.current,Hl(i.nodeType===8?i.parentNode:i),eo(function(){Id(c,fe,p,b)}),fe}function Od(i,c,p,b,N){var j=p._reactRootContainer;if(j){var F=j;if(typeof N=="function"){var ae=N;N=function(){var fe=Td(F);ae.call(fe)}}Id(c,F,i,N)}else F=pC(p,c,i,N,b);return Td(F)}No=function(i){switch(i.tag){case 3:var c=i.stateNode;if(c.current.memoizedState.isDehydrated){var p=hn(c.pendingLanes);p!==0&&(qn(c,p|1),is(c,pe()),(on&6)===0&&(Xo=pe()+500,la()))}break;case 13:eo(function(){var b=Mi(i,1);if(b!==null){var N=Yr();qs(b,i,1,N)}}),mf(i,1)}},Dr=function(i){if(i.tag===13){var c=Mi(i,134217728);if(c!==null){var p=Yr();qs(c,i,134217728,p)}mf(i,134217728)}},Et=function(i){if(i.tag===13){var c=ma(i),p=Mi(i,c);if(p!==null){var b=Yr();qs(p,i,c,b)}mf(i,c)}},Sn=function(){return Xt},Rl=function(i,c){var p=Xt;try{return Xt=i,c()}finally{Xt=p}},Hr=function(i,c,p){switch(c){case"input":if(Z(i,p),c=p.name,p.type==="radio"&&c!=null){for(p=i;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<p.length;c++){var b=p[c];if(b!==i&&b.form===i.form){var N=Kc(b);if(!N)throw Error(n(90));ut(b),Z(b,N)}}}break;case"textarea":Yt(i,p);break;case"select":c=p.value,c!=null&&Ue(i,!!p.multiple,c,!1)}},sn=of,nn=eo;var gC={usingClientEntryPoint:!1,Events:[Xl,Do,Kc,kt,Wt,of]},lc={findFiberByHostInstance:Ga,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xC={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=So(i),i===null?null:i.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||mC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{nt=Pd.inject(xC),st=Pd}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gC,as.createPortal=function(i,c){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gf(c))throw Error(n(200));return fC(i,c,null,p)},as.createRoot=function(i,c){if(!gf(i))throw Error(n(299));var p=!1,b="",N=Lg;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onRecoverableError!==void 0&&(N=c.onRecoverableError)),c=ff(i,1,!1,null,null,p,!1,b,N),i[ki]=c.current,Hl(i.nodeType===8?i.parentNode:i),new pf(c)},as.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=So(c),i=i===null?null:i.stateNode,i},as.flushSync=function(i){return eo(i)},as.hydrate=function(i,c,p){if(!kd(c))throw Error(n(200));return Od(null,i,c,!0,p)},as.hydrateRoot=function(i,c,p){if(!gf(i))throw Error(n(405));var b=p!=null&&p.hydratedSources||null,N=!1,j="",F=Lg;if(p!=null&&(p.unstable_strictMode===!0&&(N=!0),p.identifierPrefix!==void 0&&(j=p.identifierPrefix),p.onRecoverableError!==void 0&&(F=p.onRecoverableError)),c=Dg(c,null,i,1,p??null,N,!1,j,F),i[ki]=c.current,Hl(i),b)for(i=0;i<b.length;i++)p=b[i],N=p._getVersion,N=N(p._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[p,N]:c.mutableSourceEagerHydrationData.push(p,N);return new Rd(c)},as.render=function(i,c,p){if(!kd(c))throw Error(n(200));return Od(null,i,c,!1,p)},as.unmountComponentAtNode=function(i){if(!kd(i))throw Error(n(40));return i._reactRootContainer?(eo(function(){Od(null,null,i,!1,function(){i._reactRootContainer=null,i[ki]=null})}),!0):!1},as.unstable_batchedUpdates=of,as.unstable_renderSubtreeIntoContainer=function(i,c,p,b){if(!kd(p))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Od(i,c,p,!1,b)},as.version="18.3.1-next-f1338f8080-20240426",as}var Gg;function nw(){if(Gg)return yf.exports;Gg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),yf.exports=_C(),yf.exports}var qg;function NC(){if(qg)return Md;qg=1;var r=nw();return Md.createRoot=r.createRoot,Md.hydrateRoot=r.hydrateRoot,Md}var AC=NC(),A=Z0();const $e=Ac(A),Q0=K0({__proto__:null,default:$e},[A]);function Xg(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function Cl(...r){return e=>{let n=!1;const o=r.map(d=>{const u=Xg(d,e);return!n&&typeof u=="function"&&(n=!0),u});if(n)return()=>{for(let d=0;d<o.length;d++){const u=o[d];typeof u=="function"?u():Xg(r[d],null)}}}}function ln(...r){return A.useCallback(Cl(...r),r)}var jC=Symbol.for("react.lazy"),du=Q0[" use ".trim().toString()];function IC(r){return typeof r=="object"&&r!==null&&"then"in r}function rw(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===jC&&"_payload"in r&&IC(r._payload)}function sw(r){const e=TC(r),n=A.forwardRef((o,d)=>{let{children:u,...g}=o;rw(u)&&typeof du=="function"&&(u=du(u._payload));const x=A.Children.toArray(u),v=x.find(kC);if(v){const y=v.props.children,S=x.map(E=>E===v?A.Children.count(y)>1?A.Children.only(null):A.isValidElement(y)?y.props.children:null:E);return s.jsx(e,{...g,ref:d,children:A.isValidElement(y)?A.cloneElement(y,void 0,S):null})}return s.jsx(e,{...g,ref:d,children:u})});return n.displayName=`${r}.Slot`,n}var iw=sw("Slot");function TC(r){const e=A.forwardRef((n,o)=>{let{children:d,...u}=n;if(rw(d)&&typeof du=="function"&&(d=du(d._payload)),A.isValidElement(d)){const g=PC(d),x=OC(u,d.props);return d.type!==A.Fragment&&(x.ref=o?Cl(o,g):g),A.cloneElement(d,x)}return A.Children.count(d)>1?A.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var RC=Symbol("radix.slottable");function kC(r){return A.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===RC}function OC(r,e){const n={...e};for(const o in e){const d=r[o],u=e[o];/^on[A-Z]/.test(o)?d&&u?n[o]=(...x)=>{const v=u(...x);return d(...x),v}:d&&(n[o]=d):o==="style"?n[o]={...d,...u}:o==="className"&&(n[o]=[d,u].filter(Boolean).join(" "))}return{...r,...n}}function PC(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function aw(r){var e,n,o="";if(typeof r=="string"||typeof r=="number")o+=r;else if(typeof r=="object")if(Array.isArray(r)){var d=r.length;for(e=0;e<d;e++)r[e]&&(n=aw(r[e]))&&(o&&(o+=" "),o+=n)}else for(n in r)r[n]&&(o&&(o+=" "),o+=n);return o}function ow(){for(var r,e,n=0,o="",d=arguments.length;n<d;n++)(r=arguments[n])&&(e=aw(r))&&(o&&(o+=" "),o+=e);return o}const Yg=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Kg=ow,J0=(r,e)=>n=>{var o;if(e?.variants==null)return Kg(r,n?.class,n?.className);const{variants:d,defaultVariants:u}=e,g=Object.keys(d).map(y=>{const S=n?.[y],E=u?.[y];if(S===null)return null;const T=Yg(S)||Yg(E);return d[y][T]}),x=n&&Object.entries(n).reduce((y,S)=>{let[E,T]=S;return T===void 0||(y[E]=T),y},{}),v=e==null||(o=e.compoundVariants)===null||o===void 0?void 0:o.reduce((y,S)=>{let{class:E,className:T,...I}=S;return Object.entries(I).every(O=>{let[k,P]=O;return Array.isArray(P)?P.includes({...u,...x}[k]):{...u,...x}[k]===P})?[...y,E,T]:y},[]);return Kg(r,g,v,n?.class,n?.className)},em="-",DC=r=>{const e=LC(r),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=r;return{getClassGroupId:g=>{const x=g.split(em);return x[0]===""&&x.length!==1&&x.shift(),lw(x,e)||MC(g)},getConflictingClassGroupIds:(g,x)=>{const v=n[g]||[];return x&&o[g]?[...v,...o[g]]:v}}},lw=(r,e)=>{if(r.length===0)return e.classGroupId;const n=r[0],o=e.nextPart.get(n),d=o?lw(r.slice(1),o):void 0;if(d)return d;if(e.validators.length===0)return;const u=r.join(em);return e.validators.find(({validator:g})=>g(u))?.classGroupId},Zg=/^\[(.+)\]$/,MC=r=>{if(Zg.test(r)){const e=Zg.exec(r)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},LC=r=>{const{theme:e,classGroups:n}=r,o={nextPart:new Map,validators:[]};for(const d in n)g0(n[d],o,d,e);return o},g0=(r,e,n,o)=>{r.forEach(d=>{if(typeof d=="string"){const u=d===""?e:Qg(e,d);u.classGroupId=n;return}if(typeof d=="function"){if(BC(d)){g0(d(o),e,n,o);return}e.validators.push({validator:d,classGroupId:n});return}Object.entries(d).forEach(([u,g])=>{g0(g,Qg(e,u),n,o)})})},Qg=(r,e)=>{let n=r;return e.split(em).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n},BC=r=>r.isThemeGetter,FC=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,o=new Map;const d=(u,g)=>{n.set(u,g),e++,e>r&&(e=0,o=n,n=new Map)};return{get(u){let g=n.get(u);if(g!==void 0)return g;if((g=o.get(u))!==void 0)return d(u,g),g},set(u,g){n.has(u)?n.set(u,g):d(u,g)}}},x0="!",w0=":",UC=w0.length,zC=r=>{const{prefix:e,experimentalParseClassName:n}=r;let o=d=>{const u=[];let g=0,x=0,v=0,y;for(let O=0;O<d.length;O++){let k=d[O];if(g===0&&x===0){if(k===w0){u.push(d.slice(v,O)),v=O+UC;continue}if(k==="/"){y=O;continue}}k==="["?g++:k==="]"?g--:k==="("?x++:k===")"&&x--}const S=u.length===0?d:d.substring(v),E=$C(S),T=E!==S,I=y&&y>v?y-v:void 0;return{modifiers:u,hasImportantModifier:T,baseClassName:E,maybePostfixModifierPosition:I}};if(e){const d=e+w0,u=o;o=g=>g.startsWith(d)?u(g.substring(d.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:g,maybePostfixModifierPosition:void 0}}if(n){const d=o;o=u=>n({className:u,parseClassName:d})}return o},$C=r=>r.endsWith(x0)?r.substring(0,r.length-1):r.startsWith(x0)?r.substring(1):r,VC=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const d=[];let u=[];return o.forEach(g=>{g[0]==="["||e[g]?(d.push(...u.sort(),g),u=[]):u.push(g)}),d.push(...u.sort()),d}},WC=r=>({cache:FC(r.cacheSize),parseClassName:zC(r),sortModifiers:VC(r),...DC(r)}),HC=/\s+/,GC=(r,e)=>{const{parseClassName:n,getClassGroupId:o,getConflictingClassGroupIds:d,sortModifiers:u}=e,g=[],x=r.trim().split(HC);let v="";for(let y=x.length-1;y>=0;y-=1){const S=x[y],{isExternal:E,modifiers:T,hasImportantModifier:I,baseClassName:O,maybePostfixModifierPosition:k}=n(S);if(E){v=S+(v.length>0?" "+v:v);continue}let P=!!k,L=o(P?O.substring(0,k):O);if(!L){if(!P){v=S+(v.length>0?" "+v:v);continue}if(L=o(O),!L){v=S+(v.length>0?" "+v:v);continue}P=!1}const U=u(T).join(":"),B=I?U+x0:U,G=B+L;if(g.includes(G))continue;g.push(G);const ee=d(L,P);for(let se=0;se<ee.length;++se){const V=ee[se];g.push(B+V)}v=S+(v.length>0?" "+v:v)}return v};function qC(){let r=0,e,n,o="";for(;r<arguments.length;)(e=arguments[r++])&&(n=cw(e))&&(o&&(o+=" "),o+=n);return o}const cw=r=>{if(typeof r=="string")return r;let e,n="";for(let o=0;o<r.length;o++)r[o]&&(e=cw(r[o]))&&(n&&(n+=" "),n+=e);return n};function XC(r,...e){let n,o,d,u=g;function g(v){const y=e.reduce((S,E)=>E(S),r());return n=WC(y),o=n.cache.get,d=n.cache.set,u=x,x(v)}function x(v){const y=o(v);if(y)return y;const S=GC(v,n);return d(v,S),S}return function(){return u(qC.apply(null,arguments))}}const gr=r=>{const e=n=>n[r]||[];return e.isThemeGetter=!0,e},dw=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,uw=/^\((?:(\w[\w-]*):)?(.+)\)$/i,YC=/^\d+\/\d+$/,KC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,JC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ko=r=>YC.test(r),Qt=r=>!!r&&!Number.isNaN(Number(r)),wa=r=>!!r&&Number.isInteger(Number(r)),Cf=r=>r.endsWith("%")&&Qt(r.slice(0,-1)),Ui=r=>KC.test(r),tE=()=>!0,nE=r=>ZC.test(r)&&!QC.test(r),hw=()=>!1,rE=r=>JC.test(r),sE=r=>eE.test(r),iE=r=>!mt(r)&&!pt(r),aE=r=>El(r,pw,hw),mt=r=>dw.test(r),so=r=>El(r,gw,nE),Ef=r=>El(r,uE,Qt),Jg=r=>El(r,fw,hw),oE=r=>El(r,mw,sE),Ld=r=>El(r,xw,rE),pt=r=>uw.test(r),dc=r=>Sl(r,gw),lE=r=>Sl(r,hE),e1=r=>Sl(r,fw),cE=r=>Sl(r,pw),dE=r=>Sl(r,mw),Bd=r=>Sl(r,xw,!0),El=(r,e,n)=>{const o=dw.exec(r);return o?o[1]?e(o[1]):n(o[2]):!1},Sl=(r,e,n=!1)=>{const o=uw.exec(r);return o?o[1]?e(o[1]):n:!1},fw=r=>r==="position"||r==="percentage",mw=r=>r==="image"||r==="url",pw=r=>r==="length"||r==="size"||r==="bg-size",gw=r=>r==="length",uE=r=>r==="number",hE=r=>r==="family-name",xw=r=>r==="shadow",fE=()=>{const r=gr("color"),e=gr("font"),n=gr("text"),o=gr("font-weight"),d=gr("tracking"),u=gr("leading"),g=gr("breakpoint"),x=gr("container"),v=gr("spacing"),y=gr("radius"),S=gr("shadow"),E=gr("inset-shadow"),T=gr("text-shadow"),I=gr("drop-shadow"),O=gr("blur"),k=gr("perspective"),P=gr("aspect"),L=gr("ease"),U=gr("animate"),B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ee=()=>[...G(),pt,mt],se=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto","contain","none"],te=()=>[pt,mt,v],ne=()=>[Ko,"full","auto",...te()],ce=()=>[wa,"none","subgrid",pt,mt],oe=()=>["auto",{span:["full",wa,pt,mt]},wa,pt,mt],H=()=>[wa,"auto",pt,mt],W=()=>["auto","min","max","fr",pt,mt],de=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...te()],ie=()=>[Ko,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...te()],z=()=>[r,pt,mt],ue=()=>[...G(),e1,Jg,{position:[pt,mt]}],be=()=>["no-repeat",{repeat:["","x","y","space","round"]}],re=()=>["auto","cover","contain",cE,aE,{size:[pt,mt]}],we=()=>[Cf,dc,so],Ie=()=>["","none","full",y,pt,mt],Oe=()=>["",Qt,dc,so],ye=()=>["solid","dashed","dotted","double"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[Qt,Cf,e1,Jg],Ce=()=>["","none",O,pt,mt],De=()=>["none",Qt,pt,mt],Ye=()=>["none",Qt,pt,mt],We=()=>[Qt,pt,mt],ut=()=>[Ko,"full",...te()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ui],breakpoint:[Ui],color:[tE],container:[Ui],"drop-shadow":[Ui],ease:["in","out","in-out"],font:[iE],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ui],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ui],shadow:[Ui],spacing:["px",Qt],text:[Ui],"text-shadow":[Ui],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ko,mt,pt,P]}],container:["container"],columns:[{columns:[Qt,mt,pt,x]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ee()}],overflow:[{overflow:se()}],"overflow-x":[{"overflow-x":se()}],"overflow-y":[{"overflow-y":se()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ne()}],"inset-x":[{"inset-x":ne()}],"inset-y":[{"inset-y":ne()}],start:[{start:ne()}],end:[{end:ne()}],top:[{top:ne()}],right:[{right:ne()}],bottom:[{bottom:ne()}],left:[{left:ne()}],visibility:["visible","invisible","collapse"],z:[{z:[wa,"auto",pt,mt]}],basis:[{basis:[Ko,"full","auto",x,...te()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Qt,Ko,"auto","initial","none",mt]}],grow:[{grow:["",Qt,pt,mt]}],shrink:[{shrink:["",Qt,pt,mt]}],order:[{order:[wa,"first","last","none",pt,mt]}],"grid-cols":[{"grid-cols":ce()}],"col-start-end":[{col:oe()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":ce()}],"row-start-end":[{row:oe()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:te()}],"gap-x":[{"gap-x":te()}],"gap-y":[{"gap-y":te()}],"justify-content":[{justify:[...de(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...de()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":de()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:te()}],px:[{px:te()}],py:[{py:te()}],ps:[{ps:te()}],pe:[{pe:te()}],pt:[{pt:te()}],pr:[{pr:te()}],pb:[{pb:te()}],pl:[{pl:te()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":te()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":te()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[x,"screen",...ie()]}],"min-w":[{"min-w":[x,"screen","none",...ie()]}],"max-w":[{"max-w":[x,"screen","none","prose",{screen:[g]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",n,dc,so]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,pt,Ef]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cf,mt]}],"font-family":[{font:[lE,mt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[d,pt,mt]}],"line-clamp":[{"line-clamp":[Qt,"none",pt,Ef]}],leading:[{leading:[u,...te()]}],"list-image":[{"list-image":["none",pt,mt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",pt,mt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ye(),"wavy"]}],"text-decoration-thickness":[{decoration:[Qt,"from-font","auto",pt,so]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Qt,"auto",pt,mt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:te()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pt,mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pt,mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ue()}],"bg-repeat":[{bg:be()}],"bg-size":[{bg:re()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wa,pt,mt],radial:["",pt,mt],conic:[wa,pt,mt]},dE,oE]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:we()}],"gradient-via-pos":[{via:we()}],"gradient-to-pos":[{to:we()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:Ie()}],"rounded-s":[{"rounded-s":Ie()}],"rounded-e":[{"rounded-e":Ie()}],"rounded-t":[{"rounded-t":Ie()}],"rounded-r":[{"rounded-r":Ie()}],"rounded-b":[{"rounded-b":Ie()}],"rounded-l":[{"rounded-l":Ie()}],"rounded-ss":[{"rounded-ss":Ie()}],"rounded-se":[{"rounded-se":Ie()}],"rounded-ee":[{"rounded-ee":Ie()}],"rounded-es":[{"rounded-es":Ie()}],"rounded-tl":[{"rounded-tl":Ie()}],"rounded-tr":[{"rounded-tr":Ie()}],"rounded-br":[{"rounded-br":Ie()}],"rounded-bl":[{"rounded-bl":Ie()}],"border-w":[{border:Oe()}],"border-w-x":[{"border-x":Oe()}],"border-w-y":[{"border-y":Oe()}],"border-w-s":[{"border-s":Oe()}],"border-w-e":[{"border-e":Oe()}],"border-w-t":[{"border-t":Oe()}],"border-w-r":[{"border-r":Oe()}],"border-w-b":[{"border-b":Oe()}],"border-w-l":[{"border-l":Oe()}],"divide-x":[{"divide-x":Oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ye(),"hidden","none"]}],"divide-style":[{divide:[...ye(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...ye(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Qt,pt,mt]}],"outline-w":[{outline:["",Qt,dc,so]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",S,Bd,Ld]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",E,Bd,Ld]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:Oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Qt,so]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":Oe()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",T,Bd,Ld]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Qt,pt,mt]}],"mix-blend":[{"mix-blend":[...Y(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Y()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Qt]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[pt,mt]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":G()}],"mask-image-conic-pos":[{"mask-conic":[Qt]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ue()}],"mask-repeat":[{mask:be()}],"mask-size":[{mask:re()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",pt,mt]}],filter:[{filter:["","none",pt,mt]}],blur:[{blur:Ce()}],brightness:[{brightness:[Qt,pt,mt]}],contrast:[{contrast:[Qt,pt,mt]}],"drop-shadow":[{"drop-shadow":["","none",I,Bd,Ld]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Qt,pt,mt]}],"hue-rotate":[{"hue-rotate":[Qt,pt,mt]}],invert:[{invert:["",Qt,pt,mt]}],saturate:[{saturate:[Qt,pt,mt]}],sepia:[{sepia:["",Qt,pt,mt]}],"backdrop-filter":[{"backdrop-filter":["","none",pt,mt]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[Qt,pt,mt]}],"backdrop-contrast":[{"backdrop-contrast":[Qt,pt,mt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Qt,pt,mt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Qt,pt,mt]}],"backdrop-invert":[{"backdrop-invert":["",Qt,pt,mt]}],"backdrop-opacity":[{"backdrop-opacity":[Qt,pt,mt]}],"backdrop-saturate":[{"backdrop-saturate":[Qt,pt,mt]}],"backdrop-sepia":[{"backdrop-sepia":["",Qt,pt,mt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":te()}],"border-spacing-x":[{"border-spacing-x":te()}],"border-spacing-y":[{"border-spacing-y":te()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",pt,mt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Qt,"initial",pt,mt]}],ease:[{ease:["linear","initial",L,pt,mt]}],delay:[{delay:[Qt,pt,mt]}],animate:[{animate:["none",U,pt,mt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[k,pt,mt]}],"perspective-origin":[{"perspective-origin":ee()}],rotate:[{rotate:De()}],"rotate-x":[{"rotate-x":De()}],"rotate-y":[{"rotate-y":De()}],"rotate-z":[{"rotate-z":De()}],scale:[{scale:Ye()}],"scale-x":[{"scale-x":Ye()}],"scale-y":[{"scale-y":Ye()}],"scale-z":[{"scale-z":Ye()}],"scale-3d":["scale-3d"],skew:[{skew:We()}],"skew-x":[{"skew-x":We()}],"skew-y":[{"skew-y":We()}],transform:[{transform:[pt,mt,"","none","gpu","cpu"]}],"transform-origin":[{origin:ee()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ut()}],"translate-x":[{"translate-x":ut()}],"translate-y":[{"translate-y":ut()}],"translate-z":[{"translate-z":ut()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pt,mt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":te()}],"scroll-mx":[{"scroll-mx":te()}],"scroll-my":[{"scroll-my":te()}],"scroll-ms":[{"scroll-ms":te()}],"scroll-me":[{"scroll-me":te()}],"scroll-mt":[{"scroll-mt":te()}],"scroll-mr":[{"scroll-mr":te()}],"scroll-mb":[{"scroll-mb":te()}],"scroll-ml":[{"scroll-ml":te()}],"scroll-p":[{"scroll-p":te()}],"scroll-px":[{"scroll-px":te()}],"scroll-py":[{"scroll-py":te()}],"scroll-ps":[{"scroll-ps":te()}],"scroll-pe":[{"scroll-pe":te()}],"scroll-pt":[{"scroll-pt":te()}],"scroll-pr":[{"scroll-pr":te()}],"scroll-pb":[{"scroll-pb":te()}],"scroll-pl":[{"scroll-pl":te()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pt,mt]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Qt,dc,so,Ef]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},mE=XC(fE);function Tt(...r){return mE(ow(r))}const tm=J0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Ae=A.forwardRef(({className:r,variant:e,size:n,asChild:o=!1,...d},u)=>{const g=o?iw:"button";return s.jsx(g,{ref:u,"data-slot":"button",className:Tt(tm({variant:e,size:n,className:r})),...d})});Ae.displayName="Button";function Ke({className:r,type:e,...n}){return s.jsx("input",{type:e,"data-slot":"input",className:Tt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...n})}var _l=nw();const ww=Ac(_l);var pE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gE=pE.reduce((r,e)=>{const n=sw(`Primitive.${e}`),o=A.forwardRef((d,u)=>{const{asChild:g,...x}=d,v=g?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(v,{...x,ref:u})});return o.displayName=`Primitive.${e}`,{...r,[e]:o}},{}),xE="Label",yw=A.forwardRef((r,e)=>s.jsx(gE.label,{...r,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(r.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));yw.displayName=xE;var wE=yw;function Pe({className:r,...e}){return s.jsx(wE,{"data-slot":"label",className:Tt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...e})}function Wn({className:r,...e}){return s.jsx("div",{"data-slot":"card",className:Tt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...e})}function Vr({className:r,...e}){return s.jsx("div",{"data-slot":"card-header",className:Tt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function Wr({className:r,...e}){return s.jsx("h4",{"data-slot":"card-title",className:Tt("leading-none",r),...e})}function Wi({className:r,...e}){return s.jsx("p",{"data-slot":"card-description",className:Tt("text-muted-foreground",r),...e})}function Zn({className:r,...e}){return s.jsx("div",{"data-slot":"card-content",className:Tt("px-6 [&:last-child]:pb-6",r),...e})}function yE({className:r,...e}){return s.jsx("div",{"data-slot":"card-footer",className:Tt("flex items-center px-6 pb-6 [.border-t]:pt-6",r),...e})}const vE=J0("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ei({className:r,variant:e,...n}){return s.jsx("div",{"data-slot":"alert",role:"alert",className:Tt(vE({variant:e}),r),...n})}function ti({className:r,...e}){return s.jsx("div",{"data-slot":"alert-description",className:Tt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...e})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),t1=r=>{const e=CE(r);return e.charAt(0).toUpperCase()+e.slice(1)},vw=(...r)=>r.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=A.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:u,iconNode:g,...x},v)=>A.createElement("svg",{ref:v,...EE,width:e,height:e,stroke:r,strokeWidth:o?Number(n)*24/Number(e):n,className:vw("lucide",d),...x},[...g.map(([y,S])=>A.createElement(y,S)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=(r,e)=>{const n=A.forwardRef(({className:o,...d},u)=>A.createElement(SE,{ref:u,iconNode:e,className:vw(`lucide-${bE(t1(r))}`,`lucide-${r}`,o),...d}));return n.displayName=t1(r),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],NE=lt("align-center",_E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],jE=lt("align-left",AE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],TE=lt("align-right",IE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Au=lt("arrow-down",RE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nm=lt("arrow-left",kE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bw=lt("arrow-right",OE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],rm=lt("arrow-up-down",PE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ju=lt("arrow-up",DE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],y0=lt("bold",ME);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],BE=lt("calendar-days",LE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],xl=lt("calendar",FE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],n1=lt("camera",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$E=lt("chart-column",zE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cw=lt("check",VE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],sm=lt("chevron-down",WE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],GE=lt("chevron-left",HE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],XE=lt("chevron-right",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],KE=lt("chevron-up",YE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wi=lt("circle-alert",ZE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],uu=lt("circle-check-big",QE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],uo=lt("circle-check",JE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],tS=lt("circle-play",eS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ew=lt("circle-x",nS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sS=lt("circle",rS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],yc=lt("clock",iS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Sw=lt("copy",aS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],im=lt("download",oS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],cS=lt("ellipsis-vertical",lS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wl=lt("eye",dS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],hS=lt("funnel",uS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],mS=lt("globe",fS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],gS=lt("history",pS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],wS=lt("image",xS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],v0=lt("italic",yS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],r1=lt("key",vS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],CS=lt("link-2",bS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],s1=lt("link",ES);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],i1=lt("list",SS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Tr=lt("loader-circle",_S);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],b0=lt("lock",NS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],jS=lt("log-in",AS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_w=lt("log-out",IS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],bs=lt("mail",TS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],am=lt("map-pin",RS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Nw=lt("message-square",kS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["path",{d:"M5 12h14",key:"1ays0h"}]],PS=lt("minus",OS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],a1=lt("mouse-pointer-click",DS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],LS=lt("move",MS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],C0=lt("palette",BS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Sf=lt("paperclip",FS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],o1=lt("pen",US);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cs=lt("plus",zS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],VS=lt("power",$S);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],HS=lt("printer",WS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Aw=lt("qr-code",GS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Vi=lt("refresh-cw",qS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],jw=lt("save",XS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],jc=lt("search",YS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],fo=lt("send",KS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],QS=lt("server",ZS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],e_=lt("settings-2",JS);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hu=lt("settings",t_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],l1=lt("shield",n_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_a=lt("square-pen",r_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ta=lt("trash-2",s_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],_f=lt("type",i_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],yl=lt("upload",a_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ea=lt("users",o_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],po=lt("x",l_);var E0=function(r,e){return E0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(n[d]=o[d])},E0(r,e)};function Iw(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");E0(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ls=function(){return Ls=Object.assign||function(e){for(var n,o=1,d=arguments.length;o<d;o++){n=arguments[o];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},Ls.apply(this,arguments)};function Ra(r,e){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(r);d<o.length;d++)e.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(r,o[d])&&(n[o[d]]=r[o[d]]);return n}function Tw(r,e,n,o){var d=arguments.length,u=d<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,n):o,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,e,n,o);else for(var x=r.length-1;x>=0;x--)(g=r[x])&&(u=(d<3?g(u):d>3?g(e,n,u):g(e,n))||u);return d>3&&u&&Object.defineProperty(e,n,u),u}function Rw(r,e){return function(n,o){e(n,o,r)}}function kw(r,e,n,o,d,u){function g(L){if(L!==void 0&&typeof L!="function")throw new TypeError("Function expected");return L}for(var x=o.kind,v=x==="getter"?"get":x==="setter"?"set":"value",y=!e&&r?o.static?r:r.prototype:null,S=e||(y?Object.getOwnPropertyDescriptor(y,o.name):{}),E,T=!1,I=n.length-1;I>=0;I--){var O={};for(var k in o)O[k]=k==="access"?{}:o[k];for(var k in o.access)O.access[k]=o.access[k];O.addInitializer=function(L){if(T)throw new TypeError("Cannot add initializers after decoration has completed");u.push(g(L||null))};var P=(0,n[I])(x==="accessor"?{get:S.get,set:S.set}:S[v],O);if(x==="accessor"){if(P===void 0)continue;if(P===null||typeof P!="object")throw new TypeError("Object expected");(E=g(P.get))&&(S.get=E),(E=g(P.set))&&(S.set=E),(E=g(P.init))&&d.unshift(E)}else(E=g(P))&&(x==="field"?d.unshift(E):S[v]=E)}y&&Object.defineProperty(y,o.name,S),T=!0}function Ow(r,e,n){for(var o=arguments.length>2,d=0;d<e.length;d++)n=o?e[d].call(r,n):e[d].call(r);return o?n:void 0}function Pw(r){return typeof r=="symbol"?r:"".concat(r)}function Dw(r,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function Mw(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function wt(r,e,n,o){function d(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function x(S){try{y(o.next(S))}catch(E){g(E)}}function v(S){try{y(o.throw(S))}catch(E){g(E)}}function y(S){S.done?u(S.value):d(S.value).then(x,v)}y((o=o.apply(r,e||[])).next())})}function Lw(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,d,u,g=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return g.next=x(0),g.throw=x(1),g.return=x(2),typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(y){return function(S){return v([y,S])}}function v(y){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(o=1,d&&(u=y[0]&2?d.return:y[0]?d.throw||((u=d.return)&&u.call(d),0):d.next)&&!(u=u.call(d,y[1])).done)return u;switch(d=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,d=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(S){y=[6,S],d=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var Iu=Object.create?(function(r,e,n,o){o===void 0&&(o=n);var d=Object.getOwnPropertyDescriptor(e,n);(!d||("get"in d?!e.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,o,d)}):(function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]});function Bw(r,e){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Iu(e,r,n)}function fu(r){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&r[e],o=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function om(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var o=n.call(r),d,u=[],g;try{for(;(e===void 0||e-- >0)&&!(d=o.next()).done;)u.push(d.value)}catch(x){g={error:x}}finally{try{d&&!d.done&&(n=o.return)&&n.call(o)}finally{if(g)throw g.error}}return u}function Fw(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(om(arguments[e]));return r}function Uw(){for(var r=0,e=0,n=arguments.length;e<n;e++)r+=arguments[e].length;for(var o=Array(r),d=0,e=0;e<n;e++)for(var u=arguments[e],g=0,x=u.length;g<x;g++,d++)o[d]=u[g];return o}function lm(r,e,n){if(n||arguments.length===2)for(var o=0,d=e.length,u;o<d;o++)(u||!(o in e))&&(u||(u=Array.prototype.slice.call(e,0,o)),u[o]=e[o]);return r.concat(u||Array.prototype.slice.call(e))}function vl(r){return this instanceof vl?(this.v=r,this):new vl(r)}function zw(r,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(r,e||[]),d,u=[];return d=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),x("next"),x("throw"),x("return",g),d[Symbol.asyncIterator]=function(){return this},d;function g(I){return function(O){return Promise.resolve(O).then(I,E)}}function x(I,O){o[I]&&(d[I]=function(k){return new Promise(function(P,L){u.push([I,k,P,L])>1||v(I,k)})},O&&(d[I]=O(d[I])))}function v(I,O){try{y(o[I](O))}catch(k){T(u[0][3],k)}}function y(I){I.value instanceof vl?Promise.resolve(I.value.v).then(S,E):T(u[0][2],I)}function S(I){v("next",I)}function E(I){v("throw",I)}function T(I,O){I(O),u.shift(),u.length&&v(u[0][0],u[0][1])}}function $w(r){var e,n;return e={},o("next"),o("throw",function(d){throw d}),o("return"),e[Symbol.iterator]=function(){return this},e;function o(d,u){e[d]=r[d]?function(g){return(n=!n)?{value:vl(r[d](g)),done:!1}:u?u(g):g}:u}}function Vw(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],n;return e?e.call(r):(r=typeof fu=="function"?fu(r):r[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(u){n[u]=r[u]&&function(g){return new Promise(function(x,v){g=r[u](g),d(x,v,g.done,g.value)})}}function d(u,g,x,v){Promise.resolve(v).then(function(y){u({value:y,done:x})},g)}}function Ww(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var c_=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},S0=function(r){return S0=Object.getOwnPropertyNames||function(e){var n=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[n.length]=o);return n},S0(r)};function Hw(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n=S0(r),o=0;o<n.length;o++)n[o]!=="default"&&Iu(e,r,n[o]);return c_(e,r),e}function Gw(r){return r&&r.__esModule?r:{default:r}}function qw(r,e,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(r):o?o.value:e.get(r)}function Xw(r,e,n,o,d){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!d:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?d.call(r,n):d?d.value=n:e.set(r,n),n}function Yw(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function Kw(r,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var o,d;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=e[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=e[Symbol.dispose],n&&(d=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");d&&(o=function(){try{d.call(this)}catch(u){return Promise.reject(u)}}),r.stack.push({value:e,dispose:o,async:n})}else n&&r.stack.push({async:!0});return e}var d_=typeof SuppressedError=="function"?SuppressedError:function(r,e,n){var o=new Error(n);return o.name="SuppressedError",o.error=r,o.suppressed=e,o};function Zw(r){function e(u){r.error=r.hasError?new d_(u,r.error,"An error was suppressed during disposal."):u,r.hasError=!0}var n,o=0;function d(){for(;n=r.stack.pop();)try{if(!n.async&&o===1)return o=0,r.stack.push(n),Promise.resolve().then(d);if(n.dispose){var u=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(u).then(d,function(g){return e(g),d()})}else o|=1}catch(g){e(g)}if(o===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return d()}function Qw(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,d,u,g){return o?e?".jsx":".js":d&&(!u||!g)?n:d+u+"."+g.toLowerCase()+"js"}):r}const u_={__extends:Iw,__assign:Ls,__rest:Ra,__decorate:Tw,__param:Rw,__esDecorate:kw,__runInitializers:Ow,__propKey:Pw,__setFunctionName:Dw,__metadata:Mw,__awaiter:wt,__generator:Lw,__createBinding:Iu,__exportStar:Bw,__values:fu,__read:om,__spread:Fw,__spreadArrays:Uw,__spreadArray:lm,__await:vl,__asyncGenerator:zw,__asyncDelegator:$w,__asyncValues:Vw,__makeTemplateObject:Ww,__importStar:Hw,__importDefault:Gw,__classPrivateFieldGet:qw,__classPrivateFieldSet:Xw,__classPrivateFieldIn:Yw,__addDisposableResource:Kw,__disposeResources:Zw,__rewriteRelativeImportExtension:Qw},h_=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Kw,get __assign(){return Ls},__asyncDelegator:$w,__asyncGenerator:zw,__asyncValues:Vw,__await:vl,__awaiter:wt,__classPrivateFieldGet:qw,__classPrivateFieldIn:Yw,__classPrivateFieldSet:Xw,__createBinding:Iu,__decorate:Tw,__disposeResources:Zw,__esDecorate:kw,__exportStar:Bw,__extends:Iw,__generator:Lw,__importDefault:Gw,__importStar:Hw,__makeTemplateObject:Ww,__metadata:Mw,__param:Rw,__propKey:Pw,__read:om,__rest:Ra,__rewriteRelativeImportExtension:Qw,__runInitializers:Ow,__setFunctionName:Dw,__spread:Fw,__spreadArray:lm,__spreadArrays:Uw,__values:fu,default:u_},Symbol.toStringTag,{value:"Module"})),f_=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class cm extends Error{constructor(e,n="FunctionsError",o){super(e),this.name=n,this.context=o}}class c1 extends cm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class d1 extends cm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class u1 extends cm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _0;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(_0||(_0={}));class m_{constructor(e,{headers:n={},customFetch:o,region:d=_0.Any}={}){this.url=e,this.headers=n,this.region=d,this.fetch=f_(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return wt(this,arguments,void 0,function*(n,o={}){var d;try{const{headers:u,method:g,body:x,signal:v}=o;let y={},{region:S}=o;S||(S=this.region);const E=new URL(`${this.url}/${n}`);S&&S!=="any"&&(y["x-region"]=S,E.searchParams.set("forceFunctionRegion",S));let T;x&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&x instanceof Blob||x instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",T=x):typeof x=="string"?(y["Content-Type"]="text/plain",T=x):typeof FormData<"u"&&x instanceof FormData?T=x:(y["Content-Type"]="application/json",T=JSON.stringify(x)):T=x;const I=yield this.fetch(E.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:T,signal:v}).catch(L=>{throw L.name==="AbortError"?L:new c1(L)}),O=I.headers.get("x-relay-error");if(O&&O==="true")throw new d1(I);if(!I.ok)throw new u1(I);let k=((d=I.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),P;return k==="application/json"?P=yield I.json():k==="application/octet-stream"||k==="application/pdf"?P=yield I.blob():k==="text/event-stream"?P=I:k==="multipart/form-data"?P=yield I.formData():P=yield I.text(),{data:P,error:null,response:I}}catch(u){return u instanceof Error&&u.name==="AbortError"?{data:null,error:new c1(u)}:{data:null,error:u,response:u instanceof u1||u instanceof d1?u.context:void 0}}})}}var zr={};const Nl=yC(h_);var Fd={},Ud={},zd={},$d={},Vd={},Wd={},h1;function Jw(){if(h1)return Wd;h1=1,Object.defineProperty(Wd,"__esModule",{value:!0});class r extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Wd.default=r,Wd}var f1;function ey(){if(f1)return Vd;f1=1,Object.defineProperty(Vd,"__esModule",{value:!0});const e=Nl.__importDefault(Jw());class n{constructor(d){var u,g;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(u=d.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=d.signal,this.isMaybeSingle=(g=d.isMaybeSingle)!==null&&g!==void 0?g:!1,d.fetch?this.fetch=d.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,u){return this.headers=new Headers(this.headers),this.headers.set(d,u),this}then(d,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const g=this.fetch;let x=g(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var y,S,E,T;let I=null,O=null,k=null,P=v.status,L=v.statusText;if(v.ok){if(this.method!=="HEAD"){const ee=await v.text();ee===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?O=ee:O=JSON.parse(ee))}const B=(S=this.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),G=(E=v.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");B&&G&&G.length>1&&(k=parseInt(G[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(I={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,k=null,P=406,L="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const B=await v.text();try{I=JSON.parse(B),Array.isArray(I)&&v.status===404&&(O=[],I=null,P=200,L="OK")}catch{v.status===404&&B===""?(P=204,L="No Content"):I={message:B}}if(I&&this.isMaybeSingle&&(!((T=I?.details)===null||T===void 0)&&T.includes("0 rows"))&&(I=null,P=200,L="OK"),I&&this.shouldThrowOnError)throw new e.default(I)}return{error:I,data:O,count:k,status:P,statusText:L}});return this.shouldThrowOnError||(x=x.catch(v=>{var y,S,E;return{error:{message:`${(y=v?.name)!==null&&y!==void 0?y:"FetchError"}: ${v?.message}`,details:`${(S=v?.stack)!==null&&S!==void 0?S:""}`,hint:"",code:`${(E=v?.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),x.then(d,u)}returns(){return this}overrideTypes(){return this}}return Vd.default=n,Vd}var m1;function ty(){if(m1)return $d;m1=1,Object.defineProperty($d,"__esModule",{value:!0});const e=Nl.__importDefault(ey());class n extends e.default{select(d){let u=!1;const g=(d??"*").split("").map(x=>/\s/.test(x)&&!u?"":(x==='"'&&(u=!u),x)).join("");return this.url.searchParams.set("select",g),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:u=!0,nullsFirst:g,foreignTable:x,referencedTable:v=x}={}){const y=v?`${v}.order`:"order",S=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${S?`${S},`:""}${d}.${u?"asc":"desc"}${g===void 0?"":g?".nullsfirst":".nullslast"}`),this}limit(d,{foreignTable:u,referencedTable:g=u}={}){const x=typeof g>"u"?"limit":`${g}.limit`;return this.url.searchParams.set(x,`${d}`),this}range(d,u,{foreignTable:g,referencedTable:x=g}={}){const v=typeof x>"u"?"offset":`${x}.offset`,y=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(v,`${d}`),this.url.searchParams.set(y,`${u-d+1}`),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:u=!1,settings:g=!1,buffers:x=!1,wal:v=!1,format:y="text"}={}){var S;const E=[d?"analyze":null,u?"verbose":null,g?"settings":null,x?"buffers":null,v?"wal":null].filter(Boolean).join("|"),T=(S=this.headers.get("Accept"))!==null&&S!==void 0?S:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${T}"; options=${E};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${d}`),this}}return $d.default=n,$d}var p1;function dm(){if(p1)return zd;p1=1,Object.defineProperty(zd,"__esModule",{value:!0});const e=Nl.__importDefault(ty()),n=new RegExp("[,()]");class o extends e.default{eq(u,g){return this.url.searchParams.append(u,`eq.${g}`),this}neq(u,g){return this.url.searchParams.append(u,`neq.${g}`),this}gt(u,g){return this.url.searchParams.append(u,`gt.${g}`),this}gte(u,g){return this.url.searchParams.append(u,`gte.${g}`),this}lt(u,g){return this.url.searchParams.append(u,`lt.${g}`),this}lte(u,g){return this.url.searchParams.append(u,`lte.${g}`),this}like(u,g){return this.url.searchParams.append(u,`like.${g}`),this}likeAllOf(u,g){return this.url.searchParams.append(u,`like(all).{${g.join(",")}}`),this}likeAnyOf(u,g){return this.url.searchParams.append(u,`like(any).{${g.join(",")}}`),this}ilike(u,g){return this.url.searchParams.append(u,`ilike.${g}`),this}ilikeAllOf(u,g){return this.url.searchParams.append(u,`ilike(all).{${g.join(",")}}`),this}ilikeAnyOf(u,g){return this.url.searchParams.append(u,`ilike(any).{${g.join(",")}}`),this}is(u,g){return this.url.searchParams.append(u,`is.${g}`),this}in(u,g){const x=Array.from(new Set(g)).map(v=>typeof v=="string"&&n.test(v)?`"${v}"`:`${v}`).join(",");return this.url.searchParams.append(u,`in.(${x})`),this}contains(u,g){return typeof g=="string"?this.url.searchParams.append(u,`cs.${g}`):Array.isArray(g)?this.url.searchParams.append(u,`cs.{${g.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(g)}`),this}containedBy(u,g){return typeof g=="string"?this.url.searchParams.append(u,`cd.${g}`):Array.isArray(g)?this.url.searchParams.append(u,`cd.{${g.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(g)}`),this}rangeGt(u,g){return this.url.searchParams.append(u,`sr.${g}`),this}rangeGte(u,g){return this.url.searchParams.append(u,`nxl.${g}`),this}rangeLt(u,g){return this.url.searchParams.append(u,`sl.${g}`),this}rangeLte(u,g){return this.url.searchParams.append(u,`nxr.${g}`),this}rangeAdjacent(u,g){return this.url.searchParams.append(u,`adj.${g}`),this}overlaps(u,g){return typeof g=="string"?this.url.searchParams.append(u,`ov.${g}`):this.url.searchParams.append(u,`ov.{${g.join(",")}}`),this}textSearch(u,g,{config:x,type:v}={}){let y="";v==="plain"?y="pl":v==="phrase"?y="ph":v==="websearch"&&(y="w");const S=x===void 0?"":`(${x})`;return this.url.searchParams.append(u,`${y}fts${S}.${g}`),this}match(u){return Object.entries(u).forEach(([g,x])=>{this.url.searchParams.append(g,`eq.${x}`)}),this}not(u,g,x){return this.url.searchParams.append(u,`not.${g}.${x}`),this}or(u,{foreignTable:g,referencedTable:x=g}={}){const v=x?`${x}.or`:"or";return this.url.searchParams.append(v,`(${u})`),this}filter(u,g,x){return this.url.searchParams.append(u,`${g}.${x}`),this}}return zd.default=o,zd}var g1;function ny(){if(g1)return Ud;g1=1,Object.defineProperty(Ud,"__esModule",{value:!0});const e=Nl.__importDefault(dm());class n{constructor(d,{headers:u={},schema:g,fetch:x}){this.url=d,this.headers=new Headers(u),this.schema=g,this.fetch=x}select(d,u){const{head:g=!1,count:x}=u??{},v=g?"HEAD":"GET";let y=!1;const S=(d??"*").split("").map(E=>/\s/.test(E)&&!y?"":(E==='"'&&(y=!y),E)).join("");return this.url.searchParams.set("select",S),x&&this.headers.append("Prefer",`count=${x}`),new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:u,defaultToNull:g=!0}={}){var x;const v="POST";if(u&&this.headers.append("Prefer",`count=${u}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const y=d.reduce((S,E)=>S.concat(Object.keys(E)),[]);if(y.length>0){const S=[...new Set(y)].map(E=>`"${E}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}upsert(d,{onConflict:u,ignoreDuplicates:g=!1,count:x,defaultToNull:v=!0}={}){var y;const S="POST";if(this.headers.append("Prefer",`resolution=${g?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),x&&this.headers.append("Prefer",`count=${x}`),v||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const E=d.reduce((T,I)=>T.concat(Object.keys(I)),[]);if(E.length>0){const T=[...new Set(E)].map(I=>`"${I}"`);this.url.searchParams.set("columns",T.join(","))}}return new e.default({method:S,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(d,{count:u}={}){var g;const x="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}delete({count:d}={}){var u;const g="DELETE";return d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Ud.default=n,Ud}var x1;function p_(){if(x1)return Fd;x1=1,Object.defineProperty(Fd,"__esModule",{value:!0});const r=Nl,e=r.__importDefault(ny()),n=r.__importDefault(dm());class o{constructor(u,{headers:g={},schema:x,fetch:v}={}){this.url=u,this.headers=new Headers(g),this.schemaName=x,this.fetch=v}from(u){const g=new URL(`${this.url}/${u}`);return new e.default(g,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,g={},{head:x=!1,get:v=!1,count:y}={}){var S;let E;const T=new URL(`${this.url}/rpc/${u}`);let I;x||v?(E=x?"HEAD":"GET",Object.entries(g).filter(([k,P])=>P!==void 0).map(([k,P])=>[k,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([k,P])=>{T.searchParams.append(k,P)})):(E="POST",I=g);const O=new Headers(this.headers);return y&&O.set("Prefer",`count=${y}`),new n.default({method:E,url:T,headers:O,schema:this.schemaName,body:I,fetch:(S=this.fetch)!==null&&S!==void 0?S:fetch})}}return Fd.default=o,Fd}var w1;function g_(){if(w1)return zr;w1=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.PostgrestError=zr.PostgrestBuilder=zr.PostgrestTransformBuilder=zr.PostgrestFilterBuilder=zr.PostgrestQueryBuilder=zr.PostgrestClient=void 0;const r=Nl,e=r.__importDefault(p_());zr.PostgrestClient=e.default;const n=r.__importDefault(ny());zr.PostgrestQueryBuilder=n.default;const o=r.__importDefault(dm());zr.PostgrestFilterBuilder=o.default;const d=r.__importDefault(ty());zr.PostgrestTransformBuilder=d.default;const u=r.__importDefault(ey());zr.PostgrestBuilder=u.default;const g=r.__importDefault(Jw());return zr.PostgrestError=g.default,zr.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:u.default,PostgrestError:g.default},zr}var ry=g_();const sy=Ac(ry),x_=K0({__proto__:null,default:sy},[ry]),{PostgrestClient:w_,PostgrestQueryBuilder:Ek,PostgrestFilterBuilder:Sk,PostgrestTransformBuilder:_k,PostgrestBuilder:Nk,PostgrestError:Ak}=sy||x_;class y_{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,d=parseInt(o.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const o=this.getWebSocketConstructor();return new o(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const v_="2.79.0",b_=`realtime-js/${v_}`,C_="1.0.0",N0=1e4,E_=1e3,S_=100;var gc;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(gc||(gc={}));var xr;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(xr||(xr={}));var Js;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Js||(Js={}));var A0;(function(r){r.websocket="websocket"})(A0||(A0={}));var lo;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(lo||(lo={}));class __{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),o=new TextDecoder;return this._decodeBroadcast(e,n,o)}_decodeBroadcast(e,n,o){const d=n.getUint8(1),u=n.getUint8(2);let g=this.HEADER_LENGTH+2;const x=o.decode(e.slice(g,g+d));g=g+d;const v=o.decode(e.slice(g,g+u));g=g+u;const y=JSON.parse(o.decode(e.slice(g,e.byteLength)));return{ref:null,topic:x,event:v,payload:y}}}class iy{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var An;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(An||(An={}));const y1=(r,e,n={})=>{var o;const d=(o=n.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((u,g)=>(u[g]=N_(g,r,e,d),u),{}):{}},N_=(r,e,n,o)=>{const d=e.find(x=>x.name===r),u=d?.type,g=n[r];return u&&!o.includes(u)?ay(u,g):j0(g)},ay=(r,e)=>{if(r.charAt(0)==="_"){const n=r.slice(1,r.length);return T_(e,n)}switch(r){case An.bool:return A_(e);case An.float4:case An.float8:case An.int2:case An.int4:case An.int8:case An.numeric:case An.oid:return j_(e);case An.json:case An.jsonb:return I_(e);case An.timestamp:return R_(e);case An.abstime:case An.date:case An.daterange:case An.int4range:case An.int8range:case An.money:case An.reltime:case An.text:case An.time:case An.timestamptz:case An.timetz:case An.tsrange:case An.tstzrange:return j0(e);default:return j0(e)}},j0=r=>r,A_=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},j_=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},I_=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},T_=(r,e)=>{if(typeof r!="string")return r;const n=r.length-1,o=r[n];if(r[0]==="{"&&o==="}"){let u;const g=r.slice(1,n);try{u=JSON.parse("["+g+"]")}catch{u=g?g.split(","):[]}return u.map(x=>ay(e,x))}return r},R_=r=>typeof r=="string"?r.replace(" ","T"):r,oy=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Nf{constructor(e,n,o={},d=N0){this.channel=e,this.event=n,this.payload=o,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var o;return this._hasReceived(e)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var v1;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(v1||(v1={}));class xc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},d=>{const{onJoin:u,onLeave:g,onSync:x}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xc.syncState(this.state,d,u,g),this.pendingDiffs.forEach(v=>{this.state=xc.syncDiff(this.state,v,u,g)}),this.pendingDiffs=[],x()}),this.channel._on(o.diff,{},d=>{const{onJoin:u,onLeave:g,onSync:x}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=xc.syncDiff(this.state,d,u,g),x())}),this.onJoin((d,u,g)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:u,newPresences:g})}),this.onLeave((d,u,g)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:u,leftPresences:g})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,o,d){const u=this.cloneDeep(e),g=this.transformState(n),x={},v={};return this.map(u,(y,S)=>{g[y]||(v[y]=S)}),this.map(g,(y,S)=>{const E=u[y];if(E){const T=S.map(P=>P.presence_ref),I=E.map(P=>P.presence_ref),O=S.filter(P=>I.indexOf(P.presence_ref)<0),k=E.filter(P=>T.indexOf(P.presence_ref)<0);O.length>0&&(x[y]=O),k.length>0&&(v[y]=k)}else x[y]=S}),this.syncDiff(u,{joins:x,leaves:v},o,d)}static syncDiff(e,n,o,d){const{joins:u,leaves:g}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),d||(d=()=>{}),this.map(u,(x,v)=>{var y;const S=(y=e[x])!==null&&y!==void 0?y:[];if(e[x]=this.cloneDeep(v),S.length>0){const E=e[x].map(I=>I.presence_ref),T=S.filter(I=>E.indexOf(I.presence_ref)<0);e[x].unshift(...T)}o(x,S,v)}),this.map(g,(x,v)=>{let y=e[x];if(!y)return;const S=v.map(E=>E.presence_ref);y=y.filter(E=>S.indexOf(E.presence_ref)<0),e[x]=y,d(x,y,v),y.length===0&&delete e[x]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(o=>n(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,o)=>{const d=e[o];return"metas"in d?n[o]=d.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[o]=d,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var b1;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(b1||(b1={}));var wc;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(wc||(wc={}));var $i;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})($i||($i={}));class um{constructor(e,n={config:{}},o){var d,u;if(this.topic=e,this.params=n,this.socket=o,this.bindings={},this.state=xr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Nf(this,Js.join,this.params,this.timeout),this.rejoinTimer=new iy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(g=>g.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xr.closed,this.socket._remove(this)}),this._onError(g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Js.reply,{},(g,x)=>{this._trigger(this._replyEventName(x),g)}),this.presence=new xc(this),this.broadcastEndpointURL=oy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var o,d,u;if(this.socket.isConnected()||this.socket.connect(),this.state==xr.closed){const{config:{broadcast:g,presence:x,private:v}}=this.params,y=(d=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(I=>I.filter))!==null&&d!==void 0?d:[],S=!!this.bindings[wc.PRESENCE]&&this.bindings[wc.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,E={},T={broadcast:g,presence:Object.assign(Object.assign({},x),{enabled:S}),postgres_changes:y,private:v};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(I=>e?.($i.CHANNEL_ERROR,I)),this._onClose(()=>e?.($i.CLOSED)),this.updateJoinPayload(Object.assign({config:T},E)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:I})=>{var O;if(this.socket.setAuth(),I===void 0){e?.($i.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,P=(O=k?.length)!==null&&O!==void 0?O:0,L=[];for(let U=0;U<P;U++){const B=k[U],{filter:{event:G,schema:ee,table:se,filter:V}}=B,te=I&&I[U];if(te&&te.event===G&&te.schema===ee&&te.table===se&&te.filter===V)L.push(Object.assign(Object.assign({},B),{id:te.id}));else{this.unsubscribe(),this.state=xr.errored,e?.($i.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e($i.SUBSCRIBED);return}}).receive("error",I=>{this.state=xr.errored,e?.($i.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(I).join(", ")||"error")))}).receive("timeout",()=>{e?.($i.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,o){return this.state===xr.joined&&e===wc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,o)}async httpSend(e,n,o={}){var d;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const g={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},x=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(d=o.timeout)!==null&&d!==void 0?d:this.timeout);if(x.status===202)return{success:!0};let v=x.statusText;try{const y=await x.json();v=y.error||y.message||v}catch{}return Promise.reject(new Error(v))}async send(e,n={}){var o,d;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:g}=e,v={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:g,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((d=y.body)===null||d===void 0?void 0:d.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var g,x,v;const y=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((v=(x=(g=this.params)===null||g===void 0?void 0:g.config)===null||x===void 0?void 0:x.broadcast)===null||v===void 0)&&v.ack)&&u("ok"),y.receive("ok",()=>u("ok")),y.receive("error",()=>u("error")),y.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Js.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(d=>{o=new Nf(this,Js.leave,{},e),o.receive("ok",()=>{n(),d("ok")}).receive("timeout",()=>{n(),d("timed out")}).receive("error",()=>{d("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xr.closed,this.bindings={}}async _fetchWithTimeout(e,n,o){const d=new AbortController,u=setTimeout(()=>d.abort(),o),g=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:d.signal}));return clearTimeout(u),g}_push(e,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Nf(this,e,n,o);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>S_){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,o){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,o){var d,u;const g=e.toLocaleLowerCase(),{close:x,error:v,leave:y,join:S}=Js;if(o&&[x,v,y,S].indexOf(g)>=0&&o!==this._joinRef())return;let T=this._onMessage(g,n,o);if(n&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(g)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(I=>{var O,k,P;return((O=I.filter)===null||O===void 0?void 0:O.event)==="*"||((P=(k=I.filter)===null||k===void 0?void 0:k.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===g}).map(I=>I.callback(T,o)):(u=this.bindings[g])===null||u===void 0||u.filter(I=>{var O,k,P,L,U,B;if(["broadcast","presence","postgres_changes"].includes(g))if("id"in I){const G=I.id,ee=(O=I.filter)===null||O===void 0?void 0:O.event;return G&&((k=n.ids)===null||k===void 0?void 0:k.includes(G))&&(ee==="*"||ee?.toLocaleLowerCase()===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const G=(U=(L=I?.filter)===null||L===void 0?void 0:L.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return G==="*"||G===((B=n?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===g}).map(I=>{if(typeof T=="object"&&"ids"in T){const O=T.data,{schema:k,table:P,commit_timestamp:L,type:U,errors:B}=O;T=Object.assign(Object.assign({},{schema:k,table:P,commit_timestamp:L,eventType:U,new:{},old:{},errors:B}),this._getPayloadRecords(O))}I.callback(T,o)})}_isClosed(){return this.state===xr.closed}_isJoined(){return this.state===xr.joined}_isJoining(){return this.state===xr.joining}_isLeaving(){return this.state===xr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,o){const d=e.toLocaleLowerCase(),u={type:d,filter:n,callback:o};return this.bindings[d]?this.bindings[d].push(u):this.bindings[d]=[u],this}_off(e,n){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(d=>{var u;return!(((u=d.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&um.isEqual(d.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const o in e)if(e[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Js.close,{},e)}_onError(e){this._on(Js.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=y1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=y1(e.columns,e.old_record)),n}}const Af=()=>{},Hd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},k_=[1e3,2e3,5e3,1e4],O_=1e4,P_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class D_{constructor(e,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=N0,this.transport=null,this.heartbeatIntervalMs=Hd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Af,this.ref=0,this.reconnectTimer=null,this.logger=Af,this.conn=null,this.sendBuffer=[],this.serializer=new __,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>d?(...u)=>d(...u):(...u)=>fetch(...u),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${A0.websocket}`,this.httpEndpoint=oy(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=y_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:C_}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,o){this.logger(e,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case gc.connecting:return lo.Connecting;case gc.open:return lo.Open;case gc.closing:return lo.Closing;default:return lo.Closed}}isConnected(){return this.connectionState()===lo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const o=`realtime:${e}`,d=this.getChannels().find(u=>u.topic===o);if(d)return d;{const u=new um(`realtime:${e}`,n,this);return this.channels.push(u),u}}push(e){const{topic:n,event:o,payload:d,ref:u}=e,g=()=>{this.encode(e,x=>{var v;(v=this.conn)===null||v===void 0||v.send(x)})};this.log("push",`${n} ${o} (${u})`,d),this.isConnected()?g():this.sendBuffer.push(g)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(E_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Hd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:d,payload:u,ref:g}=n,x=g?`(${g})`:"",v=u.status||"";this.log("receive",`${v} ${o} ${d} ${x}`.trim(),u),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(d,u,g)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Js.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const o=e.match(/\?/)?"&":"?",d=new URLSearchParams(n);return`${e}${o}${d}`}_workerObjectUrl(e){let n;if(e)n=e;else{const o=new Blob([P_],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const d={access_token:n,version:b_};n&&o.updateJoinPayload(d),o.joinedOnce&&o._isJoined()&&o._push(Js.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(n)}catch(d){this.log("error",`error in ${e} callback`,d)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new iy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,o,d,u,g,x,v,y,S;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=e?.timeout)!==null&&o!==void 0?o:N0,this.heartbeatIntervalMs=(d=e?.heartbeatIntervalMs)!==null&&d!==void 0?d:Hd.HEARTBEAT_INTERVAL,this.worker=(u=e?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(g=e?.accessToken)!==null&&g!==void 0?g:null,this.heartbeatCallback=(x=e?.heartbeatCallback)!==null&&x!==void 0?x:Af,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=e?.reconnectAfterMs)!==null&&v!==void 0?v:(E=>k_[E-1]||O_),this.encode=(y=e?.encode)!==null&&y!==void 0?y:((E,T)=>T(JSON.stringify(E))),this.decode=(S=e?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class hm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vn(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class M_ extends hm{constructor(e,n,o){super(e),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class I0 extends hm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const fm=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),L_=()=>Response,T0=r=>{if(Array.isArray(r))return r.map(n=>T0(n));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([n,o])=>{const d=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[d]=T0(o)}),e},B_=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},jf=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},F_=(r,e,n)=>wt(void 0,void 0,void 0,function*(){const o=yield L_();r instanceof o&&!n?.noResolveJson?r.json().then(d=>{const u=r.status||500,g=d?.statusCode||u+"";e(new M_(jf(d),u,g))}).catch(d=>{e(new I0(jf(d),d))}):e(new I0(jf(r),r))}),U_=(r,e,n,o)=>{const d={method:r,headers:e?.headers||{}};return r==="GET"||!o?d:(B_(o)?(d.headers=Object.assign({"Content-Type":"application/json"},e?.headers),d.body=JSON.stringify(o)):d.body=o,e?.duplex&&(d.duplex=e.duplex),Object.assign(Object.assign({},d),n))};function Ic(r,e,n,o,d,u){return wt(this,void 0,void 0,function*(){return new Promise((g,x)=>{r(n,U_(e,o,d,u)).then(v=>{if(!v.ok)throw v;return o?.noResolveJson?v:v.json()}).then(v=>g(v)).catch(v=>F_(v,x,o))})})}function vc(r,e,n,o){return wt(this,void 0,void 0,function*(){return Ic(r,"GET",e,n,o)})}function Zs(r,e,n,o,d){return wt(this,void 0,void 0,function*(){return Ic(r,"POST",e,o,d,n)})}function R0(r,e,n,o,d){return wt(this,void 0,void 0,function*(){return Ic(r,"PUT",e,o,d,n)})}function z_(r,e,n,o){return wt(this,void 0,void 0,function*(){return Ic(r,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function mm(r,e,n,o,d){return wt(this,void 0,void 0,function*(){return Ic(r,"DELETE",e,o,d,n)})}class $_{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return wt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vn(e))return{data:null,error:e};throw e}})}}var ly;class V_{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[ly]="BlobDownloadBuilder",this.promise=null}asStream(){return new $_(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return wt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vn(e))return{data:null,error:e};throw e}})}}ly=Symbol.toStringTag;const W_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},C1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class H_{constructor(e,n={},o,d){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=o,this.fetch=fm(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,o,d){return wt(this,void 0,void 0,function*(){try{let u;const g=Object.assign(Object.assign({},C1),d);let x=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(g.upsert)});const v=g.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",g.cacheControl),v&&u.append("metadata",this.encodeMetadata(v)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",g.cacheControl),v&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(v))):(u=o,x["cache-control"]=`max-age=${g.cacheControl}`,x["content-type"]=g.contentType,v&&(x["x-metadata"]=this.toBase64(this.encodeMetadata(v))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!g.duplex&&(g.duplex="half")),d?.headers&&(x=Object.assign(Object.assign({},x),d.headers));const y=this._removeEmptyFolders(n),S=this._getFinalPath(y),E=yield(e=="PUT"?R0:Zs)(this.fetch,`${this.url}/object/${S}`,u,Object.assign({headers:x},g?.duplex?{duplex:g.duplex}:{}));return{data:{path:y,id:E.Id,fullPath:E.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Vn(u))return{data:null,error:u};throw u}})}upload(e,n,o){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,o)})}uploadToSignedUrl(e,n,o,d){return wt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(e),g=this._getFinalPath(u),x=new URL(this.url+`/object/upload/sign/${g}`);x.searchParams.set("token",n);try{let v;const y=Object.assign({upsert:C1.upsert},d),S=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&o instanceof Blob?(v=new FormData,v.append("cacheControl",y.cacheControl),v.append("",o)):typeof FormData<"u"&&o instanceof FormData?(v=o,v.append("cacheControl",y.cacheControl)):(v=o,S["cache-control"]=`max-age=${y.cacheControl}`,S["content-type"]=y.contentType);const E=yield R0(this.fetch,x.toString(),v,{headers:S});return{data:{path:u,fullPath:E.Key},error:null}}catch(v){if(this.shouldThrowOnError)throw v;if(Vn(v))return{data:null,error:v};throw v}})}createSignedUploadUrl(e,n){return wt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const d=Object.assign({},this.headers);n?.upsert&&(d["x-upsert"]="true");const u=yield Zs(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:d}),g=new URL(this.url+u.url),x=g.searchParams.get("token");if(!x)throw new hm("No token returned by API");return{data:{signedUrl:g.toString(),path:e,token:x},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vn(o))return{data:null,error:o};throw o}})}update(e,n,o){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,o)})}move(e,n,o){return wt(this,void 0,void 0,function*(){try{return{data:yield Zs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Vn(d))return{data:null,error:d};throw d}})}copy(e,n,o){return wt(this,void 0,void 0,function*(){try{return{data:{path:(yield Zs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Vn(d))return{data:null,error:d};throw d}})}createSignedUrl(e,n,o){return wt(this,void 0,void 0,function*(){try{let d=this._getFinalPath(e),u=yield Zs(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:n},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const g=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${g}`)},{data:u,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Vn(d))return{data:null,error:d};throw d}})}createSignedUrls(e,n,o){return wt(this,void 0,void 0,function*(){try{const d=yield Zs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:d.map(g=>Object.assign(Object.assign({},g),{signedUrl:g.signedURL?encodeURI(`${this.url}${g.signedURL}${u}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Vn(d))return{data:null,error:d};throw d}})}download(e,n){const d=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),g=u?`?${u}`:"",x=this._getFinalPath(e),v=()=>vc(this.fetch,`${this.url}/${d}/${x}${g}`,{headers:this.headers,noResolveJson:!0});return new V_(v,this.shouldThrowOnError)}info(e){return wt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const o=yield vc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:T0(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vn(o))return{data:null,error:o};throw o}})}exists(e){return wt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield z_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vn(o)&&o instanceof I0){const d=o.originalError;if([400,404].includes(d?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,n){const o=this._getFinalPath(e),d=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&d.push(u);const x=typeof n?.transform<"u"?"render/image":"object",v=this.transformOptsToQueryString(n?.transform||{});v!==""&&d.push(v);let y=d.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${x}/public/${o}${y}`)}}}remove(e){return wt(this,void 0,void 0,function*(){try{return{data:yield mm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}})}list(e,n,o){return wt(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},W_),n),{prefix:e||""});return{data:yield Zs(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},o),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Vn(d))return{data:null,error:d};throw d}})}listV2(e,n){return wt(this,void 0,void 0,function*(){try{const o=Object.assign({},e);return{data:yield Zs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vn(o))return{data:null,error:o};throw o}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const cy="2.79.0",dy={"X-Client-Info":`storage-js/${cy}`};class G_{constructor(e,n={},o,d){this.shouldThrowOnError=!1;const u=new URL(e);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dy),n),this.fetch=fm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return wt(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield vc(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}})}getBucket(e){return wt(this,void 0,void 0,function*(){try{return{data:yield vc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}})}createBucket(e){return wt(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield Zs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Vn(d))return{data:null,error:d};throw d}})}updateBucket(e,n){return wt(this,void 0,void 0,function*(){try{return{data:yield R0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vn(o))return{data:null,error:o};throw o}})}emptyBucket(e){return wt(this,void 0,void 0,function*(){try{return{data:yield Zs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return wt(this,void 0,void 0,function*(){try{return{data:yield mm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class q_{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dy),n),this.fetch=fm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return wt(this,void 0,void 0,function*(){try{return{data:yield Zs(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}})}listBuckets(e){return wt(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const o=n.toString(),d=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield vc(this.fetch,d,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return wt(this,void 0,void 0,function*(){try{return{data:yield mm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vn(n))return{data:null,error:n};throw n}})}}const pm={"X-Client-Info":`storage-js/${cy}`,"Content-Type":"application/json"};class uy extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Cs(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class If extends uy{constructor(e,n,o){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class X_ extends uy{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var E1;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(E1||(E1={}));const gm=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Y_=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},S1=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),K_=(r,e,n)=>wt(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!n?.noResolveJson){const d=r.status||500,u=r;if(typeof u.json=="function")u.json().then(g=>{const x=g?.statusCode||g?.code||d+"";e(new If(S1(g),d,x))}).catch(()=>{const g=d+"",x=u.statusText||`HTTP ${d} error`;e(new If(x,d,g))});else{const g=d+"",x=u.statusText||`HTTP ${d} error`;e(new If(x,d,g))}}else e(new X_(S1(r),r))}),Z_=(r,e,n,o)=>{const d={method:r,headers:e?.headers||{}};return o?(Y_(o)?(d.headers=Object.assign({"Content-Type":"application/json"},e?.headers),d.body=JSON.stringify(o)):d.body=o,Object.assign(Object.assign({},d),n)):d};function Q_(r,e,n,o,d,u){return wt(this,void 0,void 0,function*(){return new Promise((g,x)=>{r(n,Z_(e,o,d,u)).then(v=>{if(!v.ok)throw v;if(o?.noResolveJson)return v;const y=v.headers.get("content-type");return!y||!y.includes("application/json")?{}:v.json()}).then(v=>g(v)).catch(v=>K_(v,x,o))})})}function Es(r,e,n,o,d){return wt(this,void 0,void 0,function*(){return Q_(r,"POST",e,o,d,n)})}class J_{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pm),n),this.fetch=gm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return wt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getIndex(e,n){return wt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Cs(o))return{data:null,error:o};throw o}})}listIndexes(e){return wt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return wt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Cs(o))return{data:null,error:o};throw o}})}}class eN{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pm),n),this.fetch=gm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return wt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Es(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getVectors(e){return wt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}listVectors(e){return wt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Es(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}queryVectors(e){return wt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteVectors(e){return wt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Es(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}}class tN{constructor(e,n={},o){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pm),n),this.fetch=gm(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return wt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}getBucket(e){return wt(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}listBuckets(){return wt(this,arguments,void 0,function*(e={}){try{return{data:yield Es(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}deleteBucket(e){return wt(this,void 0,void 0,function*(){try{return{data:(yield Es(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}})}}class nN extends tN{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new rN(this.url,this.headers,e,this.fetch)}}class rN extends J_{constructor(e,n,o,d){super(e,n,d),this.vectorBucketName=o}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return wt(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return wt(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return wt(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return wt(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new sN(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class sN extends eN{constructor(e,n,o,d,u){super(e,n,u),this.vectorBucketName=o,this.indexName=d}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return wt(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return wt(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return wt(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return wt(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return wt(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class iN extends G_{constructor(e,n={},o,d){super(e,n,o,d)}from(e){return new H_(this.url,this.headers,e,this.fetch)}get vectors(){return new nN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new q_(this.url+"/iceberg",this.headers,this.fetch)}}const aN="2.79.0";let fc="";typeof Deno<"u"?fc="deno":typeof document<"u"?fc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fc="react-native":fc="node";const oN={"X-Client-Info":`supabase-js-${fc}/${aN}`},lN={headers:oN},cN={schema:"public"},dN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uN={},hN=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),fN=()=>Headers,mN=(r,e,n)=>{const o=hN(n),d=fN();return async(u,g)=>{var x;const v=(x=await e())!==null&&x!==void 0?x:r;let y=new d(g?.headers);return y.has("apikey")||y.set("apikey",r),y.has("Authorization")||y.set("Authorization",`Bearer ${v}`),o(u,Object.assign(Object.assign({},g),{headers:y}))}};function pN(r){return r.endsWith("/")?r:r+"/"}function gN(r,e){var n,o;const{db:d,auth:u,realtime:g,global:x}=r,{db:v,auth:y,realtime:S,global:E}=e,T={db:Object.assign(Object.assign({},v),d),auth:Object.assign(Object.assign({},y),u),realtime:Object.assign(Object.assign({},S),g),storage:{},global:Object.assign(Object.assign(Object.assign({},E),x),{headers:Object.assign(Object.assign({},(n=E?.headers)!==null&&n!==void 0?n:{}),(o=x?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return r.accessToken?T.accessToken=r.accessToken:delete T.accessToken,T}function xN(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const hy="2.79.0",ol=30*1e3,k0=3,Tf=k0*ol,wN="http://localhost:9999",yN="supabase.auth.token",vN={"X-Client-Info":`gotrue-js/${hy}`},O0="X-Supabase-Api-Version",fy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,CN=600*1e3;class bc extends Error{constructor(e,n,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function St(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class EN extends bc{constructor(e,n,o){super(e,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function SN(r){return St(r)&&r.name==="AuthApiError"}class co extends bc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ka extends bc{constructor(e,n,o,d){super(e,o,d),this.name=n,this.status=o}}class Xs extends ka{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _N(r){return St(r)&&r.name==="AuthSessionMissingError"}class Zo extends ka{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gd extends ka{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qd extends ka{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function NN(r){return St(r)&&r.name==="AuthImplicitGrantRedirectError"}class _1 extends ka{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class P0 extends ka{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Rf(r){return St(r)&&r.name==="AuthRetryableFetchError"}class N1 extends ka{constructor(e,n,o){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class D0 extends ka{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),A1=` 	
\r=`.split(""),AN=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<A1.length;e+=1)r[A1[e].charCodeAt(0)]=-2;for(let e=0;e<mu.length;e+=1)r[mu[e].charCodeAt(0)]=e;return r})();function j1(r,e,n){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(mu[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;n(mu[o]),e.queuedBits-=6}}function my(r,e,n){const o=AN[r];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function I1(r){const e=[],n=g=>{e.push(String.fromCodePoint(g))},o={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},u=g=>{TN(g,o,n)};for(let g=0;g<r.length;g+=1)my(r.charCodeAt(g),d,u);return e.join("")}function jN(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function IN(r,e){for(let n=0;n<r.length;n+=1){let o=r.charCodeAt(n);if(o>55295&&o<=56319){const d=(o-55296)*1024&65535;o=(r.charCodeAt(n+1)-56320&65535|d)+65536,n+=1}jN(o,e)}}function TN(r,e,n){if(e.utf8seq===0){if(r<=127){n(r);return}for(let o=1;o<6;o+=1)if((r>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function dl(r){const e=[],n={queue:0,queuedBits:0},o=d=>{e.push(d)};for(let d=0;d<r.length;d+=1)my(r.charCodeAt(d),n,o);return new Uint8Array(e)}function RN(r){const e=[];return IN(r,n=>e.push(n)),new Uint8Array(e)}function ho(r){const e=[],n={queue:0,queuedBits:0},o=d=>{e.push(d)};return r.forEach(d=>j1(d,n,o)),j1(null,n,o),e.join("")}function kN(r){return Math.round(Date.now()/1e3)+r}function ON(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const $r=()=>typeof window<"u"&&typeof document<"u",io={tested:!1,writable:!1},py=()=>{if(!$r())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(io.tested)return io.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),io.tested=!0,io.writable=!0}catch{io.tested=!0,io.writable=!1}return io.writable};function PN(r){const e={},n=new URL(r);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((d,u)=>{e[u]=d})}catch{}return n.searchParams.forEach((o,d)=>{e[d]=o}),e}const gy=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),DN=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ll=async(r,e,n)=>{await r.setItem(e,JSON.stringify(n))},ao=async(r,e)=>{const n=await r.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ya=async(r,e)=>{await r.removeItem(e)};class Tu{constructor(){this.promise=new Tu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Tu.promiseConstructor=Promise;function kf(r){const e=r.split(".");if(e.length!==3)throw new D0("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!bN.test(e[o]))throw new D0("JWT not in base64url format");return{header:JSON.parse(I1(e[0])),payload:JSON.parse(I1(e[1])),signature:dl(e[2]),raw:{header:e[0],payload:e[1]}}}async function MN(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function LN(r,e){return new Promise((o,d)=>{(async()=>{for(let u=0;u<1/0;u++)try{const g=await r(u);if(!e(u,null,g)){o(g);return}}catch(g){if(!e(u,g)){d(g);return}}})()})}function BN(r){return("0"+r.toString(16)).substr(-2)}function FN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let d="";for(let u=0;u<56;u++)d+=n.charAt(Math.floor(Math.random()*o));return d}return crypto.getRandomValues(e),Array.from(e,BN).join("")}async function UN(r){const n=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",n),d=new Uint8Array(o);return Array.from(d).map(u=>String.fromCharCode(u)).join("")}async function zN(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const n=await UN(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qo(r,e,n=!1){const o=FN();let d=o;n&&(d+="/PASSWORD_RECOVERY"),await ll(r,`${e}-code-verifier`,d);const u=await zN(o);return[u,o===u?"plain":"s256"]}const $N=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function VN(r){const e=r.headers.get(O0);if(!e||!e.match($N))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function WN(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function HN(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const GN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jo(r){if(!GN.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Of(){const r={};return new Proxy(r,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qN(r,e){return new Proxy(r,{get:(n,o,d)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,d)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,o,d)}})}function T1(r){return JSON.parse(JSON.stringify(r))}const oo=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),XN=[502,503,504];async function R1(r){var e;if(!DN(r))throw new P0(oo(r),0);if(XN.includes(r.status))throw new P0(oo(r),r.status);let n;try{n=await r.json()}catch(u){throw new co(oo(u),u)}let o;const d=VN(r);if(d&&d.getTime()>=fy["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new N1(oo(n),r.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Xs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,g)=>u&&typeof g=="string",!0))throw new N1(oo(n),r.status,n.weak_password.reasons);throw new EN(oo(n),r.status||500,o)}const YN=(r,e,n,o)=>{const d={method:r,headers:e?.headers||{}};return r==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),d.body=JSON.stringify(o),Object.assign(Object.assign({},d),n))};async function Dt(r,e,n,o){var d;const u=Object.assign({},o?.headers);u[O0]||(u[O0]=fy["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const g=(d=o?.query)!==null&&d!==void 0?d:{};o?.redirectTo&&(g.redirect_to=o.redirectTo);const x=Object.keys(g).length?"?"+new URLSearchParams(g).toString():"",v=await KN(r,e,n+x,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(v):{data:Object.assign({},v),error:null}}async function KN(r,e,n,o,d,u){const g=YN(e,o,d,u);let x;try{x=await r(n,Object.assign({},g))}catch(v){throw console.error(v),new P0(oo(v),0)}if(x.ok||await R1(x),o?.noResolveJson)return x;try{return await x.json()}catch(v){await R1(v)}}function Ys(r){var e;let n=null;JN(r)&&(n=Object.assign({},r),r.expires_at||(n.expires_at=kN(r.expires_in)));const o=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:n,user:o},error:null}}function k1(r){const e=Ys(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Ca(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function ZN(r){return{data:r,error:null}}function QN(r){const{action_link:e,email_otp:n,hashed_token:o,redirect_to:d,verification_type:u}=r,g=Ra(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),x={action_link:e,email_otp:n,hashed_token:o,redirect_to:d,verification_type:u},v=Object.assign({},g);return{data:{properties:x,user:v},error:null}}function O1(r){return r}function JN(r){return r.access_token&&r.refresh_token&&r.expires_in}const Pf=["global","local","others"];class e3{constructor({url:e="",headers:n={},fetch:o}){this.url=e,this.headers=n,this.fetch=gy(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Pf[0]){if(Pf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pf.join(", ")}`);try{return await Dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(St(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,n={}){try{return await Dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ca})}catch(o){if(St(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:n}=e,o=Ra(e,["options"]),d=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(d.new_email=o?.newEmail,delete d.newEmail),await Dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:QN,redirectTo:n?.redirectTo})}catch(n){if(St(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Dt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ca})}catch(n){if(St(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,o,d,u,g,x,v;try{const y={nextPage:null,lastPage:0,total:0},S=await Dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(d=e?.perPage)===null||d===void 0?void 0:d.toString())!==null&&u!==void 0?u:""},xform:O1});if(S.error)throw S.error;const E=await S.json(),T=(g=S.headers.get("x-total-count"))!==null&&g!==void 0?g:0,I=(v=(x=S.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&v!==void 0?v:[];return I.length>0&&(I.forEach(O=>{const k=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(O.split(";")[1].split("=")[1]);y[`${P}Page`]=k}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},E),y),error:null}}catch(y){if(St(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){Jo(e);try{return await Dt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ca})}catch(n){if(St(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Jo(e);try{return await Dt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ca})}catch(o){if(St(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,n=!1){Jo(e);try{return await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ca})}catch(o){if(St(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){Jo(e.userId);try{const{data:n,error:o}=await Dt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:n,error:o}}catch(n){if(St(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Jo(e.userId),Jo(e.id);try{return{data:await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(St(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,o,d,u,g,x,v;try{const y={nextPage:null,lastPage:0,total:0},S=await Dt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(d=e?.perPage)===null||d===void 0?void 0:d.toString())!==null&&u!==void 0?u:""},xform:O1});if(S.error)throw S.error;const E=await S.json(),T=(g=S.headers.get("x-total-count"))!==null&&g!==void 0?g:0,I=(v=(x=S.headers.get("link"))===null||x===void 0?void 0:x.split(","))!==null&&v!==void 0?v:[];return I.length>0&&(I.forEach(O=>{const k=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(O.split(";")[1].split("=")[1]);y[`${P}Page`]=k}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},E),y),error:null}}catch(y){if(St(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(e){try{return await Dt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(St(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Dt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(St(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Dt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(St(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await Dt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(St(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Dt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(St(n))return{data:null,error:n};throw n}}}function P1(r={}){return{getItem:e=>r[e]||null,setItem:(e,n)=>{r[e]=n},removeItem:e=>{delete r[e]}}}const el={debug:!!(globalThis&&py()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class t3 extends xy{}async function n3(r,e,n){el.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),el.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async d=>{if(d){el.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,d.name);try{return await n()}finally{el.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,d.name)}}else{if(e===0)throw el.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new t3(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(el.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function r3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wy(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function s3(r){return parseInt(r,16)}function i3(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function a3(r){var e;const{chainId:n,domain:o,expirationTime:d,issuedAt:u=new Date,nonce:g,notBefore:x,requestId:v,resources:y,scheme:S,uri:E,version:T}=r;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(g&&g.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${g}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const I=wy(r.address),O=S?`${S}://${o}`:o,k=r.statement?`${r.statement}
`:"",P=`${O} wants you to sign in with your Ethereum account:
${I}

${k}`;let L=`URI: ${E}
Version: ${T}
Chain ID: ${n}${g?`
Nonce: ${g}`:""}
Issued At: ${u.toISOString()}`;if(d&&(L+=`
Expiration Time: ${d.toISOString()}`),x&&(L+=`
Not Before: ${x.toISOString()}`),v&&(L+=`
Request ID: ${v}`),y){let U=`
Resources:`;for(const B of y){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);U+=`
- ${B}`}L+=U}return`${P}
${L}`}class or extends Error{constructor({message:e,code:n,cause:o,name:d}){var u;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=d??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class pu extends or{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function o3({error:r,options:e}){var n,o,d;const{publicKey:u}=e;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new or({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new or({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new or({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((d=u.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new or({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new or({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new or({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(x=>x.type==="public-key").length===0?new or({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new or({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const g=window.location.hostname;if(yy(g)){if(u.rp.id!==g)return new or({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new or({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new or({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new or({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new or({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function l3({error:r,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new or({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new or({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(yy(o)){if(n.rpId!==o)return new or({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new or({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new or({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new or({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class c3{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const d3=new c3;function u3(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:n,excludeCredentials:o}=r,d=Ra(r,["challenge","user","excludeCredentials"]),u=dl(e).buffer,g=Object.assign(Object.assign({},n),{id:dl(n.id).buffer}),x=Object.assign(Object.assign({},d),{challenge:u,user:g});if(o&&o.length>0){x.excludeCredentials=new Array(o.length);for(let v=0;v<o.length;v++){const y=o[v];x.excludeCredentials[v]=Object.assign(Object.assign({},y),{id:dl(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return x}function h3(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:n}=r,o=Ra(r,["challenge","allowCredentials"]),d=dl(e).buffer,u=Object.assign(Object.assign({},o),{challenge:d});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let g=0;g<n.length;g++){const x=n[g];u.allowCredentials[g]=Object.assign(Object.assign({},x),{id:dl(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return u}function f3(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r;return{id:r.id,rawId:r.id,response:{attestationObject:ho(new Uint8Array(r.response.attestationObject)),clientDataJSON:ho(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function m3(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r,o=r.getClientExtensionResults(),d=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:ho(new Uint8Array(d.authenticatorData)),clientDataJSON:ho(new Uint8Array(d.clientDataJSON)),signature:ho(new Uint8Array(d.signature)),userHandle:d.userHandle?ho(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yy(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function D1(){var r,e;return!!($r()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function p3(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pu("Browser returned unexpected credential type",e)}:{data:null,error:new pu("Empty credential response",e)}}catch(e){return{data:null,error:o3({error:e,options:r})}}}async function g3(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pu("Browser returned unexpected credential type",e)}:{data:null,error:new pu("Empty credential response",e)}}catch(e){return{data:null,error:l3({error:e,options:r})}}}const x3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},w3={userVerification:"preferred",hints:["security-key"]};function gu(...r){const e=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),n=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),o={};for(const d of r)if(d)for(const u in d){const g=d[u];if(g!==void 0)if(Array.isArray(g))o[u]=g;else if(n(g))o[u]=g;else if(e(g)){const x=o[u];e(x)?o[u]=gu(x,g):o[u]=gu(g)}else o[u]=g}return o}function y3(r,e){return gu(x3,r,e||{})}function v3(r,e){return gu(w3,r,e||{})}class b3{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:o,signal:d},u){try{const{data:g,error:x}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!g)return{data:null,error:x};const v=d??d3.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:y}=g.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(g.webauthn.type){case"create":{const y=y3(g.webauthn.credential_options.publicKey,u?.create),{data:S,error:E}=await p3({publicKey:y,signal:v});return S?{data:{factorId:e,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:S}},error:null}:{data:null,error:E}}case"request":{const y=v3(g.webauthn.credential_options.publicKey,u?.request),{data:S,error:E}=await g3(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:y,signal:v}));return S?{data:{factorId:e,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:S}},error:null}:{data:null,error:E}}}}catch(g){return St(g)?{data:null,error:g}:{data:null,error:new co("Unexpected error in challenge",g)}}}async _verify({challengeId:e,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:d}},u){if(!n)return{data:null,error:new bc("rpId is required for WebAuthn authentication")};try{if(!D1())return{data:null,error:new co("Browser does not support WebAuthn",null)};const{data:g,error:x}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:o},signal:d},{request:u});if(!g)return{data:null,error:x};const{webauthn:v}=g;return this._verify({factorId:e,challengeId:g.challengeId,webauthn:{type:v.type,rpId:n,rpOrigins:o,credential_response:v.credential_response}})}catch(g){return St(g)?{data:null,error:g}:{data:null,error:new co("Unexpected error in authenticate",g)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:d},u){if(!n)return{data:null,error:new bc("rpId is required for WebAuthn registration")};try{if(!D1())return{data:null,error:new co("Browser does not support WebAuthn",null)};const{data:g,error:x}=await this._enroll({friendlyName:e});if(!g)return await this.client.mfa.listFactors().then(S=>{var E;return(E=S.data)===null||E===void 0?void 0:E.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===e&&T.status!=="unverified")}).then(S=>S?this.client.mfa.unenroll({factorId:S?.id}):void 0),{data:null,error:x};const{data:v,error:y}=await this._challenge({factorId:g.id,friendlyName:g.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:d},{create:u});return v?this._verify({factorId:g.id,challengeId:v.challengeId,webauthn:{rpId:n,rpOrigins:o,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:y}}catch(g){return St(g)?{data:null,error:g}:{data:null,error:new co("Unexpected error in register",g)}}}}r3();const C3={url:wN,storageKey:yN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function M1(r,e,n){return await n()}const tl={};class Cc{get jwks(){var e,n;return(n=(e=tl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){tl[this.storageKey]=Object.assign(Object.assign({},tl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=tl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){tl[this.storageKey]=Object.assign(Object.assign({},tl[this.storageKey]),{cachedAt:e})}constructor(e){var n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cc.nextInstanceID,Cc.nextInstanceID+=1,this.instanceID>0&&$r()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const d=Object.assign(Object.assign({},C3),e);if(this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.persistSession=d.persistSession,this.storageKey=d.storageKey,this.autoRefreshToken=d.autoRefreshToken,this.admin=new e3({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=gy(d.fetch),this.lock=d.lock||M1,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:$r()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=n3:this.lock=M1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new b3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:py()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=P1(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=P1(this.memoryStorage)),$r()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hy}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},o="none";if($r()&&(n=PN(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),$r()&&this.detectSessionInUrl&&o!=="none"){const{data:d,error:u}=await this._getSessionFromURL(n,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),NN(u)){const v=(e=u.details)===null||e===void 0?void 0:e.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:g,redirectType:x}=d;return this._debug("#_initialize()","detected session in URL",g,"redirect type",x),await this._saveSession(g),setTimeout(async()=>{x==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",g):await this._notifyAllSubscribers("SIGNED_IN",g)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return St(n)?this._returnResult({error:n}):this._returnResult({error:new co("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,o,d;try{const u=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(d=e?.options)===null||d===void 0?void 0:d.captchaToken}},xform:Ys}),{data:g,error:x}=u;if(x||!g)return this._returnResult({data:{user:null,session:null},error:x});const v=g.session,y=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(u){if(St(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(e){var n,o,d;try{let u;if("email"in e){const{email:S,password:E,options:T}=e;let I=null,O=null;this.flowType==="pkce"&&([I,O]=await Qo(this.storage,this.storageKey)),u=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T?.emailRedirectTo,body:{email:S,password:E,data:(n=T?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:T?.captchaToken},code_challenge:I,code_challenge_method:O},xform:Ys})}else if("phone"in e){const{phone:S,password:E,options:T}=e;u=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:E,data:(o=T?.data)!==null&&o!==void 0?o:{},channel:(d=T?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:T?.captchaToken}},xform:Ys})}else throw new Gd("You must provide either an email or phone number and a password");const{data:g,error:x}=u;if(x||!g)return this._returnResult({data:{user:null,session:null},error:x});const v=g.session,y=g.user;return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(u){if(St(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(e){try{let n;if("email"in e){const{email:u,password:g,options:x}=e;n=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:g,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:k1})}else if("phone"in e){const{phone:u,password:g,options:x}=e;n=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:g,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:k1})}else throw new Gd("You must provide either an email or phone number and a password");const{data:o,error:d}=n;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!o||!o.session||!o.user){const u=new Zo;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:d})}catch(n){if(St(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,o,d,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,o,d,u,g,x,v,y,S,E,T;let I,O;if("message"in e)I=e.message,O=e.signature;else{const{chain:k,wallet:P,statement:L,options:U}=e;let B;if($r())if(typeof P=="object")B=P;else{const ne=window;if("ethereum"in ne&&typeof ne.ethereum=="object"&&"request"in ne.ethereum&&typeof ne.ethereum.request=="function")B=ne.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=P}const G=new URL((n=U?.url)!==null&&n!==void 0?n:window.location.href),ee=await B.request({method:"eth_requestAccounts"}).then(ne=>ne).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ee||ee.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const se=wy(ee[0]);let V=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!V){const ne=await B.request({method:"eth_chainId"});V=s3(ne)}const te={domain:G.host,address:se,statement:L,uri:G.href,version:"1",chainId:V,nonce:(d=U?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(g=(u=U?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&g!==void 0?g:new Date,expirationTime:(x=U?.signInWithEthereum)===null||x===void 0?void 0:x.expirationTime,notBefore:(v=U?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(y=U?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(S=U?.signInWithEthereum)===null||S===void 0?void 0:S.resources};I=a3(te),O=await B.request({method:"personal_sign",params:[i3(I),se]})}try{const{data:k,error:P}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:I,signature:O},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Ys});if(P)throw P;if(!k||!k.session||!k.user){const L=new Zo;return this._returnResult({data:{user:null,session:null},error:L})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:P})}catch(k){if(St(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var n,o,d,u,g,x,v,y,S,E,T,I;let O,k;if("message"in e)O=e.message,k=e.signature;else{const{chain:P,wallet:L,statement:U,options:B}=e;let G;if($r())if(typeof L=="object")G=L;else{const se=window;if("solana"in se&&typeof se.solana=="object"&&("signIn"in se.solana&&typeof se.solana.signIn=="function"||"signMessage"in se.solana&&typeof se.solana.signMessage=="function"))G=se.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=L}const ee=new URL((n=B?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in G&&G.signIn){const se=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),U?{statement:U}:null));let V;if(Array.isArray(se)&&se[0]&&typeof se[0]=="object")V=se[0];else if(se&&typeof se=="object"&&"signedMessage"in se&&"signature"in se)V=se;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)O=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),k=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${ee.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(d=(o=B?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((u=B?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((g=B?.signInWithSolana)===null||g===void 0)&&g.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((x=B?.signInWithSolana)===null||x===void 0)&&x.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((v=B?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((y=B?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((E=(S=B?.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||E===void 0)&&E.length?["Resources",...B.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const se=await G.signMessage(new TextEncoder().encode(O),"utf8");if(!se||!(se instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=se}}try{const{data:P,error:L}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:ho(k)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(I=e.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:Ys});if(L)throw L;if(!P||!P.session||!P.user){const U=new Zo;return this._returnResult({data:{user:null,session:null},error:U})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:L})}catch(P){if(St(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(e){const n=await ao(this.storage,`${this.storageKey}-code-verifier`),[o,d]=(n??"").split("/");try{const{data:u,error:g}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:Ys});if(await ya(this.storage,`${this.storageKey}-code-verifier`),g)throw g;if(!u||!u.session||!u.user){const x=new Zo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:x})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:d??null}),error:g})}catch(u){if(St(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(e){try{const{options:n,provider:o,token:d,access_token:u,nonce:g}=e,x=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:d,access_token:u,nonce:g,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Ys}),{data:v,error:y}=x;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!v||!v.session||!v.user){const S=new Zo;return this._returnResult({data:{user:null,session:null},error:S})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:y})}catch(n){if(St(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,o,d,u,g;try{if("email"in e){const{email:x,options:v}=e;let y=null,S=null;this.flowType==="pkce"&&([y,S]=await Qo(this.storage,this.storageKey));const{error:E}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:x,data:(n=v?.data)!==null&&n!==void 0?n:{},create_user:(o=v?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:y,code_challenge_method:S},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:x,options:v}=e,{data:y,error:S}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:x,data:(d=v?.data)!==null&&d!==void 0?d:{},create_user:(u=v?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(g=v?.channel)!==null&&g!==void 0?g:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:S})}throw new Gd("You must provide either an email or phone number.")}catch(x){if(St(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async verifyOtp(e){var n,o;try{let d,u;"options"in e&&(d=(n=e.options)===null||n===void 0?void 0:n.redirectTo,u=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:g,error:x}=await Dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:d,xform:Ys});if(x)throw x;if(!g)throw new Error("An error occurred on token verification.");const v=g.session,y=g.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:y,session:v},error:null})}catch(d){if(St(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(e){var n,o,d;try{let u=null,g=null;this.flowType==="pkce"&&([u,g]=await Qo(this.storage,this.storageKey));const x=await Dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((d=e?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:g}),headers:this.headers,xform:ZN});return this._returnResult(x)}catch(u){if(St(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:o}=e;if(o)throw o;if(!n)throw new Xs;const{error:d}=await Dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(e){if(St(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:o,type:d,options:u}=e,{error:g}=await Dt(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:d,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}else if("phone"in e){const{phone:o,type:d,options:u}=e,{data:g,error:x}=await Dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:d,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:x})}throw new Gd("You must provide either an email or phone number and a type")}catch(n){if(St(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ao(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<Tf:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const g=await ao(this.userStorage,this.storageKey+"-user");g?.user?e.user=g.user:e.user=Of()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const g={value:this.suppressGetSessionWarning};e.user=qN(e.user,g),g.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:d,error:u}=await this._callRefreshToken(e.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ca}):await this._useSession(async n=>{var o,d,u;const{data:g,error:x}=n;if(x)throw x;return!(!((o=g.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xs}:await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(d=g.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0,xform:Ca})})}catch(n){if(St(n))return _N(n)&&(await this._removeSession(),await ya(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async o=>{const{data:d,error:u}=o;if(u)throw u;if(!d.session)throw new Xs;const g=d.session;let x=null,v=null;this.flowType==="pkce"&&e.email!=null&&([x,v]=await Qo(this.storage,this.storageKey));const{data:y,error:S}=await Dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:x,code_challenge_method:v}),jwt:g.access_token,xform:Ca});if(S)throw S;return g.user=y.user,await this._saveSession(g),await this._notifyAllSubscribers("USER_UPDATED",g),this._returnResult({data:{user:g.user},error:null})})}catch(o){if(St(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xs;const n=Date.now()/1e3;let o=n,d=!0,u=null;const{payload:g}=kf(e.access_token);if(g.exp&&(o=g.exp,d=o<=n),d){const{data:x,error:v}=await this._callRefreshToken(e.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!x)return{data:{user:null,session:null},error:null};u=x}else{const{data:x,error:v}=await this._getUser(e.access_token);if(v)throw v;u={access_token:e.access_token,refresh_token:e.refresh_token,user:x.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(St(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var o;if(!e){const{data:g,error:x}=n;if(x)throw x;e=(o=g.session)!==null&&o!==void 0?o:void 0}if(!e?.refresh_token)throw new Xs;const{data:d,error:u}=await this._callRefreshToken(e.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(St(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!$r())throw new qd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _1("No code detected.");const{data:U,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:d,access_token:u,refresh_token:g,expires_in:x,expires_at:v,token_type:y}=e;if(!u||!x||!g||!y)throw new qd("No session defined in URL");const S=Math.round(Date.now()/1e3),E=parseInt(x);let T=S+E;v&&(T=parseInt(v));const I=T-S;I*1e3<=ol&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${E}s`);const O=T-E;S-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,T,S):S-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,T,S);const{data:k,error:P}=await this._getUser(u);if(P)throw P;const L={provider_token:o,provider_refresh_token:d,access_token:u,expires_in:E,expires_at:T,refresh_token:g,token_type:y,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:e.type},error:null})}catch(o){if(St(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ao(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:d,error:u}=n;if(u)return this._returnResult({error:u});const g=(o=d.session)===null||o===void 0?void 0:o.access_token;if(g){const{error:x}=await this.admin.signOut(g,e);if(x&&!(SN(x)&&(x.status===404||x.status===401||x.status===403)))return this._returnResult({error:x})}return e!=="others"&&(await this._removeSession(),await ya(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=ON(),o={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async n=>{var o,d;try{const{data:{session:u},error:g}=n;if(g)throw g;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((d=this.stateChangeEmitters.get(e))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,n={}){let o=null,d=null;this.flowType==="pkce"&&([o,d]=await Qo(this.storage,this.storageKey,!0));try{return await Dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:d,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(St(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var e;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(St(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:o,error:d}=await this._useSession(async u=>{var g,x,v,y,S;const{data:E,error:T}=u;if(T)throw T;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(g=e.options)===null||g===void 0?void 0:g.redirectTo,scopes:(x=e.options)===null||x===void 0?void 0:x.scopes,queryParams:(v=e.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await Dt(this.fetch,"GET",I,{headers:this.headers,jwt:(S=(y=E.session)===null||y===void 0?void 0:y.access_token)!==null&&S!==void 0?S:void 0})});if(d)throw d;return $r()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:e.provider,url:o?.url},error:null})}catch(o){if(St(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var o;try{const{error:d,data:{session:u}}=n;if(d)throw d;const{options:g,provider:x,token:v,access_token:y,nonce:S}=e,E=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:x,id_token:v,access_token:y,nonce:S,link_identity:!0,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Ys}),{data:T,error:I}=E;return I?this._returnResult({data:{user:null,session:null},error:I}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new Zo}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:I}))}catch(d){if(St(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var o,d;const{data:u,error:g}=n;if(g)throw g;return await Dt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(d=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0})})}catch(n){if(St(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await LN(async d=>(d>0&&await MN(200*Math.pow(2,d-1)),this._debug(n,"refreshing attempt",d),await Dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ys})),(d,u)=>{const g=200*Math.pow(2,d);return u&&Rf(u)&&Date.now()+g-o<ol})}catch(o){if(this._debug(n,"error",o),St(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",o),$r()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const d=await ao(this.storage,this.storageKey);if(d&&this.userStorage){let g=await ao(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!g&&(g={user:d.user},await ll(this.userStorage,this.storageKey+"-user",g)),d.user=(e=g?.user)!==null&&e!==void 0?e:Of()}else if(d&&!d.user&&!d.user){const g=await ao(this.storage,this.storageKey+"-user");g&&g?.user?(d.user=g.user,await ya(this.storage,this.storageKey+"-user"),await ll(this.storage,this.storageKey,d)):d.user=Of()}if(this._debug(o,"session from storage",d),!this._isValidSession(d)){this._debug(o,"session is not valid"),d!==null&&await this._removeSession();return}const u=((n=d.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Tf;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${Tf}s`),u){if(this.autoRefreshToken&&d.refresh_token){const{error:g}=await this._callRefreshToken(d.refresh_token);g&&(console.error(g),Rf(g)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",g),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:g,error:x}=await this._getUser(d.access_token);!x&&g?.user?(d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(g){console.error("Error getting user data:",g),this._debug(o,"error getting user data, skipping SIGNED_IN notification",g)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(o,"error",d),console.error(d);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var n,o;if(!e)throw new Xs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Tu;const{data:u,error:g}=await this._refreshAccessToken(e);if(g)throw g;if(!u.session)throw new Xs;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const x={data:u.session,error:null};return this.refreshingDeferred.resolve(x),x}catch(u){if(this._debug(d,"error",u),St(u)){const g={data:null,error:u};return Rf(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(g),g}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(e,n,o=!0){const d=`#_notifyAllSubscribers(${e})`;this._debug(d,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:n});const u=[],g=Array.from(this.stateChangeEmitters.values()).map(async x=>{try{await x.callback(e,n)}catch(v){u.push(v)}});if(await Promise.all(g),u.length>0){for(let x=0;x<u.length;x+=1)console.error(u[x]);throw u[0]}}finally{this._debug(d,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await ll(this.userStorage,this.storageKey+"-user",{user:n.user});const d=Object.assign({},n);delete d.user;const u=T1(d);await ll(this.storage,this.storageKey,u)}else{const d=T1(n);await ll(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await ya(this.storage,this.storageKey),await ya(this.storage,this.storageKey+"-code-verifier"),await ya(this.storage,this.storageKey+"-user"),this.userStorage&&await ya(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$r()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ol);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((o.expires_at*1e3-e)/ol);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${ol}ms, refresh threshold is ${k0} ticks`),d<=k0&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof xy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$r()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,o){const d=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&d.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,g]=await Qo(this.storage,this.storageKey),x=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(g)}`});d.push(x.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);d.push(u.toString())}return o?.skipBrowserRedirect&&d.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${d.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var o;const{data:d,error:u}=n;return u?this._returnResult({data:null,error:u}):await Dt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(St(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var o,d;const{data:u,error:g}=n;if(g)return this._returnResult({data:null,error:g});const x=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:v,error:y}=await Dt(this.fetch,"POST",`${this.url}/factors`,{body:x,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(e.factorType==="totp"&&v.type==="totp"&&(!((d=v?.totp)===null||d===void 0)&&d.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(n){if(St(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:d,error:u}=n;if(u)return this._returnResult({data:null,error:u});const g=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?f3(e.webauthn.credential_response):m3(e.webauthn.credential_response)})}:{code:e.code}),{data:x,error:v}=await Dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:g,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+x.expires_in},x)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",x),this._returnResult({data:x,error:v}))})}catch(n){if(St(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:d,error:u}=n;if(u)return this._returnResult({data:null,error:u});const g=await Dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});if(g.error)return g;const{data:x}=g;if(x.type!=="webauthn")return{data:x,error:null};switch(x.webauthn.type){case"create":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:u3(x.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},x),{webauthn:Object.assign(Object.assign({},x.webauthn),{credential_options:Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:h3(x.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(St(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const d={all:[],phone:[],totp:[],webauthn:[]};for(const u of(e=n?.factors)!==null&&e!==void 0?e:[])d.all.push(u),u.status==="verified"&&d[u.factor_type].push(u);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:o},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=kf(o.access_token);let g=null;u.aal&&(g=u.aal);let x=g;((n=(e=o.user.factors)===null||e===void 0?void 0:e.filter(S=>S.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(x="aal2");const y=u.amr||[];return{data:{currentLevel:g,nextLevel:x,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:o},error:d}=n;return d?this._returnResult({data:null,error:d}):o?await Dt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Xs})})}catch(n){if(St(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:d},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!d)return this._returnResult({data:null,error:new Xs});const g=await Dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:x=>({data:x,error:null})});return g.data&&g.data.redirect_url&&$r()&&!n?.skipBrowserRedirect&&window.location.assign(g.data.redirect_url),g})}catch(o){if(St(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,n){try{return await this._useSession(async o=>{const{data:{session:d},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!d)return this._returnResult({data:null,error:new Xs});const g=await Dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:x=>({data:x,error:null})});return g.data&&g.data.redirect_url&&$r()&&!n?.skipBrowserRedirect&&window.location.assign(g.data.redirect_url),g})}catch(o){if(St(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(e,n={keys:[]}){let o=n.keys.find(x=>x.kid===e);if(o)return o;const d=Date.now();if(o=this.jwks.keys.find(x=>x.kid===e),o&&this.jwks_cached_at+CN>d)return o;const{data:u,error:g}=await Dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=d,o=u.keys.find(x=>x.kid===e),!o)?null:o}async getClaims(e,n={}){try{let o=e;if(!o){const{data:I,error:O}=await this.getSession();if(O||!I.session)return this._returnResult({data:null,error:O});o=I.session.access_token}const{header:d,payload:u,signature:g,raw:{header:x,payload:v}}=kf(o);n?.allowExpired||WN(u.exp);const y=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!y){const{error:I}=await this.getUser(o);if(I)throw I;return{data:{claims:u,header:d,signature:g},error:null}}const S=HN(d.alg),E=await crypto.subtle.importKey("jwk",y,S,!0,["verify"]);if(!await crypto.subtle.verify(S,E,g,RN(`${x}.${v}`)))throw new D0("Invalid JWT signature");return{data:{claims:u,header:d,signature:g},error:null}}catch(o){if(St(o))return this._returnResult({data:null,error:o});throw o}}}Cc.nextInstanceID=0;const E3=Cc;class S3 extends E3{constructor(e){super(e)}}class _3{constructor(e,n,o){var d,u,g;this.supabaseUrl=e,this.supabaseKey=n;const x=xN(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",x),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",x),this.storageUrl=new URL("storage/v1",x),this.functionsUrl=new URL("functions/v1",x);const v=`sb-${x.hostname.split(".")[0]}-auth-token`,y={db:cN,realtime:uN,auth:Object.assign(Object.assign({},dN),{storageKey:v}),global:lN},S=gN(o??{},y);this.storageKey=(d=S.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(u=S.global.headers)!==null&&u!==void 0?u:{},S.accessToken?(this.accessToken=S.accessToken,this.auth=new Proxy({},{get:(E,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((g=S.auth)!==null&&g!==void 0?g:{},this.headers,S.global.fetch),this.fetch=mN(n,this._getAccessToken.bind(this),S.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},S.realtime)),this.rest=new w_(new URL("rest/v1",x).href,{headers:this.headers,schema:S.db.schema,fetch:this.fetch}),this.storage=new iN(this.storageUrl.href,this.headers,this.fetch,o?.storage),S.accessToken||this._listenForAuthEvents()}get functions(){return new m_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,o)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(n=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:o,storage:d,userStorage:u,storageKey:g,flowType:x,lock:v,debug:y,throwOnError:S},E,T){const I={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new S3({url:this.authUrl.href,headers:Object.assign(Object.assign({},I),E),storageKey:g,autoRefreshToken:e,persistSession:n,detectSessionInUrl:o,storage:d,userStorage:u,flowType:x,lock:v,debug:y,throwOnError:S,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new D_(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,o)=>{this._handleTokenChanged(n,"CLIENT",o?.access_token)})}_handleTokenChanged(e,n,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const N3=(r,e,n)=>new _3(r,e,n);function A3(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}A3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const j3="https://xtrognfmzyzqhsfvtgne.supabase.co",I3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh0cm9nbmZtenl6cWhzZnZ0Z25lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExMjE1NDcsImV4cCI6MjA3NjY5NzU0N30.eHPZYU7pHDzseAF4UDtjHCqJO6_MYMZy8UpqL-YViCU",Le=N3(j3,I3);function T3({onAuthenticated:r,onBackToHome:e}){const[n,o]=A.useState(!1),[d,u]=A.useState(""),[g,x]=A.useState({email:"",password:""}),v=async y=>{y.preventDefault(),o(!0),u("");try{const{data:S,error:E}=await Le.auth.signInWithPassword({email:g.email,password:g.password});if(E||!S.session)throw new Error(E?.message||"Login failed");r(S.session.access_token)}catch(S){console.error("Login error:",S),u(S.message||"Invalid email or password. Please try again.")}finally{o(!1)}};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50"}),s.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-violet-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-pink-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),s.jsxs("div",{className:"w-full max-w-md relative z-10 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[e&&s.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50 rounded-lg px-3 py-2 bg-white/60 backdrop-blur-sm","aria-label":"Go back to home page",children:[s.jsx(nm,{className:"h-4 w-4"}),"Back to Home"]}),s.jsxs(Wn,{className:"shadow-xl border-0 glass-effect",children:[s.jsxs(Vr,{className:"space-y-6 pb-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 gradient-primary rounded-3xl flex items-center justify-center shadow-lg shadow-purple-500/30",children:s.jsx(l1,{className:"h-10 w-10 text-white"})}),s.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-gradient-to-br from-emerald-400 to-emerald-500 rounded-full border-4 border-white flex items-center justify-center shadow-md",children:s.jsx(b0,{className:"h-4 w-4 text-white"})})]})}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx(Wr,{className:"text-3xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Admin Portal"}),s.jsx(Wi,{className:"text-base text-gray-600",children:"Sign in to manage events and registrations"})]})]}),s.jsx(Zn,{children:s.jsxs("form",{onSubmit:v,className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Pe,{htmlFor:"email",className:"flex items-center gap-2",children:[s.jsx(bs,{className:"h-4 w-4 text-muted-foreground"}),"Email Address"]}),s.jsx(Ke,{id:"email",type:"email",placeholder:"admin@example.com",value:g.email,onChange:y=>x(S=>({...S,email:y.target.value})),required:!0,className:"h-11",autoComplete:"email",autoFocus:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Pe,{htmlFor:"password",className:"flex items-center gap-2",children:[s.jsx(b0,{className:"h-4 w-4 text-muted-foreground"}),"Password"]}),s.jsx(Ke,{id:"password",type:"password",placeholder:"Enter your password",value:g.password,onChange:y=>x(S=>({...S,password:y.target.value})),required:!0,className:"h-11",autoComplete:"current-password"})]}),d&&s.jsx(ei,{variant:"destructive",children:s.jsx(ti,{children:d})}),s.jsx(Ae,{type:"submit",className:"w-full h-12 text-base gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/40",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing in..."]}):s.jsxs(s.Fragment,{children:[s.jsx(l1,{className:"mr-2 h-5 w-5"}),"Sign In"]})})]})}),s.jsxs(yE,{className:"flex flex-col space-y-4 border-t pt-6",children:[s.jsx("div",{className:"w-full p-4 gradient-primary-soft border border-purple-200 rounded-xl",children:s.jsxs("p",{className:"text-sm text-purple-900 text-center",children:[s.jsx("span",{className:"font-semibold",children:"First time?"})," Contact your system administrator to set up your account."]})}),s.jsx("p",{className:"text-xs text-center text-gray-500",children:" This is a secure admin-only area. Unauthorized access is prohibited."})]})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-600 bg-white/60 backdrop-blur-sm px-4 py-2 rounded-full inline-block",children:"Event Registration Management System"})})]})]})}function Ht(r,e,{checkForDefaultPrevented:n=!0}={}){return function(d){if(r?.(d),n===!1||!d.defaultPrevented)return e?.(d)}}function R3(r,e){const n=A.createContext(e),o=u=>{const{children:g,...x}=u,v=A.useMemo(()=>x,Object.values(x));return s.jsx(n.Provider,{value:v,children:g})};o.displayName=r+"Provider";function d(u){const g=A.useContext(n);if(g)return g;if(e!==void 0)return e;throw new Error(`\`${u}\` must be used within \`${r}\``)}return[o,d]}function _s(r,e=[]){let n=[];function o(u,g){const x=A.createContext(g),v=n.length;n=[...n,g];const y=E=>{const{scope:T,children:I,...O}=E,k=T?.[r]?.[v]||x,P=A.useMemo(()=>O,Object.values(O));return s.jsx(k.Provider,{value:P,children:I})};y.displayName=u+"Provider";function S(E,T){const I=T?.[r]?.[v]||x,O=A.useContext(I);if(O)return O;if(g!==void 0)return g;throw new Error(`\`${E}\` must be used within \`${u}\``)}return[y,S]}const d=()=>{const u=n.map(g=>A.createContext(g));return function(x){const v=x?.[r]||u;return A.useMemo(()=>({[`__scope${r}`]:{...x,[r]:v}}),[x,v])}};return d.scopeName=r,[o,k3(d,...e)]}function k3(...r){const e=r[0];if(r.length===1)return e;const n=()=>{const o=r.map(d=>({useScope:d(),scopeName:d.scopeName}));return function(u){const g=o.reduce((x,{useScope:v,scopeName:y})=>{const E=v(u)[`__scope${y}`];return{...x,...E}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:g}),[g])}};return n.scopeName=e.scopeName,n}function L1(r){const e=O3(r),n=A.forwardRef((o,d)=>{const{children:u,...g}=o,x=A.Children.toArray(u),v=x.find(D3);if(v){const y=v.props.children,S=x.map(E=>E===v?A.Children.count(y)>1?A.Children.only(null):A.isValidElement(y)?y.props.children:null:E);return s.jsx(e,{...g,ref:d,children:A.isValidElement(y)?A.cloneElement(y,void 0,S):null})}return s.jsx(e,{...g,ref:d,children:u})});return n.displayName=`${r}.Slot`,n}function O3(r){const e=A.forwardRef((n,o)=>{const{children:d,...u}=n;if(A.isValidElement(d)){const g=L3(d),x=M3(u,d.props);return d.type!==A.Fragment&&(x.ref=o?Cl(o,g):g),A.cloneElement(d,x)}return A.Children.count(d)>1?A.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var P3=Symbol("radix.slottable");function D3(r){return A.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===P3}function M3(r,e){const n={...e};for(const o in e){const d=r[o],u=e[o];/^on[A-Z]/.test(o)?d&&u?n[o]=(...x)=>{const v=u(...x);return d(...x),v}:d&&(n[o]=d):o==="style"?n[o]={...d,...u}:o==="className"&&(n[o]=[d,u].filter(Boolean).join(" "))}return{...r,...n}}function L3(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function xm(r){const e=r+"CollectionProvider",[n,o]=_s(e),[d,u]=n(e,{collectionRef:{current:null},itemMap:new Map}),g=k=>{const{scope:P,children:L}=k,U=$e.useRef(null),B=$e.useRef(new Map).current;return s.jsx(d,{scope:P,itemMap:B,collectionRef:U,children:L})};g.displayName=e;const x=r+"CollectionSlot",v=L1(x),y=$e.forwardRef((k,P)=>{const{scope:L,children:U}=k,B=u(x,L),G=ln(P,B.collectionRef);return s.jsx(v,{ref:G,children:U})});y.displayName=x;const S=r+"CollectionItemSlot",E="data-radix-collection-item",T=L1(S),I=$e.forwardRef((k,P)=>{const{scope:L,children:U,...B}=k,G=$e.useRef(null),ee=ln(P,G),se=u(S,L);return $e.useEffect(()=>(se.itemMap.set(G,{ref:G,...B}),()=>void se.itemMap.delete(G))),s.jsx(T,{[E]:"",ref:ee,children:U})});I.displayName=S;function O(k){const P=u(r+"CollectionConsumer",k);return $e.useCallback(()=>{const U=P.collectionRef.current;if(!U)return[];const B=Array.from(U.querySelectorAll(`[${E}]`));return Array.from(P.itemMap.values()).sort((se,V)=>B.indexOf(se.ref.current)-B.indexOf(V.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:g,Slot:y,ItemSlot:I},O,o]}var Rr=globalThis?.document?A.useLayoutEffect:()=>{},B3=Q0[" useId ".trim().toString()]||(()=>{}),F3=0;function vi(r){const[e,n]=A.useState(B3());return Rr(()=>{n(o=>o??String(F3++))},[r]),r||(e?`radix-${e}`:"")}function U3(r){const e=z3(r),n=A.forwardRef((o,d)=>{const{children:u,...g}=o,x=A.Children.toArray(u),v=x.find(V3);if(v){const y=v.props.children,S=x.map(E=>E===v?A.Children.count(y)>1?A.Children.only(null):A.isValidElement(y)?y.props.children:null:E);return s.jsx(e,{...g,ref:d,children:A.isValidElement(y)?A.cloneElement(y,void 0,S):null})}return s.jsx(e,{...g,ref:d,children:u})});return n.displayName=`${r}.Slot`,n}function z3(r){const e=A.forwardRef((n,o)=>{const{children:d,...u}=n;if(A.isValidElement(d)){const g=H3(d),x=W3(u,d.props);return d.type!==A.Fragment&&(x.ref=o?Cl(o,g):g),A.cloneElement(d,x)}return A.Children.count(d)>1?A.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var $3=Symbol("radix.slottable");function V3(r){return A.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===$3}function W3(r,e){const n={...e};for(const o in e){const d=r[o],u=e[o];/^on[A-Z]/.test(o)?d&&u?n[o]=(...x)=>{const v=u(...x);return d(...x),v}:d&&(n[o]=d):o==="style"?n[o]={...d,...u}:o==="className"&&(n[o]=[d,u].filter(Boolean).join(" "))}return{...r,...n}}function H3(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var G3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zt=G3.reduce((r,e)=>{const n=U3(`Primitive.${e}`),o=A.forwardRef((d,u)=>{const{asChild:g,...x}=d,v=g?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(v,{...x,ref:u})});return o.displayName=`Primitive.${e}`,{...r,[e]:o}},{});function q3(r,e){r&&_l.flushSync(()=>r.dispatchEvent(e))}function Na(r){const e=A.useRef(r);return A.useEffect(()=>{e.current=r}),A.useMemo(()=>(...n)=>e.current?.(...n),[])}var X3=Q0[" useInsertionEffect ".trim().toString()]||Rr;function ni({prop:r,defaultProp:e,onChange:n=()=>{},caller:o}){const[d,u,g]=Y3({defaultProp:e,onChange:n}),x=r!==void 0,v=x?r:d;{const S=A.useRef(r!==void 0);A.useEffect(()=>{const E=S.current;E!==x&&console.warn(`${o} is changing from ${E?"controlled":"uncontrolled"} to ${x?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),S.current=x},[x,o])}const y=A.useCallback(S=>{if(x){const E=K3(S)?S(r):S;E!==r&&g.current?.(E)}else u(S)},[x,r,u,g]);return[v,y]}function Y3({defaultProp:r,onChange:e}){const[n,o]=A.useState(r),d=A.useRef(n),u=A.useRef(e);return X3(()=>{u.current=e},[e]),A.useEffect(()=>{d.current!==n&&(u.current?.(n),d.current=n)},[n,d]),[n,o,u]}function K3(r){return typeof r=="function"}var Z3=A.createContext(void 0);function Tc(r){const e=A.useContext(Z3);return r||e||"ltr"}var Df="rovingFocusGroup.onEntryFocus",Q3={bubbles:!1,cancelable:!0},Rc="RovingFocusGroup",[M0,vy,J3]=xm(Rc),[eA,Ru]=_s(Rc,[J3]),[tA,nA]=eA(Rc),by=A.forwardRef((r,e)=>s.jsx(M0.Provider,{scope:r.__scopeRovingFocusGroup,children:s.jsx(M0.Slot,{scope:r.__scopeRovingFocusGroup,children:s.jsx(rA,{...r,ref:e})})}));by.displayName=Rc;var rA=A.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:d=!1,dir:u,currentTabStopId:g,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:v,onEntryFocus:y,preventScrollOnEntryFocus:S=!1,...E}=r,T=A.useRef(null),I=ln(e,T),O=Tc(u),[k,P]=ni({prop:g,defaultProp:x??null,onChange:v,caller:Rc}),[L,U]=A.useState(!1),B=Na(y),G=vy(n),ee=A.useRef(!1),[se,V]=A.useState(0);return A.useEffect(()=>{const te=T.current;if(te)return te.addEventListener(Df,B),()=>te.removeEventListener(Df,B)},[B]),s.jsx(tA,{scope:n,orientation:o,dir:O,loop:d,currentTabStopId:k,onItemFocus:A.useCallback(te=>P(te),[P]),onItemShiftTab:A.useCallback(()=>U(!0),[]),onFocusableItemAdd:A.useCallback(()=>V(te=>te+1),[]),onFocusableItemRemove:A.useCallback(()=>V(te=>te-1),[]),children:s.jsx(zt.div,{tabIndex:L||se===0?-1:0,"data-orientation":o,...E,ref:I,style:{outline:"none",...r.style},onMouseDown:Ht(r.onMouseDown,()=>{ee.current=!0}),onFocus:Ht(r.onFocus,te=>{const ne=!ee.current;if(te.target===te.currentTarget&&ne&&!L){const ce=new CustomEvent(Df,Q3);if(te.currentTarget.dispatchEvent(ce),!ce.defaultPrevented){const oe=G().filter(q=>q.focusable),H=oe.find(q=>q.active),W=oe.find(q=>q.id===k),X=[H,W,...oe].filter(Boolean).map(q=>q.ref.current);Sy(X,S)}}ee.current=!1}),onBlur:Ht(r.onBlur,()=>U(!1))})})}),Cy="RovingFocusGroupItem",Ey=A.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:d=!1,tabStopId:u,children:g,...x}=r,v=vi(),y=u||v,S=nA(Cy,n),E=S.currentTabStopId===y,T=vy(n),{onFocusableItemAdd:I,onFocusableItemRemove:O,currentTabStopId:k}=S;return A.useEffect(()=>{if(o)return I(),()=>O()},[o,I,O]),s.jsx(M0.ItemSlot,{scope:n,id:y,focusable:o,active:d,children:s.jsx(zt.span,{tabIndex:E?0:-1,"data-orientation":S.orientation,...x,ref:e,onMouseDown:Ht(r.onMouseDown,P=>{o?S.onItemFocus(y):P.preventDefault()}),onFocus:Ht(r.onFocus,()=>S.onItemFocus(y)),onKeyDown:Ht(r.onKeyDown,P=>{if(P.key==="Tab"&&P.shiftKey){S.onItemShiftTab();return}if(P.target!==P.currentTarget)return;const L=aA(P,S.orientation,S.dir);if(L!==void 0){if(P.metaKey||P.ctrlKey||P.altKey||P.shiftKey)return;P.preventDefault();let B=T().filter(G=>G.focusable).map(G=>G.ref.current);if(L==="last")B.reverse();else if(L==="prev"||L==="next"){L==="prev"&&B.reverse();const G=B.indexOf(P.currentTarget);B=S.loop?oA(B,G+1):B.slice(G+1)}setTimeout(()=>Sy(B))}}),children:typeof g=="function"?g({isCurrentTabStop:E,hasTabStop:k!=null}):g})})});Ey.displayName=Cy;var sA={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iA(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function aA(r,e,n){const o=iA(r.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return sA[o]}function Sy(r,e=!1){const n=document.activeElement;for(const o of r)if(o===n||(o.focus({preventScroll:e}),document.activeElement!==n))return}function oA(r,e){return r.map((n,o)=>r[(e+o)%r.length])}var _y=by,Ny=Ey;function lA(r,e){return A.useReducer((n,o)=>e[n][o]??n,r)}var Oa=r=>{const{present:e,children:n}=r,o=cA(e),d=typeof n=="function"?n({present:o.isPresent}):A.Children.only(n),u=ln(o.ref,dA(d));return typeof n=="function"||o.isPresent?A.cloneElement(d,{ref:u}):null};Oa.displayName="Presence";function cA(r){const[e,n]=A.useState(),o=A.useRef(null),d=A.useRef(r),u=A.useRef("none"),g=r?"mounted":"unmounted",[x,v]=lA(g,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const y=Xd(o.current);u.current=x==="mounted"?y:"none"},[x]),Rr(()=>{const y=o.current,S=d.current;if(S!==r){const T=u.current,I=Xd(y);r?v("MOUNT"):I==="none"||y?.display==="none"?v("UNMOUNT"):v(S&&T!==I?"ANIMATION_OUT":"UNMOUNT"),d.current=r}},[r,v]),Rr(()=>{if(e){let y;const S=e.ownerDocument.defaultView??window,E=I=>{const k=Xd(o.current).includes(CSS.escape(I.animationName));if(I.target===e&&k&&(v("ANIMATION_END"),!d.current)){const P=e.style.animationFillMode;e.style.animationFillMode="forwards",y=S.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=P)})}},T=I=>{I.target===e&&(u.current=Xd(o.current))};return e.addEventListener("animationstart",T),e.addEventListener("animationcancel",E),e.addEventListener("animationend",E),()=>{S.clearTimeout(y),e.removeEventListener("animationstart",T),e.removeEventListener("animationcancel",E),e.removeEventListener("animationend",E)}}else v("ANIMATION_END")},[e,v]),{isPresent:["mounted","unmountSuspended"].includes(x),ref:A.useCallback(y=>{o.current=y?getComputedStyle(y):null,n(y)},[])}}function Xd(r){return r?.animationName||"none"}function dA(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var ku="Tabs",[uA]=_s(ku,[Ru]),Ay=Ru(),[hA,wm]=uA(ku),jy=A.forwardRef((r,e)=>{const{__scopeTabs:n,value:o,onValueChange:d,defaultValue:u,orientation:g="horizontal",dir:x,activationMode:v="automatic",...y}=r,S=Tc(x),[E,T]=ni({prop:o,onChange:d,defaultProp:u??"",caller:ku});return s.jsx(hA,{scope:n,baseId:vi(),value:E,onValueChange:T,orientation:g,dir:S,activationMode:v,children:s.jsx(zt.div,{dir:S,"data-orientation":g,...y,ref:e})})});jy.displayName=ku;var Iy="TabsList",Ty=A.forwardRef((r,e)=>{const{__scopeTabs:n,loop:o=!0,...d}=r,u=wm(Iy,n),g=Ay(n);return s.jsx(_y,{asChild:!0,...g,orientation:u.orientation,dir:u.dir,loop:o,children:s.jsx(zt.div,{role:"tablist","aria-orientation":u.orientation,...d,ref:e})})});Ty.displayName=Iy;var Ry="TabsTrigger",ky=A.forwardRef((r,e)=>{const{__scopeTabs:n,value:o,disabled:d=!1,...u}=r,g=wm(Ry,n),x=Ay(n),v=Dy(g.baseId,o),y=My(g.baseId,o),S=o===g.value;return s.jsx(Ny,{asChild:!0,...x,focusable:!d,active:S,children:s.jsx(zt.button,{type:"button",role:"tab","aria-selected":S,"aria-controls":y,"data-state":S?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:v,...u,ref:e,onMouseDown:Ht(r.onMouseDown,E=>{!d&&E.button===0&&E.ctrlKey===!1?g.onValueChange(o):E.preventDefault()}),onKeyDown:Ht(r.onKeyDown,E=>{[" ","Enter"].includes(E.key)&&g.onValueChange(o)}),onFocus:Ht(r.onFocus,()=>{const E=g.activationMode!=="manual";!S&&!d&&E&&g.onValueChange(o)})})})});ky.displayName=Ry;var Oy="TabsContent",Py=A.forwardRef((r,e)=>{const{__scopeTabs:n,value:o,forceMount:d,children:u,...g}=r,x=wm(Oy,n),v=Dy(x.baseId,o),y=My(x.baseId,o),S=o===x.value,E=A.useRef(S);return A.useEffect(()=>{const T=requestAnimationFrame(()=>E.current=!1);return()=>cancelAnimationFrame(T)},[]),s.jsx(Oa,{present:d||S,children:({present:T})=>s.jsx(zt.div,{"data-state":S?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":v,hidden:!T,id:y,tabIndex:0,...g,ref:e,style:{...r.style,animationDuration:E.current?"0s":void 0},children:T&&u})})});Py.displayName=Oy;function Dy(r,e){return`${r}-trigger-${e}`}function My(r,e){return`${r}-content-${e}`}var fA=jy,mA=Ty,pA=ky,gA=Py;function Ec({className:r,...e}){return s.jsx(fA,{"data-slot":"tabs",className:Tt("flex flex-col gap-2",r),...e})}function Sc({className:r,...e}){return s.jsx(mA,{"data-slot":"tabs-list",className:Tt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",r),...e})}function Ir({className:r,...e}){return s.jsx(pA,{"data-slot":"tabs-trigger",className:Tt("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...e})}function ys({className:r,...e}){return s.jsx(gA,{"data-slot":"tabs-content",className:Tt("flex-1 outline-none",r),...e})}function go({className:r,...e}){return s.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:s.jsx("table",{"data-slot":"table",className:Tt("w-full caption-bottom text-sm",r),...e})})}function xo({className:r,...e}){return s.jsx("thead",{"data-slot":"table-header",className:Tt("[&_tr]:border-b",r),...e})}function Aa({className:r,...e}){return s.jsx("tbody",{"data-slot":"table-body",className:Tt("[&_tr:last-child]:border-0",r),...e})}function Qn({className:r,...e}){return s.jsx("tr",{"data-slot":"table-row",className:Tt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...e})}function _t({className:r,...e}){return s.jsx("th",{"data-slot":"table-head",className:Tt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...e})}function yt({className:r,...e}){return s.jsx("td",{"data-slot":"table-cell",className:Tt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...e})}function xA(r,e=globalThis?.document){const n=Na(r);A.useEffect(()=>{const o=d=>{d.key==="Escape"&&n(d)};return e.addEventListener("keydown",o,{capture:!0}),()=>e.removeEventListener("keydown",o,{capture:!0})},[n,e])}var wA="DismissableLayer",L0="dismissableLayer.update",yA="dismissableLayer.pointerDownOutside",vA="dismissableLayer.focusOutside",B1,Ly=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ym=A.forwardRef((r,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:g,onDismiss:x,...v}=r,y=A.useContext(Ly),[S,E]=A.useState(null),T=S?.ownerDocument??globalThis?.document,[,I]=A.useState({}),O=ln(e,V=>E(V)),k=Array.from(y.layers),[P]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),L=k.indexOf(P),U=S?k.indexOf(S):-1,B=y.layersWithOutsidePointerEventsDisabled.size>0,G=U>=L,ee=EA(V=>{const te=V.target,ne=[...y.branches].some(ce=>ce.contains(te));!G||ne||(d?.(V),g?.(V),V.defaultPrevented||x?.())},T),se=SA(V=>{const te=V.target;[...y.branches].some(ce=>ce.contains(te))||(u?.(V),g?.(V),V.defaultPrevented||x?.())},T);return xA(V=>{U===y.layers.size-1&&(o?.(V),!V.defaultPrevented&&x&&(V.preventDefault(),x()))},T),A.useEffect(()=>{if(S)return n&&(y.layersWithOutsidePointerEventsDisabled.size===0&&(B1=T.body.style.pointerEvents,T.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(S)),y.layers.add(S),F1(),()=>{n&&y.layersWithOutsidePointerEventsDisabled.size===1&&(T.body.style.pointerEvents=B1)}},[S,T,n,y]),A.useEffect(()=>()=>{S&&(y.layers.delete(S),y.layersWithOutsidePointerEventsDisabled.delete(S),F1())},[S,y]),A.useEffect(()=>{const V=()=>I({});return document.addEventListener(L0,V),()=>document.removeEventListener(L0,V)},[]),s.jsx(zt.div,{...v,ref:O,style:{pointerEvents:B?G?"auto":"none":void 0,...r.style},onFocusCapture:Ht(r.onFocusCapture,se.onFocusCapture),onBlurCapture:Ht(r.onBlurCapture,se.onBlurCapture),onPointerDownCapture:Ht(r.onPointerDownCapture,ee.onPointerDownCapture)})});ym.displayName=wA;var bA="DismissableLayerBranch",CA=A.forwardRef((r,e)=>{const n=A.useContext(Ly),o=A.useRef(null),d=ln(e,o);return A.useEffect(()=>{const u=o.current;if(u)return n.branches.add(u),()=>{n.branches.delete(u)}},[n.branches]),s.jsx(zt.div,{...r,ref:d})});CA.displayName=bA;function EA(r,e=globalThis?.document){const n=Na(r),o=A.useRef(!1),d=A.useRef(()=>{});return A.useEffect(()=>{const u=x=>{if(x.target&&!o.current){let v=function(){By(yA,n,y,{discrete:!0})};const y={originalEvent:x};x.pointerType==="touch"?(e.removeEventListener("click",d.current),d.current=v,e.addEventListener("click",d.current,{once:!0})):v()}else e.removeEventListener("click",d.current);o.current=!1},g=window.setTimeout(()=>{e.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(g),e.removeEventListener("pointerdown",u),e.removeEventListener("click",d.current)}},[e,n]),{onPointerDownCapture:()=>o.current=!0}}function SA(r,e=globalThis?.document){const n=Na(r),o=A.useRef(!1);return A.useEffect(()=>{const d=u=>{u.target&&!o.current&&By(vA,n,{originalEvent:u},{discrete:!1})};return e.addEventListener("focusin",d),()=>e.removeEventListener("focusin",d)},[e,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function F1(){const r=new CustomEvent(L0);document.dispatchEvent(r)}function By(r,e,n,{discrete:o}){const d=n.originalEvent.target,u=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:n});e&&d.addEventListener(r,e,{once:!0}),o?q3(d,u):d.dispatchEvent(u)}var Mf="focusScope.autoFocusOnMount",Lf="focusScope.autoFocusOnUnmount",U1={bubbles:!1,cancelable:!0},_A="FocusScope",vm=A.forwardRef((r,e)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:d,onUnmountAutoFocus:u,...g}=r,[x,v]=A.useState(null),y=Na(d),S=Na(u),E=A.useRef(null),T=ln(e,k=>v(k)),I=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(o){let k=function(B){if(I.paused||!x)return;const G=B.target;x.contains(G)?E.current=G:ba(E.current,{select:!0})},P=function(B){if(I.paused||!x)return;const G=B.relatedTarget;G!==null&&(x.contains(G)||ba(E.current,{select:!0}))},L=function(B){if(document.activeElement===document.body)for(const ee of B)ee.removedNodes.length>0&&ba(x)};document.addEventListener("focusin",k),document.addEventListener("focusout",P);const U=new MutationObserver(L);return x&&U.observe(x,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",P),U.disconnect()}}},[o,x,I.paused]),A.useEffect(()=>{if(x){$1.add(I);const k=document.activeElement;if(!x.contains(k)){const L=new CustomEvent(Mf,U1);x.addEventListener(Mf,y),x.dispatchEvent(L),L.defaultPrevented||(NA(RA(Fy(x)),{select:!0}),document.activeElement===k&&ba(x))}return()=>{x.removeEventListener(Mf,y),setTimeout(()=>{const L=new CustomEvent(Lf,U1);x.addEventListener(Lf,S),x.dispatchEvent(L),L.defaultPrevented||ba(k??document.body,{select:!0}),x.removeEventListener(Lf,S),$1.remove(I)},0)}}},[x,y,S,I]);const O=A.useCallback(k=>{if(!n&&!o||I.paused)return;const P=k.key==="Tab"&&!k.altKey&&!k.ctrlKey&&!k.metaKey,L=document.activeElement;if(P&&L){const U=k.currentTarget,[B,G]=AA(U);B&&G?!k.shiftKey&&L===G?(k.preventDefault(),n&&ba(B,{select:!0})):k.shiftKey&&L===B&&(k.preventDefault(),n&&ba(G,{select:!0})):L===U&&k.preventDefault()}},[n,o,I.paused]);return s.jsx(zt.div,{tabIndex:-1,...g,ref:T,onKeyDown:O})});vm.displayName=_A;function NA(r,{select:e=!1}={}){const n=document.activeElement;for(const o of r)if(ba(o,{select:e}),document.activeElement!==n)return}function AA(r){const e=Fy(r),n=z1(e,r),o=z1(e.reverse(),r);return[n,o]}function Fy(r){const e=[],n=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const d=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||d?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function z1(r,e){for(const n of r)if(!jA(n,{upTo:e}))return n}function jA(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function IA(r){return r instanceof HTMLInputElement&&"select"in r}function ba(r,{select:e=!1}={}){if(r&&r.focus){const n=document.activeElement;r.focus({preventScroll:!0}),r!==n&&IA(r)&&e&&r.select()}}var $1=TA();function TA(){let r=[];return{add(e){const n=r[0];e!==n&&n?.pause(),r=V1(r,e),r.unshift(e)},remove(e){r=V1(r,e),r[0]?.resume()}}}function V1(r,e){const n=[...r],o=n.indexOf(e);return o!==-1&&n.splice(o,1),n}function RA(r){return r.filter(e=>e.tagName!=="A")}var kA="Portal",bm=A.forwardRef((r,e)=>{const{container:n,...o}=r,[d,u]=A.useState(!1);Rr(()=>u(!0),[]);const g=n||d&&globalThis?.document?.body;return g?ww.createPortal(s.jsx(zt.div,{...o,ref:e}),g):null});bm.displayName=kA;var Bf=0;function Uy(){A.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??W1()),document.body.insertAdjacentElement("beforeend",r[1]??W1()),Bf++,()=>{Bf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Bf--}},[])}function W1(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var au="right-scroll-bar-position",ou="width-before-scroll-bar",OA="with-scroll-bars-hidden",PA="--removed-body-scroll-bar-size";function Ff(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function DA(r,e){var n=A.useState(function(){return{value:r,callback:e,facade:{get current(){return n.value},set current(o){var d=n.value;d!==o&&(n.value=o,n.callback(o,d))}}}})[0];return n.callback=e,n.facade}var MA=typeof window<"u"?A.useLayoutEffect:A.useEffect,H1=new WeakMap;function LA(r,e){var n=DA(null,function(o){return r.forEach(function(d){return Ff(d,o)})});return MA(function(){var o=H1.get(n);if(o){var d=new Set(o),u=new Set(r),g=n.current;d.forEach(function(x){u.has(x)||Ff(x,null)}),u.forEach(function(x){d.has(x)||Ff(x,g)})}H1.set(n,r)},[r]),n}function BA(r){return r}function FA(r,e){e===void 0&&(e=BA);var n=[],o=!1,d={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:r},useMedium:function(u){var g=e(u,o);return n.push(g),function(){n=n.filter(function(x){return x!==g})}},assignSyncMedium:function(u){for(o=!0;n.length;){var g=n;n=[],g.forEach(u)}n={push:function(x){return u(x)},filter:function(){return n}}},assignMedium:function(u){o=!0;var g=[];if(n.length){var x=n;n=[],x.forEach(u),g=n}var v=function(){var S=g;g=[],S.forEach(u)},y=function(){return Promise.resolve().then(v)};y(),n={push:function(S){g.push(S),y()},filter:function(S){return g=g.filter(S),n}}}};return d}function UA(r){r===void 0&&(r={});var e=FA(null);return e.options=Ls({async:!0,ssr:!1},r),e}var zy=function(r){var e=r.sideCar,n=Ra(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=e.read();if(!o)throw new Error("Sidecar medium not found");return A.createElement(o,Ls({},n))};zy.isSideCarExport=!0;function zA(r,e){return r.useMedium(e),zy}var $y=UA(),Uf=function(){},Ou=A.forwardRef(function(r,e){var n=A.useRef(null),o=A.useState({onScrollCapture:Uf,onWheelCapture:Uf,onTouchMoveCapture:Uf}),d=o[0],u=o[1],g=r.forwardProps,x=r.children,v=r.className,y=r.removeScrollBar,S=r.enabled,E=r.shards,T=r.sideCar,I=r.noRelative,O=r.noIsolation,k=r.inert,P=r.allowPinchZoom,L=r.as,U=L===void 0?"div":L,B=r.gapMode,G=Ra(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ee=T,se=LA([n,e]),V=Ls(Ls({},G),d);return A.createElement(A.Fragment,null,S&&A.createElement(ee,{sideCar:$y,removeScrollBar:y,shards:E,noRelative:I,noIsolation:O,inert:k,setCallbacks:u,allowPinchZoom:!!P,lockRef:n,gapMode:B}),g?A.cloneElement(A.Children.only(x),Ls(Ls({},V),{ref:se})):A.createElement(U,Ls({},V,{className:v,ref:se}),x))});Ou.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ou.classNames={fullWidth:ou,zeroRight:au};var $A=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VA(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=$A();return e&&r.setAttribute("nonce",e),r}function WA(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function HA(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var GA=function(){var r=0,e=null;return{add:function(n){r==0&&(e=VA())&&(WA(e,n),HA(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qA=function(){var r=GA();return function(e,n){A.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&n])}},Vy=function(){var r=qA(),e=function(n){var o=n.styles,d=n.dynamic;return r(o,d),null};return e},XA={left:0,top:0,right:0,gap:0},zf=function(r){return parseInt(r||"",10)||0},YA=function(r){var e=window.getComputedStyle(document.body),n=e[r==="padding"?"paddingLeft":"marginLeft"],o=e[r==="padding"?"paddingTop":"marginTop"],d=e[r==="padding"?"paddingRight":"marginRight"];return[zf(n),zf(o),zf(d)]},KA=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return XA;var e=YA(r),n=document.documentElement.clientWidth,o=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,o-n+e[2]-e[0])}},ZA=Vy(),ul="data-scroll-locked",QA=function(r,e,n,o){var d=r.left,u=r.top,g=r.right,x=r.gap;return n===void 0&&(n="margin"),`
  .`.concat(OA,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(x,"px ").concat(o,`;
  }
  body[`).concat(ul,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(o,";"),n==="margin"&&`
    padding-left: `.concat(d,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(g,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(x,"px ").concat(o,`;
    `),n==="padding"&&"padding-right: ".concat(x,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(au,` {
    right: `).concat(x,"px ").concat(o,`;
  }
  
  .`).concat(ou,` {
    margin-right: `).concat(x,"px ").concat(o,`;
  }
  
  .`).concat(au," .").concat(au,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(ou," .").concat(ou,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(ul,`] {
    `).concat(PA,": ").concat(x,`px;
  }
`)},G1=function(){var r=parseInt(document.body.getAttribute(ul)||"0",10);return isFinite(r)?r:0},JA=function(){A.useEffect(function(){return document.body.setAttribute(ul,(G1()+1).toString()),function(){var r=G1()-1;r<=0?document.body.removeAttribute(ul):document.body.setAttribute(ul,r.toString())}},[])},e4=function(r){var e=r.noRelative,n=r.noImportant,o=r.gapMode,d=o===void 0?"margin":o;JA();var u=A.useMemo(function(){return KA(d)},[d]);return A.createElement(ZA,{styles:QA(u,!e,d,n?"":"!important")})},B0=!1;if(typeof window<"u")try{var Yd=Object.defineProperty({},"passive",{get:function(){return B0=!0,!0}});window.addEventListener("test",Yd,Yd),window.removeEventListener("test",Yd,Yd)}catch{B0=!1}var nl=B0?{passive:!1}:!1,t4=function(r){return r.tagName==="TEXTAREA"},Wy=function(r,e){if(!(r instanceof Element))return!1;var n=window.getComputedStyle(r);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!t4(r)&&n[e]==="visible")},n4=function(r){return Wy(r,"overflowY")},r4=function(r){return Wy(r,"overflowX")},q1=function(r,e){var n=e.ownerDocument,o=e;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var d=Hy(r,o);if(d){var u=Gy(r,o),g=u[1],x=u[2];if(g>x)return!0}o=o.parentNode}while(o&&o!==n.body);return!1},s4=function(r){var e=r.scrollTop,n=r.scrollHeight,o=r.clientHeight;return[e,n,o]},i4=function(r){var e=r.scrollLeft,n=r.scrollWidth,o=r.clientWidth;return[e,n,o]},Hy=function(r,e){return r==="v"?n4(e):r4(e)},Gy=function(r,e){return r==="v"?s4(e):i4(e)},a4=function(r,e){return r==="h"&&e==="rtl"?-1:1},o4=function(r,e,n,o,d){var u=a4(r,window.getComputedStyle(e).direction),g=u*o,x=n.target,v=e.contains(x),y=!1,S=g>0,E=0,T=0;do{if(!x)break;var I=Gy(r,x),O=I[0],k=I[1],P=I[2],L=k-P-u*O;(O||L)&&Hy(r,x)&&(E+=L,T+=O);var U=x.parentNode;x=U&&U.nodeType===Node.DOCUMENT_FRAGMENT_NODE?U.host:U}while(!v&&x!==document.body||v&&(e.contains(x)||e===x));return(S&&Math.abs(E)<1||!S&&Math.abs(T)<1)&&(y=!0),y},Kd=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},X1=function(r){return[r.deltaX,r.deltaY]},Y1=function(r){return r&&"current"in r?r.current:r},l4=function(r,e){return r[0]===e[0]&&r[1]===e[1]},c4=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},d4=0,rl=[];function u4(r){var e=A.useRef([]),n=A.useRef([0,0]),o=A.useRef(),d=A.useState(d4++)[0],u=A.useState(Vy)[0],g=A.useRef(r);A.useEffect(function(){g.current=r},[r]),A.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(d));var k=lm([r.lockRef.current],(r.shards||[]).map(Y1),!0).filter(Boolean);return k.forEach(function(P){return P.classList.add("allow-interactivity-".concat(d))}),function(){document.body.classList.remove("block-interactivity-".concat(d)),k.forEach(function(P){return P.classList.remove("allow-interactivity-".concat(d))})}}},[r.inert,r.lockRef.current,r.shards]);var x=A.useCallback(function(k,P){if("touches"in k&&k.touches.length===2||k.type==="wheel"&&k.ctrlKey)return!g.current.allowPinchZoom;var L=Kd(k),U=n.current,B="deltaX"in k?k.deltaX:U[0]-L[0],G="deltaY"in k?k.deltaY:U[1]-L[1],ee,se=k.target,V=Math.abs(B)>Math.abs(G)?"h":"v";if("touches"in k&&V==="h"&&se.type==="range")return!1;var te=q1(V,se);if(!te)return!0;if(te?ee=V:(ee=V==="v"?"h":"v",te=q1(V,se)),!te)return!1;if(!o.current&&"changedTouches"in k&&(B||G)&&(o.current=ee),!ee)return!0;var ne=o.current||ee;return o4(ne,P,k,ne==="h"?B:G)},[]),v=A.useCallback(function(k){var P=k;if(!(!rl.length||rl[rl.length-1]!==u)){var L="deltaY"in P?X1(P):Kd(P),U=e.current.filter(function(ee){return ee.name===P.type&&(ee.target===P.target||P.target===ee.shadowParent)&&l4(ee.delta,L)})[0];if(U&&U.should){P.cancelable&&P.preventDefault();return}if(!U){var B=(g.current.shards||[]).map(Y1).filter(Boolean).filter(function(ee){return ee.contains(P.target)}),G=B.length>0?x(P,B[0]):!g.current.noIsolation;G&&P.cancelable&&P.preventDefault()}}},[]),y=A.useCallback(function(k,P,L,U){var B={name:k,delta:P,target:L,should:U,shadowParent:h4(L)};e.current.push(B),setTimeout(function(){e.current=e.current.filter(function(G){return G!==B})},1)},[]),S=A.useCallback(function(k){n.current=Kd(k),o.current=void 0},[]),E=A.useCallback(function(k){y(k.type,X1(k),k.target,x(k,r.lockRef.current))},[]),T=A.useCallback(function(k){y(k.type,Kd(k),k.target,x(k,r.lockRef.current))},[]);A.useEffect(function(){return rl.push(u),r.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:T}),document.addEventListener("wheel",v,nl),document.addEventListener("touchmove",v,nl),document.addEventListener("touchstart",S,nl),function(){rl=rl.filter(function(k){return k!==u}),document.removeEventListener("wheel",v,nl),document.removeEventListener("touchmove",v,nl),document.removeEventListener("touchstart",S,nl)}},[]);var I=r.removeScrollBar,O=r.inert;return A.createElement(A.Fragment,null,O?A.createElement(u,{styles:c4(d)}):null,I?A.createElement(e4,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function h4(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const f4=zA($y,u4);var Cm=A.forwardRef(function(r,e){return A.createElement(Ou,Ls({},r,{ref:e,sideCar:f4}))});Cm.classNames=Ou.classNames;var m4=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},sl=new WeakMap,Zd=new WeakMap,Qd={},$f=0,qy=function(r){return r&&(r.host||qy(r.parentNode))},p4=function(r,e){return e.map(function(n){if(r.contains(n))return n;var o=qy(n);return o&&r.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",r,". Doing nothing"),null)}).filter(function(n){return!!n})},g4=function(r,e,n,o){var d=p4(e,Array.isArray(r)?r:[r]);Qd[n]||(Qd[n]=new WeakMap);var u=Qd[n],g=[],x=new Set,v=new Set(d),y=function(E){!E||x.has(E)||(x.add(E),y(E.parentNode))};d.forEach(y);var S=function(E){!E||v.has(E)||Array.prototype.forEach.call(E.children,function(T){if(x.has(T))S(T);else try{var I=T.getAttribute(o),O=I!==null&&I!=="false",k=(sl.get(T)||0)+1,P=(u.get(T)||0)+1;sl.set(T,k),u.set(T,P),g.push(T),k===1&&O&&Zd.set(T,!0),P===1&&T.setAttribute(n,"true"),O||T.setAttribute(o,"true")}catch(L){console.error("aria-hidden: cannot operate on ",T,L)}})};return S(e),x.clear(),$f++,function(){g.forEach(function(E){var T=sl.get(E)-1,I=u.get(E)-1;sl.set(E,T),u.set(E,I),T||(Zd.has(E)||E.removeAttribute(o),Zd.delete(E)),I||E.removeAttribute(n)}),$f--,$f||(sl=new WeakMap,sl=new WeakMap,Zd=new WeakMap,Qd={})}},Xy=function(r,e,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(r)?r:[r]),d=m4(r);return d?(o.push.apply(o,Array.from(d.querySelectorAll("[aria-live], script"))),g4(o,d,n,"aria-hidden")):function(){return null}};function x4(r){const e=w4(r),n=A.forwardRef((o,d)=>{const{children:u,...g}=o,x=A.Children.toArray(u),v=x.find(v4);if(v){const y=v.props.children,S=x.map(E=>E===v?A.Children.count(y)>1?A.Children.only(null):A.isValidElement(y)?y.props.children:null:E);return s.jsx(e,{...g,ref:d,children:A.isValidElement(y)?A.cloneElement(y,void 0,S):null})}return s.jsx(e,{...g,ref:d,children:u})});return n.displayName=`${r}.Slot`,n}function w4(r){const e=A.forwardRef((n,o)=>{const{children:d,...u}=n;if(A.isValidElement(d)){const g=C4(d),x=b4(u,d.props);return d.type!==A.Fragment&&(x.ref=o?Cl(o,g):g),A.cloneElement(d,x)}return A.Children.count(d)>1?A.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var y4=Symbol("radix.slottable");function v4(r){return A.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===y4}function b4(r,e){const n={...e};for(const o in e){const d=r[o],u=e[o];/^on[A-Z]/.test(o)?d&&u?n[o]=(...x)=>{const v=u(...x);return d(...x),v}:d&&(n[o]=d):o==="style"?n[o]={...d,...u}:o==="className"&&(n[o]=[d,u].filter(Boolean).join(" "))}return{...r,...n}}function C4(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var Pu="Dialog",[Yy,Ky]=_s(Pu),[E4,ii]=Yy(Pu),Zy=r=>{const{__scopeDialog:e,children:n,open:o,defaultOpen:d,onOpenChange:u,modal:g=!0}=r,x=A.useRef(null),v=A.useRef(null),[y,S]=ni({prop:o,defaultProp:d??!1,onChange:u,caller:Pu});return s.jsx(E4,{scope:e,triggerRef:x,contentRef:v,contentId:vi(),titleId:vi(),descriptionId:vi(),open:y,onOpenChange:S,onOpenToggle:A.useCallback(()=>S(E=>!E),[S]),modal:g,children:n})};Zy.displayName=Pu;var Qy="DialogTrigger",Jy=A.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,d=ii(Qy,n),u=ln(e,d.triggerRef);return s.jsx(zt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":d.open,"aria-controls":d.contentId,"data-state":_m(d.open),...o,ref:u,onClick:Ht(r.onClick,d.onOpenToggle)})});Jy.displayName=Qy;var Em="DialogPortal",[S4,ev]=Yy(Em,{forceMount:void 0}),tv=r=>{const{__scopeDialog:e,forceMount:n,children:o,container:d}=r,u=ii(Em,e);return s.jsx(S4,{scope:e,forceMount:n,children:A.Children.map(o,g=>s.jsx(Oa,{present:n||u.open,children:s.jsx(bm,{asChild:!0,container:d,children:g})}))})};tv.displayName=Em;var xu="DialogOverlay",nv=A.forwardRef((r,e)=>{const n=ev(xu,r.__scopeDialog),{forceMount:o=n.forceMount,...d}=r,u=ii(xu,r.__scopeDialog);return u.modal?s.jsx(Oa,{present:o||u.open,children:s.jsx(N4,{...d,ref:e})}):null});nv.displayName=xu;var _4=x4("DialogOverlay.RemoveScroll"),N4=A.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,d=ii(xu,n);return s.jsx(Cm,{as:_4,allowPinchZoom:!0,shards:[d.contentRef],children:s.jsx(zt.div,{"data-state":_m(d.open),...o,ref:e,style:{pointerEvents:"auto",...o.style}})})}),wo="DialogContent",rv=A.forwardRef((r,e)=>{const n=ev(wo,r.__scopeDialog),{forceMount:o=n.forceMount,...d}=r,u=ii(wo,r.__scopeDialog);return s.jsx(Oa,{present:o||u.open,children:u.modal?s.jsx(A4,{...d,ref:e}):s.jsx(j4,{...d,ref:e})})});rv.displayName=wo;var A4=A.forwardRef((r,e)=>{const n=ii(wo,r.__scopeDialog),o=A.useRef(null),d=ln(e,n.contentRef,o);return A.useEffect(()=>{const u=o.current;if(u)return Xy(u)},[]),s.jsx(sv,{...r,ref:d,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ht(r.onCloseAutoFocus,u=>{u.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ht(r.onPointerDownOutside,u=>{const g=u.detail.originalEvent,x=g.button===0&&g.ctrlKey===!0;(g.button===2||x)&&u.preventDefault()}),onFocusOutside:Ht(r.onFocusOutside,u=>u.preventDefault())})}),j4=A.forwardRef((r,e)=>{const n=ii(wo,r.__scopeDialog),o=A.useRef(!1),d=A.useRef(!1);return s.jsx(sv,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{r.onCloseAutoFocus?.(u),u.defaultPrevented||(o.current||n.triggerRef.current?.focus(),u.preventDefault()),o.current=!1,d.current=!1},onInteractOutside:u=>{r.onInteractOutside?.(u),u.defaultPrevented||(o.current=!0,u.detail.originalEvent.type==="pointerdown"&&(d.current=!0));const g=u.target;n.triggerRef.current?.contains(g)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&d.current&&u.preventDefault()}})}),sv=A.forwardRef((r,e)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:d,onCloseAutoFocus:u,...g}=r,x=ii(wo,n),v=A.useRef(null),y=ln(e,v);return Uy(),s.jsxs(s.Fragment,{children:[s.jsx(vm,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:d,onUnmountAutoFocus:u,children:s.jsx(ym,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":_m(x.open),...g,ref:y,onDismiss:()=>x.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(T4,{titleId:x.titleId}),s.jsx(k4,{contentRef:v,descriptionId:x.descriptionId})]})]})}),Sm="DialogTitle",iv=A.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,d=ii(Sm,n);return s.jsx(zt.h2,{id:d.titleId,...o,ref:e})});iv.displayName=Sm;var av="DialogDescription",ov=A.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,d=ii(av,n);return s.jsx(zt.p,{id:d.descriptionId,...o,ref:e})});ov.displayName=av;var lv="DialogClose",cv=A.forwardRef((r,e)=>{const{__scopeDialog:n,...o}=r,d=ii(lv,n);return s.jsx(zt.button,{type:"button",...o,ref:e,onClick:Ht(r.onClick,()=>d.onOpenChange(!1))})});cv.displayName=lv;function _m(r){return r?"open":"closed"}var dv="DialogTitleWarning",[I4,uv]=R3(dv,{contentName:wo,titleName:Sm,docsSlug:"dialog"}),T4=({titleId:r})=>{const e=uv(dv),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{r&&(document.getElementById(r)||console.error(n))},[n,r]),null},R4="DialogDescriptionWarning",k4=({contentRef:r,descriptionId:e})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uv(R4).contentName}}.`;return A.useEffect(()=>{const d=r.current?.getAttribute("aria-describedby");e&&d&&(document.getElementById(e)||console.warn(o))},[o,r,e]),null},hv=Zy,fv=Jy,mv=tv,pv=nv,gv=rv,xv=iv,wv=ov,Nm=cv;function Pn({...r}){return s.jsx(hv,{"data-slot":"dialog",...r})}function yv({...r}){return s.jsx(fv,{"data-slot":"dialog-trigger",...r})}function O4({...r}){return s.jsx(mv,{"data-slot":"dialog-portal",...r})}const vv=A.forwardRef(({className:r,...e},n)=>s.jsx(pv,{ref:n,"data-slot":"dialog-overlay",className:Tt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...e}));vv.displayName="DialogOverlay";function Dn({className:r,children:e,...n}){return s.jsxs(O4,{"data-slot":"dialog-portal",children:[s.jsx(vv,{}),s.jsxs(gv,{"data-slot":"dialog-content",className:Tt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...n,children:[e,s.jsxs(Nm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[s.jsx(po,{}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Bn({className:r,...e}){return s.jsx("div",{"data-slot":"dialog-header",className:Tt("flex flex-col gap-2 text-center sm:text-left",r),...e})}function Bs({className:r,...e}){return s.jsx("div",{"data-slot":"dialog-footer",className:Tt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...e})}function Fn({className:r,...e}){return s.jsx(xv,{"data-slot":"dialog-title",className:Tt("text-lg leading-none font-semibold",r),...e})}function Jr({className:r,...e}){return s.jsx(wv,{"data-slot":"dialog-description",className:Tt("text-muted-foreground text-sm",r),...e})}const P4=J0("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function mn({className:r,variant:e,asChild:n=!1,...o}){const d=n?iw:"span";return s.jsx(d,{"data-slot":"badge",className:Tt(P4({variant:e}),r),...o})}function K1(r,[e,n]){return Math.min(n,Math.max(e,r))}const D4=["top","right","bottom","left"],ja=Math.min,vs=Math.max,wu=Math.round,Jd=Math.floor,bi=r=>({x:r,y:r}),M4={left:"right",right:"left",bottom:"top",top:"bottom"},L4={start:"end",end:"start"};function F0(r,e,n){return vs(r,ja(e,n))}function Hi(r,e){return typeof r=="function"?r(e):r}function Gi(r){return r.split("-")[0]}function Al(r){return r.split("-")[1]}function Am(r){return r==="x"?"y":"x"}function jm(r){return r==="y"?"height":"width"}const B4=new Set(["top","bottom"]);function yi(r){return B4.has(Gi(r))?"y":"x"}function Im(r){return Am(yi(r))}function F4(r,e,n){n===void 0&&(n=!1);const o=Al(r),d=Im(r),u=jm(d);let g=d==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[u]>e.floating[u]&&(g=yu(g)),[g,yu(g)]}function U4(r){const e=yu(r);return[U0(r),e,U0(e)]}function U0(r){return r.replace(/start|end/g,e=>L4[e])}const Z1=["left","right"],Q1=["right","left"],z4=["top","bottom"],$4=["bottom","top"];function V4(r,e,n){switch(r){case"top":case"bottom":return n?e?Q1:Z1:e?Z1:Q1;case"left":case"right":return e?z4:$4;default:return[]}}function W4(r,e,n,o){const d=Al(r);let u=V4(Gi(r),n==="start",o);return d&&(u=u.map(g=>g+"-"+d),e&&(u=u.concat(u.map(U0)))),u}function yu(r){return r.replace(/left|right|bottom|top/g,e=>M4[e])}function H4(r){return{top:0,right:0,bottom:0,left:0,...r}}function bv(r){return typeof r!="number"?H4(r):{top:r,right:r,bottom:r,left:r}}function vu(r){const{x:e,y:n,width:o,height:d}=r;return{width:o,height:d,top:n,left:e,right:e+o,bottom:n+d,x:e,y:n}}function J1(r,e,n){let{reference:o,floating:d}=r;const u=yi(e),g=Im(e),x=jm(g),v=Gi(e),y=u==="y",S=o.x+o.width/2-d.width/2,E=o.y+o.height/2-d.height/2,T=o[x]/2-d[x]/2;let I;switch(v){case"top":I={x:S,y:o.y-d.height};break;case"bottom":I={x:S,y:o.y+o.height};break;case"right":I={x:o.x+o.width,y:E};break;case"left":I={x:o.x-d.width,y:E};break;default:I={x:o.x,y:o.y}}switch(Al(e)){case"start":I[g]-=T*(n&&y?-1:1);break;case"end":I[g]+=T*(n&&y?-1:1);break}return I}const G4=async(r,e,n)=>{const{placement:o="bottom",strategy:d="absolute",middleware:u=[],platform:g}=n,x=u.filter(Boolean),v=await(g.isRTL==null?void 0:g.isRTL(e));let y=await g.getElementRects({reference:r,floating:e,strategy:d}),{x:S,y:E}=J1(y,o,v),T=o,I={},O=0;for(let k=0;k<x.length;k++){const{name:P,fn:L}=x[k],{x:U,y:B,data:G,reset:ee}=await L({x:S,y:E,initialPlacement:o,placement:T,strategy:d,middlewareData:I,rects:y,platform:g,elements:{reference:r,floating:e}});S=U??S,E=B??E,I={...I,[P]:{...I[P],...G}},ee&&O<=50&&(O++,typeof ee=="object"&&(ee.placement&&(T=ee.placement),ee.rects&&(y=ee.rects===!0?await g.getElementRects({reference:r,floating:e,strategy:d}):ee.rects),{x:S,y:E}=J1(y,T,v)),k=-1)}return{x:S,y:E,placement:T,strategy:d,middlewareData:I}};async function _c(r,e){var n;e===void 0&&(e={});const{x:o,y:d,platform:u,rects:g,elements:x,strategy:v}=r,{boundary:y="clippingAncestors",rootBoundary:S="viewport",elementContext:E="floating",altBoundary:T=!1,padding:I=0}=Hi(e,r),O=bv(I),P=x[T?E==="floating"?"reference":"floating":E],L=vu(await u.getClippingRect({element:(n=await(u.isElement==null?void 0:u.isElement(P)))==null||n?P:P.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(x.floating)),boundary:y,rootBoundary:S,strategy:v})),U=E==="floating"?{x:o,y:d,width:g.floating.width,height:g.floating.height}:g.reference,B=await(u.getOffsetParent==null?void 0:u.getOffsetParent(x.floating)),G=await(u.isElement==null?void 0:u.isElement(B))?await(u.getScale==null?void 0:u.getScale(B))||{x:1,y:1}:{x:1,y:1},ee=vu(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:x,rect:U,offsetParent:B,strategy:v}):U);return{top:(L.top-ee.top+O.top)/G.y,bottom:(ee.bottom-L.bottom+O.bottom)/G.y,left:(L.left-ee.left+O.left)/G.x,right:(ee.right-L.right+O.right)/G.x}}const q4=r=>({name:"arrow",options:r,async fn(e){const{x:n,y:o,placement:d,rects:u,platform:g,elements:x,middlewareData:v}=e,{element:y,padding:S=0}=Hi(r,e)||{};if(y==null)return{};const E=bv(S),T={x:n,y:o},I=Im(d),O=jm(I),k=await g.getDimensions(y),P=I==="y",L=P?"top":"left",U=P?"bottom":"right",B=P?"clientHeight":"clientWidth",G=u.reference[O]+u.reference[I]-T[I]-u.floating[O],ee=T[I]-u.reference[I],se=await(g.getOffsetParent==null?void 0:g.getOffsetParent(y));let V=se?se[B]:0;(!V||!await(g.isElement==null?void 0:g.isElement(se)))&&(V=x.floating[B]||u.floating[O]);const te=G/2-ee/2,ne=V/2-k[O]/2-1,ce=ja(E[L],ne),oe=ja(E[U],ne),H=ce,W=V-k[O]-oe,de=V/2-k[O]/2+te,X=F0(H,de,W),q=!v.arrow&&Al(d)!=null&&de!==X&&u.reference[O]/2-(de<H?ce:oe)-k[O]/2<0,ie=q?de<H?de-H:de-W:0;return{[I]:T[I]+ie,data:{[I]:X,centerOffset:de-X-ie,...q&&{alignmentOffset:ie}},reset:q}}}),X4=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var n,o;const{placement:d,middlewareData:u,rects:g,initialPlacement:x,platform:v,elements:y}=e,{mainAxis:S=!0,crossAxis:E=!0,fallbackPlacements:T,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:O="none",flipAlignment:k=!0,...P}=Hi(r,e);if((n=u.arrow)!=null&&n.alignmentOffset)return{};const L=Gi(d),U=yi(x),B=Gi(x)===x,G=await(v.isRTL==null?void 0:v.isRTL(y.floating)),ee=T||(B||!k?[yu(x)]:U4(x)),se=O!=="none";!T&&se&&ee.push(...W4(x,k,O,G));const V=[x,...ee],te=await _c(e,P),ne=[];let ce=((o=u.flip)==null?void 0:o.overflows)||[];if(S&&ne.push(te[L]),E){const de=F4(d,g,G);ne.push(te[de[0]],te[de[1]])}if(ce=[...ce,{placement:d,overflows:ne}],!ne.every(de=>de<=0)){var oe,H;const de=(((oe=u.flip)==null?void 0:oe.index)||0)+1,X=V[de];if(X&&(!(E==="alignment"?U!==yi(X):!1)||ce.every(z=>yi(z.placement)===U?z.overflows[0]>0:!0)))return{data:{index:de,overflows:ce},reset:{placement:X}};let q=(H=ce.filter(ie=>ie.overflows[0]<=0).sort((ie,z)=>ie.overflows[1]-z.overflows[1])[0])==null?void 0:H.placement;if(!q)switch(I){case"bestFit":{var W;const ie=(W=ce.filter(z=>{if(se){const ue=yi(z.placement);return ue===U||ue==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(ue=>ue>0).reduce((ue,be)=>ue+be,0)]).sort((z,ue)=>z[1]-ue[1])[0])==null?void 0:W[0];ie&&(q=ie);break}case"initialPlacement":q=x;break}if(d!==q)return{reset:{placement:q}}}return{}}}};function ex(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function tx(r){return D4.some(e=>r[e]>=0)}const Y4=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:n}=e,{strategy:o="referenceHidden",...d}=Hi(r,e);switch(o){case"referenceHidden":{const u=await _c(e,{...d,elementContext:"reference"}),g=ex(u,n.reference);return{data:{referenceHiddenOffsets:g,referenceHidden:tx(g)}}}case"escaped":{const u=await _c(e,{...d,altBoundary:!0}),g=ex(u,n.floating);return{data:{escapedOffsets:g,escaped:tx(g)}}}default:return{}}}}},Cv=new Set(["left","top"]);async function K4(r,e){const{placement:n,platform:o,elements:d}=r,u=await(o.isRTL==null?void 0:o.isRTL(d.floating)),g=Gi(n),x=Al(n),v=yi(n)==="y",y=Cv.has(g)?-1:1,S=u&&v?-1:1,E=Hi(e,r);let{mainAxis:T,crossAxis:I,alignmentAxis:O}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return x&&typeof O=="number"&&(I=x==="end"?O*-1:O),v?{x:I*S,y:T*y}:{x:T*y,y:I*S}}const Z4=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var n,o;const{x:d,y:u,placement:g,middlewareData:x}=e,v=await K4(e,r);return g===((n=x.offset)==null?void 0:n.placement)&&(o=x.arrow)!=null&&o.alignmentOffset?{}:{x:d+v.x,y:u+v.y,data:{...v,placement:g}}}}},Q4=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:n,y:o,placement:d}=e,{mainAxis:u=!0,crossAxis:g=!1,limiter:x={fn:P=>{let{x:L,y:U}=P;return{x:L,y:U}}},...v}=Hi(r,e),y={x:n,y:o},S=await _c(e,v),E=yi(Gi(d)),T=Am(E);let I=y[T],O=y[E];if(u){const P=T==="y"?"top":"left",L=T==="y"?"bottom":"right",U=I+S[P],B=I-S[L];I=F0(U,I,B)}if(g){const P=E==="y"?"top":"left",L=E==="y"?"bottom":"right",U=O+S[P],B=O-S[L];O=F0(U,O,B)}const k=x.fn({...e,[T]:I,[E]:O});return{...k,data:{x:k.x-n,y:k.y-o,enabled:{[T]:u,[E]:g}}}}}},J4=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:n,y:o,placement:d,rects:u,middlewareData:g}=e,{offset:x=0,mainAxis:v=!0,crossAxis:y=!0}=Hi(r,e),S={x:n,y:o},E=yi(d),T=Am(E);let I=S[T],O=S[E];const k=Hi(x,e),P=typeof k=="number"?{mainAxis:k,crossAxis:0}:{mainAxis:0,crossAxis:0,...k};if(v){const B=T==="y"?"height":"width",G=u.reference[T]-u.floating[B]+P.mainAxis,ee=u.reference[T]+u.reference[B]-P.mainAxis;I<G?I=G:I>ee&&(I=ee)}if(y){var L,U;const B=T==="y"?"width":"height",G=Cv.has(Gi(d)),ee=u.reference[E]-u.floating[B]+(G&&((L=g.offset)==null?void 0:L[E])||0)+(G?0:P.crossAxis),se=u.reference[E]+u.reference[B]+(G?0:((U=g.offset)==null?void 0:U[E])||0)-(G?P.crossAxis:0);O<ee?O=ee:O>se&&(O=se)}return{[T]:I,[E]:O}}}},ej=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var n,o;const{placement:d,rects:u,platform:g,elements:x}=e,{apply:v=()=>{},...y}=Hi(r,e),S=await _c(e,y),E=Gi(d),T=Al(d),I=yi(d)==="y",{width:O,height:k}=u.floating;let P,L;E==="top"||E==="bottom"?(P=E,L=T===(await(g.isRTL==null?void 0:g.isRTL(x.floating))?"start":"end")?"left":"right"):(L=E,P=T==="end"?"top":"bottom");const U=k-S.top-S.bottom,B=O-S.left-S.right,G=ja(k-S[P],U),ee=ja(O-S[L],B),se=!e.middlewareData.shift;let V=G,te=ee;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(te=B),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(V=U),se&&!T){const ce=vs(S.left,0),oe=vs(S.right,0),H=vs(S.top,0),W=vs(S.bottom,0);I?te=O-2*(ce!==0||oe!==0?ce+oe:vs(S.left,S.right)):V=k-2*(H!==0||W!==0?H+W:vs(S.top,S.bottom))}await v({...e,availableWidth:te,availableHeight:V});const ne=await g.getDimensions(x.floating);return O!==ne.width||k!==ne.height?{reset:{rects:!0}}:{}}}};function Du(){return typeof window<"u"}function jl(r){return Ev(r)?(r.nodeName||"").toLowerCase():"#document"}function Ss(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Si(r){var e;return(e=(Ev(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Ev(r){return Du()?r instanceof Node||r instanceof Ss(r).Node:!1}function ri(r){return Du()?r instanceof Element||r instanceof Ss(r).Element:!1}function Ei(r){return Du()?r instanceof HTMLElement||r instanceof Ss(r).HTMLElement:!1}function nx(r){return!Du()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Ss(r).ShadowRoot}const tj=new Set(["inline","contents"]);function kc(r){const{overflow:e,overflowX:n,overflowY:o,display:d}=si(r);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!tj.has(d)}const nj=new Set(["table","td","th"]);function rj(r){return nj.has(jl(r))}const sj=[":popover-open",":modal"];function Mu(r){return sj.some(e=>{try{return r.matches(e)}catch{return!1}})}const ij=["transform","translate","scale","rotate","perspective"],aj=["transform","translate","scale","rotate","perspective","filter"],oj=["paint","layout","strict","content"];function Tm(r){const e=Rm(),n=ri(r)?si(r):r;return ij.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||aj.some(o=>(n.willChange||"").includes(o))||oj.some(o=>(n.contain||"").includes(o))}function lj(r){let e=Ia(r);for(;Ei(e)&&!bl(e);){if(Tm(e))return e;if(Mu(e))return null;e=Ia(e)}return null}function Rm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const cj=new Set(["html","body","#document"]);function bl(r){return cj.has(jl(r))}function si(r){return Ss(r).getComputedStyle(r)}function Lu(r){return ri(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Ia(r){if(jl(r)==="html")return r;const e=r.assignedSlot||r.parentNode||nx(r)&&r.host||Si(r);return nx(e)?e.host:e}function Sv(r){const e=Ia(r);return bl(e)?r.ownerDocument?r.ownerDocument.body:r.body:Ei(e)&&kc(e)?e:Sv(e)}function Nc(r,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const d=Sv(r),u=d===((o=r.ownerDocument)==null?void 0:o.body),g=Ss(d);if(u){const x=z0(g);return e.concat(g,g.visualViewport||[],kc(d)?d:[],x&&n?Nc(x):[])}return e.concat(d,Nc(d,[],n))}function z0(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function _v(r){const e=si(r);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const d=Ei(r),u=d?r.offsetWidth:n,g=d?r.offsetHeight:o,x=wu(n)!==u||wu(o)!==g;return x&&(n=u,o=g),{width:n,height:o,$:x}}function km(r){return ri(r)?r:r.contextElement}function hl(r){const e=km(r);if(!Ei(e))return bi(1);const n=e.getBoundingClientRect(),{width:o,height:d,$:u}=_v(e);let g=(u?wu(n.width):n.width)/o,x=(u?wu(n.height):n.height)/d;return(!g||!Number.isFinite(g))&&(g=1),(!x||!Number.isFinite(x))&&(x=1),{x:g,y:x}}const dj=bi(0);function Nv(r){const e=Ss(r);return!Rm()||!e.visualViewport?dj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uj(r,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ss(r)?!1:e}function yo(r,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const d=r.getBoundingClientRect(),u=km(r);let g=bi(1);e&&(o?ri(o)&&(g=hl(o)):g=hl(r));const x=uj(u,n,o)?Nv(u):bi(0);let v=(d.left+x.x)/g.x,y=(d.top+x.y)/g.y,S=d.width/g.x,E=d.height/g.y;if(u){const T=Ss(u),I=o&&ri(o)?Ss(o):o;let O=T,k=z0(O);for(;k&&o&&I!==O;){const P=hl(k),L=k.getBoundingClientRect(),U=si(k),B=L.left+(k.clientLeft+parseFloat(U.paddingLeft))*P.x,G=L.top+(k.clientTop+parseFloat(U.paddingTop))*P.y;v*=P.x,y*=P.y,S*=P.x,E*=P.y,v+=B,y+=G,O=Ss(k),k=z0(O)}}return vu({width:S,height:E,x:v,y})}function Bu(r,e){const n=Lu(r).scrollLeft;return e?e.left+n:yo(Si(r)).left+n}function Av(r,e){const n=r.getBoundingClientRect(),o=n.left+e.scrollLeft-Bu(r,n),d=n.top+e.scrollTop;return{x:o,y:d}}function hj(r){let{elements:e,rect:n,offsetParent:o,strategy:d}=r;const u=d==="fixed",g=Si(o),x=e?Mu(e.floating):!1;if(o===g||x&&u)return n;let v={scrollLeft:0,scrollTop:0},y=bi(1);const S=bi(0),E=Ei(o);if((E||!E&&!u)&&((jl(o)!=="body"||kc(g))&&(v=Lu(o)),Ei(o))){const I=yo(o);y=hl(o),S.x=I.x+o.clientLeft,S.y=I.y+o.clientTop}const T=g&&!E&&!u?Av(g,v):bi(0);return{width:n.width*y.x,height:n.height*y.y,x:n.x*y.x-v.scrollLeft*y.x+S.x+T.x,y:n.y*y.y-v.scrollTop*y.y+S.y+T.y}}function fj(r){return Array.from(r.getClientRects())}function mj(r){const e=Si(r),n=Lu(r),o=r.ownerDocument.body,d=vs(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),u=vs(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let g=-n.scrollLeft+Bu(r);const x=-n.scrollTop;return si(o).direction==="rtl"&&(g+=vs(e.clientWidth,o.clientWidth)-d),{width:d,height:u,x:g,y:x}}const rx=25;function pj(r,e){const n=Ss(r),o=Si(r),d=n.visualViewport;let u=o.clientWidth,g=o.clientHeight,x=0,v=0;if(d){u=d.width,g=d.height;const S=Rm();(!S||S&&e==="fixed")&&(x=d.offsetLeft,v=d.offsetTop)}const y=Bu(o);if(y<=0){const S=o.ownerDocument,E=S.body,T=getComputedStyle(E),I=S.compatMode==="CSS1Compat"&&parseFloat(T.marginLeft)+parseFloat(T.marginRight)||0,O=Math.abs(o.clientWidth-E.clientWidth-I);O<=rx&&(u-=O)}else y<=rx&&(u+=y);return{width:u,height:g,x,y:v}}const gj=new Set(["absolute","fixed"]);function xj(r,e){const n=yo(r,!0,e==="fixed"),o=n.top+r.clientTop,d=n.left+r.clientLeft,u=Ei(r)?hl(r):bi(1),g=r.clientWidth*u.x,x=r.clientHeight*u.y,v=d*u.x,y=o*u.y;return{width:g,height:x,x:v,y}}function sx(r,e,n){let o;if(e==="viewport")o=pj(r,n);else if(e==="document")o=mj(Si(r));else if(ri(e))o=xj(e,n);else{const d=Nv(r);o={x:e.x-d.x,y:e.y-d.y,width:e.width,height:e.height}}return vu(o)}function jv(r,e){const n=Ia(r);return n===e||!ri(n)||bl(n)?!1:si(n).position==="fixed"||jv(n,e)}function wj(r,e){const n=e.get(r);if(n)return n;let o=Nc(r,[],!1).filter(x=>ri(x)&&jl(x)!=="body"),d=null;const u=si(r).position==="fixed";let g=u?Ia(r):r;for(;ri(g)&&!bl(g);){const x=si(g),v=Tm(g);!v&&x.position==="fixed"&&(d=null),(u?!v&&!d:!v&&x.position==="static"&&!!d&&gj.has(d.position)||kc(g)&&!v&&jv(r,g))?o=o.filter(S=>S!==g):d=x,g=Ia(g)}return e.set(r,o),o}function yj(r){let{element:e,boundary:n,rootBoundary:o,strategy:d}=r;const g=[...n==="clippingAncestors"?Mu(e)?[]:wj(e,this._c):[].concat(n),o],x=g[0],v=g.reduce((y,S)=>{const E=sx(e,S,d);return y.top=vs(E.top,y.top),y.right=ja(E.right,y.right),y.bottom=ja(E.bottom,y.bottom),y.left=vs(E.left,y.left),y},sx(e,x,d));return{width:v.right-v.left,height:v.bottom-v.top,x:v.left,y:v.top}}function vj(r){const{width:e,height:n}=_v(r);return{width:e,height:n}}function bj(r,e,n){const o=Ei(e),d=Si(e),u=n==="fixed",g=yo(r,!0,u,e);let x={scrollLeft:0,scrollTop:0};const v=bi(0);function y(){v.x=Bu(d)}if(o||!o&&!u)if((jl(e)!=="body"||kc(d))&&(x=Lu(e)),o){const I=yo(e,!0,u,e);v.x=I.x+e.clientLeft,v.y=I.y+e.clientTop}else d&&y();u&&!o&&d&&y();const S=d&&!o&&!u?Av(d,x):bi(0),E=g.left+x.scrollLeft-v.x-S.x,T=g.top+x.scrollTop-v.y-S.y;return{x:E,y:T,width:g.width,height:g.height}}function Vf(r){return si(r).position==="static"}function ix(r,e){if(!Ei(r)||si(r).position==="fixed")return null;if(e)return e(r);let n=r.offsetParent;return Si(r)===n&&(n=n.ownerDocument.body),n}function Iv(r,e){const n=Ss(r);if(Mu(r))return n;if(!Ei(r)){let d=Ia(r);for(;d&&!bl(d);){if(ri(d)&&!Vf(d))return d;d=Ia(d)}return n}let o=ix(r,e);for(;o&&rj(o)&&Vf(o);)o=ix(o,e);return o&&bl(o)&&Vf(o)&&!Tm(o)?n:o||lj(r)||n}const Cj=async function(r){const e=this.getOffsetParent||Iv,n=this.getDimensions,o=await n(r.floating);return{reference:bj(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Ej(r){return si(r).direction==="rtl"}const Sj={convertOffsetParentRelativeRectToViewportRelativeRect:hj,getDocumentElement:Si,getClippingRect:yj,getOffsetParent:Iv,getElementRects:Cj,getClientRects:fj,getDimensions:vj,getScale:hl,isElement:ri,isRTL:Ej};function Tv(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function _j(r,e){let n=null,o;const d=Si(r);function u(){var x;clearTimeout(o),(x=n)==null||x.disconnect(),n=null}function g(x,v){x===void 0&&(x=!1),v===void 0&&(v=1),u();const y=r.getBoundingClientRect(),{left:S,top:E,width:T,height:I}=y;if(x||e(),!T||!I)return;const O=Jd(E),k=Jd(d.clientWidth-(S+T)),P=Jd(d.clientHeight-(E+I)),L=Jd(S),B={rootMargin:-O+"px "+-k+"px "+-P+"px "+-L+"px",threshold:vs(0,ja(1,v))||1};let G=!0;function ee(se){const V=se[0].intersectionRatio;if(V!==v){if(!G)return g();V?g(!1,V):o=setTimeout(()=>{g(!1,1e-7)},1e3)}V===1&&!Tv(y,r.getBoundingClientRect())&&g(),G=!1}try{n=new IntersectionObserver(ee,{...B,root:d.ownerDocument})}catch{n=new IntersectionObserver(ee,B)}n.observe(r)}return g(!0),u}function Nj(r,e,n,o){o===void 0&&(o={});const{ancestorScroll:d=!0,ancestorResize:u=!0,elementResize:g=typeof ResizeObserver=="function",layoutShift:x=typeof IntersectionObserver=="function",animationFrame:v=!1}=o,y=km(r),S=d||u?[...y?Nc(y):[],...Nc(e)]:[];S.forEach(L=>{d&&L.addEventListener("scroll",n,{passive:!0}),u&&L.addEventListener("resize",n)});const E=y&&x?_j(y,n):null;let T=-1,I=null;g&&(I=new ResizeObserver(L=>{let[U]=L;U&&U.target===y&&I&&(I.unobserve(e),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var B;(B=I)==null||B.observe(e)})),n()}),y&&!v&&I.observe(y),I.observe(e));let O,k=v?yo(r):null;v&&P();function P(){const L=yo(r);k&&!Tv(k,L)&&n(),k=L,O=requestAnimationFrame(P)}return n(),()=>{var L;S.forEach(U=>{d&&U.removeEventListener("scroll",n),u&&U.removeEventListener("resize",n)}),E?.(),(L=I)==null||L.disconnect(),I=null,v&&cancelAnimationFrame(O)}}const Aj=Z4,jj=Q4,Ij=X4,Tj=ej,Rj=Y4,ax=q4,kj=J4,Oj=(r,e,n)=>{const o=new Map,d={platform:Sj,...n},u={...d.platform,_c:o};return G4(r,e,{...d,platform:u})};var Pj=typeof document<"u",Dj=function(){},lu=Pj?A.useLayoutEffect:Dj;function bu(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let n,o,d;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(n=r.length,n!==e.length)return!1;for(o=n;o--!==0;)if(!bu(r[o],e[o]))return!1;return!0}if(d=Object.keys(r),n=d.length,n!==Object.keys(e).length)return!1;for(o=n;o--!==0;)if(!{}.hasOwnProperty.call(e,d[o]))return!1;for(o=n;o--!==0;){const u=d[o];if(!(u==="_owner"&&r.$$typeof)&&!bu(r[u],e[u]))return!1}return!0}return r!==r&&e!==e}function Rv(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function ox(r,e){const n=Rv(r);return Math.round(e*n)/n}function Wf(r){const e=A.useRef(r);return lu(()=>{e.current=r}),e}function Mj(r){r===void 0&&(r={});const{placement:e="bottom",strategy:n="absolute",middleware:o=[],platform:d,elements:{reference:u,floating:g}={},transform:x=!0,whileElementsMounted:v,open:y}=r,[S,E]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[T,I]=A.useState(o);bu(T,o)||I(o);const[O,k]=A.useState(null),[P,L]=A.useState(null),U=A.useCallback(z=>{z!==se.current&&(se.current=z,k(z))},[]),B=A.useCallback(z=>{z!==V.current&&(V.current=z,L(z))},[]),G=u||O,ee=g||P,se=A.useRef(null),V=A.useRef(null),te=A.useRef(S),ne=v!=null,ce=Wf(v),oe=Wf(d),H=Wf(y),W=A.useCallback(()=>{if(!se.current||!V.current)return;const z={placement:e,strategy:n,middleware:T};oe.current&&(z.platform=oe.current),Oj(se.current,V.current,z).then(ue=>{const be={...ue,isPositioned:H.current!==!1};de.current&&!bu(te.current,be)&&(te.current=be,_l.flushSync(()=>{E(be)}))})},[T,e,n,oe,H]);lu(()=>{y===!1&&te.current.isPositioned&&(te.current.isPositioned=!1,E(z=>({...z,isPositioned:!1})))},[y]);const de=A.useRef(!1);lu(()=>(de.current=!0,()=>{de.current=!1}),[]),lu(()=>{if(G&&(se.current=G),ee&&(V.current=ee),G&&ee){if(ce.current)return ce.current(G,ee,W);W()}},[G,ee,W,ce,ne]);const X=A.useMemo(()=>({reference:se,floating:V,setReference:U,setFloating:B}),[U,B]),q=A.useMemo(()=>({reference:G,floating:ee}),[G,ee]),ie=A.useMemo(()=>{const z={position:n,left:0,top:0};if(!q.floating)return z;const ue=ox(q.floating,S.x),be=ox(q.floating,S.y);return x?{...z,transform:"translate("+ue+"px, "+be+"px)",...Rv(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ue,top:be}},[n,x,q.floating,S.x,S.y]);return A.useMemo(()=>({...S,update:W,refs:X,elements:q,floatingStyles:ie}),[S,W,X,q,ie])}const Lj=r=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:r,fn(n){const{element:o,padding:d}=typeof r=="function"?r(n):r;return o&&e(o)?o.current!=null?ax({element:o.current,padding:d}).fn(n):{}:o?ax({element:o,padding:d}).fn(n):{}}}},Bj=(r,e)=>({...Aj(r),options:[r,e]}),Fj=(r,e)=>({...jj(r),options:[r,e]}),Uj=(r,e)=>({...kj(r),options:[r,e]}),zj=(r,e)=>({...Ij(r),options:[r,e]}),$j=(r,e)=>({...Tj(r),options:[r,e]}),Vj=(r,e)=>({...Rj(r),options:[r,e]}),Wj=(r,e)=>({...Lj(r),options:[r,e]});var Hj="Arrow",kv=A.forwardRef((r,e)=>{const{children:n,width:o=10,height:d=5,...u}=r;return s.jsx(zt.svg,{...u,ref:e,width:o,height:d,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});kv.displayName=Hj;var Gj=kv;function Fu(r){const[e,n]=A.useState(void 0);return Rr(()=>{if(r){n({width:r.offsetWidth,height:r.offsetHeight});const o=new ResizeObserver(d=>{if(!Array.isArray(d)||!d.length)return;const u=d[0];let g,x;if("borderBoxSize"in u){const v=u.borderBoxSize,y=Array.isArray(v)?v[0]:v;g=y.inlineSize,x=y.blockSize}else g=r.offsetWidth,x=r.offsetHeight;n({width:g,height:x})});return o.observe(r,{box:"border-box"}),()=>o.unobserve(r)}else n(void 0)},[r]),e}var Om="Popper",[Ov,Pv]=_s(Om),[qj,Dv]=Ov(Om),Mv=r=>{const{__scopePopper:e,children:n}=r,[o,d]=A.useState(null);return s.jsx(qj,{scope:e,anchor:o,onAnchorChange:d,children:n})};Mv.displayName=Om;var Lv="PopperAnchor",Bv=A.forwardRef((r,e)=>{const{__scopePopper:n,virtualRef:o,...d}=r,u=Dv(Lv,n),g=A.useRef(null),x=ln(e,g),v=A.useRef(null);return A.useEffect(()=>{const y=v.current;v.current=o?.current||g.current,y!==v.current&&u.onAnchorChange(v.current)}),o?null:s.jsx(zt.div,{...d,ref:x})});Bv.displayName=Lv;var Pm="PopperContent",[Xj,Yj]=Ov(Pm),Fv=A.forwardRef((r,e)=>{const{__scopePopper:n,side:o="bottom",sideOffset:d=0,align:u="center",alignOffset:g=0,arrowPadding:x=0,avoidCollisions:v=!0,collisionBoundary:y=[],collisionPadding:S=0,sticky:E="partial",hideWhenDetached:T=!1,updatePositionStrategy:I="optimized",onPlaced:O,...k}=r,P=Dv(Pm,n),[L,U]=A.useState(null),B=ln(e,le=>U(le)),[G,ee]=A.useState(null),se=Fu(G),V=se?.width??0,te=se?.height??0,ne=o+(u!=="center"?"-"+u:""),ce=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},oe=Array.isArray(y)?y:[y],H=oe.length>0,W={padding:ce,boundary:oe.filter(Zj),altBoundary:H},{refs:de,floatingStyles:X,placement:q,isPositioned:ie,middlewareData:z}=Mj({strategy:"fixed",placement:ne,whileElementsMounted:(...le)=>Nj(...le,{animationFrame:I==="always"}),elements:{reference:P.anchor},middleware:[Bj({mainAxis:d+te,alignmentAxis:g}),v&&Fj({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?Uj():void 0,...W}),v&&zj({...W}),$j({...W,apply:({elements:le,rects:Ce,availableWidth:De,availableHeight:Ye})=>{const{width:We,height:ut}=Ce.reference,Ze=le.floating.style;Ze.setProperty("--radix-popper-available-width",`${De}px`),Ze.setProperty("--radix-popper-available-height",`${Ye}px`),Ze.setProperty("--radix-popper-anchor-width",`${We}px`),Ze.setProperty("--radix-popper-anchor-height",`${ut}px`)}}),G&&Wj({element:G,padding:x}),Qj({arrowWidth:V,arrowHeight:te}),T&&Vj({strategy:"referenceHidden",...W})]}),[ue,be]=$v(q),re=Na(O);Rr(()=>{ie&&re?.()},[ie,re]);const we=z.arrow?.x,Ie=z.arrow?.y,Oe=z.arrow?.centerOffset!==0,[ye,Y]=A.useState();return Rr(()=>{L&&Y(window.getComputedStyle(L).zIndex)},[L]),s.jsx("div",{ref:de.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:ie?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:s.jsx(Xj,{scope:n,placedSide:ue,onArrowChange:ee,arrowX:we,arrowY:Ie,shouldHideArrow:Oe,children:s.jsx(zt.div,{"data-side":ue,"data-align":be,...k,ref:B,style:{...k.style,animation:ie?void 0:"none"}})})})});Fv.displayName=Pm;var Uv="PopperArrow",Kj={top:"bottom",right:"left",bottom:"top",left:"right"},zv=A.forwardRef(function(e,n){const{__scopePopper:o,...d}=e,u=Yj(Uv,o),g=Kj[u.placedSide];return s.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[g]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:s.jsx(Gj,{...d,ref:n,style:{...d.style,display:"block"}})})});zv.displayName=Uv;function Zj(r){return r!==null}var Qj=r=>({name:"transformOrigin",options:r,fn(e){const{placement:n,rects:o,middlewareData:d}=e,g=d.arrow?.centerOffset!==0,x=g?0:r.arrowWidth,v=g?0:r.arrowHeight,[y,S]=$v(n),E={start:"0%",center:"50%",end:"100%"}[S],T=(d.arrow?.x??0)+x/2,I=(d.arrow?.y??0)+v/2;let O="",k="";return y==="bottom"?(O=g?E:`${T}px`,k=`${-v}px`):y==="top"?(O=g?E:`${T}px`,k=`${o.floating.height+v}px`):y==="right"?(O=`${-v}px`,k=g?E:`${I}px`):y==="left"&&(O=`${o.floating.width+v}px`,k=g?E:`${I}px`),{data:{x:O,y:k}}}});function $v(r){const[e,n="center"]=r.split("-");return[e,n]}var Jj=Mv,eI=Bv,tI=Fv,nI=zv;function rI(r){const e=sI(r),n=A.forwardRef((o,d)=>{const{children:u,...g}=o,x=A.Children.toArray(u),v=x.find(aI);if(v){const y=v.props.children,S=x.map(E=>E===v?A.Children.count(y)>1?A.Children.only(null):A.isValidElement(y)?y.props.children:null:E);return s.jsx(e,{...g,ref:d,children:A.isValidElement(y)?A.cloneElement(y,void 0,S):null})}return s.jsx(e,{...g,ref:d,children:u})});return n.displayName=`${r}.Slot`,n}function sI(r){const e=A.forwardRef((n,o)=>{const{children:d,...u}=n;if(A.isValidElement(d)){const g=lI(d),x=oI(u,d.props);return d.type!==A.Fragment&&(x.ref=o?Cl(o,g):g),A.cloneElement(d,x)}return A.Children.count(d)>1?A.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var iI=Symbol("radix.slottable");function aI(r){return A.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===iI}function oI(r,e){const n={...e};for(const o in e){const d=r[o],u=e[o];/^on[A-Z]/.test(o)?d&&u?n[o]=(...x)=>{const v=u(...x);return d(...x),v}:d&&(n[o]=d):o==="style"?n[o]={...d,...u}:o==="className"&&(n[o]=[d,u].filter(Boolean).join(" "))}return{...r,...n}}function lI(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}function Uu(r){const e=A.useRef({value:r,previous:r});return A.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var Vv=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),cI="VisuallyHidden",dI=A.forwardRef((r,e)=>s.jsx(zt.span,{...r,ref:e,style:{...Vv,...r.style}}));dI.displayName=cI;var uI=[" ","Enter","ArrowUp","ArrowDown"],hI=[" ","Enter"],vo="Select",[zu,$u,fI]=xm(vo),[Il]=_s(vo,[fI,Pv]),Vu=Pv(),[mI,Pa]=Il(vo),[pI,gI]=Il(vo),Wv=r=>{const{__scopeSelect:e,children:n,open:o,defaultOpen:d,onOpenChange:u,value:g,defaultValue:x,onValueChange:v,dir:y,name:S,autoComplete:E,disabled:T,required:I,form:O}=r,k=Vu(e),[P,L]=A.useState(null),[U,B]=A.useState(null),[G,ee]=A.useState(!1),se=Tc(y),[V,te]=ni({prop:o,defaultProp:d??!1,onChange:u,caller:vo}),[ne,ce]=ni({prop:g,defaultProp:x,onChange:v,caller:vo}),oe=A.useRef(null),H=P?O||!!P.closest("form"):!0,[W,de]=A.useState(new Set),X=Array.from(W).map(q=>q.props.value).join(";");return s.jsx(Jj,{...k,children:s.jsxs(mI,{required:I,scope:e,trigger:P,onTriggerChange:L,valueNode:U,onValueNodeChange:B,valueNodeHasChildren:G,onValueNodeHasChildrenChange:ee,contentId:vi(),value:ne,onValueChange:ce,open:V,onOpenChange:te,dir:se,triggerPointerDownPosRef:oe,disabled:T,children:[s.jsx(zu.Provider,{scope:e,children:s.jsx(pI,{scope:r.__scopeSelect,onNativeOptionAdd:A.useCallback(q=>{de(ie=>new Set(ie).add(q))},[]),onNativeOptionRemove:A.useCallback(q=>{de(ie=>{const z=new Set(ie);return z.delete(q),z})},[]),children:n})}),H?s.jsxs(h2,{"aria-hidden":!0,required:I,tabIndex:-1,name:S,autoComplete:E,value:ne,onChange:q=>ce(q.target.value),disabled:T,form:O,children:[ne===void 0?s.jsx("option",{value:""}):null,Array.from(W)]},X):null]})})};Wv.displayName=vo;var Hv="SelectTrigger",Gv=A.forwardRef((r,e)=>{const{__scopeSelect:n,disabled:o=!1,...d}=r,u=Vu(n),g=Pa(Hv,n),x=g.disabled||o,v=ln(e,g.onTriggerChange),y=$u(n),S=A.useRef("touch"),[E,T,I]=m2(k=>{const P=y().filter(B=>!B.disabled),L=P.find(B=>B.value===g.value),U=p2(P,k,L);U!==void 0&&g.onValueChange(U.value)}),O=k=>{x||(g.onOpenChange(!0),I()),k&&(g.triggerPointerDownPosRef.current={x:Math.round(k.pageX),y:Math.round(k.pageY)})};return s.jsx(eI,{asChild:!0,...u,children:s.jsx(zt.button,{type:"button",role:"combobox","aria-controls":g.contentId,"aria-expanded":g.open,"aria-required":g.required,"aria-autocomplete":"none",dir:g.dir,"data-state":g.open?"open":"closed",disabled:x,"data-disabled":x?"":void 0,"data-placeholder":f2(g.value)?"":void 0,...d,ref:v,onClick:Ht(d.onClick,k=>{k.currentTarget.focus(),S.current!=="mouse"&&O(k)}),onPointerDown:Ht(d.onPointerDown,k=>{S.current=k.pointerType;const P=k.target;P.hasPointerCapture(k.pointerId)&&P.releasePointerCapture(k.pointerId),k.button===0&&k.ctrlKey===!1&&k.pointerType==="mouse"&&(O(k),k.preventDefault())}),onKeyDown:Ht(d.onKeyDown,k=>{const P=E.current!=="";!(k.ctrlKey||k.altKey||k.metaKey)&&k.key.length===1&&T(k.key),!(P&&k.key===" ")&&uI.includes(k.key)&&(O(),k.preventDefault())})})})});Gv.displayName=Hv;var qv="SelectValue",Xv=A.forwardRef((r,e)=>{const{__scopeSelect:n,className:o,style:d,children:u,placeholder:g="",...x}=r,v=Pa(qv,n),{onValueNodeHasChildrenChange:y}=v,S=u!==void 0,E=ln(e,v.onValueNodeChange);return Rr(()=>{y(S)},[y,S]),s.jsx(zt.span,{...x,ref:E,style:{pointerEvents:"none"},children:f2(v.value)?s.jsx(s.Fragment,{children:g}):u})});Xv.displayName=qv;var xI="SelectIcon",Yv=A.forwardRef((r,e)=>{const{__scopeSelect:n,children:o,...d}=r;return s.jsx(zt.span,{"aria-hidden":!0,...d,ref:e,children:o||""})});Yv.displayName=xI;var wI="SelectPortal",Kv=r=>s.jsx(bm,{asChild:!0,...r});Kv.displayName=wI;var bo="SelectContent",Zv=A.forwardRef((r,e)=>{const n=Pa(bo,r.__scopeSelect),[o,d]=A.useState();if(Rr(()=>{d(new DocumentFragment)},[]),!n.open){const u=o;return u?_l.createPortal(s.jsx(Qv,{scope:r.__scopeSelect,children:s.jsx(zu.Slot,{scope:r.__scopeSelect,children:s.jsx("div",{children:r.children})})}),u):null}return s.jsx(Jv,{...r,ref:e})});Zv.displayName=bo;var Ks=10,[Qv,Da]=Il(bo),yI="SelectContentImpl",vI=rI("SelectContent.RemoveScroll"),Jv=A.forwardRef((r,e)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:d,onEscapeKeyDown:u,onPointerDownOutside:g,side:x,sideOffset:v,align:y,alignOffset:S,arrowPadding:E,collisionBoundary:T,collisionPadding:I,sticky:O,hideWhenDetached:k,avoidCollisions:P,...L}=r,U=Pa(bo,n),[B,G]=A.useState(null),[ee,se]=A.useState(null),V=ln(e,le=>G(le)),[te,ne]=A.useState(null),[ce,oe]=A.useState(null),H=$u(n),[W,de]=A.useState(!1),X=A.useRef(!1);A.useEffect(()=>{if(B)return Xy(B)},[B]),Uy();const q=A.useCallback(le=>{const[Ce,...De]=H().map(ut=>ut.ref.current),[Ye]=De.slice(-1),We=document.activeElement;for(const ut of le)if(ut===We||(ut?.scrollIntoView({block:"nearest"}),ut===Ce&&ee&&(ee.scrollTop=0),ut===Ye&&ee&&(ee.scrollTop=ee.scrollHeight),ut?.focus(),document.activeElement!==We))return},[H,ee]),ie=A.useCallback(()=>q([te,B]),[q,te,B]);A.useEffect(()=>{W&&ie()},[W,ie]);const{onOpenChange:z,triggerPointerDownPosRef:ue}=U;A.useEffect(()=>{if(B){let le={x:0,y:0};const Ce=Ye=>{le={x:Math.abs(Math.round(Ye.pageX)-(ue.current?.x??0)),y:Math.abs(Math.round(Ye.pageY)-(ue.current?.y??0))}},De=Ye=>{le.x<=10&&le.y<=10?Ye.preventDefault():B.contains(Ye.target)||z(!1),document.removeEventListener("pointermove",Ce),ue.current=null};return ue.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",De,{capture:!0})}}},[B,z,ue]),A.useEffect(()=>{const le=()=>z(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[z]);const[be,re]=m2(le=>{const Ce=H().filter(We=>!We.disabled),De=Ce.find(We=>We.ref.current===document.activeElement),Ye=p2(Ce,le,De);Ye&&setTimeout(()=>Ye.ref.current.focus())}),we=A.useCallback((le,Ce,De)=>{const Ye=!X.current&&!De;(U.value!==void 0&&U.value===Ce||Ye)&&(ne(le),Ye&&(X.current=!0))},[U.value]),Ie=A.useCallback(()=>B?.focus(),[B]),Oe=A.useCallback((le,Ce,De)=>{const Ye=!X.current&&!De;(U.value!==void 0&&U.value===Ce||Ye)&&oe(le)},[U.value]),ye=o==="popper"?$0:e2,Y=ye===$0?{side:x,sideOffset:v,align:y,alignOffset:S,arrowPadding:E,collisionBoundary:T,collisionPadding:I,sticky:O,hideWhenDetached:k,avoidCollisions:P}:{};return s.jsx(Qv,{scope:n,content:B,viewport:ee,onViewportChange:se,itemRefCallback:we,selectedItem:te,onItemLeave:Ie,itemTextRefCallback:Oe,focusSelectedItem:ie,selectedItemText:ce,position:o,isPositioned:W,searchRef:be,children:s.jsx(Cm,{as:vI,allowPinchZoom:!0,children:s.jsx(vm,{asChild:!0,trapped:U.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:Ht(d,le=>{U.trigger?.focus({preventScroll:!0}),le.preventDefault()}),children:s.jsx(ym,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:g,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>U.onOpenChange(!1),children:s.jsx(ye,{role:"listbox",id:U.contentId,"data-state":U.open?"open":"closed",dir:U.dir,onContextMenu:le=>le.preventDefault(),...L,...Y,onPlaced:()=>de(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...L.style},onKeyDown:Ht(L.onKeyDown,le=>{const Ce=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Ce&&le.key.length===1&&re(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let Ye=H().filter(We=>!We.disabled).map(We=>We.ref.current);if(["ArrowUp","End"].includes(le.key)&&(Ye=Ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const We=le.target,ut=Ye.indexOf(We);Ye=Ye.slice(ut+1)}setTimeout(()=>q(Ye)),le.preventDefault()}})})})})})})});Jv.displayName=yI;var bI="SelectItemAlignedPosition",e2=A.forwardRef((r,e)=>{const{__scopeSelect:n,onPlaced:o,...d}=r,u=Pa(bo,n),g=Da(bo,n),[x,v]=A.useState(null),[y,S]=A.useState(null),E=ln(e,V=>S(V)),T=$u(n),I=A.useRef(!1),O=A.useRef(!0),{viewport:k,selectedItem:P,selectedItemText:L,focusSelectedItem:U}=g,B=A.useCallback(()=>{if(u.trigger&&u.valueNode&&x&&y&&k&&P&&L){const V=u.trigger.getBoundingClientRect(),te=y.getBoundingClientRect(),ne=u.valueNode.getBoundingClientRect(),ce=L.getBoundingClientRect();if(u.dir!=="rtl"){const We=ce.left-te.left,ut=ne.left-We,Ze=V.left-ut,Ot=V.width+Ze,Me=Math.max(Ot,te.width),at=window.innerWidth-Ks,Z=K1(ut,[Ks,Math.max(Ks,at-Me)]);x.style.minWidth=Ot+"px",x.style.left=Z+"px"}else{const We=te.right-ce.right,ut=window.innerWidth-ne.right-We,Ze=window.innerWidth-V.right-ut,Ot=V.width+Ze,Me=Math.max(Ot,te.width),at=window.innerWidth-Ks,Z=K1(ut,[Ks,Math.max(Ks,at-Me)]);x.style.minWidth=Ot+"px",x.style.right=Z+"px"}const oe=T(),H=window.innerHeight-Ks*2,W=k.scrollHeight,de=window.getComputedStyle(y),X=parseInt(de.borderTopWidth,10),q=parseInt(de.paddingTop,10),ie=parseInt(de.borderBottomWidth,10),z=parseInt(de.paddingBottom,10),ue=X+q+W+z+ie,be=Math.min(P.offsetHeight*5,ue),re=window.getComputedStyle(k),we=parseInt(re.paddingTop,10),Ie=parseInt(re.paddingBottom,10),Oe=V.top+V.height/2-Ks,ye=H-Oe,Y=P.offsetHeight/2,le=P.offsetTop+Y,Ce=X+q+le,De=ue-Ce;if(Ce<=Oe){const We=oe.length>0&&P===oe[oe.length-1].ref.current;x.style.bottom="0px";const ut=y.clientHeight-k.offsetTop-k.offsetHeight,Ze=Math.max(ye,Y+(We?Ie:0)+ut+ie),Ot=Ce+Ze;x.style.height=Ot+"px"}else{const We=oe.length>0&&P===oe[0].ref.current;x.style.top="0px";const Ze=Math.max(Oe,X+k.offsetTop+(We?we:0)+Y)+De;x.style.height=Ze+"px",k.scrollTop=Ce-Oe+k.offsetTop}x.style.margin=`${Ks}px 0`,x.style.minHeight=be+"px",x.style.maxHeight=H+"px",o?.(),requestAnimationFrame(()=>I.current=!0)}},[T,u.trigger,u.valueNode,x,y,k,P,L,u.dir,o]);Rr(()=>B(),[B]);const[G,ee]=A.useState();Rr(()=>{y&&ee(window.getComputedStyle(y).zIndex)},[y]);const se=A.useCallback(V=>{V&&O.current===!0&&(B(),U?.(),O.current=!1)},[B,U]);return s.jsx(EI,{scope:n,contentWrapper:x,shouldExpandOnScrollRef:I,onScrollButtonChange:se,children:s.jsx("div",{ref:v,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:G},children:s.jsx(zt.div,{...d,ref:E,style:{boxSizing:"border-box",maxHeight:"100%",...d.style}})})})});e2.displayName=bI;var CI="SelectPopperPosition",$0=A.forwardRef((r,e)=>{const{__scopeSelect:n,align:o="start",collisionPadding:d=Ks,...u}=r,g=Vu(n);return s.jsx(tI,{...g,...u,ref:e,align:o,collisionPadding:d,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$0.displayName=CI;var[EI,Dm]=Il(bo,{}),V0="SelectViewport",t2=A.forwardRef((r,e)=>{const{__scopeSelect:n,nonce:o,...d}=r,u=Da(V0,n),g=Dm(V0,n),x=ln(e,u.onViewportChange),v=A.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),s.jsx(zu.Slot,{scope:n,children:s.jsx(zt.div,{"data-radix-select-viewport":"",role:"presentation",...d,ref:x,style:{position:"relative",flex:1,overflow:"hidden auto",...d.style},onScroll:Ht(d.onScroll,y=>{const S=y.currentTarget,{contentWrapper:E,shouldExpandOnScrollRef:T}=g;if(T?.current&&E){const I=Math.abs(v.current-S.scrollTop);if(I>0){const O=window.innerHeight-Ks*2,k=parseFloat(E.style.minHeight),P=parseFloat(E.style.height),L=Math.max(k,P);if(L<O){const U=L+I,B=Math.min(O,U),G=U-B;E.style.height=B+"px",E.style.bottom==="0px"&&(S.scrollTop=G>0?G:0,E.style.justifyContent="flex-end")}}}v.current=S.scrollTop})})})]})});t2.displayName=V0;var n2="SelectGroup",[SI,_I]=Il(n2),NI=A.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r,d=vi();return s.jsx(SI,{scope:n,id:d,children:s.jsx(zt.div,{role:"group","aria-labelledby":d,...o,ref:e})})});NI.displayName=n2;var r2="SelectLabel",AI=A.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r,d=_I(r2,n);return s.jsx(zt.div,{id:d.id,...o,ref:e})});AI.displayName=r2;var Cu="SelectItem",[jI,s2]=Il(Cu),i2=A.forwardRef((r,e)=>{const{__scopeSelect:n,value:o,disabled:d=!1,textValue:u,...g}=r,x=Pa(Cu,n),v=Da(Cu,n),y=x.value===o,[S,E]=A.useState(u??""),[T,I]=A.useState(!1),O=ln(e,U=>v.itemRefCallback?.(U,o,d)),k=vi(),P=A.useRef("touch"),L=()=>{d||(x.onValueChange(o),x.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(jI,{scope:n,value:o,disabled:d,textId:k,isSelected:y,onItemTextChange:A.useCallback(U=>{E(B=>B||(U?.textContent??"").trim())},[]),children:s.jsx(zu.ItemSlot,{scope:n,value:o,disabled:d,textValue:S,children:s.jsx(zt.div,{role:"option","aria-labelledby":k,"data-highlighted":T?"":void 0,"aria-selected":y&&T,"data-state":y?"checked":"unchecked","aria-disabled":d||void 0,"data-disabled":d?"":void 0,tabIndex:d?void 0:-1,...g,ref:O,onFocus:Ht(g.onFocus,()=>I(!0)),onBlur:Ht(g.onBlur,()=>I(!1)),onClick:Ht(g.onClick,()=>{P.current!=="mouse"&&L()}),onPointerUp:Ht(g.onPointerUp,()=>{P.current==="mouse"&&L()}),onPointerDown:Ht(g.onPointerDown,U=>{P.current=U.pointerType}),onPointerMove:Ht(g.onPointerMove,U=>{P.current=U.pointerType,d?v.onItemLeave?.():P.current==="mouse"&&U.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ht(g.onPointerLeave,U=>{U.currentTarget===document.activeElement&&v.onItemLeave?.()}),onKeyDown:Ht(g.onKeyDown,U=>{v.searchRef?.current!==""&&U.key===" "||(hI.includes(U.key)&&L(),U.key===" "&&U.preventDefault())})})})})});i2.displayName=Cu;var mc="SelectItemText",a2=A.forwardRef((r,e)=>{const{__scopeSelect:n,className:o,style:d,...u}=r,g=Pa(mc,n),x=Da(mc,n),v=s2(mc,n),y=gI(mc,n),[S,E]=A.useState(null),T=ln(e,L=>E(L),v.onItemTextChange,L=>x.itemTextRefCallback?.(L,v.value,v.disabled)),I=S?.textContent,O=A.useMemo(()=>s.jsx("option",{value:v.value,disabled:v.disabled,children:I},v.value),[v.disabled,v.value,I]),{onNativeOptionAdd:k,onNativeOptionRemove:P}=y;return Rr(()=>(k(O),()=>P(O)),[k,P,O]),s.jsxs(s.Fragment,{children:[s.jsx(zt.span,{id:v.textId,...u,ref:T}),v.isSelected&&g.valueNode&&!g.valueNodeHasChildren?_l.createPortal(u.children,g.valueNode):null]})});a2.displayName=mc;var o2="SelectItemIndicator",l2=A.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r;return s2(o2,n).isSelected?s.jsx(zt.span,{"aria-hidden":!0,...o,ref:e}):null});l2.displayName=o2;var W0="SelectScrollUpButton",c2=A.forwardRef((r,e)=>{const n=Da(W0,r.__scopeSelect),o=Dm(W0,r.__scopeSelect),[d,u]=A.useState(!1),g=ln(e,o.onScrollButtonChange);return Rr(()=>{if(n.viewport&&n.isPositioned){let x=function(){const y=v.scrollTop>0;u(y)};const v=n.viewport;return x(),v.addEventListener("scroll",x),()=>v.removeEventListener("scroll",x)}},[n.viewport,n.isPositioned]),d?s.jsx(u2,{...r,ref:g,onAutoScroll:()=>{const{viewport:x,selectedItem:v}=n;x&&v&&(x.scrollTop=x.scrollTop-v.offsetHeight)}}):null});c2.displayName=W0;var H0="SelectScrollDownButton",d2=A.forwardRef((r,e)=>{const n=Da(H0,r.__scopeSelect),o=Dm(H0,r.__scopeSelect),[d,u]=A.useState(!1),g=ln(e,o.onScrollButtonChange);return Rr(()=>{if(n.viewport&&n.isPositioned){let x=function(){const y=v.scrollHeight-v.clientHeight,S=Math.ceil(v.scrollTop)<y;u(S)};const v=n.viewport;return x(),v.addEventListener("scroll",x),()=>v.removeEventListener("scroll",x)}},[n.viewport,n.isPositioned]),d?s.jsx(u2,{...r,ref:g,onAutoScroll:()=>{const{viewport:x,selectedItem:v}=n;x&&v&&(x.scrollTop=x.scrollTop+v.offsetHeight)}}):null});d2.displayName=H0;var u2=A.forwardRef((r,e)=>{const{__scopeSelect:n,onAutoScroll:o,...d}=r,u=Da("SelectScrollButton",n),g=A.useRef(null),x=$u(n),v=A.useCallback(()=>{g.current!==null&&(window.clearInterval(g.current),g.current=null)},[]);return A.useEffect(()=>()=>v(),[v]),Rr(()=>{x().find(S=>S.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[x]),s.jsx(zt.div,{"aria-hidden":!0,...d,ref:e,style:{flexShrink:0,...d.style},onPointerDown:Ht(d.onPointerDown,()=>{g.current===null&&(g.current=window.setInterval(o,50))}),onPointerMove:Ht(d.onPointerMove,()=>{u.onItemLeave?.(),g.current===null&&(g.current=window.setInterval(o,50))}),onPointerLeave:Ht(d.onPointerLeave,()=>{v()})})}),II="SelectSeparator",TI=A.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r;return s.jsx(zt.div,{"aria-hidden":!0,...o,ref:e})});TI.displayName=II;var G0="SelectArrow",RI=A.forwardRef((r,e)=>{const{__scopeSelect:n,...o}=r,d=Vu(n),u=Pa(G0,n),g=Da(G0,n);return u.open&&g.position==="popper"?s.jsx(nI,{...d,...o,ref:e}):null});RI.displayName=G0;var kI="SelectBubbleInput",h2=A.forwardRef(({__scopeSelect:r,value:e,...n},o)=>{const d=A.useRef(null),u=ln(o,d),g=Uu(e);return A.useEffect(()=>{const x=d.current;if(!x)return;const v=window.HTMLSelectElement.prototype,S=Object.getOwnPropertyDescriptor(v,"value").set;if(g!==e&&S){const E=new Event("change",{bubbles:!0});S.call(x,e),x.dispatchEvent(E)}},[g,e]),s.jsx(zt.select,{...n,style:{...Vv,...n.style},ref:u,defaultValue:e})});h2.displayName=kI;function f2(r){return r===""||r===void 0}function m2(r){const e=Na(r),n=A.useRef(""),o=A.useRef(0),d=A.useCallback(g=>{const x=n.current+g;e(x),(function v(y){n.current=y,window.clearTimeout(o.current),y!==""&&(o.current=window.setTimeout(()=>v(""),1e3))})(x)},[e]),u=A.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,d,u]}function p2(r,e,n){const d=e.length>1&&Array.from(e).every(y=>y===e[0])?e[0]:e,u=n?r.indexOf(n):-1;let g=OI(r,Math.max(u,0));d.length===1&&(g=g.filter(y=>y!==n));const v=g.find(y=>y.textValue.toLowerCase().startsWith(d.toLowerCase()));return v!==n?v:void 0}function OI(r,e){return r.map((n,o)=>r[(e+o)%r.length])}var PI=Wv,DI=Gv,MI=Xv,LI=Yv,BI=Kv,FI=Zv,UI=t2,zI=i2,$I=a2,VI=l2,WI=c2,HI=d2;function Kr({...r}){return s.jsx(PI,{"data-slot":"select",...r})}function Zr({...r}){return s.jsx(MI,{"data-slot":"select-value",...r})}function Qr({className:r,size:e="default",children:n,...o}){return s.jsxs(DI,{"data-slot":"select-trigger","data-size":e,className:Tt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...o,children:[n,s.jsx(LI,{asChild:!0,children:s.jsx(sm,{className:"size-4 opacity-50"})})]})}function ls({className:r,children:e,position:n="popper",...o}){return s.jsx(BI,{children:s.jsxs(FI,{"data-slot":"select-content",className:Tt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...o,children:[s.jsx(GI,{}),s.jsx(UI,{className:Tt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),s.jsx(qI,{})]})})}function Ut({className:r,children:e,...n}){return s.jsxs(zI,{"data-slot":"select-item",className:Tt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...n,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(VI,{children:s.jsx(Cw,{className:"size-4"})})}),s.jsx($I,{children:e})]})}function GI({className:r,...e}){return s.jsx(WI,{"data-slot":"select-scroll-up-button",className:Tt("flex cursor-default items-center justify-center py-1",r),...e,children:s.jsx(KE,{className:"size-4"})})}function qI({className:r,...e}){return s.jsx(HI,{"data-slot":"select-scroll-down-button",className:Tt("flex cursor-default items-center justify-center py-1",r),...e,children:s.jsx(sm,{className:"size-4"})})}var Wu="Checkbox",[XI]=_s(Wu),[YI,Mm]=XI(Wu);function KI(r){const{__scopeCheckbox:e,checked:n,children:o,defaultChecked:d,disabled:u,form:g,name:x,onCheckedChange:v,required:y,value:S="on",internal_do_not_use_render:E}=r,[T,I]=ni({prop:n,defaultProp:d??!1,onChange:v,caller:Wu}),[O,k]=A.useState(null),[P,L]=A.useState(null),U=A.useRef(!1),B=O?!!g||!!O.closest("form"):!0,G={checked:T,disabled:u,setChecked:I,control:O,setControl:k,name:x,form:g,value:S,hasConsumerStoppedPropagationRef:U,required:y,defaultChecked:Sa(d)?!1:d,isFormControl:B,bubbleInput:P,setBubbleInput:L};return s.jsx(YI,{scope:e,...G,children:ZI(E)?E(G):o})}var g2="CheckboxTrigger",x2=A.forwardRef(({__scopeCheckbox:r,onKeyDown:e,onClick:n,...o},d)=>{const{control:u,value:g,disabled:x,checked:v,required:y,setControl:S,setChecked:E,hasConsumerStoppedPropagationRef:T,isFormControl:I,bubbleInput:O}=Mm(g2,r),k=ln(d,S),P=A.useRef(v);return A.useEffect(()=>{const L=u?.form;if(L){const U=()=>E(P.current);return L.addEventListener("reset",U),()=>L.removeEventListener("reset",U)}},[u,E]),s.jsx(zt.button,{type:"button",role:"checkbox","aria-checked":Sa(v)?"mixed":v,"aria-required":y,"data-state":E2(v),"data-disabled":x?"":void 0,disabled:x,value:g,...o,ref:k,onKeyDown:Ht(e,L=>{L.key==="Enter"&&L.preventDefault()}),onClick:Ht(n,L=>{E(U=>Sa(U)?!0:!U),O&&I&&(T.current=L.isPropagationStopped(),T.current||L.stopPropagation())})})});x2.displayName=g2;var w2=A.forwardRef((r,e)=>{const{__scopeCheckbox:n,name:o,checked:d,defaultChecked:u,required:g,disabled:x,value:v,onCheckedChange:y,form:S,...E}=r;return s.jsx(KI,{__scopeCheckbox:n,checked:d,defaultChecked:u,disabled:x,required:g,onCheckedChange:y,name:o,form:S,value:v,internal_do_not_use_render:({isFormControl:T})=>s.jsxs(s.Fragment,{children:[s.jsx(x2,{...E,ref:e,__scopeCheckbox:n}),T&&s.jsx(C2,{__scopeCheckbox:n})]})})});w2.displayName=Wu;var y2="CheckboxIndicator",v2=A.forwardRef((r,e)=>{const{__scopeCheckbox:n,forceMount:o,...d}=r,u=Mm(y2,n);return s.jsx(Oa,{present:o||Sa(u.checked)||u.checked===!0,children:s.jsx(zt.span,{"data-state":E2(u.checked),"data-disabled":u.disabled?"":void 0,...d,ref:e,style:{pointerEvents:"none",...r.style}})})});v2.displayName=y2;var b2="CheckboxBubbleInput",C2=A.forwardRef(({__scopeCheckbox:r,...e},n)=>{const{control:o,hasConsumerStoppedPropagationRef:d,checked:u,defaultChecked:g,required:x,disabled:v,name:y,value:S,form:E,bubbleInput:T,setBubbleInput:I}=Mm(b2,r),O=ln(n,I),k=Uu(u),P=Fu(o);A.useEffect(()=>{const U=T;if(!U)return;const B=window.HTMLInputElement.prototype,ee=Object.getOwnPropertyDescriptor(B,"checked").set,se=!d.current;if(k!==u&&ee){const V=new Event("click",{bubbles:se});U.indeterminate=Sa(u),ee.call(U,Sa(u)?!1:u),U.dispatchEvent(V)}},[T,k,u,d]);const L=A.useRef(Sa(u)?!1:u);return s.jsx(zt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:g??L.current,required:x,disabled:v,name:y,value:S,form:E,...e,tabIndex:-1,ref:O,style:{...e.style,...P,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});C2.displayName=b2;function ZI(r){return typeof r=="function"}function Sa(r){return r==="indeterminate"}function E2(r){return Sa(r)?"indeterminate":r?"checked":"unchecked"}function mo({className:r,...e}){return s.jsx(w2,{"data-slot":"checkbox",className:Tt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:s.jsx(v2,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:s.jsx(Cw,{className:"size-3.5"})})})}var il={},Hf,lx;function QI(){return lx||(lx=1,Hf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Hf}var Gf={},va={},cx;function Co(){if(cx)return va;cx=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return va.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},va.getSymbolTotalCodewords=function(o){return e[o]},va.getBCHDigit=function(n){let o=0;for(;n!==0;)o++,n>>>=1;return o},va.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');r=o},va.isKanjiModeEnabled=function(){return typeof r<"u"},va.toSJIS=function(o){return r(o)},va}var qf={},dx;function Lm(){return dx||(dx=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+n)}}r.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},r.from=function(o,d){if(r.isValid(o))return o;try{return e(o)}catch{return d}}})(qf)),qf}var Xf,ux;function JI(){if(ux)return Xf;ux=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let o=0;o<n;o++)this.putBit((e>>>n-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}},Xf=r,Xf}var Yf,hx;function eT(){if(hx)return Yf;hx=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,n,o,d){const u=e*this.size+n;this.data[u]=o,d&&(this.reservedBit[u]=!0)},r.prototype.get=function(e,n){return this.data[e*this.size+n]},r.prototype.xor=function(e,n,o){this.data[e*this.size+n]^=o},r.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]},Yf=r,Yf}var Kf={},fx;function tT(){return fx||(fx=1,(function(r){const e=Co().getSymbolSize;r.getRowColCoords=function(o){if(o===1)return[];const d=Math.floor(o/7)+2,u=e(o),g=u===145?26:Math.ceil((u-13)/(2*d-2))*2,x=[u-7];for(let v=1;v<d-1;v++)x[v]=x[v-1]-g;return x.push(6),x.reverse()},r.getPositions=function(o){const d=[],u=r.getRowColCoords(o),g=u.length;for(let x=0;x<g;x++)for(let v=0;v<g;v++)x===0&&v===0||x===0&&v===g-1||x===g-1&&v===0||d.push([u[x],u[v]]);return d}})(Kf)),Kf}var Zf={},mx;function nT(){if(mx)return Zf;mx=1;const r=Co().getSymbolSize,e=7;return Zf.getPositions=function(o){const d=r(o);return[[0,0],[d-e,0],[0,d-e]]},Zf}var Qf={},px;function rT(){return px||(px=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(d){return d!=null&&d!==""&&!isNaN(d)&&d>=0&&d<=7},r.from=function(d){return r.isValid(d)?parseInt(d,10):void 0},r.getPenaltyN1=function(d){const u=d.size;let g=0,x=0,v=0,y=null,S=null;for(let E=0;E<u;E++){x=v=0,y=S=null;for(let T=0;T<u;T++){let I=d.get(E,T);I===y?x++:(x>=5&&(g+=e.N1+(x-5)),y=I,x=1),I=d.get(T,E),I===S?v++:(v>=5&&(g+=e.N1+(v-5)),S=I,v=1)}x>=5&&(g+=e.N1+(x-5)),v>=5&&(g+=e.N1+(v-5))}return g},r.getPenaltyN2=function(d){const u=d.size;let g=0;for(let x=0;x<u-1;x++)for(let v=0;v<u-1;v++){const y=d.get(x,v)+d.get(x,v+1)+d.get(x+1,v)+d.get(x+1,v+1);(y===4||y===0)&&g++}return g*e.N2},r.getPenaltyN3=function(d){const u=d.size;let g=0,x=0,v=0;for(let y=0;y<u;y++){x=v=0;for(let S=0;S<u;S++)x=x<<1&2047|d.get(y,S),S>=10&&(x===1488||x===93)&&g++,v=v<<1&2047|d.get(S,y),S>=10&&(v===1488||v===93)&&g++}return g*e.N3},r.getPenaltyN4=function(d){let u=0;const g=d.data.length;for(let v=0;v<g;v++)u+=d.data[v];return Math.abs(Math.ceil(u*100/g/5)-10)*e.N4};function n(o,d,u){switch(o){case r.Patterns.PATTERN000:return(d+u)%2===0;case r.Patterns.PATTERN001:return d%2===0;case r.Patterns.PATTERN010:return u%3===0;case r.Patterns.PATTERN011:return(d+u)%3===0;case r.Patterns.PATTERN100:return(Math.floor(d/2)+Math.floor(u/3))%2===0;case r.Patterns.PATTERN101:return d*u%2+d*u%3===0;case r.Patterns.PATTERN110:return(d*u%2+d*u%3)%2===0;case r.Patterns.PATTERN111:return(d*u%3+(d+u)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}r.applyMask=function(d,u){const g=u.size;for(let x=0;x<g;x++)for(let v=0;v<g;v++)u.isReserved(v,x)||u.xor(v,x,n(d,v,x))},r.getBestMask=function(d,u){const g=Object.keys(r.Patterns).length;let x=0,v=1/0;for(let y=0;y<g;y++){u(y),r.applyMask(y,d);const S=r.getPenaltyN1(d)+r.getPenaltyN2(d)+r.getPenaltyN3(d)+r.getPenaltyN4(d);r.applyMask(y,d),S<v&&(v=S,x=y)}return x}})(Qf)),Qf}var eu={},gx;function S2(){if(gx)return eu;gx=1;const r=Lm(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return eu.getBlocksCount=function(d,u){switch(u){case r.L:return e[(d-1)*4+0];case r.M:return e[(d-1)*4+1];case r.Q:return e[(d-1)*4+2];case r.H:return e[(d-1)*4+3];default:return}},eu.getTotalCodewordsCount=function(d,u){switch(u){case r.L:return n[(d-1)*4+0];case r.M:return n[(d-1)*4+1];case r.Q:return n[(d-1)*4+2];case r.H:return n[(d-1)*4+3];default:return}},eu}var Jf={},uc={},xx;function sT(){if(xx)return uc;xx=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let o=1;for(let d=0;d<255;d++)r[d]=o,e[o]=d,o<<=1,o&256&&(o^=285);for(let d=255;d<512;d++)r[d]=r[d-255]})(),uc.log=function(o){if(o<1)throw new Error("log("+o+")");return e[o]},uc.exp=function(o){return r[o]},uc.mul=function(o,d){return o===0||d===0?0:r[e[o]+e[d]]},uc}var wx;function iT(){return wx||(wx=1,(function(r){const e=sT();r.mul=function(o,d){const u=new Uint8Array(o.length+d.length-1);for(let g=0;g<o.length;g++)for(let x=0;x<d.length;x++)u[g+x]^=e.mul(o[g],d[x]);return u},r.mod=function(o,d){let u=new Uint8Array(o);for(;u.length-d.length>=0;){const g=u[0];for(let v=0;v<d.length;v++)u[v]^=e.mul(d[v],g);let x=0;for(;x<u.length&&u[x]===0;)x++;u=u.slice(x)}return u},r.generateECPolynomial=function(o){let d=new Uint8Array([1]);for(let u=0;u<o;u++)d=r.mul(d,new Uint8Array([1,e.exp(u)]));return d}})(Jf)),Jf}var e0,yx;function aT(){if(yx)return e0;yx=1;const r=iT();function e(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(o){this.degree=o,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const d=new Uint8Array(o.length+this.degree);d.set(o);const u=r.mod(d,this.genPoly),g=this.degree-u.length;if(g>0){const x=new Uint8Array(this.degree);return x.set(u,g),x}return u},e0=e,e0}var t0={},n0={},r0={},vx;function _2(){return vx||(vx=1,r0.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),r0}var pi={},bx;function N2(){if(bx)return pi;bx=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;pi.KANJI=new RegExp(n,"g"),pi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),pi.BYTE=new RegExp(o,"g"),pi.NUMERIC=new RegExp(r,"g"),pi.ALPHANUMERIC=new RegExp(e,"g");const d=new RegExp("^"+n+"$"),u=new RegExp("^"+r+"$"),g=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return pi.testKanji=function(v){return d.test(v)},pi.testNumeric=function(v){return u.test(v)},pi.testAlphanumeric=function(v){return g.test(v)},pi}var Cx;function Eo(){return Cx||(Cx=1,(function(r){const e=_2(),n=N2();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(u,g){if(!u.ccBits)throw new Error("Invalid mode: "+u);if(!e.isValid(g))throw new Error("Invalid version: "+g);return g>=1&&g<10?u.ccBits[0]:g<27?u.ccBits[1]:u.ccBits[2]},r.getBestModeForData=function(u){return n.testNumeric(u)?r.NUMERIC:n.testAlphanumeric(u)?r.ALPHANUMERIC:n.testKanji(u)?r.KANJI:r.BYTE},r.toString=function(u){if(u&&u.id)return u.id;throw new Error("Invalid mode")},r.isValid=function(u){return u&&u.bit&&u.ccBits};function o(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+d)}}r.from=function(u,g){if(r.isValid(u))return u;try{return o(u)}catch{return g}}})(n0)),n0}var Ex;function oT(){return Ex||(Ex=1,(function(r){const e=Co(),n=S2(),o=Lm(),d=Eo(),u=_2(),g=7973,x=e.getBCHDigit(g);function v(T,I,O){for(let k=1;k<=40;k++)if(I<=r.getCapacity(k,O,T))return k}function y(T,I){return d.getCharCountIndicator(T,I)+4}function S(T,I){let O=0;return T.forEach(function(k){const P=y(k.mode,I);O+=P+k.getBitsLength()}),O}function E(T,I){for(let O=1;O<=40;O++)if(S(T,O)<=r.getCapacity(O,I,d.MIXED))return O}r.from=function(I,O){return u.isValid(I)?parseInt(I,10):O},r.getCapacity=function(I,O,k){if(!u.isValid(I))throw new Error("Invalid QR Code version");typeof k>"u"&&(k=d.BYTE);const P=e.getSymbolTotalCodewords(I),L=n.getTotalCodewordsCount(I,O),U=(P-L)*8;if(k===d.MIXED)return U;const B=U-y(k,I);switch(k){case d.NUMERIC:return Math.floor(B/10*3);case d.ALPHANUMERIC:return Math.floor(B/11*2);case d.KANJI:return Math.floor(B/13);case d.BYTE:default:return Math.floor(B/8)}},r.getBestVersionForData=function(I,O){let k;const P=o.from(O,o.M);if(Array.isArray(I)){if(I.length>1)return E(I,P);if(I.length===0)return 1;k=I[0]}else k=I;return v(k.mode,k.getLength(),P)},r.getEncodedBits=function(I){if(!u.isValid(I)||I<7)throw new Error("Invalid QR Code version");let O=I<<12;for(;e.getBCHDigit(O)-x>=0;)O^=g<<e.getBCHDigit(O)-x;return I<<12|O}})(t0)),t0}var s0={},Sx;function lT(){if(Sx)return s0;Sx=1;const r=Co(),e=1335,n=21522,o=r.getBCHDigit(e);return s0.getEncodedBits=function(u,g){const x=u.bit<<3|g;let v=x<<10;for(;r.getBCHDigit(v)-o>=0;)v^=e<<r.getBCHDigit(v)-o;return(x<<10|v)^n},s0}var i0={},a0,_x;function cT(){if(_x)return a0;_x=1;const r=Eo();function e(n){this.mode=r.NUMERIC,this.data=n.toString()}return e.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(o){let d,u,g;for(d=0;d+3<=this.data.length;d+=3)u=this.data.substr(d,3),g=parseInt(u,10),o.put(g,10);const x=this.data.length-d;x>0&&(u=this.data.substr(d),g=parseInt(u,10),o.put(g,x*3+1))},a0=e,a0}var o0,Nx;function dT(){if(Nx)return o0;Nx=1;const r=Eo(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(o){this.mode=r.ALPHANUMERIC,this.data=o}return n.getBitsLength=function(d){return 11*Math.floor(d/2)+6*(d%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(d){let u;for(u=0;u+2<=this.data.length;u+=2){let g=e.indexOf(this.data[u])*45;g+=e.indexOf(this.data[u+1]),d.put(g,11)}this.data.length%2&&d.put(e.indexOf(this.data[u]),6)},o0=n,o0}var l0,Ax;function uT(){if(Ax)return l0;Ax=1;const r=Eo();function e(n){this.mode=r.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return e.getBitsLength=function(o){return o*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){for(let o=0,d=this.data.length;o<d;o++)n.put(this.data[o],8)},l0=e,l0}var c0,jx;function hT(){if(jx)return c0;jx=1;const r=Eo(),e=Co();function n(o){this.mode=r.KANJI,this.data=o}return n.getBitsLength=function(d){return d*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(o){let d;for(d=0;d<this.data.length;d++){let u=e.toSJIS(this.data[d]);if(u>=33088&&u<=40956)u-=33088;else if(u>=57408&&u<=60351)u-=49472;else throw new Error("Invalid SJIS character: "+this.data[d]+`
Make sure your charset is UTF-8`);u=(u>>>8&255)*192+(u&255),o.put(u,13)}},c0=n,c0}var d0={exports:{}},Ix;function fT(){return Ix||(Ix=1,(function(r){var e={single_source_shortest_paths:function(n,o,d){var u={},g={};g[o]=0;var x=e.PriorityQueue.make();x.push(o,0);for(var v,y,S,E,T,I,O,k,P;!x.empty();){v=x.pop(),y=v.value,E=v.cost,T=n[y]||{};for(S in T)T.hasOwnProperty(S)&&(I=T[S],O=E+I,k=g[S],P=typeof g[S]>"u",(P||k>O)&&(g[S]=O,x.push(S,O),u[S]=y))}if(typeof d<"u"&&typeof g[d]>"u"){var L=["Could not find a path from ",o," to ",d,"."].join("");throw new Error(L)}return u},extract_shortest_path_from_predecessor_list:function(n,o){for(var d=[],u=o;u;)d.push(u),n[u],u=n[u];return d.reverse(),d},find_path:function(n,o,d){var u=e.single_source_shortest_paths(n,o,d);return e.extract_shortest_path_from_predecessor_list(u,d)},PriorityQueue:{make:function(n){var o=e.PriorityQueue,d={},u;n=n||{};for(u in o)o.hasOwnProperty(u)&&(d[u]=o[u]);return d.queue=[],d.sorter=n.sorter||o.default_sorter,d},default_sorter:function(n,o){return n.cost-o.cost},push:function(n,o){var d={value:n,cost:o};this.queue.push(d),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(d0)),d0.exports}var Tx;function mT(){return Tx||(Tx=1,(function(r){const e=Eo(),n=cT(),o=dT(),d=uT(),u=hT(),g=N2(),x=Co(),v=fT();function y(L){return unescape(encodeURIComponent(L)).length}function S(L,U,B){const G=[];let ee;for(;(ee=L.exec(B))!==null;)G.push({data:ee[0],index:ee.index,mode:U,length:ee[0].length});return G}function E(L){const U=S(g.NUMERIC,e.NUMERIC,L),B=S(g.ALPHANUMERIC,e.ALPHANUMERIC,L);let G,ee;return x.isKanjiModeEnabled()?(G=S(g.BYTE,e.BYTE,L),ee=S(g.KANJI,e.KANJI,L)):(G=S(g.BYTE_KANJI,e.BYTE,L),ee=[]),U.concat(B,G,ee).sort(function(V,te){return V.index-te.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function T(L,U){switch(U){case e.NUMERIC:return n.getBitsLength(L);case e.ALPHANUMERIC:return o.getBitsLength(L);case e.KANJI:return u.getBitsLength(L);case e.BYTE:return d.getBitsLength(L)}}function I(L){return L.reduce(function(U,B){const G=U.length-1>=0?U[U.length-1]:null;return G&&G.mode===B.mode?(U[U.length-1].data+=B.data,U):(U.push(B),U)},[])}function O(L){const U=[];for(let B=0;B<L.length;B++){const G=L[B];switch(G.mode){case e.NUMERIC:U.push([G,{data:G.data,mode:e.ALPHANUMERIC,length:G.length},{data:G.data,mode:e.BYTE,length:G.length}]);break;case e.ALPHANUMERIC:U.push([G,{data:G.data,mode:e.BYTE,length:G.length}]);break;case e.KANJI:U.push([G,{data:G.data,mode:e.BYTE,length:y(G.data)}]);break;case e.BYTE:U.push([{data:G.data,mode:e.BYTE,length:y(G.data)}])}}return U}function k(L,U){const B={},G={start:{}};let ee=["start"];for(let se=0;se<L.length;se++){const V=L[se],te=[];for(let ne=0;ne<V.length;ne++){const ce=V[ne],oe=""+se+ne;te.push(oe),B[oe]={node:ce,lastCount:0},G[oe]={};for(let H=0;H<ee.length;H++){const W=ee[H];B[W]&&B[W].node.mode===ce.mode?(G[W][oe]=T(B[W].lastCount+ce.length,ce.mode)-T(B[W].lastCount,ce.mode),B[W].lastCount+=ce.length):(B[W]&&(B[W].lastCount=ce.length),G[W][oe]=T(ce.length,ce.mode)+4+e.getCharCountIndicator(ce.mode,U))}}ee=te}for(let se=0;se<ee.length;se++)G[ee[se]].end=0;return{map:G,table:B}}function P(L,U){let B;const G=e.getBestModeForData(L);if(B=e.from(U,G),B!==e.BYTE&&B.bit<G.bit)throw new Error('"'+L+'" cannot be encoded with mode '+e.toString(B)+`.
 Suggested mode is: `+e.toString(G));switch(B===e.KANJI&&!x.isKanjiModeEnabled()&&(B=e.BYTE),B){case e.NUMERIC:return new n(L);case e.ALPHANUMERIC:return new o(L);case e.KANJI:return new u(L);case e.BYTE:return new d(L)}}r.fromArray=function(U){return U.reduce(function(B,G){return typeof G=="string"?B.push(P(G,null)):G.data&&B.push(P(G.data,G.mode)),B},[])},r.fromString=function(U,B){const G=E(U,x.isKanjiModeEnabled()),ee=O(G),se=k(ee,B),V=v.find_path(se.map,"start","end"),te=[];for(let ne=1;ne<V.length-1;ne++)te.push(se.table[V[ne]].node);return r.fromArray(I(te))},r.rawSplit=function(U){return r.fromArray(E(U,x.isKanjiModeEnabled()))}})(i0)),i0}var Rx;function pT(){if(Rx)return Gf;Rx=1;const r=Co(),e=Lm(),n=JI(),o=eT(),d=tT(),u=nT(),g=rT(),x=S2(),v=aT(),y=oT(),S=lT(),E=Eo(),T=mT();function I(se,V){const te=se.size,ne=u.getPositions(V);for(let ce=0;ce<ne.length;ce++){const oe=ne[ce][0],H=ne[ce][1];for(let W=-1;W<=7;W++)if(!(oe+W<=-1||te<=oe+W))for(let de=-1;de<=7;de++)H+de<=-1||te<=H+de||(W>=0&&W<=6&&(de===0||de===6)||de>=0&&de<=6&&(W===0||W===6)||W>=2&&W<=4&&de>=2&&de<=4?se.set(oe+W,H+de,!0,!0):se.set(oe+W,H+de,!1,!0))}}function O(se){const V=se.size;for(let te=8;te<V-8;te++){const ne=te%2===0;se.set(te,6,ne,!0),se.set(6,te,ne,!0)}}function k(se,V){const te=d.getPositions(V);for(let ne=0;ne<te.length;ne++){const ce=te[ne][0],oe=te[ne][1];for(let H=-2;H<=2;H++)for(let W=-2;W<=2;W++)H===-2||H===2||W===-2||W===2||H===0&&W===0?se.set(ce+H,oe+W,!0,!0):se.set(ce+H,oe+W,!1,!0)}}function P(se,V){const te=se.size,ne=y.getEncodedBits(V);let ce,oe,H;for(let W=0;W<18;W++)ce=Math.floor(W/3),oe=W%3+te-8-3,H=(ne>>W&1)===1,se.set(ce,oe,H,!0),se.set(oe,ce,H,!0)}function L(se,V,te){const ne=se.size,ce=S.getEncodedBits(V,te);let oe,H;for(oe=0;oe<15;oe++)H=(ce>>oe&1)===1,oe<6?se.set(oe,8,H,!0):oe<8?se.set(oe+1,8,H,!0):se.set(ne-15+oe,8,H,!0),oe<8?se.set(8,ne-oe-1,H,!0):oe<9?se.set(8,15-oe-1+1,H,!0):se.set(8,15-oe-1,H,!0);se.set(ne-8,8,1,!0)}function U(se,V){const te=se.size;let ne=-1,ce=te-1,oe=7,H=0;for(let W=te-1;W>0;W-=2)for(W===6&&W--;;){for(let de=0;de<2;de++)if(!se.isReserved(ce,W-de)){let X=!1;H<V.length&&(X=(V[H]>>>oe&1)===1),se.set(ce,W-de,X),oe--,oe===-1&&(H++,oe=7)}if(ce+=ne,ce<0||te<=ce){ce-=ne,ne=-ne;break}}}function B(se,V,te){const ne=new n;te.forEach(function(de){ne.put(de.mode.bit,4),ne.put(de.getLength(),E.getCharCountIndicator(de.mode,se)),de.write(ne)});const ce=r.getSymbolTotalCodewords(se),oe=x.getTotalCodewordsCount(se,V),H=(ce-oe)*8;for(ne.getLengthInBits()+4<=H&&ne.put(0,4);ne.getLengthInBits()%8!==0;)ne.putBit(0);const W=(H-ne.getLengthInBits())/8;for(let de=0;de<W;de++)ne.put(de%2?17:236,8);return G(ne,se,V)}function G(se,V,te){const ne=r.getSymbolTotalCodewords(V),ce=x.getTotalCodewordsCount(V,te),oe=ne-ce,H=x.getBlocksCount(V,te),W=ne%H,de=H-W,X=Math.floor(ne/H),q=Math.floor(oe/H),ie=q+1,z=X-q,ue=new v(z);let be=0;const re=new Array(H),we=new Array(H);let Ie=0;const Oe=new Uint8Array(se.buffer);for(let De=0;De<H;De++){const Ye=De<de?q:ie;re[De]=Oe.slice(be,be+Ye),we[De]=ue.encode(re[De]),be+=Ye,Ie=Math.max(Ie,Ye)}const ye=new Uint8Array(ne);let Y=0,le,Ce;for(le=0;le<Ie;le++)for(Ce=0;Ce<H;Ce++)le<re[Ce].length&&(ye[Y++]=re[Ce][le]);for(le=0;le<z;le++)for(Ce=0;Ce<H;Ce++)ye[Y++]=we[Ce][le];return ye}function ee(se,V,te,ne){let ce;if(Array.isArray(se))ce=T.fromArray(se);else if(typeof se=="string"){let X=V;if(!X){const q=T.rawSplit(se);X=y.getBestVersionForData(q,te)}ce=T.fromString(se,X||40)}else throw new Error("Invalid data");const oe=y.getBestVersionForData(ce,te);if(!oe)throw new Error("The amount of data is too big to be stored in a QR Code");if(!V)V=oe;else if(V<oe)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+oe+`.
`);const H=B(V,te,ce),W=r.getSymbolSize(V),de=new o(W);return I(de,V),O(de),k(de,V),L(de,te,0),V>=7&&P(de,V),U(de,H),isNaN(ne)&&(ne=g.getBestMask(de,L.bind(null,de,te))),g.applyMask(ne,de),L(de,te,ne),{modules:de,version:V,errorCorrectionLevel:te,maskPattern:ne,segments:ce}}return Gf.create=function(V,te){if(typeof V>"u"||V==="")throw new Error("No input text");let ne=e.M,ce,oe;return typeof te<"u"&&(ne=e.from(te.errorCorrectionLevel,e.M),ce=y.from(te.version),oe=g.from(te.maskPattern),te.toSJISFunc&&r.setToSJISFunction(te.toSJISFunc)),ee(V,ce,ne,oe)},Gf}var u0={},h0={},kx;function A2(){return kx||(kx=1,(function(r){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let o=n.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+n);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(u){return[u,u]}))),o.length===6&&o.push("F","F");const d=parseInt(o.join(""),16);return{r:d>>24&255,g:d>>16&255,b:d>>8&255,a:d&255,hex:"#"+o.slice(0,6).join("")}}r.getOptions=function(o){o||(o={}),o.color||(o.color={});const d=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,u=o.width&&o.width>=21?o.width:void 0,g=o.scale||4;return{width:u,scale:u?4:g,margin:d,color:{dark:e(o.color.dark||"#000000ff"),light:e(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},r.getScale=function(o,d){return d.width&&d.width>=o+d.margin*2?d.width/(o+d.margin*2):d.scale},r.getImageWidth=function(o,d){const u=r.getScale(o,d);return Math.floor((o+d.margin*2)*u)},r.qrToImageData=function(o,d,u){const g=d.modules.size,x=d.modules.data,v=r.getScale(g,u),y=Math.floor((g+u.margin*2)*v),S=u.margin*v,E=[u.color.light,u.color.dark];for(let T=0;T<y;T++)for(let I=0;I<y;I++){let O=(T*y+I)*4,k=u.color.light;if(T>=S&&I>=S&&T<y-S&&I<y-S){const P=Math.floor((T-S)/v),L=Math.floor((I-S)/v);k=E[x[P*g+L]?1:0]}o[O++]=k.r,o[O++]=k.g,o[O++]=k.b,o[O]=k.a}}})(h0)),h0}var Ox;function gT(){return Ox||(Ox=1,(function(r){const e=A2();function n(d,u,g){d.clearRect(0,0,u.width,u.height),u.style||(u.style={}),u.height=g,u.width=g,u.style.height=g+"px",u.style.width=g+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(u,g,x){let v=x,y=g;typeof v>"u"&&(!g||!g.getContext)&&(v=g,g=void 0),g||(y=o()),v=e.getOptions(v);const S=e.getImageWidth(u.modules.size,v),E=y.getContext("2d"),T=E.createImageData(S,S);return e.qrToImageData(T.data,u,v),n(E,y,S),E.putImageData(T,0,0),y},r.renderToDataURL=function(u,g,x){let v=x;typeof v>"u"&&(!g||!g.getContext)&&(v=g,g=void 0),v||(v={});const y=r.render(u,g,v),S=v.type||"image/png",E=v.rendererOpts||{};return y.toDataURL(S,E.quality)}})(u0)),u0}var f0={},Px;function xT(){if(Px)return f0;Px=1;const r=A2();function e(d,u){const g=d.a/255,x=u+'="'+d.hex+'"';return g<1?x+" "+u+'-opacity="'+g.toFixed(2).slice(1)+'"':x}function n(d,u,g){let x=d+u;return typeof g<"u"&&(x+=" "+g),x}function o(d,u,g){let x="",v=0,y=!1,S=0;for(let E=0;E<d.length;E++){const T=Math.floor(E%u),I=Math.floor(E/u);!T&&!y&&(y=!0),d[E]?(S++,E>0&&T>0&&d[E-1]||(x+=y?n("M",T+g,.5+I+g):n("m",v,0),v=0,y=!1),T+1<u&&d[E+1]||(x+=n("h",S),S=0)):v++}return x}return f0.render=function(u,g,x){const v=r.getOptions(g),y=u.modules.size,S=u.modules.data,E=y+v.margin*2,T=v.color.light.a?"<path "+e(v.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",I="<path "+e(v.color.dark,"stroke")+' d="'+o(S,y,v.margin)+'"/>',O='viewBox="0 0 '+E+" "+E+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+O+' shape-rendering="crispEdges">'+T+I+`</svg>
`;return typeof x=="function"&&x(null,P),P},f0}var Dx;function wT(){if(Dx)return il;Dx=1;const r=QI(),e=pT(),n=gT(),o=xT();function d(u,g,x,v,y){const S=[].slice.call(arguments,1),E=S.length,T=typeof S[E-1]=="function";if(!T&&!r())throw new Error("Callback required as last argument");if(T){if(E<2)throw new Error("Too few arguments provided");E===2?(y=x,x=g,g=v=void 0):E===3&&(g.getContext&&typeof y>"u"?(y=v,v=void 0):(y=v,v=x,x=g,g=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(x=g,g=v=void 0):E===2&&!g.getContext&&(v=x,x=g,g=void 0),new Promise(function(I,O){try{const k=e.create(x,v);I(u(k,g,v))}catch(k){O(k)}})}try{const I=e.create(x,v);y(null,u(I,g,v))}catch(I){y(I)}}return il.create=e.create,il.toCanvas=d.bind(null,n.render),il.toDataURL=d.bind(null,n.renderToDataURL),il.toString=d.bind(null,function(u,g,x){return o.render(u,x)}),il}var yT=wT();const Bm=Ac(yT);function j2(r=8){const e="0123456789abcdefghijklmnopqrstuvwxyz";let n="";for(let o=0;o<r;o++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function I2(){return Math.floor(Date.now()/1e3).toString()}function vT(){return`prt-${I2()}-${j2(8)}`}function bT(){return`fld-${I2()}-${j2(8)}`}async function Tl(r){try{const{data:e,error:n}=await Le.from("events").select("*").eq("id",r).single();if(n){if(n.code==="PGRST116")return null;throw n}return e}catch(e){return console.error("Error fetching event:",e),null}}async function Oc(r,e){const{error:n}=await Le.from("events").update(e).eq("id",r);if(n)throw n}async function T2(r){const e=vT(),n={id:e,registeredAt:new Date().toISOString(),attendance:[],...r};console.log("[createParticipant]  Participant object to insert:",n),console.log("[createParticipant]  customData being inserted:",n.customData);try{console.log("[createParticipant]  Starting QR generation for:",e);const g=await Bm.toDataURL(e,{width:600,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});console.log("[createParticipant]  QR code generated, length:",g.length);const x=g.split(",")[1],v=atob(x),y=new Uint8Array(v.length);for(let O=0;O<v.length;O++)y[O]=v.charCodeAt(O);const S=new Blob([y],{type:"image/png"}),E=`${e}.png`;console.log("[createParticipant]  Uploading to storage bucket: participant-qr-codes, file:",E,"size:",S.size,"bytes");const{data:T,error:I}=await Le.storage.from("participant-qr-codes").upload(E,S,{contentType:"image/png",upsert:!0});if(I)console.error("[createParticipant]  Upload failed:",I),console.log("[createParticipant]  Saving as data URL instead..."),n.qr_code_url=g;else{console.log("[createParticipant]  Upload successful, data:",T);const{data:O}=Le.storage.from("participant-qr-codes").getPublicUrl(E);n.qr_code_url=O.publicUrl,console.log("[createParticipant]  QR code uploaded successfully:",O.publicUrl)}}catch(g){console.error("[createParticipant]  QR generation error:",g)}console.log("[createParticipant]  Inserting participant to database..."),console.log("[createParticipant]  Data being sent to database:",{id:n.id,eventId:n.eventId,name:n.name,email:n.email,customData:n.customData});const o={id:n.id,eventId:n.eventId,name:n.name,email:n.email,phone:n.phone,company:n.company,position:n.position,registeredAt:n.registeredAt,attendance:n.attendance,customData:n.customData,qr_code_url:n.qr_code_url};console.log("[createParticipant]  Database record to insert:",o);const{data:d,error:u}=await Le.from("participants").insert([o]).select().single();if(u)throw console.error("[createParticipant]  Database insert error:",u),u;return console.log("[createParticipant]  Participant created in database:",d),console.log("[createParticipant]  Returned customData:",d.customData),d}async function CT(r){try{const e=await Tl(r);return e?.customFields?[...e.customFields].sort((n,o)=>n.order-o.order):[]}catch(e){return console.error("Error fetching custom fields:",e),[]}}async function ET(r,e){try{const n=await Tl(r);if(!n)throw new Error("Event not found");const o=n.customFields||[],d={...e,id:bT(),order:o.length},u=[...o,d];return await Oc(r,{customFields:u}),d}catch(n){throw console.error("Error adding custom field:",n),n}}async function ST(r,e){try{const n=await Tl(r);if(!n)throw new Error("Event not found");const o=(n.customFields||[]).filter(d=>d.id!==e);await Oc(r,{customFields:o})}catch(n){throw console.error("Error deleting custom field:",n),n}}async function _T(r,e,n){try{const o=await Tl(r);if(!o)throw new Error("Event not found");const d=(o.customFields||[]).map(u=>u.id===e?{...u,...n}:u);await Oc(r,{customFields:d})}catch(o){throw console.error("Error updating custom field:",o),o}}async function NT(r,e){try{const n=await Tl(r);if(!n)throw new Error("Event not found");const o=new Map((n.customFields||[]).map(u=>[u.id,u])),d=e.map(u=>o.get(u)).filter(Boolean).map((u,g)=>({...u,order:g}));await Oc(r,{customFields:d})}catch(n){throw console.error("Error reordering custom fields:",n),n}}function R2({eventId:r,onFieldsUpdated:e}){const[n,o]=A.useState(!1),[d,u]=A.useState([]),[g,x]=A.useState({phone:!0,company:!0,position:!0,attendance:!0,registered:!0,emailStatus:!0}),[v,y]=A.useState(!1),[S,E]=A.useState(null),[T,I]=A.useState(null),[O,k]=A.useState({name:"",label:"",type:"text",required:!1,options:""});A.useEffect(()=>{P(),L()},[r]);const P=async()=>{try{y(!0),E(null);const ce=await CT(r);u(ce)}catch(ce){console.error("Error loading custom fields:",ce),E("Failed to load custom fields")}finally{y(!1)}},L=async()=>{try{const ce=await Tl(r);ce?.columnVisibility&&x(ce.columnVisibility)}catch(ce){console.error("Error loading column visibility:",ce)}},U=async(ce,oe)=>{try{const H={...g,[ce]:oe};x(H),await Oc(r,{columnVisibility:H}),e()}catch(H){console.error("Error updating column visibility:",H),E("Failed to update column visibility")}},B=async()=>{if(!O.name.trim()||!O.label.trim()){E("Please enter both field name and label");return}try{y(!0),E(null);const ce={name:O.name.toLowerCase().replace(/\s+/g,"_"),label:O.label,type:O.type,required:O.required,options:O.type==="select"&&O.options?O.options.split(",").map(oe=>oe.trim()).filter(Boolean):void 0};await ET(r,ce),k({name:"",label:"",type:"text",required:!1,options:""}),await P(),e()}catch(ce){console.error("Error adding field:",ce),E(ce.message||"Failed to add field")}finally{y(!1)}},G=async ce=>{if(confirm("Are you sure you want to delete this field? All data in this field will be lost."))try{y(!0),E(null),await ST(r,ce),await P(),e()}catch(oe){console.error("Error deleting field:",oe),E(oe.message||"Failed to delete field")}finally{y(!1)}},ee=ce=>{I(ce),k({name:ce.name,label:ce.label,type:ce.type,required:ce.required,options:ce.options?ce.options.join(", "):""})},se=async()=>{if(!T||!O.label.trim()){E("Please enter field label");return}try{y(!0),E(null);const ce={label:O.label,type:O.type,required:O.required,options:O.type==="select"&&O.options?O.options.split(",").map(oe=>oe.trim()).filter(Boolean):void 0};await _T(r,T.id,ce),I(null),k({name:"",label:"",type:"text",required:!1,options:""}),await P(),e()}catch(ce){console.error("Error updating field:",ce),E(ce.message||"Failed to update field")}finally{y(!1)}},V=()=>{I(null),k({name:"",label:"",type:"text",required:!1,options:""})},te=async(ce,oe)=>{const H=d.findIndex(de=>de.id===ce);if(H===-1)return;const W=oe==="up"?H-1:H+1;if(!(W<0||W>=d.length))try{y(!0),E(null);const de=[...d],[X]=de.splice(H,1);de.splice(W,0,X),await NT(r,de.map(q=>q.id)),await P(),e()}catch(de){console.error("Error reordering fields:",de),E(de.message||"Failed to reorder fields")}finally{y(!1)}},ne=[{key:null,name:"ID",description:"Unique participant identifier",alwaysVisible:!0},{key:null,name:"Name",description:"Participant full name",alwaysVisible:!0},{key:null,name:"Email",description:"Email address",alwaysVisible:!0},{key:"phone",name:"Phone",description:"Phone number",alwaysVisible:!1},{key:"company",name:"Company",description:"Company name",alwaysVisible:!1},{key:"position",name:"Position",description:"Job title/position",alwaysVisible:!1},{key:"attendance",name:"Attendance",description:"Session check-ins and selected sessions",alwaysVisible:!1},{key:"registered",name:"Registered At",description:"Registration timestamp",alwaysVisible:!1},{key:"emailStatus",name:"Campaign/Email Status",description:"Email campaigns sent to participant",alwaysVisible:!1}];return s.jsxs(s.Fragment,{children:[s.jsxs(Ae,{onClick:()=>o(!0),variant:"outline",size:"sm",children:[s.jsx(e_,{className:"mr-2 h-4 w-4"}),"Manage Columns"]}),s.jsx(Pn,{open:n,onOpenChange:o,children:s.jsxs(Dn,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsx(Bn,{children:s.jsx(Fn,{children:"Manage Participant Columns"})}),S&&s.jsxs(ei,{variant:"destructive",children:[s.jsx(wi,{className:"h-4 w-4"}),s.jsx(ti,{children:S})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"SYSTEM FIELDS"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"ID, Name, and Email are always visible. Toggle other fields to show/hide them in the participant table."}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(go,{children:[s.jsx(xo,{children:s.jsxs(Qn,{children:[s.jsx(_t,{children:"Field Name"}),s.jsx(_t,{children:"Description"}),s.jsx(_t,{className:"w-32 text-center",children:"Visibility"})]})}),s.jsx(Aa,{children:ne.map(ce=>s.jsxs(Qn,{children:[s.jsx(yt,{className:"font-medium",children:ce.name}),s.jsx(yt,{className:"text-sm text-muted-foreground",children:ce.description}),s.jsx(yt,{className:"text-center",children:ce.alwaysVisible?s.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Always Visible"}):s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(mo,{checked:g[ce.key],onCheckedChange:oe=>U(ce.key,oe)}),s.jsx("span",{className:"text-xs text-muted-foreground",children:g[ce.key]?"Visible":"Hidden"})]})})]},ce.name))})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"CUSTOM FIELDS"}),d.length===0?s.jsx("div",{className:"text-center py-8 border rounded-lg bg-muted/50",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"No custom fields yet. Add one below to get started."})}):s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(go,{children:[s.jsx(xo,{children:s.jsxs(Qn,{children:[s.jsx(_t,{className:"w-10"}),s.jsx(_t,{children:"Label"}),s.jsx(_t,{children:"Field Name"}),s.jsx(_t,{children:"Type"}),s.jsx(_t,{className:"w-20",children:"Required"}),s.jsx(_t,{className:"w-24",children:"Actions"})]})}),s.jsx(Aa,{children:d.map((ce,oe)=>s.jsxs(Qn,{children:[s.jsx(yt,{children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(Ae,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>te(ce.id,"up"),disabled:oe===0,children:""}),s.jsx(Ae,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>te(ce.id,"down"),disabled:oe===d.length-1,children:""})]})}),s.jsx(yt,{className:"font-medium",children:ce.label}),s.jsx(yt,{className:"font-mono text-sm text-muted-foreground",children:ce.name}),s.jsx(yt,{children:s.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded capitalize",children:ce.type})}),s.jsx(yt,{children:ce.required?s.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Yes"}):s.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:"No"})}),s.jsx(yt,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>ee(ce),className:"h-8 w-8 p-0 text-blue-600",title:"Edit field",children:s.jsx(_a,{className:"h-4 w-4"})}),s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>G(ce.id),className:"h-8 w-8 p-0 text-destructive",title:"Delete field",children:s.jsx(Ta,{className:"h-4 w-4"})})]})})]},ce.id))})]})})]}),s.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[s.jsx("h3",{className:"text-sm font-semibold mb-4",children:T?"Edit Custom Field":"Add New Custom Field"}),T&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-blue-800",children:["Editing field: ",s.jsx("span",{className:"font-semibold",children:T.label})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"field-label",children:"Field Label *"}),s.jsx(Ke,{id:"field-label",placeholder:"e.g., Dietary Preferences",value:O.label,onChange:ce=>k({...O,label:ce.target.value})}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Display name shown to users"})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"field-name",children:"Field Name *"}),s.jsx(Ke,{id:"field-name",placeholder:"e.g., dietary_preferences",value:O.name,onChange:ce=>k({...O,name:ce.target.value}),disabled:!!T}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:T?"Cannot be changed":"Internal identifier (lowercase, no spaces)"})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"field-type",children:"Field Type"}),s.jsxs(Kr,{value:O.type,onValueChange:ce=>k({...O,type:ce}),children:[s.jsx(Qr,{id:"field-type",children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"text",children:"Text"}),s.jsx(Ut,{value:"email",children:"Email"}),s.jsx(Ut,{value:"tel",children:"Phone"}),s.jsx(Ut,{value:"number",children:"Number"}),s.jsx(Ut,{value:"date",children:"Date"}),s.jsx(Ut,{value:"textarea",children:"Long Text"}),s.jsx(Ut,{value:"select",children:"Dropdown"})]})]})]}),O.type==="select"&&s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"field-options",children:"Options (comma-separated)"}),s.jsx(Ke,{id:"field-options",placeholder:"Option 1, Option 2, Option 3",value:O.options,onChange:ce=>k({...O,options:ce.target.value})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mo,{id:"field-required",checked:O.required,onCheckedChange:ce=>k({...O,required:ce})}),s.jsx(Pe,{htmlFor:"field-required",className:"cursor-pointer",children:"Required field"})]})]}),s.jsx("div",{className:"flex gap-2 mt-4",children:T?s.jsxs(s.Fragment,{children:[s.jsx(Ae,{onClick:se,size:"sm",disabled:v,className:"gradient-primary",children:v?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_a,{className:"mr-2 h-4 w-4"}),"Update Field"]})}),s.jsx(Ae,{onClick:V,size:"sm",variant:"outline",disabled:v,children:"Cancel"})]}):s.jsx(Ae,{onClick:B,size:"sm",disabled:v,children:v?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):s.jsxs(s.Fragment,{children:[s.jsx(cs,{className:"mr-2 h-4 w-4"}),"Add Field"]})})})]})]})]})})]})}function AT({eventId:r,accessToken:e}){const[n,o]=A.useState([]),[d,u]=A.useState([]),[g,x]=A.useState([]),[v,y]=A.useState({phone:!0,company:!0,position:!0,attendance:!0,registered:!0,emailStatus:!0}),[S,E]=A.useState(!0),[T,I]=A.useState(""),[O,k]=A.useState(!1),[P,L]=A.useState([]),[U,B]=A.useState([]),[G,ee]=A.useState(!1),[se,V]=A.useState(!1),[te,ne]=A.useState(null),[ce,oe]=A.useState(!1),[H,W]=A.useState(!1),[de,X]=A.useState(null),[q,ie]=A.useState(new Date),z=A.useRef(null),[ue,be]=A.useState(!1),[re,we]=A.useState(new Set),[Ie,Oe]=A.useState(!1),[ye,Y]=A.useState(""),[le,Ce]=A.useState(!1),[De,Ye]=A.useState(1),[We,ut]=A.useState(25),[Ze,Ot]=A.useState("registeredAt"),[Me,at]=A.useState("desc"),[Z,Te]=A.useState({id:100,name:150,email:180,phone:120,company:140,position:130,attendance:160,registered:100,emailStatus:140,actions:140}),[Be,Rt]=A.useState(null),[Ue,Pt]=A.useState(0),[Mt,Yt]=A.useState(0),[kr,Vt]=A.useState(!1),[it,Gt]=A.useState(null),[qt,Hn]=A.useState(""),[yn,Ns]=A.useState([]),[vn,Je]=A.useState(!1),[pn,en]=A.useState({}),rn=Math.ceil(d.length/We),Er=(De-1)*We,lr=Er+We,Hr=d.slice(Er,lr),[tt,Kt]=A.useState({name:"",email:"",phone:"",company:"",position:"",customData:{}}),Or=async()=>{E(!0);try{console.log("[SUPABASE] Fetching participants from Supabase for event:",r);const{data:J,error:pe}=await Le.from("participants").select("*").eq("eventId",r);if(pe)throw new Error(`Failed to fetch participants: ${pe.message}`);console.log("[SUPABASE] Found participants:",J?.length),console.log("[SUPABASE] Raw data:",J);const _e=(J||[]).map(ge=>({id:ge.id,eventId:ge.eventId,name:ge.name,email:ge.email,phone:ge.phone,company:ge.company,position:ge.position,registeredAt:ge.registeredAt,attendance:ge.attendance||[],customData:ge.customData||{},qr_code_url:ge.qr_code_url||ge.qrCodeUrl}));console.log("[SUPABASE] Converted participants:",_e),o(_e),u(_e),ie(new Date)}catch(J){console.error("[SUPABASE] Error fetching participants:",J)}finally{E(!1)}},kt=async()=>{try{const{data:J,error:pe}=await Le.from("events").select("customFields, columnVisibility").eq("id",r).single();if(pe){console.error("[SUPABASE] Error loading column settings:",pe);return}J?.customFields?x([...J.customFields].sort((_e,ge)=>_e.order-ge.order)):x([]),J?.columnVisibility&&y(J.columnVisibility)}catch(J){console.error("[SUPABASE] Error in loadColumnSettings:",J)}};A.useEffect(()=>{Or(),kt(),rr()},[r,e]),A.useEffect(()=>{n.length>0&&Jn()},[n]),A.useEffect(()=>{console.log("[REALTIME] Setting up Supabase Realtime subscription for event:",r);const J=Le.channel(`participants_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"participants",filter:`eventId=eq.${r}`},_e=>{if(console.log("[REALTIME] Participant data changed:",_e.eventType),_e.eventType==="INSERT"){const ge={id:_e.new.id,eventId:_e.new.eventId,name:_e.new.name,email:_e.new.email,phone:_e.new.phone,company:_e.new.company,position:_e.new.position,registeredAt:_e.new.registeredAt,attendance:_e.new.attendance||[],customData:_e.new.customData||{}};o(ht=>[...ht,ge]),u(ht=>[...ht,ge])}else if(_e.eventType==="UPDATE"){const ge={id:_e.new.id,eventId:_e.new.eventId,name:_e.new.name,email:_e.new.email,phone:_e.new.phone,company:_e.new.company,position:_e.new.position,registeredAt:_e.new.registeredAt,attendance:_e.new.attendance||[],customData:_e.new.customData||{}};o(ht=>ht.map(qe=>qe.id===ge.id?ge:qe)),u(ht=>ht.map(qe=>qe.id===ge.id?ge:qe))}else _e.eventType==="DELETE"&&(o(ge=>ge.filter(ht=>ht.id!==_e.old.id)),u(ge=>ge.filter(ht=>ht.id!==_e.old.id)))}).subscribe(),pe=Le.channel(`events_${r}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"events",filter:`id=eq.${r}`},_e=>{if(console.log("[REALTIME] Event settings changed (columnVisibility or customFields)"),_e.new.customFields){const ge=[..._e.new.customFields].sort((ht,qe)=>ht.order-qe.order);x(ge)}_e.new.columnVisibility&&(console.log("[REALTIME] Column visibility updated:",_e.new.columnVisibility),y(_e.new.columnVisibility))}).subscribe();return()=>{console.log("[REALTIME] Unsubscribing from Realtime"),Le.removeChannel(J),Le.removeChannel(pe)}},[r]),A.useEffect(()=>{let J=n;if(T){const pe=T.toLowerCase();J=J.filter(_e=>{const ge=_e.name.toLowerCase().includes(pe)||_e.email.toLowerCase().includes(pe)||(_e.company||"").toLowerCase().includes(pe)||_e.id.toLowerCase().includes(pe)||(_e.phone||"").toLowerCase().includes(pe)||(_e.position||"").toLowerCase().includes(pe),ht=g.some(vt=>{const nt=_e.customData?.[vt.id]||_e.customData?.[vt.name];return nt&&String(nt).toLowerCase().includes(pe)}),qe=(_e.attendance||[]).some(vt=>(vt.agendaItem||"").toLowerCase().includes(pe)),et=(pn[_e.id]||[]).some(vt=>vt.replace(/\s*\(pending\)\s*$/i,"").toLowerCase().includes(pe)||vt.toLowerCase().includes(pe));return ge||ht||qe||et})}U.forEach(pe=>{J=J.filter(_e=>{let ge;if(pe.column.startsWith("custom_")){const et=pe.column.replace("custom_",""),vt=g.find(nt=>nt.name===et);ge=vt&&(_e.customData?.[vt.id]||_e.customData?.[et])||""}else if(pe.column==="attendance"){const et=_e.attendance||[];if(pe.operator==="not-empty")return et.length>0;if(pe.operator==="empty")return et.length===0;const vt=et.map(st=>st.agendaItem||"").join(" ").toLowerCase(),nt=pe.value.toLowerCase();switch(pe.operator){case"contains":return vt.includes(nt);case"equals":return et.some(st=>(st.agendaItem||"").toLowerCase()===nt);case"starts-with":return et.some(st=>(st.agendaItem||"").toLowerCase().startsWith(nt));case"ends-with":return et.some(st=>(st.agendaItem||"").toLowerCase().endsWith(nt));default:return!0}}else if(pe.column==="campaigns"){const et=pn[_e.id]||[];if(pe.operator==="not-empty")return et.length>0;if(pe.operator==="empty")return et.length===0;const vt=et.map(st=>st.replace(/\s*\(pending\)\s*$/i,"")).join(" ").toLowerCase(),nt=pe.value.toLowerCase();switch(pe.operator){case"contains":return vt.includes(nt);case"equals":return et.some(st=>st.replace(/\s*\(pending\)\s*$/i,"").toLowerCase()===nt);case"starts-with":return et.some(st=>st.replace(/\s*\(pending\)\s*$/i,"").toLowerCase().startsWith(nt));case"ends-with":return et.some(st=>st.replace(/\s*\(pending\)\s*$/i,"").toLowerCase().endsWith(nt));default:return!0}}else ge=_e[pe.column]||"";const ht=String(ge).toLowerCase(),qe=pe.value.toLowerCase();switch(pe.operator){case"contains":return ht.includes(qe);case"equals":return ht===qe;case"starts-with":return ht.startsWith(qe);case"ends-with":return ht.endsWith(qe);case"not-empty":return ht.trim()!=="";case"empty":return ht.trim()==="";default:return!0}})}),J=J.sort((pe,_e)=>{let ge,ht;if(Ze==="registeredAt")ge=new Date(pe.registeredAt).getTime(),ht=new Date(_e.registeredAt).getTime();else if(Ze==="attendance")ge=(pe.attendance||[]).length,ht=(_e.attendance||[]).length;else if(Ze.startsWith("custom_")){const qe=Ze.replace("custom_",""),et=g.find(vt=>vt.name===qe);ge=et&&(pe.customData?.[et.id]||pe.customData?.[qe])||"",ht=et&&(_e.customData?.[et.id]||_e.customData?.[qe])||""}else ge=pe[Ze]||"",ht=_e[Ze]||"";return typeof ge=="string"&&typeof ht=="string"&&(ge=ge.toLowerCase(),ht=ht.toLowerCase()),ge<ht?Me==="asc"?-1:1:ge>ht?Me==="asc"?1:-1:0}),u(J),Ye(1)},[T,n,Ze,Me,U,pn,g]);const Wt=J=>{Ze===J?at(Me==="asc"?"desc":"asc"):(Ot(J),at("asc"))},sn=({field:J})=>Ze!==J?s.jsx(rm,{className:"ml-1 h-3 w-3 text-gray-400"}):Me==="asc"?s.jsx(ju,{className:"ml-1 h-3 w-3 text-blue-600"}):s.jsx(Au,{className:"ml-1 h-3 w-3 text-blue-600"}),nn=(J,pe)=>{pe.preventDefault(),pe.stopPropagation(),Rt(J),Pt(pe.clientX),Yt(Z[J]||150)};A.useEffect(()=>{if(!Be)return;const J=_e=>{const ge=_e.clientX-Ue,ht=Math.max(80,Mt+ge);Te(qe=>({...qe,[Be]:ht}))},pe=()=>{Rt(null)};return document.addEventListener("mousemove",J),document.addEventListener("mouseup",pe),()=>{document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",pe)}},[Be,Ue,Mt]);const En=({columnKey:J})=>s.jsx("div",{className:"absolute right-0 top-0 h-full w-1 cursor-col-resize hover:bg-blue-500 group",onMouseDown:pe=>nn(J,pe),style:{userSelect:"none"},children:s.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-transparent group-hover:bg-blue-500"})}),bn=J=>{if(J){const pe=new Set(Hr.map(_e=>_e.id));we(pe)}else we(new Set)},dn=(J,pe)=>{const _e=new Set(re);pe?_e.add(J):_e.delete(J),we(_e)},ds=Hr.length>0&&Hr.every(J=>re.has(J.id)),Cn=Hr.some(J=>re.has(J.id))&&!ds,rr=async()=>{try{const{data:J}=await Le.from("email_templates").select("*").eq("event_id",r).order("name");J&&Ns(J)}catch(J){console.error("Error loading email templates:",J)}},jn=J=>{Gt(J),Hn(""),Vt(!0),yn.length===0&&rr()},Gn=async()=>{if(!it||!qt){alert("Please select a template");return}try{Je(!0);const J=yn.find(us=>us.id===qt);if(!J)throw new Error("Template not found");const{data:pe}=await Le.from("events").select("*").eq("id",r).single(),_e=us=>us.replace(/\{\{name\}\}/g,it.name||"").replace(/\{\{email\}\}/g,it.email||"").replace(/\{\{phone\}\}/g,it.phone||"").replace(/\{\{company\}\}/g,it.company||"").replace(/\{\{position\}\}/g,it.position||"").replace(/\{\{event_name\}\}/g,pe?.name||"").replace(/\{\{event_date\}\}/g,pe?.startDate||"").replace(/\{\{participant_id\}\}/g,it.id||""),ge=_e(J.subject);let ht=_e(J.body);console.log("=== SENDING EMAIL ==="),console.log("To:",it.email),console.log("Subject:",ge);let qe=J.attachments||[];console.log("[ParticipantManagement]  Checking QR code:",{templateIncludeQR:J.include_qr_code,participantQRUrl:it.qr_code_url,participantId:it.id,participantEmail:it.email}),J.include_qr_code&&it.qr_code_url?(console.log("[ParticipantManagement]  Adding QR code from database:",it.qr_code_url),qe=[...qe,it.qr_code_url]):J.include_qr_code&&!it.qr_code_url&&console.warn("[ParticipantManagement]  QR code requested but not found in participant data for:",it.id),console.log("[ParticipantManagement]  Sending email with params:",{to:it.email,participantId:it.id,templateId:J.id,attachmentsArray:qe,attachmentsCount:qe?.length||0,includeQR:J.include_qr_code});const{data:et,error:vt}=await Le.from("participant_emails").insert({participant_id:it.id,template_id:J.id,template_name:J.name,subject:ge,status:"pending"}).select().single();let nt=et?.id;if(nt){const us="https://xtrognfmzyzqhsfvtgne.supabase.co",Tn=`<img src="${us}/functions/v1/track-email?id=${nt}&pid=${it.id}" width="1" height="1" style="display:none;" alt="" />`;let cr=ht;const Xi=/(https?:\/\/[^\s<>"]+)/gi;cr=cr.replace(Xi,hn=>{const qr=hn.includes("?")?"&":"?";return`${hn}${qr}_track=${nt}`}),cr=cr+Tn,console.log("[ParticipantManagement]  Dual tracking added (pixel + links)"),console.log("[ParticipantManagement]  Tracking URL:",`${us}/functions/v1/track-email?id=${nt}&pid=${it.id}`),console.log("[ParticipantManagement]  Email Log ID:",nt),ht=cr}console.log("[ParticipantManagement]  Invoking send-email function...");const st=Le.functions.invoke("send-email",{body:{to:it.email,subject:ge,html:ht,participantId:it.id,templateId:J.id,attachments:qe}}),Ct=new Promise((us,Tn)=>setTimeout(()=>Tn(new Error("Email sending timeout after 30 seconds")),3e4)),{data:In,error:As}=await Promise.race([st,Ct]);if(As){console.error(" Failed to send email:",As),nt&&await Le.from("participant_emails").update({status:"failed",error_message:As.message||"Failed to send email"}).eq("id",nt),alert(` Failed to send email to ${it.name}

Error: ${As.message}`);return}console.log(" Email sent successfully:",In),nt&&(await Le.from("participant_emails").update({status:"sent"}).eq("id",nt),console.log("[ParticipantManagement]  Email log updated to sent")),await Or(),await Jn(),alert(` Email sent successfully to ${it.name}!`),Vt(!1),Gt(null),Hn("")}catch(J){console.error("Error sending email:",J),alert("Error sending email: "+J.message)}finally{Je(!1)}},Jn=async()=>{try{const J=n.map(et=>et.id);if(J.length===0)return;console.log("[ParticipantCampaigns] Fetching for participant IDs:",J.length);const{data:pe,error:_e}=await Le.from("participant_emails").select("participant_id, campaign_id, status").in("participant_id",J);if(_e){console.error("[ParticipantCampaigns] Error fetching email logs:",_e);return}console.log("[ParticipantCampaigns] Email logs fetched:",pe?.length);const ge=[...new Set(pe?.map(et=>et.campaign_id).filter(Boolean))];console.log("[ParticipantCampaigns] Unique campaign IDs:",ge);let ht={};if(ge.length>0){const{data:et,error:vt}=await Le.from("campaigns").select("id, name").in("id",ge);if(vt){console.error("[ParticipantCampaigns] Error fetching campaigns:",vt);return}console.log("[ParticipantCampaigns] Campaigns fetched:",et?.length),et?.forEach(nt=>{ht[nt.id]=nt.name})}const qe={};pe?.forEach(et=>{if(!et.campaign_id)return;qe[et.participant_id]||(qe[et.participant_id]=[]);const vt=ht[et.campaign_id]||`Campaign ${et.campaign_id.substring(0,8)}`;let nt=vt;et.status==="pending"||et.status==="queued"||et.status==="scheduled"?nt=`${vt} (pending)`:et.status==="failed"&&(nt=`${vt} (failed)`),qe[et.participant_id].includes(nt)||qe[et.participant_id].push(nt)}),en(qe),console.log("[ParticipantCampaigns] Final campaigns by participant:",qe)}catch(J){console.error("[ParticipantCampaigns] Error:",J)}},rt=J=>{const pe=pn[J.id]||[];return pe.length===0?s.jsx(mn,{className:"bg-gray-100 text-gray-500 border-gray-300 border text-xs",children:"No campaigns"}):s.jsx("div",{className:"flex flex-wrap gap-1",children:pe.map((_e,ge)=>{const ht=_e.includes("(pending)")||_e.includes("(not sent)"),qe=_e.includes("(failed)");let et="bg-blue-100 text-blue-700 border-blue-300 border text-xs",vt="Email terkirim";return ht?(et="bg-yellow-100 text-yellow-700 border-yellow-300 border text-xs",vt=_e.includes("(not sent)")?"Terdaftar di campaign, email belum dikirim":"Email dalam antrian (pending)"):qe&&(et="bg-red-100 text-red-700 border-red-300 border text-xs",vt="Email gagal terkirim"),s.jsx(mn,{className:et,title:vt,children:_e},ge)})})},oi=J=>{const pe=J.attendance||[];return pe.length===0?s.jsx(mn,{className:"bg-gray-100 text-gray-500 border-gray-300 border text-xs",children:"0 sessions"}):s.jsx("div",{className:"flex flex-wrap gap-1",children:pe.map((_e,ge)=>{const ht=_e.agendaItem||"Unknown Session",qe=new Date(_e.timestamp).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsx(mn,{className:"bg-green-100 text-green-700 border-green-300 border text-xs",title:`Checked in at ${qe}`,children:ht},ge)})})},Ma=async J=>{J.preventDefault(),oe(!0);try{console.log("[SUPABASE] Adding participant:",tt);const pe=await T2({eventId:r,name:tt.name,email:tt.email,phone:tt.phone||"",company:tt.company||"",position:tt.position||"",customData:tt.customData||{}});if(console.log("[SUPABASE] Participant added successfully with QR:",pe),ue&&qt)try{const{data:_e,error:ge}=await Le.from("email_templates").select("*").eq("id",qt).single();if(ge||!_e)console.error("[EMAIL] Template fetch error:",ge),alert("Participant added, but template not found");else{const ht=_e.subject.replace(/\{\{name\}\}/g,tt.name).replace(/\{\{email\}\}/g,tt.email),qe=_e.body.replace(/\{\{name\}\}/g,tt.name).replace(/\{\{email\}\}/g,tt.email).replace(/\{\{participant_id\}\}/g,pe.id);let et=_e.attachments||[];_e.include_qr_code&&pe.qr_code_url&&(et=[...et,pe.qr_code_url]);const{error:vt}=await Le.functions.invoke("send-email",{body:{to:tt.email,subject:ht,html:qe,participantId:pe.id,templateId:_e.id,attachments:et}}),nt=vt?"failed":"sent";await Le.from("participant_emails").insert({participant_id:pe.id,template_id:_e.id,template_name:_e.name,subject:ht,status:nt,error_message:vt?JSON.stringify(vt):null}),vt?(console.error("[EMAIL] Confirmation send error:",vt),alert(`Participant added, but email failed to send: ${vt.message}`)):(console.log("[EMAIL] Confirmation sent to:",tt.email),alert("Participant added successfully and confirmation email sent!"))}}catch(_e){console.error("[EMAIL] Error:",_e),alert(`Participant added, but email error: ${_e.message}`)}else alert("Participant added successfully!");Kt({name:"",email:"",phone:"",company:"",position:"",customData:{}}),be(!1),Hn(""),ee(!1),await Or()}catch(pe){console.error("[SUPABASE] Error adding participant:",pe),alert(pe.message||"Failed to add participant")}finally{oe(!1)}},wr=async J=>{const pe=J.target.files?.[0];if(pe){W(!0);try{const ge=(await pe.text()).split(`
`).filter(vt=>vt.trim());if(ge.length<2)throw new Error("CSV file is empty or invalid");const ht=ge[0].split(",").map(vt=>vt.trim().replace(/"/g,"").toLowerCase()),qe=[];for(let vt=1;vt<ge.length;vt++){const nt=ge[vt].split(",").map(Ct=>Ct.trim().replace(/"/g,"")),st={id:`part_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,eventId:r,registeredAt:new Date().toISOString(),attendance:[],customData:{}};ht.forEach((Ct,In)=>{Ct==="name"?st.name=nt[In]:Ct==="email"?st.email=nt[In]:Ct==="phone"?st.phone=nt[In]:Ct==="company"?st.company=nt[In]:Ct==="position"&&(st.position=nt[In])}),st.name&&st.email&&qe.push(st)}if(qe.length===0)throw new Error("No valid participants found in CSV");console.log("[SUPABASE] Bulk importing participants:",qe.length);const{error:et}=await Le.from("participants").insert(qe);if(et)throw new Error(`Failed to import participants: ${et.message}`);alert(`Successfully imported ${qe.length} participants.`),await Or()}catch(_e){console.error("[SUPABASE] Error importing CSV:",_e),alert(_e.message||"Failed to import CSV")}finally{W(!1),z.current&&(z.current.value="")}}},Pr=J=>{ne(J),Kt({name:J.name,email:J.email,phone:J.phone,company:J.company,position:J.position,customData:J.customData||{}}),X(null),V(!0)},_i=async J=>{if(J.preventDefault(),!!te){oe(!0),X(null);try{console.log("[SUPABASE] Updating participant:",te.id);const{error:pe}=await Le.from("participants").update({name:tt.name,email:tt.email,phone:tt.phone,company:tt.company,position:tt.position,customData:tt.customData}).eq("id",te.id);if(pe)throw new Error(`Failed to update participant: ${pe.message}`);V(!1),ne(null),await Or(),Kt({name:"",email:"",phone:"",company:"",position:"",customData:{}})}catch(pe){console.error("[SUPABASE] Error updating participant:",pe),X(pe.message||"Failed to update participant")}finally{oe(!1)}}},Ni=async J=>{if(confirm("Are you sure you want to delete this participant?"))try{console.log("[SUPABASE] Deleting participant:",J);const{error:pe}=await Le.from("participants").delete().eq("id",J);if(pe)throw new Error(`Failed to delete participant: ${pe.message}`);await Or()}catch(pe){console.error("[SUPABASE] Error deleting participant:",pe),alert("Failed to delete participant")}},es=async()=>{try{const J=Array.from(re);console.log("[SUPABASE] Bulk deleting participants:",J);const{error:pe}=await Le.from("participants").delete().in("id",J);if(pe)throw new Error(`Failed to delete participants: ${pe.message}`);we(new Set),await Or(),alert(`Successfully deleted ${J.length} participants`)}catch(J){console.error("[SUPABASE] Error bulk deleting participants:",J),alert("Failed to delete participants")}},So=()=>{Oe(!0)},_o=async()=>{if(!ye){alert("Please select a template");return}try{Ce(!0);const J=n.filter(qe=>re.has(qe.id)),pe=yn.find(qe=>qe.id===ye);if(!pe)throw new Error("Template not found");const{data:_e}=await Le.from("events").select("*").eq("id",r).single();let ge=0,ht=0;for(const qe of J)try{const et=As=>As.replace(/\{\{name\}\}/g,qe.name||"").replace(/\{\{email\}\}/g,qe.email||"").replace(/\{\{phone\}\}/g,qe.phone||"").replace(/\{\{company\}\}/g,qe.company||"").replace(/\{\{position\}\}/g,qe.position||"").replace(/\{\{event_name\}\}/g,_e?.name||"").replace(/\{\{event_date\}\}/g,_e?.startDate||"").replace(/\{\{participant_id\}\}/g,qe.id||""),vt=et(pe.subject),nt=et(pe.body);let st=pe.attachments||[];pe.include_qr_code&&qe.qr_code_url&&(st=[...st,qe.qr_code_url]);const{error:Ct}=await Le.functions.invoke("send-email",{body:{to:qe.email,subject:vt,html:nt,participantId:qe.id,templateId:pe.id,attachments:st}}),In=Ct?"failed":"sent";if(await Le.from("participant_emails").insert({participant_id:qe.id,template_id:pe.id,template_name:pe.name,subject:vt,status:In,error_message:Ct?JSON.stringify(Ct):null}),Ct)throw new Error(Ct.message||"Failed to send email");ge++}catch(et){console.error(`Failed to send email to ${qe.email}:`,et),ht++}Ce(!1),Oe(!1),Y(""),we(new Set),ht>0?alert(`Sent ${ge} emails successfully, ${ht} failed`):alert(`Successfully sent ${ge} emails`)}catch(J){console.error("Error sending bulk emails:",J),Ce(!1),alert("Failed to send emails")}},Gr=()=>{const J=["ID","Name","Email","Phone","Company","Position"];g.forEach(et=>J.push(et.label)),J.push("Attendance Count","Registered At");const pe=n.map(et=>{const vt=[et.id,et.name,et.email,et.phone||"",et.company||"",et.position||""];return g.forEach(nt=>{vt.push(et.customData?.[nt.id]||"")}),vt.push((et.attendance||[]).length.toString()),vt.push(new Date(et.registeredAt).toLocaleString()),vt}),_e=[J.join(","),...pe.map(et=>et.map(vt=>`"${vt}"`).join(","))].join(`
`),ge=new Blob([_e],{type:"text/csv"}),ht=window.URL.createObjectURL(ge),qe=document.createElement("a");qe.href=ht,qe.download=`participants-${new Date().toISOString().split("T")[0]}.csv`,qe.click(),window.URL.revokeObjectURL(ht)},sr=()=>{const J=`Name,Email,Phone,Company,Position
"John Doe","john@example.com","+1234567890","Acme Inc","Manager"`,pe=new Blob([J],{type:"text/csv"}),_e=window.URL.createObjectURL(pe),ge=document.createElement("a");ge.href=_e,ge.download="participant-template.csv",ge.click(),window.URL.revokeObjectURL(_e)},xn=()=>{const J=`${window.location.origin}${window.location.pathname}?register=${r}`;navigator.clipboard.writeText(J).then(()=>{alert("Registration URL copied to clipboard!")}).catch(()=>{alert("Failed to copy URL")})};return S?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx(Tr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs(s.Fragment,{children:[s.jsxs(Wn,{className:"border-0 shadow-xl bg-white",style:{position:"relative",zIndex:0},children:[s.jsx(Vr,{className:"border-b border-gray-100 bg-gradient-to-r from-purple-50 to-pink-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Wr,{className:"flex items-center gap-3 text-2xl",children:[s.jsx("div",{className:"w-10 h-10 gradient-primary rounded-xl flex items-center justify-center shadow-md shadow-purple-500/30",children:s.jsx(Ea,{className:"h-5 w-5 text-white"})}),"Participants Management"]}),s.jsxs(Wi,{className:"flex items-center gap-3 mt-2 text-base",children:[s.jsxs("span",{className:"bg-white px-3 py-1 rounded-full border border-purple-200",children:["Total: ",s.jsx("span",{className:"font-semibold text-purple-700",children:n.length})]}),s.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Auto-sync  Updated ",q.toLocaleTimeString()]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(Ae,{onClick:xn,variant:"outline",size:"sm",className:"border-purple-300 hover:border-purple-500 hover:bg-purple-50",children:[s.jsx(CS,{className:"mr-2 h-4 w-4"}),"Copy Registration URL"]}),s.jsx(R2,{eventId:r,onFieldsUpdated:kt}),s.jsx("input",{type:"file",ref:z,accept:".csv",onChange:wr,className:"hidden"}),s.jsx(Ae,{onClick:()=>z.current?.click(),variant:"outline",size:"sm",disabled:H,className:"border-gray-300 hover:border-gray-400",children:H?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(yl,{className:"mr-2 h-4 w-4"}),"Import CSV"]})}),s.jsxs(Ae,{onClick:Gr,variant:"outline",size:"sm",className:"border-gray-300 hover:border-gray-400",children:[s.jsx(im,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),s.jsxs(Pn,{open:G,onOpenChange:ee,children:[s.jsx(yv,{asChild:!0,children:s.jsxs(Ae,{className:"gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:[s.jsx(cs,{className:"mr-2 h-4 w-4"}),"Add Participant"]})}),s.jsxs(Dn,{className:"max-w-2xl max-h-[90vh] flex flex-col",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Add Participant Manually"}),s.jsx(Jr,{children:"Enter participant details to add them to the event"})]}),s.jsxs("form",{onSubmit:Ma,className:"space-y-4 overflow-y-auto pr-2 flex-1",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"add-name",children:"Full Name *"}),s.jsx(Ke,{id:"add-name",placeholder:"John Doe",value:tt.name,onChange:J=>Kt(pe=>({...pe,name:J.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"add-email",children:"Email *"}),s.jsx(Ke,{id:"add-email",type:"email",placeholder:"john@example.com",value:tt.email,onChange:J=>Kt(pe=>({...pe,email:J.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"add-phone",children:"Phone"}),s.jsx(Ke,{id:"add-phone",placeholder:"+1 (555) 000-0000",value:tt.phone,onChange:J=>Kt(pe=>({...pe,phone:J.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"add-company",children:"Company"}),s.jsx(Ke,{id:"add-company",placeholder:"Acme Inc.",value:tt.company,onChange:J=>Kt(pe=>({...pe,company:J.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"add-position",children:"Position"}),s.jsx(Ke,{id:"add-position",placeholder:"Software Engineer",value:tt.position,onChange:J=>Kt(pe=>({...pe,position:J.target.value}))})]}),g.length>0&&s.jsxs("div",{className:"border-t pt-4 space-y-4",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Additional Fields"}),g.map(J=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Pe,{htmlFor:`add-custom-${J.name}`,children:[J.label," ",J.required&&"*"]}),J.type==="textarea"?s.jsx("textarea",{id:`add-custom-${J.id}`,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:`Enter ${J.label.toLowerCase()}`,value:tt.customData?.[J.id]||"",onChange:pe=>Kt(_e=>({..._e,customData:{..._e.customData,[J.id]:pe.target.value}})),required:J.required}):J.type==="select"&&J.options?s.jsxs("select",{id:`add-custom-${J.id}`,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:tt.customData?.[J.id]||"",onChange:pe=>Kt(_e=>({..._e,customData:{..._e.customData,[J.id]:pe.target.value}})),required:J.required,children:[s.jsxs("option",{value:"",children:["Select ",J.label.toLowerCase()]}),J.options.map(pe=>s.jsx("option",{value:pe,children:pe},pe))]}):J.type==="date"?s.jsx(Ke,{id:`add-custom-${J.id}`,type:"date",value:tt.customData?.[J.id]||"",onChange:pe=>Kt(_e=>({..._e,customData:{..._e.customData,[J.id]:pe.target.value}})),required:J.required,className:"w-full"}):s.jsx(Ke,{id:`add-custom-${J.id}`,type:J.type,placeholder:`Enter ${J.label.toLowerCase()}`,value:tt.customData?.[J.id]||"",onChange:pe=>Kt(_e=>({..._e,customData:{..._e.customData,[J.id]:pe.target.value}})),required:J.required})]},J.id))]}),s.jsxs("div",{className:"border-t pt-4 space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"send-confirmation",checked:ue,onChange:J=>be(J.target.checked),className:"w-4 h-4 text-blue-600 cursor-pointer"}),s.jsx(Pe,{htmlFor:"send-confirmation",className:"cursor-pointer font-medium",children:"Send Confirmation Email"})]})}),ue&&s.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-blue-300",children:[s.jsx(Pe,{children:"Email Template"}),s.jsxs(Kr,{value:qt,onValueChange:Hn,children:[s.jsx(Qr,{children:s.jsx(Zr,{placeholder:"Select email template..."})}),s.jsx(ls,{children:yn.length===0?s.jsx(Ut,{value:"",disabled:!0,children:"No templates available"}):yn.map(J=>s.jsxs(Ut,{value:J.id,children:[J.name," - ",J.subject]},J.id))})]}),yn.length===0&&s.jsx("p",{className:"text-xs text-amber-600",children:" Create email templates in Email Center first"})]})]}),s.jsx(Ae,{type:"submit",className:"w-full",disabled:ce,children:ce?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):"Add Participant"})]})]})]}),s.jsx(Pn,{open:se,onOpenChange:V,children:s.jsxs(Dn,{className:"max-w-2xl max-h-[90vh] flex flex-col",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Edit Participant"}),s.jsx(Jr,{children:"Update participant details"})]}),de&&s.jsx(ei,{variant:"destructive",children:s.jsx(ti,{children:de})}),s.jsxs("form",{onSubmit:_i,className:"space-y-4 overflow-y-auto pr-2 flex-1",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"edit-name",children:"Full Name *"}),s.jsx(Ke,{id:"edit-name",placeholder:"John Doe",value:tt.name,onChange:J=>Kt(pe=>({...pe,name:J.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"edit-email",children:"Email *"}),s.jsx(Ke,{id:"edit-email",type:"email",placeholder:"john@example.com",value:tt.email,onChange:J=>Kt(pe=>({...pe,email:J.target.value})),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"edit-phone",children:"Phone"}),s.jsx(Ke,{id:"edit-phone",type:"tel",placeholder:"+1234567890",value:tt.phone,onChange:J=>Kt(pe=>({...pe,phone:J.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"edit-company",children:"Company"}),s.jsx(Ke,{id:"edit-company",placeholder:"Acme Corp",value:tt.company,onChange:J=>Kt(pe=>({...pe,company:J.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"edit-position",children:"Position"}),s.jsx(Ke,{id:"edit-position",placeholder:"Manager",value:tt.position,onChange:J=>Kt(pe=>({...pe,position:J.target.value}))})]})]}),g.length>0&&s.jsxs("div",{className:"border-t pt-4 space-y-4",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Additional Fields"}),g.map(J=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Pe,{htmlFor:`edit-custom-${J.name}`,children:[J.label,J.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),J.type==="textarea"?s.jsx("textarea",{id:`edit-custom-${J.id}`,placeholder:`Enter ${J.label.toLowerCase()}`,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:tt.customData?.[J.id]||tt.customData?.[J.name]||"",onChange:pe=>Kt(_e=>({..._e,customData:{..._e.customData,[J.id]:pe.target.value}})),required:J.required}):J.type==="select"&&J.options?s.jsxs("select",{id:`edit-custom-${J.id}`,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:tt.customData?.[J.id]||tt.customData?.[J.name]||"",onChange:pe=>Kt(_e=>({..._e,customData:{..._e.customData,[J.id]:pe.target.value}})),required:J.required,children:[s.jsxs("option",{value:"",children:["Select ",J.label.toLowerCase()]}),J.options.map(pe=>s.jsx("option",{value:pe,children:pe},pe))]}):J.type==="date"?s.jsx(Ke,{id:`edit-custom-${J.id}`,type:"date",value:tt.customData?.[J.id]||tt.customData?.[J.name]||"",onChange:pe=>Kt(_e=>({..._e,customData:{..._e.customData,[J.id]:pe.target.value}})),required:J.required,className:"w-full"}):s.jsx(Ke,{id:`edit-custom-${J.id}`,type:J.type,placeholder:`Enter ${J.label.toLowerCase()}`,value:tt.customData?.[J.id]||tt.customData?.[J.name]||"",onChange:pe=>Kt(_e=>({..._e,customData:{..._e.customData,[J.id]:pe.target.value}})),required:J.required})]},J.id))]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(Ae,{type:"submit",className:"flex-1 gradient-primary hover:opacity-90",disabled:ce,children:ce?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"}),s.jsx(Ae,{type:"button",variant:"outline",onClick:()=>V(!1),disabled:ce,children:"Cancel"})]})]})]})}),s.jsx(Pn,{open:Ie,onOpenChange:Oe,children:s.jsxs(Dn,{children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Send Email to Selected Participants"}),s.jsxs(Jr,{children:["Send an email template to ",re.size," selected participants"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Select Template"}),s.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",value:ye,onChange:J=>Y(J.target.value),children:[s.jsx("option",{value:"",children:"Choose a template"}),yn.map(J=>s.jsx("option",{value:J.id,children:J.name},J.id))]})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(Ae,{variant:"outline",onClick:()=>Oe(!1),disabled:le,children:"Cancel"}),s.jsx(Ae,{onClick:_o,disabled:!ye||le,className:"gradient-primary",children:le?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):`Send to ${re.size} Participants`})]})]})]})})]})]})}),s.jsxs(Zn,{className:"pt-6",children:[s.jsxs("div",{className:"mb-6 space-y-3",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(jc,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx(Ke,{placeholder:"Quick search across all fields...",value:T,onChange:J=>I(J.target.value),className:"pl-12 h-12 bg-gray-50 border-gray-200 focus:bg-white focus:border-purple-300 transition-colors"})]}),s.jsxs(Ae,{onClick:()=>{O||(U.length===0?L([{id:Date.now().toString(),column:"name",operator:"contains",value:""}]):L([...U])),k(!O)},variant:"outline",size:"sm",className:`h-12 border-gray-300 hover:border-gray-400 ${O?"bg-purple-50 border-purple-300 text-purple-700":""}`,children:[s.jsx(hS,{className:"h-4 w-4 mr-2"}),"Filters",U.length>0&&s.jsx(mn,{className:"ml-2 bg-purple-600 text-white text-xs px-1.5 py-0.5",children:U.length})]}),re.size>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center px-3 py-2 bg-blue-50 text-blue-700 rounded-lg border border-blue-200",children:s.jsxs("span",{className:"text-sm font-medium",children:[re.size," selected"]})}),s.jsx(Ae,{onClick:()=>{confirm(`Delete ${re.size} selected participants?`)&&es()},variant:"outline",size:"sm",className:"border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400",children:"Delete Selected"}),s.jsx(Ae,{onClick:So,variant:"outline",size:"sm",className:"border-purple-300 text-purple-600 hover:bg-purple-50 hover:border-purple-400",children:"Email Selected"}),s.jsx(Ae,{onClick:()=>we(new Set),variant:"ghost",size:"sm",className:"text-gray-600",children:"Clear Selection"})]}):s.jsx(Ae,{onClick:sr,variant:"outline",size:"sm",className:"border-gray-300 hover:border-gray-400",children:"Download Template"})]}),O&&s.jsxs("div",{className:"bg-white border border-purple-200 rounded-lg p-3 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-semibold text-purple-900",children:"Column Filters"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",size:"sm",onClick:()=>{L([...P,{id:Date.now().toString(),column:"name",operator:"contains",value:""}])},className:"h-7 text-xs",children:[s.jsx(cs,{className:"h-3 w-3 mr-1"}),"Add"]}),P.length>0&&s.jsxs(Ae,{variant:"ghost",size:"sm",onClick:()=>L([]),className:"h-7 text-xs text-gray-600",children:[s.jsx(po,{className:"h-3 w-3 mr-1"}),"Clear"]})]})]}),P.length===0?s.jsx("p",{className:"text-xs text-gray-500 text-center py-3",children:'No filters. Click "Add" to create a filter.'}):s.jsx("div",{className:"space-y-2",children:P.map((J,pe)=>s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("select",{value:J.column,onChange:_e=>{const ge=[...P];ge[pe].column=_e.target.value,L(ge)},className:"flex-1 h-8 px-2 rounded-md border border-gray-300 bg-white text-xs focus:border-purple-300 focus:ring-1 focus:ring-purple-100",children:[s.jsxs("optgroup",{label:"Basic",children:[s.jsx("option",{value:"name",children:"Name"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"phone",children:"Phone"}),s.jsx("option",{value:"company",children:"Company"}),s.jsx("option",{value:"position",children:"Position"}),s.jsx("option",{value:"id",children:"ID"})]}),g.length>0&&s.jsx("optgroup",{label:"Custom",children:g.map(_e=>s.jsx("option",{value:`custom_${_e.name}`,children:_e.label},_e.id))}),s.jsxs("optgroup",{label:"Special",children:[s.jsx("option",{value:"attendance",children:"Attendance"}),s.jsx("option",{value:"campaigns",children:"Campaigns"})]})]}),s.jsxs("select",{value:J.operator,onChange:_e=>{const ge=[...P];ge[pe].operator=_e.target.value,L(ge)},className:"w-32 h-8 px-2 rounded-md border border-gray-300 bg-white text-xs focus:border-purple-300 focus:ring-1 focus:ring-purple-100",children:[s.jsx("option",{value:"contains",children:"Contains"}),s.jsx("option",{value:"equals",children:"Equals"}),s.jsx("option",{value:"starts-with",children:"Starts with"}),s.jsx("option",{value:"ends-with",children:"Ends with"}),s.jsx("option",{value:"not-empty",children:"Not empty"}),s.jsx("option",{value:"empty",children:"Is empty"})]}),J.operator!=="not-empty"&&J.operator!=="empty"&&s.jsx(Ke,{value:J.value,onChange:_e=>{const ge=[...P];ge[pe].value=_e.target.value,L(ge)},placeholder:"Value...",className:"flex-1 h-8 text-xs"}),s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>{L(P.filter(_e=>_e.id!==J.id))},className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(po,{className:"h-3 w-3"})})]},J.id))}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200 gap-3",children:[s.jsx("div",{className:"text-xs text-gray-600 flex-shrink-0",children:P.length>0?s.jsxs("span",{children:[P.length," filter",P.length>1?"s":""," ready"]}):U.length>0?s.jsxs("span",{className:"text-purple-700 font-medium",children:[U.length," active"]}):s.jsx("span",{className:"text-gray-400",children:"No filters"})}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>{const J=P.map(pe=>({...pe,value:""}));L(J),B([])},className:"h-8 px-3 text-xs border-gray-300 text-gray-600",children:"Clear"}),s.jsx(Ae,{onClick:()=>{B([...P])},size:"sm",className:"h-8 px-4 text-xs gradient-primary hover:opacity-90 text-white shadow-md shadow-purple-500/30",children:"Apply"})]})]})]})]}),s.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm",style:{position:"relative",zIndex:0},children:[s.jsx("div",{className:"scroll-shadow-left absolute left-0 top-0 bottom-0 w-8 pointer-events-none transition-opacity duration-300 bg-gradient-to-r from-white via-white/50 to-transparent z-20",style:{opacity:0}}),s.jsx("div",{className:"scroll-shadow-right absolute right-0 top-0 bottom-0 w-8 pointer-events-none transition-opacity duration-300 bg-gradient-to-l from-white via-white/50 to-transparent z-20",style:{opacity:1}}),s.jsx("div",{className:"overflow-x-auto overflow-y-auto",style:{position:"relative",maxHeight:"calc(100vh - 400px)",minHeight:"400px",scrollbarWidth:"thin",scrollbarColor:"#a855f7 #f3f4f6"},onScroll:J=>{const pe=J.currentTarget,_e=document.querySelector(".scroll-shadow-left"),ge=document.querySelector(".scroll-shadow-right");_e&&(_e.style.opacity=pe.scrollLeft>10?"1":"0"),ge&&(ge.style.opacity=pe.scrollLeft<pe.scrollWidth-pe.clientWidth-10?"1":"0")},children:s.jsxs("table",{className:"w-full caption-bottom text-sm",style:{minWidth:"1300px"},children:[s.jsx("thead",{style:{position:"sticky",top:0,zIndex:30,backgroundColor:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},className:"border-b",children:s.jsxs(Qn,{children:[s.jsx(_t,{className:"w-12",children:s.jsx("input",{type:"checkbox",checked:ds,ref:J=>{J&&(J.indeterminate=Cn)},onChange:J=>bn(J.target.checked),className:"w-4 h-4 cursor-pointer"})}),s.jsxs(_t,{className:"relative",style:{width:`${Z.id}px`,minWidth:`${Z.id}px`},children:[s.jsxs("button",{onClick:()=>Wt("id"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["ID",s.jsx(sn,{field:"id"})]}),s.jsx(En,{columnKey:"id"})]}),s.jsxs(_t,{className:"relative",style:{width:`${Z.name}px`,minWidth:`${Z.name}px`},children:[s.jsxs("button",{onClick:()=>Wt("name"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Name",s.jsx(sn,{field:"name"})]}),s.jsx(En,{columnKey:"name"})]}),s.jsxs(_t,{className:"relative",style:{width:`${Z.email}px`,minWidth:`${Z.email}px`},children:[s.jsxs("button",{onClick:()=>Wt("email"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Email",s.jsx(sn,{field:"email"})]}),s.jsx(En,{columnKey:"email"})]}),v.phone&&s.jsxs(_t,{className:"relative",style:{width:`${Z.phone}px`,minWidth:`${Z.phone}px`},children:[s.jsxs("button",{onClick:()=>Wt("phone"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Phone",s.jsx(sn,{field:"phone"})]}),s.jsx(En,{columnKey:"phone"})]}),v.company&&s.jsxs(_t,{className:"relative",style:{width:`${Z.company}px`,minWidth:`${Z.company}px`},children:[s.jsxs("button",{onClick:()=>Wt("company"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Company",s.jsx(sn,{field:"company"})]}),s.jsx(En,{columnKey:"company"})]}),v.position&&s.jsxs(_t,{className:"relative",style:{width:`${Z.position}px`,minWidth:`${Z.position}px`},children:[s.jsxs("button",{onClick:()=>Wt("position"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Position",s.jsx(sn,{field:"position"})]}),s.jsx(En,{columnKey:"position"})]}),g.map(J=>{const pe=`custom_${J.name}`,_e=Z[pe]||150;return s.jsxs(_t,{className:"relative",style:{width:`${_e}px`,minWidth:`${_e}px`},children:[s.jsxs("button",{onClick:()=>Wt(pe),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:[J.label,s.jsx(sn,{field:pe})]}),s.jsx(En,{columnKey:pe})]},J.id)}),v.attendance&&s.jsxs(_t,{className:"relative",style:{width:`${Z.attendance}px`,minWidth:`${Z.attendance}px`},children:[s.jsxs("button",{onClick:()=>Wt("attendance"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Attendance",s.jsx(sn,{field:"attendance"})]}),s.jsx(En,{columnKey:"attendance"})]}),v.registered&&s.jsxs(_t,{className:"relative",style:{width:`${Z.registered}px`,minWidth:`${Z.registered}px`},children:[s.jsxs("button",{onClick:()=>Wt("registeredAt"),className:"flex items-center hover:text-gray-900 font-semibold w-full",children:["Registered",s.jsx(sn,{field:"registeredAt"})]}),s.jsx(En,{columnKey:"registered"})]}),v.emailStatus&&s.jsxs(_t,{className:"relative",style:{width:`${Z.emailStatus||250}px`,minWidth:`${Z.emailStatus||250}px`},children:[s.jsx("div",{className:"flex items-center gap-1 font-semibold",children:"Email Campaigns"}),s.jsx(En,{columnKey:"emailStatus"})]}),s.jsx(_t,{className:"text-right sticky right-0 bg-gray-50",style:{width:`${Z.actions}px`,minWidth:`${Z.actions}px`,position:"sticky",right:0,zIndex:40,backgroundColor:"rgb(249 250 251)"},children:"Actions"})]})}),s.jsx(Aa,{children:Hr.length===0?s.jsx(Qn,{children:s.jsx(yt,{colSpan:4+(v.phone?1:0)+(v.company?1:0)+(v.position?1:0)+g.length+(v.attendance?1:0)+(v.registered?1:0)+(v.emailStatus?1:0)+1,className:"text-center text-muted-foreground",children:d.length===0?"No participants found":"No results on this page"})}):Hr.map(J=>s.jsxs(Qn,{className:re.has(J.id)?"bg-blue-50":"",children:[s.jsx(yt,{className:"w-12",children:s.jsx("input",{type:"checkbox",checked:re.has(J.id),onChange:pe=>dn(J.id,pe.target.checked),className:"w-4 h-4 cursor-pointer"})}),s.jsxs(yt,{className:"font-mono text-xs truncate",title:J.id,style:{width:`${Z.id}px`,maxWidth:`${Z.id}px`},children:[J.id.substring(5,15),"..."]}),s.jsx(yt,{className:"font-medium truncate",title:J.name,style:{width:`${Z.name}px`,maxWidth:`${Z.name}px`},children:J.name}),s.jsx(yt,{className:"text-sm truncate",title:J.email,style:{width:`${Z.email}px`,maxWidth:`${Z.email}px`},children:J.email}),v.phone&&s.jsx(yt,{className:"truncate",style:{width:`${Z.phone}px`,maxWidth:`${Z.phone}px`},children:J.phone||"-"}),v.company&&s.jsx(yt,{className:"truncate",title:J.company||"-",style:{width:`${Z.company}px`,maxWidth:`${Z.company}px`},children:J.company||"-"}),v.position&&s.jsx(yt,{className:"truncate",title:J.position||"-",style:{width:`${Z.position}px`,maxWidth:`${Z.position}px`},children:J.position||"-"}),g.map(pe=>{const _e=`custom_${pe.name}`,ge=Z[_e]||150,ht=J.customData?.[pe.id]||J.customData?.[pe.name]||"-";return s.jsx(yt,{className:"truncate",title:ht,style:{width:`${ge}px`,maxWidth:`${ge}px`},children:ht},pe.id)}),v.attendance&&s.jsx(yt,{style:{width:`${Z.attendance}px`,maxWidth:`${Z.attendance}px`},children:oi(J)}),v.registered&&s.jsx(yt,{className:"text-sm text-muted-foreground truncate",style:{width:`${Z.registered}px`,maxWidth:`${Z.registered}px`},children:new Date(J.registeredAt).toLocaleDateString()}),v.emailStatus&&s.jsx(yt,{style:{width:`${Z.emailStatus}px`,maxWidth:`${Z.emailStatus}px`},children:rt(J)}),s.jsx(yt,{className:"text-right sticky right-0 bg-white border-l",style:{width:`${Z.actions}px`,minWidth:`${Z.actions}px`,position:"sticky",right:0,zIndex:20,backgroundColor:"white"},children:s.jsxs("div",{className:"flex gap-1 justify-end items-center",style:{minWidth:"130px"},children:[s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>jn(J),title:"Send email",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:s.jsx(bs,{className:"h-4 w-4"})}),s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>Pr(J),title:"Edit participant",children:s.jsx(_a,{className:"h-4 w-4 text-blue-600"})}),s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>Ni(J.id),title:"Delete participant",children:s.jsx(Ta,{className:"h-4 w-4 text-destructive"})})]})})]},J.id))})]})}),s.jsx("div",{className:"text-center py-1 text-xs text-gray-400 border-t bg-gray-50/50",children:" Scroll horizontally to see more columns "})]}),d.length>0&&s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white rounded-lg shadow-sm mt-3 border border-gray-200",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing ",Er+1," to ",Math.min(lr,d.length)," of ",d.length," participants"]})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Rows per page:"}),s.jsxs("select",{value:We,onChange:J=>{ut(Number(J.target.value)),Ye(1)},className:"h-8 rounded-md border border-input bg-background px-3 text-sm",children:[s.jsx("option",{value:10,children:"10"}),s.jsx("option",{value:25,children:"25"}),s.jsx("option",{value:50,children:"50"}),s.jsx("option",{value:100,children:"100"})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>Ye(1),disabled:De===1,children:"First"}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>Ye(J=>Math.max(1,J-1)),disabled:De===1,children:"Previous"}),s.jsxs("span",{className:"text-sm text-muted-foreground px-3",children:["Page ",De," of ",rn]}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>Ye(J=>Math.min(rn,J+1)),disabled:De===rn,children:"Next"}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>Ye(rn),disabled:De===rn,children:"Last"})]})]})]})]})]}),s.jsx(Pn,{open:kr,onOpenChange:Vt,children:s.jsxs(Dn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Send Email to Participant"}),s.jsxs(Jr,{children:["Send a personalized email to ",it?.name]})]}),vn?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx(Tr,{className:"h-12 w-12 animate-spin mx-auto text-purple-600"}),s.jsx("p",{className:"mt-4 text-gray-700",children:"Sending email..."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"To:"}),s.jsx("span",{className:"text-sm text-gray-900 ml-2",children:it?.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Email:"}),s.jsx("span",{className:"text-sm text-gray-900 ml-2",children:it?.email})]}),it?.email_send_count&&it?.email_send_count>0&&s.jsxs("div",{className:"text-sm text-gray-600",children:[" ",it?.email_send_count," email(s) previously sent"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Select Email Template"}),s.jsx("div",{className:"relative",children:s.jsxs(Kr,{value:qt,onValueChange:Hn,children:[s.jsx(Qr,{className:"w-full overflow-hidden",children:s.jsx(Zr,{placeholder:"Choose a template...",children:qt&&yn.length>0&&s.jsx("span",{className:"truncate block",children:yn.find(J=>J.id===qt)?.name||"Selected template"})})}),s.jsx(ls,{className:"max-w-[600px]",children:yn.length===0?s.jsx(Ut,{value:"none",disabled:!0,children:"No templates available"}):yn.map(J=>s.jsx(Ut,{value:J.id,children:J.name},J.id))})]})}),yn.length===0&&s.jsx("p",{className:"text-xs text-gray-600",children:"Create email templates in the Email Templates tab first"})]}),qt&&s.jsx(ei,{className:"border-blue-200 bg-blue-50",children:s.jsx(ti,{className:"text-sm text-blue-900",children:" Placeholders like {{name}}, {{email}}, {{company}} will be replaced with participant data"})}),s.jsx(ei,{className:"border-amber-200 bg-amber-50",children:s.jsxs(ti,{className:"text-sm text-amber-900",children:[" ",s.jsx("strong",{children:"Simulation Mode:"})," Email preview will be shown in console. Configure email service (SendGrid/AWS SES) to actually send emails."]})}),s.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[s.jsx(Ae,{onClick:()=>{Vt(!1),Gt(null),Hn("")},variant:"outline",children:"Cancel"}),s.jsxs(Ae,{onClick:Gn,className:"gradient-primary",disabled:!qt||yn.length===0,children:[s.jsx(fo,{className:"mr-2 h-4 w-4"}),"Send Email"]})]})]})]})})]})}function Ci({className:r,...e}){return s.jsx("textarea",{"data-slot":"textarea",className:Tt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...e})}function jT({eventId:r,accessToken:e}){const[n,o]=A.useState([]),[d,u]=A.useState([]),[g,x]=A.useState(!0),[v,y]=A.useState(!1),[S,E]=A.useState(!1),[T,I]=A.useState(null),[O,k]=A.useState(null),[P,L]=A.useState(null),[U,B]=A.useState(new Date),[G,ee]=A.useState({right:0}),se=A.useRef(null),V=A.useRef({}),[te,ne]=A.useState(""),[ce,oe]=A.useState(null),[H,W]=A.useState({title:"",description:"",startTime:"",endTime:"",location:""});A.useEffect(()=>{const Y=le=>{se.current&&!se.current.contains(le.target)&&L(null)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]),A.useEffect(()=>{T||(ne(""),oe(null))},[T]);const de=A.useCallback(Y=>{const le=Y.getBoundingClientRect(),Ce=window.innerHeight,De=window.innerWidth,Ye=Ce-le.bottom,We=le.top,ut=150,Ze={right:De-le.right};Ye<ut&&We>Ye?Ze.bottom=Ce-le.top+4:Ze.top=le.bottom+4,ee(Ze)},[]),X=async()=>{x(!0);try{console.log("[SUPABASE] Fetching agenda from Supabase for event:",r);const{data:Y,error:le}=await Le.from("agenda_items").select("*").eq("eventId",r).order("startTime",{ascending:!0});if(le)throw new Error(`Failed to fetch agenda: ${le.message}`);console.log("[SUPABASE] Found agenda items:",Y?.length);const Ce=(Y||[]).map((De,Ye)=>({...De,order:Ye}));o(Ce)}catch(Y){console.error("[SUPABASE] Error fetching agenda:",Y)}finally{x(!1)}},q=async()=>{try{console.log("[SUPABASE] Fetching participants from Supabase for event:",r);const{data:Y,error:le}=await Le.from("participants").select("*").eq("eventId",r);if(le)throw new Error(`Failed to fetch participants: ${le.message}`);console.log("[SUPABASE] Found participants:",Y?.length),u(Y||[]),B(new Date)}catch(Y){console.error("[SUPABASE] Error fetching participants:",Y)}};A.useEffect(()=>{X(),q()},[r,e]),A.useEffect(()=>{const Y=De=>{console.log("[AGENDA AUTO-REFRESH] Storage event detected:",De.key),De.key==="event_participants"&&(console.log("[AGENDA AUTO-REFRESH] Participant data changed, refreshing..."),q()),De.key==="event_agenda"&&(console.log("[AGENDA AUTO-REFRESH] Agenda data changed, refreshing..."),X())},le=De=>{console.log("[AGENDA AUTO-REFRESH] Custom participantsUpdated event detected:",De.detail),q()};window.addEventListener("storage",Y),window.addEventListener("participantsUpdated",le);const Ce=setInterval(()=>{console.log("[AGENDA AUTO-REFRESH] Polling for participant updates..."),q()},3e3);return()=>{window.removeEventListener("storage",Y),window.removeEventListener("participantsUpdated",le),clearInterval(Ce)}},[r]);const ie=async Y=>{Y.preventDefault(),E(!0);try{if(console.log("[SUPABASE] Saving agenda item:",H),O){const{error:le}=await Le.from("agenda_items").update({title:H.title,description:H.description,startTime:H.startTime,endTime:H.endTime,location:H.location}).eq("id",O.id);if(le)throw new Error(`Failed to update agenda item: ${le.message}`);console.log("[SUPABASE] Agenda item updated successfully")}else{const Ce={id:`agenda_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,eventId:r,title:H.title,description:H.description,startTime:H.startTime,endTime:H.endTime,location:H.location,createdAt:new Date().toISOString()},{error:De}=await Le.from("agenda_items").insert([Ce]);if(De)throw new Error(`Failed to create agenda item: ${De.message}`);console.log("[SUPABASE] Agenda item created successfully")}alert(O?"Agenda item updated successfully!":"Agenda item created successfully!"),W({title:"",description:"",startTime:"",endTime:"",location:""}),k(null),y(!1),await X()}catch(le){console.error("[SUPABASE] Error saving agenda item:",le),alert(le.message||(O?"Failed to update agenda item":"Failed to create agenda item"))}finally{E(!1)}},z=Y=>{k(Y),W({title:Y.title,description:Y.description,startTime:Y.startTime,endTime:Y.endTime,location:Y.location}),y(!0)},ue=Y=>{y(Y),Y||(k(null),W({title:"",description:"",startTime:"",endTime:"",location:""}))},be=async Y=>{if(confirm("Are you sure you want to delete this agenda item?"))try{console.log("[SUPABASE] Deleting agenda item:",Y);const{error:le}=await Le.from("agenda_items").delete().eq("id",Y);if(le)throw new Error(`Failed to delete agenda item: ${le.message}`);alert("Agenda item deleted successfully"),await X()}catch(le){console.error("[SUPABASE] Error deleting agenda item:",le),alert(le.message||"Failed to delete agenda item")}},re=Y=>Y?new Date(Y).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",we=Y=>d.filter(le=>le.attendance&&le.attendance.some(Ce=>Ce.agendaItem===Y)),Ie=Y=>{oe(le=>!le||le.field!==Y?{field:Y,direction:"asc"}:le.direction==="asc"?{field:Y,direction:"desc"}:null)},Oe=Y=>{let le=we(Y);if(te.trim()){const Ce=te.toLowerCase();le=le.filter(De=>De.name.toLowerCase().includes(Ce)||(De.company||"").toLowerCase().includes(Ce))}return ce&&le.sort((Ce,De)=>{let Ye,We;if(ce.field==="checkInTime"){const ut=Ce.attendance.find(Ot=>Ot.agendaItem===Y),Ze=De.attendance.find(Ot=>Ot.agendaItem===Y);Ye=ut?new Date(ut.timestamp).getTime():0,We=Ze?new Date(Ze.timestamp).getTime():0}else Ye=(Ce[ce.field]||"").toString().toLowerCase(),We=(De[ce.field]||"").toString().toLowerCase();return Ye<We?ce.direction==="asc"?-1:1:Ye>We?ce.direction==="asc"?1:-1:0}),le},ye=Y=>!ce||ce.field!==Y?s.jsx(rm,{className:"h-3 w-3 opacity-30"}):ce.direction==="asc"?s.jsx(ju,{className:"h-3 w-3 text-purple-600"}):s.jsx(Au,{className:"h-3 w-3 text-purple-600"});return g?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx(Tr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):s.jsxs(Wn,{className:"border-0 shadow-xl bg-white",children:[s.jsx(Vr,{className:"border-b border-gray-100 bg-gradient-to-r from-purple-50 to-pink-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Wr,{className:"flex items-center gap-3 text-2xl",children:[s.jsx("div",{className:"w-10 h-10 gradient-primary rounded-xl flex items-center justify-center shadow-md shadow-purple-500/30",children:s.jsx(xl,{className:"h-5 w-5 text-white"})}),"Event Agenda"]}),s.jsxs(Wi,{className:"flex items-center gap-3 mt-2 text-base",children:[s.jsx("span",{children:"Manage event schedule and sessions"}),s.jsxs("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"Auto-sync  Updated ",U.toLocaleTimeString()]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",className:"border-gray-300 hover:border-gray-400",size:"sm",onClick:()=>{X(),q()},children:[s.jsx(Vi,{className:"mr-2 h-4 w-4"}),"Refresh"]}),s.jsxs(Pn,{open:v,onOpenChange:ue,children:[s.jsx(yv,{asChild:!0,children:s.jsxs(Ae,{className:"gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:[s.jsx(cs,{className:"mr-2 h-4 w-4"}),"Add Session"]})}),s.jsxs(Dn,{children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:O?"Edit Agenda Item":"Create Agenda Item"}),s.jsx(Jr,{children:O?"Update the session details":"Add a new session or activity to the event schedule"})]}),s.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"title",children:"Session Title *"}),s.jsx(Ke,{id:"title",placeholder:"Opening Ceremony",value:H.title,onChange:Y=>W(le=>({...le,title:Y.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"description",children:"Description"}),s.jsx(Ci,{id:"description",placeholder:"Describe the session...",value:H.description,onChange:Y=>W(le=>({...le,description:Y.target.value})),rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"startTime",children:"Start Time *"}),s.jsx(Ke,{id:"startTime",type:"datetime-local",value:H.startTime,onChange:Y=>W(le=>({...le,startTime:Y.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"endTime",children:"End Time"}),s.jsx(Ke,{id:"endTime",type:"datetime-local",value:H.endTime,onChange:Y=>W(le=>({...le,endTime:Y.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"location",children:"Location"}),s.jsx(Ke,{id:"location",placeholder:"Main Hall",value:H.location,onChange:Y=>W(le=>({...le,location:Y.target.value}))})]}),s.jsx(Ae,{type:"submit",className:"w-full",disabled:S,children:S?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),O?"Updating...":"Creating..."]}):O?"Update Session":"Create Session"})]})]})]})]})]})}),s.jsxs(Zn,{className:"overflow-visible",children:[n.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(xl,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No agenda items yet"}),s.jsx("p",{className:"text-sm",children:'Click "Add Session" to create the event schedule'})]}):s.jsx("div",{className:"rounded-md border overflow-visible",children:s.jsxs(go,{children:[s.jsx(xo,{children:s.jsxs(Qn,{children:[s.jsx(_t,{children:"Session"}),s.jsx(_t,{children:"Start Time"}),s.jsx(_t,{children:"End Time"}),s.jsx(_t,{children:"Location"}),s.jsx(_t,{children:"Check-in Number"}),s.jsx(_t,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:n.sort((Y,le)=>new Date(Y.startTime).getTime()-new Date(le.startTime).getTime()).map(Y=>s.jsxs(Qn,{children:[s.jsx(yt,{children:s.jsxs("div",{children:[s.jsx("div",{children:Y.title}),Y.description&&s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:Y.description})]})}),s.jsx(yt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yc,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:re(Y.startTime)})]})}),s.jsx(yt,{children:s.jsx("span",{className:"text-sm",children:re(Y.endTime)})}),s.jsx(yt,{children:Y.location?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(am,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:Y.location})]}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsx(yt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ea,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-semibold text-green-700",children:we(Y.title).length}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"attendees"})]})}),s.jsx(yt,{className:"text-right",children:s.jsxs("div",{className:"flex gap-1 justify-end items-center",children:[s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>I(Y.title),title:"View Participants",children:s.jsx(Ea,{className:"h-4 w-4"})}),s.jsx("div",{className:"relative",children:s.jsx(Ae,{ref:le=>{le&&(V.current[Y.id]=le)},variant:"ghost",size:"sm",title:"More options",onClick:le=>{const Ce=P!==Y.id;L(Ce?Y.id:null),Ce&&le.currentTarget&&de(le.currentTarget)},children:s.jsx(cS,{className:"h-4 w-4"})})})]})})]},Y.id))})]})}),P&&s.jsx("div",{ref:se,className:"fixed w-48 bg-popover border rounded-md shadow-xl p-1",style:{top:G.top,bottom:G.bottom,right:G.right,zIndex:9999,maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:n.find(Y=>Y.id===P)&&(()=>{const Y=n.find(le=>le.id===P);return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>{const le=`${window.location.origin}${window.location.pathname}?checkin=${Y.id}`;window.open(le,"_blank"),L(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-accent hover:text-accent-foreground outline-none cursor-pointer text-left",children:[s.jsx(jS,{className:"h-4 w-4"}),"Open Check-In Page"]}),s.jsxs("button",{onClick:()=>{z(Y),L(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-accent hover:text-accent-foreground outline-none cursor-pointer text-left",children:[s.jsx(_a,{className:"h-4 w-4"}),"Modify"]}),s.jsxs("button",{onClick:()=>{be(Y.id),L(null)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-destructive/10 text-destructive outline-none cursor-pointer text-left",children:[s.jsx(Ta,{className:"h-4 w-4"}),"Delete"]})]})})()}),s.jsx(Pn,{open:!!T,onOpenChange:Y=>!Y&&I(null),children:s.jsxs(Dn,{className:"flex flex-col p-0",style:{width:"90vw",maxWidth:"90vw",height:"90vh",maxHeight:"90vh"},children:[s.jsxs(Bn,{className:"px-6 py-4 border-b bg-gradient-to-r from-purple-50 to-blue-50 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Fn,{className:"text-xl",children:["Participants for: ",T]}),s.jsxs(Jr,{className:"mt-1",children:[T&&Oe(T).length," attendees",te&&T&&` (filtered from ${we(T).length} total)`]})]}),s.jsxs("button",{onClick:()=>{if(!T)return;const Y=Oe(T),le=["Name","Email","Company","Position","Check-in Time"],Ce=Y.map(Ze=>{const Ot=Ze.attendance.find(Me=>Me.agendaItem===T);return[Ze.name,Ze.email,Ze.company||"-",Ze.position||"-",Ot?new Date(Ot.timestamp).toLocaleString():"-"]}),De=[le.join(","),...Ce.map(Ze=>Ze.map(Ot=>`"${Ot}"`).join(","))].join(`
`),Ye=new Blob([De],{type:"text/csv;charset=utf-8;"}),We=document.createElement("a"),ut=URL.createObjectURL(Ye);We.setAttribute("href",ut),We.setAttribute("download",`${T}_participants_${new Date().toISOString().split("T")[0]}.csv`),We.style.visibility="hidden",document.body.appendChild(We),We.click(),document.body.removeChild(We)},className:"inline-flex items-center gap-2 px-4 py-2 gradient-primary text-white rounded-lg hover:opacity-90 transition-opacity shadow-md shadow-purple-500/30",children:[s.jsx(im,{className:"h-4 w-4"}),"Export CSV"]})]}),s.jsxs("div",{className:"mt-4 relative",children:[s.jsx(jc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(Ke,{type:"text",placeholder:"Search by name or company...",value:te,onChange:Y=>ne(Y.target.value),className:"pl-10"})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden relative",children:T&&Oe(T).length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Ea,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),te?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-lg",children:['No participants found matching "',te,'"']}),s.jsx("button",{onClick:()=>ne(""),className:"mt-4 text-purple-600 hover:text-purple-700 underline",children:"Clear search"})]}):s.jsx("p",{className:"text-lg",children:"No participants yet for this session"})]}):s.jsx("div",{className:"overflow-x-auto overflow-y-auto h-full",style:{scrollbarWidth:"thin",scrollbarColor:"#a855f7 #f3f4f6"},children:s.jsxs("table",{className:"w-full caption-bottom text-sm",style:{minWidth:"800px"},children:[s.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,backgroundColor:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},className:"border-b",children:s.jsxs("tr",{className:"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",children:[s.jsx("th",{className:"text-foreground h-10 px-4 text-left align-middle font-medium whitespace-nowrap cursor-pointer hover:bg-purple-50 transition-colors",style:{minWidth:"180px"},onClick:()=>Ie("name"),children:s.jsxs("div",{className:"flex items-center gap-2",children:["Name",ye("name")]})}),s.jsx("th",{className:"text-foreground h-10 px-4 text-left align-middle font-medium whitespace-nowrap cursor-pointer hover:bg-purple-50 transition-colors",style:{minWidth:"220px"},onClick:()=>Ie("email"),children:s.jsxs("div",{className:"flex items-center gap-2",children:["Email",ye("email")]})}),s.jsx("th",{className:"text-foreground h-10 px-4 text-left align-middle font-medium whitespace-nowrap cursor-pointer hover:bg-purple-50 transition-colors",style:{minWidth:"180px"},onClick:()=>Ie("company"),children:s.jsxs("div",{className:"flex items-center gap-2",children:["Company",ye("company")]})}),s.jsx("th",{className:"text-foreground h-10 px-4 text-left align-middle font-medium whitespace-nowrap cursor-pointer hover:bg-purple-50 transition-colors",style:{minWidth:"150px"},onClick:()=>Ie("position"),children:s.jsxs("div",{className:"flex items-center gap-2",children:["Position",ye("position")]})}),s.jsx("th",{className:"text-foreground h-10 px-4 text-left align-middle font-medium whitespace-nowrap cursor-pointer hover:bg-purple-50 transition-colors",style:{minWidth:"180px"},onClick:()=>Ie("checkInTime"),children:s.jsxs("div",{className:"flex items-center gap-2",children:["Check-in Time",ye("checkInTime")]})})]})}),s.jsx("tbody",{className:"[&_tr:last-child]:border-0",children:T&&Oe(T).map(Y=>{const le=Y.attendance.find(Ce=>Ce.agendaItem===T);return s.jsxs("tr",{className:"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",children:[s.jsx("td",{className:"h-10 px-4 align-middle font-medium",style:{minWidth:"180px"},children:Y.name}),s.jsx("td",{className:"h-10 px-4 align-middle",style:{minWidth:"220px"},children:Y.email}),s.jsx("td",{className:"h-10 px-4 align-middle",style:{minWidth:"180px"},children:Y.company||"-"}),s.jsx("td",{className:"h-10 px-4 align-middle",style:{minWidth:"150px"},children:Y.position||"-"}),s.jsx("td",{className:"h-10 px-4 align-middle text-sm text-muted-foreground",style:{minWidth:"180px"},children:le&&new Date(le.timestamp).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]},Y.id)})})]})})}),T&&we(T).length>5&&s.jsx("div",{className:"text-center py-2 text-xs text-gray-400 border-t bg-gray-50/50",children:" Scroll to see all participants "})]})})]})]})}var Hu="Switch",[IT]=_s(Hu),[TT,RT]=IT(Hu),k2=A.forwardRef((r,e)=>{const{__scopeSwitch:n,name:o,checked:d,defaultChecked:u,required:g,disabled:x,value:v="on",onCheckedChange:y,form:S,...E}=r,[T,I]=A.useState(null),O=ln(e,B=>I(B)),k=A.useRef(!1),P=T?S||!!T.closest("form"):!0,[L,U]=ni({prop:d,defaultProp:u??!1,onChange:y,caller:Hu});return s.jsxs(TT,{scope:n,checked:L,disabled:x,children:[s.jsx(zt.button,{type:"button",role:"switch","aria-checked":L,"aria-required":g,"data-state":M2(L),"data-disabled":x?"":void 0,disabled:x,value:v,...E,ref:O,onClick:Ht(r.onClick,B=>{U(G=>!G),P&&(k.current=B.isPropagationStopped(),k.current||B.stopPropagation())})}),P&&s.jsx(D2,{control:T,bubbles:!k.current,name:o,value:v,checked:L,required:g,disabled:x,form:S,style:{transform:"translateX(-100%)"}})]})});k2.displayName=Hu;var O2="SwitchThumb",P2=A.forwardRef((r,e)=>{const{__scopeSwitch:n,...o}=r,d=RT(O2,n);return s.jsx(zt.span,{"data-state":M2(d.checked),"data-disabled":d.disabled?"":void 0,...o,ref:e})});P2.displayName=O2;var kT="SwitchBubbleInput",D2=A.forwardRef(({__scopeSwitch:r,control:e,checked:n,bubbles:o=!0,...d},u)=>{const g=A.useRef(null),x=ln(g,u),v=Uu(n),y=Fu(e);return A.useEffect(()=>{const S=g.current;if(!S)return;const E=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(E,"checked").set;if(v!==n&&I){const O=new Event("click",{bubbles:o});I.call(S,n),S.dispatchEvent(O)}},[v,n,o]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...d,tabIndex:-1,ref:x,style:{...d.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});D2.displayName=kT;function M2(r){return r?"checked":"unchecked"}var OT=k2,PT=P2;function Qs({className:r,...e}){return s.jsx(OT,{"data-slot":"switch",className:Tt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:s.jsx(PT,{"data-slot":"switch-thumb",className:Tt("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function DT({eventId:r,onUpdated:e}){const[n,o]=A.useState({logoAlignment:"center",logoSize:"medium",primaryColor:"#7C3AED",backgroundColor:"#FFFFFF",fontFamily:"sans-serif",fontColor:"#1F2937",buttonColor:"#7C3AED",buttonText:"Submit Registration",formWidth:"medium",borderRadius:"medium",fontSize:"medium",successMessage:"Thank you for registering! We will contact you soon.",footerText:"",footerColor:"#6B7280",showDate:!0,showLocation:!0,showDescription:!0,autoSendConfirmation:!1,confirmationTemplateId:""}),[d,u]=A.useState([{name:"name",label:"Full Name",type:"text",required:!0,visible:!0,locked:!0},{name:"email",label:"Email Address",type:"email",required:!0,visible:!0,locked:!0},{name:"phone",label:"Phone Number",type:"tel",required:!1,visible:!0},{name:"company",label:"Company",type:"text",required:!1,visible:!0},{name:"position",label:"Position",type:"text",required:!1,visible:!0}]),[g,x]=A.useState([]),[v,y]=A.useState(!1),[S,E]=A.useState(!0),T=A.useRef(null),[I,O]=A.useState([]),[k,P]=A.useState(!1),[L,U]=A.useState(null),[B,G]=A.useState(!1);A.useEffect(()=>{ee()},[r]);const ee=async()=>{E(!0);try{const{data:q,error:ie}=await Le.from("events").select("*").eq("id",r).single();if(ie){console.error("[BrandingSettings] Error loading event:",ie);return}if(q.branding&&o(q.branding),q.customFields){const z=q.customFields.map(ue=>({...ue,visible:ue.visible!==!1}));x(z)}q.columnVisibility&&u(z=>z.map(ue=>ue.name==="phone"?{...ue,visible:q.columnVisibility.phone!==!1}:ue.name==="company"?{...ue,visible:q.columnVisibility.company!==!1}:ue.name==="position"?{...ue,visible:q.columnVisibility.position!==!1}:ue)),console.log("[BrandingSettings] Loaded:",{branding:q.branding,customFields:q.customFields}),await se()}catch(q){console.error("[BrandingSettings] Load error:",q)}finally{E(!1)}},se=async()=>{try{const{data:q,error:ie}=await Le.from("email_templates").select("id, name, subject").eq("event_id",r).order("name");if(ie){console.error("[BrandingSettings] Error loading templates:",ie);return}O(q||[])}catch(q){console.error("[BrandingSettings] Template load error:",q)}},V=(q,ie)=>{ie?u(z=>z.map(ue=>ue.name===q?{...ue,visible:!ue.visible}:ue)):x(z=>z.map(ue=>ue.name===q?{...ue,visible:!ue.visible}:ue))},te=(q,ie)=>{ie?u(z=>z.map(ue=>ue.name===q&&!ue.locked?{...ue,required:!ue.required}:ue)):x(z=>z.map(ue=>ue.name===q?{...ue,required:!ue.required}:ue))},ne=(q,ie)=>{x(z=>{const ue=z.findIndex(we=>we.id===q);if(ue===-1)return z;const be=ie==="up"?ue-1:ue+1;if(be<0||be>=z.length)return z;const re=[...z];return[re[ue],re[be]]=[re[be],re[ue]],re.map((we,Ie)=>({...we,order:Ie}))})},ce=q=>{U(q),P(!0)},oe=async()=>{L&&(x(q=>q.map(ie=>ie.id===L.id?L:ie)),P(!1),U(null))},H=q=>{const ie=q.target?.files?.[0];if(!ie)return;if(!ie.type.startsWith("image/")){alert("Please upload an image file");return}if(ie.size>2*1024*1024){alert("Image size must be less than 2MB");return}const z=new FileReader;z.onload=ue=>{o(be=>({...be,logoUrl:ue.target?.result}))},z.readAsDataURL(ie)},W=()=>{o(q=>({...q,logoUrl:void 0})),T.current&&(T.current.value="")},de=async()=>{y(!0);try{console.log("[BrandingSettings] Saving settings:",{autoSendConfirmation:n.autoSendConfirmation,confirmationTemplateId:n.confirmationTemplateId,fullBranding:n});const q={phone:d.find(z=>z.name==="phone")?.visible??!0,company:d.find(z=>z.name==="company")?.visible??!0,position:d.find(z=>z.name==="position")?.visible??!0,attendance:!0,registered:!0},{error:ie}=await Le.from("events").update({branding:n,customFields:g,columnVisibility:q}).eq("id",r);if(ie)throw ie;console.log("[BrandingSettings]  Settings saved successfully"),alert(" Settings saved successfully!"),e?.()}catch(q){console.error("[BrandingSettings] Save error:",q),alert(" Failed to save settings")}finally{y(!1)}},X=()=>{const q=[];return d.filter(ie=>ie.visible).forEach(ie=>{q.push({...ie,isBuiltIn:!0})}),g.filter(ie=>ie.visible!==!1).sort((ie,z)=>ie.order-z.order).forEach(ie=>{q.push({...ie,isBuiltIn:!1})}),q};return S?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading settings..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(Wn,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:s.jsxs(Zn,{className:"py-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Pe,{className:"text-sm font-semibold text-blue-900 mb-1 block",children:" Public Registration Link"}),s.jsxs("code",{className:"text-xs bg-white px-3 py-2 rounded border border-blue-200 block overflow-x-auto",children:[window.location.origin,"/#/register/",r]})]}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/#/register/${r}`),alert(" Link copied to clipboard!")},className:"shrink-0 border-blue-300 hover:bg-blue-100",children:" Copy Link"})]}),s.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Share this link with participants to allow them to self-register"})]})}),s.jsxs(Ec,{defaultValue:"fields",className:"w-full",children:[s.jsxs(Sc,{className:"grid w-full grid-cols-2",children:[s.jsxs(Ir,{value:"fields",className:"flex items-center gap-2",children:[s.jsx(i1,{className:"h-4 w-4"}),"Form Fields"]}),s.jsxs(Ir,{value:"appearance",className:"flex items-center gap-2",children:[s.jsx(C0,{className:"h-4 w-4"}),"Appearance & Styling"]})]}),s.jsx(ys,{value:"fields",className:"space-y-4",children:s.jsxs(Wn,{children:[s.jsxs(Vr,{children:[s.jsx(Wr,{children:"Registration Form Fields"}),s.jsx(Wi,{children:"Configure which fields appear on your public registration form. Changes are automatically synced with the participants table."})]}),s.jsx(Zn,{children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Available Fields"}),s.jsxs(Ae,{variant:"outline",size:"sm",onClick:()=>G(!0),children:[s.jsx(hu,{className:"h-4 w-4 mr-1"}),"Manage Columns"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase",children:"Default Fields"}),d.map(q=>s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-white hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm",children:q.label}),q.locked&&s.jsx(b0,{className:"h-3 w-3 text-gray-400"}),q.required&&s.jsx(mn,{variant:"destructive",className:"text-xs",children:"Required"})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Type: ",q.type]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!q.locked&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pe,{htmlFor:`req-${q.name}`,className:"text-xs",children:"Required"}),s.jsx(Qs,{id:`req-${q.name}`,checked:q.required,onCheckedChange:()=>te(q.name,!0)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pe,{htmlFor:`vis-${q.name}`,className:"text-xs",children:"Visible"}),s.jsx(Qs,{id:`vis-${q.name}`,checked:q.visible,onCheckedChange:()=>V(q.name,!0),disabled:q.locked})]})]})]},q.name))]}),g.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase",children:"Custom Fields"}),g.map((q,ie)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-white hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("button",{onClick:()=>ne(q.id,"up"),disabled:ie===0,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30",children:s.jsx(ju,{className:"h-3 w-3"})}),s.jsx("button",{onClick:()=>ne(q.id,"down"),disabled:ie===g.length-1,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30",children:s.jsx(Au,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm",children:q.label}),q.required&&s.jsx(mn,{variant:"destructive",className:"text-xs",children:"Required"})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Type: ",q.type]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>ce(q),children:s.jsx(o1,{className:"h-3 w-3"})}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pe,{htmlFor:`req-${q.id}`,className:"text-xs",children:"Required"}),s.jsx(Qs,{id:`req-${q.id}`,checked:q.required,onCheckedChange:()=>te(q.name,!1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pe,{htmlFor:`vis-${q.id}`,className:"text-xs",children:"Visible"}),s.jsx(Qs,{id:`vis-${q.id}`,checked:q.visible!==!1,onCheckedChange:()=>V(q.name,!1)})]})]})]},q.id))]}),s.jsxs(Ae,{variant:"outline",className:"w-full",onClick:()=>G(!0),children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"Add Custom Field"]})]}),s.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm",children:" Live Preview"}),s.jsx("span",{className:"text-xs opacity-80",children:"Actual form appearance"})]}),s.jsxs("div",{className:`p-6 ${n.formWidth==="narrow"?"max-w-sm":n.formWidth==="wide"?"max-w-2xl":"max-w-md"} mx-auto`,style:{fontFamily:n.fontFamily,backgroundColor:n.backgroundColor,color:n.fontColor||"#1F2937",fontSize:n.fontSize==="small"?"0.875rem":n.fontSize==="large"?"1.125rem":"1rem"},children:[s.jsx("style",{children:`
                      /* Microsoft Forms-style transparent inputs for preview */
                      .preview-form input,
                      .preview-form textarea,
                      .preview-form button[role="combobox"] {
                        background-color: rgba(255, 255, 255, 0.1) !important;
                        backdrop-filter: blur(10px);
                        border: none !important;
                        border-bottom: 2px solid rgba(0, 0, 0, 0.2) !important;
                        border-radius: 4px 4px 0 0 !important;
                        transition: all 0.3s ease;
                      }
                      
                      .preview-form input:hover,
                      .preview-form textarea:hover,
                      .preview-form button[role="combobox"]:hover {
                        background-color: rgba(255, 255, 255, 0.15) !important;
                        border-bottom-color: rgba(0, 0, 0, 0.3) !important;
                      }
                    `}),s.jsxs("div",{className:"space-y-4 bg-white/60 backdrop-blur-md p-6 shadow-xl border border-white/20 preview-form",style:{borderRadius:n.borderRadius==="none"?"0":n.borderRadius==="small"?"4px":n.borderRadius==="large"?"12px":"8px"},children:[n.logoUrl&&s.jsx("div",{className:`flex justify-${n.logoAlignment||"center"} mb-4`,children:s.jsx("img",{src:n.logoUrl,alt:"Logo",className:`${n.logoSize==="small"?"h-12":n.logoSize==="large"?"h-24":"h-16"}`})}),n.customHeader&&s.jsx("div",{className:"text-center mb-6",children:s.jsx("p",{style:{color:n.primaryColor},className:"font-semibold text-lg",children:n.customHeader})}),X().map((q,ie)=>s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs(Pe,{className:"text-sm font-medium",style:{color:n.fontColor||"#1F2937"},children:[q.label,q.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),q.type==="textarea"?s.jsx(Ci,{placeholder:q.placeholder||`Enter ${q.label.toLowerCase()}`,disabled:!0,className:"opacity-60",style:{borderRadius:n.borderRadius==="none"?"0":n.borderRadius==="small"?"4px":n.borderRadius==="large"?"12px":"8px"}}):q.type==="select"?s.jsx(Kr,{disabled:!0,children:s.jsx(Qr,{className:"opacity-60",style:{borderRadius:n.borderRadius==="none"?"0":n.borderRadius==="small"?"4px":n.borderRadius==="large"?"12px":"8px"},children:s.jsx(Zr,{placeholder:`Select ${q.label.toLowerCase()}`})})}):s.jsx(Ke,{type:q.type,placeholder:q.placeholder||`Enter ${q.label.toLowerCase()}`,disabled:!0,className:"opacity-60",style:{borderRadius:n.borderRadius==="none"?"0":n.borderRadius==="small"?"4px":n.borderRadius==="large"?"12px":"8px"}})]},ie)),s.jsx(Ae,{className:"w-full mt-6 text-white font-semibold",disabled:!0,style:{backgroundColor:n.buttonColor||n.primaryColor,borderRadius:n.borderRadius==="none"?"0":n.borderRadius==="small"?"4px":n.borderRadius==="large"?"12px":"8px"},children:n.buttonText||"Submit Registration"}),n.successMessage&&s.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 text-green-800 text-sm text-center",style:{borderRadius:n.borderRadius==="none"?"0":n.borderRadius==="small"?"4px":n.borderRadius==="large"?"12px":"8px"},children:n.successMessage}),n.footerText&&s.jsx("div",{className:"mt-6 text-center text-xs",style:{color:n.footerColor||"#6B7280"},children:n.footerText})]})]})]})]})})]})}),s.jsx(ys,{value:"appearance",className:"space-y-4",children:s.jsxs(Wn,{children:[s.jsxs(Vr,{children:[s.jsx(Wr,{children:"Appearance & Branding"}),s.jsx(Wi,{children:"Customize every aspect of your registration form's look and feel"})]}),s.jsxs(Zn,{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-4 pb-6 border-b",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx(yl,{className:"h-5 w-5"}),"Logo Settings"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Event Logo"}),n.logoUrl?s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:n.logoUrl,alt:"Logo",className:"h-16 object-contain"}),s.jsxs(Ae,{variant:"outline",size:"sm",onClick:W,children:[s.jsx(po,{className:"h-4 w-4 mr-1"}),"Remove"]})]}):s.jsxs("div",{children:[s.jsx(Ke,{ref:T,type:"file",accept:"image/*",onChange:H,className:"hidden",id:"logo-upload"}),s.jsx(Pe,{htmlFor:"logo-upload",className:"cursor-pointer",children:s.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center hover:bg-gray-50 transition-colors",children:[s.jsx(yl,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload logo (Max 2MB)"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, SVG supported"})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Logo Alignment"}),s.jsxs(Kr,{value:n.logoAlignment,onValueChange:q=>o(ie=>({...ie,logoAlignment:q})),children:[s.jsx(Qr,{children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"left",children:"Left"}),s.jsx(Ut,{value:"center",children:"Center"}),s.jsx(Ut,{value:"right",children:"Right"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Logo Size"}),s.jsxs(Kr,{value:n.logoSize,onValueChange:q=>o(ie=>({...ie,logoSize:q})),children:[s.jsx(Qr,{children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"small",children:"Small (48px)"}),s.jsx(Ut,{value:"medium",children:"Medium (64px)"}),s.jsx(Ut,{value:"large",children:"Large (96px)"})]})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4 pb-6 border-b",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx(wl,{className:"h-5 w-5"}),"Header Display"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Choose what information to show in the event header"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(Pe,{className:"font-medium",children:"Show Event Date"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Display event date with calendar icon"})]}),s.jsx(Qs,{checked:n.showDate!==!1,onCheckedChange:q=>o(ie=>({...ie,showDate:q}))})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(Pe,{className:"font-medium",children:"Show Location"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Display event location with map pin icon"})]}),s.jsx(Qs,{checked:n.showLocation!==!1,onCheckedChange:q=>o(ie=>({...ie,showLocation:q}))})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(Pe,{className:"font-medium",children:"Show Description"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Display event description text"})]}),s.jsx(Qs,{checked:n.showDescription!==!1,onCheckedChange:q=>o(ie=>({...ie,showDescription:q}))})]})]})]}),s.jsxs("div",{className:"space-y-4 pb-6 border-b",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx(C0,{className:"h-5 w-5"}),"Color Scheme"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Primary Color"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Used for headings and accents"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"color",value:n.primaryColor,onChange:q=>o(ie=>({...ie,primaryColor:q.target.value})),className:"w-20 h-10 cursor-pointer"}),s.jsx(Ke,{type:"text",value:n.primaryColor,onChange:q=>o(ie=>({...ie,primaryColor:q.target.value})),placeholder:"#7C3AED",className:"flex-1 font-mono"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Background Color"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Form background"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"color",value:n.backgroundColor,onChange:q=>o(ie=>({...ie,backgroundColor:q.target.value})),className:"w-20 h-10 cursor-pointer"}),s.jsx(Ke,{type:"text",value:n.backgroundColor,onChange:q=>o(ie=>({...ie,backgroundColor:q.target.value})),placeholder:"#FFFFFF",className:"flex-1 font-mono"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Text Color"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Main text and labels"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"color",value:n.fontColor||"#1F2937",onChange:q=>o(ie=>({...ie,fontColor:q.target.value})),className:"w-20 h-10 cursor-pointer"}),s.jsx(Ke,{type:"text",value:n.fontColor||"#1F2937",onChange:q=>o(ie=>({...ie,fontColor:q.target.value})),placeholder:"#1F2937",className:"flex-1 font-mono"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Button Color"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Submit button background"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"color",value:n.buttonColor||n.primaryColor,onChange:q=>o(ie=>({...ie,buttonColor:q.target.value})),className:"w-20 h-10 cursor-pointer"}),s.jsx(Ke,{type:"text",value:n.buttonColor||n.primaryColor,onChange:q=>o(ie=>({...ie,buttonColor:q.target.value})),placeholder:"#7C3AED",className:"flex-1 font-mono"})]})]})]})]}),s.jsxs("div",{className:"space-y-4 pb-6 border-b",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx(hu,{className:"h-5 w-5"}),"Typography"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Font Family"}),s.jsxs(Kr,{value:n.fontFamily,onValueChange:q=>o(ie=>({...ie,fontFamily:q})),children:[s.jsx(Qr,{children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"sans-serif",children:"Sans Serif (Modern)"}),s.jsx(Ut,{value:"serif",children:"Serif (Classic)"}),s.jsx(Ut,{value:"monospace",children:"Monospace (Technical)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Font Size"}),s.jsxs(Kr,{value:n.fontSize||"medium",onValueChange:q=>o(ie=>({...ie,fontSize:q})),children:[s.jsx(Qr,{children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"small",children:"Small"}),s.jsx(Ut,{value:"medium",children:"Medium"}),s.jsx(Ut,{value:"large",children:"Large"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4 pb-6 border-b",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx(i1,{className:"h-5 w-5"}),"Form Layout"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Form Width"}),s.jsxs(Kr,{value:n.formWidth||"medium",onValueChange:q=>o(ie=>({...ie,formWidth:q})),children:[s.jsx(Qr,{children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"narrow",children:"Narrow (400px)"}),s.jsx(Ut,{value:"medium",children:"Medium (600px)"}),s.jsx(Ut,{value:"wide",children:"Wide (800px)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Border Radius"}),s.jsxs(Kr,{value:n.borderRadius||"medium",onValueChange:q=>o(ie=>({...ie,borderRadius:q})),children:[s.jsx(Qr,{children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"none",children:"None (Sharp)"}),s.jsx(Ut,{value:"small",children:"Small (4px)"}),s.jsx(Ut,{value:"medium",children:"Medium (8px)"}),s.jsx(Ut,{value:"large",children:"Large (12px)"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx(o1,{className:"h-5 w-5"}),"Custom Text"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Custom Header Text"}),s.jsx(Ci,{placeholder:"Welcome message or event description...",value:n.customHeader||"",onChange:q=>o(ie=>({...ie,customHeader:q.target.value})),rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Submit Button Text"}),s.jsx(Ke,{placeholder:"Submit Registration",value:n.buttonText||"Submit Registration",onChange:q=>o(ie=>({...ie,buttonText:q.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Success Message"}),s.jsx(Ci,{placeholder:"Message shown after successful registration...",value:n.successMessage||"",onChange:q=>o(ie=>({...ie,successMessage:q.target.value})),rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Footer Text"}),s.jsx(Ke,{placeholder:"Contact info or additional notes...",value:n.footerText||"",onChange:q=>o(ie=>({...ie,footerText:q.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Footer Text Color"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Color for footer text below the form"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"color",value:n.footerColor||"#6B7280",onChange:q=>o(ie=>({...ie,footerColor:q.target.value})),className:"w-20 h-10 cursor-pointer"}),s.jsx(Ke,{type:"text",value:n.footerColor||"#6B7280",onChange:q=>o(ie=>({...ie,footerColor:q.target.value})),placeholder:"#6B7280",className:"flex-1 font-mono"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[s.jsx(bs,{className:"h-5 w-5"}),"Email Confirmation"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Automatically send confirmation email after registration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(Pe,{className:"font-medium",children:"Auto Send Confirmation"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Send email automatically when someone registers"})]}),s.jsx(Qs,{checked:n.autoSendConfirmation||!1,onCheckedChange:q=>o(ie=>({...ie,autoSendConfirmation:q}))})]}),n.autoSendConfirmation&&s.jsxs("div",{className:"space-y-2 pl-4 border-l-2 border-purple-300",children:[s.jsx(Pe,{children:"Email Template"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Choose which template to use for confirmation emails"}),s.jsxs(Kr,{value:n.confirmationTemplateId||"",onValueChange:q=>o(ie=>({...ie,confirmationTemplateId:q})),children:[s.jsx(Qr,{children:s.jsx(Zr,{placeholder:"Select email template..."})}),s.jsx(ls,{children:I.length===0?s.jsx(Ut,{value:"",disabled:!0,children:"No templates available"}):I.map(q=>s.jsxs(Ut,{value:q.id,children:[q.name," - ",q.subject]},q.id))})]}),I.length===0&&s.jsx("p",{className:"text-xs text-amber-600 mt-2",children:" No email templates found. Create templates in Email Center first."})]})]})]})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsxs(Ae,{onClick:()=>window.open(`${window.location.origin}${window.location.pathname}#/register/${r}`,"_blank"),variant:"outline",children:[s.jsx(wl,{className:"h-4 w-4 mr-2"}),"Preview Form"]}),s.jsxs(Ae,{onClick:de,disabled:v,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[s.jsx(jw,{className:"h-4 w-4 mr-2"}),v?"Saving...":"Save All Settings"]})]}),s.jsx(Pn,{open:B,onOpenChange:G,children:s.jsxs(Dn,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Manage Columns"}),s.jsx(Jr,{children:"Add, edit, or remove custom fields for your participants table"})]}),s.jsx(R2,{eventId:r,onFieldsUpdated:()=>{ee(),G(!1)}})]})}),s.jsx(Pn,{open:k,onOpenChange:P,children:s.jsxs(Dn,{children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Edit Field"}),s.jsx(Jr,{children:"Customize the field properties"})]}),L&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Field Label"}),s.jsx(Ke,{value:L.label,onChange:q=>U({...L,label:q.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Placeholder Text"}),s.jsx(Ke,{value:L.placeholder||"",onChange:q=>U({...L,placeholder:q.target.value}),placeholder:"Enter hint text..."})]})]}),s.jsxs(Bs,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),s.jsx(Ae,{onClick:oe,children:"Save Changes"})]})]})})]})}function MT({eventId:r}){const[e,n]=A.useState([]),[o,d]=A.useState(!1),[u,g]=A.useState(!1),[x,v]=A.useState(null),[y,S]=A.useState(!1),[E,T]=A.useState("visual"),[I,O]=A.useState(!1),[k,P]=A.useState(!1),[L,U]=A.useState(null),[B,G]=A.useState(!1),[ee,se]=A.useState({sent:0,total:0,failed:0}),[V,te]=A.useState(!1),[ne,ce]=A.useState(null),[oe,H]=A.useState(""),[W,de]=A.useState({name:"",subject:"",body:"",type:"registration_confirmation",attachments:[],include_qr_code:!1});A.useEffect(()=>{X()},[r]);const X=async()=>{try{const{data:Z,error:Te}=await Le.from("email_templates").select("*").eq("event_id",r).order("created_at",{ascending:!1});Te?console.error("Error loading email templates:",Te):n(Z||[])}catch(Z){console.error("Error loading email templates:",Z)}},q=async Z=>{const Te=Z.target.files?.[0];if(Te){if(Te.size>5*1024*1024){alert("File size must be less than 5MB");return}try{O(!0);const Be=Te.name.replace(/[^a-zA-Z0-9.-_]/g,"_"),Rt=Date.now(),Ue=Math.random().toString(36).substring(7),Pt=`${r}/${Rt}_${Ue}_${Be}`;console.log("[Upload] Original filename:",Te.name),console.log("[Upload] Sanitized filename:",Be),console.log("[Upload] Storage path:",Pt);const{error:Mt}=await Le.storage.from("email-attachments").upload(Pt,Te,{cacheControl:"3600",upsert:!1});if(Mt){console.error("Error uploading file:",Mt),Mt.message.includes("Bucket not found")||Mt.message.includes("not found")?alert(` Storage bucket "email-attachments" belum dibuat!

Silakan:
1. Buka Supabase Dashboard > Storage
2. Create bucket: "email-attachments"
3. Centang "Public bucket"
4. Refresh page ini`):Mt.message.includes("row-level security")||Mt.message.includes("policy")?alert(` Storage bucket policy belum di-set!

Silakan:
1. Buka Supabase Dashboard > Storage > email-attachments
2. Go to Policies tab
3. Disable RLS atau tambah policy untuk INSERT
4. Refresh page ini`):alert("Failed to upload file: "+Mt.message);return}const{data:{publicUrl:Yt}}=Le.storage.from("email-attachments").getPublicUrl(Pt);de({...W,attachments:[...W.attachments,Yt]})}catch(Be){console.error("Error uploading file:",Be),alert("Failed to upload file")}finally{O(!1),Z.target.value=""}}},ie=Z=>{de({...W,attachments:W.attachments.filter(Te=>Te!==Z)})},z=Z=>{const Te=Z.split("/");return Te[Te.length-1].split("_").slice(1).join("_")},ue=()=>{de({name:"",subject:"",body:"",type:"registration_confirmation",attachments:[],include_qr_code:!1}),d(!0)},be=Z=>{v(Z),de({name:Z.name,subject:Z.subject,body:Z.body,type:Z.type,attachments:Z.attachments||[],include_qr_code:Z.include_qr_code||!1}),g(!0)},re=Z=>{de({name:`${Z.name} (Copy)`,subject:Z.subject,body:Z.body,type:Z.type,attachments:Z.attachments||[],include_qr_code:Z.include_qr_code||!1}),d(!0)},we=async()=>{if(!W.name||!W.subject||!W.body){alert("Please fill in all fields");return}S(!0);try{const{error:Z}=await Le.from("email_templates").insert([{event_id:r,name:W.name,subject:W.subject,body:W.body,type:W.type,attachments:W.attachments.length>0?W.attachments:null,include_qr_code:W.include_qr_code}]);Z?(console.error("Error creating template:",Z),alert("Error creating template")):(d(!1),X())}catch(Z){console.error("Error creating template:",Z),alert("Error creating template")}finally{S(!1)}},Ie=async()=>{if(!x||!W.name||!W.subject||!W.body){alert("Please fill in all fields");return}S(!0);try{const{error:Z}=await Le.from("email_templates").update({name:W.name,subject:W.subject,body:W.body,type:W.type,attachments:W.attachments.length>0?W.attachments:null,include_qr_code:W.include_qr_code,updated_at:new Date().toISOString()}).eq("id",x.id);Z?(console.error("Error updating template:",Z),alert("Error updating template")):(g(!1),v(null),X())}catch(Z){console.error("Error updating template:",Z),alert("Error updating template")}finally{S(!1)}},Oe=async Z=>{if(confirm("Are you sure you want to delete this template?"))try{const{error:Te}=await Le.from("email_templates").delete().eq("id",Z);Te?(console.error("Error deleting template:",Te),alert("Error deleting template")):X()}catch(Te){console.error("Error deleting template:",Te),alert("Error deleting template")}},ye=(Z,Te,Be)=>Z.replace(/\{\{name\}\}/g,Te.name||"").replace(/\{\{email\}\}/g,Te.email||"").replace(/\{\{phone\}\}/g,Te.phone||"").replace(/\{\{company\}\}/g,Te.company||"").replace(/\{\{position\}\}/g,Te.position||"").replace(/\{\{event_name\}\}/g,Be.name||"").replace(/\{\{event_date\}\}/g,Be.startDate||"").replace(/\{\{participant_id\}\}/g,Te.id||""),Y=async()=>{if(L)try{G(!0);const{data:Z}=await Le.from("events").select("*").eq("id",r).single(),{data:Te,error:Be}=await Le.from("participants").select("*").eq("eventId",r);if(Be||!Te)throw new Error("Failed to load participants");se({sent:0,total:Te.length,failed:0}),console.log("=== STARTING EMAIL BLAST ==="),console.log("Template:",L.name),console.log("Recipients:",Te.length),console.log("Subject:",L.subject);let Rt=0,Ue=0;for(let Pt=0;Pt<Te.length;Pt++){const Mt=Te[Pt];try{const Yt=ye(L.subject,Mt,Z),kr=ye(L.body,Mt,Z);console.log(` Sending ${Pt+1}/${Te.length} to: ${Mt.email}`);const{data:Vt,error:it}=await Le.functions.invoke("send-email",{body:{to:Mt.email,subject:Yt,html:kr,participantId:Mt.id,templateId:L.id}});it?(console.error(` Failed to send to ${Mt.email}:`,it),Ue++,await Le.rpc("update_participant_email_status",{p_participant_id:Mt.id,p_template_id:L.id,p_template_name:L.name,p_subject:Yt,p_status:"failed",p_error_message:it.message||"Failed to send"})):(console.log(` Sent to ${Mt.email}`),Rt++,await Le.rpc("update_participant_email_status",{p_participant_id:Mt.id,p_template_id:L.id,p_template_name:L.name,p_subject:Yt,p_status:"sent",p_error_message:null})),se({sent:Rt,total:Te.length,failed:Ue}),await new Promise(Gt=>setTimeout(Gt,100))}catch(Yt){console.error("Error sending to:",Mt.email,Yt),Ue++,se({sent:Rt,total:Te.length,failed:Ue})}}console.log(`
=== EMAIL BLAST COMPLETE ===`),console.log(`Total: ${Te.length}`),console.log(`Sent: ${Rt}`),console.log(`Failed: ${Ue}`),alert(` Email blast complete!

Sent: ${Rt}
Failed: ${Ue}
Total: ${Te.length}`),P(!1),U(null)}catch(Z){console.error("Error sending emails:",Z),alert("Error sending emails: "+Z.message)}finally{G(!1)}},le=Z=>{ce(Z),H(""),te(!0)},Ce=async()=>{if(!ne||!oe){alert("Please enter a test email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(oe)){alert("Please enter a valid email address");return}try{G(!0);const{data:Te}=await Le.from("events").select("*").eq("id",r).single(),Be={id:"SAMPLE-ID-12345",name:"John Doe",email:oe,phone:"+62 812-3456-7890",company:"Sample Company",position:"Sample Position"},Rt=ye(ne.subject,Be,Te),Ue=ye(ne.body,Be,Te);console.log("=== TEST EMAIL PREVIEW ==="),console.log("To:",oe),console.log("Subject:",Rt);const{data:Pt,error:Mt}=await Le.functions.invoke("send-email",{body:{to:oe,subject:Rt,html:Ue,participantId:Be.id,templateId:ne.id}});if(Mt){console.error(" Failed to send test email:",Mt),alert(` Failed to send test email

Error: ${Mt.message}`);return}console.log(" Test email sent successfully:",Pt),alert(` Test email sent to ${oe}!

Check your inbox.`),te(!1),ce(null),H("")}catch(Te){console.error("Error sending test email:",Te),alert("Error sending test email: "+Te.message)}finally{G(!1)}},De=(Z,Te)=>{const Be=Te.selectionStart,Rt=Te.selectionEnd,Ue=W.body,Pt=Ue.substring(0,Be)+Z+Ue.substring(Rt);de({...W,body:Pt}),setTimeout(()=>{Te.focus(),Te.setSelectionRange(Be+Z.length,Be+Z.length)},0)},Ye=(Z,Te,Be)=>{const Rt=Be.selectionStart,Ue=Be.selectionEnd,Pt=W.body.substring(Rt,Ue),Mt=W.body;if(Pt){const Yt=Mt.substring(0,Rt)+Z+Pt+Te+Mt.substring(Ue);de({...W,body:Yt}),setTimeout(()=>{Be.focus(),Be.setSelectionRange(Rt+Z.length,Rt+Z.length+Pt.length)},0)}else{const Yt=Mt.substring(0,Rt)+Z+Te+Mt.substring(Ue);de({...W,body:Yt}),setTimeout(()=>{Be.focus(),Be.setSelectionRange(Rt+Z.length,Rt+Z.length)},0)}},We=Z=>{if(E==="visual"&&Z?.isContentEditable){document.execCommand("bold",!1);const Te=Z.innerHTML;de({...W,body:Te})}else{const Te=document.getElementById("body-html");Te&&Ye("<strong>","</strong>",Te)}},ut=Z=>{if(E==="visual"&&Z?.isContentEditable){document.execCommand("italic",!1);const Te=Z.innerHTML;de({...W,body:Te})}else{const Te=document.getElementById("body-html");Te&&Ye("<em>","</em>",Te)}},Ze=Z=>{const Te=prompt("Enter URL:");if(Te)if(E==="visual"&&Z?.isContentEditable){document.execCommand("createLink",!1,Te);const Be=Z.innerHTML;de({...W,body:Be})}else{const Be=document.getElementById("body-html");Be&&Ye(`<a href="${Te}">`,"</a>",Be)}},Ot=(Z,Te)=>{const Be=`{{${Z}}}`;if(E==="visual"&&Te?.isContentEditable){document.execCommand("insertText",!1,Be);const Rt=Te.innerHTML;de({...W,body:Rt})}else{const Rt=document.getElementById("body-html");Rt&&De(Be,Rt)}},Me=Z=>{switch(Z){case"registration_confirmation":return"Registration Confirmation";case"reminder":return"Reminder";case"custom":return"Custom";default:return Z}},at=Z=>{switch(Z){case"registration_confirmation":return"bg-green-100 text-green-800 border-green-300";case"reminder":return"bg-blue-100 text-blue-800 border-blue-300";case"custom":return"bg-purple-100 text-purple-800 border-purple-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:s.jsx(bs,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Email Templates"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage email templates for participant communication"})]})]}),s.jsxs(Ae,{onClick:ue,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-lg",children:[s.jsx(cs,{className:"mr-2 h-4 w-4"}),"Create Template"]})]}),e.length===0?s.jsx(Wn,{className:"border-dashed border-2",children:s.jsxs(Zn,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(bs,{className:"h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No email templates yet"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4 text-center max-w-md",children:"Create your first email template to start communicating with participants"}),s.jsxs(Ae,{onClick:ue,variant:"outline",children:[s.jsx(cs,{className:"mr-2 h-4 w-4"}),"Create First Template"]})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(Z=>s.jsxs(Wn,{className:"hover:shadow-lg transition-shadow",children:[s.jsx(Vr,{className:"pb-3",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx(Wr,{className:"text-lg",children:Z.name}),s.jsx(Wi,{className:"mt-1",children:s.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-medium border ${at(Z.type)}`,children:Me(Z.type)})})]})})}),s.jsxs(Zn,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Subject:"}),s.jsx("div",{className:"text-sm text-gray-900",children:Z.subject})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Body Preview:"}),s.jsx("div",{className:"text-sm text-gray-600 line-clamp-3 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:Z.body}})]}),Z.attachments&&Z.attachments.length>0&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-900",children:[s.jsx(Sf,{className:"h-3 w-3"}),s.jsxs("span",{className:"font-medium",children:[Z.attachments.length," Attachment",Z.attachments.length>1?"s":""]})]}),s.jsxs("div",{className:"mt-1 space-y-1",children:[Z.attachments.slice(0,2).map((Te,Be)=>s.jsxs("div",{className:"text-xs text-blue-700 truncate",children:[" ",z(Te)]},Be)),Z.attachments.length>2&&s.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["+",Z.attachments.length-2," more"]})]})]}),Z.include_qr_code&&s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-900",children:[s.jsx("span",{className:"text-base",children:""}),s.jsx("span",{className:"font-medium",children:"QR Code Enabled"})]}),s.jsx("div",{className:"mt-1 text-xs text-purple-700",children:"Participant QR codes will be attached"})]}),s.jsx("div",{className:"pt-2 space-y-2",children:s.jsxs(Ae,{onClick:()=>le(Z),variant:"outline",className:"w-full border-blue-300 text-blue-700 hover:bg-blue-50",size:"sm",children:[s.jsx(bs,{className:"mr-2 h-3 w-3"}),"Send Test Email"]})}),s.jsxs("div",{className:"flex gap-2 border-t pt-2",children:[s.jsxs(Ae,{onClick:()=>be(Z),variant:"outline",size:"sm",className:"flex-1",children:[s.jsx(_a,{className:"mr-1 h-3 w-3"}),"Edit"]}),s.jsxs(Ae,{onClick:()=>re(Z),variant:"outline",size:"sm",className:"flex-1",children:[s.jsx(Sw,{className:"mr-1 h-3 w-3"}),"Duplicate"]}),s.jsx(Ae,{onClick:()=>Oe(Z.id),variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50 hover:text-red-700",children:s.jsx(Ta,{className:"h-3 w-3"})})]})]})]},Z.id))}),s.jsx(Pn,{open:o,onOpenChange:d,children:s.jsxs(Dn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Bn,{children:s.jsx(Fn,{children:"Create Email Template"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"name",children:"Template Name *"}),s.jsx(Ke,{id:"name",value:W.name,onChange:Z=>de({...W,name:Z.target.value}),placeholder:"e.g., Registration Confirmation"})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"type",children:"Template Type *"}),s.jsxs(Kr,{value:W.type,onValueChange:Z=>de({...W,type:Z}),children:[s.jsx(Qr,{children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"registration_confirmation",children:"Registration Confirmation"}),s.jsx(Ut,{value:"reminder",children:"Reminder"}),s.jsx(Ut,{value:"custom",children:"Custom"})]})]})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"subject",children:"Email Subject *"}),s.jsx(Ke,{id:"subject",value:W.subject,onChange:Z=>de({...W,subject:Z.target.value}),placeholder:"e.g., Welcome to {{event_name}}!"})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"body",children:"Email Body *"}),s.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-gray-50 border rounded-lg flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const Z=document.getElementById("body");We(Z)},className:"h-8 w-8 p-0",title:"Bold",children:s.jsx(y0,{className:"h-4 w-4"})}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const Z=document.getElementById("body");ut(Z)},className:"h-8 w-8 p-0",title:"Italic",children:s.jsx(v0,{className:"h-4 w-4"})}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const Z=document.getElementById("body");Ze(Z)},className:"h-8 w-8 p-0",title:"Insert Link",children:s.jsx(s1,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300"}),s.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Insert:"}),s.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Z=document.getElementById("body");Ot("name",Z)},className:"h-7 text-xs",children:"Name"}),s.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Z=document.getElementById("body");Ot("email",Z)},className:"h-7 text-xs",children:"Email"}),s.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Z=document.getElementById("body");Ot("event_name",Z)},className:"h-7 text-xs",children:"Event Name"}),s.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Z=document.getElementById("body");Ot("company",Z)},className:"h-7 text-xs",children:"Company"})]}),s.jsxs(Ec,{value:E,onValueChange:Z=>T(Z),className:"w-full",children:[s.jsxs(Sc,{className:"grid w-full grid-cols-2 mb-2",children:[s.jsx(Ir,{value:"visual",children:"Visual"}),s.jsx(Ir,{value:"html",children:"HTML"})]}),s.jsx(ys,{value:"visual",className:"mt-0",children:s.jsx("div",{id:"body",contentEditable:!0,suppressContentEditableWarning:!0,onInput:Z=>{const Te=Z.currentTarget.innerHTML;de({...W,body:Te})},dangerouslySetInnerHTML:{__html:W.body||"<p>Dear {{name}},</p><p><br></p><p>Thank you for registering for {{event_name}}!</p><p><br></p><p>Use the toolbar above to format text.</p><p><br></p><p>Best regards,<br>Event Team</p>"},className:"min-h-[350px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 font-sans overflow-y-auto",style:{whiteSpace:"pre-wrap"}})}),s.jsx(ys,{value:"html",className:"mt-0",children:s.jsx(Ci,{id:"body-html",value:W.body,onChange:Z=>de({...W,body:Z.target.value}),placeholder:`<p>Dear {{name}},</p>
<p>Thank you for registering for {{event_name}}!</p>`,rows:14,className:"font-mono text-xs w-full max-w-full break-all resize-none"})})]})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"attachments",children:"Attachments (Optional)"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",id:"file-upload",className:"hidden",onChange:q,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"}),s.jsxs(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("file-upload")?.click(),disabled:I,children:[s.jsx(yl,{className:"h-4 w-4 mr-2"}),I?"Uploading...":"Upload File"]}),s.jsx("span",{className:"text-xs text-gray-500",children:"Max 5MB (PDF, DOC, XLS, Images)"})]}),W.attachments.length>0&&s.jsx("div",{className:"border rounded-lg p-3 space-y-2",children:W.attachments.map((Z,Te)=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(Sf,{className:"h-4 w-4 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-sm text-gray-700 truncate",children:z(Z)})]}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>ie(Z),className:"h-7 w-7 p-0 flex-shrink-0",children:s.jsx(po,{className:"h-4 w-4"})})]},Te))})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-semibold text-blue-900 mb-2",children:"Available Placeholders:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-blue-800",children:[s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{name}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{email}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_name}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_date}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_location}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{company}}"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg",children:[s.jsx(mo,{id:"include-qr-create",checked:W.include_qr_code,onCheckedChange:Z=>de({...W,include_qr_code:Z})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Pe,{htmlFor:"include-qr-create",className:"text-sm font-medium text-purple-900 cursor-pointer",children:" Include Participant QR Code"}),s.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Each participant will receive their unique QR code as an attachment"})]})]})]}),s.jsxs(Bs,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),s.jsx(Ae,{onClick:we,disabled:y,children:y?"Creating...":"Create Template"})]})]})}),s.jsx(Pn,{open:u,onOpenChange:g,children:s.jsxs(Dn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Bn,{children:s.jsx(Fn,{children:"Edit Email Template"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-name",children:"Template Name *"}),s.jsx(Ke,{id:"edit-name",value:W.name,onChange:Z=>de({...W,name:Z.target.value}),placeholder:"e.g., Registration Confirmation"})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-type",children:"Template Type *"}),s.jsxs(Kr,{value:W.type,onValueChange:Z=>de({...W,type:Z}),children:[s.jsx(Qr,{children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"registration_confirmation",children:"Registration Confirmation"}),s.jsx(Ut,{value:"reminder",children:"Reminder"}),s.jsx(Ut,{value:"custom",children:"Custom"})]})]})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-subject",children:"Email Subject *"}),s.jsx(Ke,{id:"edit-subject",value:W.subject,onChange:Z=>de({...W,subject:Z.target.value}),placeholder:"e.g., Welcome to {{event_name}}!"})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-body",children:"Email Body *"}),s.jsxs("div",{className:"flex items-center gap-2 mb-2 p-2 bg-gray-50 border rounded-lg flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const Z=document.getElementById("edit-body");We(Z)},className:"h-8 w-8 p-0",title:"Bold",children:s.jsx(y0,{className:"h-4 w-4"})}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const Z=document.getElementById("edit-body");ut(Z)},className:"h-8 w-8 p-0",title:"Italic",children:s.jsx(v0,{className:"h-4 w-4"})}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const Z=document.getElementById("edit-body");Ze(Z)},className:"h-8 w-8 p-0",title:"Insert Link",children:s.jsx(s1,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300"}),s.jsx("div",{className:"text-xs font-semibold text-gray-700",children:"Insert:"}),s.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Z=document.getElementById("edit-body");Ot("name",Z)},className:"h-7 text-xs",children:"Name"}),s.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Z=document.getElementById("edit-body");Ot("email",Z)},className:"h-7 text-xs",children:"Email"}),s.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Z=document.getElementById("edit-body");Ot("event_name",Z)},className:"h-7 text-xs",children:"Event Name"}),s.jsx(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>{const Z=document.getElementById("edit-body");Ot("company",Z)},className:"h-7 text-xs",children:"Company"})]}),s.jsxs(Ec,{value:E,onValueChange:Z=>T(Z),className:"w-full",children:[s.jsxs(Sc,{className:"grid w-full grid-cols-2 mb-2",children:[s.jsx(Ir,{value:"visual",children:"Visual"}),s.jsx(Ir,{value:"html",children:"HTML"})]}),s.jsx(ys,{value:"visual",className:"mt-0",children:s.jsx("div",{id:"edit-body",contentEditable:!0,suppressContentEditableWarning:!0,onInput:Z=>{const Te=Z.currentTarget.innerHTML;de({...W,body:Te})},dangerouslySetInnerHTML:{__html:W.body||"<p>Dear {{name}}...</p>"},className:"min-h-[350px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 font-sans overflow-y-auto",style:{whiteSpace:"pre-wrap"}})}),s.jsx(ys,{value:"html",className:"mt-0",children:s.jsx(Ci,{id:"edit-body-html",value:W.body,onChange:Z=>de({...W,body:Z.target.value}),placeholder:"<p>Dear {{name}},</p>",rows:14,className:"font-mono text-xs w-full max-w-full break-all resize-none"})})]})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-attachments",children:"Attachments (Optional)"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",id:"edit-file-upload",className:"hidden",onChange:q,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png"}),s.jsxs(Ae,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("edit-file-upload")?.click(),disabled:I,children:[s.jsx(yl,{className:"h-4 w-4 mr-2"}),I?"Uploading...":"Upload File"]}),s.jsx("span",{className:"text-xs text-gray-500",children:"Max 5MB (PDF, DOC, XLS, Images)"})]}),W.attachments.length>0&&s.jsx("div",{className:"border rounded-lg p-3 space-y-2",children:W.attachments.map((Z,Te)=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(Sf,{className:"h-4 w-4 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-sm text-gray-700 truncate",children:z(Z)})]}),s.jsx(Ae,{type:"button",variant:"ghost",size:"sm",onClick:()=>ie(Z),className:"h-7 w-7 p-0 flex-shrink-0",children:s.jsx(po,{className:"h-4 w-4"})})]},Te))})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-semibold text-blue-900 mb-2",children:"Available Placeholders:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs text-blue-800",children:[s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{name}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{email}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_name}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_date}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{event_location}}"}),s.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"{{company}}"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg",children:[s.jsx(mo,{id:"include-qr-edit",checked:W.include_qr_code,onCheckedChange:Z=>de({...W,include_qr_code:Z})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Pe,{htmlFor:"include-qr-edit",className:"text-sm font-medium text-purple-900 cursor-pointer",children:" Include Participant QR Code"}),s.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Each participant will receive their unique QR code as an attachment"})]})]})]}),s.jsxs(Bs,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),s.jsx(Ae,{onClick:Ie,disabled:y,children:y?"Saving...":"Save Changes"})]})]})}),s.jsx(Pn,{open:k,onOpenChange:P,children:s.jsxs(Dn,{className:"max-w-lg",children:[s.jsx(Bn,{children:s.jsx(Fn,{children:"Send Email Blast"})}),B?s.jsx("div",{className:"py-8",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(Tr,{className:"h-12 w-12 animate-spin mx-auto text-purple-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"Sending emails..."}),s.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[ee.sent," of ",ee.total," sent",ee.failed>0&&s.jsxs("span",{className:"text-red-600 ml-2",children:["(",ee.failed," failed)"]})]}),s.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${ee.sent/ee.total*100}%`}})})]})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ei,{className:"border-blue-200 bg-blue-50",children:[s.jsx(bs,{className:"h-4 w-4 text-blue-600"}),s.jsxs(ti,{className:"text-blue-900",children:[s.jsxs("div",{className:"font-semibold mb-1",children:["Template: ",L?.name]}),s.jsx("div",{className:"text-sm",children:"This will send personalized emails to all participants."})]})]}),s.jsxs("div",{className:"bg-gray-50 border rounded-lg p-4 space-y-2",children:[s.jsx("div",{className:"text-sm font-semibold",children:"Preview:"}),s.jsxs("div",{className:"text-xs text-gray-700",children:[s.jsx("strong",{children:"Subject:"})," ",L?.subject]}),s.jsxs("div",{className:"text-xs text-gray-700",children:[s.jsx("strong",{children:"Placeholders will be replaced:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-0.5 text-gray-600",children:[s.jsxs("li",{children:["{{name}}","  Participant name"]}),s.jsxs("li",{children:["{{email}}","  Participant email"]}),s.jsxs("li",{children:["{{event_name}}","  Your event name"]}),s.jsxs("li",{children:["{{event_date}}","  Event date"]})]})]}),L?.attachments&&L.attachments.length>0&&s.jsxs("div",{className:"text-xs text-gray-700",children:[s.jsx("strong",{children:"Attachments:"})," ",L.attachments.length," file(s)"]}),L?.include_qr_code&&s.jsxs("div",{className:"text-xs text-gray-700",children:[s.jsx("strong",{children:"QR Code:"})," Enabled (each participant gets unique QR)"]})]}),s.jsx(ei,{className:"border-amber-200 bg-amber-50",children:s.jsxs(ti,{className:"text-amber-900 text-sm",children:[s.jsx("strong",{children:" Important:"})," Currently in simulation mode. To actually send emails, you need to configure an email service (SendGrid, AWS SES, etc.) in your Supabase Edge Functions."]})})]}),s.jsxs(Bs,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),s.jsxs(Ae,{onClick:Y,className:"gradient-primary",children:[s.jsx(fo,{className:"mr-2 h-4 w-4"}),"Send Emails"]})]})]})]})}),s.jsx(Pn,{open:V,onOpenChange:te,children:s.jsxs(Dn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Send Test Email"}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Send a preview email to test how it looks before sending to all participants"})]}),B?s.jsxs("div",{className:"py-8 text-center",children:[s.jsx(Tr,{className:"h-12 w-12 animate-spin mx-auto text-purple-600"}),s.jsx("p",{className:"mt-4 text-gray-700",children:"Sending test email..."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Template:"}),s.jsx("span",{className:"text-sm text-gray-900 ml-2",children:ne?.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Subject:"}),s.jsx("span",{className:"text-sm text-gray-900 ml-2",children:ne?.subject})]})]}),s.jsx(ei,{className:"border-blue-200 bg-blue-50",children:s.jsxs(ti,{className:"text-sm text-blue-900",children:[" The test email will use sample participant data:",s.jsxs("div",{className:"mt-2 ml-4 text-xs space-y-1 text-blue-800",children:[s.jsx("div",{children:" Name: John Doe"}),s.jsxs("div",{children:[" Email: ",oe||"[your test email]"]}),s.jsx("div",{children:" Phone: +62 812-3456-7890"}),s.jsx("div",{children:" Company: Sample Company"}),s.jsx("div",{children:" Position: Sample Position"})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{htmlFor:"testEmail",children:"Send test email to:"}),s.jsx(Ke,{id:"testEmail",type:"email",placeholder:"your.email@example.com",value:oe,onChange:Z=>H(Z.target.value),className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Enter your email address to receive the test email"})]}),s.jsxs("div",{className:"space-y-2",children:[ne?.attachments&&ne.attachments.length>0&&s.jsxs("div",{className:"text-sm text-gray-700",children:[" ",s.jsx("strong",{children:ne.attachments.length})," attachment(s) will be included"]}),ne?.include_qr_code&&s.jsx("div",{className:"text-sm text-gray-700",children:" Participant QR code will be included"})]}),s.jsx(ei,{className:"border-amber-200 bg-amber-50",children:s.jsxs(ti,{className:"text-sm text-amber-900",children:[" ",s.jsx("strong",{children:"Simulation Mode:"})," Currently in simulation mode. Email preview will be shown in the browser console. Configure an email service (SendGrid/AWS SES) to actually send emails."]})}),s.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[s.jsx(Ae,{onClick:()=>{te(!1),ce(null),H("")},variant:"outline",children:"Cancel"}),s.jsxs(Ae,{onClick:Ce,className:"gradient-primary",disabled:!oe,children:[s.jsx(bs,{className:"mr-2 h-4 w-4"}),"Send Test Email"]})]})]})]})})]})}function LT(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}const BT=r=>{switch(r){case"success":return zT;case"info":return VT;case"warning":return $T;case"error":return WT;default:return null}},FT=Array(12).fill(0),UT=({visible:r,className:e})=>$e.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},$e.createElement("div",{className:"sonner-spinner"},FT.map((n,o)=>$e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${o}`})))),zT=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$T=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),VT=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),WT=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),HT=$e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),GT=()=>{const[r,e]=$e.useState(document.hidden);return $e.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),r};let q0=1;class qT{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:o,...d}=e,u=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:q0++,g=this.toasts.find(v=>v.id===u),x=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),g?this.toasts=this.toasts.map(v=>v.id===u?(this.publish({...v,...e,id:u,title:o}),{...v,...e,id:u,dismissible:x,title:o}):v):this.addToast({title:o,...d,dismissible:x,id:u}),u},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(o=>o({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let o;n.loading!==void 0&&(o=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const d=Promise.resolve(e instanceof Function?e():e);let u=o!==void 0,g;const x=d.then(async y=>{if(g=["resolve",y],$e.isValidElement(y))u=!1,this.create({id:o,type:"default",message:y});else if(YT(y)&&!y.ok){u=!1;const E=typeof n.error=="function"?await n.error(`HTTP error! status: ${y.status}`):n.error,T=typeof n.description=="function"?await n.description(`HTTP error! status: ${y.status}`):n.description,O=typeof E=="object"&&!$e.isValidElement(E)?E:{message:E};this.create({id:o,type:"error",description:T,...O})}else if(y instanceof Error){u=!1;const E=typeof n.error=="function"?await n.error(y):n.error,T=typeof n.description=="function"?await n.description(y):n.description,O=typeof E=="object"&&!$e.isValidElement(E)?E:{message:E};this.create({id:o,type:"error",description:T,...O})}else if(n.success!==void 0){u=!1;const E=typeof n.success=="function"?await n.success(y):n.success,T=typeof n.description=="function"?await n.description(y):n.description,O=typeof E=="object"&&!$e.isValidElement(E)?E:{message:E};this.create({id:o,type:"success",description:T,...O})}}).catch(async y=>{if(g=["reject",y],n.error!==void 0){u=!1;const S=typeof n.error=="function"?await n.error(y):n.error,E=typeof n.description=="function"?await n.description(y):n.description,I=typeof S=="object"&&!$e.isValidElement(S)?S:{message:S};this.create({id:o,type:"error",description:E,...I})}}).finally(()=>{u&&(this.dismiss(o),o=void 0),n.finally==null||n.finally.call(n)}),v=()=>new Promise((y,S)=>x.then(()=>g[0]==="reject"?S(g[1]):y(g[1])).catch(S));return typeof o!="string"&&typeof o!="number"?{unwrap:v}:Object.assign(o,{unwrap:v})},this.custom=(e,n)=>{const o=n?.id||q0++;return this.create({jsx:e(o),id:o,...n}),o},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const os=new qT,XT=(r,e)=>{const n=e?.id||q0++;return os.addToast({title:r,...e,id:n}),n},YT=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",KT=XT,ZT=()=>os.toasts,QT=()=>os.getActiveToasts(),m0=Object.assign(KT,{success:os.success,info:os.info,warning:os.warning,error:os.error,custom:os.custom,message:os.message,promise:os.promise,dismiss:os.dismiss,loading:os.loading},{getHistory:ZT,getToasts:QT});LT("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function tu(r){return r.label!==void 0}const JT=3,e8="24px",t8="16px",Mx=4e3,n8=356,r8=14,s8=45,i8=200;function gi(...r){return r.filter(Boolean).join(" ")}function a8(r){const[e,n]=r.split("-"),o=[];return e&&o.push(e),n&&o.push(n),o}const o8=r=>{var e,n,o,d,u,g,x,v,y;const{invert:S,toast:E,unstyled:T,interacting:I,setHeights:O,visibleToasts:k,heights:P,index:L,toasts:U,expanded:B,removeToast:G,defaultRichColors:ee,closeButton:se,style:V,cancelButtonStyle:te,actionButtonStyle:ne,className:ce="",descriptionClassName:oe="",duration:H,position:W,gap:de,expandByDefault:X,classNames:q,icons:ie,closeButtonAriaLabel:z="Close toast"}=r,[ue,be]=$e.useState(null),[re,we]=$e.useState(null),[Ie,Oe]=$e.useState(!1),[ye,Y]=$e.useState(!1),[le,Ce]=$e.useState(!1),[De,Ye]=$e.useState(!1),[We,ut]=$e.useState(!1),[Ze,Ot]=$e.useState(0),[Me,at]=$e.useState(0),Z=$e.useRef(E.duration||H||Mx),Te=$e.useRef(null),Be=$e.useRef(null),Rt=L===0,Ue=L+1<=k,Pt=E.type,Mt=E.dismissible!==!1,Yt=E.className||"",kr=E.descriptionClassName||"",Vt=$e.useMemo(()=>P.findIndex(kt=>kt.toastId===E.id)||0,[P,E.id]),it=$e.useMemo(()=>{var kt;return(kt=E.closeButton)!=null?kt:se},[E.closeButton,se]),Gt=$e.useMemo(()=>E.duration||H||Mx,[E.duration,H]),qt=$e.useRef(0),Hn=$e.useRef(0),yn=$e.useRef(0),Ns=$e.useRef(null),[vn,Je]=W.split("-"),pn=$e.useMemo(()=>P.reduce((kt,Wt,sn)=>sn>=Vt?kt:kt+Wt.height,0),[P,Vt]),en=GT(),rn=E.invert||S,Er=Pt==="loading";Hn.current=$e.useMemo(()=>Vt*de+pn,[Vt,pn]),$e.useEffect(()=>{Z.current=Gt},[Gt]),$e.useEffect(()=>{Oe(!0)},[]),$e.useEffect(()=>{const kt=Be.current;if(kt){const Wt=kt.getBoundingClientRect().height;return at(Wt),O(sn=>[{toastId:E.id,height:Wt,position:E.position},...sn]),()=>O(sn=>sn.filter(nn=>nn.toastId!==E.id))}},[O,E.id]),$e.useLayoutEffect(()=>{if(!Ie)return;const kt=Be.current,Wt=kt.style.height;kt.style.height="auto";const sn=kt.getBoundingClientRect().height;kt.style.height=Wt,at(sn),O(nn=>nn.find(bn=>bn.toastId===E.id)?nn.map(bn=>bn.toastId===E.id?{...bn,height:sn}:bn):[{toastId:E.id,height:sn,position:E.position},...nn])},[Ie,E.title,E.description,O,E.id,E.jsx,E.action,E.cancel]);const lr=$e.useCallback(()=>{Y(!0),Ot(Hn.current),O(kt=>kt.filter(Wt=>Wt.toastId!==E.id)),setTimeout(()=>{G(E)},i8)},[E,G,O,Hn]);$e.useEffect(()=>{if(E.promise&&Pt==="loading"||E.duration===1/0||E.type==="loading")return;let kt;return B||I||en?(()=>{if(yn.current<qt.current){const nn=new Date().getTime()-qt.current;Z.current=Z.current-nn}yn.current=new Date().getTime()})():(()=>{Z.current!==1/0&&(qt.current=new Date().getTime(),kt=setTimeout(()=>{E.onAutoClose==null||E.onAutoClose.call(E,E),lr()},Z.current))})(),()=>clearTimeout(kt)},[B,I,E,Pt,en,lr]),$e.useEffect(()=>{E.delete&&(lr(),E.onDismiss==null||E.onDismiss.call(E,E))},[lr,E.delete]);function Hr(){var kt;if(ie?.loading){var Wt;return $e.createElement("div",{className:gi(q?.loader,E==null||(Wt=E.classNames)==null?void 0:Wt.loader,"sonner-loader"),"data-visible":Pt==="loading"},ie.loading)}return $e.createElement(UT,{className:gi(q?.loader,E==null||(kt=E.classNames)==null?void 0:kt.loader),visible:Pt==="loading"})}const tt=E.icon||ie?.[Pt]||BT(Pt);var Kt,Or;return $e.createElement("li",{tabIndex:0,ref:Be,className:gi(ce,Yt,q?.toast,E==null||(e=E.classNames)==null?void 0:e.toast,q?.default,q?.[Pt],E==null||(n=E.classNames)==null?void 0:n[Pt]),"data-sonner-toast":"","data-rich-colors":(Kt=E.richColors)!=null?Kt:ee,"data-styled":!(E.jsx||E.unstyled||T),"data-mounted":Ie,"data-promise":!!E.promise,"data-swiped":We,"data-removed":ye,"data-visible":Ue,"data-y-position":vn,"data-x-position":Je,"data-index":L,"data-front":Rt,"data-swiping":le,"data-dismissible":Mt,"data-type":Pt,"data-invert":rn,"data-swipe-out":De,"data-swipe-direction":re,"data-expanded":!!(B||X&&Ie),"data-testid":E.testId,style:{"--index":L,"--toasts-before":L,"--z-index":U.length-L,"--offset":`${ye?Ze:Hn.current}px`,"--initial-height":X?"auto":`${Me}px`,...V,...E.style},onDragEnd:()=>{Ce(!1),be(null),Ns.current=null},onPointerDown:kt=>{kt.button!==2&&(Er||!Mt||(Te.current=new Date,Ot(Hn.current),kt.target.setPointerCapture(kt.pointerId),kt.target.tagName!=="BUTTON"&&(Ce(!0),Ns.current={x:kt.clientX,y:kt.clientY})))},onPointerUp:()=>{var kt,Wt,sn;if(De||!Mt)return;Ns.current=null;const nn=Number(((kt=Be.current)==null?void 0:kt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),En=Number(((Wt=Be.current)==null?void 0:Wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),bn=new Date().getTime()-((sn=Te.current)==null?void 0:sn.getTime()),dn=ue==="x"?nn:En,ds=Math.abs(dn)/bn;if(Math.abs(dn)>=s8||ds>.11){Ot(Hn.current),E.onDismiss==null||E.onDismiss.call(E,E),we(ue==="x"?nn>0?"right":"left":En>0?"down":"up"),lr(),Ye(!0);return}else{var Cn,rr;(Cn=Be.current)==null||Cn.style.setProperty("--swipe-amount-x","0px"),(rr=Be.current)==null||rr.style.setProperty("--swipe-amount-y","0px")}ut(!1),Ce(!1),be(null)},onPointerMove:kt=>{var Wt,sn,nn;if(!Ns.current||!Mt||((Wt=window.getSelection())==null?void 0:Wt.toString().length)>0)return;const bn=kt.clientY-Ns.current.y,dn=kt.clientX-Ns.current.x;var ds;const Cn=(ds=r.swipeDirections)!=null?ds:a8(W);!ue&&(Math.abs(dn)>1||Math.abs(bn)>1)&&be(Math.abs(dn)>Math.abs(bn)?"x":"y");let rr={x:0,y:0};const jn=Gn=>1/(1.5+Math.abs(Gn)/20);if(ue==="y"){if(Cn.includes("top")||Cn.includes("bottom"))if(Cn.includes("top")&&bn<0||Cn.includes("bottom")&&bn>0)rr.y=bn;else{const Gn=bn*jn(bn);rr.y=Math.abs(Gn)<Math.abs(bn)?Gn:bn}}else if(ue==="x"&&(Cn.includes("left")||Cn.includes("right")))if(Cn.includes("left")&&dn<0||Cn.includes("right")&&dn>0)rr.x=dn;else{const Gn=dn*jn(dn);rr.x=Math.abs(Gn)<Math.abs(dn)?Gn:dn}(Math.abs(rr.x)>0||Math.abs(rr.y)>0)&&ut(!0),(sn=Be.current)==null||sn.style.setProperty("--swipe-amount-x",`${rr.x}px`),(nn=Be.current)==null||nn.style.setProperty("--swipe-amount-y",`${rr.y}px`)}},it&&!E.jsx&&Pt!=="loading"?$e.createElement("button",{"aria-label":z,"data-disabled":Er,"data-close-button":!0,onClick:Er||!Mt?()=>{}:()=>{lr(),E.onDismiss==null||E.onDismiss.call(E,E)},className:gi(q?.closeButton,E==null||(o=E.classNames)==null?void 0:o.closeButton)},(Or=ie?.close)!=null?Or:HT):null,(Pt||E.icon||E.promise)&&E.icon!==null&&(ie?.[Pt]!==null||E.icon)?$e.createElement("div",{"data-icon":"",className:gi(q?.icon,E==null||(d=E.classNames)==null?void 0:d.icon)},E.promise||E.type==="loading"&&!E.icon?E.icon||Hr():null,E.type!=="loading"?tt:null):null,$e.createElement("div",{"data-content":"",className:gi(q?.content,E==null||(u=E.classNames)==null?void 0:u.content)},$e.createElement("div",{"data-title":"",className:gi(q?.title,E==null||(g=E.classNames)==null?void 0:g.title)},E.jsx?E.jsx:typeof E.title=="function"?E.title():E.title),E.description?$e.createElement("div",{"data-description":"",className:gi(oe,kr,q?.description,E==null||(x=E.classNames)==null?void 0:x.description)},typeof E.description=="function"?E.description():E.description):null),$e.isValidElement(E.cancel)?E.cancel:E.cancel&&tu(E.cancel)?$e.createElement("button",{"data-button":!0,"data-cancel":!0,style:E.cancelButtonStyle||te,onClick:kt=>{tu(E.cancel)&&Mt&&(E.cancel.onClick==null||E.cancel.onClick.call(E.cancel,kt),lr())},className:gi(q?.cancelButton,E==null||(v=E.classNames)==null?void 0:v.cancelButton)},E.cancel.label):null,$e.isValidElement(E.action)?E.action:E.action&&tu(E.action)?$e.createElement("button",{"data-button":!0,"data-action":!0,style:E.actionButtonStyle||ne,onClick:kt=>{tu(E.action)&&(E.action.onClick==null||E.action.onClick.call(E.action,kt),!kt.defaultPrevented&&lr())},className:gi(q?.actionButton,E==null||(y=E.classNames)==null?void 0:y.actionButton)},E.action.label):null)};function Lx(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function l8(r,e){const n={};return[r,e].forEach((o,d)=>{const u=d===1,g=u?"--mobile-offset":"--offset",x=u?t8:e8;function v(y){["top","right","bottom","left"].forEach(S=>{n[`${g}-${S}`]=typeof y=="number"?`${y}px`:y})}typeof o=="number"||typeof o=="string"?v(o):typeof o=="object"?["top","right","bottom","left"].forEach(y=>{o[y]===void 0?n[`${g}-${y}`]=x:n[`${g}-${y}`]=typeof o[y]=="number"?`${o[y]}px`:o[y]}):v(x)}),n}const c8=$e.forwardRef(function(e,n){const{id:o,invert:d,position:u="bottom-right",hotkey:g=["altKey","KeyT"],expand:x,closeButton:v,className:y,offset:S,mobileOffset:E,theme:T="light",richColors:I,duration:O,style:k,visibleToasts:P=JT,toastOptions:L,dir:U=Lx(),gap:B=r8,icons:G,containerAriaLabel:ee="Notifications"}=e,[se,V]=$e.useState([]),te=$e.useMemo(()=>o?se.filter(Ie=>Ie.toasterId===o):se.filter(Ie=>!Ie.toasterId),[se,o]),ne=$e.useMemo(()=>Array.from(new Set([u].concat(te.filter(Ie=>Ie.position).map(Ie=>Ie.position)))),[te,u]),[ce,oe]=$e.useState([]),[H,W]=$e.useState(!1),[de,X]=$e.useState(!1),[q,ie]=$e.useState(T!=="system"?T:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=$e.useRef(null),ue=g.join("+").replace(/Key/g,"").replace(/Digit/g,""),be=$e.useRef(null),re=$e.useRef(!1),we=$e.useCallback(Ie=>{V(Oe=>{var ye;return(ye=Oe.find(Y=>Y.id===Ie.id))!=null&&ye.delete||os.dismiss(Ie.id),Oe.filter(({id:Y})=>Y!==Ie.id)})},[]);return $e.useEffect(()=>os.subscribe(Ie=>{if(Ie.dismiss){requestAnimationFrame(()=>{V(Oe=>Oe.map(ye=>ye.id===Ie.id?{...ye,delete:!0}:ye))});return}setTimeout(()=>{ww.flushSync(()=>{V(Oe=>{const ye=Oe.findIndex(Y=>Y.id===Ie.id);return ye!==-1?[...Oe.slice(0,ye),{...Oe[ye],...Ie},...Oe.slice(ye+1)]:[Ie,...Oe]})})})}),[se]),$e.useEffect(()=>{if(T!=="system"){ie(T);return}if(T==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;const Ie=window.matchMedia("(prefers-color-scheme: dark)");try{Ie.addEventListener("change",({matches:Oe})=>{ie(Oe?"dark":"light")})}catch{Ie.addListener(({matches:ye})=>{try{ie(ye?"dark":"light")}catch(Y){console.error(Y)}})}},[T]),$e.useEffect(()=>{se.length<=1&&W(!1)},[se]),$e.useEffect(()=>{const Ie=Oe=>{var ye;if(g.every(Ce=>Oe[Ce]||Oe.code===Ce)){var le;W(!0),(le=z.current)==null||le.focus()}Oe.code==="Escape"&&(document.activeElement===z.current||(ye=z.current)!=null&&ye.contains(document.activeElement))&&W(!1)};return document.addEventListener("keydown",Ie),()=>document.removeEventListener("keydown",Ie)},[g]),$e.useEffect(()=>{if(z.current)return()=>{be.current&&(be.current.focus({preventScroll:!0}),be.current=null,re.current=!1)}},[z.current]),$e.createElement("section",{ref:n,"aria-label":`${ee} ${ue}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ne.map((Ie,Oe)=>{var ye;const[Y,le]=Ie.split("-");return te.length?$e.createElement("ol",{key:Ie,dir:U==="auto"?Lx():U,tabIndex:-1,ref:z,className:y,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":Y,"data-x-position":le,style:{"--front-toast-height":`${((ye=ce[0])==null?void 0:ye.height)||0}px`,"--width":`${n8}px`,"--gap":`${B}px`,...k,...l8(S,E)},onBlur:Ce=>{re.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(re.current=!1,be.current&&(be.current.focus({preventScroll:!0}),be.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||re.current||(re.current=!0,be.current=Ce.relatedTarget)},onMouseEnter:()=>W(!0),onMouseMove:()=>W(!0),onMouseLeave:()=>{de||W(!1)},onDragEnd:()=>W(!1),onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||X(!0)},onPointerUp:()=>X(!1)},te.filter(Ce=>!Ce.position&&Oe===0||Ce.position===Ie).map((Ce,De)=>{var Ye,We;return $e.createElement(o8,{key:Ce.id,icons:G,index:De,toast:Ce,defaultRichColors:I,duration:(Ye=L?.duration)!=null?Ye:O,className:L?.className,descriptionClassName:L?.descriptionClassName,invert:d,visibleToasts:P,closeButton:(We=L?.closeButton)!=null?We:v,interacting:de,position:Ie,style:L?.style,unstyled:L?.unstyled,classNames:L?.classNames,cancelButtonStyle:L?.cancelButtonStyle,actionButtonStyle:L?.actionButtonStyle,closeButtonAriaLabel:L?.closeButtonAriaLabel,removeToast:we,toasts:te.filter(ut=>ut.position==Ce.position),heights:ce.filter(ut=>ut.position==Ce.position),setHeights:oe,expandByDefault:x,gap:B,expanded:H,swipeDirections:e.swipeDirections})})):null}))});function L2({eventId:r,selectedIds:e=[],onSelectionChange:n}){const[o,d]=A.useState([]),[u,g]=A.useState([]),[x,v]=A.useState(new Set(e)),[y,S]=A.useState(""),[E,T]=A.useState(null),[I,O]=A.useState(null),[k,P]=A.useState(!0);A.useEffect(()=>{L()},[r]),A.useEffect(()=>{v(new Set(e))},[e]),A.useEffect(()=>{U()},[o,y,E,I]),A.useEffect(()=>{n(Array.from(x),"manual",void 0)},[x]);const L=async()=>{try{P(!0),console.log("Fetching participants for eventId:",r);const{data:V,error:te}=await Le.from("participants").select('id, name, email, phone, company, position, "registeredAt"').eq('"eventId"',r).order("name");if(te)throw console.error("Error fetching participants:",te),te;console.log("Loaded participants:",V?.length||0,"participants:",V),d(V||[])}catch(V){console.error("Error fetching participants:",V)}finally{P(!1)}},U=()=>{let V=[...o];if(y){const te=y.toLowerCase();V=V.filter(ne=>ne.name?.toLowerCase().includes(te)||ne.email?.toLowerCase().includes(te)||ne.company?.toLowerCase().includes(te)||ne.position?.toLowerCase().includes(te))}E&&I&&V.sort((te,ne)=>{let ce=te[E]||"",oe=ne[E]||"";return typeof ce=="string"&&(ce=ce.toLowerCase()),typeof oe=="string"&&(oe=oe.toLowerCase()),ce<oe?I==="asc"?-1:1:ce>oe?I==="asc"?1:-1:0}),g(V)},B=V=>{E===V?I==="asc"?O("desc"):I==="desc"&&(T(null),O(null)):(T(V),O("asc"))},G=V=>E!==V?s.jsx(rm,{className:"h-3 w-3 ml-1 text-gray-400"}):I==="asc"?s.jsx(ju,{className:"h-3 w-3 ml-1 text-purple-600"}):s.jsx(Au,{className:"h-3 w-3 ml-1 text-purple-600"}),ee=V=>{const te=new Set(x);te.has(V)?te.delete(V):te.add(V),v(te)},se=()=>{x.size===u.length?v(new Set):v(new Set(u.map(V=>V.id)))};return k?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[s.jsx(Vi,{className:"h-8 w-8 animate-spin text-purple-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading participants..."})]}):o.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4 border-2 border-dashed border-gray-300 rounded-lg",children:[s.jsx(Ea,{className:"h-12 w-12 text-gray-400"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"No participants found"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add participants to this event first"})]})]}):s.jsxs("div",{className:"space-y-2","data-participant-selector":"true",children:[s.jsx("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded border border-blue-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ea,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[x.size," of ",o.length," selected"]})]})}),s.jsxs("div",{className:"relative",children:[s.jsx(jc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(Ke,{placeholder:"Search by name, email, company, or position...",value:y,onChange:V=>S(V.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mo,{checked:x.size===u.length&&u.length>0,onCheckedChange:se}),s.jsxs(Pe,{className:"cursor-pointer text-sm",children:["Select All ",y&&`(${u.length})`]})]}),x.size>0&&s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>v(new Set),className:"h-7 text-xs",children:"Clear"})]}),s.jsx("div",{className:"border rounded bg-white overflow-hidden",children:s.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"30vh",overscrollBehavior:"contain"},children:s.jsxs("table",{className:"w-full text-xs border-collapse table-fixed",children:[s.jsxs("colgroup",{children:[s.jsx("col",{className:"w-12"}),s.jsx("col",{className:"w-[15%]"}),s.jsx("col",{className:"w-[23%]"}),s.jsx("col",{className:"w-[17%]"}),s.jsx("col",{className:"w-[15%]"}),s.jsx("col",{className:"w-[auto]"})]}),s.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"p-2 text-left bg-gray-100",children:s.jsx(mo,{checked:x.size===u.length&&u.length>0,onCheckedChange:se})}),s.jsx("th",{className:"p-2 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("name"),children:s.jsxs("div",{className:"flex items-center",children:["Name",G("name")]})}),s.jsx("th",{className:"p-2 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("email"),children:s.jsxs("div",{className:"flex items-center",children:["Email",G("email")]})}),s.jsx("th",{className:"p-2 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("company"),children:s.jsxs("div",{className:"flex items-center",children:["Company",G("company")]})}),s.jsx("th",{className:"p-2 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("position"),children:s.jsxs("div",{className:"flex items-center",children:["Position",G("position")]})}),s.jsx("th",{className:"p-2 text-left text-xs font-semibold text-gray-700 cursor-pointer hover:bg-gray-200 bg-gray-100 select-none",onClick:()=>B("registeredAt"),children:s.jsxs("div",{className:"flex items-center",children:["Registered",G("registeredAt")]})})]})}),s.jsx("tbody",{className:"divide-y bg-white",children:u.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500 text-sm",children:y?"No participants found matching your search":"No participants available"})}):u.map(V=>s.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer transition-colors ${x.has(V.id)?"bg-blue-50":""}`,onClick:()=>ee(V.id),children:[s.jsx("td",{className:"p-2",children:s.jsx(mo,{value:V.id,checked:x.has(V.id),onCheckedChange:()=>ee(V.id),onClick:te=>te.stopPropagation()})}),s.jsx("td",{className:"p-2 font-medium text-gray-900 truncate",title:V.name,children:V.name}),s.jsx("td",{className:"p-2 text-gray-600 truncate",title:V.email,children:V.email}),s.jsx("td",{className:"p-2 text-gray-600 truncate",title:V.company,children:V.company||"-"}),s.jsx("td",{className:"p-2 text-gray-600 truncate",title:V.position,children:V.position||"-"}),s.jsx("td",{className:"p-2 text-gray-500 whitespace-nowrap",children:V.registeredAt?new Date(V.registeredAt).toLocaleDateString("id-ID",{day:"2-digit",month:"short"}):"-"})]},V.id))})]})})})]})}function d8({open:r,onClose:e,eventId:n,onSuccess:o}){const[d,u]=A.useState(1),[g,x]=A.useState(!1),[v,y]=A.useState("email"),[S,E]=A.useState(""),[T,I]=A.useState(""),[O,k]=A.useState([]),[P,L]=A.useState(""),[U,B]=A.useState([]),[G,ee]=A.useState("all"),[se,V]=A.useState({});A.useEffect(()=>{r?(te(),v==="email"&&ne()):(u(1),y("email"),E(""),I(""),L(""),B([]),ee("all"),V({}))},[r,n]);const te=async()=>{},ne=async()=>{const{data:X}=await Le.from("email_templates").select("id, name, subject, body").eq("event_id",n).order("name");k(X||[])},ce=(X,q,ie)=>{B(X),ee(q),V(ie||{})},oe=async()=>{try{x(!0);const X=O.find(ie=>ie.id===T);if(!X){m0.error("Please select a template"),x(!1);return}const{error:q}=await Le.from("campaigns").insert({event_id:n,name:S,channel:v,template_id:T,template_name:X.name,template_subject:X.subject,target_type:G,target_filter:se,target_participant_ids:G==="manual"?U:[],status:"draft",total_recipients:U.length,sent_count:0,failed_count:0,pending_count:U.length,notes:P}).select().single();if(q)throw q;x(!1),m0.success(`Campaign "${S}" created!`,{description:`Ready to send to ${U.length} participants.`,duration:5e3}),setTimeout(()=>{o(),e()},2e3)}catch(X){console.error("Error creating campaign:",X),x(!1),m0.error("Failed to create campaign",{description:X.message})}},H=()=>v!==null,W=()=>S.trim()!==""&&T!=="",de=()=>U.length>0;return s.jsx(Pn,{open:r,onOpenChange:e,children:s.jsxs(Dn,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsx(Bn,{className:"flex-shrink-0",children:s.jsx(Fn,{children:"Create New Campaign"})}),s.jsxs("div",{className:"py-4",children:[d===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Choose Channel"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select how you want to reach your participants"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("button",{onClick:()=>y("email"),className:`p-6 border-2 rounded-lg transition-all ${v==="email"?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[s.jsx("div",{className:`p-3 rounded-full ${v==="email"?"bg-purple-600":"bg-gray-200"}`,children:s.jsx(bs,{className:`h-8 w-8 ${v==="email"?"text-white":"text-gray-600"}`})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lg",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send personalized emails with templates"})]}),s.jsxs(mn,{variant:v==="email"?"default":"outline",children:[O.length," templates available"]})]})}),s.jsx("button",{onClick:()=>y("whatsapp"),disabled:!0,className:"p-6 border-2 rounded-lg border-gray-200 opacity-50 cursor-not-allowed",children:s.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[s.jsx("div",{className:"p-3 rounded-full bg-gray-200",children:s.jsx(Nw,{className:"h-8 w-8 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lg",children:"WhatsApp"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send messages via WhatsApp"})]}),s.jsx(mn,{variant:"outline",children:"Coming Soon"})]})})]}),s.jsx(ei,{children:s.jsxs(ti,{children:[v==="email"&&" Email campaigns use your configured SendGrid service",v==="whatsapp"&&" WhatsApp integration coming soon"]})})]}),d===2&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Campaign Details"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Configure your campaign settings"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{children:"Campaign Name *"}),s.jsx(Ke,{placeholder:"e.g., H-3 Reminder Blast",value:S,onChange:X=>E(X.target.value)}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Give your campaign a descriptive name"})]}),v==="email"&&s.jsxs("div",{children:[s.jsx(Pe,{children:"Email Template *"}),s.jsxs(Kr,{value:T,onValueChange:I,children:[s.jsx(Qr,{children:s.jsx(Zr,{placeholder:"Choose a template..."})}),s.jsx(ls,{children:O.length===0?s.jsx(Ut,{value:"none",disabled:!0,children:"No templates available"}):O.map(X=>s.jsx(Ut,{value:X.id,children:X.name},X.id))})]}),T&&s.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded border text-sm",children:[s.jsx("div",{className:"font-medium",children:O.find(X=>X.id===T)?.subject}),s.jsxs("div",{className:"text-gray-600 mt-1 text-xs",children:[O.find(X=>X.id===T)?.body.substring(0,150),"..."]})]})]}),s.jsxs("div",{children:[s.jsx(Pe,{children:"Notes (Optional)"}),s.jsx(Ci,{placeholder:"Add any notes about this campaign...",value:P,onChange:X=>L(X.target.value),rows:3})]})]})]}),d===3&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold mb-1",children:"Target Participants"}),s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Select who will receive this campaign"})]}),s.jsx(L2,{eventId:n,onSelectionChange:ce,selectedIds:U})]})]}),s.jsxs(Bs,{className:"flex justify-between flex-shrink-0",children:[s.jsx("div",{children:d>1&&s.jsxs(Ae,{variant:"outline",onClick:()=>u(d-1),disabled:g,children:[s.jsx(nm,{className:"h-4 w-4 mr-2"}),"Back"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ae,{variant:"ghost",onClick:e,disabled:g,children:"Cancel"}),d<3?s.jsxs(Ae,{onClick:()=>u(d+1),disabled:g||d===1&&!H()||d===2&&!W(),children:["Next",s.jsx(bw,{className:"h-4 w-4 ml-2"})]}):s.jsxs(Ae,{onClick:oe,disabled:g||!de(),children:[s.jsx(fo,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]})]})]})})}function u8({eventId:r}){const[e,n]=A.useState([]),[o,d]=A.useState(!0),[u,g]=A.useState(!1),[x,v]=A.useState(null),[y,S]=A.useState(!1),[E,T]=A.useState(null),[I,O]=A.useState(!1),[k,P]=A.useState([]),[L,U]=A.useState(!1),[B,G]=A.useState(null),[ee,se]=A.useState(new Set);A.useEffect(()=>{V()},[r]);const V=async()=>{try{d(!0);const{data:z,error:ue}=await Le.from("campaigns").select("*").eq("event_id",r).order("created_at",{ascending:!1});if(ue)throw ue;n(z||[])}catch(z){console.error("Error fetching campaigns:",z)}finally{d(!1)}},te=async z=>{if(confirm(`Send campaign "${z.name}" to ${z.total_recipients} participants?`))try{T(z.id),await Le.from("campaigns").update({status:"sending",sent_at:new Date().toISOString()}).eq("id",z.id);let ue=Le.from("participants").select("*").eq("eventId",r);if((z.target_type==="selected"||z.target_type==="manual")&&z.target_participant_ids?.length)ue=ue.in("id",z.target_participant_ids);else if(z.target_type==="filtered"&&z.target_filter){const Y=z.target_filter;Y.status&&(ue=ue.eq("status",Y.status))}const{data:be,error:re}=await ue;if(re){console.error("Error fetching participants:",re),alert("Failed to fetch participants");return}if(!be||be.length===0){alert("No participants found for this campaign");return}const{data:we}=await Le.from("email_templates").select("*").eq("id",z.template_id).single();if(!we){alert("Template not found");return}const{data:Ie}=await Le.from("events").select("*").eq("id",r).single();let Oe=0,ye=0;for(const Y of be)try{const le=ne(we.subject,Y,Ie);let Ce=ne(we.body,Y,Ie);const{data:De,error:Ye}=await Le.from("participant_emails").insert({campaign_id:z.id,participant_id:Y.id,template_id:we.id,template_name:we.name,subject:le,status:"pending"}).select().single();if(Ye||!De)console.error("Error creating email log:",Ye);else{const Ze="https://xtrognfmzyzqhsfvtgne.supabase.co",Ot=`<img src="${Ze}/functions/v1/track-email?id=${De.id}&pid=${Y.id}" width="1" height="1" style="display:none;" alt="" />`;let Me=Ce;const at=/(https?:\/\/[^\s<>"]+)/gi;Me=Me.replace(at,Z=>{const Te=Z.includes("?")?"&":"?";return`${Z}${Te}_track=${De.id}`}),Me=Me+Ot,console.log("[BlastCampaign] Tracking pixel URL:",`${Ze}/functions/v1/track-email?id=${De.id}&pid=${Y.id}`),console.log("[BlastCampaign] Email log ID:",De.id),Ce=Me}let We=we.attachments||[];console.log("[BlastCampaign]  Checking QR code:",{templateIncludeQR:we.include_qr_code,participantQRUrl:Y.qr_code_url,participantId:Y.id,participantEmail:Y.email}),we.include_qr_code&&Y.qr_code_url?(console.log("[BlastCampaign]  Adding QR code from database:",Y.qr_code_url),We=[...We,Y.qr_code_url]):we.include_qr_code&&!Y.qr_code_url&&console.warn("[BlastCampaign]  QR code requested but not found in participant data for:",Y.id),console.log("[BlastCampaign]  Sending email with params:",{to:Y.email,participantId:Y.id,templateId:we.id,attachmentsArray:We,attachmentsCount:We?.length||0,includeQR:we.include_qr_code});const{error:ut}=await Le.functions.invoke("send-email",{body:{to:Y.email,subject:le,html:Ce,participantId:Y.id,templateId:we.id,attachments:We}});ut?(console.error(`Failed to send to ${Y.email}:`,ut),ye++,De?await Le.from("participant_emails").update({status:"failed",error_message:ut.message}).eq("id",De.id):await Le.from("participant_emails").insert({campaign_id:z.id,participant_id:Y.id,template_id:we.id,template_name:we.name,subject:le,status:"failed",error_message:ut.message})):(console.log(` Sent to ${Y.email}`),Oe++,De?await Le.from("participant_emails").update({status:"sent"}).eq("id",De.id):await Le.from("participant_emails").insert({campaign_id:z.id,participant_id:Y.id,template_id:we.id,template_name:we.name,subject:le,status:"sent"})),await new Promise(Ze=>setTimeout(Ze,100))}catch(le){console.error("Error sending email:",le),ye++}await Le.from("campaigns").update({status:"completed",completed_at:new Date().toISOString(),sent_count:Oe,failed_count:ye}).eq("id",z.id),alert(` Campaign complete!

Sent: ${Oe}
Failed: ${ye}
Total: ${be.length}`),V()}catch(ue){console.error("Error sending campaign:",ue),alert("Error sending campaign: "+ue.message),z?.id&&await Le.from("campaigns").update({status:"failed"}).eq("id",z.id)}finally{T(null)}},ne=(z,ue,be)=>z.replace(/\{\{name\}\}/g,ue.name||"").replace(/\{\{email\}\}/g,ue.email||"").replace(/\{\{phone\}\}/g,ue.phone||"").replace(/\{\{company\}\}/g,ue.company||"").replace(/\{\{position\}\}/g,ue.position||"").replace(/\{\{event_name\}\}/g,be?.name||"").replace(/\{\{event_date\}\}/g,be?.startDate||"").replace(/\{\{participant_id\}\}/g,ue.id||""),ce=async z=>{if(confirm(`Delete campaign "${z.name}"?

This will also delete all associated email logs.`))try{const{error:ue}=await Le.from("campaigns").delete().eq("id",z.id);if(ue)throw ue;alert("Campaign deleted successfully"),V()}catch(ue){console.error("Error deleting campaign:",ue),alert("Error deleting campaign: "+ue.message)}},oe=z=>{const ue={draft:{label:"Draft",className:"bg-gray-100 text-gray-700",icon:yc},sending:{label:"Sending...",className:"bg-blue-100 text-blue-700",icon:tS},completed:{label:"Completed",className:"bg-green-100 text-green-700",icon:uu},failed:{label:"Failed",className:"bg-red-100 text-red-700",icon:wi},cancelled:{label:"Cancelled",className:"bg-gray-100 text-gray-700",icon:wi}},{label:be,className:re,icon:we}=ue[z];return s.jsxs(mn,{className:re,children:[s.jsx(we,{className:"h-3 w-3 mr-1"}),be]})},H=z=>z==="email"?s.jsxs(mn,{variant:"outline",className:"bg-purple-50",children:[s.jsx(bs,{className:"h-3 w-3 mr-1"}),"Email"]}):s.jsxs(mn,{variant:"outline",className:"bg-green-50",children:[s.jsx(Nw,{className:"h-3 w-3 mr-1"}),"WhatsApp"]}),W=z=>{const ue={all:{label:"All Participants",icon:""},filtered:{label:"Filtered",icon:""},manual:{label:"Manual Selection",icon:""}};return s.jsxs("span",{className:"text-sm text-gray-600",children:[ue[z].icon," ",ue[z].label]})},de=async(z,ue)=>{if(confirm(`Resend email to ${z.name} (${z.email})?`))try{se(ye=>new Set(ye).add(z.id));const{data:be}=await Le.from("email_templates").select("*").eq("id",ue.template_id).single();if(!be){alert("Template not found");return}const{data:re}=await Le.from("events").select("*").eq("id",r).single(),we=ne(be.subject,z,re),Ie=ne(be.body,z,re),{error:Oe}=await Le.functions.invoke("send-email",{body:{to:z.email,subject:we,html:Ie,participantId:z.id,templateId:be.id}});Oe?(console.error(`Failed to send to ${z.email}:`,Oe),await Le.from("participant_emails").insert({campaign_id:ue.id,participant_id:z.id,template_id:be.id,template_name:be.name,subject:we,status:"failed",error_message:Oe.message}),alert("Failed to send email: "+Oe.message)):(console.log(` Sent to ${z.email}`),await Le.from("participant_emails").insert({campaign_id:ue.id,participant_id:z.id,template_id:be.id,template_name:be.name,subject:we,status:"sent"}),alert(`Email sent successfully to ${z.email}`),x&&await X(x),await V())}catch(be){console.error("Error resending email:",be),alert("Error resending email: "+be.message)}finally{se(be=>{const re=new Set(be);return re.delete(z.id),re})}},X=async z=>{try{v(z),console.log("[ViewParticipants] Campaign details:",{name:z.name,target_type:z.target_type,target_participant_ids:z.target_participant_ids,target_filter:z.target_filter});let ue=Le.from("participants").select("*").eq("eventId",r);if((z.target_type==="selected"||z.target_type==="manual")&&z.target_participant_ids?.length)console.log("[ViewParticipants] Filtering by selected IDs:",z.target_participant_ids),ue=ue.in("id",z.target_participant_ids);else if(z.target_type==="filtered"&&z.target_filter){const Y=z.target_filter;console.log("[ViewParticipants] Applying filter:",Y),Y.status&&(ue=ue.eq("status",Y.status))}else console.log("[ViewParticipants] No filter applied - showing all participants");const{data:be,error:re}=await ue;if(console.log("[ViewParticipants] Participants fetched:",be?.length),re)throw re;const we=(be||[]).map(Y=>Y.id),{data:Ie}=await Le.from("participant_emails").select("participant_id, status, opened_at, sent_at").eq("campaign_id",z.id).in("participant_id",we).order("sent_at",{ascending:!1});console.log("[ViewParticipants] Tracking data:",Ie);const Oe=new Map;(Ie||[]).forEach(Y=>{const le=Oe.get(Y.participant_id);(!le||Y.status==="opened"&&le!=="opened"||Y.status==="sent"&&le==="pending"||Y.status==="failed"&&le==="pending")&&Oe.set(Y.participant_id,Y.status)});const ye=(be||[]).map(Y=>({...Y,email_status:Oe.get(Y.id)||"pending"}));console.log("[ViewParticipants] Participants with status:",ye),P(ye),O(!0)}catch(ue){console.error("Error fetching participants:",ue),alert("Error loading participants: "+ue.message)}},q=async z=>{G(z),U(!0)},ie=async z=>{if(B)try{const{error:ue}=await Le.from("campaigns").update({target_participant_ids:z,total_recipients:z.length,pending_count:z.length}).eq("id",B.id);if(ue)throw ue;alert(` Participants updated!

Total participants: ${z.length}`),U(!1),G(null),V()}catch(ue){console.error("Error updating participants:",ue),alert("Error updating participants: "+ue.message)}};return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Vi,{className:"h-8 w-8 animate-spin text-gray-400"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Blast Campaigns"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage email and WhatsApp campaigns"})]}),s.jsxs(Ae,{onClick:()=>g(!0),size:"lg",children:[s.jsx(cs,{className:"h-5 w-5 mr-2"}),"Create Campaign"]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs(Wn,{children:[s.jsx(Vr,{className:"pb-3",children:s.jsx(Wr,{className:"text-sm font-medium text-gray-600",children:"Total Campaigns"})}),s.jsx(Zn,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),s.jsxs(Wn,{children:[s.jsx(Vr,{className:"pb-3",children:s.jsx(Wr,{className:"text-sm font-medium text-gray-600",children:"Completed"})}),s.jsx(Zn,{children:s.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(z=>z.status==="completed").length})})]}),s.jsxs(Wn,{children:[s.jsx(Vr,{className:"pb-3",children:s.jsx(Wr,{className:"text-sm font-medium text-gray-600",children:"Total Sent"})}),s.jsx(Zn,{children:s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.reduce((z,ue)=>z+ue.sent_count,0)})})]}),s.jsxs(Wn,{children:[s.jsx(Vr,{className:"pb-3",children:s.jsx(Wr,{className:"text-sm font-medium text-gray-600",children:"Success Rate"})}),s.jsx(Zn,{children:s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[e.length>0?Math.round(e.reduce((z,ue)=>z+ue.sent_count,0)/e.reduce((z,ue)=>z+ue.total_recipients,0)*100):0,"%"]})})]})]}),s.jsxs(Wn,{children:[s.jsx(Vr,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Wr,{children:"Campaign History"}),s.jsxs(Ae,{variant:"outline",size:"sm",onClick:V,children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),s.jsx(Zn,{children:e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(fo,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No campaigns yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first campaign to start sending emails"}),s.jsxs(Ae,{onClick:()=>g(!0),children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(go,{children:[s.jsx(xo,{children:s.jsxs(Qn,{children:[s.jsx(_t,{children:"Campaign Name"}),s.jsx(_t,{children:"Channel"}),s.jsx(_t,{children:"Template"}),s.jsx(_t,{children:"Status"}),s.jsx(_t,{children:"Progress"}),s.jsx(_t,{children:"Created"}),s.jsx(_t,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:e.map(z=>s.jsxs(Qn,{children:[s.jsx(yt,{className:"font-medium",children:z.name}),s.jsx(yt,{children:H(z.channel)}),s.jsx(yt,{children:s.jsx("div",{className:"max-w-xs truncate",title:z.template_subject,children:z.template_name})}),s.jsx(yt,{children:oe(z.status)}),s.jsx(yt,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxs("span",{className:"text-green-600",children:[z.sent_count," sent"]}),z.failed_count>0&&s.jsxs("span",{className:"text-red-600",children:[z.failed_count," failed"]})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["of ",z.total_recipients," recipients"]})]})}),s.jsx(yt,{className:"text-sm text-gray-600",children:new Date(z.created_at).toLocaleDateString()}),s.jsx(yt,{className:"text-right",children:s.jsxs("div",{className:"flex gap-2 justify-end",children:[z.status==="draft"&&s.jsxs(Ae,{size:"sm",onClick:()=>te(z),disabled:E===z.id,children:[s.jsx(fo,{className:"h-4 w-4 mr-1"}),"Send"]}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>{v(z),S(!0)},title:"View Details",children:s.jsx(wl,{className:"h-4 w-4"})}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>X(z),title:"View Participants",children:s.jsx(Ea,{className:"h-4 w-4"})}),z.status==="draft"&&s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>q(z),title:"Edit Participants",children:s.jsx(_a,{className:"h-4 w-4"})}),z.status==="draft"&&s.jsx(Ae,{variant:"ghost",size:"sm",onClick:()=>ce(z),children:s.jsx(Ta,{className:"h-4 w-4 text-red-600"})})]})})]},z.id))})]})})})]}),s.jsx(d8,{open:u,onClose:()=>g(!1),eventId:r,onSuccess:V}),x&&s.jsx(Pn,{open:I,onOpenChange:O,children:s.jsxs(Dn,{className:"max-h-[90vh] flex flex-col",style:{maxWidth:"95vw",width:"95vw"},children:[s.jsxs(Bn,{children:[s.jsxs(Fn,{children:["Campaign Participants - ",x.name]}),s.jsxs(Jr,{children:[k.length," participants in this campaign"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs(go,{children:[s.jsx(xo,{children:s.jsxs(Qn,{children:[s.jsx(_t,{children:"Name"}),s.jsx(_t,{children:"Email"}),s.jsx(_t,{children:"Company"}),s.jsx(_t,{children:"Position"}),s.jsx(_t,{children:"Status"}),s.jsx(_t,{className:"text-right",children:"Actions"})]})}),s.jsx(Aa,{children:k.length===0?s.jsx(Qn,{children:s.jsx(yt,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No participants found"})}):k.map(z=>s.jsxs(Qn,{children:[s.jsx(yt,{className:"font-medium",children:z.name}),s.jsx(yt,{children:z.email}),s.jsx(yt,{children:z.company||"-"}),s.jsx(yt,{children:z.position||"-"}),s.jsx(yt,{children:z.email_status==="opened"?s.jsxs(mn,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[s.jsx(wl,{className:"h-3 w-3 mr-1"}),"Opened"]}):z.email_status==="sent"?s.jsxs(mn,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[s.jsx(uu,{className:"h-3 w-3 mr-1"}),"Sent"]}):z.email_status==="failed"?s.jsxs(mn,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[s.jsx(wi,{className:"h-3 w-3 mr-1"}),"Failed"]}):z.email_status==="bounced"?s.jsxs(mn,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:[s.jsx(wi,{className:"h-3 w-3 mr-1"}),"Bounced"]}):s.jsxs(mn,{variant:"outline",className:"bg-gray-50",children:[s.jsx(yc,{className:"h-3 w-3 mr-1"}),"Pending"]})}),s.jsx(yt,{className:"text-right",children:s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>de(z,x),disabled:ee.has(z.id),className:"h-8",children:ee.has(z.id)?s.jsxs(s.Fragment,{children:[s.jsx(Vi,{className:"h-3 w-3 mr-1 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(fo,{className:"h-3 w-3 mr-1"}),"Resend"]})})})]},z.id))})]})}),s.jsxs(Bs,{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Vi,{className:"h-4 w-4"}),s.jsx("span",{children:"Status auto-refreshes when email is opened"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",onClick:()=>{x&&X(x)},children:[s.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Refresh Status"]}),s.jsx(Ae,{variant:"outline",onClick:()=>O(!1),children:"Close"})]})]})]})}),x&&s.jsx(Pn,{open:y,onOpenChange:S,children:s.jsxs(Dn,{className:"max-w-2xl",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:x.name}),s.jsx(Jr,{children:"Campaign details and statistics"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{className:"text-sm text-gray-600",children:"Channel"}),s.jsx("div",{className:"mt-1",children:H(x.channel)})]}),s.jsxs("div",{children:[s.jsx(Pe,{className:"text-sm text-gray-600",children:"Status"}),s.jsx("div",{className:"mt-1",children:oe(x.status)})]}),s.jsxs("div",{children:[s.jsx(Pe,{className:"text-sm text-gray-600",children:"Template"}),s.jsx("div",{className:"mt-1 font-medium",children:x.template_name})]}),s.jsxs("div",{children:[s.jsx(Pe,{className:"text-sm text-gray-600",children:"Target Type"}),s.jsx("div",{className:"mt-1",children:W(x.target_type)})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx(Pe,{className:"text-sm text-gray-600 mb-3 block",children:"Statistics"}),s.jsxs("div",{className:"flex gap-6 justify-center",children:[s.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:x.sent_count}),s.jsx("div",{className:"text-sm text-gray-600",children:"Sent"})]}),s.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-red-600",children:x.failed_count}),s.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]}),s.jsxs("div",{className:"flex items-center gap-3 px-6 py-3 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:x.total_recipients}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]})]})]}),x.notes&&s.jsxs("div",{children:[s.jsx(Pe,{className:"text-sm text-gray-600",children:"Notes"}),s.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded border text-sm",children:x.notes})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(x.created_at).toLocaleString(),x.completed_at&&s.jsxs(s.Fragment,{children:["  Completed: ",new Date(x.completed_at).toLocaleString()]})]})]}),s.jsx(Bs,{children:s.jsx(Ae,{variant:"outline",onClick:()=>S(!1),children:"Close"})})]})}),B&&s.jsx(Pn,{open:L,onOpenChange:U,children:s.jsxs(Dn,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs(Bn,{children:[s.jsxs(Fn,{children:["Edit Participants - ",B.name]}),s.jsx(Jr,{children:"Add or remove participants from this campaign"})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(L2,{eventId:r,selectedIds:B.target_participant_ids||[],onSelectionChange:z=>{G({...B,target_participant_ids:z,total_recipients:z.length})}})}),s.jsxs(Bs,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>{U(!1),G(null)},children:"Cancel"}),s.jsx(Ae,{onClick:()=>{B.target_participant_ids&&ie(B.target_participant_ids)},children:"Save Changes"})]})]})})]})}var h8=Symbol("radix.slottable");function f8(r){const e=({children:n})=>s.jsx(s.Fragment,{children:n});return e.displayName=`${r}.Slottable`,e.__radixId=h8,e}var B2="AlertDialog",[m8]=_s(B2,[Ky]),qi=Ky(),F2=r=>{const{__scopeAlertDialog:e,...n}=r,o=qi(e);return s.jsx(hv,{...o,...n,modal:!0})};F2.displayName=B2;var p8="AlertDialogTrigger",g8=A.forwardRef((r,e)=>{const{__scopeAlertDialog:n,...o}=r,d=qi(n);return s.jsx(fv,{...d,...o,ref:e})});g8.displayName=p8;var x8="AlertDialogPortal",U2=r=>{const{__scopeAlertDialog:e,...n}=r,o=qi(e);return s.jsx(mv,{...o,...n})};U2.displayName=x8;var w8="AlertDialogOverlay",z2=A.forwardRef((r,e)=>{const{__scopeAlertDialog:n,...o}=r,d=qi(n);return s.jsx(pv,{...d,...o,ref:e})});z2.displayName=w8;var fl="AlertDialogContent",[y8,v8]=m8(fl),b8=f8("AlertDialogContent"),$2=A.forwardRef((r,e)=>{const{__scopeAlertDialog:n,children:o,...d}=r,u=qi(n),g=A.useRef(null),x=ln(e,g),v=A.useRef(null);return s.jsx(I4,{contentName:fl,titleName:V2,docsSlug:"alert-dialog",children:s.jsx(y8,{scope:n,cancelRef:v,children:s.jsxs(gv,{role:"alertdialog",...u,...d,ref:x,onOpenAutoFocus:Ht(d.onOpenAutoFocus,y=>{y.preventDefault(),v.current?.focus({preventScroll:!0})}),onPointerDownOutside:y=>y.preventDefault(),onInteractOutside:y=>y.preventDefault(),children:[s.jsx(b8,{children:o}),s.jsx(E8,{contentRef:g})]})})})});$2.displayName=fl;var V2="AlertDialogTitle",W2=A.forwardRef((r,e)=>{const{__scopeAlertDialog:n,...o}=r,d=qi(n);return s.jsx(xv,{...d,...o,ref:e})});W2.displayName=V2;var H2="AlertDialogDescription",G2=A.forwardRef((r,e)=>{const{__scopeAlertDialog:n,...o}=r,d=qi(n);return s.jsx(wv,{...d,...o,ref:e})});G2.displayName=H2;var C8="AlertDialogAction",q2=A.forwardRef((r,e)=>{const{__scopeAlertDialog:n,...o}=r,d=qi(n);return s.jsx(Nm,{...d,...o,ref:e})});q2.displayName=C8;var X2="AlertDialogCancel",Y2=A.forwardRef((r,e)=>{const{__scopeAlertDialog:n,...o}=r,{cancelRef:d}=v8(X2,n),u=qi(n),g=ln(e,d);return s.jsx(Nm,{...u,...o,ref:g})});Y2.displayName=X2;var E8=({contentRef:r})=>{const e=`\`${fl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fl}\` by passing a \`${H2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return A.useEffect(()=>{document.getElementById(r.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,r]),null},S8=F2,_8=U2,N8=z2,A8=$2,j8=q2,I8=Y2,T8=W2,R8=G2;function k8({...r}){return s.jsx(S8,{"data-slot":"alert-dialog",...r})}function O8({...r}){return s.jsx(_8,{"data-slot":"alert-dialog-portal",...r})}function P8({className:r,...e}){return s.jsx(N8,{"data-slot":"alert-dialog-overlay",className:Tt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...e})}function D8({className:r,...e}){return s.jsxs(O8,{children:[s.jsx(P8,{}),s.jsx(A8,{"data-slot":"alert-dialog-content",className:Tt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...e})]})}function M8({className:r,...e}){return s.jsx("div",{"data-slot":"alert-dialog-header",className:Tt("flex flex-col gap-2 text-center sm:text-left",r),...e})}function L8({className:r,...e}){return s.jsx("div",{"data-slot":"alert-dialog-footer",className:Tt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...e})}function B8({className:r,...e}){return s.jsx(T8,{"data-slot":"alert-dialog-title",className:Tt("text-lg font-semibold",r),...e})}function F8({className:r,...e}){return s.jsx(R8,{"data-slot":"alert-dialog-description",className:Tt("text-muted-foreground text-sm",r),...e})}function U8({className:r,...e}){return s.jsx(j8,{className:Tt(tm(),r),...e})}function z8({className:r,...e}){return s.jsx(I8,{className:Tt(tm({variant:"outline"}),r),...e})}const $8={config_name:"New Configuration",provider:"gmail",sender_name:"Event Registration System",sender_email:"",is_active:!1,smtp_secure:!1,smtp_port:587};function V8(){const[r,e]=A.useState([]),[n,o]=A.useState(null),[d,u]=A.useState(null),[g,x]=A.useState(!0),[v,y]=A.useState(!1),[S,E]=A.useState(!1),[T,I]=A.useState(null),[O,k]=A.useState(""),[P,L]=A.useState(!1),[U,B]=A.useState(null);A.useEffect(()=>{G()},[]);const G=async()=>{try{const{data:H,error:W}=await Le.from("email_config").select("*").order("is_active",{ascending:!1}).order("created_at",{ascending:!1});if(W){if(console.error("[EmailConfigV2] Load error:",W),W.message?.includes("column")||W.message?.includes("does not exist"))I({type:"error",text:" Database not upgraded. Please run UPGRADE_EMAIL_CONFIG_SAFE.sql in Supabase SQL Editor."});else throw W;return}e(H||[]);const de=H?.find(X=>X.is_active);de?o(de):H&&H.length>0&&o(H[0])}catch(H){console.error("[EmailConfigV2] Error loading configs:",H),I({type:"error",text:`Failed to load: ${H.message||"Unknown error"}`})}finally{x(!1)}},ee=()=>{const H={id:"",...$8};u(H),L(!0)},se=async H=>{try{console.log("[EmailConfigV2] Duplicating config:",H.id);const{data:W,error:de}=await Le.rpc("duplicate_email_config",{source_config_id:H.id,new_name:`${H.config_name} (Copy)`});if(console.log("[EmailConfigV2] Duplicate response:",{data:W,error:de}),de)throw de.message?.includes("function")&&de.message?.includes("does not exist")?new Error("Database function missing. Please run UPGRADE_EMAIL_CONFIG_SAFE.sql"):de;I({type:"success",text:" Configuration duplicated successfully!"}),await G()}catch(W){console.error("[EmailConfigV2] Error duplicating config:",W),I({type:"error",text:`Failed to duplicate: ${W.message||"Unknown error"}`})}},V=async H=>{y(!0),I(null);try{const W={config_name:H.config_name,provider:H.provider,sender_email:H.sender_email,sender_name:H.sender_name,is_active:!1};switch(H.provider){case"gmail":W.gmail_email=H.gmail_email,W.gmail_app_password=H.gmail_app_password,W.smtp_host=null,W.smtp_port=null,W.smtp_username=null,W.smtp_password=null,W.smtp_secure=!1,W.sendgrid_api_key=null,W.mailgun_api_key=null,W.mailgun_domain=null;break;case"smtp":W.smtp_host=H.smtp_host,W.smtp_port=H.smtp_port,W.smtp_username=H.smtp_username,W.smtp_password=H.smtp_password,W.smtp_secure=H.smtp_secure,W.gmail_email=null,W.gmail_app_password=null,W.sendgrid_api_key=null,W.mailgun_api_key=null,W.mailgun_domain=null;break;case"sendgrid":W.sendgrid_api_key=H.sendgrid_api_key,W.gmail_email=null,W.gmail_app_password=null,W.smtp_host=null,W.smtp_port=null,W.smtp_username=null,W.smtp_password=null,W.smtp_secure=!1,W.mailgun_api_key=null,W.mailgun_domain=null;break;case"mailgun":W.mailgun_api_key=H.mailgun_api_key,W.mailgun_domain=H.mailgun_domain,W.gmail_email=null,W.gmail_app_password=null,W.smtp_host=null,W.smtp_port=null,W.smtp_username=null,W.smtp_password=null,W.smtp_secure=!1,W.sendgrid_api_key=null;break}if(H.id){const{error:de}=await Le.from("email_config").update(W).eq("id",H.id);if(de)throw de}else{const{data:de,error:X}=await Le.from("email_config").insert([W]).select().single();if(X)throw X;H.id=de.id}I({type:"success",text:" Configuration saved successfully!"}),L(!1),u(null),await G()}catch(W){console.error("Error saving config:",W),I({type:"error",text:`Failed to save: ${W.message}`})}finally{y(!1)}},te=async H=>{try{console.log("[EmailConfigV2] Setting active config:",H);const{data:W,error:de}=await Le.rpc("set_active_email_config",{config_id:H});if(console.log("[EmailConfigV2] RPC response:",{data:W,error:de}),de)throw de.message?.includes("function")&&de.message?.includes("does not exist")?new Error("Database function missing. Please run UPGRADE_EMAIL_CONFIG_SAFE.sql"):de;I({type:"success",text:" Active configuration updated!"}),await G()}catch(W){console.error("[EmailConfigV2] Error setting active config:",W),I({type:"error",text:`Failed to activate: ${W.message||"Unknown error"}`})}},ne=async H=>{try{const{error:W}=await Le.from("email_config").delete().eq("id",H);if(W)throw W;I({type:"success",text:" Configuration deleted successfully!"}),B(null),await G()}catch(W){console.error("Error deleting config:",W),I({type:"error",text:`Failed to delete: ${W.message}`})}},ce=async H=>{if(!O){I({type:"error",text:"Please enter a test email address"});return}E(!0),I(null);try{await Le.rpc("set_active_email_config",{config_id:H.id});const{data:W,error:de}=await Le.functions.invoke("send-email",{body:{to:O,subject:"Test Email from Event Registration System",html:`
            <h1> Email Configuration Test</h1>
            <p>This is a test email to verify your email configuration.</p>
            <p><strong>Config:</strong> ${H.config_name}</p>
            <p><strong>Provider:</strong> ${H.provider.toUpperCase()}</p>
            <p><strong>Sender:</strong> ${H.sender_name} (${H.sender_email})</p>
            <p>If you received this email, your configuration is working correctly!</p>
          `}});if(de)throw de;if(await Le.from("email_config").update({last_tested_at:new Date().toISOString(),last_test_status:W?.success?"success":"failed",last_test_error:W?.error||null}).eq("id",H.id),W?.success)I({type:"success",text:` Test email sent successfully to ${O}! Check your inbox.`});else throw new Error(W?.error||"Unknown error");await G()}catch(W){console.error("Error testing email:",W),await Le.from("email_config").update({last_tested_at:new Date().toISOString(),last_test_status:"failed",last_test_error:W.message}).eq("id",H.id),I({type:"error",text:`Failed to send test email: ${W.message}`}),await G()}finally{E(!1)}},oe=(H,W)=>{switch(H.provider){case"gmail":return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Gmail SMTP"})," - Easiest option for testing. Free up to 500 emails/day."]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Gmail Address"}),s.jsx(Ke,{type:"email",value:H.gmail_email||"",onChange:de=>W({...H,gmail_email:de.target.value}),placeholder:"your-email@gmail.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Gmail App Password"}),s.jsx(Ke,{type:"password",value:H.gmail_app_password||"",onChange:de=>W({...H,gmail_app_password:de.target.value}),placeholder:"16-character app password"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Get your App Password from"," ",s.jsx("a",{href:"https://myaccount.google.com/apppasswords",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Google Account Settings"})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs text-yellow-800",children:[s.jsx("strong",{children:" Important:"})," You must use an App Password, not your regular Gmail password."]})})]});case"smtp":return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-gray-800",children:[s.jsx("strong",{children:"Generic SMTP"})," - Use any email hosting provider"]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"SMTP Host"}),s.jsx(Ke,{value:H.smtp_host||"",onChange:de=>W({...H,smtp_host:de.target.value}),placeholder:"mail.yourdomain.com"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: mail.yourdomain.com, smtp.gmail.com, uranus.webmail.co.id"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"SMTP Port"}),s.jsx(Ke,{type:"number",value:H.smtp_port||587,onChange:de=>W({...H,smtp_port:parseInt(de.target.value)}),placeholder:"587"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Common: 465 (SSL), 587 (TLS)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"SMTP Secure (SSL/TLS)"}),s.jsxs("div",{className:"flex items-center space-x-3 h-10 px-3 border rounded-md bg-background",children:[s.jsx(Qs,{id:"smtp_secure",checked:H.smtp_secure||!1,onCheckedChange:de=>W({...H,smtp_secure:de})}),s.jsx(Pe,{htmlFor:"smtp_secure",className:"cursor-pointer font-normal",children:H.smtp_secure?"ON (SSL - Port 465)":"OFF (TLS - Port 587)"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:H.smtp_secure?" Use for port 465":" Use for port 587"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[s.jsx("strong",{children:" Quick Guide:"}),s.jsx("br",{})," Port ",s.jsx("strong",{children:"465"}),"  SMTP Secure ",s.jsx("strong",{children:"ON"})," (SSL/TLS from start)",s.jsx("br",{})," Port ",s.jsx("strong",{children:"587"}),"  SMTP Secure ",s.jsx("strong",{children:"OFF"})," (STARTTLS - upgrades to TLS)",s.jsx("br",{})," Port ",s.jsx("strong",{children:"25"}),"  SMTP Secure ",s.jsx("strong",{children:"OFF"})," (often blocked by ISP)"]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"SMTP Username"}),s.jsx(Ke,{value:H.smtp_username||"",onChange:de=>W({...H,smtp_username:de.target.value}),placeholder:"your-email@domain.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"SMTP Password"}),s.jsx(Ke,{type:"password",value:H.smtp_password||"",onChange:de=>W({...H,smtp_password:de.target.value}),placeholder:""}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Your email account password or app-specific password"})]})]});case"sendgrid":return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-green-800",children:[s.jsx("strong",{children:"SendGrid API"})," - Free tier: 100 emails/day"]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"SendGrid API Key"}),s.jsx(Ke,{type:"password",value:H.sendgrid_api_key||"",onChange:de=>W({...H,sendgrid_api_key:de.target.value}),placeholder:"SG."}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Get from"," ",s.jsx("a",{href:"https://app.sendgrid.com/settings/api_keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"SendGrid Dashboard"})]})]})]});case"mailgun":return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-orange-800",children:[s.jsx("strong",{children:"Mailgun API"})," - Free: 5,000 emails/month"]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Mailgun Domain"}),s.jsx(Ke,{value:H.mailgun_domain||"",onChange:de=>W({...H,mailgun_domain:de.target.value}),placeholder:"mg.yourdomain.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Mailgun API Key"}),s.jsx(Ke,{type:"password",value:H.mailgun_api_key||"",onChange:de=>W({...H,mailgun_api_key:de.target.value}),placeholder:"key-"})]})]})}};return g?s.jsx("div",{className:"flex items-center justify-center p-8",children:"Loading..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold",children:"Email Configurations"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage multiple email providers"})]}),s.jsxs(Ae,{onClick:ee,className:"bg-gradient-to-r from-purple-600 to-pink-600",children:[s.jsx(cs,{className:"h-4 w-4 mr-2"}),"New Configuration"]})]}),T&&s.jsx(ei,{variant:T.type==="error"?"destructive":"default",children:s.jsx(ti,{children:T.text})}),s.jsxs(Wn,{children:[s.jsxs(Vr,{children:[s.jsx(Wr,{children:"Saved Configurations"}),s.jsx(Wi,{children:r.length===0?"No configurations yet. Create one to get started.":"Click to select, test, or manage your email providers"})]}),s.jsx(Zn,{children:s.jsx("div",{className:"space-y-3",children:r.map(H=>s.jsx("div",{className:`border rounded-lg p-4 transition-all ${H.is_active?"border-green-500 bg-green-50":"border-gray-200 hover:border-purple-300"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg",children:H.config_name}),H.is_active&&s.jsxs(mn,{className:"bg-green-500",children:[s.jsx(uu,{className:"h-3 w-3 mr-1"}),"Active"]}),s.jsx(mn,{variant:"outline",children:H.provider.toUpperCase()}),H.last_test_status&&s.jsx(mn,{variant:H.last_test_status==="success"?"default":"destructive",className:H.last_test_status==="success"?"bg-blue-500":"",children:H.last_test_status==="success"?s.jsxs(s.Fragment,{children:[s.jsx(uu,{className:"h-3 w-3 mr-1"}),"Tested "]}):s.jsxs(s.Fragment,{children:[s.jsx(Ew,{className:"h-3 w-3 mr-1"}),"Test Failed"]})})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[H.sender_name," <",H.sender_email,">"]}),H.last_tested_at&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Last tested: ",new Date(H.last_tested_at).toLocaleString()]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!H.is_active&&s.jsxs(Ae,{size:"sm",variant:"outline",onClick:()=>te(H.id),className:"text-green-600 border-green-600 hover:bg-green-50",children:[s.jsx(VS,{className:"h-4 w-4 mr-1"}),"Activate"]}),s.jsx(Ae,{size:"sm",variant:"outline",onClick:()=>{o(H),u({...H}),L(!0)},children:s.jsx(_a,{className:"h-4 w-4"})}),s.jsx(Ae,{size:"sm",variant:"outline",onClick:()=>se(H),children:s.jsx(Sw,{className:"h-4 w-4"})}),s.jsx(Ae,{size:"sm",variant:"outline",onClick:()=>B(H.id),disabled:H.is_active,className:"text-red-600 border-red-600 hover:bg-red-50",children:s.jsx(Ta,{className:"h-4 w-4"})})]})]})},H.id))})})]}),n&&s.jsxs(Wn,{children:[s.jsxs(Vr,{children:[s.jsxs(Wr,{className:"flex items-center gap-2",children:[s.jsx(r1,{className:"h-5 w-5"}),"Test Configuration: ",n.config_name]}),s.jsx(Wi,{children:"Send a test email to verify this configuration"})]}),s.jsxs(Zn,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"email",value:O,onChange:H=>k(H.target.value),placeholder:"test@example.com",className:"flex-1"}),s.jsx(Ae,{onClick:()=>ce(n),disabled:S,className:"bg-gradient-to-r from-purple-600 to-pink-600",children:S?"Sending...":"Send Test Email"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This will temporarily activate this config for testing"})]})]}),s.jsx(Pn,{open:P,onOpenChange:L,children:s.jsxs(Dn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:d?.id?"Edit Configuration":"New Email Configuration"}),s.jsx(Jr,{children:d?.id?"Update your email provider settings":"Add a new email provider"})]}),d&&s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Configuration Name"}),s.jsx(Ke,{value:d.config_name,onChange:H=>u({...d,config_name:H.target.value}),placeholder:"My Email Config"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Sender Name"}),s.jsx(Ke,{value:d.sender_name,onChange:H=>u({...d,sender_name:H.target.value}),placeholder:"Event Registration System"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Sender Email"}),s.jsx(Ke,{type:"email",value:d.sender_email,onChange:H=>u({...d,sender_email:H.target.value}),placeholder:"noreply@yourdomain.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pe,{children:"Provider"}),s.jsxs(Ec,{value:d.provider,onValueChange:H=>u({...d,provider:H}),children:[s.jsxs(Sc,{className:"grid w-full grid-cols-4",children:[s.jsxs(Ir,{value:"gmail",children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Gmail"]}),s.jsxs(Ir,{value:"smtp",children:[s.jsx(QS,{className:"h-4 w-4 mr-2"}),"SMTP"]}),s.jsxs(Ir,{value:"sendgrid",children:[s.jsx(r1,{className:"h-4 w-4 mr-2"}),"SendGrid"]}),s.jsxs(Ir,{value:"mailgun",children:[s.jsx(mS,{className:"h-4 w-4 mr-2"}),"Mailgun"]})]}),s.jsx("div",{className:"mt-4",children:oe(d,u)})]})]})]}),s.jsxs(Bs,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),s.jsx(Ae,{onClick:()=>d&&V(d),disabled:v,className:"bg-gradient-to-r from-purple-600 to-pink-600",children:v?"Saving...":d?.id?"Update":"Create"})]})]})}),s.jsx(k8,{open:!!U,onOpenChange:()=>B(null),children:s.jsxs(D8,{children:[s.jsxs(M8,{children:[s.jsx(B8,{children:"Delete Configuration?"}),s.jsx(F8,{children:"This action cannot be undone. This will permanently delete the email configuration."})]}),s.jsxs(L8,{children:[s.jsx(z8,{children:"Cancel"}),s.jsx(U8,{onClick:()=>U&&ne(U),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}function W8({eventId:r}){const[e,n]=A.useState([]),[o,d]=A.useState([]),[u,g]=A.useState(!0),[x,v]=A.useState(""),[y,S]=A.useState("all"),[E,T]=A.useState("all"),[I,O]=A.useState(1),[k]=A.useState(50),[P,L]=A.useState("sent_at"),[U,B]=A.useState("desc");A.useEffect(()=>{G();const X=Le.channel(`email_history_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"participant_emails"},()=>{G()}).subscribe();return()=>{Le.removeChannel(X)}},[r]),A.useEffect(()=>{se()},[e,x,y,E,P,U]);const G=async()=>{g(!0);try{console.log("[EmailHistory] Loading email history for eventId:",r);const{data:X,error:q}=await Le.from("participant_emails").select(`
          id,
          participant_id,
          template_id,
          template_name,
          campaign_id,
          subject,
          status,
          error_message,
          sent_at,
          opened_at,
          clicked_at,
          participants!inner (
            name,
            email,
            "eventId"
          ),
          campaigns (
            name
          )
        `).eq("participants.eventId",r).order("sent_at",{ascending:!1});if(console.log("[EmailHistory] Query result:",{data:X,error:q,count:X?.length}),q)throw q;const ie=(X||[]).map(z=>({id:z.id,participant_id:z.participant_id,participant_name:z.participants.name,participant_email:z.participants.email,template_id:z.template_id,template_name:z.template_name,subject:z.subject,status:z.status,error_message:z.error_message,sent_at:z.sent_at,opened_at:z.opened_at,clicked_at:z.clicked_at,email_type:ee(z.template_name,z.campaign_id),campaign_name:z.campaigns?.name||z.template_name}));n(ie),console.log("[EmailHistory] Loaded",ie.length,"email logs")}catch(X){console.error("[EmailHistory] Error loading email history:",X)}finally{g(!1)}},ee=(X,q)=>{if(q)return"blast";const ie=X.toLowerCase();return ie.includes("test")?"test":ie.includes("confirmation")||ie.includes("registration")?"confirmation":"individual"},se=()=>{let X=[...e];if(x){const q=x.toLowerCase();X=X.filter(ie=>ie.participant_name.toLowerCase().includes(q)||ie.participant_email.toLowerCase().includes(q)||ie.subject.toLowerCase().includes(q)||ie.template_name.toLowerCase().includes(q))}y!=="all"&&(X=X.filter(q=>q.status===y)),E!=="all"&&(X=X.filter(q=>q.email_type===E)),X.sort((q,ie)=>{let z=q[P],ue=ie[P];return P==="sent_at"?(z=new Date(z).getTime(),ue=new Date(ue).getTime()):typeof z=="string"&&(z=z.toLowerCase(),ue=ue.toLowerCase()),z<ue?U==="asc"?-1:1:z>ue?U==="asc"?1:-1:0}),d(X),O(1)},V=X=>{switch(X.status){case"sent":return s.jsxs(mn,{className:"bg-green-100 text-green-800 border-green-200",children:[s.jsx(uo,{className:"h-3 w-3 mr-1"}),"Sent"]});case"opened":return s.jsxs(mn,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[s.jsx(wl,{className:"h-3 w-3 mr-1"}),"Opened"]});case"clicked":return s.jsxs(mn,{className:"bg-purple-100 text-purple-800 border-purple-200",children:[s.jsx(a1,{className:"h-3 w-3 mr-1"}),"Clicked"]});case"failed":return s.jsxs(mn,{className:"bg-red-100 text-red-800 border-red-200",children:[s.jsx(Ew,{className:"h-3 w-3 mr-1"}),"Failed"]});case"pending":return s.jsxs(mn,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[s.jsx(yc,{className:"h-3 w-3 mr-1"}),"Pending"]});default:return s.jsx(mn,{variant:"outline",children:X.status})}},te=X=>{switch(X){case"blast":return s.jsx(mn,{variant:"outline",className:"bg-purple-50",children:"Blast Campaign"});case"test":return s.jsx(mn,{variant:"outline",className:"bg-orange-50",children:"Test Email"});case"confirmation":return s.jsx(mn,{variant:"outline",className:"bg-green-50",children:"Confirmation"});case"individual":return s.jsx(mn,{variant:"outline",className:"bg-blue-50",children:"Individual"})}},ne=X=>new Date(X).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),ce=()=>{const X=["Timestamp","Recipient","Email","Subject","Campaign","Status","Type","Error"],q=o.map(re=>[ne(re.sent_at),re.participant_name,re.participant_email,re.subject,re.campaign_name||"-",re.status,re.email_type,re.error_message||"-"]),ie=[X.join(","),...q.map(re=>re.map(we=>`"${we}"`).join(","))].join(`
`),z=new Blob([ie],{type:"text/csv"}),ue=URL.createObjectURL(z),be=document.createElement("a");be.href=ue,be.download=`email-history-${new Date().toISOString().split("T")[0]}.csv`,be.click()},oe=Math.ceil(o.length/k),H=(I-1)*k,W=o.slice(H,H+k),de={total:e.length,sent:e.filter(X=>X.status==="sent"||X.status==="opened"||X.status==="clicked").length,opened:e.filter(X=>X.status==="opened"||X.status==="clicked").length,clicked:e.filter(X=>X.status==="clicked").length,failed:e.filter(X=>X.status==="failed").length,pending:e.filter(X=>X.status==="pending").length};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Email History"}),s.jsx("p",{className:"text-muted-foreground",children:"Track all email communications sent to participants"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{variant:"outline",size:"sm",onClick:G,disabled:u,children:[s.jsx(Vi,{className:`h-4 w-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]}),s.jsxs(Ae,{variant:"outline",size:"sm",onClick:ce,children:[s.jsx(im,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),s.jsx(Wn,{children:s.jsx(Zn,{className:"py-3",children:s.jsxs("div",{className:"flex items-center justify-around gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-0.5",children:"Total"}),s.jsx("div",{className:"text-lg font-bold",children:de.total})]}),s.jsx("div",{className:"border-l h-10"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-0.5",children:"Sent"}),s.jsx("div",{className:"text-lg font-bold text-green-600",children:de.sent})]}),s.jsx("div",{className:"border-l h-10"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-0.5",children:"Opened"}),s.jsx("div",{className:"text-lg font-bold text-blue-600",children:de.opened})]}),s.jsx("div",{className:"border-l h-10"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-0.5",children:"Clicked"}),s.jsx("div",{className:"text-lg font-bold text-purple-600",children:de.clicked})]}),s.jsx("div",{className:"border-l h-10"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-0.5",children:"Failed"}),s.jsx("div",{className:"text-lg font-bold text-red-600",children:de.failed})]}),s.jsx("div",{className:"border-l h-10"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-muted-foreground mb-0.5",children:"Pending"}),s.jsx("div",{className:"text-lg font-bold text-yellow-600",children:de.pending})]})]})})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(jc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ke,{placeholder:"Search by recipient, email, subject, or campaign...",value:x,onChange:X=>v(X.target.value),className:"pl-10 h-9"})]}),s.jsxs("select",{value:y,onChange:X=>S(X.target.value),className:"px-3 h-9 text-sm border rounded-md bg-background hover:bg-accent transition-colors cursor-pointer",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"sent",children:"Sent"}),s.jsx("option",{value:"opened",children:"Opened"}),s.jsx("option",{value:"clicked",children:"Clicked"}),s.jsx("option",{value:"failed",children:"Failed"}),s.jsx("option",{value:"pending",children:"Pending"})]}),s.jsxs("select",{value:E,onChange:X=>T(X.target.value),className:"px-3 h-9 text-sm border rounded-md bg-background hover:bg-accent transition-colors cursor-pointer",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"blast",children:"Blast Campaign"}),s.jsx("option",{value:"confirmation",children:"Confirmation"}),s.jsx("option",{value:"individual",children:"Individual"}),s.jsx("option",{value:"test",children:"Test Email"})]})]}),s.jsx(Wn,{children:s.jsxs(Zn,{className:"p-0",children:[s.jsx("div",{className:"overflow-x-auto overflow-y-auto border rounded-lg",style:{position:"relative",maxHeight:"calc(100vh - 350px)",minHeight:"400px",scrollbarWidth:"thin",scrollbarColor:"#a855f7 #f3f4f6"},children:s.jsxs("table",{className:"w-full caption-bottom text-sm",children:[s.jsx("thead",{style:{position:"sticky",top:0,zIndex:30,backgroundColor:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},className:"border-b-2",children:s.jsxs(Qn,{children:[s.jsx(_t,{className:"w-[160px]",children:s.jsxs("button",{onClick:()=>{L("sent_at"),B(U==="asc"?"desc":"asc")},className:"flex items-center gap-1 hover:text-foreground font-medium",children:[s.jsx(xl,{className:"h-4 w-4"}),"Sent At"]})}),s.jsx(_t,{className:"min-w-[200px]",children:s.jsx("button",{onClick:()=>{L("participant_email"),B(U==="asc"?"desc":"asc")},className:"flex items-center gap-1 hover:text-foreground font-medium",children:"Recipient"})}),s.jsx(_t,{className:"min-w-[250px]",children:"Subject"}),s.jsx(_t,{className:"min-w-[180px]",children:"Campaign"}),s.jsx(_t,{className:"w-[120px]",children:"Type"}),s.jsx(_t,{className:"w-[110px]",children:s.jsx("button",{onClick:()=>{L("status"),B(U==="asc"?"desc":"asc")},className:"flex items-center gap-1 hover:text-foreground font-medium",children:"Status"})}),s.jsx(_t,{className:"min-w-[160px]",children:"Activity"})]})}),s.jsx("tbody",{className:"divide-y",children:u?s.jsx(Qn,{children:s.jsx(yt,{colSpan:7,className:"text-center py-8",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Vi,{className:"h-4 w-4 animate-spin"}),"Loading email history..."]})})}):W.length===0?s.jsx(Qn,{children:s.jsxs(yt,{colSpan:7,className:"text-center py-8",children:[s.jsx(bs,{className:"h-12 w-12 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:x||y!=="all"||E!=="all"?"No emails match your filters":"No emails sent yet"})]})}):W.map(X=>s.jsxs(Qn,{children:[s.jsx(yt,{className:"font-mono text-xs",children:ne(X.sent_at)}),s.jsx(yt,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:X.participant_name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:X.participant_email})]})}),s.jsx(yt,{className:"max-w-xs truncate",title:X.subject,children:X.subject}),s.jsx(yt,{className:"text-sm",children:X.template_name}),s.jsx(yt,{children:te(X.email_type)}),s.jsx(yt,{children:s.jsxs("div",{className:"space-y-1",children:[V(X),X.status==="failed"&&X.error_message&&s.jsxs("div",{className:"flex items-start gap-1 text-xs text-red-600 mt-1",children:[s.jsx(wi,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"line-clamp-2",children:X.error_message})]})]})}),s.jsx(yt,{children:s.jsxs("div",{className:"space-y-1 text-xs",children:[X.opened_at?s.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[s.jsx(wl,{className:"h-3 w-3"}),s.jsx("span",{children:ne(X.opened_at)})]}):X.status==="sent"?s.jsx("div",{className:"text-muted-foreground italic",children:"Not opened yet"}):null,X.clicked_at&&s.jsxs("div",{className:"flex items-center gap-1 text-purple-600",children:[s.jsx(a1,{className:"h-3 w-3"}),s.jsx("span",{children:ne(X.clicked_at)})]})]})})]},X.id))})]})}),oe>1&&s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",H+1," to ",Math.min(H+k,o.length)," of ",o.length," emails"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>O(X=>Math.max(1,X-1)),disabled:I===1,children:s.jsx(GE,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-sm",children:["Page ",I," of ",oe]}),s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>O(X=>Math.min(oe,X+1)),disabled:I===oe,children:s.jsx(XE,{className:"h-4 w-4"})})]})]})]})})]})}function H8({eventId:r,accessToken:e,onLogout:n,onBackToEvents:o}){const[d,u]=A.useState(null),[g,x]=A.useState("participants");A.useEffect(()=>{const T=new URLSearchParams(window.location.search).get("tab");T&&["participants","agenda","branding","emails","blast","email-config","email-history"].includes(T)&&x(T)},[]),A.useEffect(()=>{r&&(async()=>{try{const{data:T,error:I}=await Le.from("events").select("*").eq("id",r).single();I?console.error("Error loading event:",I):u(T)}catch(T){console.error("Error loading event:",T)}})()},[r]);const v=E=>{x(E);const T=new URL(window.location.href);T.searchParams.set("tab",E),window.history.pushState({},"",T)},y=async()=>{await Le.auth.signOut(),n()},S=()=>{o()};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50",children:[s.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:s.jsx("div",{className:"container mx-auto px-6 py-5",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Ae,{onClick:S,variant:"ghost",size:"sm",className:"hover:bg-purple-100 hover:text-purple-700",children:[s.jsx(nm,{className:"mr-2 h-4 w-4"}),"Back to Events"]}),s.jsxs("div",{className:"border-l border-gray-300 pl-4",children:[s.jsx("h1",{className:"text-2xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:d?.name||"Event Management Dashboard"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage registrations, attendance, and event schedule"})]})]}),s.jsxs(Ae,{onClick:y,variant:"outline",className:"border-gray-300 hover:border-gray-400",children:[s.jsx(_w,{className:"mr-2 h-4 w-4"}),"Logout"]})]})})}),s.jsx("main",{className:"container mx-auto px-6 py-8",children:s.jsxs(Ec,{value:g,onValueChange:v,className:"space-y-8",children:[s.jsxs(Sc,{className:"flex w-full max-w-5xl mx-auto gap-2 bg-white/80 backdrop-blur-sm p-2 rounded-2xl shadow-md border border-gray-200 h-14",children:[s.jsxs(Ir,{value:"participants",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[s.jsx(Ea,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Participants"})]}),s.jsxs(Ir,{value:"agenda",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[s.jsx(xl,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Agenda"})]}),s.jsxs(Ir,{value:"branding",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[s.jsx(C0,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Branding"})]}),s.jsxs(Ir,{value:"emails",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[s.jsx(bs,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Templates"})]}),s.jsxs(Ir,{value:"blast",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[s.jsx(fo,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Blast"})]}),s.jsxs(Ir,{value:"email-config",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[s.jsx(hu,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Email Settings"})]}),s.jsxs(Ir,{value:"email-history",className:"flex items-center gap-2 rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-purple-500/30 transition-all duration-300",children:[s.jsx(gS,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Email History"})]})]}),s.jsx(ys,{value:"participants",children:s.jsx(AT,{eventId:r,accessToken:e})}),s.jsx(ys,{value:"agenda",children:s.jsx(jT,{eventId:r,accessToken:e})}),s.jsx(ys,{value:"branding",children:s.jsx(DT,{eventId:r})}),s.jsx(ys,{value:"emails",children:s.jsx(MT,{eventId:r})}),s.jsx(ys,{value:"blast",children:s.jsx(u8,{eventId:r})}),s.jsx(ys,{value:"email-config",children:s.jsx(V8,{})}),s.jsx(ys,{value:"email-history",children:s.jsx(W8,{eventId:r})})]})})]})}function G8({onEventSelected:r,onLogout:e}){const[n,o]=A.useState([]),[d,u]=A.useState(!1),[g,x]=A.useState(!1),[v,y]=A.useState(null),[S,E]=A.useState({name:"",startDate:"",endDate:"",location:"",description:""});A.useEffect(()=>{T()},[]);const T=async()=>{try{const{data:ee,error:se}=await Le.from("events").select("*").order("createdAt",{ascending:!1});se?console.error("Error loading events:",se):o(ee||[])}catch(ee){console.error("Error loading events:",ee)}},I=()=>{E({name:"",startDate:"",endDate:"",location:"",description:""}),u(!0)},O=ee=>{y(ee),E({name:ee.name,startDate:ee.startDate,endDate:ee.endDate,location:ee.location,description:ee.description}),x(!0)},k=async()=>{if(!S.name||!S.startDate){alert("Please fill in required fields (Event Name and Start Date)");return}try{const ee=`evt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:se}=await Le.from("events").insert([{id:ee,name:S.name,startDate:S.startDate,endDate:S.endDate||null,location:S.location,description:S.description,createdAt:new Date().toISOString()}]);se?(console.error("Error creating event:",se),alert("Failed to create event")):(T(),u(!1))}catch(ee){console.error("Error creating event:",ee),alert("Failed to create event")}},P=async()=>{if(v){if(!S.name||!S.startDate){alert("Please fill in required fields (Event Name and Start Date)");return}try{const{error:ee}=await Le.from("events").update({name:S.name,startDate:S.startDate,endDate:S.endDate||null,location:S.location,description:S.description}).eq("id",v.id);ee?(console.error("Error updating event:",ee),alert("Failed to update event")):(T(),x(!1),y(null))}catch(ee){console.error("Error updating event:",ee),alert("Failed to update event")}}},L=async(ee,se)=>{if(confirm(`Are you sure you want to delete "${se}"?

This will permanently delete all participants, agenda items, and attendance records associated with this event.`))try{const{error:V}=await Le.from("events").delete().eq("id",ee);V?(console.error("Error deleting event:",V),alert("Failed to delete event")):T()}catch(V){console.error("Error deleting event:",V),alert("Failed to delete event")}},U=ee=>{r(ee)},B=async()=>{await Le.auth.signOut(),e()},G=ee=>ee?new Date(ee).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-violet-50 via-purple-50 to-pink-50",children:[s.jsx("header",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:s.jsxs("div",{className:"container mx-auto px-6 py-5 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Event Management System"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select an event to manage or create a new one"})]}),s.jsxs(Ae,{onClick:B,variant:"outline",className:"border-gray-300 hover:border-gray-400",children:[s.jsx(_w,{className:"mr-2 h-4 w-4"}),"Logout"]})]})}),s.jsx("main",{className:"container mx-auto px-6 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-10",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl mb-2",children:"Your Events"}),s.jsxs("p",{className:"text-gray-600 text-lg",children:[n.length," ",n.length===1?"event":"events"," total"]})]}),s.jsxs(Ae,{onClick:I,size:"lg",className:"gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 h-12 px-6",children:[s.jsx(cs,{className:"mr-2 h-5 w-5"}),"Create New Event"]})]}),n.length===0?s.jsx(Wn,{className:"border-2 border-dashed border-gray-300 bg-white/60 backdrop-blur-sm",children:s.jsxs(Zn,{className:"flex flex-col items-center justify-center py-20",children:[s.jsx("div",{className:"w-20 h-20 gradient-primary-soft rounded-2xl flex items-center justify-center mb-6",children:s.jsx(BE,{className:"h-10 w-10 text-purple-600"})}),s.jsx("h3",{className:"text-2xl mb-3",children:"No events yet"}),s.jsx("p",{className:"text-gray-600 mb-8 text-center max-w-md text-lg",children:"Get started by creating your first event. You'll be able to manage participants, agenda, and track attendance."}),s.jsxs(Ae,{onClick:I,size:"lg",className:"gradient-primary hover:opacity-90 shadow-lg shadow-purple-500/30 h-12 px-6",children:[s.jsx(cs,{className:"mr-2 h-5 w-5"}),"Create Your First Event"]})]})}):s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:n.map(ee=>s.jsxs(Wn,{className:"card-elevated bg-white border-0 overflow-hidden group",children:[s.jsx("div",{className:"h-2 gradient-primary"}),s.jsxs(Vr,{className:"pb-4",children:[s.jsx(Wr,{className:"line-clamp-1 text-xl",children:ee.name}),s.jsxs("div",{className:"space-y-2 text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xl,{className:"h-4 w-4 text-purple-500"}),s.jsxs("span",{className:"text-sm",children:[G(ee.startDate),ee.endDate&&` - ${G(ee.endDate)}`]})]}),ee.location&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(am,{className:"h-4 w-4 text-pink-500"}),s.jsx("span",{className:"text-sm line-clamp-1",children:ee.location})]})]})]}),s.jsxs(Zn,{children:[ee.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-5 line-clamp-2",children:ee.description}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ae,{onClick:()=>U(ee.id),className:"flex-1 gradient-primary hover:opacity-90 shadow-md shadow-purple-500/30",children:["Manage",s.jsx(bw,{className:"ml-2 h-4 w-4"})]}),s.jsx(Ae,{onClick:()=>O(ee),variant:"outline",size:"icon",className:"border-gray-300 hover:border-purple-500 hover:text-purple-600",children:s.jsx(_a,{className:"h-4 w-4"})}),s.jsx(Ae,{onClick:()=>L(ee.id,ee.name),variant:"outline",size:"icon",className:"border-gray-300 hover:border-red-500 hover:text-red-600",children:s.jsx(Ta,{className:"h-4 w-4"})})]})]})]},ee.id))})]})}),s.jsx(Pn,{open:d,onOpenChange:u,children:s.jsxs(Dn,{className:"max-w-2xl",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Create New Event"}),s.jsx(Jr,{children:"Create a new event to manage participants and agenda"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"name",children:"Event Name *"}),s.jsx(Ke,{id:"name",value:S.name,onChange:ee=>E({...S,name:ee.target.value}),placeholder:"e.g., Annual Tech Conference 2024"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"startDate",children:"Start Date *"}),s.jsx(Ke,{id:"startDate",type:"date",value:S.startDate,onChange:ee=>E({...S,startDate:ee.target.value})})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"endDate",children:"End Date"}),s.jsx(Ke,{id:"endDate",type:"date",value:S.endDate,onChange:ee=>E({...S,endDate:ee.target.value})})]})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"location",children:"Location"}),s.jsx(Ke,{id:"location",value:S.location,onChange:ee=>E({...S,location:ee.target.value}),placeholder:"e.g., Convention Center Hall A"})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"description",children:"Description"}),s.jsx(Ci,{id:"description",value:S.description,onChange:ee=>E({...S,description:ee.target.value}),placeholder:"Brief description of the event...",rows:3})]})]}),s.jsxs(Bs,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),s.jsx(Ae,{onClick:k,children:"Create Event"})]})]})}),s.jsx(Pn,{open:g,onOpenChange:x,children:s.jsxs(Dn,{className:"max-w-2xl",children:[s.jsxs(Bn,{children:[s.jsx(Fn,{children:"Edit Event"}),s.jsx(Jr,{children:"Update event details"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-name",children:"Event Name *"}),s.jsx(Ke,{id:"edit-name",value:S.name,onChange:ee=>E({...S,name:ee.target.value}),placeholder:"e.g., Annual Tech Conference 2024"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-startDate",children:"Start Date *"}),s.jsx(Ke,{id:"edit-startDate",type:"date",value:S.startDate,onChange:ee=>E({...S,startDate:ee.target.value})})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-endDate",children:"End Date"}),s.jsx(Ke,{id:"edit-endDate",type:"date",value:S.endDate,onChange:ee=>E({...S,endDate:ee.target.value})})]})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-location",children:"Location"}),s.jsx(Ke,{id:"edit-location",value:S.location,onChange:ee=>E({...S,location:ee.target.value}),placeholder:"e.g., Convention Center Hall A"})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"edit-description",children:"Description"}),s.jsx(Ci,{id:"edit-description",value:S.description,onChange:ee=>E({...S,description:ee.target.value}),placeholder:"Brief description of the event...",rows:3})]})]}),s.jsxs(Bs,{children:[s.jsx(Ae,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),s.jsx(Ae,{onClick:P,children:"Save Changes"})]})]})})]})}var ct;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ct||(ct={}));var Bx=new Map([[ct.QR_CODE,"QR_CODE"],[ct.AZTEC,"AZTEC"],[ct.CODABAR,"CODABAR"],[ct.CODE_39,"CODE_39"],[ct.CODE_93,"CODE_93"],[ct.CODE_128,"CODE_128"],[ct.DATA_MATRIX,"DATA_MATRIX"],[ct.MAXICODE,"MAXICODE"],[ct.ITF,"ITF"],[ct.EAN_13,"EAN_13"],[ct.EAN_8,"EAN_8"],[ct.PDF_417,"PDF_417"],[ct.RSS_14,"RSS_14"],[ct.RSS_EXPANDED,"RSS_EXPANDED"],[ct.UPC_A,"UPC_A"],[ct.UPC_E,"UPC_E"],[ct.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Fx;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(Fx||(Fx={}));function q8(r){return Object.values(ct).includes(r)}var Eu;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Eu||(Eu={}));var X8=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[Eu.SCAN_TYPE_CAMERA,Eu.SCAN_TYPE_FILE],r})(),K2=(function(){function r(e,n){this.format=e,this.formatName=n}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!Bx.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,Bx.get(e))},r})(),Ux=(function(){function r(){}return r.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r})(),X0;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(X0||(X0={}));var Y8=(function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:X0.UNKWOWN_ERROR}},r})(),K8=(function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r})();function zi(r){return typeof r>"u"||r===null}var cl=(function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),Z2=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var d=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(d),g=Object.keys(e),x=0,v=g;x<v.length;x++){var y=v[x];if(u.has(y))return n.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},r})(),pc={exports:{}},Z8=pc.exports,zx;function Q8(){return zx||(zx=1,(function(r,e){(function(n,o){o(e)})(Z8,(function(n){function o(D){return D==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,t){D.__proto__=t}||function(D,t){for(var a in t)t.hasOwnProperty(a)&&(D[a]=t[a])};function u(D,t){d(D,t);function a(){this.constructor=D}D.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}function g(D,t){var a=Object.setPrototypeOf;a?a(D,t):D.__proto__=t}function x(D,t){t===void 0&&(t=D.constructor);var a=Error.captureStackTrace;a&&a(D,t)}var v=(function(D){u(t,D);function t(a){var l=this.constructor,h=D.call(this,a)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),g(h,l.prototype),x(h),h}return t})(Error);class y extends v{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}y.kind="Exception";class S extends y{}S.kind="ArgumentException";class E extends y{}E.kind="IllegalArgumentException";class T{constructor(t){if(this.binarizer=t,t===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,a){return this.binarizer.getBlackRow(t,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,a,l,h){const f=this.binarizer.getLuminanceSource().crop(t,a,l,h);return new T(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends y{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class O{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class k{static arraycopy(t,a,l,h,f){for(;f--;)l[h++]=t[a++]}static currentTimeMillis(){return Date.now()}}class P extends y{}P.kind="IndexOutOfBoundsException";class L extends P{constructor(t=void 0,a=void 0){super(a),this.index=t,this.message=a}}L.kind="ArrayIndexOutOfBoundsException";class U{static fill(t,a){for(let l=0,h=t.length;l<h;l++)t[l]=a}static fillWithin(t,a,l,h){U.rangeCheck(t.length,a,l);for(let f=a;f<l;f++)t[f]=h}static rangeCheck(t,a,l){if(a>l)throw new E("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new L(a);if(l>t)throw new L(l)}static asList(...t){return t}static create(t,a,l){return Array.from({length:t}).map(f=>Array.from({length:a}).fill(l))}static createInt32Array(t,a,l){return Array.from({length:t}).map(f=>Int32Array.from({length:a}).fill(l))}static equals(t,a){if(!t||!a||!t.length||!a.length||t.length!==a.length)return!1;for(let l=0,h=t.length;l<h;l++)if(t[l]!==a[l])return!1;return!0}static hashCode(t){if(t===null)return 0;let a=1;for(const l of t)a=31*a+l;return a}static fillUint8Array(t,a){for(let l=0;l!==t.length;l++)t[l]=a}static copyOf(t,a){return t.slice(0,a)}static copyOfUint8Array(t,a){if(t.length<=a){const l=new Uint8Array(a);return l.set(t),l}return t.slice(0,a)}static copyOfRange(t,a,l){const h=l-a,f=new Int32Array(h);return k.arraycopy(t,a,f,0,h),f}static binarySearch(t,a,l){l===void 0&&(l=U.numberComparator);let h=0,f=t.length-1;for(;h<=f;){const m=f+h>>1,w=l(a,t[m]);if(w>0)h=m+1;else if(w<0)f=m-1;else return m}return-h-1}static numberComparator(t,a){return t-a}}class B{static numberOfTrailingZeros(t){let a;if(t===0)return 32;let l=31;return a=t<<16,a!==0&&(l-=16,t=a),a=t<<8,a!==0&&(l-=8,t=a),a=t<<4,a!==0&&(l-=4,t=a),a=t<<2,a!==0&&(l-=2,t=a),l-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let a=1;return t>>>16||(a+=16,t<<=16),t>>>24||(a+=8,t<<=8),t>>>28||(a+=4,t<<=4),t>>>30||(a+=2,t<<=2),a-=t>>>31,a}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,a){return Math.trunc(t/a)}static parseInt(t,a=void 0){return parseInt(t,a)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class G{constructor(t,a){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,a==null?this.bits=G.makeArray(t):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const a=G.makeArray(t);k.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const a=this.size;if(t>=a)return a;const l=this.bits;let h=Math.floor(t/32),f=l[h];f&=~((1<<(t&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=l[h]}const w=h*32+B.numberOfTrailingZeros(f);return w>a?a:w}getNextUnset(t){const a=this.size;if(t>=a)return a;const l=this.bits;let h=Math.floor(t/32),f=~l[h];f&=~((1<<(t&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=~l[h]}const w=h*32+B.numberOfTrailingZeros(f);return w>a?a:w}setBulk(t,a){this.bits[Math.floor(t/32)]=a}setRange(t,a){if(a<t||t<0||a>this.size)throw new E;if(a===t)return;a--;const l=Math.floor(t/32),h=Math.floor(a/32),f=this.bits;for(let m=l;m<=h;m++){const w=m>l?0:t&31,_=(2<<(m<h?31:a&31))-(1<<w);f[m]|=_}}clear(){const t=this.bits.length,a=this.bits;for(let l=0;l<t;l++)a[l]=0}isRange(t,a,l){if(a<t||t<0||a>this.size)throw new E;if(a===t)return!0;a--;const h=Math.floor(t/32),f=Math.floor(a/32),m=this.bits;for(let w=h;w<=f;w++){const C=w>h?0:t&31,R=(2<<(w<f?31:a&31))-(1<<C)&4294967295;if((m[w]&R)!==(l?R:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,a){if(a<0||a>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((t>>l-1&1)===1)}appendBitArray(t){const a=t.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(t.get(l))}xor(t){if(this.size!==t.size)throw new E("Sizes don't match");const a=this.bits;for(let l=0,h=a.length;l<h;l++)a[l]^=t.bits[l]}toBytes(t,a,l,h){for(let f=0;f<h;f++){let m=0;for(let w=0;w<8;w++)this.get(t)&&(m|=1<<7-w),t++;a[l+f]=m}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,h=this.bits;for(let f=0;f<l;f++){let m=h[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,t[a-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=t[0]>>>f;for(let w=1;w<l;w++){const C=t[w];m|=C<<32-f,t[w-1]=m,m=C>>>f}t[l-1]=m}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof G))return!1;const a=t;return this.size===a.size&&U.equals(this.bits,a.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let t="";for(let a=0,l=this.size;a<l;a++)(a&7)===0&&(t+=" "),t+=this.get(a)?"X":".";return t}clone(){return new G(this.size,this.bits.slice())}}var ee;(function(D){D[D.OTHER=0]="OTHER",D[D.PURE_BARCODE=1]="PURE_BARCODE",D[D.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",D[D.TRY_HARDER=3]="TRY_HARDER",D[D.CHARACTER_SET=4]="CHARACTER_SET",D[D.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",D[D.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",D[D.ASSUME_GS1=7]="ASSUME_GS1",D[D.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",D[D.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",D[D.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ee||(ee={}));var se=ee;class V extends y{static getFormatInstance(){return new V}}V.kind="FormatException";var te;(function(D){D[D.Cp437=0]="Cp437",D[D.ISO8859_1=1]="ISO8859_1",D[D.ISO8859_2=2]="ISO8859_2",D[D.ISO8859_3=3]="ISO8859_3",D[D.ISO8859_4=4]="ISO8859_4",D[D.ISO8859_5=5]="ISO8859_5",D[D.ISO8859_6=6]="ISO8859_6",D[D.ISO8859_7=7]="ISO8859_7",D[D.ISO8859_8=8]="ISO8859_8",D[D.ISO8859_9=9]="ISO8859_9",D[D.ISO8859_10=10]="ISO8859_10",D[D.ISO8859_11=11]="ISO8859_11",D[D.ISO8859_13=12]="ISO8859_13",D[D.ISO8859_14=13]="ISO8859_14",D[D.ISO8859_15=14]="ISO8859_15",D[D.ISO8859_16=15]="ISO8859_16",D[D.SJIS=16]="SJIS",D[D.Cp1250=17]="Cp1250",D[D.Cp1251=18]="Cp1251",D[D.Cp1252=19]="Cp1252",D[D.Cp1256=20]="Cp1256",D[D.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",D[D.UTF8=22]="UTF8",D[D.ASCII=23]="ASCII",D[D.Big5=24]="Big5",D[D.GB18030=25]="GB18030",D[D.EUC_KR=26]="EUC_KR"})(te||(te={}));class ne{constructor(t,a,l,...h){this.valueIdentifier=t,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=h,ne.VALUE_IDENTIFIER_TO_ECI.set(t,this),ne.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,w=f.length;m!==w;m++){const C=f[m];ne.VALUES_TO_ECI.set(C,this)}for(const m of h)ne.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new V("incorect value");const a=ne.VALUES_TO_ECI.get(t);if(a===void 0)throw new V("incorect value");return a}static getCharacterSetECIByName(t){const a=ne.NAME_TO_ECI.get(t);if(a===void 0)throw new V("incorect value");return a}equals(t){if(!(t instanceof ne))return!1;const a=t;return this.getName()===a.getName()}}ne.VALUE_IDENTIFIER_TO_ECI=new Map,ne.VALUES_TO_ECI=new Map,ne.NAME_TO_ECI=new Map,ne.Cp437=new ne(te.Cp437,Int32Array.from([0,2]),"Cp437"),ne.ISO8859_1=new ne(te.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ne.ISO8859_2=new ne(te.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ne.ISO8859_3=new ne(te.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ne.ISO8859_4=new ne(te.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ne.ISO8859_5=new ne(te.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ne.ISO8859_6=new ne(te.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ne.ISO8859_7=new ne(te.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ne.ISO8859_8=new ne(te.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ne.ISO8859_9=new ne(te.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ne.ISO8859_10=new ne(te.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ne.ISO8859_11=new ne(te.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ne.ISO8859_13=new ne(te.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ne.ISO8859_14=new ne(te.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ne.ISO8859_15=new ne(te.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ne.ISO8859_16=new ne(te.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ne.SJIS=new ne(te.SJIS,20,"SJIS","Shift_JIS"),ne.Cp1250=new ne(te.Cp1250,21,"Cp1250","windows-1250"),ne.Cp1251=new ne(te.Cp1251,22,"Cp1251","windows-1251"),ne.Cp1252=new ne(te.Cp1252,23,"Cp1252","windows-1252"),ne.Cp1256=new ne(te.Cp1256,24,"Cp1256","windows-1256"),ne.UnicodeBigUnmarked=new ne(te.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ne.UTF8=new ne(te.UTF8,26,"UTF8","UTF-8"),ne.ASCII=new ne(te.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ne.Big5=new ne(te.Big5,28,"Big5"),ne.GB18030=new ne(te.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ne.EUC_KR=new ne(te.EUC_KR,30,"EUC_KR","EUC-KR");class ce extends y{}ce.kind="UnsupportedOperationException";class oe{static decode(t,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(t,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(t,l):new TextDecoder(l).decode(t)}static shouldDecodeOnFallback(t){return!oe.isBrowser()&&t==="ISO-8859-1"}static encode(t,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(t,l):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof ne?t:ne.getCharacterSetECIByName(t)}static decodeFallback(t,a){const l=this.encodingCharacterSet(a);if(oe.isDecodeFallbackSupported(l)){let h="";for(let f=0,m=t.length;f<m;f++){let w=t[f].toString(16);w.length<2&&(w="0"+w),h+="%"+w}return decodeURIComponent(h)}if(l.equals(ne.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new ce(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(ne.UTF8)||t.equals(ne.ISO8859_1)||t.equals(ne.ASCII)}static encodeFallback(t){const l=btoa(unescape(encodeURIComponent(t))).split(""),h=[];for(let f=0;f<l.length;f++)h.push(l[f].charCodeAt(0));return new Uint8Array(h)}}class H{static castAsNonUtf8Char(t,a=null){const l=a?a.getName():this.ISO88591;return oe.decode(new Uint8Array([t]),l)}static guessEncoding(t,a){if(a!=null&&a.get(se.CHARACTER_SET)!==void 0)return a.get(se.CHARACTER_SET).toString();const l=t.length;let h=!0,f=!0,m=!0,w=0,C=0,_=0,R=0,M=0,$=0,Q=0,he=0,me=0,ve=0,je=0;const Ge=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let Xe=0;Xe<l&&(h||f||m);Xe++){const ze=t[Xe]&255;m&&(w>0?(ze&128)===0?m=!1:w--:(ze&128)!==0&&((ze&64)===0?m=!1:(w++,(ze&32)===0?C++:(w++,(ze&16)===0?_++:(w++,(ze&8)===0?R++:m=!1))))),h&&(ze>127&&ze<160?h=!1:ze>159&&(ze<192||ze===215||ze===247)&&je++),f&&(M>0?ze<64||ze===127||ze>252?f=!1:M--:ze===128||ze===160||ze>239?f=!1:ze>160&&ze<224?($++,he=0,Q++,Q>me&&(me=Q)):ze>127?(M++,Q=0,he++,he>ve&&(ve=he)):(Q=0,he=0))}return m&&w>0&&(m=!1),f&&M>0&&(f=!1),m&&(Ge||C+_+R>0)?H.UTF8:f&&(H.ASSUME_SHIFT_JIS||me>=3||ve>=3)?H.SHIFT_JIS:h&&f?me===2&&$===2||je*10>=l?H.SHIFT_JIS:H.ISO88591:h?H.ISO88591:f?H.SHIFT_JIS:m?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(t,...a){let l=-1;function h(m,w,C,_,R,M){if(m==="%%")return"%";if(a[++l]===void 0)return;m=_?parseInt(_.substr(1)):void 0;let $=R?parseInt(R.substr(1)):void 0,Q;switch(M){case"s":Q=a[l];break;case"c":Q=a[l][0];break;case"f":Q=parseFloat(a[l]).toFixed(m);break;case"p":Q=parseFloat(a[l]).toPrecision(m);break;case"e":Q=parseFloat(a[l]).toExponential(m);break;case"x":Q=parseInt(a[l]).toString($||16);break;case"d":Q=parseFloat(parseInt(a[l],$||10).toPrecision(m)).toFixed(0);break}Q=typeof Q=="object"?JSON.stringify(Q):(+Q).toString($);let he=parseInt(C),me=C&&C[0]+""=="0"?"0":" ";for(;Q.length<he;)Q=w!==void 0?Q+me:me+Q;return Q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(f,h)}static getBytes(t,a){return oe.encode(t,a)}static getCharCode(t,a=0){return t.charCodeAt(a)}static getCharAt(t){return String.fromCharCode(t)}}H.SHIFT_JIS=ne.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=ne.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=ne.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class W{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=H.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,a,l){for(let h=a;a<a+l;h++)this.append(t[h]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,a){this.value=this.value.substr(0,t)+a+this.value.substr(t+1)}substring(t,a){return this.value.substring(t,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,a){this.value=this.value.substr(0,t)+a+this.value.substr(t+a.length)}}class de{constructor(t,a,l,h){if(this.width=t,this.height=a,this.rowSize=l,this.bits=h,a==null&&(a=t),this.height=a,t<1||a<1)throw new E("Both dimensions must be greater than 0");l==null&&(l=Math.floor((t+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const a=t.length,l=t[0].length,h=new de(l,a);for(let f=0;f<a;f++){const m=t[f];for(let w=0;w<l;w++)m[w]&&h.set(w,f)}return h}static parseFromString(t,a,l){if(t===null)throw new E("stringRepresentation cannot be null");const h=new Array(t.length);let f=0,m=0,w=-1,C=0,_=0;for(;_<t.length;)if(t.charAt(_)===`
`||t.charAt(_)==="\r"){if(f>m){if(w===-1)w=f-m;else if(f-m!==w)throw new E("row lengths do not match");m=f,C++}_++}else if(t.substring(_,_+a.length)===a)_+=a.length,h[f]=!0,f++;else if(t.substring(_,_+l.length)===l)_+=l.length,h[f]=!1,f++;else throw new E("illegal character encountered: "+t.substring(_));if(f>m){if(w===-1)w=f-m;else if(f-m!==w)throw new E("row lengths do not match");C++}const R=new de(w,C);for(let M=0;M<f;M++)h[M]&&R.set(Math.floor(M%w),Math.floor(M/w));return R}get(t,a){const l=a*this.rowSize+Math.floor(t/32);return(this.bits[l]>>>(t&31)&1)!==0}set(t,a){const l=a*this.rowSize+Math.floor(t/32);this.bits[l]|=1<<(t&31)&4294967295}unset(t,a){const l=a*this.rowSize+Math.floor(t/32);this.bits[l]&=~(1<<(t&31)&4294967295)}flip(t,a){const l=a*this.rowSize+Math.floor(t/32);this.bits[l]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new E("input matrix dimensions do not match");const a=new G(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let f=0,m=this.height;f<m;f++){const w=f*l,C=t.getRow(f,a).getBitArray();for(let _=0;_<l;_++)h[w+_]^=C[_]}}clear(){const t=this.bits,a=t.length;for(let l=0;l<a;l++)t[l]=0}setRegion(t,a,l,h){if(a<0||t<0)throw new E("Left and top must be nonnegative");if(h<1||l<1)throw new E("Height and width must be at least 1");const f=t+l,m=a+h;if(m>this.height||f>this.width)throw new E("The region must fit inside the matrix");const w=this.rowSize,C=this.bits;for(let _=a;_<m;_++){const R=_*w;for(let M=t;M<f;M++)C[R+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(t,a){a==null||a.getSize()<this.width?a=new G(this.width):a.clear();const l=this.rowSize,h=this.bits,f=t*l;for(let m=0;m<l;m++)a.setBulk(m*32,h[f+m]);return a}setRow(t,a){k.arraycopy(a.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),a=this.getHeight();let l=new G(t),h=new G(t);for(let f=0,m=Math.floor((a+1)/2);f<m;f++)l=this.getRow(f,l),h=this.getRow(a-1-f,h),l.reverse(),h.reverse(),this.setRow(f,h),this.setRow(a-1-f,l)}getEnclosingRectangle(){const t=this.width,a=this.height,l=this.rowSize,h=this.bits;let f=t,m=a,w=-1,C=-1;for(let _=0;_<a;_++)for(let R=0;R<l;R++){const M=h[_*l+R];if(M!==0){if(_<m&&(m=_),_>C&&(C=_),R*32<f){let $=0;for(;(M<<31-$&4294967295)===0;)$++;R*32+$<f&&(f=R*32+$)}if(R*32+31>w){let $=31;for(;!(M>>>$);)$--;R*32+$>w&&(w=R*32+$)}}}return w<f||C<m?null:Int32Array.from([f,m,w-f+1,C-m+1])}getTopLeftOnBit(){const t=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const h=l/t;let f=l%t*32;const m=a[l];let w=0;for(;(m<<31-w&4294967295)===0;)w++;return f+=w,Int32Array.from([f,h])}getBottomRightOnBit(){const t=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/t);let f=Math.floor(l%t)*32;const m=a[l];let w=31;for(;!(m>>>w);)w--;return f+=w,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof de))return!1;const a=t;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&U.equals(this.bits,a.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+U.hashCode(this.bits),t}toString(t="X ",a="  ",l=`
`){return this.buildToString(t,a,l)}buildToString(t,a,l){let h=new W;for(let f=0,m=this.height;f<m;f++){for(let w=0,C=this.width;w<C;w++)h.append(this.get(w,f)?t:a);h.append(l)}return h.toString()}clone(){return new de(this.width,this.height,this.rowSize,this.bits.slice())}}class X extends y{static getNotFoundInstance(){return new X}}X.kind="NotFoundException";class q extends O{constructor(t){super(t),this.luminances=q.EMPTY,this.buckets=new Int32Array(q.LUMINANCE_BUCKETS)}getBlackRow(t,a){const l=this.getLuminanceSource(),h=l.getWidth();a==null||a.getSize()<h?a=new G(h):a.clear(),this.initArrays(h);const f=l.getRow(t,this.luminances),m=this.buckets;for(let C=0;C<h;C++)m[(f[C]&255)>>q.LUMINANCE_SHIFT]++;const w=q.estimateBlackPoint(m);if(h<3)for(let C=0;C<h;C++)(f[C]&255)<w&&a.set(C);else{let C=f[0]&255,_=f[1]&255;for(let R=1;R<h-1;R++){const M=f[R+1]&255;(_*4-C-M)/2<w&&a.set(R),C=_,_=M}}return a}getBlackMatrix(){const t=this.getLuminanceSource(),a=t.getWidth(),l=t.getHeight(),h=new de(a,l);this.initArrays(a);const f=this.buckets;for(let C=1;C<5;C++){const _=Math.floor(l*C/5),R=t.getRow(_,this.luminances),M=Math.floor(a*4/5);for(let $=Math.floor(a/5);$<M;$++){const Q=R[$]&255;f[Q>>q.LUMINANCE_SHIFT]++}}const m=q.estimateBlackPoint(f),w=t.getMatrix();for(let C=0;C<l;C++){const _=C*a;for(let R=0;R<a;R++)(w[_+R]&255)<m&&h.set(R,C)}return h}createBinarizer(t){return new q(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const a=this.buckets;for(let l=0;l<q.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(t){const a=t.length;let l=0,h=0,f=0;for(let R=0;R<a;R++)t[R]>f&&(h=R,f=t[R]),t[R]>l&&(l=t[R]);let m=0,w=0;for(let R=0;R<a;R++){const M=R-h,$=t[R]*M*M;$>w&&(m=R,w=$)}if(h>m){const R=h;h=m,m=R}if(m-h<=a/16)throw new X;let C=m-1,_=-1;for(let R=m-1;R>h;R--){const M=R-h,$=M*M*(m-R)*(l-t[R]);$>_&&(C=R,_=$)}return C<<q.LUMINANCE_SHIFT}}q.LUMINANCE_BITS=5,q.LUMINANCE_SHIFT=8-q.LUMINANCE_BITS,q.LUMINANCE_BUCKETS=1<<q.LUMINANCE_BITS,q.EMPTY=Uint8ClampedArray.from([0]);class ie extends q{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),a=t.getWidth(),l=t.getHeight();if(a>=ie.MINIMUM_DIMENSION&&l>=ie.MINIMUM_DIMENSION){const h=t.getMatrix();let f=a>>ie.BLOCK_SIZE_POWER;(a&ie.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>ie.BLOCK_SIZE_POWER;(l&ie.BLOCK_SIZE_MASK)!==0&&m++;const w=ie.calculateBlackPoints(h,f,m,a,l),C=new de(a,l);ie.calculateThresholdForBlock(h,f,m,a,l,w,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new ie(t)}static calculateThresholdForBlock(t,a,l,h,f,m,w){const C=f-ie.BLOCK_SIZE,_=h-ie.BLOCK_SIZE;for(let R=0;R<l;R++){let M=R<<ie.BLOCK_SIZE_POWER;M>C&&(M=C);const $=ie.cap(R,2,l-3);for(let Q=0;Q<a;Q++){let he=Q<<ie.BLOCK_SIZE_POWER;he>_&&(he=_);const me=ie.cap(Q,2,a-3);let ve=0;for(let Ge=-2;Ge<=2;Ge++){const Xe=m[$+Ge];ve+=Xe[me-2]+Xe[me-1]+Xe[me]+Xe[me+1]+Xe[me+2]}const je=ve/25;ie.thresholdBlock(t,he,M,je,h,w)}}}static cap(t,a,l){return t<a?a:t>l?l:t}static thresholdBlock(t,a,l,h,f,m){for(let w=0,C=l*f+a;w<ie.BLOCK_SIZE;w++,C+=f)for(let _=0;_<ie.BLOCK_SIZE;_++)(t[C+_]&255)<=h&&m.set(a+_,l+w)}static calculateBlackPoints(t,a,l,h,f){const m=f-ie.BLOCK_SIZE,w=h-ie.BLOCK_SIZE,C=new Array(l);for(let _=0;_<l;_++){C[_]=new Int32Array(a);let R=_<<ie.BLOCK_SIZE_POWER;R>m&&(R=m);for(let M=0;M<a;M++){let $=M<<ie.BLOCK_SIZE_POWER;$>w&&($=w);let Q=0,he=255,me=0;for(let je=0,Ge=R*h+$;je<ie.BLOCK_SIZE;je++,Ge+=h){for(let Xe=0;Xe<ie.BLOCK_SIZE;Xe++){const ze=t[Ge+Xe]&255;Q+=ze,ze<he&&(he=ze),ze>me&&(me=ze)}if(me-he>ie.MIN_DYNAMIC_RANGE)for(je++,Ge+=h;je<ie.BLOCK_SIZE;je++,Ge+=h)for(let Xe=0;Xe<ie.BLOCK_SIZE;Xe++)Q+=t[Ge+Xe]&255}let ve=Q>>ie.BLOCK_SIZE_POWER*2;if(me-he<=ie.MIN_DYNAMIC_RANGE&&(ve=he/2,_>0&&M>0)){const je=(C[_-1][M]+2*C[_][M-1]+C[_-1][M-1])/4;he<je&&(ve=je)}C[_][M]=ve}}return C}}ie.BLOCK_SIZE_POWER=3,ie.BLOCK_SIZE=1<<ie.BLOCK_SIZE_POWER,ie.BLOCK_SIZE_MASK=ie.BLOCK_SIZE-1,ie.MINIMUM_DIMENSION=ie.BLOCK_SIZE*5,ie.MIN_DYNAMIC_RANGE=24;class z{constructor(t,a){this.width=t,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,a,l,h){throw new ce("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ce("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ce("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let a=new W;for(let l=0;l<this.height;l++){const h=this.getRow(l,t);for(let f=0;f<this.width;f++){const m=h[f]&255;let w;m<64?w="#":m<128?w="+":m<192?w=".":w=" ",a.append(w)}a.append(`
`)}return a.toString()}}class ue extends z{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,a){const l=this.delegate.getRow(t,a),h=this.getWidth();for(let f=0;f<h;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const t=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let h=0;h<a;h++)l[h]=255-(t[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(t,a,l,h){return new ue(this.delegate.crop(t,a,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ue(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ue(this.delegate.rotateCounterClockwise45())}}class be extends z{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const a=t.getContext("2d").getImageData(0,0,t.width,t.height);return be.toGrayscaleBuffer(a.data,t.width,t.height)}static toGrayscaleBuffer(t,a,l){const h=new Uint8ClampedArray(a*l);for(let f=0,m=0,w=t.length;f<w;f+=4,m++){let C;if(t[f+3]===0)C=255;else{const R=t[f],M=t[f+1],$=t[f+2];C=306*R+601*M+117*$+512>>10}h[m]=C}return h}getRow(t,a){if(t<0||t>=this.getHeight())throw new E("Requested row is outside the image: "+t);const l=this.getWidth(),h=t*l;return a===null?a=this.buffer.slice(h,h+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(h,h+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,a,l,h){return super.crop(t,a,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const a=this.getTempCanvasElement(),l=a.getContext("2d"),h=t*be.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,w=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*m),C=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*m);return a.width=w,a.height=C,l.translate(w/2,C/2),l.rotate(h),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=be.makeBufferFromCanvasImageData(a),this}invert(){return new ue(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class re{constructor(t,a,l){this.deviceId=t,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var we=(globalThis||Dd||self||window||void 0)&&(globalThis||Dd||self||window||void 0).__awaiter||function(D,t,a,l){function h(f){return f instanceof a?f:new a(function(m){m(f)})}return new(a||(a=Promise))(function(f,m){function w(R){try{_(l.next(R))}catch(M){m(M)}}function C(R){try{_(l.throw(R))}catch(M){m(M)}}function _(R){R.done?f(R.value):h(R.value).then(w,C)}_((l=l.apply(D,t||[])).next())})};class Ie{constructor(t,a=500,l){this.reader=t,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return we(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of t){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${a.length+1}`,w=l.groupId,C={deviceId:f,label:m,kind:h,groupId:w};a.push(C)}return a})}getVideoInputDevices(){return we(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new re(a.deviceId,a.label))})}findDeviceById(t){return we(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===t):null})}decodeFromInputVideoDevice(t,a){return we(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,a)})}decodeOnceFromVideoDevice(t,a){return we(this,void 0,void 0,function*(){this.reset();let l;t?l={deviceId:{exact:t}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,a)})}decodeOnceFromConstraints(t,a){return we(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(t,a){return we(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(t,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(t,a,l){return we(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,a,l)})}decodeFromVideoDevice(t,a,l){return we(this,void 0,void 0,function*(){let h;t?h={deviceId:{exact:t}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,a,l)})}decodeFromConstraints(t,a,l){return we(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(h,a,l)})}decodeFromStream(t,a,l){return we(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(t,a);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,a){return we(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,t),this.videoElement=l,this.stream=t,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(t){return new Promise((a,l)=>this.playVideoOnLoad(t,()=>a()))}playVideoOnLoad(t,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",a),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return we(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,a){const l=document.getElementById(t);if(!l)throw new S(`element with id '${t}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new S(`element with id '${t}' must be an ${a} element`);return l}decodeFromImage(t,a){if(!t&&!a)throw new S("either imageElement with a src set or an url must be provided");return a&&!t?this.decodeFromImageUrl(a):this.decodeFromImageElement(t)}decodeFromVideo(t,a){if(!t&&!a)throw new S("Either an element with a src set or an URL must be provided");return a&&!t?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,a,l){if(t===void 0&&a===void 0)throw new S("Either an element with a src set or an URL must be provided");return a&&!t?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(t,l)}decodeFromImageElement(t){if(!t)throw new S("An image element must be provided.");this.reset();const a=this.prepareImageElement(t);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(t){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(t,a){const l=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(t){if(!t)throw new S("A video element must be provided.");this.reset();const a=this.prepareVideoElement(t);return this.videoElement=a,a}decodeFromImageUrl(t){if(!t)throw new S("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=t,l}decodeFromVideoUrl(t){if(!t)throw new S("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=t,l}decodeFromVideoUrlContinuously(t,a){if(!t)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,a);return l.src=t,h}_decodeOnLoadImage(t){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(a,l),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return we(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,a){return we(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,a)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let a;return typeof t>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof t=="string"&&(a=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(a=t),a}prepareVideoElement(t){let a;return!t&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof t=="string"&&(a=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(a=t),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(t,a=!0,l=!0){this._stopAsyncDecode=!1;const h=(f,m)=>{if(this._stopAsyncDecode){m(new X("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const w=this.decode(t);f(w)}catch(w){const C=a&&w instanceof X,R=(w instanceof I||w instanceof V)&&l;if(C||R)return setTimeout(h,this._timeBetweenDecodingAttempts,f,m);m(w)}};return new Promise((f,m)=>h(f,m))}decodeContinuously(t,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(t);a(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){a(null,h);const f=h instanceof I||h instanceof V,m=h instanceof X;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(t){const a=this.createBinaryBitmap(t);return this.decodeBitmap(a)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,a,l){a||(a={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(t,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(t,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(t,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const a=this.getCaptureCanvas(t),l=new be(a),h=new ie(l);return new T(h)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const a=this.createCaptureCanvas(t);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,h;return typeof t<"u"&&(t instanceof HTMLVideoElement?(l=t.videoWidth,h=t.videoHeight):t instanceof HTMLImageElement&&(l=t.naturalWidth||t.width,h=t.naturalHeight||t.height)),a.style.width=l+"px",a.style.height=h+"px",a.width=l,a.height=h,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,a){try{t.srcObject=a}catch{t.src=URL.createObjectURL(a)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Oe{constructor(t,a,l=a==null?0:8*a.length,h,f,m=k.currentTimeMillis()){this.text=t,this.rawBytes=a,this.numBits=l,this.resultPoints=h,this.format=f,this.timestamp=m,this.text=t,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=h,this.format=f,this.resultMetadata=null,m==null?this.timestamp=k.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,a)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const a=this.resultPoints;if(a===null)this.resultPoints=t;else if(t!==null&&t.length>0){const l=new Array(a.length+t.length);k.arraycopy(a,0,l,0,a.length),k.arraycopy(t,0,l,a.length,t.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ye;(function(D){D[D.AZTEC=0]="AZTEC",D[D.CODABAR=1]="CODABAR",D[D.CODE_39=2]="CODE_39",D[D.CODE_93=3]="CODE_93",D[D.CODE_128=4]="CODE_128",D[D.DATA_MATRIX=5]="DATA_MATRIX",D[D.EAN_8=6]="EAN_8",D[D.EAN_13=7]="EAN_13",D[D.ITF=8]="ITF",D[D.MAXICODE=9]="MAXICODE",D[D.PDF_417=10]="PDF_417",D[D.QR_CODE=11]="QR_CODE",D[D.RSS_14=12]="RSS_14",D[D.RSS_EXPANDED=13]="RSS_EXPANDED",D[D.UPC_A=14]="UPC_A",D[D.UPC_E=15]="UPC_E",D[D.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ye||(ye={}));var Y=ye,le;(function(D){D[D.OTHER=0]="OTHER",D[D.ORIENTATION=1]="ORIENTATION",D[D.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",D[D.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",D[D.ISSUE_NUMBER=4]="ISSUE_NUMBER",D[D.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",D[D.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",D[D.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",D[D.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",D[D.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",D[D.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(le||(le={}));var Ce=le;class De{constructor(t,a,l,h,f=-1,m=-1){this.rawBytes=t,this.text=a,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ye{exp(t){return this.expTable[t]}log(t){if(t===0)throw new E;return this.logTable[t]}static addOrSubtract(t,a){return t^a}}class We{constructor(t,a){if(a.length===0)throw new E;this.field=t;const l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),k.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(t===1){l=0;for(let m=0,w=a.length;m!==w;m++){const C=a[m];l=Ye.addOrSubtract(l,C)}return l}l=a[0];const h=a.length,f=this.field;for(let m=1;m<h;m++)l=Ye.addOrSubtract(f.multiply(t,l),a[m]);return l}addOrSubtract(t){if(!this.field.equals(t.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let a=this.coefficients,l=t.coefficients;if(a.length>l.length){const m=a;a=l,l=m}let h=new Int32Array(l.length);const f=l.length-a.length;k.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=Ye.addOrSubtract(a[m-f],l[m]);return new We(this.field,h)}multiply(t){if(!this.field.equals(t.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,h=t.coefficients,f=h.length,m=new Int32Array(l+f-1),w=this.field;for(let C=0;C<l;C++){const _=a[C];for(let R=0;R<f;R++)m[C+R]=Ye.addOrSubtract(m[C+R],w.multiply(_,h[R]))}return new We(w,m)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const a=this.coefficients.length,l=this.field,h=new Int32Array(a),f=this.coefficients;for(let m=0;m<a;m++)h[m]=l.multiply(f[m],t);return new We(l,h)}multiplyByMonomial(t,a){if(t<0)throw new E;if(a===0)return this.field.getZero();const l=this.coefficients,h=l.length,f=new Int32Array(h+t),m=this.field;for(let w=0;w<h;w++)f[w]=m.multiply(l[w],a);return new We(m,f)}divide(t){if(!this.field.equals(t.field))throw new E("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new E("Divide by 0");const a=this.field;let l=a.getZero(),h=this;const f=t.getCoefficient(t.getDegree()),m=a.inverse(f);for(;h.getDegree()>=t.getDegree()&&!h.isZero();){const w=h.getDegree()-t.getDegree(),C=a.multiply(h.getCoefficient(h.getDegree()),m),_=t.multiplyByMonomial(w,C),R=a.buildMonomial(w,C);l=l.addOrSubtract(R),h=h.addOrSubtract(_)}return[l,h]}toString(){let t="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(t+=" - ",l=-l):t.length>0&&(t+=" + "),a===0||l!==1){const h=this.field.log(l);h===0?t+="1":h===1?t+="a":(t+="a^",t+=h)}a!==0&&(a===1?t+="x":(t+="x^",t+=a))}}return t}}class ut extends y{}ut.kind="ArithmeticException";class Ze extends Ye{constructor(t,a,l){super(),this.primitive=t,this.size=a,this.generatorBase=l;const h=new Int32Array(a);let f=1;for(let w=0;w<a;w++)h[w]=f,f*=2,f>=a&&(f^=t,f&=a-1);this.expTable=h;const m=new Int32Array(a);for(let w=0;w<a-1;w++)m[h[w]]=w;this.logTable=m,this.zero=new We(this,Int32Array.from([0])),this.one=new We(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,a){if(t<0)throw new E;if(a===0)return this.zero;const l=new Int32Array(t+1);return l[0]=a,new We(this,l)}inverse(t){if(t===0)throw new ut;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,a){return t===0||a===0?0:this.expTable[(this.logTable[t]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}Ze.AZTEC_DATA_12=new Ze(4201,4096,1),Ze.AZTEC_DATA_10=new Ze(1033,1024,1),Ze.AZTEC_DATA_6=new Ze(67,64,1),Ze.AZTEC_PARAM=new Ze(19,16,1),Ze.QR_CODE_FIELD_256=new Ze(285,256,0),Ze.DATA_MATRIX_FIELD_256=new Ze(301,256,1),Ze.AZTEC_DATA_8=Ze.DATA_MATRIX_FIELD_256,Ze.MAXICODE_FIELD_64=Ze.AZTEC_DATA_6;class Ot extends y{}Ot.kind="ReedSolomonException";class Me extends y{}Me.kind="IllegalStateException";class at{constructor(t){this.field=t}decode(t,a){const l=this.field,h=new We(l,t),f=new Int32Array(a);let m=!0;for(let Q=0;Q<a;Q++){const he=h.evaluateAt(l.exp(Q+l.getGeneratorBase()));f[f.length-1-Q]=he,he!==0&&(m=!1)}if(m)return;const w=new We(l,f),C=this.runEuclideanAlgorithm(l.buildMonomial(a,1),w,a),_=C[0],R=C[1],M=this.findErrorLocations(_),$=this.findErrorMagnitudes(R,M);for(let Q=0;Q<M.length;Q++){const he=t.length-1-l.log(M[Q]);if(he<0)throw new Ot("Bad error location");t[he]=Ze.addOrSubtract(t[he],$[Q])}}runEuclideanAlgorithm(t,a,l){if(t.getDegree()<a.getDegree()){const Q=t;t=a,a=Q}const h=this.field;let f=t,m=a,w=h.getZero(),C=h.getOne();for(;m.getDegree()>=(l/2|0);){let Q=f,he=w;if(f=m,w=C,f.isZero())throw new Ot("r_{i-1} was zero");m=Q;let me=h.getZero();const ve=f.getCoefficient(f.getDegree()),je=h.inverse(ve);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Ge=m.getDegree()-f.getDegree(),Xe=h.multiply(m.getCoefficient(m.getDegree()),je);me=me.addOrSubtract(h.buildMonomial(Ge,Xe)),m=m.addOrSubtract(f.multiplyByMonomial(Ge,Xe))}if(C=me.multiply(w).addOrSubtract(he),m.getDegree()>=f.getDegree())throw new Me("Division algorithm failed to reduce polynomial?")}const _=C.getCoefficient(0);if(_===0)throw new Ot("sigmaTilde(0) was zero");const R=h.inverse(_),M=C.multiplyScalar(R),$=m.multiplyScalar(R);return[M,$]}findErrorLocations(t){const a=t.getDegree();if(a===1)return Int32Array.from([t.getCoefficient(1)]);const l=new Int32Array(a);let h=0;const f=this.field;for(let m=1;m<f.getSize()&&h<a;m++)t.evaluateAt(m)===0&&(l[h]=f.inverse(m),h++);if(h!==a)throw new Ot("Error locator degree does not match number of roots");return l}findErrorMagnitudes(t,a){const l=a.length,h=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const w=f.inverse(a[m]);let C=1;for(let _=0;_<l;_++)if(m!==_){const R=f.multiply(a[_],w),M=(R&1)===0?R|1:R&-2;C=f.multiply(C,M)}h[m]=f.multiply(t.evaluateAt(w),f.inverse(C)),f.getGeneratorBase()!==0&&(h[m]=f.multiply(h[m],w))}return h}}var Z;(function(D){D[D.UPPER=0]="UPPER",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.DIGIT=3]="DIGIT",D[D.PUNCT=4]="PUNCT",D[D.BINARY=5]="BINARY"})(Z||(Z={}));class Te{decode(t){this.ddata=t;let a=t.getBits(),l=this.extractBits(a),h=this.correctBits(l),f=Te.convertBoolArrayToByteArray(h),m=Te.getEncodedData(h),w=new De(f,m,null,null);return w.setNumBits(h.length),w}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let a=t.length,l=Z.UPPER,h=Z.UPPER,f="",m=0;for(;m<a;)if(h===Z.BINARY){if(a-m<5)break;let w=Te.readCode(t,m,5);if(m+=5,w===0){if(a-m<11)break;w=Te.readCode(t,m,11)+31,m+=11}for(let C=0;C<w;C++){if(a-m<8){m=a;break}const _=Te.readCode(t,m,8);f+=H.castAsNonUtf8Char(_),m+=8}h=l}else{let w=h===Z.DIGIT?4:5;if(a-m<w)break;let C=Te.readCode(t,m,w);m+=w;let _=Te.getCharacter(h,C);_.startsWith("CTRL_")?(l=h,h=Te.getTable(_.charAt(5)),_.charAt(6)==="L"&&(l=h)):(f+=_,h=l)}return f}static getTable(t){switch(t){case"L":return Z.LOWER;case"P":return Z.PUNCT;case"M":return Z.MIXED;case"D":return Z.DIGIT;case"B":return Z.BINARY;case"U":default:return Z.UPPER}}static getCharacter(t,a){switch(t){case Z.UPPER:return Te.UPPER_TABLE[a];case Z.LOWER:return Te.LOWER_TABLE[a];case Z.MIXED:return Te.MIXED_TABLE[a];case Z.PUNCT:return Te.PUNCT_TABLE[a];case Z.DIGIT:return Te.DIGIT_TABLE[a];default:throw new Me("Bad table")}}correctBits(t){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=Ze.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=Ze.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=Ze.AZTEC_DATA_10):(l=12,a=Ze.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=t.length/l;if(f<h)throw new V;let m=t.length%l,w=new Int32Array(f);for(let $=0;$<f;$++,m+=l)w[$]=Te.readCode(t,m,l);try{new at(a).decode(w,f-h)}catch($){throw new V($)}let C=(1<<l)-1,_=0;for(let $=0;$<h;$++){let Q=w[$];if(Q===0||Q===C)throw new V;(Q===1||Q===C-1)&&_++}let R=new Array(h*l-_),M=0;for(let $=0;$<h;$++){let Q=w[$];if(Q===1||Q===C-1)R.fill(Q>1,M,M+l-1),M+=l-1;else for(let he=l-1;he>=0;--he)R[M++]=(Q&1<<he)!==0}return R}extractBits(t){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(a?11:14)+l*4,f=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,a));if(a)for(let w=0;w<f.length;w++)f[w]=w;else{let w=h+1+2*B.truncDivision(B.truncDivision(h,2)-1,15),C=h/2,_=B.truncDivision(w,2);for(let R=0;R<C;R++){let M=R+B.truncDivision(R,15);f[C-R-1]=_-M-1,f[C+R]=_+M+1}}for(let w=0,C=0;w<l;w++){let _=(l-w)*4+(a?9:12),R=w*2,M=h-1-R;for(let $=0;$<_;$++){let Q=$*2;for(let he=0;he<2;he++)m[C+Q+he]=t.get(f[R+he],f[R+$]),m[C+2*_+Q+he]=t.get(f[R+$],f[M-he]),m[C+4*_+Q+he]=t.get(f[M-he],f[M-$]),m[C+6*_+Q+he]=t.get(f[M-$],f[R+he])}C+=_*8}return m}static readCode(t,a,l){let h=0;for(let f=a;f<a+l;f++)h<<=1,t[f]&&(h|=1);return h}static readByte(t,a){let l=t.length-a;return l>=8?Te.readCode(t,a,8):Te.readCode(t,a,l)<<8-l}static convertBoolArrayToByteArray(t){let a=new Uint8Array((t.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Te.readByte(t,8*l);return a}totalBitsInLayer(t,a){return((a?88:112)+16*t)*t}}Te.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Te.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Te.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Te.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Te.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Be{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,a,l,h){const f=t-l,m=a-h;return Math.sqrt(f*f+m*m)}static sum(t){let a=0;for(let l=0,h=t.length;l!==h;l++){const f=t[l];a+=f}return a}}class Rt{static floatToIntBits(t){return t}}Rt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(t,a){this.x=t,this.y=a}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ue){const a=t;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Rt.floatToIntBits(this.x)+Rt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const a=this.distance(t[0],t[1]),l=this.distance(t[1],t[2]),h=this.distance(t[0],t[2]);let f,m,w;if(l>=a&&l>=h?(m=t[0],f=t[1],w=t[2]):h>=l&&h>=a?(m=t[1],f=t[0],w=t[2]):(m=t[2],f=t[0],w=t[1]),this.crossProductZ(f,m,w)<0){const C=f;f=w,w=C}t[0]=f,t[1]=m,t[2]=w}static distance(t,a){return Be.distance(t.x,t.y,a.x,a.y)}static crossProductZ(t,a,l){const h=a.x,f=a.y;return(l.x-h)*(t.y-f)-(l.y-f)*(t.x-h)}}class Pt{constructor(t,a){this.bits=t,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Mt extends Pt{constructor(t,a,l,h,f){super(t,a),this.compact=l,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Yt{constructor(t,a,l,h){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),a==null&&(a=Yt.INIT_SIZE),l==null&&(l=t.getWidth()/2|0),h==null&&(h=t.getHeight()/2|0);const f=a/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new X}detect(){let t=this.leftInit,a=this.rightInit,l=this.upInit,h=this.downInit,f=!1,m=!0,w=!1,C=!1,_=!1,R=!1,M=!1;const $=this.width,Q=this.height;for(;m;){m=!1;let he=!0;for(;(he||!C)&&a<$;)he=this.containsBlackPoint(l,h,a,!1),he?(a++,m=!0,C=!0):C||a++;if(a>=$){f=!0;break}let me=!0;for(;(me||!_)&&h<Q;)me=this.containsBlackPoint(t,a,h,!0),me?(h++,m=!0,_=!0):_||h++;if(h>=Q){f=!0;break}let ve=!0;for(;(ve||!R)&&t>=0;)ve=this.containsBlackPoint(l,h,t,!1),ve?(t--,m=!0,R=!0):R||t--;if(t<0){f=!0;break}let je=!0;for(;(je||!M)&&l>=0;)je=this.containsBlackPoint(t,a,l,!0),je?(l--,m=!0,M=!0):M||l--;if(l<0){f=!0;break}m&&(w=!0)}if(!f&&w){const he=a-t;let me=null;for(let Xe=1;me===null&&Xe<he;Xe++)me=this.getBlackPointOnSegment(t,h-Xe,t+Xe,h);if(me==null)throw new X;let ve=null;for(let Xe=1;ve===null&&Xe<he;Xe++)ve=this.getBlackPointOnSegment(t,l+Xe,t+Xe,l);if(ve==null)throw new X;let je=null;for(let Xe=1;je===null&&Xe<he;Xe++)je=this.getBlackPointOnSegment(a,l+Xe,a-Xe,l);if(je==null)throw new X;let Ge=null;for(let Xe=1;Ge===null&&Xe<he;Xe++)Ge=this.getBlackPointOnSegment(a,h-Xe,a-Xe,h);if(Ge==null)throw new X;return this.centerEdges(Ge,me,je,ve)}else throw new X}getBlackPointOnSegment(t,a,l,h){const f=Be.round(Be.distance(t,a,l,h)),m=(l-t)/f,w=(h-a)/f,C=this.image;for(let _=0;_<f;_++){const R=Be.round(t+_*m),M=Be.round(a+_*w);if(C.get(R,M))return new Ue(R,M)}return null}centerEdges(t,a,l,h){const f=t.getX(),m=t.getY(),w=a.getX(),C=a.getY(),_=l.getX(),R=l.getY(),M=h.getX(),$=h.getY(),Q=Yt.CORR;return f<this.width/2?[new Ue(M-Q,$+Q),new Ue(w+Q,C+Q),new Ue(_-Q,R-Q),new Ue(f+Q,m-Q)]:[new Ue(M+Q,$+Q),new Ue(w+Q,C-Q),new Ue(_-Q,R+Q),new Ue(f-Q,m-Q)]}containsBlackPoint(t,a,l,h){const f=this.image;if(h){for(let m=t;m<=a;m++)if(f.get(m,l))return!0}else for(let m=t;m<=a;m++)if(f.get(l,m))return!0;return!1}}Yt.INIT_SIZE=10,Yt.CORR=1;class kr{static checkAndNudgePoints(t,a){const l=t.getWidth(),h=t.getHeight();let f=!0;for(let m=0;m<a.length&&f;m+=2){const w=Math.floor(a[m]),C=Math.floor(a[m+1]);if(w<-1||w>l||C<-1||C>h)throw new X;f=!1,w===-1?(a[m]=0,f=!0):w===l&&(a[m]=l-1,f=!0),C===-1?(a[m+1]=0,f=!0):C===h&&(a[m+1]=h-1,f=!0)}f=!0;for(let m=a.length-2;m>=0&&f;m-=2){const w=Math.floor(a[m]),C=Math.floor(a[m+1]);if(w<-1||w>l||C<-1||C>h)throw new X;f=!1,w===-1?(a[m]=0,f=!0):w===l&&(a[m]=l-1,f=!0),C===-1?(a[m+1]=0,f=!0):C===h&&(a[m+1]=h-1,f=!0)}}}class Vt{constructor(t,a,l,h,f,m,w,C,_){this.a11=t,this.a21=a,this.a31=l,this.a12=h,this.a22=f,this.a32=m,this.a13=w,this.a23=C,this.a33=_}static quadrilateralToQuadrilateral(t,a,l,h,f,m,w,C,_,R,M,$,Q,he,me,ve){const je=Vt.quadrilateralToSquare(t,a,l,h,f,m,w,C);return Vt.squareToQuadrilateral(_,R,M,$,Q,he,me,ve).times(je)}transformPoints(t){const a=t.length,l=this.a11,h=this.a12,f=this.a13,m=this.a21,w=this.a22,C=this.a23,_=this.a31,R=this.a32,M=this.a33;for(let $=0;$<a;$+=2){const Q=t[$],he=t[$+1],me=f*Q+C*he+M;t[$]=(l*Q+m*he+_)/me,t[$+1]=(h*Q+w*he+R)/me}}transformPointsWithValues(t,a){const l=this.a11,h=this.a12,f=this.a13,m=this.a21,w=this.a22,C=this.a23,_=this.a31,R=this.a32,M=this.a33,$=t.length;for(let Q=0;Q<$;Q++){const he=t[Q],me=a[Q],ve=f*he+C*me+M;t[Q]=(l*he+m*me+_)/ve,a[Q]=(h*he+w*me+R)/ve}}static squareToQuadrilateral(t,a,l,h,f,m,w,C){const _=t-l+f-w,R=a-h+m-C;if(_===0&&R===0)return new Vt(l-t,f-l,t,h-a,m-h,a,0,0,1);{const M=l-f,$=w-f,Q=h-m,he=C-m,me=M*he-$*Q,ve=(_*he-$*R)/me,je=(M*R-_*Q)/me;return new Vt(l-t+ve*l,w-t+je*w,t,h-a+ve*h,C-a+je*C,a,ve,je,1)}}static quadrilateralToSquare(t,a,l,h,f,m,w,C){return Vt.squareToQuadrilateral(t,a,l,h,f,m,w,C).buildAdjoint()}buildAdjoint(){return new Vt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Vt(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class it extends kr{sampleGrid(t,a,l,h,f,m,w,C,_,R,M,$,Q,he,me,ve,je,Ge,Xe){const ze=Vt.quadrilateralToQuadrilateral(h,f,m,w,C,_,R,M,$,Q,he,me,ve,je,Ge,Xe);return this.sampleGridWithTransform(t,a,l,ze)}sampleGridWithTransform(t,a,l,h){if(a<=0||l<=0)throw new X;const f=new de(a,l),m=new Float32Array(2*a);for(let w=0;w<l;w++){const C=m.length,_=w+.5;for(let R=0;R<C;R+=2)m[R]=R/2+.5,m[R+1]=_;h.transformPoints(m),kr.checkAndNudgePoints(t,m);try{for(let R=0;R<C;R+=2)t.get(Math.floor(m[R]),Math.floor(m[R+1]))&&f.set(R/2,w)}catch{throw new X}}return f}}class Gt{static setGridSampler(t){Gt.gridSampler=t}static getInstance(){return Gt.gridSampler}}Gt.gridSampler=new it;class qt{constructor(t,a){this.x=t,this.y=a}toResultPoint(){return new Ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Hn{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(t){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new Mt(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new X;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(t[0],t[1],a),this.sampleLine(t[1],t[2],a),this.sampleLine(t[2],t[3],a),this.sampleLine(t[3],t[0],a)]);this.shift=this.getRotation(l,a);let h=0;for(let m=0;m<4;m++){let w=l[(this.shift+m)%4];this.compact?(h<<=7,h+=w>>1&127):(h<<=10,h+=(w>>2&992)+(w>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(t,a){let l=0;t.forEach((h,f,m)=>{let w=(h>>a-2<<1)+(h&1);l=(l<<3)+w}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(B.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new X}getCorrectedParameterData(t,a){let l,h;a?(l=7,h=2):(l=10,h=4);let f=l-h,m=new Int32Array(l);for(let C=l-1;C>=0;--C)m[C]=t&15,t>>=4;try{new at(Ze.AZTEC_PARAM).decode(m,f)}catch{throw new X}let w=0;for(let C=0;C<h;C++)w=(w<<4)+m[C];return w}getBullsEyeCorners(t){let a=t,l=t,h=t,f=t,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(a,m,1,-1),$=this.getFirstDifferent(l,m,1,1),Q=this.getFirstDifferent(h,m,-1,1),he=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let me=this.distancePoint(he,M)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(me<.75||me>1.25||!this.isWhiteOrBlackRectangle(M,$,Q,he))break}a=M,l=$,h=Q,f=he,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new X;this.compact=this.nbCenterLayers===5;let w=new Ue(a.getX()+.5,a.getY()-.5),C=new Ue(l.getX()+.5,l.getY()+.5),_=new Ue(h.getX()-.5,h.getY()+.5),R=new Ue(f.getX()-.5,f.getY()-.5);return this.expandSquare([w,C,_,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,a,l,h;try{let w=new Yt(this.image).detect();t=w[0],a=w[1],l=w[2],h=w[3]}catch{let C=this.image.getWidth()/2,_=this.image.getHeight()/2;t=this.getFirstDifferent(new qt(C+7,_-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new qt(C+7,_+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new qt(C-7,_+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new qt(C-7,_-7),!1,-1,-1).toResultPoint()}let f=Be.round((t.getX()+h.getX()+a.getX()+l.getX())/4),m=Be.round((t.getY()+h.getY()+a.getY()+l.getY())/4);try{let w=new Yt(this.image,15,f,m).detect();t=w[0],a=w[1],l=w[2],h=w[3]}catch{t=this.getFirstDifferent(new qt(f+7,m-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new qt(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new qt(f-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new qt(f-7,m-7),!1,-1,-1).toResultPoint()}return f=Be.round((t.getX()+h.getX()+a.getX()+l.getX())/4),m=Be.round((t.getY()+h.getY()+a.getY()+l.getY())/4),new qt(f,m)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,a,l,h,f){let m=Gt.getInstance(),w=this.getDimension(),C=w/2-this.nbCenterLayers,_=w/2+this.nbCenterLayers;return m.sampleGrid(t,w,w,C,C,_,C,_,_,C,_,a.getX(),a.getY(),l.getX(),l.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(t,a,l){let h=0,f=this.distanceResultPoint(t,a),m=f/l,w=t.getX(),C=t.getY(),_=m*(a.getX()-t.getX())/f,R=m*(a.getY()-t.getY())/f;for(let M=0;M<l;M++)this.image.get(Be.round(w+M*_),Be.round(C+M*R))&&(h|=1<<l-M-1);return h}isWhiteOrBlackRectangle(t,a,l,h){let f=3;t=new qt(t.getX()-f,t.getY()+f),a=new qt(a.getX()-f,a.getY()-f),l=new qt(l.getX()+f,l.getY()-f),h=new qt(h.getX()+f,h.getY()+f);let m=this.getColor(h,t);if(m===0)return!1;let w=this.getColor(t,a);return w!==m||(w=this.getColor(a,l),w!==m)?!1:(w=this.getColor(l,h),w===m)}getColor(t,a){let l=this.distancePoint(t,a),h=(a.getX()-t.getX())/l,f=(a.getY()-t.getY())/l,m=0,w=t.getX(),C=t.getY(),_=this.image.get(t.getX(),t.getY()),R=Math.ceil(l);for(let $=0;$<R;$++)w+=h,C+=f,this.image.get(Be.round(w),Be.round(C))!==_&&m++;let M=m/l;return M>.1&&M<.9?0:M<=.1===_?1:-1}getFirstDifferent(t,a,l,h){let f=t.getX()+l,m=t.getY()+h;for(;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l,m+=h;for(f-=l,m-=h;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===a;)m+=h;return m-=h,new qt(f,m)}expandSquare(t,a,l){let h=l/(2*a),f=t[0].getX()-t[2].getX(),m=t[0].getY()-t[2].getY(),w=(t[0].getX()+t[2].getX())/2,C=(t[0].getY()+t[2].getY())/2,_=new Ue(w+h*f,C+h*m),R=new Ue(w-h*f,C-h*m);f=t[1].getX()-t[3].getX(),m=t[1].getY()-t[3].getY(),w=(t[1].getX()+t[3].getX())/2,C=(t[1].getY()+t[3].getY())/2;let M=new Ue(w+h*f,C+h*m),$=new Ue(w-h*f,C-h*m);return[_,M,R,$]}isValid(t,a){return t>=0&&t<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(t){let a=Be.round(t.getX()),l=Be.round(t.getY());return this.isValid(a,l)}distancePoint(t,a){return Be.distance(t.getX(),t.getY(),a.getX(),a.getY())}distanceResultPoint(t,a){return Be.distance(t.getX(),t.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class yn{decode(t,a=null){let l=null,h=new Hn(t.getBlackMatrix()),f=null,m=null;try{let R=h.detectMirror(!1);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Te().decode(R)}catch(R){l=R}if(m==null)try{let R=h.detectMirror(!0);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Te().decode(R)}catch(R){throw l??R}let w=new Oe(m.getText(),m.getRawBytes(),m.getNumBits(),f,Y.AZTEC,k.currentTimeMillis()),C=m.getByteSegments();C!=null&&w.putMetadata(Ce.BYTE_SEGMENTS,C);let _=m.getECLevel();return _!=null&&w.putMetadata(Ce.ERROR_CORRECTION_LEVEL,_),w}reportFoundResultPoints(t,a){if(t!=null){let l=t.get(se.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((h,f,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Ns extends Ie{constructor(t=500){super(new yn,t)}}class vn{decode(t,a){try{return this.doDecode(t,a)}catch{if(a&&a.get(se.TRY_HARDER)===!0&&t.isRotateSupported()){const f=t.rotateCounterClockwise(),m=this.doDecode(f,a),w=m.getResultMetadata();let C=270;w!==null&&w.get(Ce.ORIENTATION)===!0&&(C=C+w.get(Ce.ORIENTATION)%360),m.putMetadata(Ce.ORIENTATION,C);const _=m.getResultPoints();if(_!==null){const R=f.getHeight();for(let M=0;M<_.length;M++)_[M]=new Ue(R-_[M].getY()-1,_[M].getX())}return m}else throw new X}}reset(){}doDecode(t,a){const l=t.getWidth(),h=t.getHeight();let f=new G(l);const m=a&&a.get(se.TRY_HARDER)===!0,w=Math.max(1,h>>(m?8:5));let C;m?C=h:C=15;const _=Math.trunc(h/2);for(let R=0;R<C;R++){const M=Math.trunc((R+1)/2),$=(R&1)===0,Q=_+w*($?M:-M);if(Q<0||Q>=h)break;try{f=t.getBlackRow(Q,f)}catch{continue}for(let he=0;he<2;he++){if(he===1&&(f.reverse(),a&&a.get(se.NEED_RESULT_POINT_CALLBACK)===!0)){const me=new Map;a.forEach((ve,je)=>me.set(je,ve)),me.delete(se.NEED_RESULT_POINT_CALLBACK),a=me}try{const me=this.decodeRow(Q,f,a);if(he===1){me.putMetadata(Ce.ORIENTATION,180);const ve=me.getResultPoints();ve!==null&&(ve[0]=new Ue(l-ve[0].getX()-1,ve[0].getY()),ve[1]=new Ue(l-ve[1].getX()-1,ve[1].getY()))}return me}catch{}}}throw new X}static recordPattern(t,a,l){const h=l.length;for(let _=0;_<h;_++)l[_]=0;const f=t.getSize();if(a>=f)throw new X;let m=!t.get(a),w=0,C=a;for(;C<f;){if(t.get(C)!==m)l[w]++;else{if(++w===h)break;l[w]=1,m=!m}C++}if(!(w===h||w===h-1&&C===f))throw new X}static recordPatternInReverse(t,a,l){let h=l.length,f=t.get(a);for(;a>0&&h>=0;)t.get(--a)!==f&&(h--,f=!f);if(h>=0)throw new X;vn.recordPattern(t,a+1,l)}static patternMatchVariance(t,a,l){const h=t.length;let f=0,m=0;for(let _=0;_<h;_++)f+=t[_],m+=a[_];if(f<m)return Number.POSITIVE_INFINITY;const w=f/m;l*=w;let C=0;for(let _=0;_<h;_++){const R=t[_],M=a[_]*w,$=R>M?R-M:M-R;if($>l)return Number.POSITIVE_INFINITY;C+=$}return C/f}}class Je extends vn{static findStartPattern(t){const a=t.getSize(),l=t.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,w=!1;const C=6;for(let _=l;_<a;_++)if(t.get(_)!==w)f[h]++;else{if(h===C-1){let R=Je.MAX_AVG_VARIANCE,M=-1;for(let $=Je.CODE_START_A;$<=Je.CODE_START_C;$++){const Q=vn.patternMatchVariance(f,Je.CODE_PATTERNS[$],Je.MAX_INDIVIDUAL_VARIANCE);Q<R&&(R=Q,M=$)}if(M>=0&&t.isRange(Math.max(0,m-(_-m)/2),m,!1))return Int32Array.from([m,_,M]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,w=!w}throw new X}static decodeCode(t,a,l){vn.recordPattern(t,l,a);let h=Je.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<Je.CODE_PATTERNS.length;m++){const w=Je.CODE_PATTERNS[m],C=this.patternMatchVariance(a,w,Je.MAX_INDIVIDUAL_VARIANCE);C<h&&(h=C,f=m)}if(f>=0)return f;throw new X}decodeRow(t,a,l){const h=l&&l.get(se.ASSUME_GS1)===!0,f=Je.findStartPattern(a),m=f[2];let w=0;const C=new Uint8Array(20);C[w++]=m;let _;switch(m){case Je.CODE_START_A:_=Je.CODE_CODE_A;break;case Je.CODE_START_B:_=Je.CODE_CODE_B;break;case Je.CODE_START_C:_=Je.CODE_CODE_C;break;default:throw new V}let R=!1,M=!1,$="",Q=f[0],he=f[1];const me=Int32Array.from([0,0,0,0,0,0]);let ve=0,je=0,Ge=m,Xe=0,ze=!0,Zt=!1,Ft=!1;for(;!R;){const $s=M;switch(M=!1,ve=je,je=Je.decodeCode(a,me,he),C[w++]=je,je!==Je.CODE_STOP&&(ze=!0),je!==Je.CODE_STOP&&(Xe++,Ge+=Xe*je),Q=he,he+=me.reduce((ra,Vl)=>ra+Vl,0),je){case Je.CODE_START_A:case Je.CODE_START_B:case Je.CODE_START_C:throw new V}switch(_){case Je.CODE_CODE_A:if(je<64)Ft===Zt?$+=String.fromCharCode(32+je):$+=String.fromCharCode(32+je+128),Ft=!1;else if(je<96)Ft===Zt?$+=String.fromCharCode(je-64):$+=String.fromCharCode(je+64),Ft=!1;else switch(je!==Je.CODE_STOP&&(ze=!1),je){case Je.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Je.CODE_FNC_2:case Je.CODE_FNC_3:break;case Je.CODE_FNC_4_A:!Zt&&Ft?(Zt=!0,Ft=!1):Zt&&Ft?(Zt=!1,Ft=!1):Ft=!0;break;case Je.CODE_SHIFT:M=!0,_=Je.CODE_CODE_B;break;case Je.CODE_CODE_B:_=Je.CODE_CODE_B;break;case Je.CODE_CODE_C:_=Je.CODE_CODE_C;break;case Je.CODE_STOP:R=!0;break}break;case Je.CODE_CODE_B:if(je<96)Ft===Zt?$+=String.fromCharCode(32+je):$+=String.fromCharCode(32+je+128),Ft=!1;else switch(je!==Je.CODE_STOP&&(ze=!1),je){case Je.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Je.CODE_FNC_2:case Je.CODE_FNC_3:break;case Je.CODE_FNC_4_B:!Zt&&Ft?(Zt=!0,Ft=!1):Zt&&Ft?(Zt=!1,Ft=!1):Ft=!0;break;case Je.CODE_SHIFT:M=!0,_=Je.CODE_CODE_A;break;case Je.CODE_CODE_A:_=Je.CODE_CODE_A;break;case Je.CODE_CODE_C:_=Je.CODE_CODE_C;break;case Je.CODE_STOP:R=!0;break}break;case Je.CODE_CODE_C:if(je<100)je<10&&($+="0"),$+=je;else switch(je!==Je.CODE_STOP&&(ze=!1),je){case Je.CODE_FNC_1:h&&($.length===0?$+="]C1":$+="");break;case Je.CODE_CODE_A:_=Je.CODE_CODE_A;break;case Je.CODE_CODE_B:_=Je.CODE_CODE_B;break;case Je.CODE_STOP:R=!0;break}break}$s&&(_=_===Je.CODE_CODE_A?Je.CODE_CODE_B:Je.CODE_CODE_A)}const Mr=he-Q;if(he=a.getNextUnset(he),!a.isRange(he,Math.min(a.getSize(),he+(he-Q)/2),!1))throw new X;if(Ge-=Xe*ve,Ge%103!==ve)throw new I;const ms=$.length;if(ms===0)throw new X;ms>0&&ze&&(_===Je.CODE_CODE_C?$=$.substring(0,ms-2):$=$.substring(0,ms-1));const tr=(f[1]+f[0])/2,un=Q+Mr/2,Un=C.length,Nr=new Uint8Array(Un);for(let $s=0;$s<Un;$s++)Nr[$s]=C[$s];const Ri=[new Ue(tr,t),new Ue(un,t)];return new Oe($,Nr,0,Ri,Y.CODE_128,new Date().getTime())}}Je.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Je.MAX_AVG_VARIANCE=.25,Je.MAX_INDIVIDUAL_VARIANCE=.7,Je.CODE_SHIFT=98,Je.CODE_CODE_C=99,Je.CODE_CODE_B=100,Je.CODE_CODE_A=101,Je.CODE_FNC_1=102,Je.CODE_FNC_2=97,Je.CODE_FNC_3=96,Je.CODE_FNC_4_A=101,Je.CODE_FNC_4_B=100,Je.CODE_START_A=103,Je.CODE_START_B=104,Je.CODE_START_C=105,Je.CODE_STOP=106;class pn extends vn{constructor(t=!1,a=!1){super(),this.usingCheckDigit=t,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,a,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=pn.findAsteriskPattern(a,h),m=a.getNextSet(f[1]),w=a.getSize(),C,_;do{pn.recordPattern(a,m,h);let me=pn.toNarrowWidePattern(h);if(me<0)throw new X;C=pn.patternToChar(me),this.decodeRowResult+=C,_=m;for(let ve of h)m+=ve;m=a.getNextSet(m)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let me of h)R+=me;let M=m-_-R;if(m!==w&&M*2<R)throw new X;if(this.usingCheckDigit){let me=this.decodeRowResult.length-1,ve=0;for(let je=0;je<me;je++)ve+=pn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(je));if(this.decodeRowResult.charAt(me)!==pn.ALPHABET_STRING.charAt(ve%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,me)}if(this.decodeRowResult.length===0)throw new X;let $;this.extendedMode?$=pn.decodeExtended(this.decodeRowResult):$=this.decodeRowResult;let Q=(f[1]+f[0])/2,he=_+R/2;return new Oe($,null,0,[new Ue(Q,t),new Ue(he,t)],Y.CODE_39,new Date().getTime())}static findAsteriskPattern(t,a){let l=t.getSize(),h=t.getNextSet(0),f=0,m=h,w=!1,C=a.length;for(let _=h;_<l;_++)if(t.get(_)!==w)a[f]++;else{if(f===C-1){if(this.toNarrowWidePattern(a)===pn.ASTERISK_ENCODING&&t.isRange(Math.max(0,m-Math.floor((_-m)/2)),m,!1))return[m,_];m+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,w=!w}throw new X}static toNarrowWidePattern(t){let a=t.length,l=0,h;do{let f=2147483647;for(let C of t)C<f&&C>l&&(f=C);l=f,h=0;let m=0,w=0;for(let C=0;C<a;C++){let _=t[C];_>l&&(w|=1<<a-1-C,h++,m+=_)}if(h===3){for(let C=0;C<a&&h>0;C++){let _=t[C];if(_>l&&(h--,_*2>=m))return-1}return w}}while(h>3);return-1}static patternToChar(t){for(let a=0;a<pn.CHARACTER_ENCODINGS.length;a++)if(pn.CHARACTER_ENCODINGS[a]===t)return pn.ALPHABET_STRING.charAt(a);if(t===pn.ASTERISK_ENCODING)return"*";throw new X}static decodeExtended(t){let a=t.length,l="";for(let h=0;h<a;h++){let f=t.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=t.charAt(h+1),w="\0";switch(f){case"+":if(m>="A"&&m<="Z")w=String.fromCharCode(m.charCodeAt(0)+32);else throw new V;break;case"$":if(m>="A"&&m<="Z")w=String.fromCharCode(m.charCodeAt(0)-64);else throw new V;break;case"%":if(m>="A"&&m<="E")w=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")w=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")w=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")w=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")w="\0";else if(m==="V")w="@";else if(m==="W")w="`";else if(m==="X"||m==="Y"||m==="Z")w="";else throw new V;break;case"/":if(m>="A"&&m<="O")w=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")w=":";else throw new V;break}l+=w,h++}else l+=f}return l}}pn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",pn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],pn.ASTERISK_ENCODING=148;class en extends vn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,a,l){let h=this.decodeStart(a),f=this.decodeEnd(a),m=new W;en.decodeMiddle(a,h[1],f[0],m);let w=m.toString(),C=null;l!=null&&(C=l.get(se.ALLOWED_LENGTHS)),C==null&&(C=en.DEFAULT_ALLOWED_LENGTHS);let _=w.length,R=!1,M=0;for(let he of C){if(_===he){R=!0;break}he>M&&(M=he)}if(!R&&_>M&&(R=!0),!R)throw new V;const $=[new Ue(h[1],t),new Ue(f[0],t)];return new Oe(w,null,0,$,Y.ITF,new Date().getTime())}static decodeMiddle(t,a,l,h){let f=new Int32Array(10),m=new Int32Array(5),w=new Int32Array(5);for(f.fill(0),m.fill(0),w.fill(0);a<l;){vn.recordPattern(t,a,f);for(let _=0;_<5;_++){let R=2*_;m[_]=f[R],w[_]=f[R+1]}let C=en.decodeDigit(m);h.append(C.toString()),C=this.decodeDigit(w),h.append(C.toString()),f.forEach(function(_){a+=_})}}decodeStart(t){let a=en.skipWhiteSpace(t),l=en.findGuardPattern(t,a,en.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(t,l[0]),l}validateQuietZone(t,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let h=a-1;l>0&&h>=0&&!t.get(h);h--)l--;if(l!==0)throw new X}static skipWhiteSpace(t){const a=t.getSize(),l=t.getNextSet(0);if(l===a)throw new X;return l}decodeEnd(t){t.reverse();try{let a=en.skipWhiteSpace(t),l;try{l=en.findGuardPattern(t,a,en.END_PATTERN_REVERSED[0])}catch(f){f instanceof X&&(l=en.findGuardPattern(t,a,en.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,l[0]);let h=l[0];return l[0]=t.getSize()-l[1],l[1]=t.getSize()-h,l}finally{t.reverse()}}static findGuardPattern(t,a,l){let h=l.length,f=new Int32Array(h),m=t.getSize(),w=!1,C=0,_=a;f.fill(0);for(let R=a;R<m;R++)if(t.get(R)!==w)f[C]++;else{if(C===h-1){if(vn.patternMatchVariance(f,l,en.MAX_INDIVIDUAL_VARIANCE)<en.MAX_AVG_VARIANCE)return[_,R];_+=f[0]+f[1],k.arraycopy(f,2,f,0,C-1),f[C-1]=0,f[C]=0,C--}else C++;f[C]=1,w=!w}throw new X}static decodeDigit(t){let a=en.MAX_AVG_VARIANCE,l=-1,h=en.PATTERNS.length;for(let f=0;f<h;f++){let m=en.PATTERNS[f],w=vn.patternMatchVariance(t,m,en.MAX_INDIVIDUAL_VARIANCE);w<a?(a=w,l=f):w===a&&(l=-1)}if(l>=0)return l%10;throw new X}}en.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],en.MAX_AVG_VARIANCE=.38,en.MAX_INDIVIDUAL_VARIANCE=.5,en.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],en.START_PATTERN=Int32Array.from([1,1,1,1]),en.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class rn extends vn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let a=!1,l,h=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),l=rn.findGuardPattern(t,h,!1,this.START_END_PATTERN,f);let m=l[0];h=l[1];let w=m-(h-m);w>=0&&(a=t.isRange(w,m,!1))}return l}static checkChecksum(t){return rn.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let a=t.length;if(a===0)return!1;let l=parseInt(t.charAt(a-1),10);return rn.getStandardUPCEANChecksum(t.substring(0,a-1))===l}static getStandardUPCEANChecksum(t){let a=t.length,l=0;for(let h=a-1;h>=0;h-=2){let f=t.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=t.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}return(1e3-l)%10}static decodeEnd(t,a){return rn.findGuardPattern(t,a,!1,rn.START_END_PATTERN,new Int32Array(rn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,a,l,h){return this.findGuardPattern(t,a,l,h,new Int32Array(h.length))}static findGuardPattern(t,a,l,h,f){let m=t.getSize();a=l?t.getNextUnset(a):t.getNextSet(a);let w=0,C=a,_=h.length,R=l;for(let M=a;M<m;M++)if(t.get(M)!==R)f[w]++;else{if(w===_-1){if(vn.patternMatchVariance(f,h,rn.MAX_INDIVIDUAL_VARIANCE)<rn.MAX_AVG_VARIANCE)return Int32Array.from([C,M]);C+=f[0]+f[1];let $=f.slice(2,f.length-1);for(let Q=0;Q<w-1;Q++)f[Q]=$[Q];f[w-1]=0,f[w]=0,w--}else w++;f[w]=1,R=!R}throw new X}static decodeDigit(t,a,l,h){this.recordPattern(t,l,a);let f=this.MAX_AVG_VARIANCE,m=-1,w=h.length;for(let C=0;C<w;C++){let _=h[C],R=vn.patternMatchVariance(a,_,rn.MAX_INDIVIDUAL_VARIANCE);R<f&&(f=R,m=C)}if(m>=0)return m;throw new X}}rn.MAX_AVG_VARIANCE=.48,rn.MAX_INDIVIDUAL_VARIANCE=.7,rn.START_END_PATTERN=Int32Array.from([1,1,1]),rn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),rn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),rn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Er{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),w=Er.parseExtensionString(m),C=[new Ue((l[0]+l[1])/2,t),new Ue(f,t)],_=new Oe(m,null,0,C,Y.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(t,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=t.getSize(),m=a[1],w=0;for(let _=0;_<5&&m<f;_++){let R=rn.decodeDigit(t,h,m,rn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let M of h)m+=M;R>=10&&(w|=1<<4-_),_!==4&&(m=t.getNextSet(m),m=t.getNextUnset(m))}if(l.length!==5)throw new X;let C=this.determineCheckDigit(w);if(Er.extensionChecksum(l.toString())!==C)throw new X;return m}static extensionChecksum(t){let a=t.length,l=0;for(let h=a-2;h>=0;h-=2)l+=t.charAt(h).charCodeAt(0)-48;l*=3;for(let h=a-1;h>=0;h-=2)l+=t.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(t){for(let a=0;a<10;a++)if(t===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new X}static parseExtensionString(t){if(t.length!==5)return null;let a=Er.parseExtension5String(t);return a==null?null:new Map([[Ce.SUGGESTED_PRICE,a]])}static parseExtension5String(t){let a;switch(t.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(t.substring(1)),h=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return a+h+"."+m}}class lr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),w=lr.parseExtensionString(m),C=[new Ue((l[0]+l[1])/2,t),new Ue(f,t)],_=new Oe(m,null,0,C,Y.UPC_EAN_EXTENSION,new Date().getTime());return w!=null&&_.putAllMetadata(w),_}decodeMiddle(t,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=t.getSize(),m=a[1],w=0;for(let C=0;C<2&&m<f;C++){let _=rn.decodeDigit(t,h,m,rn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let R of h)m+=R;_>=10&&(w|=1<<1-C),C!==1&&(m=t.getNextSet(m),m=t.getNextUnset(m))}if(l.length!==2)throw new X;if(parseInt(l.toString())%4!==w)throw new X;return m}static parseExtensionString(t){return t.length!==2?null:new Map([[Ce.ISSUE_NUMBER,parseInt(t)]])}}class Hr{static decodeRow(t,a,l){let h=rn.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Er().decodeRow(t,a,h)}catch{return new lr().decodeRow(t,a,h)}}}Hr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class tt extends rn{constructor(){super(),this.decodeRowStringBuffer="",tt.L_AND_G_PATTERNS=tt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let a=tt.L_PATTERNS[t-10],l=new Int32Array(a.length);for(let h=0;h<a.length;h++)l[h]=a[a.length-h-1];tt.L_AND_G_PATTERNS[t]=l}}decodeRow(t,a,l){let h=tt.findStartGuardPattern(a),f=l==null?null:l.get(se.NEED_RESULT_POINT_CALLBACK);if(f!=null){const ze=new Ue((h[0]+h[1])/2,t);f.foundPossibleResultPoint(ze)}let m=this.decodeMiddle(a,h,this.decodeRowStringBuffer),w=m.rowOffset,C=m.resultString;if(f!=null){const ze=new Ue(w,t);f.foundPossibleResultPoint(ze)}let _=this.decodeEnd(a,w);if(f!=null){const ze=new Ue((_[0]+_[1])/2,t);f.foundPossibleResultPoint(ze)}let R=_[1],M=R+(R-_[0]);if(M>=a.getSize()||!a.isRange(R,M,!1))throw new X;let $=C.toString();if($.length<8)throw new V;if(!tt.checkChecksum($))throw new I;let Q=(h[1]+h[0])/2,he=(_[1]+_[0])/2,me=this.getBarcodeFormat(),ve=[new Ue(Q,t),new Ue(he,t)],je=new Oe($,null,0,ve,me,new Date().getTime()),Ge=0;try{let ze=Hr.decodeRow(t,a,_[1]);je.putMetadata(Ce.UPC_EAN_EXTENSION,ze.getText()),je.putAllMetadata(ze.getResultMetadata()),je.addResultPoints(ze.getResultPoints()),Ge=ze.getText().length}catch{}let Xe=l==null?null:l.get(se.ALLOWED_EAN_EXTENSIONS);if(Xe!=null){let ze=!1;for(let Zt in Xe)if(Ge.toString()===Zt){ze=!0;break}if(!ze)throw new X}return je}decodeEnd(t,a){return tt.findGuardPattern(t,a,!1,tt.START_END_PATTERN,new Int32Array(tt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return tt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let a=t.length;if(a===0)return!1;let l=parseInt(t.charAt(a-1),10);return tt.getStandardUPCEANChecksum(t.substring(0,a-1))===l}static getStandardUPCEANChecksum(t){let a=t.length,l=0;for(let h=a-1;h>=0;h-=2){let f=t.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=t.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}return(1e3-l)%10}}class Kt extends tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=t.getSize(),m=a[1],w=0;for(let _=0;_<6&&m<f;_++){let R=tt.decodeDigit(t,h,m,tt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let M of h)m+=M;R>=10&&(w|=1<<5-_)}l=Kt.determineFirstDigit(l,w),m=tt.findGuardPattern(t,m,!0,tt.MIDDLE_PATTERN,new Int32Array(tt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<6&&m<f;_++){let R=tt.decodeDigit(t,h,m,tt.L_PATTERNS);l+=String.fromCharCode(48+R);for(let M of h)m+=M}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Y.EAN_13}static determineFirstDigit(t,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return t=String.fromCharCode(48+l)+t,t;throw new X}}Kt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Or extends tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,a,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=t.getSize(),m=a[1];for(let C=0;C<4&&m<f;C++){let _=tt.decodeDigit(t,h,m,tt.L_PATTERNS);l+=String.fromCharCode(48+_);for(let R of h)m+=R}m=tt.findGuardPattern(t,m,!0,tt.MIDDLE_PATTERN,new Int32Array(tt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&m<f;C++){let _=tt.decodeDigit(t,h,m,tt.L_PATTERNS);l+=String.fromCharCode(48+_);for(let R of h)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Y.EAN_8}}class kt extends tt{constructor(){super(...arguments),this.ean13Reader=new Kt}getBarcodeFormat(){return Y.UPC_A}decode(t,a){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,a,l))}decodeMiddle(t,a,l){return this.ean13Reader.decodeMiddle(t,a,l)}maybeReturnResult(t){let a=t.getText();if(a.charAt(0)==="0"){let l=new Oe(a.substring(1),null,null,t.getResultPoints(),Y.UPC_A);return t.getResultMetadata()!=null&&l.putAllMetadata(t.getResultMetadata()),l}else throw new X}reset(){this.ean13Reader.reset()}}class Wt extends tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,a,l){const h=this.decodeMiddleCounters.map(_=>_);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=t.getSize();let m=a[1],w=0;for(let _=0;_<6&&m<f;_++){const R=Wt.decodeDigit(t,h,m,Wt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let M of h)m+=M;R>=10&&(w|=1<<5-_)}let C=Wt.determineNumSysAndCheckDigit(l,w);return{rowOffset:m,resultString:C}}decodeEnd(t,a){return Wt.findGuardPatternWithoutCounters(t,a,!0,Wt.MIDDLE_END_PATTERN)}checkChecksum(t){return tt.checkChecksum(Wt.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,a){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return f+t+m}throw X.getNotFoundInstance()}getBarcodeFormat(){return Y.UPC_E}static convertUPCEtoUPCA(t){const a=t.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new W;l.append(t.charAt(0));let h=a[5];switch(h){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(h),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(h);break}return t.length>=8&&l.append(t.charAt(7)),l.toString()}}Wt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Wt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class sn extends vn{constructor(t){super();let a=t==null?null:t.get(se.POSSIBLE_FORMATS),l=[];o(a)?(l.push(new Kt),l.push(new kt),l.push(new Or),l.push(new Wt)):(a.indexOf(Y.EAN_13)>-1&&l.push(new Kt),a.indexOf(Y.UPC_A)>-1&&l.push(new kt),a.indexOf(Y.EAN_8)>-1&&l.push(new Or),a.indexOf(Y.UPC_E)>-1&&l.push(new Wt)),this.readers=l}decodeRow(t,a,l){for(let h of this.readers)try{const f=h.decodeRow(t,a,l),m=f.getBarcodeFormat()===Y.EAN_13&&f.getText().charAt(0)==="0",w=l==null?null:l.get(se.POSSIBLE_FORMATS),C=w==null||w.includes(Y.UPC_A);if(m&&C){const _=f.getRawBytes(),R=new Oe(f.getText().substring(1),_,_?_.length:null,f.getResultPoints(),Y.UPC_A);return R.putAllMetadata(f.getResultMetadata()),R}return f}catch{}throw new X}reset(){for(let t of this.readers)t.reset()}}class nn extends vn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,a){for(let l=0;l<a.length;l++)if(vn.patternMatchVariance(t,a[l],nn.MAX_INDIVIDUAL_VARIANCE)<nn.MAX_AVG_VARIANCE)return l;throw new X}static count(t){return Be.sum(new Int32Array(t))}static increment(t,a){let l=0,h=a[0];for(let f=1;f<t.length;f++)a[f]>h&&(h=a[f],l=f);t[l]++}static decrement(t,a){let l=0,h=a[0];for(let f=1;f<t.length;f++)a[f]<h&&(h=a[f],l=f);t[l]--}static isFinderPattern(t){let a=t[0]+t[1],l=a+t[2]+t[3],h=a/l;if(h>=nn.MIN_FINDER_PATTERN_RATIO&&h<=nn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let w of t)w>m&&(m=w),w<f&&(f=w);return m<10*f}return!1}}nn.MAX_AVG_VARIANCE=.2,nn.MAX_INDIVIDUAL_VARIANCE=.45,nn.MIN_FINDER_PATTERN_RATIO=9.5/12,nn.MAX_FINDER_PATTERN_RATIO=12.5/14;class En{constructor(t,a){this.value=t,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof En))return!1;const a=t;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bn{constructor(t,a,l,h,f){this.value=t,this.startEnd=a,this.value=t,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Ue(l,f)),this.resultPoints.push(new Ue(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof bn))return!1;const a=t;return this.value===a.value}hashCode(){return this.value}}class dn{constructor(){}static getRSSvalue(t,a,l){let h=0;for(let C of t)h+=C;let f=0,m=0,w=t.length;for(let C=0;C<w-1;C++){let _;for(_=1,m|=1<<C;_<t[C];_++,m&=~(1<<C)){let R=dn.combins(h-_-1,w-C-2);if(l&&m===0&&h-_-(w-C-1)>=w-C-1&&(R-=dn.combins(h-_-(w-C),w-C-2)),w-C-1>1){let M=0;for(let $=h-_-(w-C-2);$>a;$--)M+=dn.combins(h-_-$-1,w-C-3);R-=M*(w-1-C)}else h-_>a&&R--;f+=R}h-=_}return f}static combins(t,a){let l,h;t-a>a?(h=a,l=t-a):(h=t-a,l=a);let f=1,m=1;for(let w=t;w>l;w--)f*=w,m<=h&&(f/=m,m++);for(;m<=h;)f/=m,m++;return f}}class ds{static buildBitArray(t){let a=t.length*2-1;t[t.length-1].getRightChar()==null&&(a-=1);let l=12*a,h=new G(l),f=0,w=t[0].getRightChar().getValue();for(let C=11;C>=0;--C)(w&1<<C)!=0&&h.set(f),f++;for(let C=1;C<t.length;++C){let _=t[C],R=_.getLeftChar().getValue();for(let M=11;M>=0;--M)(R&1<<M)!=0&&h.set(f),f++;if(_.getRightChar()!=null){let M=_.getRightChar().getValue();for(let $=11;$>=0;--$)(M&1<<$)!=0&&h.set(f),f++}}return h}}class Cn{constructor(t,a){a?this.decodedInformation=null:(this.finished=t,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rr{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class jn extends rr{constructor(t,a){super(t),this.value=a}getValue(){return this.value}isFNC1(){return this.value===jn.FNC1}}jn.FNC1="$";class Gn extends rr{constructor(t,a,l){super(t),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Jn extends rr{constructor(t,a,l){if(super(t),a<0||a>10||l<0||l>10)throw new V;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Jn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Jn.FNC1}isAnyFNC1(){return this.firstDigit===Jn.FNC1||this.secondDigit===Jn.FNC1}}Jn.FNC1=10;class rt{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new X;let a=t.substring(0,2);for(let f of rt.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===rt.VARIABLE_LENGTH?rt.processVariableAI(2,f[2],t):rt.processFixedAI(2,f[1],t);if(t.length<3)throw new X;let l=t.substring(0,3);for(let f of rt.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===rt.VARIABLE_LENGTH?rt.processVariableAI(3,f[2],t):rt.processFixedAI(3,f[1],t);for(let f of rt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===rt.VARIABLE_LENGTH?rt.processVariableAI(4,f[2],t):rt.processFixedAI(4,f[1],t);if(t.length<4)throw new X;let h=t.substring(0,4);for(let f of rt.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===rt.VARIABLE_LENGTH?rt.processVariableAI(4,f[2],t):rt.processFixedAI(4,f[1],t);throw new X}static processFixedAI(t,a,l){if(l.length<t)throw new X;let h=l.substring(0,t);if(l.length<t+a)throw new X;let f=l.substring(t,t+a),m=l.substring(t+a),w="("+h+")"+f,C=rt.parseFieldsInGeneralPurpose(m);return C==null?w:w+C}static processVariableAI(t,a,l){let h=l.substring(0,t),f;l.length<t+a?f=l.length:f=t+a;let m=l.substring(t,f),w=l.substring(f),C="("+h+")"+m,_=rt.parseFieldsInGeneralPurpose(w);return _==null?C:C+_}}rt.VARIABLE_LENGTH=[],rt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",rt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",rt.VARIABLE_LENGTH,20],["22",rt.VARIABLE_LENGTH,29],["30",rt.VARIABLE_LENGTH,8],["37",rt.VARIABLE_LENGTH,8],["90",rt.VARIABLE_LENGTH,30],["91",rt.VARIABLE_LENGTH,30],["92",rt.VARIABLE_LENGTH,30],["93",rt.VARIABLE_LENGTH,30],["94",rt.VARIABLE_LENGTH,30],["95",rt.VARIABLE_LENGTH,30],["96",rt.VARIABLE_LENGTH,30],["97",rt.VARIABLE_LENGTH,3],["98",rt.VARIABLE_LENGTH,30],["99",rt.VARIABLE_LENGTH,30]],rt.THREE_DIGIT_DATA_LENGTH=[["240",rt.VARIABLE_LENGTH,30],["241",rt.VARIABLE_LENGTH,30],["242",rt.VARIABLE_LENGTH,6],["250",rt.VARIABLE_LENGTH,30],["251",rt.VARIABLE_LENGTH,30],["253",rt.VARIABLE_LENGTH,17],["254",rt.VARIABLE_LENGTH,20],["400",rt.VARIABLE_LENGTH,30],["401",rt.VARIABLE_LENGTH,30],["402",17],["403",rt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",rt.VARIABLE_LENGTH,20],["421",rt.VARIABLE_LENGTH,15],["422",3],["423",rt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],rt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",rt.VARIABLE_LENGTH,15],["391",rt.VARIABLE_LENGTH,18],["392",rt.VARIABLE_LENGTH,15],["393",rt.VARIABLE_LENGTH,18],["703",rt.VARIABLE_LENGTH,30]],rt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",rt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",rt.VARIABLE_LENGTH,20],["8003",rt.VARIABLE_LENGTH,30],["8004",rt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",rt.VARIABLE_LENGTH,30],["8008",rt.VARIABLE_LENGTH,12],["8018",18],["8020",rt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",rt.VARIABLE_LENGTH,70],["8200",rt.VARIABLE_LENGTH,70]];class oi{constructor(t){this.buffer=new W,this.information=t}decodeAllCodes(t,a){let l=a,h=null;do{let f=this.decodeGeneralPurposeField(l,h),m=rt.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&t.append(m),f.isRemaining()?h=""+f.getRemainingValue():h=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let a=t;a<t+3;++a)if(this.information.get(a))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(t,4);return f===0?new Jn(this.information.getSize(),Jn.FNC1,Jn.FNC1):new Jn(this.information.getSize(),f-1,Jn.FNC1)}let a=this.extractNumericValueFromBitArray(t,7),l=(a-8)/11,h=(a-8)%11;return new Jn(t+7,l,h)}extractNumericValueFromBitArray(t,a){return oi.extractNumericValueFromBitArray(this.information,t,a)}static extractNumericValueFromBitArray(t,a,l){let h=0;for(let f=0;f<l;++f)t.get(a+f)&&(h|=1<<l-f-1);return h}decodeGeneralPurposeField(t,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(t);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Gn(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Gn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),t=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),t=a.isFinished()):(a=this.parseNumericBlock(),t=a.isFinished()),!(l!==this.current.getPosition())&&!t)break}while(!t);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let a;return t.isSecondDigitFNC1()?a=new Gn(this.current.getPosition(),this.buffer.toString()):a=new Gn(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Cn(!0,a)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let a=new Gn(this.current.getPosition(),this.buffer.toString());return new Cn(!0,a)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Cn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let a=new Gn(this.current.getPosition(),this.buffer.toString());return new Cn(!0,a)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Cn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let a=new Gn(this.current.getPosition(),this.buffer.toString());return new Cn(!0,a)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Cn(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,5);if(a>=5&&a<16)return!0;if(t+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(t,7);if(l>=64&&l<116)return!0;if(t+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(t,8);return h>=232&&h<253}decodeIsoIec646(t){let a=this.extractNumericValueFromBitArray(t,5);if(a===15)return new jn(t+5,jn.FNC1);if(a>=5&&a<15)return new jn(t+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(t,7);if(l>=64&&l<90)return new jn(t+7,""+(l+1));if(l>=90&&l<116)return new jn(t+7,""+(l+7));let h=this.extractNumericValueFromBitArray(t,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new V}return new jn(t+8,f)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,5);if(a>=5&&a<16)return!0;if(t+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(t,6);return l>=16&&l<63}decodeAlphanumeric(t){let a=this.extractNumericValueFromBitArray(t,5);if(a===15)return new jn(t+5,jn.FNC1);if(a>=5&&a<15)return new jn(t+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(t,6);if(l>=32&&l<58)return new jn(t+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Me("Decoding invalid alphanumeric value: "+l)}return new jn(t+6,h)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let a=0;a<5&&a+t<this.information.getSize();++a)if(a===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+a))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let a=t;a<t+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let a=0;a<4&&a+t<this.information.getSize();++a)if(this.information.get(t+a))return!1;return!0}}class Ma{constructor(t){this.information=t,this.generalDecoder=new oi(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wr extends Ma{constructor(t){super(t)}encodeCompressedGtin(t,a){t.append("(01)");let l=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,a,l)}encodeCompressedGtinWithoutAI(t,a,l){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*h,10);f/100===0&&t.append("0"),f/10===0&&t.append("0"),t.append(f)}wr.appendCheckDigit(t,l)}static appendCheckDigit(t,a){let l=0;for(let h=0;h<13;h++){let f=t.charAt(h+a).charCodeAt(0)-48;l+=(h&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),t.append(l)}}wr.GTIN_SIZE=40;class Pr extends wr{constructor(t){super(t)}parseInformation(){let t=new W;t.append("(01)");let a=t.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Pr.HEADER_SIZE,4);return t.append(l),this.encodeCompressedGtinWithoutAI(t,Pr.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(t,Pr.HEADER_SIZE+44)}}Pr.HEADER_SIZE=4;class _i extends Ma{constructor(t){super(t)}parseInformation(){let t=new W;return this.getGeneralDecoder().decodeAllCodes(t,_i.HEADER_SIZE)}}_i.HEADER_SIZE=5;class Ni extends wr{constructor(t){super(t)}encodeCompressedWeight(t,a,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(t,h);let f=this.checkWeight(h),m=1e5;for(let w=0;w<5;++w)f/m===0&&t.append("0"),m/=10;t.append(f)}}class es extends Ni{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=es.HEADER_SIZE+Ni.GTIN_SIZE+es.WEIGHT_SIZE)throw new X;let t=new W;return this.encodeCompressedGtin(t,es.HEADER_SIZE),this.encodeCompressedWeight(t,es.HEADER_SIZE+Ni.GTIN_SIZE,es.WEIGHT_SIZE),t.toString()}}es.HEADER_SIZE=5,es.WEIGHT_SIZE=15;class So extends es{constructor(t){super(t)}addWeightCode(t,a){t.append("(3103)")}checkWeight(t){return t}}class _o extends es{constructor(t){super(t)}addWeightCode(t,a){a<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Gr extends wr{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Gr.HEADER_SIZE+wr.GTIN_SIZE)throw new X;let t=new W;this.encodeCompressedGtin(t,Gr.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Gr.HEADER_SIZE+wr.GTIN_SIZE,Gr.LAST_DIGIT_SIZE);t.append("(392"),t.append(a),t.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Gr.HEADER_SIZE+wr.GTIN_SIZE+Gr.LAST_DIGIT_SIZE,null);return t.append(l.getNewString()),t.toString()}}Gr.HEADER_SIZE=8,Gr.LAST_DIGIT_SIZE=2;class sr extends wr{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<sr.HEADER_SIZE+wr.GTIN_SIZE)throw new X;let t=new W;this.encodeCompressedGtin(t,sr.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(sr.HEADER_SIZE+wr.GTIN_SIZE,sr.LAST_DIGIT_SIZE);t.append("(393"),t.append(a),t.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(sr.HEADER_SIZE+wr.GTIN_SIZE+sr.LAST_DIGIT_SIZE,sr.FIRST_THREE_DIGITS_SIZE);l/100==0&&t.append("0"),l/10==0&&t.append("0"),t.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(sr.HEADER_SIZE+wr.GTIN_SIZE+sr.LAST_DIGIT_SIZE+sr.FIRST_THREE_DIGITS_SIZE,null);return t.append(h.getNewString()),t.toString()}}sr.HEADER_SIZE=8,sr.LAST_DIGIT_SIZE=2,sr.FIRST_THREE_DIGITS_SIZE=10;class xn extends Ni{constructor(t,a,l){super(t),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=xn.HEADER_SIZE+xn.GTIN_SIZE+xn.WEIGHT_SIZE+xn.DATE_SIZE)throw new X;let t=new W;return this.encodeCompressedGtin(t,xn.HEADER_SIZE),this.encodeCompressedWeight(t,xn.HEADER_SIZE+xn.GTIN_SIZE,xn.WEIGHT_SIZE),this.encodeCompressedDate(t,xn.HEADER_SIZE+xn.GTIN_SIZE+xn.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,xn.DATE_SIZE);if(l==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let h=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&t.append("0"),t.append(m),f/10==0&&t.append("0"),t.append(f),h/10==0&&t.append("0"),t.append(h)}addWeightCode(t,a){t.append("("),t.append(this.firstAIdigits),t.append(a/1e5),t.append(")")}checkWeight(t){return t%1e5}}xn.HEADER_SIZE=8,xn.WEIGHT_SIZE=20,xn.DATE_SIZE=16;function J(D){try{if(D.get(1))return new Pr(D);if(!D.get(2))return new _i(D);switch(oi.extractNumericValueFromBitArray(D,1,4)){case 4:return new So(D);case 5:return new _o(D)}switch(oi.extractNumericValueFromBitArray(D,1,5)){case 12:return new Gr(D);case 13:return new sr(D)}switch(oi.extractNumericValueFromBitArray(D,1,7)){case 56:return new xn(D,"310","11");case 57:return new xn(D,"320","11");case 58:return new xn(D,"310","13");case 59:return new xn(D,"320","13");case 60:return new xn(D,"310","15");case 61:return new xn(D,"320","15");case 62:return new xn(D,"310","17");case 63:return new xn(D,"320","17")}}catch(t){throw console.log(t),new Me("unknown decoder: "+D)}}class pe{constructor(t,a,l,h){this.leftchar=t,this.rightchar=a,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,a){return t instanceof pe?pe.equalsOrNull(t.leftchar,a.leftchar)&&pe.equalsOrNull(t.rightchar,a.rightchar)&&pe.equalsOrNull(t.finderpattern,a.finderpattern):!1}static equalsOrNull(t,a){return t===null?a===null:pe.equals(t,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class _e{constructor(t,a,l){this.pairs=t,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,a){return t instanceof _e?this.checkEqualitity(t,a)&&t.wasReversed===a.wasReversed:!1}checkEqualitity(t,a){if(!t||!a)return;let l;return t.forEach((h,f)=>{a.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class ge extends nn{constructor(t){super(...arguments),this.pairs=new Array(ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,a,l){this.pairs.length=0,this.startFromEven=!1;try{return ge.constructResult(this.decodeRow2pairs(t,a))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,ge.constructResult(this.decodeRow2pairs(t,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,t))}catch(f){if(f instanceof X){if(!this.pairs.length)throw new X;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(t,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new X}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return t&&(this.rows=this.rows.reverse()),a}checkRows(t,a){for(let l=a;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of t)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(t);f.push(h);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new X}static isValidSequence(t){for(let a of ge.FINDER_PATTERN_SEQUENCES){if(t.length>a.length)continue;let l=!0;for(let h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!=a[h]){l=!1;break}if(l)return!0}return!1}storeRow(t,a){let l=0,h=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>t){f=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}f||h||ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new _e(this.pairs,t,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,a){for(let l of a)if(l.getPairs().length!==t.length){for(let h of l.getPairs())for(let f of t)if(pe.equals(h,f))break}}static isPartialRow(t,a){for(let l of a){let h=!0;for(let f of t){let m=!1;for(let w of l.getPairs())if(f.equals(w)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(t){let a=ds.buildBitArray(t),h=J(a).parseInformation(),f=t[0].getFinderPattern().getResultPoints(),m=t[t.length-1].getFinderPattern().getResultPoints(),w=[f[0],f[1],m[0],m[1]];return new Oe(h,null,null,w,Y.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),a=t.getLeftChar(),l=t.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),f=2;for(let w=1;w<this.pairs.size();++w){let C=this.pairs.get(w);h+=C.getLeftChar().getChecksumPortion(),f++;let _=C.getRightChar();_!=null&&(h+=_.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==a.getValue()}static getNextSecondBar(t,a){let l;return t.get(a)?(l=t.getNextUnset(a),l=t.getNextSet(l)):(l=t.getNextSet(a),l=t.getNextUnset(l)),l}retrieveNextPair(t,a,l){let h=a.length%2==0;this.startFromEven&&(h=!h);let f,m=!0,w=-1;do this.findNextPair(t,a,w),f=this.parseFoundFinderPattern(t,l,h),f==null?w=ge.getNextSecondBar(t,this.startEnd[0]):m=!1;while(m);let C=this.decodeDataCharacter(t,f,h,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new X;let _;try{_=this.decodeDataCharacter(t,f,h,!1)}catch(R){_=null,this.verbose&&console.log(R)}return new pe(C,_,f,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,a,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=t.getSize(),m;l>=0?m=l:this.isEmptyPair(a)?m=0:m=a[a.length-1].getFinderPattern().getStartEnd()[1];let w=a.length%2!=0;this.startFromEven&&(w=!w);let C=!1;for(;m<f&&(C=!t.get(m),!!C);)m++;let _=0,R=m;for(let M=m;M<f;M++)if(t.get(M)!=C)h[_]++;else{if(_==3){if(w&&ge.reverseCounters(h),ge.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=M;return}w&&ge.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,_--}else _++;h[_]=1,C=!C}throw new X}static reverseCounters(t){let a=t.length;for(let l=0;l<a/2;++l){let h=t[l];t[l]=t[a-l-1],t[a-l-1]=h}}parseFoundFinderPattern(t,a,l){let h,f,m;if(l){let _=this.startEnd[0]-1;for(;_>=0&&!t.get(_);)_--;_++,h=this.startEnd[0]-_,f=_,m=this.startEnd[1]}else f=this.startEnd[0],m=t.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let w=this.getDecodeFinderCounters();k.arraycopy(w,0,w,1,w.length-1),w[0]=h;let C;try{C=this.parseFinderValue(w,ge.FINDER_PATTERNS)}catch{return null}return new bn(C,[f,m],f,m,a)}decodeDataCharacter(t,a,l,h){let f=this.getDataCharacterCounters();for(let un=0;un<f.length;un++)f[un]=0;if(h)ge.recordPatternInReverse(t,a.getStartEnd()[0],f);else{ge.recordPattern(t,a.getStartEnd()[1],f);for(let un=0,Un=f.length-1;un<Un;un++,Un--){let Nr=f[un];f[un]=f[Un],f[Un]=Nr}}let m=17,w=Be.sum(new Int32Array(f))/m,C=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(w-C)/C>.3)throw new X;let _=this.getOddCounts(),R=this.getEvenCounts(),M=this.getOddRoundingErrors(),$=this.getEvenRoundingErrors();for(let un=0;un<f.length;un++){let Un=1*f[un]/w,Nr=Un+.5;if(Nr<1){if(Un<.3)throw new X;Nr=1}else if(Nr>8){if(Un>8.7)throw new X;Nr=8}let Ri=un/2;(un&1)==0?(_[Ri]=Nr,M[Ri]=Un-Nr):(R[Ri]=Nr,$[Ri]=Un-Nr)}this.adjustOddEvenCounts(m);let Q=4*a.getValue()+(l?0:2)+(h?0:1)-1,he=0,me=0;for(let un=_.length-1;un>=0;un--){if(ge.isNotA1left(a,l,h)){let Un=ge.WEIGHTS[Q][2*un];me+=_[un]*Un}he+=_[un]}let ve=0;for(let un=R.length-1;un>=0;un--)if(ge.isNotA1left(a,l,h)){let Un=ge.WEIGHTS[Q][2*un+1];ve+=R[un]*Un}let je=me+ve;if((he&1)!=0||he>13||he<4)throw new X;let Ge=(13-he)/2,Xe=ge.SYMBOL_WIDEST[Ge],ze=9-Xe,Zt=dn.getRSSvalue(_,Xe,!0),Ft=dn.getRSSvalue(R,ze,!1),Mr=ge.EVEN_TOTAL_SUBSET[Ge],ms=ge.GSUM[Ge],tr=Zt*Mr+Ft+ms;return new En(tr,je)}static isNotA1left(t,a,l){return!(t.getValue()==0&&a&&l)}adjustOddEvenCounts(t){let a=Be.sum(new Int32Array(this.getOddCounts())),l=Be.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;a>13?f=!0:a<4&&(h=!0);let m=!1,w=!1;l>13?w=!0:l<4&&(m=!0);let C=a+l-t,_=(a&1)==1,R=(l&1)==0;if(C==1)if(_){if(R)throw new X;f=!0}else{if(!R)throw new X;w=!0}else if(C==-1)if(_){if(R)throw new X;h=!0}else{if(!R)throw new X;m=!0}else if(C==0){if(_){if(!R)throw new X;a<l?(h=!0,w=!0):(f=!0,m=!0)}else if(R)throw new X}else throw new X;if(h){if(f)throw new X;ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(w)throw new X;ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ge.SYMBOL_WIDEST=[7,5,4,3,1],ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ge.GSUM=[0,348,1388,2948,3988],ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ge.FINDER_PAT_A=0,ge.FINDER_PAT_B=1,ge.FINDER_PAT_C=2,ge.FINDER_PAT_D=3,ge.FINDER_PAT_E=4,ge.FINDER_PAT_F=5,ge.FINDER_PATTERN_SEQUENCES=[[ge.FINDER_PAT_A,ge.FINDER_PAT_A],[ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B],[ge.FINDER_PAT_A,ge.FINDER_PAT_C,ge.FINDER_PAT_B,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_C],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F]],ge.MAX_PAIRS=11;class ht extends En{constructor(t,a,l){super(t,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class qe extends nn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,a,l){const h=this.decodePair(a,!1,t,l);qe.addOrTally(this.possibleLeftPairs,h),a.reverse();let f=this.decodePair(a,!0,t,l);qe.addOrTally(this.possibleRightPairs,f),a.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let w of this.possibleRightPairs)if(w.getCount()>1&&qe.checkChecksum(m,w))return qe.constructResult(m,w)}throw new X}static addOrTally(t,a){if(a==null)return;let l=!1;for(let h of t)if(h.getValue()===a.getValue()){h.incrementCount(),l=!0;break}l||t.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,a){let l=4537077*t.getValue()+a.getValue(),h=new String(l).toString(),f=new W;for(let _=13-h.length;_>0;_--)f.append("0");f.append(h);let m=0;for(let _=0;_<13;_++){let R=f.charAt(_).charCodeAt(0)-48;m+=(_&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),f.append(m.toString());let w=t.getFinderPattern().getResultPoints(),C=a.getFinderPattern().getResultPoints();return new Oe(f.toString(),null,0,[w[0],w[1],C[0],C[1]],Y.RSS_14,new Date().getTime())}static checkChecksum(t,a){let l=(t.getChecksumPortion()+16*a.getChecksumPortion())%79,h=9*t.getFinderPattern().getValue()+a.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(t,a,l,h){try{let f=this.findFinderPattern(t,a),m=this.parseFoundFinderPattern(t,l,a,f),w=h==null?null:h.get(se.NEED_RESULT_POINT_CALLBACK);if(w!=null){let R=(f[0]+f[1])/2;a&&(R=t.getSize()-1-R),w.foundPossibleResultPoint(new Ue(R,l))}let C=this.decodeDataCharacter(t,m,!0),_=this.decodeDataCharacter(t,m,!1);return new ht(1597*C.getValue()+_.getValue(),C.getChecksumPortion()+4*_.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(t,a,l){let h=this.getDataCharacterCounters();for(let ve=0;ve<h.length;ve++)h[ve]=0;if(l)vn.recordPatternInReverse(t,a.getStartEnd()[0],h);else{vn.recordPattern(t,a.getStartEnd()[1]+1,h);for(let ve=0,je=h.length-1;ve<je;ve++,je--){let Ge=h[ve];h[ve]=h[je],h[je]=Ge}}let f=l?16:15,m=Be.sum(new Int32Array(h))/f,w=this.getOddCounts(),C=this.getEvenCounts(),_=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ve=0;ve<h.length;ve++){let je=h[ve]/m,Ge=Math.floor(je+.5);Ge<1?Ge=1:Ge>8&&(Ge=8);let Xe=Math.floor(ve/2);(ve&1)===0?(w[Xe]=Ge,_[Xe]=je-Ge):(C[Xe]=Ge,R[Xe]=je-Ge)}this.adjustOddEvenCounts(l,f);let M=0,$=0;for(let ve=w.length-1;ve>=0;ve--)$*=9,$+=w[ve],M+=w[ve];let Q=0,he=0;for(let ve=C.length-1;ve>=0;ve--)Q*=9,Q+=C[ve],he+=C[ve];let me=$+3*Q;if(l){if((M&1)!==0||M>12||M<4)throw new X;let ve=(12-M)/2,je=qe.OUTSIDE_ODD_WIDEST[ve],Ge=9-je,Xe=dn.getRSSvalue(w,je,!1),ze=dn.getRSSvalue(C,Ge,!0),Zt=qe.OUTSIDE_EVEN_TOTAL_SUBSET[ve],Ft=qe.OUTSIDE_GSUM[ve];return new En(Xe*Zt+ze+Ft,me)}else{if((he&1)!==0||he>10||he<4)throw new X;let ve=(10-he)/2,je=qe.INSIDE_ODD_WIDEST[ve],Ge=9-je,Xe=dn.getRSSvalue(w,je,!0),ze=dn.getRSSvalue(C,Ge,!1),Zt=qe.INSIDE_ODD_TOTAL_SUBSET[ve],Ft=qe.INSIDE_GSUM[ve];return new En(ze*Zt+Xe+Ft,me)}}findFinderPattern(t,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=t.getSize(),f=!1,m=0;for(;m<h&&(f=!t.get(m),a!==f);)m++;let w=0,C=m;for(let _=m;_<h;_++)if(t.get(_)!==f)l[w]++;else{if(w===3){if(nn.isFinderPattern(l))return[C,_];C+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,w--}else w++;l[w]=1,f=!f}throw new X}parseFoundFinderPattern(t,a,l,h){let f=t.get(h[0]),m=h[0]-1;for(;m>=0&&f!==t.get(m);)m--;m++;const w=h[0]-m,C=this.getDecodeFinderCounters(),_=new Int32Array(C.length);k.arraycopy(C,0,_,1,C.length-1),_[0]=w;const R=this.parseFinderValue(_,qe.FINDER_PATTERNS);let M=m,$=h[1];return l&&(M=t.getSize()-1-M,$=t.getSize()-1-$),new bn(R,[m,h[1]],M,$,a)}adjustOddEvenCounts(t,a){let l=Be.sum(new Int32Array(this.getOddCounts())),h=Be.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,w=!1,C=!1;t?(l>12?m=!0:l<4&&(f=!0),h>12?C=!0:h<4&&(w=!0)):(l>11?m=!0:l<5&&(f=!0),h>10?C=!0:h<4&&(w=!0));let _=l+h-a,R=(l&1)===(t?1:0),M=(h&1)===1;if(_===1)if(R){if(M)throw new X;m=!0}else{if(!M)throw new X;C=!0}else if(_===-1)if(R){if(M)throw new X;f=!0}else{if(!M)throw new X;w=!0}else if(_===0){if(R){if(!M)throw new X;l<h?(f=!0,C=!0):(m=!0,w=!0)}else if(M)throw new X}else throw new X;if(f){if(m)throw new X;nn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&nn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),w){if(C)throw new X;nn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&nn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}qe.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],qe.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],qe.OUTSIDE_GSUM=[0,161,961,2015,2715],qe.INSIDE_GSUM=[0,336,1036,1516],qe.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],qe.INSIDE_ODD_WIDEST=[2,4,6,8],qe.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class et extends vn{constructor(t,a){super(),this.readers=[],this.verbose=a===!0;const l=t?t.get(se.POSSIBLE_FORMATS):null,h=t&&t.get(se.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Y.EAN_13)||l.includes(Y.UPC_A)||l.includes(Y.EAN_8)||l.includes(Y.UPC_E))&&this.readers.push(new sn(t)),l.includes(Y.CODE_39)&&this.readers.push(new pn(h)),l.includes(Y.CODE_128)&&this.readers.push(new Je),l.includes(Y.ITF)&&this.readers.push(new en),l.includes(Y.RSS_14)&&this.readers.push(new qe),l.includes(Y.RSS_EXPANDED)&&this.readers.push(new ge(this.verbose))):(this.readers.push(new sn(t)),this.readers.push(new pn),this.readers.push(new sn(t)),this.readers.push(new Je),this.readers.push(new en),this.readers.push(new qe),this.readers.push(new ge(this.verbose)))}decodeRow(t,a,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(t,a,l)}catch{}throw new X}reset(){this.readers.forEach(t=>t.reset())}}class vt extends Ie{constructor(t=500,a){super(new et(a),t,a)}}class nt{constructor(t,a,l){this.ecCodewords=t,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class st{constructor(t,a){this.count=t,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(t,a,l,h,f,m){this.versionNumber=t,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=m;let w=0;const C=m.getECCodewords(),_=m.getECBlocks();for(let R of _)w+=R.getCount()*(R.getDataCodewords()+C);this.totalCodewords=w}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,a){if((t&1)!==0||(a&1)!==0)throw new V;for(let l of Ct.VERSIONS)if(l.symbolSizeRows===t&&l.symbolSizeColumns===a)return l;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new Ct(1,10,10,8,8,new nt(5,new st(1,3))),new Ct(2,12,12,10,10,new nt(7,new st(1,5))),new Ct(3,14,14,12,12,new nt(10,new st(1,8))),new Ct(4,16,16,14,14,new nt(12,new st(1,12))),new Ct(5,18,18,16,16,new nt(14,new st(1,18))),new Ct(6,20,20,18,18,new nt(18,new st(1,22))),new Ct(7,22,22,20,20,new nt(20,new st(1,30))),new Ct(8,24,24,22,22,new nt(24,new st(1,36))),new Ct(9,26,26,24,24,new nt(28,new st(1,44))),new Ct(10,32,32,14,14,new nt(36,new st(1,62))),new Ct(11,36,36,16,16,new nt(42,new st(1,86))),new Ct(12,40,40,18,18,new nt(48,new st(1,114))),new Ct(13,44,44,20,20,new nt(56,new st(1,144))),new Ct(14,48,48,22,22,new nt(68,new st(1,174))),new Ct(15,52,52,24,24,new nt(42,new st(2,102))),new Ct(16,64,64,14,14,new nt(56,new st(2,140))),new Ct(17,72,72,16,16,new nt(36,new st(4,92))),new Ct(18,80,80,18,18,new nt(48,new st(4,114))),new Ct(19,88,88,20,20,new nt(56,new st(4,144))),new Ct(20,96,96,22,22,new nt(68,new st(4,174))),new Ct(21,104,104,24,24,new nt(56,new st(6,136))),new Ct(22,120,120,18,18,new nt(68,new st(6,175))),new Ct(23,132,132,20,20,new nt(62,new st(8,163))),new Ct(24,144,144,22,22,new nt(62,new st(8,156),new st(2,155))),new Ct(25,8,18,6,16,new nt(7,new st(1,5))),new Ct(26,8,32,6,14,new nt(11,new st(1,10))),new Ct(27,12,26,10,24,new nt(14,new st(1,16))),new Ct(28,12,36,10,16,new nt(18,new st(1,22))),new Ct(29,16,36,14,16,new nt(24,new st(1,32))),new Ct(30,16,48,14,22,new nt(28,new st(1,49)))]}}Ct.VERSIONS=Ct.buildVersions();class In{constructor(t){const a=t.getHeight();if(a<8||a>144||(a&1)!==0)throw new V;this.version=In.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new de(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const a=t.getHeight(),l=t.getWidth();return Ct.getVersionForDimensions(a,l)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,h=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let w=!1,C=!1,_=!1,R=!1;do if(l===f&&h===0&&!w)t[a++]=this.readCorner1(f,m)&255,l-=2,h+=2,w=!0;else if(l===f-2&&h===0&&(m&3)!==0&&!C)t[a++]=this.readCorner2(f,m)&255,l-=2,h+=2,C=!0;else if(l===f+4&&h===2&&(m&7)===0&&!_)t[a++]=this.readCorner3(f,m)&255,l-=2,h+=2,_=!0;else if(l===f-2&&h===0&&(m&7)===4&&!R)t[a++]=this.readCorner4(f,m)&255,l-=2,h+=2,R=!0;else{do l<f&&h>=0&&!this.readMappingMatrix.get(h,l)&&(t[a++]=this.readUtah(l,h,f,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(t[a++]=this.readUtah(l,h,f,m)&255),l+=2,h-=2;while(l<f&&h>=0);l+=3,h+=1}while(l<f||h<m);if(a!==this.version.getTotalCodewords())throw new V;return t}readModule(t,a,l,h){return t<0&&(t+=l,a+=4-(l+4&7)),a<0&&(a+=h,t+=4-(h+4&7)),this.readMappingMatrix.set(a,t),this.mappingBitMatrix.get(a,t)}readUtah(t,a,l,h){let f=0;return this.readModule(t-2,a-2,l,h)&&(f|=1),f<<=1,this.readModule(t-2,a-1,l,h)&&(f|=1),f<<=1,this.readModule(t-1,a-2,l,h)&&(f|=1),f<<=1,this.readModule(t-1,a-1,l,h)&&(f|=1),f<<=1,this.readModule(t-1,a,l,h)&&(f|=1),f<<=1,this.readModule(t,a-2,l,h)&&(f|=1),f<<=1,this.readModule(t,a-1,l,h)&&(f|=1),f<<=1,this.readModule(t,a,l,h)&&(f|=1),f}readCorner1(t,a){let l=0;return this.readModule(t-1,0,t,a)&&(l|=1),l<<=1,this.readModule(t-1,1,t,a)&&(l|=1),l<<=1,this.readModule(t-1,2,t,a)&&(l|=1),l<<=1,this.readModule(0,a-2,t,a)&&(l|=1),l<<=1,this.readModule(0,a-1,t,a)&&(l|=1),l<<=1,this.readModule(1,a-1,t,a)&&(l|=1),l<<=1,this.readModule(2,a-1,t,a)&&(l|=1),l<<=1,this.readModule(3,a-1,t,a)&&(l|=1),l}readCorner2(t,a){let l=0;return this.readModule(t-3,0,t,a)&&(l|=1),l<<=1,this.readModule(t-2,0,t,a)&&(l|=1),l<<=1,this.readModule(t-1,0,t,a)&&(l|=1),l<<=1,this.readModule(0,a-4,t,a)&&(l|=1),l<<=1,this.readModule(0,a-3,t,a)&&(l|=1),l<<=1,this.readModule(0,a-2,t,a)&&(l|=1),l<<=1,this.readModule(0,a-1,t,a)&&(l|=1),l<<=1,this.readModule(1,a-1,t,a)&&(l|=1),l}readCorner3(t,a){let l=0;return this.readModule(t-1,0,t,a)&&(l|=1),l<<=1,this.readModule(t-1,a-1,t,a)&&(l|=1),l<<=1,this.readModule(0,a-3,t,a)&&(l|=1),l<<=1,this.readModule(0,a-2,t,a)&&(l|=1),l<<=1,this.readModule(0,a-1,t,a)&&(l|=1),l<<=1,this.readModule(1,a-3,t,a)&&(l|=1),l<<=1,this.readModule(1,a-2,t,a)&&(l|=1),l<<=1,this.readModule(1,a-1,t,a)&&(l|=1),l}readCorner4(t,a){let l=0;return this.readModule(t-3,0,t,a)&&(l|=1),l<<=1,this.readModule(t-2,0,t,a)&&(l|=1),l<<=1,this.readModule(t-1,0,t,a)&&(l|=1),l<<=1,this.readModule(0,a-2,t,a)&&(l|=1),l<<=1,this.readModule(0,a-1,t,a)&&(l|=1),l<<=1,this.readModule(1,a-1,t,a)&&(l|=1),l<<=1,this.readModule(2,a-1,t,a)&&(l|=1),l<<=1,this.readModule(3,a-1,t,a)&&(l|=1),l}extractDataRegion(t){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(t.getHeight()!==a)throw new E("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=a/h|0,w=l/f|0,C=m*h,_=w*f,R=new de(_,C);for(let M=0;M<m;++M){const $=M*h;for(let Q=0;Q<w;++Q){const he=Q*f;for(let me=0;me<h;++me){const ve=M*(h+2)+1+me,je=$+me;for(let Ge=0;Ge<f;++Ge){const Xe=Q*(f+2)+1+Ge;if(t.get(Xe,ve)){const ze=he+Ge;R.set(ze,je)}}}}}return R}}class As{constructor(t,a){this.numDataCodewords=t,this.codewords=a}static getDataBlocks(t,a){const l=a.getECBlocks();let h=0;const f=l.getECBlocks();for(let me of f)h+=me.getCount();const m=new Array(h);let w=0;for(let me of f)for(let ve=0;ve<me.getCount();ve++){const je=me.getDataCodewords(),Ge=l.getECCodewords()+je;m[w++]=new As(je,new Uint8Array(Ge))}const _=m[0].codewords.length-l.getECCodewords(),R=_-1;let M=0;for(let me=0;me<R;me++)for(let ve=0;ve<w;ve++)m[ve].codewords[me]=t[M++];const $=a.getVersionNumber()===24,Q=$?8:w;for(let me=0;me<Q;me++)m[me].codewords[_-1]=t[M++];const he=m[0].codewords.length;for(let me=_;me<he;me++)for(let ve=0;ve<w;ve++){const je=$?(ve+8)%w:ve,Ge=$&&je>7?me-1:me;m[je].codewords[Ge]=t[M++]}if(M!==t.length)throw new E;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class us{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new E(""+t);let a=0,l=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,w=t<m?t:m,C=m-w,_=255>>8-w<<C;a=(f[h]&_)>>C,t-=w,l+=w,l===8&&(l=0,h++)}if(t>0){for(;t>=8;)a=a<<8|f[h]&255,h++,t-=8;if(t>0){const m=8-t,w=255>>m<<m;a=a<<t|(f[h]&w)>>m,l+=t}}return this.bitOffset=l,this.byteOffset=h,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Tn;(function(D){D[D.PAD_ENCODE=0]="PAD_ENCODE",D[D.ASCII_ENCODE=1]="ASCII_ENCODE",D[D.C40_ENCODE=2]="C40_ENCODE",D[D.TEXT_ENCODE=3]="TEXT_ENCODE",D[D.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",D[D.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",D[D.BASE256_ENCODE=6]="BASE256_ENCODE"})(Tn||(Tn={}));class cr{static decode(t){const a=new us(t),l=new W,h=new W,f=new Array;let m=Tn.ASCII_ENCODE;do if(m===Tn.ASCII_ENCODE)m=this.decodeAsciiSegment(a,l,h);else{switch(m){case Tn.C40_ENCODE:this.decodeC40Segment(a,l);break;case Tn.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case Tn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case Tn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case Tn.BASE256_ENCODE:this.decodeBase256Segment(a,l,f);break;default:throw new V}m=Tn.ASCII_ENCODE}while(m!==Tn.PAD_ENCODE&&a.available()>0);return h.length()>0&&l.append(h.toString()),new De(t,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(t,a,l){let h=!1;do{let f=t.readBits(8);if(f===0)throw new V;if(f<=128)return h&&(f+=128),a.append(String.fromCharCode(f-1)),Tn.ASCII_ENCODE;if(f===129)return Tn.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&a.append("0"),a.append(""+m)}else switch(f){case 230:return Tn.C40_ENCODE;case 231:return Tn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return Tn.ANSIX12_ENCODE;case 239:return Tn.TEXT_ENCODE;case 240:return Tn.EDIFACT_ENCODE;case 241:break;default:if(f!==254||t.available()!==0)throw new V;break}}while(t.available()>0);return Tn.ASCII_ENCODE}static decodeC40Segment(t,a){let l=!1;const h=[];let f=0;do{if(t.available()===8)return;const m=t.readBits(8);if(m===254)return;this.parseTwoBytes(m,t.readBits(8),h);for(let w=0;w<3;w++){const C=h[w];switch(f){case 0:if(C<3)f=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const _=this.C40_BASIC_SET_CHARS[C];l?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):a.append(_)}else throw new V;break;case 1:l?(a.append(String.fromCharCode(C+128)),l=!1):a.append(String.fromCharCode(C)),f=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const _=this.C40_SHIFT2_SET_CHARS[C];l?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):a.append(_)}else switch(C){case 27:a.append("");break;case 30:l=!0;break;default:throw new V}f=0;break;case 3:l?(a.append(String.fromCharCode(C+224)),l=!1):a.append(String.fromCharCode(C+96)),f=0;break;default:throw new V}}}while(t.available()>0)}static decodeTextSegment(t,a){let l=!1,h=[],f=0;do{if(t.available()===8)return;const m=t.readBits(8);if(m===254)return;this.parseTwoBytes(m,t.readBits(8),h);for(let w=0;w<3;w++){const C=h[w];switch(f){case 0:if(C<3)f=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const _=this.TEXT_BASIC_SET_CHARS[C];l?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):a.append(_)}else throw new V;break;case 1:l?(a.append(String.fromCharCode(C+128)),l=!1):a.append(String.fromCharCode(C)),f=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const _=this.TEXT_SHIFT2_SET_CHARS[C];l?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):a.append(_)}else switch(C){case 27:a.append("");break;case 30:l=!0;break;default:throw new V}f=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const _=this.TEXT_SHIFT3_SET_CHARS[C];l?(a.append(String.fromCharCode(_.charCodeAt(0)+128)),l=!1):a.append(_),f=0}else throw new V;break;default:throw new V}}}while(t.available()>0)}static decodeAnsiX12Segment(t,a){const l=[];do{if(t.available()===8)return;const h=t.readBits(8);if(h===254)return;this.parseTwoBytes(h,t.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(m<14)a.append(String.fromCharCode(m+44));else if(m<40)a.append(String.fromCharCode(m+51));else throw new V;break}}}while(t.available()>0)}static parseTwoBytes(t,a,l){let h=(t<<8)+a-1,f=Math.floor(h/1600);l[0]=f,h-=f*1600,f=Math.floor(h/40),l[1]=f,l[2]=h-f*40}static decodeEdifactSegment(t,a){do{if(t.available()<=16)return;for(let l=0;l<4;l++){let h=t.readBits(6);if(h===31){const f=8-t.getBitOffset();f!==8&&t.readBits(f);return}(h&32)===0&&(h|=64),a.append(String.fromCharCode(h))}}while(t.available()>0)}static decodeBase256Segment(t,a,l){let h=1+t.getByteOffset();const f=this.unrandomize255State(t.readBits(8),h++);let m;if(f===0?m=t.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(t.readBits(8),h++),m<0)throw new V;const w=new Uint8Array(m);for(let C=0;C<m;C++){if(t.available()<8)throw new V;w[C]=this.unrandomize255State(t.readBits(8),h++)}l.push(w);try{a.append(oe.decode(w,H.ISO88591))}catch(C){throw new Me("Platform does not support required encoding: "+C.message)}}static unrandomize255State(t,a){const l=149*a%255+1,h=t-l;return h>=0?h:h+256}}cr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],cr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],cr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],cr.TEXT_SHIFT2_SET_CHARS=cr.C40_SHIFT2_SET_CHARS,cr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Xi{constructor(){this.rsDecoder=new at(Ze.DATA_MATRIX_FIELD_256)}decode(t){const a=new In(t),l=a.getVersion(),h=a.readCodewords(),f=As.getDataBlocks(h,l);let m=0;for(let _ of f)m+=_.getNumDataCodewords();const w=new Uint8Array(m),C=f.length;for(let _=0;_<C;_++){const R=f[_],M=R.getCodewords(),$=R.getNumDataCodewords();this.correctErrors(M,$);for(let Q=0;Q<$;Q++)w[Q*C+_]=M[Q]}return cr.decode(w)}correctErrors(t,a){const l=new Int32Array(t);try{this.rsDecoder.decode(l,t.length-a)}catch{throw new I}for(let h=0;h<a;h++)t[h]=l[h]}}class hn{constructor(t){this.image=t,this.rectangleDetector=new Yt(this.image)}detect(){const t=this.rectangleDetector.detect();let a=this.detectSolid1(t);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new X;a=this.shiftToModuleCenter(a);const l=a[0],h=a[1],f=a[2],m=a[3];let w=this.transitionsBetween(l,m)+1,C=this.transitionsBetween(f,m)+1;(w&1)===1&&(w+=1),(C&1)===1&&(C+=1),4*w<7*C&&4*C<7*w&&(w=C=Math.max(w,C));let _=hn.sampleGrid(this.image,l,h,f,m,w,C);return new Pt(_,[l,h,f,m])}static shiftPoint(t,a,l){let h=(a.getX()-t.getX())/(l+1),f=(a.getY()-t.getY())/(l+1);return new Ue(t.getX()+h,t.getY()+f)}static moveAway(t,a,l){let h=t.getX(),f=t.getY();return h<a?h-=1:h+=1,f<l?f-=1:f+=1,new Ue(h,f)}detectSolid1(t){let a=t[0],l=t[1],h=t[3],f=t[2],m=this.transitionsBetween(a,l),w=this.transitionsBetween(l,h),C=this.transitionsBetween(h,f),_=this.transitionsBetween(f,a),R=m,M=[f,a,l,h];return R>w&&(R=w,M[0]=a,M[1]=l,M[2]=h,M[3]=f),R>C&&(R=C,M[0]=l,M[1]=h,M[2]=f,M[3]=a),R>_&&(M[0]=h,M[1]=f,M[2]=a,M[3]=l),M}detectSolid2(t){let a=t[0],l=t[1],h=t[2],f=t[3],m=this.transitionsBetween(a,f),w=hn.shiftPoint(l,h,(m+1)*4),C=hn.shiftPoint(h,l,(m+1)*4),_=this.transitionsBetween(w,a),R=this.transitionsBetween(C,f);return _<R?(t[0]=a,t[1]=l,t[2]=h,t[3]=f):(t[0]=l,t[1]=h,t[2]=f,t[3]=a),t}correctTopRight(t){let a=t[0],l=t[1],h=t[2],f=t[3],m=this.transitionsBetween(a,f),w=this.transitionsBetween(l,f),C=hn.shiftPoint(a,l,(w+1)*4),_=hn.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(C,f),w=this.transitionsBetween(_,f);let R=new Ue(f.getX()+(h.getX()-l.getX())/(m+1),f.getY()+(h.getY()-l.getY())/(m+1)),M=new Ue(f.getX()+(a.getX()-l.getX())/(w+1),f.getY()+(a.getY()-l.getY())/(w+1));if(!this.isValid(R))return this.isValid(M)?M:null;if(!this.isValid(M))return R;let $=this.transitionsBetween(C,R)+this.transitionsBetween(_,R),Q=this.transitionsBetween(C,M)+this.transitionsBetween(_,M);return $>Q?R:M}shiftToModuleCenter(t){let a=t[0],l=t[1],h=t[2],f=t[3],m=this.transitionsBetween(a,f)+1,w=this.transitionsBetween(h,f)+1,C=hn.shiftPoint(a,l,w*4),_=hn.shiftPoint(h,l,m*4);m=this.transitionsBetween(C,f)+1,w=this.transitionsBetween(_,f)+1,(m&1)===1&&(m+=1),(w&1)===1&&(w+=1);let R=(a.getX()+l.getX()+h.getX()+f.getX())/4,M=(a.getY()+l.getY()+h.getY()+f.getY())/4;a=hn.moveAway(a,R,M),l=hn.moveAway(l,R,M),h=hn.moveAway(h,R,M),f=hn.moveAway(f,R,M);let $,Q;return C=hn.shiftPoint(a,l,w*4),C=hn.shiftPoint(C,f,m*4),$=hn.shiftPoint(l,a,w*4),$=hn.shiftPoint($,h,m*4),_=hn.shiftPoint(h,f,w*4),_=hn.shiftPoint(_,l,m*4),Q=hn.shiftPoint(f,h,w*4),Q=hn.shiftPoint(Q,a,m*4),[C,$,_,Q]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,a,l,h,f,m,w){return Gt.getInstance().sampleGrid(t,m,w,.5,.5,m-.5,.5,m-.5,w-.5,.5,w-.5,a.getX(),a.getY(),f.getX(),f.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(t,a){let l=Math.trunc(t.getX()),h=Math.trunc(t.getY()),f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),w=Math.abs(m-h)>Math.abs(f-l);if(w){let me=l;l=h,h=me,me=f,f=m,m=me}let C=Math.abs(f-l),_=Math.abs(m-h),R=-C/2,M=h<m?1:-1,$=l<f?1:-1,Q=0,he=this.image.get(w?h:l,w?l:h);for(let me=l,ve=h;me!==f;me+=$){let je=this.image.get(w?ve:me,w?me:ve);if(je!==he&&(Q++,he=je),R+=_,R>0){if(ve===m)break;ve+=M,R-=C}}return Q}}class qr{constructor(){this.decoder=new Xi}decode(t,a=null){let l,h;if(a!=null&&a.has(se.PURE_BARCODE)){const _=qr.extractPureBits(t.getBlackMatrix());l=this.decoder.decode(_),h=qr.NO_POINTS}else{const _=new hn(t.getBlackMatrix()).detect();l=this.decoder.decode(_.getBits()),h=_.getPoints()}const f=l.getRawBytes(),m=new Oe(l.getText(),f,8*f.length,h,Y.DATA_MATRIX,k.currentTimeMillis()),w=l.getByteSegments();w!=null&&m.putMetadata(Ce.BYTE_SEGMENTS,w);const C=l.getECLevel();return C!=null&&m.putMetadata(Ce.ERROR_CORRECTION_LEVEL,C),m}reset(){}static extractPureBits(t){const a=t.getTopLeftOnBit(),l=t.getBottomRightOnBit();if(a==null||l==null)throw new X;const h=this.moduleSize(a,t);let f=a[1];const m=l[1];let w=a[0];const _=(l[0]-w+1)/h,R=(m-f+1)/h;if(_<=0||R<=0)throw new X;const M=h/2;f+=M,w+=M;const $=new de(_,R);for(let Q=0;Q<R;Q++){const he=f+Q*h;for(let me=0;me<_;me++)t.get(w+me*h,he)&&$.set(me,Q)}return $}static moduleSize(t,a){const l=a.getWidth();let h=t[0];const f=t[1];for(;h<l&&a.get(h,f);)h++;if(h===l)throw new X;const m=h-t[0];if(m===0)throw new X;return m}}qr.NO_POINTS=[];class Ku extends Ie{constructor(t=500){super(new qr,t)}}var Yi;(function(D){D[D.L=0]="L",D[D.M=1]="M",D[D.Q=2]="Q",D[D.H=3]="H"})(Yi||(Yi={}));class fn{constructor(t,a,l){this.value=t,this.stringValue=a,this.bits=l,fn.FOR_BITS.set(l,this),fn.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return fn.L;case"M":return fn.M;case"Q":return fn.Q;case"H":return fn.H;default:throw new S(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof fn))return!1;const a=t;return this.value===a.value}static forBits(t){if(t<0||t>=fn.FOR_BITS.size)throw new E;return fn.FOR_BITS.get(t)}}fn.FOR_BITS=new Map,fn.FOR_VALUE=new Map,fn.L=new fn(Yi.L,"L",1),fn.M=new fn(Yi.M,"M",0),fn.Q=new fn(Yi.Q,"Q",3),fn.H=new fn(Yi.H,"H",2);class dr{constructor(t){this.errorCorrectionLevel=fn.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,a){return B.bitCount(t^a)}static decodeFormatInformation(t,a){const l=dr.doDecodeFormatInformation(t,a);return l!==null?l:dr.doDecodeFormatInformation(t^dr.FORMAT_INFO_MASK_QR,a^dr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,a){let l=Number.MAX_SAFE_INTEGER,h=0;for(const f of dr.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===t||m===a)return new dr(f[1]);let w=dr.numBitsDiffering(t,m);w<l&&(h=f[1],l=w),t!==a&&(w=dr.numBitsDiffering(a,m),w<l&&(h=f[1],l=w))}return l<=3?new dr(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof dr))return!1;const a=t;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}dr.FORMAT_INFO_MASK_QR=21522,dr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ee{constructor(t,...a){this.ecCodewordsPerBlock=t,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const a=this.ecBlocks;for(const l of a)t+=l.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class K{constructor(t,a){this.count=t,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class bt{constructor(t,a,...l){this.versionNumber=t,this.alignmentPatternCenters=a,this.ecBlocks=l;let h=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const w of m)h+=w.getCount()*(w.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new V;try{return this.getVersionForNumber((t-17)/4)}catch{throw new V}}static getVersionForNumber(t){if(t<1||t>40)throw new E;return bt.VERSIONS[t-1]}static decodeVersionInformation(t){let a=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<bt.VERSION_DECODE_INFO.length;h++){const f=bt.VERSION_DECODE_INFO[h];if(f===t)return bt.getVersionForNumber(h+7);const m=dr.numBitsDiffering(t,f);m<a&&(l=h+7,a=m)}return a<=3?bt.getVersionForNumber(l):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),a=new de(t);a.setRegion(0,0,9,9),a.setRegion(t-8,0,8,9),a.setRegion(0,t-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const f=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||a.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return a.setRegion(6,9,1,t-17),a.setRegion(9,6,t-17,1),this.versionNumber>6&&(a.setRegion(t-11,0,3,6),a.setRegion(0,t-11,6,3)),a}toString(){return""+this.versionNumber}}bt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),bt.VERSIONS=[new bt(1,new Int32Array(0),new Ee(7,new K(1,19)),new Ee(10,new K(1,16)),new Ee(13,new K(1,13)),new Ee(17,new K(1,9))),new bt(2,Int32Array.from([6,18]),new Ee(10,new K(1,34)),new Ee(16,new K(1,28)),new Ee(22,new K(1,22)),new Ee(28,new K(1,16))),new bt(3,Int32Array.from([6,22]),new Ee(15,new K(1,55)),new Ee(26,new K(1,44)),new Ee(18,new K(2,17)),new Ee(22,new K(2,13))),new bt(4,Int32Array.from([6,26]),new Ee(20,new K(1,80)),new Ee(18,new K(2,32)),new Ee(26,new K(2,24)),new Ee(16,new K(4,9))),new bt(5,Int32Array.from([6,30]),new Ee(26,new K(1,108)),new Ee(24,new K(2,43)),new Ee(18,new K(2,15),new K(2,16)),new Ee(22,new K(2,11),new K(2,12))),new bt(6,Int32Array.from([6,34]),new Ee(18,new K(2,68)),new Ee(16,new K(4,27)),new Ee(24,new K(4,19)),new Ee(28,new K(4,15))),new bt(7,Int32Array.from([6,22,38]),new Ee(20,new K(2,78)),new Ee(18,new K(4,31)),new Ee(18,new K(2,14),new K(4,15)),new Ee(26,new K(4,13),new K(1,14))),new bt(8,Int32Array.from([6,24,42]),new Ee(24,new K(2,97)),new Ee(22,new K(2,38),new K(2,39)),new Ee(22,new K(4,18),new K(2,19)),new Ee(26,new K(4,14),new K(2,15))),new bt(9,Int32Array.from([6,26,46]),new Ee(30,new K(2,116)),new Ee(22,new K(3,36),new K(2,37)),new Ee(20,new K(4,16),new K(4,17)),new Ee(24,new K(4,12),new K(4,13))),new bt(10,Int32Array.from([6,28,50]),new Ee(18,new K(2,68),new K(2,69)),new Ee(26,new K(4,43),new K(1,44)),new Ee(24,new K(6,19),new K(2,20)),new Ee(28,new K(6,15),new K(2,16))),new bt(11,Int32Array.from([6,30,54]),new Ee(20,new K(4,81)),new Ee(30,new K(1,50),new K(4,51)),new Ee(28,new K(4,22),new K(4,23)),new Ee(24,new K(3,12),new K(8,13))),new bt(12,Int32Array.from([6,32,58]),new Ee(24,new K(2,92),new K(2,93)),new Ee(22,new K(6,36),new K(2,37)),new Ee(26,new K(4,20),new K(6,21)),new Ee(28,new K(7,14),new K(4,15))),new bt(13,Int32Array.from([6,34,62]),new Ee(26,new K(4,107)),new Ee(22,new K(8,37),new K(1,38)),new Ee(24,new K(8,20),new K(4,21)),new Ee(22,new K(12,11),new K(4,12))),new bt(14,Int32Array.from([6,26,46,66]),new Ee(30,new K(3,115),new K(1,116)),new Ee(24,new K(4,40),new K(5,41)),new Ee(20,new K(11,16),new K(5,17)),new Ee(24,new K(11,12),new K(5,13))),new bt(15,Int32Array.from([6,26,48,70]),new Ee(22,new K(5,87),new K(1,88)),new Ee(24,new K(5,41),new K(5,42)),new Ee(30,new K(5,24),new K(7,25)),new Ee(24,new K(11,12),new K(7,13))),new bt(16,Int32Array.from([6,26,50,74]),new Ee(24,new K(5,98),new K(1,99)),new Ee(28,new K(7,45),new K(3,46)),new Ee(24,new K(15,19),new K(2,20)),new Ee(30,new K(3,15),new K(13,16))),new bt(17,Int32Array.from([6,30,54,78]),new Ee(28,new K(1,107),new K(5,108)),new Ee(28,new K(10,46),new K(1,47)),new Ee(28,new K(1,22),new K(15,23)),new Ee(28,new K(2,14),new K(17,15))),new bt(18,Int32Array.from([6,30,56,82]),new Ee(30,new K(5,120),new K(1,121)),new Ee(26,new K(9,43),new K(4,44)),new Ee(28,new K(17,22),new K(1,23)),new Ee(28,new K(2,14),new K(19,15))),new bt(19,Int32Array.from([6,30,58,86]),new Ee(28,new K(3,113),new K(4,114)),new Ee(26,new K(3,44),new K(11,45)),new Ee(26,new K(17,21),new K(4,22)),new Ee(26,new K(9,13),new K(16,14))),new bt(20,Int32Array.from([6,34,62,90]),new Ee(28,new K(3,107),new K(5,108)),new Ee(26,new K(3,41),new K(13,42)),new Ee(30,new K(15,24),new K(5,25)),new Ee(28,new K(15,15),new K(10,16))),new bt(21,Int32Array.from([6,28,50,72,94]),new Ee(28,new K(4,116),new K(4,117)),new Ee(26,new K(17,42)),new Ee(28,new K(17,22),new K(6,23)),new Ee(30,new K(19,16),new K(6,17))),new bt(22,Int32Array.from([6,26,50,74,98]),new Ee(28,new K(2,111),new K(7,112)),new Ee(28,new K(17,46)),new Ee(30,new K(7,24),new K(16,25)),new Ee(24,new K(34,13))),new bt(23,Int32Array.from([6,30,54,78,102]),new Ee(30,new K(4,121),new K(5,122)),new Ee(28,new K(4,47),new K(14,48)),new Ee(30,new K(11,24),new K(14,25)),new Ee(30,new K(16,15),new K(14,16))),new bt(24,Int32Array.from([6,28,54,80,106]),new Ee(30,new K(6,117),new K(4,118)),new Ee(28,new K(6,45),new K(14,46)),new Ee(30,new K(11,24),new K(16,25)),new Ee(30,new K(30,16),new K(2,17))),new bt(25,Int32Array.from([6,32,58,84,110]),new Ee(26,new K(8,106),new K(4,107)),new Ee(28,new K(8,47),new K(13,48)),new Ee(30,new K(7,24),new K(22,25)),new Ee(30,new K(22,15),new K(13,16))),new bt(26,Int32Array.from([6,30,58,86,114]),new Ee(28,new K(10,114),new K(2,115)),new Ee(28,new K(19,46),new K(4,47)),new Ee(28,new K(28,22),new K(6,23)),new Ee(30,new K(33,16),new K(4,17))),new bt(27,Int32Array.from([6,34,62,90,118]),new Ee(30,new K(8,122),new K(4,123)),new Ee(28,new K(22,45),new K(3,46)),new Ee(30,new K(8,23),new K(26,24)),new Ee(30,new K(12,15),new K(28,16))),new bt(28,Int32Array.from([6,26,50,74,98,122]),new Ee(30,new K(3,117),new K(10,118)),new Ee(28,new K(3,45),new K(23,46)),new Ee(30,new K(4,24),new K(31,25)),new Ee(30,new K(11,15),new K(31,16))),new bt(29,Int32Array.from([6,30,54,78,102,126]),new Ee(30,new K(7,116),new K(7,117)),new Ee(28,new K(21,45),new K(7,46)),new Ee(30,new K(1,23),new K(37,24)),new Ee(30,new K(19,15),new K(26,16))),new bt(30,Int32Array.from([6,26,52,78,104,130]),new Ee(30,new K(5,115),new K(10,116)),new Ee(28,new K(19,47),new K(10,48)),new Ee(30,new K(15,24),new K(25,25)),new Ee(30,new K(23,15),new K(25,16))),new bt(31,Int32Array.from([6,30,56,82,108,134]),new Ee(30,new K(13,115),new K(3,116)),new Ee(28,new K(2,46),new K(29,47)),new Ee(30,new K(42,24),new K(1,25)),new Ee(30,new K(23,15),new K(28,16))),new bt(32,Int32Array.from([6,34,60,86,112,138]),new Ee(30,new K(17,115)),new Ee(28,new K(10,46),new K(23,47)),new Ee(30,new K(10,24),new K(35,25)),new Ee(30,new K(19,15),new K(35,16))),new bt(33,Int32Array.from([6,30,58,86,114,142]),new Ee(30,new K(17,115),new K(1,116)),new Ee(28,new K(14,46),new K(21,47)),new Ee(30,new K(29,24),new K(19,25)),new Ee(30,new K(11,15),new K(46,16))),new bt(34,Int32Array.from([6,34,62,90,118,146]),new Ee(30,new K(13,115),new K(6,116)),new Ee(28,new K(14,46),new K(23,47)),new Ee(30,new K(44,24),new K(7,25)),new Ee(30,new K(59,16),new K(1,17))),new bt(35,Int32Array.from([6,30,54,78,102,126,150]),new Ee(30,new K(12,121),new K(7,122)),new Ee(28,new K(12,47),new K(26,48)),new Ee(30,new K(39,24),new K(14,25)),new Ee(30,new K(22,15),new K(41,16))),new bt(36,Int32Array.from([6,24,50,76,102,128,154]),new Ee(30,new K(6,121),new K(14,122)),new Ee(28,new K(6,47),new K(34,48)),new Ee(30,new K(46,24),new K(10,25)),new Ee(30,new K(2,15),new K(64,16))),new bt(37,Int32Array.from([6,28,54,80,106,132,158]),new Ee(30,new K(17,122),new K(4,123)),new Ee(28,new K(29,46),new K(14,47)),new Ee(30,new K(49,24),new K(10,25)),new Ee(30,new K(24,15),new K(46,16))),new bt(38,Int32Array.from([6,32,58,84,110,136,162]),new Ee(30,new K(4,122),new K(18,123)),new Ee(28,new K(13,46),new K(32,47)),new Ee(30,new K(48,24),new K(14,25)),new Ee(30,new K(42,15),new K(32,16))),new bt(39,Int32Array.from([6,26,54,82,110,138,166]),new Ee(30,new K(20,117),new K(4,118)),new Ee(28,new K(40,47),new K(7,48)),new Ee(30,new K(43,24),new K(22,25)),new Ee(30,new K(10,15),new K(67,16))),new bt(40,Int32Array.from([6,30,58,86,114,142,170]),new Ee(30,new K(19,118),new K(6,119)),new Ee(28,new K(18,47),new K(31,48)),new Ee(30,new K(34,24),new K(34,25)),new Ee(30,new K(20,15),new K(61,16)))];var qn;(function(D){D[D.DATA_MASK_000=0]="DATA_MASK_000",D[D.DATA_MASK_001=1]="DATA_MASK_001",D[D.DATA_MASK_010=2]="DATA_MASK_010",D[D.DATA_MASK_011=3]="DATA_MASK_011",D[D.DATA_MASK_100=4]="DATA_MASK_100",D[D.DATA_MASK_101=5]="DATA_MASK_101",D[D.DATA_MASK_110=6]="DATA_MASK_110",D[D.DATA_MASK_111=7]="DATA_MASK_111"})(qn||(qn={}));class Xt{constructor(t,a){this.value=t,this.isMasked=a}unmaskBitMatrix(t,a){for(let l=0;l<a;l++)for(let h=0;h<a;h++)this.isMasked(l,h)&&t.flip(h,l)}}Xt.values=new Map([[qn.DATA_MASK_000,new Xt(qn.DATA_MASK_000,(D,t)=>(D+t&1)===0)],[qn.DATA_MASK_001,new Xt(qn.DATA_MASK_001,(D,t)=>(D&1)===0)],[qn.DATA_MASK_010,new Xt(qn.DATA_MASK_010,(D,t)=>t%3===0)],[qn.DATA_MASK_011,new Xt(qn.DATA_MASK_011,(D,t)=>(D+t)%3===0)],[qn.DATA_MASK_100,new Xt(qn.DATA_MASK_100,(D,t)=>(Math.floor(D/2)+Math.floor(t/3)&1)===0)],[qn.DATA_MASK_101,new Xt(qn.DATA_MASK_101,(D,t)=>D*t%6===0)],[qn.DATA_MASK_110,new Xt(qn.DATA_MASK_110,(D,t)=>D*t%6<3)],[qn.DATA_MASK_111,new Xt(qn.DATA_MASK_111,(D,t)=>(D+t+D*t%3&1)===0)]]);class Pc{constructor(t){const a=t.getHeight();if(a<21||(a&3)!==1)throw new V;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let f=0;f<6;f++)t=this.copyBit(f,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let f=5;f>=0;f--)t=this.copyBit(8,f,t);const a=this.bitMatrix.getHeight();let l=0;const h=a-7;for(let f=a-1;f>=h;f--)l=this.copyBit(8,f,l);for(let f=a-8;f<a;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=dr.decodeFormatInformation(t,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),a=Math.floor((t-17)/4);if(a<=6)return bt.getVersionForNumber(a);let l=0;const h=t-11;for(let m=5;m>=0;m--)for(let w=t-9;w>=h;w--)l=this.copyBit(w,m,l);let f=bt.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===t)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let w=t-9;w>=h;w--)l=this.copyBit(m,w,l);if(f=bt.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===t)return this.parsedVersion=f,f;throw new V}copyBit(t,a,l){return(this.isMirror?this.bitMatrix.get(a,t):this.bitMatrix.get(t,a))?l<<1|1:l<<1}readCodewords(){const t=this.readFormatInformation(),a=this.readVersion(),l=Xt.values.get(t.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const f=a.buildFunctionPattern();let m=!0;const w=new Uint8Array(a.getTotalCodewords());let C=0,_=0,R=0;for(let M=h-1;M>0;M-=2){M===6&&M--;for(let $=0;$<h;$++){const Q=m?h-1-$:$;for(let he=0;he<2;he++)f.get(M-he,Q)||(R++,_<<=1,this.bitMatrix.get(M-he,Q)&&(_|=1),R===8&&(w[C++]=_,R=0,_=0))}m=!m}if(C!==a.getTotalCodewords())throw new V;return w}remask(){if(this.parsedFormatInfo===null)return;const t=Xt.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,a)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let a=0,l=t.getWidth();a<l;a++)for(let h=a+1,f=t.getHeight();h<f;h++)t.get(a,h)!==t.get(h,a)&&(t.flip(h,a),t.flip(a,h))}}class No{constructor(t,a){this.numDataCodewords=t,this.codewords=a}static getDataBlocks(t,a,l){if(t.length!==a.getTotalCodewords())throw new E;const h=a.getECBlocksForLevel(l);let f=0;const m=h.getECBlocks();for(const he of m)f+=he.getCount();const w=new Array(f);let C=0;for(const he of m)for(let me=0;me<he.getCount();me++){const ve=he.getDataCodewords(),je=h.getECCodewordsPerBlock()+ve;w[C++]=new No(ve,new Uint8Array(je))}const _=w[0].codewords.length;let R=w.length-1;for(;R>=0&&w[R].codewords.length!==_;)R--;R++;const M=_-h.getECCodewordsPerBlock();let $=0;for(let he=0;he<M;he++)for(let me=0;me<C;me++)w[me].codewords[he]=t[$++];for(let he=R;he<C;he++)w[he].codewords[M]=t[$++];const Q=w[0].codewords.length;for(let he=M;he<Q;he++)for(let me=0;me<C;me++){const ve=me<R?he:he+1;w[me].codewords[ve]=t[$++]}return w}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Dr;(function(D){D[D.TERMINATOR=0]="TERMINATOR",D[D.NUMERIC=1]="NUMERIC",D[D.ALPHANUMERIC=2]="ALPHANUMERIC",D[D.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",D[D.BYTE=4]="BYTE",D[D.ECI=5]="ECI",D[D.KANJI=6]="KANJI",D[D.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",D[D.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",D[D.HANZI=9]="HANZI"})(Dr||(Dr={}));class Et{constructor(t,a,l,h){this.value=t,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=h,Et.FOR_BITS.set(h,this),Et.FOR_VALUE.set(t,this)}static forBits(t){const a=Et.FOR_BITS.get(t);if(a===void 0)throw new E;return a}getCharacterCountBits(t){const a=t.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Et))return!1;const a=t;return this.value===a.value}toString(){return this.stringValue}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.TERMINATOR=new Et(Dr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Et.NUMERIC=new Et(Dr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Et.ALPHANUMERIC=new Et(Dr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Et.STRUCTURED_APPEND=new Et(Dr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Et.BYTE=new Et(Dr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Et.ECI=new Et(Dr.ECI,"ECI",Int32Array.from([0,0,0]),7),Et.KANJI=new Et(Dr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Et.FNC1_FIRST_POSITION=new Et(Dr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Et.FNC1_SECOND_POSITION=new Et(Dr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Et.HANZI=new Et(Dr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Sn{static decode(t,a,l,h){const f=new us(t);let m=new W;const w=new Array;let C=-1,_=-1;try{let R=null,M=!1,$;do{if(f.available()<4)$=Et.TERMINATOR;else{const Q=f.readBits(4);$=Et.forBits(Q)}switch($){case Et.TERMINATOR:break;case Et.FNC1_FIRST_POSITION:case Et.FNC1_SECOND_POSITION:M=!0;break;case Et.STRUCTURED_APPEND:if(f.available()<16)throw new V;C=f.readBits(8),_=f.readBits(8);break;case Et.ECI:const Q=Sn.parseECIValue(f);if(R=ne.getCharacterSetECIByValue(Q),R===null)throw new V;break;case Et.HANZI:const he=f.readBits(4),me=f.readBits($.getCharacterCountBits(a));he===Sn.GB2312_SUBSET&&Sn.decodeHanziSegment(f,m,me);break;default:const ve=f.readBits($.getCharacterCountBits(a));switch($){case Et.NUMERIC:Sn.decodeNumericSegment(f,m,ve);break;case Et.ALPHANUMERIC:Sn.decodeAlphanumericSegment(f,m,ve,M);break;case Et.BYTE:Sn.decodeByteSegment(f,m,ve,R,w,h);break;case Et.KANJI:Sn.decodeKanjiSegment(f,m,ve);break;default:throw new V}break}}while($!==Et.TERMINATOR)}catch{throw new V}return new De(t,m.toString(),w.length===0?null:w,l===null?null:l.toString(),C,_)}static decodeHanziSegment(t,a,l){if(l*13>t.available())throw new V;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=t.readBits(13);let w=m/96<<8&4294967295|m%96;w<959?w+=41377:w+=42657,h[f]=w>>8&255,h[f+1]=w&255,f+=2,l--}try{a.append(oe.decode(h,H.GB2312))}catch(m){throw new V(m)}}static decodeKanjiSegment(t,a,l){if(l*13>t.available())throw new V;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=t.readBits(13);let w=m/192<<8&4294967295|m%192;w<7936?w+=33088:w+=49472,h[f]=w>>8,h[f+1]=w,f+=2,l--}try{a.append(oe.decode(h,H.SHIFT_JIS))}catch(m){throw new V(m)}}static decodeByteSegment(t,a,l,h,f,m){if(8*l>t.available())throw new V;const w=new Uint8Array(l);for(let _=0;_<l;_++)w[_]=t.readBits(8);let C;h===null?C=H.guessEncoding(w,m):C=h.getName();try{a.append(oe.decode(w,C))}catch(_){throw new V(_)}f.push(w)}static toAlphaNumericChar(t){if(t>=Sn.ALPHANUMERIC_CHARS.length)throw new V;return Sn.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,a,l,h){const f=a.length();for(;l>1;){if(t.available()<11)throw new V;const m=t.readBits(11);a.append(Sn.toAlphaNumericChar(Math.floor(m/45))),a.append(Sn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(t.available()<6)throw new V;a.append(Sn.toAlphaNumericChar(t.readBits(6)))}if(h)for(let m=f;m<a.length();m++)a.charAt(m)==="%"&&(m<a.length()-1&&a.charAt(m+1)==="%"?a.deleteCharAt(m+1):a.setCharAt(m,""))}static decodeNumericSegment(t,a,l){for(;l>=3;){if(t.available()<10)throw new V;const h=t.readBits(10);if(h>=1e3)throw new V;a.append(Sn.toAlphaNumericChar(Math.floor(h/100))),a.append(Sn.toAlphaNumericChar(Math.floor(h/10)%10)),a.append(Sn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(t.available()<7)throw new V;const h=t.readBits(7);if(h>=100)throw new V;a.append(Sn.toAlphaNumericChar(Math.floor(h/10))),a.append(Sn.toAlphaNumericChar(h%10))}else if(l===1){if(t.available()<4)throw new V;const h=t.readBits(4);if(h>=10)throw new V;a.append(Sn.toAlphaNumericChar(h))}}static parseECIValue(t){const a=t.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const l=t.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=t.readBits(16);return(a&31)<<16&4294967295|l}throw new V}}Sn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Sn.GB2312_SUBSET=1;class Rl{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const a=t[0];t[0]=t[2],t[2]=a}}class kl{constructor(){this.rsDecoder=new at(Ze.QR_CODE_FIELD_256)}decodeBooleanArray(t,a){return this.decodeBitMatrix(de.parseFromBooleanArray(t),a)}decodeBitMatrix(t,a){const l=new Pc(t);let h=null;try{return this.decodeBitMatrixParser(l,a)}catch(f){h=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,a);return f.setOther(new Rl(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(t,a){const l=t.readVersion(),h=t.readFormatInformation().getErrorCorrectionLevel(),f=t.readCodewords(),m=No.getDataBlocks(f,l,h);let w=0;for(const R of m)w+=R.getNumDataCodewords();const C=new Uint8Array(w);let _=0;for(const R of m){const M=R.getCodewords(),$=R.getNumDataCodewords();this.correctErrors(M,$);for(let Q=0;Q<$;Q++)C[_++]=M[Q]}return Sn.decode(C,l,h,a)}correctErrors(t,a){const l=new Int32Array(t);try{this.rsDecoder.decode(l,t.length-a)}catch{throw new I}for(let h=0;h<a;h++)t[h]=l[h]}}class Ki extends Ue{constructor(t,a,l){super(t,a),this.estimatedModuleSize=l}aboutEquals(t,a,l){if(Math.abs(a-this.getY())<=t&&Math.abs(l-this.getX())<=t){const h=Math.abs(t-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(t,a,l){const h=(this.getX()+a)/2,f=(this.getY()+t)/2,m=(this.estimatedModuleSize+l)/2;return new Ki(h,f,m)}}class hs{constructor(t,a,l,h,f,m,w){this.image=t,this.startX=a,this.startY=l,this.width=h,this.height=f,this.moduleSize=m,this.resultPointCallback=w,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,a=this.height,l=this.width,h=t+l,f=this.startY+a/2,m=new Int32Array(3),w=this.image;for(let C=0;C<a;C++){const _=f+((C&1)===0?Math.floor((C+1)/2):-Math.floor((C+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=t;for(;R<h&&!w.get(R,_);)R++;let M=0;for(;R<h;){if(w.get(R,_))if(M===1)m[1]++;else if(M===2){if(this.foundPatternCross(m)){const $=this.handlePossibleCenter(m,_,R);if($!==null)return $}m[0]=m[2],m[1]=1,m[2]=0,M=1}else m[++M]++;else M===1&&M++,m[M]++;R++}if(this.foundPatternCross(m)){const $=this.handlePossibleCenter(m,_,h);if($!==null)return $}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new X}static centerFromEnd(t,a){return a-t[2]-t[1]/2}foundPatternCross(t){const a=this.moduleSize,l=a/2;for(let h=0;h<3;h++)if(Math.abs(a-t[h])>=l)return!1;return!0}crossCheckVertical(t,a,l,h){const f=this.image,m=f.getHeight(),w=this.crossCheckStateCount;w[0]=0,w[1]=0,w[2]=0;let C=t;for(;C>=0&&f.get(a,C)&&w[1]<=l;)w[1]++,C--;if(C<0||w[1]>l)return NaN;for(;C>=0&&!f.get(a,C)&&w[0]<=l;)w[0]++,C--;if(w[0]>l)return NaN;for(C=t+1;C<m&&f.get(a,C)&&w[1]<=l;)w[1]++,C++;if(C===m||w[1]>l)return NaN;for(;C<m&&!f.get(a,C)&&w[2]<=l;)w[2]++,C++;if(w[2]>l)return NaN;const _=w[0]+w[1]+w[2];return 5*Math.abs(_-h)>=2*h?NaN:this.foundPatternCross(w)?hs.centerFromEnd(w,C):NaN}handlePossibleCenter(t,a,l){const h=t[0]+t[1]+t[2],f=hs.centerFromEnd(t,l),m=this.crossCheckVertical(a,f,2*t[1],h);if(!isNaN(m)){const w=(t[0]+t[1]+t[2])/3;for(const _ of this.possibleCenters)if(_.aboutEquals(w,m,f))return _.combineEstimate(m,f,w);const C=new Ki(f,m,w);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class js extends Ue{constructor(t,a,l,h){super(t,a),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,a,l){if(Math.abs(a-this.getY())<=t&&Math.abs(l-this.getX())<=t){const h=Math.abs(t-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(t,a,l){const h=this.count+1,f=(this.count*this.getX()+a)/h,m=(this.count*this.getY()+t)/h,w=(this.count*this.estimatedModuleSize+l)/h;return new js(f,m,w,h)}}class li{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Mn{constructor(t,a){this.image=t,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const a=t!=null&&t.get(se.TRY_HARDER)!==void 0,l=t!=null&&t.get(se.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),m=h.getWidth();let w=Math.floor(3*f/(4*Mn.MAX_MODULES));(w<Mn.MIN_SKIP||a)&&(w=Mn.MIN_SKIP);let C=!1;const _=new Int32Array(5);for(let M=w-1;M<f&&!C;M+=w){_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0;let $=0;for(let Q=0;Q<m;Q++)if(h.get(Q,M))($&1)===1&&$++,_[$]++;else if(($&1)===0)if($===4)if(Mn.foundPatternCross(_)){if(this.handlePossibleCenter(_,M,Q,l)===!0)if(w=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const me=this.findRowSkip();me>_[2]&&(M+=me-_[2]-w,Q=m-1)}else{_[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,$=3;continue}$=0,_[0]=0,_[1]=0,_[2]=0,_[3]=0,_[4]=0}else _[0]=_[2],_[1]=_[3],_[2]=_[4],_[3]=1,_[4]=0,$=3;else _[++$]++;else _[$]++;Mn.foundPatternCross(_)&&this.handlePossibleCenter(_,M,m,l)===!0&&(w=_[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Ue.orderBestPatterns(R),new li(R)}static centerFromEnd(t,a){return a-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let a=0;for(let f=0;f<5;f++){const m=t[f];if(m===0)return!1;a+=m}if(a<7)return!1;const l=a/7,h=l/2;return Math.abs(l-t[0])<h&&Math.abs(l-t[1])<h&&Math.abs(3*l-t[2])<3*h&&Math.abs(l-t[3])<h&&Math.abs(l-t[4])<h}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,a,l,h){const f=this.getCrossCheckStateCount();let m=0;const w=this.image;for(;t>=m&&a>=m&&w.get(a-m,t-m);)f[2]++,m++;if(t<m||a<m)return!1;for(;t>=m&&a>=m&&!w.get(a-m,t-m)&&f[1]<=l;)f[1]++,m++;if(t<m||a<m||f[1]>l)return!1;for(;t>=m&&a>=m&&w.get(a-m,t-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const C=w.getHeight(),_=w.getWidth();for(m=1;t+m<C&&a+m<_&&w.get(a+m,t+m);)f[2]++,m++;if(t+m>=C||a+m>=_)return!1;for(;t+m<C&&a+m<_&&!w.get(a+m,t+m)&&f[3]<l;)f[3]++,m++;if(t+m>=C||a+m>=_||f[3]>=l)return!1;for(;t+m<C&&a+m<_&&w.get(a+m,t+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const R=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(R-h)<2*h&&Mn.foundPatternCross(f)}crossCheckVertical(t,a,l,h){const f=this.image,m=f.getHeight(),w=this.getCrossCheckStateCount();let C=t;for(;C>=0&&f.get(a,C);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(a,C)&&w[1]<=l;)w[1]++,C--;if(C<0||w[1]>l)return NaN;for(;C>=0&&f.get(a,C)&&w[0]<=l;)w[0]++,C--;if(w[0]>l)return NaN;for(C=t+1;C<m&&f.get(a,C);)w[2]++,C++;if(C===m)return NaN;for(;C<m&&!f.get(a,C)&&w[3]<l;)w[3]++,C++;if(C===m||w[3]>=l)return NaN;for(;C<m&&f.get(a,C)&&w[4]<l;)w[4]++,C++;if(w[4]>=l)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-h)>=2*h?NaN:Mn.foundPatternCross(w)?Mn.centerFromEnd(w,C):NaN}crossCheckHorizontal(t,a,l,h){const f=this.image,m=f.getWidth(),w=this.getCrossCheckStateCount();let C=t;for(;C>=0&&f.get(C,a);)w[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(C,a)&&w[1]<=l;)w[1]++,C--;if(C<0||w[1]>l)return NaN;for(;C>=0&&f.get(C,a)&&w[0]<=l;)w[0]++,C--;if(w[0]>l)return NaN;for(C=t+1;C<m&&f.get(C,a);)w[2]++,C++;if(C===m)return NaN;for(;C<m&&!f.get(C,a)&&w[3]<l;)w[3]++,C++;if(C===m||w[3]>=l)return NaN;for(;C<m&&f.get(C,a)&&w[4]<l;)w[4]++,C++;if(w[4]>=l)return NaN;const _=w[0]+w[1]+w[2]+w[3]+w[4];return 5*Math.abs(_-h)>=h?NaN:Mn.foundPatternCross(w)?Mn.centerFromEnd(w,C):NaN}handlePossibleCenter(t,a,l,h){const f=t[0]+t[1]+t[2]+t[3]+t[4];let m=Mn.centerFromEnd(t,l),w=this.crossCheckVertical(a,Math.floor(m),t[2],f);if(!isNaN(w)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(w),t[2],f),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(w),Math.floor(m),t[2],f)))){const C=f/7;let _=!1;const R=this.possibleCenters;for(let M=0,$=R.length;M<$;M++){const Q=R[M];if(Q.aboutEquals(C,w,m)){R[M]=Q.combineEstimate(w,m,C),_=!0;break}}if(!_){const M=new js(m,w,C);R.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=Mn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,a=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Mn.CENTER_QUORUM&&(t++,a+=m.getEstimatedModuleSize());if(t<3)return!1;const h=a/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-h);return f<=.05*a}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new X;const a=this.possibleCenters;let l;if(t>3){let h=0,f=0;for(const C of this.possibleCenters){const _=C.getEstimatedModuleSize();h+=_,f+=_*_}l=h/t;let m=Math.sqrt(f/t-l*l);a.sort((C,_)=>{const R=Math.abs(_.getEstimatedModuleSize()-l),M=Math.abs(C.getEstimatedModuleSize()-l);return R<M?-1:R>M?1:0});const w=Math.max(.2*l,m);for(let C=0;C<a.length&&a.length>3;C++){const _=a[C];Math.abs(_.getEstimatedModuleSize()-l)>w&&(a.splice(C,1),C--)}}if(a.length>3){let h=0;for(const f of a)h+=f.getEstimatedModuleSize();l=h/a.length,a.sort((f,m)=>{if(m.getCount()===f.getCount()){const w=Math.abs(m.getEstimatedModuleSize()-l),C=Math.abs(f.getEstimatedModuleSize()-l);return w<C?1:w>C?-1:0}else return m.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Mn.CENTER_QUORUM=2,Mn.MIN_SKIP=3,Mn.MAX_MODULES=57;class Fs{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(se.NEED_RESULT_POINT_CALLBACK);const l=new Mn(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(l)}processFinderPatternInfo(t){const a=t.getTopLeft(),l=t.getTopRight(),h=t.getBottomLeft(),f=this.calculateModuleSize(a,l,h);if(f<1)throw new X("No pattern found in proccess finder.");const m=Fs.computeDimension(a,l,h,f),w=bt.getProvisionalVersionForDimension(m),C=w.getDimensionForVersion()-7;let _=null;if(w.getAlignmentPatternCenters().length>0){const Q=l.getX()-a.getX()+h.getX(),he=l.getY()-a.getY()+h.getY(),me=1-3/C,ve=Math.floor(a.getX()+me*(Q-a.getX())),je=Math.floor(a.getY()+me*(he-a.getY()));for(let Ge=4;Ge<=16;Ge<<=1)try{_=this.findAlignmentInRegion(f,ve,je,Ge);break}catch(Xe){if(!(Xe instanceof X))throw Xe}}const R=Fs.createTransform(a,l,h,_,m),M=Fs.sampleGrid(this.image,R,m);let $;return _===null?$=[h,a,l]:$=[h,a,l,_],new Pt(M,$)}static createTransform(t,a,l,h,f){const m=f-3.5;let w,C,_,R;return h!==null?(w=h.getX(),C=h.getY(),_=m-3,R=_):(w=a.getX()-t.getX()+l.getX(),C=a.getY()-t.getY()+l.getY(),_=m,R=m),Vt.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,_,R,3.5,m,t.getX(),t.getY(),a.getX(),a.getY(),w,C,l.getX(),l.getY())}static sampleGrid(t,a,l){return Gt.getInstance().sampleGridWithTransform(t,l,l,a)}static computeDimension(t,a,l,h){const f=Be.round(Ue.distance(t,a)/h),m=Be.round(Ue.distance(t,l)/h);let w=Math.floor((f+m)/2)+7;switch(w&3){case 0:w++;break;case 2:w--;break;case 3:throw new X("Dimensions could be not found.")}return w}calculateModuleSize(t,a,l){return(this.calculateModuleSizeOneWay(t,a)+this.calculateModuleSizeOneWay(t,l))/2}calculateModuleSizeOneWay(t,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(a.getX()),Math.floor(a.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(t,a,l,h){let f=this.sizeOfBlackWhiteBlackRun(t,a,l,h),m=1,w=t-(l-t);w<0?(m=t/(t-w),w=0):w>=this.image.getWidth()&&(m=(this.image.getWidth()-1-t)/(w-t),w=this.image.getWidth()-1);let C=Math.floor(a-(h-a)*m);return m=1,C<0?(m=a/(a-C),C=0):C>=this.image.getHeight()&&(m=(this.image.getHeight()-1-a)/(C-a),C=this.image.getHeight()-1),w=Math.floor(t+(w-t)*m),f+=this.sizeOfBlackWhiteBlackRun(t,a,w,C),f-1}sizeOfBlackWhiteBlackRun(t,a,l,h){const f=Math.abs(h-a)>Math.abs(l-t);if(f){let Q=t;t=a,a=Q,Q=l,l=h,h=Q}const m=Math.abs(l-t),w=Math.abs(h-a);let C=-m/2;const _=t<l?1:-1,R=a<h?1:-1;let M=0;const $=l+_;for(let Q=t,he=a;Q!==$;Q+=_){const me=f?he:Q,ve=f?Q:he;if(M===1===this.image.get(me,ve)){if(M===2)return Be.distance(Q,he,t,a);M++}if(C+=w,C>0){if(he===h)break;he+=R,C-=m}}return M===2?Be.distance(l+_,h,t,a):NaN}findAlignmentInRegion(t,a,l,h){const f=Math.floor(h*t),m=Math.max(0,a-f),w=Math.min(this.image.getWidth()-1,a+f);if(w-m<t*3)throw new X("Alignment top exceeds estimated module size.");const C=Math.max(0,l-f),_=Math.min(this.image.getHeight()-1,l+f);if(_-C<t*3)throw new X("Alignment bottom exceeds estimated module size.");return new hs(this.image,m,C,w-m,_-C,t,this.resultPointCallback).find()}}class Sr{constructor(){this.decoder=new kl}getDecoder(){return this.decoder}decode(t,a){let l,h;if(a!=null&&a.get(se.PURE_BARCODE)!==void 0){const C=Sr.extractPureBits(t.getBlackMatrix());l=this.decoder.decodeBitMatrix(C,a),h=Sr.NO_POINTS}else{const C=new Fs(t.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(C.getBits(),a),h=C.getPoints()}l.getOther()instanceof Rl&&l.getOther().applyMirroredCorrection(h);const f=new Oe(l.getText(),l.getRawBytes(),void 0,h,Y.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(Ce.BYTE_SEGMENTS,m);const w=l.getECLevel();return w!==null&&f.putMetadata(Ce.ERROR_CORRECTION_LEVEL,w),l.hasStructuredAppend()&&(f.putMetadata(Ce.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(Ce.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(t){const a=t.getTopLeftOnBit(),l=t.getBottomRightOnBit();if(a===null||l===null)throw new X;const h=this.moduleSize(a,t);let f=a[1],m=l[1],w=a[0],C=l[0];if(w>=C||f>=m)throw new X;if(m-f!==C-w&&(C=w+(m-f),C>=t.getWidth()))throw new X;const _=Math.round((C-w+1)/h),R=Math.round((m-f+1)/h);if(_<=0||R<=0)throw new X;if(R!==_)throw new X;const M=Math.floor(h/2);f+=M,w+=M;const $=w+Math.floor((_-1)*h)-C;if($>0){if($>M)throw new X;w-=$}const Q=f+Math.floor((R-1)*h)-m;if(Q>0){if(Q>M)throw new X;f-=Q}const he=new de(_,R);for(let me=0;me<R;me++){const ve=f+Math.floor(me*h);for(let je=0;je<_;je++)t.get(w+Math.floor(je*h),ve)&&he.set(je,me)}return he}static moduleSize(t,a){const l=a.getHeight(),h=a.getWidth();let f=t[0],m=t[1],w=!0,C=0;for(;f<h&&m<l;){if(w!==a.get(f,m)){if(++C===5)break;w=!w}f++,m++}if(f===h||m===l)throw new X;return(f-t[0])/7}}Sr.NO_POINTS=new Array;class It{PDF417Common(){}static getBitCountSum(t){return Be.sum(t)}static toIntArray(t){if(t==null||!t.length)return It.EMPTY_INT_ARRAY;const a=new Int32Array(t.length);let l=0;for(const h of t)a[l++]=h;return a}static getCodeword(t){const a=U.binarySearch(It.SYMBOL_TABLE,t&262143);return a<0?-1:(It.CODEWORD_TABLE[a]-1)%It.NUMBER_OF_CODEWORDS}}It.NUMBER_OF_CODEWORDS=929,It.MAX_CODEWORDS_IN_BARCODE=It.NUMBER_OF_CODEWORDS-1,It.MIN_ROWS_IN_BARCODE=3,It.MAX_ROWS_IN_BARCODE=90,It.MODULES_IN_CODEWORD=17,It.MODULES_IN_STOP_PATTERN=18,It.BARS_IN_MODULE=8,It.EMPTY_INT_ARRAY=new Int32Array([]),It.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),It.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Dc{constructor(t,a){this.bits=t,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Bt{static detectMultiple(t,a,l){let h=t.getBlackMatrix(),f=Bt.detect(l,h);return f.length||(h=h.clone(),h.rotate180(),f=Bt.detect(l,h)),new Dc(h,f)}static detect(t,a){const l=new Array;let h=0,f=0,m=!1;for(;h<a.getHeight();){const w=Bt.findVertices(a,h,f);if(w[0]==null&&w[3]==null){if(!m)break;m=!1,f=0;for(const C of l)C[1]!=null&&(h=Math.trunc(Math.max(h,C[1].getY()))),C[3]!=null&&(h=Math.max(h,Math.trunc(C[3].getY())));h+=Bt.ROW_STEP;continue}if(m=!0,l.push(w),!t)break;w[2]!=null?(f=Math.trunc(w[2].getX()),h=Math.trunc(w[2].getY())):(f=Math.trunc(w[4].getX()),h=Math.trunc(w[4].getY()))}return l}static findVertices(t,a,l){const h=t.getHeight(),f=t.getWidth(),m=new Array(8);return Bt.copyToResult(m,Bt.findRowsWithPattern(t,h,f,a,l,Bt.START_PATTERN),Bt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),a=Math.trunc(m[4].getY())),Bt.copyToResult(m,Bt.findRowsWithPattern(t,h,f,a,l,Bt.STOP_PATTERN),Bt.INDEXES_STOP_PATTERN),m}static copyToResult(t,a,l){for(let h=0;h<l.length;h++)t[l[h]]=a[h]}static findRowsWithPattern(t,a,l,h,f,m){const w=new Array(4);let C=!1;const _=new Int32Array(m.length);for(;h<a;h+=Bt.ROW_STEP){let M=Bt.findGuardPattern(t,f,h,l,!1,m,_);if(M!=null){for(;h>0;){const $=Bt.findGuardPattern(t,f,--h,l,!1,m,_);if($!=null)M=$;else{h++;break}}w[0]=new Ue(M[0],h),w[1]=new Ue(M[1],h),C=!0;break}}let R=h+1;if(C){let M=0,$=Int32Array.from([Math.trunc(w[0].getX()),Math.trunc(w[1].getX())]);for(;R<a;R++){const Q=Bt.findGuardPattern(t,$[0],R,l,!1,m,_);if(Q!=null&&Math.abs($[0]-Q[0])<Bt.MAX_PATTERN_DRIFT&&Math.abs($[1]-Q[1])<Bt.MAX_PATTERN_DRIFT)$=Q,M=0;else{if(M>Bt.SKIPPED_ROW_COUNT_MAX)break;M++}}R-=M+1,w[2]=new Ue($[0],R),w[3]=new Ue($[1],R)}return R-h<Bt.BARCODE_MIN_HEIGHT&&U.fill(w,null),w}static findGuardPattern(t,a,l,h,f,m,w){U.fillWithin(w,0,w.length,0);let C=a,_=0;for(;t.get(C,l)&&C>0&&_++<Bt.MAX_PIXEL_DRIFT;)C--;let R=C,M=0,$=m.length;for(let Q=f;R<h;R++)if(t.get(R,l)!==Q)w[M]++;else{if(M===$-1){if(Bt.patternMatchVariance(w,m,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE)return new Int32Array([C,R]);C+=w[0]+w[1],k.arraycopy(w,2,w,0,M-1),w[M-1]=0,w[M]=0,M--}else M++;w[M]=1,Q=!Q}return M===$-1&&Bt.patternMatchVariance(w,m,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE?new Int32Array([C,R-1]):null}static patternMatchVariance(t,a,l){let h=t.length,f=0,m=0;for(let _=0;_<h;_++)f+=t[_],m+=a[_];if(f<m)return 1/0;let w=f/m;l*=w;let C=0;for(let _=0;_<h;_++){let R=t[_],M=a[_]*w,$=R>M?R-M:M-R;if($>l)return 1/0;C+=$}return C/f}}Bt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Bt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Bt.MAX_AVG_VARIANCE=.42,Bt.MAX_INDIVIDUAL_VARIANCE=.8,Bt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Bt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Bt.MAX_PIXEL_DRIFT=3,Bt.MAX_PATTERN_DRIFT=5,Bt.SKIPPED_ROW_COUNT_MAX=25,Bt.ROW_STEP=5,Bt.BARCODE_MIN_HEIGHT=10;class ur{constructor(t,a){if(a.length===0)throw new E;this.field=t;let l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),k.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let a=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)a=this.field.add(this.field.multiply(t,a),this.coefficients[h]);return a}add(t){if(!this.field.equals(t.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let a=this.coefficients,l=t.coefficients;if(a.length>l.length){let m=a;a=l,l=m}let h=new Int32Array(l.length),f=l.length-a.length;k.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=this.field.add(a[m-f],l[m]);return new ur(this.field,h)}subtract(t){if(!this.field.equals(t.field))throw new E("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof ur?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new ur(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,h=t.coefficients,f=h.length,m=new Int32Array(l+f-1);for(let w=0;w<l;w++){let C=a[w];for(let _=0;_<f;_++)m[w+_]=this.field.add(m[w+_],this.field.multiply(C,h[_]))}return new ur(this.field,m)}negative(){let t=this.coefficients.length,a=new Int32Array(t);for(let l=0;l<t;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new ur(this.field,a)}multiplyScalar(t){if(t===0)return new ur(this.field,new Int32Array([0]));if(t===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let h=0;h<a;h++)l[h]=this.field.multiply(this.coefficients[h],t);return new ur(this.field,l)}multiplyByMonomial(t,a){if(t<0)throw new E;if(a===0)return new ur(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+t);for(let f=0;f<l;f++)h[f]=this.field.multiply(this.coefficients[f],a);return new ur(this.field,h)}toString(){let t=new W;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(t.append(" - "),l=-l):t.length()>0&&t.append(" + "),(a===0||l!==1)&&t.append(l),a!==0&&(a===1?t.append("x"):(t.append("x^"),t.append(a))))}return t.toString()}}class Mc{add(t,a){return(t+a)%this.modulus}subtract(t,a){return(this.modulus+t-a)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new E;return this.logTable[t]}inverse(t){if(t===0)throw new ut;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,a){return t===0||a===0?0:this.expTable[(this.logTable[t]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Zi extends Mc{constructor(t,a){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let l=1;for(let h=0;h<t;h++)this.expTable[h]=l,l=l*a%t;for(let h=0;h<t-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new ur(this,new Int32Array([0])),this.one=new ur(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,a){if(t<0)throw new E;if(a===0)return this.zero;let l=new Int32Array(t+1);return l[0]=a,new ur(this,l)}}Zi.PDF417_GF=new Zi(It.NUMBER_OF_CODEWORDS,3);class Ol{constructor(){this.field=Zi.PDF417_GF}decode(t,a,l){let h=new ur(this.field,t),f=new Int32Array(a),m=!1;for(let he=a;he>0;he--){let me=h.evaluateAt(this.field.exp(he));f[a-he]=me,me!==0&&(m=!0)}if(!m)return 0;let w=this.field.getOne();if(l!=null)for(const he of l){let me=this.field.exp(t.length-1-he),ve=new ur(this.field,new Int32Array([this.field.subtract(0,me),1]));w=w.multiply(ve)}let C=new ur(this.field,f),_=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),C,a),R=_[0],M=_[1],$=this.findErrorLocations(R),Q=this.findErrorMagnitudes(M,R,$);for(let he=0;he<$.length;he++){let me=t.length-1-this.field.log($[he]);if(me<0)throw I.getChecksumInstance();t[me]=this.field.subtract(t[me],Q[he])}return $.length}runEuclideanAlgorithm(t,a,l){if(t.getDegree()<a.getDegree()){let $=t;t=a,a=$}let h=t,f=a,m=this.field.getZero(),w=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let $=h,Q=m;if(h=f,m=w,h.isZero())throw I.getChecksumInstance();f=$;let he=this.field.getZero(),me=h.getCoefficient(h.getDegree()),ve=this.field.inverse(me);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let je=f.getDegree()-h.getDegree(),Ge=this.field.multiply(f.getCoefficient(f.getDegree()),ve);he=he.add(this.field.buildMonomial(je,Ge)),f=f.subtract(h.multiplyByMonomial(je,Ge))}w=he.multiply(m).subtract(Q).negative()}let C=w.getCoefficient(0);if(C===0)throw I.getChecksumInstance();let _=this.field.inverse(C),R=w.multiply(_),M=f.multiply(_);return[R,M]}findErrorLocations(t){let a=t.getDegree(),l=new Int32Array(a),h=0;for(let f=1;f<this.field.getSize()&&h<a;f++)t.evaluateAt(f)===0&&(l[h]=this.field.inverse(f),h++);if(h!==a)throw I.getChecksumInstance();return l}findErrorMagnitudes(t,a,l){let h=a.getDegree(),f=new Int32Array(h);for(let _=1;_<=h;_++)f[h-_]=this.field.multiply(_,a.getCoefficient(_));let m=new ur(this.field,f),w=l.length,C=new Int32Array(w);for(let _=0;_<w;_++){let R=this.field.inverse(l[_]),M=this.field.subtract(0,t.evaluateAt(R)),$=this.field.inverse(m.evaluateAt(R));C[_]=this.field.multiply(M,$)}return C}}class Ai{constructor(t,a,l,h,f){t instanceof Ai?this.constructor_2(t):this.constructor_1(t,a,l,h,f)}constructor_1(t,a,l,h,f){const m=a==null||l==null,w=h==null||f==null;if(m&&w)throw new X;m?(a=new Ue(0,h.getY()),l=new Ue(0,f.getY())):w&&(h=new Ue(t.getWidth()-1,a.getY()),f=new Ue(t.getWidth()-1,l.getY())),this.image=t,this.topLeft=a,this.bottomLeft=l,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,a){return t==null?a:a==null?t:new Ai(t.image,t.topLeft,t.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(t,a,l){let h=this.topLeft,f=this.bottomLeft,m=this.topRight,w=this.bottomRight;if(t>0){let C=l?this.topLeft:this.topRight,_=Math.trunc(C.getY()-t);_<0&&(_=0);let R=new Ue(C.getX(),_);l?h=R:m=R}if(a>0){let C=l?this.bottomLeft:this.bottomRight,_=Math.trunc(C.getY()+a);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);let R=new Ue(C.getX(),_);l?f=R:w=R}return new Ai(this.image,h,f,m,w)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class La{constructor(t,a,l,h){this.columnCount=t,this.errorCorrectionLevel=h,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Us{constructor(){this.buffer=""}static form(t,a){let l=-1;function h(m,w,C,_,R,M){if(m==="%%")return"%";if(a[++l]===void 0)return;m=_?parseInt(_.substr(1)):void 0;let $=R?parseInt(R.substr(1)):void 0,Q;switch(M){case"s":Q=a[l];break;case"c":Q=a[l][0];break;case"f":Q=parseFloat(a[l]).toFixed(m);break;case"p":Q=parseFloat(a[l]).toPrecision(m);break;case"e":Q=parseFloat(a[l]).toExponential(m);break;case"x":Q=parseInt(a[l]).toString($||16);break;case"d":Q=parseFloat(parseInt(a[l],$||10).toPrecision(m)).toFixed(0);break}Q=typeof Q=="object"?JSON.stringify(Q):(+Q).toString($);let he=parseInt(C),me=C&&C[0]+""=="0"?"0":" ";for(;Q.length<he;)Q=w!==void 0?Q+me:me+Q;return Q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(f,h)}format(t,...a){this.buffer+=Us.form(t,a)}toString(){return this.buffer}}class Is{constructor(t){this.boundingBox=new Ai(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let a=this.getCodeword(t);if(a!=null)return a;for(let l=1;l<Is.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(t)-l;if(h>=0&&(a=this.codewords[h],a!=null)||(h=this.imageRowToCodewordIndex(t)+l,h<this.codewords.length&&(a=this.codewords[h],a!=null)))return a}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,a){this.codewords[this.imageRowToCodewordIndex(t)]=a}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Us;let a=0;for(const l of this.codewords){if(l==null){t.format("%3d:    |   %n",a++);continue}t.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return t.toString()}}Is.MAX_NEARBY_DISTANCE=5;class ci{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let a=this.values.get(t);a==null&&(a=0),a++,this.values.set(t,a)}getValue(){let t=-1,a=new Array;for(const[l,h]of this.values.entries()){const f={getKey:()=>l,getValue:()=>h};f.getValue()>t?(t=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===t&&a.push(f.getKey())}return It.toIntArray(a)}getConfidence(t){return this.values.get(t)}}class Lc extends Is{constructor(t,a){super(t),this._isLeft=a}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,t);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),w=this.imageRowToCodewordIndex(Math.trunc(f.getY())),C=-1,_=1,R=0;for(let M=m;M<w;M++){if(a[M]==null)continue;let $=a[M],Q=$.getRowNumber()-C;if(Q===0)R++;else if(Q===1)_=Math.max(_,R),R=1,C=$.getRowNumber();else if(Q<0||$.getRowNumber()>=t.getRowCount()||Q>M)a[M]=null;else{let he;_>2?he=(_-2)*Q:he=Q;let me=he>=M;for(let ve=1;ve<=he&&!me;ve++)me=a[M-ve]!=null;me?a[M]=null:(C=$.getRowNumber(),R=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let a=new Int32Array(t.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=a.length)continue;a[h]++}return a}adjustIncompleteIndicatorColumnRowNumbers(t){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),w=this.getCodewords(),C=-1;for(let _=f;_<m;_++){if(w[_]==null)continue;let R=w[_];R.setRowNumberAsRowIndicatorColumn();let M=R.getRowNumber()-C;M===0||(M===1?C=R.getRowNumber():R.getRowNumber()>=t.getRowCount()?w[_]=null:C=R.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),a=new ci,l=new ci,h=new ci,f=new ci;for(let w of t){if(w==null)continue;w.setRowNumberAsRowIndicatorColumn();let C=w.getValue()%30,_=w.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:l.setValue(C*3+1);break;case 1:f.setValue(C/3),h.setValue(C%3);break;case 2:a.setValue(C+1);break}}if(a.getValue().length===0||l.getValue().length===0||h.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<It.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>It.MAX_ROWS_IN_BARCODE)return null;let m=new La(a.getValue()[0],l.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(t,m),m}removeIncorrectCodewords(t,a){for(let l=0;l<t.length;l++){let h=t[l];if(t[l]==null)continue;let f=h.getValue()%30,m=h.getRowNumber();if(m>a.getRowCount()){t[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(t[l]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(t[l]=null);break;case 2:f+1!==a.getColumnCount()&&(t[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ba{constructor(t,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=It.MAX_CODEWORDS_IN_BARCODE,a;do a=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(a,h,l))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<t.length;l++)if(t[l]!=null&&a[l]!=null&&t[l].getRowNumber()===a[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[l];f!=null&&(f.setRowNumber(t[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let w=this.detectionResultColumns[m].getCodewords()[l];w!=null&&(f=Ba.adjustRowNumberIfValid(h,f,w),w.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let w=this.detectionResultColumns[m].getCodewords()[l];w!=null&&(f=Ba.adjustRowNumberIfValid(h,f,w),w.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(t)?(l.setRowNumber(t),a=0):++a),a}adjustRowNumbers(t,a,l){if(!this.detectionResultColumns[t-1])return;let h=l[a],f=this.detectionResultColumns[t-1].getCodewords(),m=f;this.detectionResultColumns[t+1]!=null&&(m=this.detectionResultColumns[t+1].getCodewords());let w=new Array(14);w[2]=f[a],w[3]=m[a],a>0&&(w[0]=l[a-1],w[4]=f[a-1],w[5]=m[a-1]),a>1&&(w[8]=l[a-2],w[10]=f[a-2],w[11]=m[a-2]),a<l.length-1&&(w[1]=l[a+1],w[6]=f[a+1],w[7]=m[a+1]),a<l.length-2&&(w[9]=l[a+2],w[12]=f[a+2],w[13]=m[a+2]);for(let C of w)if(Ba.adjustRowNumber(h,C))return}static adjustRowNumber(t,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===t.getBucket()?(t.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,a){this.detectionResultColumns[t]=a}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Us;for(let l=0;l<t.getCodewords().length;l++){a.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[l];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class ji{constructor(t,a,l,h){this.rowNumber=ji.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==ji.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}ji.BARCODE_ROW_UNKNOWN=-1;class hr{static initialize(){for(let t=0;t<It.SYMBOL_TABLE.length;t++){let a=It.SYMBOL_TABLE[t],l=a&1;for(let h=0;h<It.BARS_IN_MODULE;h++){let f=0;for(;(a&1)===l;)f+=1,a>>=1;l=a&1,hr.RATIOS_TABLE[t]||(hr.RATIOS_TABLE[t]=new Array(It.BARS_IN_MODULE)),hr.RATIOS_TABLE[t][It.BARS_IN_MODULE-h-1]=Math.fround(f/It.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let a=hr.getDecodedCodewordValue(hr.sampleBitCounts(t));return a!==-1?a:hr.getClosestDecodedValue(t)}static sampleBitCounts(t){let a=Be.sum(t),l=new Int32Array(It.BARS_IN_MODULE),h=0,f=0;for(let m=0;m<It.MODULES_IN_CODEWORD;m++){let w=a/(2*It.MODULES_IN_CODEWORD)+m*a/It.MODULES_IN_CODEWORD;f+t[h]<=w&&(f+=t[h],h++),l[h]++}return l}static getDecodedCodewordValue(t){let a=hr.getBitValue(t);return It.getCodeword(a)===-1?-1:a}static getBitValue(t){let a=0;for(let l=0;l<t.length;l++)for(let h=0;h<t[l];h++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(t){let a=Be.sum(t),l=new Array(It.BARS_IN_MODULE);if(a>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(t[m]/a);let h=Rt.MAX_VALUE,f=-1;this.bSymbolTableReady||hr.initialize();for(let m=0;m<hr.RATIOS_TABLE.length;m++){let w=0,C=hr.RATIOS_TABLE[m];for(let _=0;_<It.BARS_IN_MODULE;_++){let R=Math.fround(C[_]-l[_]);if(w+=Math.fround(R*R),w>=h)break}w<h&&(h=w,f=It.SYMBOL_TABLE[m])}return f}}hr.bSymbolTableReady=!1,hr.RATIOS_TABLE=new Array(It.SYMBOL_TABLE.length).map(D=>new Array(It.BARS_IN_MODULE));class Ao{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Pl{static parseLong(t,a=void 0){return parseInt(t,a)}}class zs extends y{}zs.kind="NullPointerException";class Dl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,a,l){if(t==null)throw new zs;if(a<0||a>t.length||l<0||a+l>t.length||a+l<0)throw new P;if(l===0)return;for(let h=0;h<l;h++)this.write(t[a+h])}flush(){}close(){}}class jo extends y{}class Bc extends Dl{constructor(t=32){if(super(),this.count=0,t<0)throw new E("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let l=this.buf.length<<1;if(l-t<0&&(l=t),l<0){if(t<0)throw new jo;l=B.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,l)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,a,l){if(a<0||a>t.length||l<0||a+l-t.length>0)throw new P;this.ensureCapacity(this.count+l),k.arraycopy(t,a,this.buf,this.count,l),this.count+=l}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var an;(function(D){D[D.ALPHA=0]="ALPHA",D[D.LOWER=1]="LOWER",D[D.MIXED=2]="MIXED",D[D.PUNCT=3]="PUNCT",D[D.ALPHA_SHIFT=4]="ALPHA_SHIFT",D[D.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(an||(an={}));function Fa(){if(typeof window<"u")return window.BigInt||null;if(typeof Dd<"u")return Dd.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ua;function Xn(D){if(typeof Ua>"u"&&(Ua=Fa()),Ua===null)throw new Error("BigInt is not supported!");return Ua(D)}function Qi(){let D=[];D[0]=Xn(1);let t=Xn(900);D[1]=t;for(let a=2;a<16;a++)D[a]=D[a-1]*t;return D}class Re{static decode(t,a){let l=new W(""),h=ne.ISO8859_1;l.enableDecoding(h);let f=1,m=t[f++],w=new Ao;for(;f<t[0];){switch(m){case Re.TEXT_COMPACTION_MODE_LATCH:f=Re.textCompaction(t,f,l);break;case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:f=Re.byteCompaction(m,t,h,f,l);break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(t[f++]);break;case Re.NUMERIC_COMPACTION_MODE_LATCH:f=Re.numericCompaction(t,f,l);break;case Re.ECI_CHARSET:ne.getCharacterSetECIByValue(t[f++]);break;case Re.ECI_GENERAL_PURPOSE:f+=2;break;case Re.ECI_USER_DEFINED:f++;break;case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=Re.decodeMacroBlock(t,f,w);break;case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:throw new V;default:f--,f=Re.textCompaction(t,f,l);break}if(f<t.length)m=t[f++];else throw V.getFormatInstance()}if(l.length()===0)throw V.getFormatInstance();let C=new De(null,l.toString(),null,a);return C.setOther(w),C}static decodeMacroBlock(t,a,l){if(a+Re.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw V.getFormatInstance();let h=new Int32Array(Re.NUMBER_OF_SEQUENCE_CODEWORDS);for(let w=0;w<Re.NUMBER_OF_SEQUENCE_CODEWORDS;w++,a++)h[w]=t[a];l.setSegmentIndex(B.parseInt(Re.decodeBase900toBase10(h,Re.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new W;a=Re.textCompaction(t,a,f),l.setFileId(f.toString());let m=-1;for(t[a]===Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=a+1);a<t[0];)switch(t[a]){case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,t[a]){case Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let w=new W;a=Re.textCompaction(t,a+1,w),l.setFileName(w.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new W;a=Re.textCompaction(t,a+1,C),l.setSender(C.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let _=new W;a=Re.textCompaction(t,a+1,_),l.setAddressee(_.toString());break;case Re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new W;a=Re.numericCompaction(t,a+1,R),l.setSegmentCount(B.parseInt(R.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new W;a=Re.numericCompaction(t,a+1,M),l.setTimestamp(Pl.parseLong(M.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let $=new W;a=Re.numericCompaction(t,a+1,$),l.setChecksum(B.parseInt($.toString()));break;case Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Q=new W;a=Re.numericCompaction(t,a+1,Q),l.setFileSize(Pl.parseLong(Q.toString()));break;default:throw V.getFormatInstance()}break;case Re.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(m!==-1){let w=a-m;l.isLastSegment()&&w--,l.setOptionalData(U.copyOfRange(t,m,m+w))}return a}static textCompaction(t,a,l){let h=new Int32Array((t[0]-a)*2),f=new Int32Array((t[0]-a)*2),m=0,w=!1;for(;a<t[0]&&!w;){let C=t[a++];if(C<Re.TEXT_COMPACTION_MODE_LATCH)h[m]=C/30,h[m+1]=C%30,m+=2;else switch(C){case Re.TEXT_COMPACTION_MODE_LATCH:h[m++]=Re.TEXT_COMPACTION_MODE_LATCH;break;case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:a--,w=!0;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=t[a++],f[m]=C,m++;break}}return Re.decodeTextCompaction(h,f,m,l),a}static decodeTextCompaction(t,a,l,h){let f=an.ALPHA,m=an.ALPHA,w=0;for(;w<l;){let C=t[w],_="";switch(f){case an.ALPHA:if(C<26)_=String.fromCharCode(65+C);else switch(C){case 26:_=" ";break;case Re.LL:f=an.LOWER;break;case Re.ML:f=an.MIXED;break;case Re.PS:m=f,f=an.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case Re.TEXT_COMPACTION_MODE_LATCH:f=an.ALPHA;break}break;case an.LOWER:if(C<26)_=String.fromCharCode(97+C);else switch(C){case 26:_=" ";break;case Re.AS:m=f,f=an.ALPHA_SHIFT;break;case Re.ML:f=an.MIXED;break;case Re.PS:m=f,f=an.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case Re.TEXT_COMPACTION_MODE_LATCH:f=an.ALPHA;break}break;case an.MIXED:if(C<Re.PL)_=Re.MIXED_CHARS[C];else switch(C){case Re.PL:f=an.PUNCT;break;case 26:_=" ";break;case Re.LL:f=an.LOWER;break;case Re.AL:f=an.ALPHA;break;case Re.PS:m=f,f=an.PUNCT_SHIFT;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case Re.TEXT_COMPACTION_MODE_LATCH:f=an.ALPHA;break}break;case an.PUNCT:if(C<Re.PAL)_=Re.PUNCT_CHARS[C];else switch(C){case Re.PAL:f=an.ALPHA;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case Re.TEXT_COMPACTION_MODE_LATCH:f=an.ALPHA;break}break;case an.ALPHA_SHIFT:if(f=m,C<26)_=String.fromCharCode(65+C);else switch(C){case 26:_=" ";break;case Re.TEXT_COMPACTION_MODE_LATCH:f=an.ALPHA;break}break;case an.PUNCT_SHIFT:if(f=m,C<Re.PAL)_=Re.PUNCT_CHARS[C];else switch(C){case Re.PAL:f=an.ALPHA;break;case Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[w]);break;case Re.TEXT_COMPACTION_MODE_LATCH:f=an.ALPHA;break}break}_!==""&&h.append(_),w++}}static byteCompaction(t,a,l,h,f){let m=new Bc,w=0,C=0,_=!1;switch(t){case Re.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),M=a[h++];for(;h<a[0]&&!_;)switch(R[w++]=M,C=900*C+M,M=a[h++],M){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:h--,_=!0;break;default:if(w%5===0&&w>0){for(let $=0;$<6;++$)m.write(Number(Xn(C)>>Xn(8*(5-$))));C=0,w=0}break}h===a[0]&&M<Re.TEXT_COMPACTION_MODE_LATCH&&(R[w++]=M);for(let $=0;$<w;$++)m.write(R[$]);break;case Re.BYTE_COMPACTION_MODE_LATCH_6:for(;h<a[0]&&!_;){let $=a[h++];if($<Re.TEXT_COMPACTION_MODE_LATCH)w++,C=900*C+$;else switch($){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.NUMERIC_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:h--,_=!0;break}if(w%5===0&&w>0){for(let Q=0;Q<6;++Q)m.write(Number(Xn(C)>>Xn(8*(5-Q))));C=0,w=0}}break}return f.append(oe.decode(m.toByteArray(),l)),h}static numericCompaction(t,a,l){let h=0,f=!1,m=new Int32Array(Re.MAX_NUMERIC_CODEWORDS);for(;a<t[0]&&!f;){let w=t[a++];if(a===t[0]&&(f=!0),w<Re.TEXT_COMPACTION_MODE_LATCH)m[h]=w,h++;else switch(w){case Re.TEXT_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH:case Re.BYTE_COMPACTION_MODE_LATCH_6:case Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Re.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(h%Re.MAX_NUMERIC_CODEWORDS===0||w===Re.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(l.append(Re.decodeBase900toBase10(m,h)),h=0)}return a}static decodeBase900toBase10(t,a){let l=Xn(0);for(let f=0;f<a;f++)l+=Re.EXP900[a-f-1]*Xn(t[f]);let h=l.toString();if(h.charAt(0)!=="1")throw new V;return h.substring(1)}}Re.TEXT_COMPACTION_MODE_LATCH=900,Re.BYTE_COMPACTION_MODE_LATCH=901,Re.NUMERIC_COMPACTION_MODE_LATCH=902,Re.BYTE_COMPACTION_MODE_LATCH_6=924,Re.ECI_USER_DEFINED=925,Re.ECI_GENERAL_PURPOSE=926,Re.ECI_CHARSET=927,Re.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Re.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Re.MACRO_PDF417_TERMINATOR=922,Re.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Re.MAX_NUMERIC_CODEWORDS=15,Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Re.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Re.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Re.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Re.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Re.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Re.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Re.PL=25,Re.LL=27,Re.AS=27,Re.ML=28,Re.AL=28,Re.PS=29,Re.PAL=29,Re.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Re.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Re.EXP900=Fa()?Qi():[],Re.NUMBER_OF_SEQUENCE_CODEWORDS=2;class $t{constructor(){}static decode(t,a,l,h,f,m,w){let C=new Ai(t,a,l,h,f),_=null,R=null,M;for(let he=!0;;he=!1){if(a!=null&&(_=$t.getRowIndicatorColumn(t,C,a,!0,m,w)),h!=null&&(R=$t.getRowIndicatorColumn(t,C,h,!1,m,w)),M=$t.merge(_,R),M==null)throw X.getNotFoundInstance();let me=M.getBoundingBox();if(he&&me!=null&&(me.getMinY()<C.getMinY()||me.getMaxY()>C.getMaxY()))C=me;else break}M.setBoundingBox(C);let $=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,_),M.setDetectionResultColumn($,R);let Q=_!=null;for(let he=1;he<=$;he++){let me=Q?he:$-he;if(M.getDetectionResultColumn(me)!==void 0)continue;let ve;me===0||me===$?ve=new Lc(C,me===0):ve=new Is(C),M.setDetectionResultColumn(me,ve);let je=-1,Ge=je;for(let Xe=C.getMinY();Xe<=C.getMaxY();Xe++){if(je=$t.getStartColumn(M,me,Xe,Q),je<0||je>C.getMaxX()){if(Ge===-1)continue;je=Ge}let ze=$t.detectCodeword(t,C.getMinX(),C.getMaxX(),Q,je,Xe,m,w);ze!=null&&(ve.setCodeword(Xe,ze),Ge=je,m=Math.min(m,ze.getWidth()),w=Math.max(w,ze.getWidth()))}}return $t.createDecoderResult(M)}static merge(t,a){if(t==null&&a==null)return null;let l=$t.getBarcodeMetadata(t,a);if(l==null)return null;let h=Ai.merge($t.adjustBoundingBox(t),$t.adjustBoundingBox(a));return new Ba(l,h)}static adjustBoundingBox(t){if(t==null)return null;let a=t.getRowHeights();if(a==null)return null;let l=$t.getMax(a),h=0;for(let w of a)if(h+=l-w,w>0)break;let f=t.getCodewords();for(let w=0;h>0&&f[w]==null;w++)h--;let m=0;for(let w=a.length-1;w>=0&&(m+=l-a[w],!(a[w]>0));w--);for(let w=f.length-1;m>0&&f[w]==null;w--)m--;return t.getBoundingBox().addMissingRows(h,m,t.isLeft())}static getMax(t){let a=-1;for(let l of t)a=Math.max(a,l);return a}static getBarcodeMetadata(t,a){let l;if(t==null||(l=t.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let h;return a==null||(h=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(t,a,l,h,f,m){let w=new Lc(a,h);for(let C=0;C<2;C++){let _=C===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=a.getMaxY()&&M>=a.getMinY();M+=_){let $=$t.detectCodeword(t,0,t.getWidth(),h,R,M,f,m);$!=null&&(w.setCodeword(M,$),h?R=$.getStartX():R=$.getEndX())}}return w}static adjustCodewordCount(t,a){let l=a[0][1],h=l.getValue(),f=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-$t.getNumberOfECCodeWords(t.getBarcodeECLevel());if(h.length===0){if(f<1||f>It.MAX_CODEWORDS_IN_BARCODE)throw X.getNotFoundInstance();l.setValue(f)}else h[0]!==f&&l.setValue(f)}static createDecoderResult(t){let a=$t.createBarcodeMatrix(t);$t.adjustCodewordCount(t,a);let l=new Array,h=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),f=[],m=new Array;for(let C=0;C<t.getBarcodeRowCount();C++)for(let _=0;_<t.getBarcodeColumnCount();_++){let R=a[C][_+1].getValue(),M=C*t.getBarcodeColumnCount()+_;R.length===0?l.push(M):R.length===1?h[M]=R[0]:(m.push(M),f.push(R))}let w=new Array(f.length);for(let C=0;C<w.length;C++)w[C]=f[C];return $t.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),h,It.toIntArray(l),It.toIntArray(m),w)}static createDecoderResultFromAmbiguousValues(t,a,l,h,f){let m=new Int32Array(h.length),w=100;for(;w-- >0;){for(let C=0;C<m.length;C++)a[h[C]]=f[C][m[C]];try{return $t.decodeCodewords(a,t,l)}catch(C){if(!(C instanceof I))throw C}if(m.length===0)throw I.getChecksumInstance();for(let C=0;C<m.length;C++)if(m[C]<f[C].length-1){m[C]++;break}else if(m[C]=0,C===m.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(t){let a=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let h=0;h<a.length;h++)for(let f=0;f<a[h].length;f++)a[h][f]=new ci;let l=0;for(let h of t.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][l].setValue(f.getValue())}}}l++}return a}static isValidBarcodeColumn(t,a){return a>=0&&a<=t.getBarcodeColumnCount()+1}static getStartColumn(t,a,l,h){let f=h?1:-1,m=null;if($t.isValidBarcodeColumn(t,a-f)&&(m=t.getDetectionResultColumn(a-f).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=t.getDetectionResultColumn(a).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if($t.isValidBarcodeColumn(t,a-f)&&(m=t.getDetectionResultColumn(a-f).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let w=0;for(;$t.isValidBarcodeColumn(t,a-f);){a-=f;for(let C of t.getDetectionResultColumn(a).getCodewords())if(C!=null)return(h?C.getEndX():C.getStartX())+f*w*(C.getEndX()-C.getStartX());w++}return h?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,a,l,h,f,m,w,C){f=$t.adjustCodewordStartColumn(t,a,l,h,f,m);let _=$t.getModuleBitCount(t,a,l,h,f,m);if(_==null)return null;let R,M=Be.sum(_);if(h)R=f+M;else{for(let he=0;he<_.length/2;he++){let me=_[he];_[he]=_[_.length-1-he],_[_.length-1-he]=me}R=f,f=R-M}if(!$t.checkCodewordSkew(M,w,C))return null;let $=hr.getDecodedValue(_),Q=It.getCodeword($);return Q===-1?null:new ji(f,R,$t.getCodewordBucketNumber($),Q)}static getModuleBitCount(t,a,l,h,f,m){let w=f,C=new Int32Array(8),_=0,R=h?1:-1,M=h;for(;(h?w<l:w>=a)&&_<C.length;)t.get(w,m)===M?(C[_]++,w+=R):(_++,M=!M);return _===C.length||w===(h?l:a)&&_===C.length-1?C:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,a,l,h,f,m){let w=f,C=h?-1:1;for(let _=0;_<2;_++){for(;(h?w>=a:w<l)&&h===t.get(w,m);){if(Math.abs(f-w)>$t.CODEWORD_SKEW_SIZE)return f;w+=C}C=-C,h=!h}return w}static checkCodewordSkew(t,a,l){return a-$t.CODEWORD_SKEW_SIZE<=t&&t<=l+$t.CODEWORD_SKEW_SIZE}static decodeCodewords(t,a,l){if(t.length===0)throw V.getFormatInstance();let h=1<<a+1,f=$t.correctErrors(t,l,h);$t.verifyCodewordCount(t,h);let m=Re.decode(t,""+a);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(t,a,l){if(a!=null&&a.length>l/2+$t.MAX_ERRORS||l<0||l>$t.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return $t.errorCorrection.decode(t,l,a)}static verifyCodewordCount(t,a){if(t.length<4)throw V.getFormatInstance();let l=t[0];if(l>t.length)throw V.getFormatInstance();if(l===0)if(a<t.length)t[0]=t.length-a;else throw V.getFormatInstance()}static getBitCountForCodeword(t){let a=new Int32Array(8),l=0,h=a.length-1;for(;!((t&1)!==l&&(l=t&1,h--,h<0));)a[h]++,t>>=1;return a}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return $t.getCodewordBucketNumber($t.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let a=new Us;for(let l=0;l<t.length;l++){a.format("Row %2d: ",l);for(let h=0;h<t[l].length;h++){let f=t[l][h];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}$t.CODEWORD_SKEW_SIZE=2,$t.MAX_ERRORS=3,$t.MAX_EC_CODEWORDS=512,$t.errorCorrection=new Ol;class fr{decode(t,a=null){let l=fr.decode(t,a,!1);if(l==null||l.length===0||l[0]==null)throw X.getNotFoundInstance();return l[0]}decodeMultiple(t,a=null){try{return fr.decode(t,a,!0)}catch(l){throw l instanceof V||l instanceof I?X.getNotFoundInstance():l}}static decode(t,a,l){const h=new Array,f=Bt.detectMultiple(t,a,l);for(const m of f.getPoints()){const w=$t.decode(f.getBits(),m[4],m[5],m[6],m[7],fr.getMinCodewordWidth(m),fr.getMaxCodewordWidth(m)),C=new Oe(w.getText(),w.getRawBytes(),void 0,m,Y.PDF_417);C.putMetadata(Ce.ERROR_CORRECTION_LEVEL,w.getECLevel());const _=w.getOther();_!=null&&C.putMetadata(Ce.PDF417_EXTRA_METADATA,_),h.push(C)}return h.map(m=>m)}static getMaxWidth(t,a){return t==null||a==null?0:Math.trunc(Math.abs(t.getX()-a.getX()))}static getMinWidth(t,a){return t==null||a==null?B.MAX_VALUE:Math.trunc(Math.abs(t.getX()-a.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(fr.getMaxWidth(t[0],t[4]),fr.getMaxWidth(t[6],t[2])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN),Math.max(fr.getMaxWidth(t[1],t[5]),fr.getMaxWidth(t[7],t[3])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(fr.getMinWidth(t[0],t[4]),fr.getMinWidth(t[6],t[2])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN),Math.min(fr.getMinWidth(t[1],t[5]),fr.getMinWidth(t[7],t[3])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ji extends y{}Ji.kind="ReaderException";class Io{constructor(t,a){this.verbose=t===!0,a&&this.setHints(a)}decode(t,a){return a&&this.setHints(a),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const a=!o(t)&&t.get(se.TRY_HARDER)===!0,l=o(t)?null:t.get(se.POSSIBLE_FORMATS),h=new Array;if(!o(l)){const f=l.some(m=>m===Y.UPC_A||m===Y.UPC_E||m===Y.EAN_13||m===Y.EAN_8||m===Y.CODABAR||m===Y.CODE_39||m===Y.CODE_93||m===Y.CODE_128||m===Y.ITF||m===Y.RSS_14||m===Y.RSS_EXPANDED);f&&!a&&h.push(new et(t,this.verbose)),l.includes(Y.QR_CODE)&&h.push(new Sr),l.includes(Y.DATA_MATRIX)&&h.push(new qr),l.includes(Y.AZTEC)&&h.push(new yn),l.includes(Y.PDF_417)&&h.push(new fr),f&&a&&h.push(new et(t,this.verbose))}h.length===0&&(a||h.push(new et(t,this.verbose)),h.push(new Sr),h.push(new qr),h.push(new yn),h.push(new fr),a&&h.push(new et(t,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new Ji("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(t,this.hints)}catch(l){if(l instanceof Ji)continue}throw new X("No MultiFormat Readers were able to detect the code.")}}class za extends Ie{constructor(t=null,a=500){const l=new Io;l.setHints(t),super(l,a)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class To extends Ie{constructor(t=500){super(new fr,t)}}class Fc extends Ie{constructor(t=500){super(new Sr,t)}}var Ml;(function(D){D[D.ERROR_CORRECTION=0]="ERROR_CORRECTION",D[D.CHARACTER_SET=1]="CHARACTER_SET",D[D.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",D[D.MIN_SIZE=3]="MIN_SIZE",D[D.MAX_SIZE=4]="MAX_SIZE",D[D.MARGIN=5]="MARGIN",D[D.PDF417_COMPACT=6]="PDF417_COMPACT",D[D.PDF417_COMPACTION=7]="PDF417_COMPACTION",D[D.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",D[D.AZTEC_LAYERS=9]="AZTEC_LAYERS",D[D.QR_VERSION=10]="QR_VERSION"})(Ml||(Ml={}));var er=Ml;class Ll{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new We(t,Int32Array.from([1])))}buildGenerator(t){const a=this.cachedGenerators;if(t>=a.length){let l=a[a.length-1];const h=this.field;for(let f=a.length;f<=t;f++){const m=l.multiply(new We(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));a.push(m),l=m}}return a[t]}encode(t,a){if(a===0)throw new E("No error correction bytes");const l=t.length-a;if(l<=0)throw new E("No data bytes provided");const h=this.buildGenerator(a),f=new Int32Array(l);k.arraycopy(t,0,f,0,l);let m=new We(this.field,f);m=m.multiplyByMonomial(a,1);const C=m.divide(h)[1].getCoefficients(),_=a-C.length;for(let R=0;R<_;R++)t[l+R]=0;k.arraycopy(C,0,t,l+_,C.length)}}class _n{constructor(){}static applyMaskPenaltyRule1(t){return _n.applyMaskPenaltyRule1Internal(t,!0)+_n.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let a=0;const l=t.getArray(),h=t.getWidth(),f=t.getHeight();for(let m=0;m<f-1;m++){const w=l[m];for(let C=0;C<h-1;C++){const _=w[C];_===w[C+1]&&_===l[m+1][C]&&_===l[m+1][C+1]&&a++}}return _n.N2*a}static applyMaskPenaltyRule3(t){let a=0;const l=t.getArray(),h=t.getWidth(),f=t.getHeight();for(let m=0;m<f;m++)for(let w=0;w<h;w++){const C=l[m];w+6<h&&C[w]===1&&C[w+1]===0&&C[w+2]===1&&C[w+3]===1&&C[w+4]===1&&C[w+5]===0&&C[w+6]===1&&(_n.isWhiteHorizontal(C,w-4,w)||_n.isWhiteHorizontal(C,w+7,w+11))&&a++,m+6<f&&l[m][w]===1&&l[m+1][w]===0&&l[m+2][w]===1&&l[m+3][w]===1&&l[m+4][w]===1&&l[m+5][w]===0&&l[m+6][w]===1&&(_n.isWhiteVertical(l,w,m-4,m)||_n.isWhiteVertical(l,w,m+7,m+11))&&a++}return a*_n.N3}static isWhiteHorizontal(t,a,l){a=Math.max(a,0),l=Math.min(l,t.length);for(let h=a;h<l;h++)if(t[h]===1)return!1;return!0}static isWhiteVertical(t,a,l,h){l=Math.max(l,0),h=Math.min(h,t.length);for(let f=l;f<h;f++)if(t[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let a=0;const l=t.getArray(),h=t.getWidth(),f=t.getHeight();for(let C=0;C<f;C++){const _=l[C];for(let R=0;R<h;R++)_[R]===1&&a++}const m=t.getHeight()*t.getWidth();return Math.floor(Math.abs(a*2-m)*10/m)*_n.N4}static getDataMaskBit(t,a,l){let h,f;switch(t){case 0:h=l+a&1;break;case 1:h=l&1;break;case 2:h=a%3;break;case 3:h=(l+a)%3;break;case 4:h=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:f=l*a,h=(f&1)+f%3;break;case 6:f=l*a,h=(f&1)+f%3&1;break;case 7:f=l*a,h=f%3+(l+a&1)&1;break;default:throw new E("Invalid mask pattern: "+t)}return h===0}static applyMaskPenaltyRule1Internal(t,a){let l=0;const h=a?t.getHeight():t.getWidth(),f=a?t.getWidth():t.getHeight(),m=t.getArray();for(let w=0;w<h;w++){let C=0,_=-1;for(let R=0;R<f;R++){const M=a?m[w][R]:m[R][w];M===_?C++:(C>=5&&(l+=_n.N1+(C-5)),C=1,_=M)}C>=5&&(l+=_n.N1+(C-5))}return l}}_n.N1=3,_n.N2=3,_n.N3=40,_n.N4=10;class Ro{constructor(t,a){this.width=t,this.height=a;const l=new Array(a);for(let h=0;h!==a;h++)l[h]=new Uint8Array(t);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(t,a){return this.bytes[a][t]}getArray(){return this.bytes}setNumber(t,a,l){this.bytes[a][t]=l}setBoolean(t,a,l){this.bytes[a][t]=l?1:0}clear(t){for(const a of this.bytes)U.fill(a,t)}equals(t){if(!(t instanceof Ro))return!1;const a=t;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,h=this.height;l<h;++l){const f=this.bytes[l],m=a.bytes[l];for(let w=0,C=this.width;w<C;++w)if(f[w]!==m[w])return!1}return!0}toString(){const t=new W;for(let a=0,l=this.height;a<l;++a){const h=this.bytes[a];for(let f=0,m=this.width;f<m;++f)switch(h[f]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Ii{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new W;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Ii.NUM_MASK_PATTERNS}}Ii.NUM_MASK_PATTERNS=8;class gn extends y{}gn.kind="WriterException";class Nt{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,a,l,h,f){Nt.clearMatrix(f),Nt.embedBasicPatterns(l,f),Nt.embedTypeInfo(a,h,f),Nt.maybeEmbedVersionInfo(l,f),Nt.embedDataBits(t,h,f)}static embedBasicPatterns(t,a){Nt.embedPositionDetectionPatternsAndSeparators(a),Nt.embedDarkDotAtLeftBottomCorner(a),Nt.maybeEmbedPositionAdjustmentPatterns(t,a),Nt.embedTimingPatterns(a)}static embedTypeInfo(t,a,l){const h=new G;Nt.makeTypeInfoBits(t,a,h);for(let f=0,m=h.getSize();f<m;++f){const w=h.get(h.getSize()-1-f),C=Nt.TYPE_INFO_COORDINATES[f],_=C[0],R=C[1];if(l.setBoolean(_,R,w),f<8){const M=l.getWidth()-f-1;l.setBoolean(M,8,w)}else{const $=l.getHeight()-7+(f-8);l.setBoolean(8,$,w)}}}static maybeEmbedVersionInfo(t,a){if(t.getVersionNumber()<7)return;const l=new G;Nt.makeVersionInfoBits(t,l);let h=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const w=l.get(h);h--,a.setBoolean(f,a.getHeight()-11+m,w),a.setBoolean(a.getHeight()-11+m,f,w)}}static embedDataBits(t,a,l){let h=0,f=-1,m=l.getWidth()-1,w=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);w>=0&&w<l.getHeight();){for(let C=0;C<2;++C){const _=m-C;if(!Nt.isEmpty(l.get(_,w)))continue;let R;h<t.getSize()?(R=t.get(h),++h):R=!1,a!==255&&_n.getDataMaskBit(a,_,w)&&(R=!R),l.setBoolean(_,w,R)}w+=f}f=-f,w+=f,m-=2}if(h!==t.getSize())throw new gn("Not all bits consumed: "+h+"/"+t.getSize())}static findMSBSet(t){return 32-B.numberOfLeadingZeros(t)}static calculateBCHCode(t,a){if(a===0)throw new E("0 polynomial");const l=Nt.findMSBSet(a);for(t<<=l-1;Nt.findMSBSet(t)>=l;)t^=a<<Nt.findMSBSet(t)-l;return t}static makeTypeInfoBits(t,a,l){if(!Ii.isValidMaskPattern(a))throw new gn("Invalid mask pattern");const h=t.getBits()<<3|a;l.appendBits(h,5);const f=Nt.calculateBCHCode(h,Nt.TYPE_INFO_POLY);l.appendBits(f,10);const m=new G;if(m.appendBits(Nt.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new gn("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(t,a){a.appendBits(t.getVersionNumber(),6);const l=Nt.calculateBCHCode(t.getVersionNumber(),Nt.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new gn("should not happen but we got: "+a.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let a=8;a<t.getWidth()-8;++a){const l=(a+1)%2;Nt.isEmpty(t.get(a,6))&&t.setNumber(a,6,l),Nt.isEmpty(t.get(6,a))&&t.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new gn;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,a,l){for(let h=0;h<8;++h){if(!Nt.isEmpty(l.get(t+h,a)))throw new gn;l.setNumber(t+h,a,0)}}static embedVerticalSeparationPattern(t,a,l){for(let h=0;h<7;++h){if(!Nt.isEmpty(l.get(t,a+h)))throw new gn;l.setNumber(t,a+h,0)}}static embedPositionAdjustmentPattern(t,a,l){for(let h=0;h<5;++h){const f=Nt.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(t+m,a+h,f[m])}}static embedPositionDetectionPattern(t,a,l){for(let h=0;h<7;++h){const f=Nt.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(t+m,a+h,f[m])}}static embedPositionDetectionPatternsAndSeparators(t){const a=Nt.POSITION_DETECTION_PATTERN[0].length;Nt.embedPositionDetectionPattern(0,0,t),Nt.embedPositionDetectionPattern(t.getWidth()-a,0,t),Nt.embedPositionDetectionPattern(0,t.getWidth()-a,t);const l=8;Nt.embedHorizontalSeparationPattern(0,l-1,t),Nt.embedHorizontalSeparationPattern(t.getWidth()-l,l-1,t),Nt.embedHorizontalSeparationPattern(0,t.getWidth()-l,t);const h=7;Nt.embedVerticalSeparationPattern(h,0,t),Nt.embedVerticalSeparationPattern(t.getHeight()-h-1,0,t),Nt.embedVerticalSeparationPattern(h,t.getHeight()-h,t)}static maybeEmbedPositionAdjustmentPatterns(t,a){if(t.getVersionNumber()<2)return;const l=t.getVersionNumber()-1,h=Nt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=h.length;f!==m;f++){const w=h[f];if(w>=0)for(let C=0;C!==m;C++){const _=h[C];_>=0&&Nt.isEmpty(a.get(_,w))&&Nt.embedPositionAdjustmentPattern(_-2,w-2,a)}}}}Nt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Nt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Nt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Nt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Nt.VERSION_INFO_POLY=7973,Nt.TYPE_INFO_POLY=1335,Nt.TYPE_INFO_MASK_PATTERN=21522;class Zu{constructor(t,a){this.dataBytes=t,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class wn{constructor(){}static calculateMaskPenalty(t){return _n.applyMaskPenaltyRule1(t)+_n.applyMaskPenaltyRule2(t)+_n.applyMaskPenaltyRule3(t)+_n.applyMaskPenaltyRule4(t)}static encode(t,a,l=null){let h=wn.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(er.CHARACTER_SET)!==void 0;f&&(h=l.get(er.CHARACTER_SET).toString());const m=this.chooseMode(t,h),w=new G;if(m===Et.BYTE&&(f||wn.DEFAULT_BYTE_MODE_ENCODING!==h)){const Xe=ne.getCharacterSetECIByName(h);Xe!==void 0&&this.appendECI(Xe,w)}this.appendModeInfo(m,w);const C=new G;this.appendBytes(t,m,C,h);let _;if(l!==null&&l.get(er.QR_VERSION)!==void 0){const Xe=Number.parseInt(l.get(er.QR_VERSION).toString(),10);_=bt.getVersionForNumber(Xe);const ze=this.calculateBitsNeeded(m,w,C,_);if(!this.willFit(ze,_,a))throw new gn("Data too big for requested version")}else _=this.recommendVersion(a,m,w,C);const R=new G;R.appendBitArray(w);const M=m===Et.BYTE?C.getSizeInBytes():t.length;this.appendLengthInfo(M,_,m,R),R.appendBitArray(C);const $=_.getECBlocksForLevel(a),Q=_.getTotalCodewords()-$.getTotalECCodewords();this.terminateBits(Q,R);const he=this.interleaveWithECBytes(R,_.getTotalCodewords(),Q,$.getNumBlocks()),me=new Ii;me.setECLevel(a),me.setMode(m),me.setVersion(_);const ve=_.getDimensionForVersion(),je=new Ro(ve,ve),Ge=this.chooseMaskPattern(he,a,_,je);return me.setMaskPattern(Ge),Nt.buildMatrix(he,a,_,Ge,je),me.setMatrix(je),me}static recommendVersion(t,a,l,h){const f=this.calculateBitsNeeded(a,l,h,bt.getVersionForNumber(1)),m=this.chooseVersion(f,t),w=this.calculateBitsNeeded(a,l,h,m);return this.chooseVersion(w,t)}static calculateBitsNeeded(t,a,l,h){return a.getSize()+t.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(t){return t<wn.ALPHANUMERIC_TABLE.length?wn.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,a=null){if(ne.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(t))return Et.KANJI;let l=!1,h=!1;for(let f=0,m=t.length;f<m;++f){const w=t.charAt(f);if(wn.isDigit(w))l=!0;else if(this.getAlphanumericCode(w.charCodeAt(0))!==-1)h=!0;else return Et.BYTE}return h?Et.ALPHANUMERIC:l?Et.NUMERIC:Et.BYTE}static isOnlyDoubleByteKanji(t){let a;try{a=oe.encode(t,ne.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const f=a[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(t,a,l,h){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let w=0;w<Ii.NUM_MASK_PATTERNS;w++){Nt.buildMatrix(t,a,l,w,h);let C=this.calculateMaskPenalty(h);C<f&&(f=C,m=w)}return m}static chooseVersion(t,a){for(let l=1;l<=40;l++){const h=bt.getVersionForNumber(l);if(wn.willFit(t,h,a))return h}throw new gn("Data too big")}static willFit(t,a,l){const h=a.getTotalCodewords(),m=a.getECBlocksForLevel(l).getTotalECCodewords(),w=h-m,C=(t+7)/8;return w>=C}static terminateBits(t,a){const l=t*8;if(a.getSize()>l)throw new gn("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let m=0;m<4&&a.getSize()<l;++m)a.appendBit(!1);const h=a.getSize()&7;if(h>0)for(let m=h;m<8;m++)a.appendBit(!1);const f=t-a.getSizeInBytes();for(let m=0;m<f;++m)a.appendBits((m&1)===0?236:17,8);if(a.getSize()!==l)throw new gn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,a,l,h,f,m){if(h>=l)throw new gn("Block ID too large");const w=t%l,C=l-w,_=Math.floor(t/l),R=_+1,M=Math.floor(a/l),$=M+1,Q=_-M,he=R-$;if(Q!==he)throw new gn("EC bytes mismatch");if(l!==C+w)throw new gn("RS blocks mismatch");if(t!==(M+Q)*C+($+he)*w)throw new gn("Total bytes mismatch");h<C?(f[0]=M,m[0]=Q):(f[0]=$,m[0]=he)}static interleaveWithECBytes(t,a,l,h){if(t.getSizeInBytes()!==l)throw new gn("Number of bits and data bytes does not match");let f=0,m=0,w=0;const C=new Array;for(let R=0;R<h;++R){const M=new Int32Array(1),$=new Int32Array(1);wn.getNumDataBytesAndNumECBytesForBlockID(a,l,h,R,M,$);const Q=M[0],he=new Uint8Array(Q);t.toBytes(8*f,he,0,Q);const me=wn.generateECBytes(he,$[0]);C.push(new Zu(he,me)),m=Math.max(m,Q),w=Math.max(w,me.length),f+=M[0]}if(l!==f)throw new gn("Data bytes does not match offset");const _=new G;for(let R=0;R<m;++R)for(const M of C){const $=M.getDataBytes();R<$.length&&_.appendBits($[R],8)}for(let R=0;R<w;++R)for(const M of C){const $=M.getErrorCorrectionBytes();R<$.length&&_.appendBits($[R],8)}if(a!==_.getSizeInBytes())throw new gn("Interleaving error: "+a+" and "+_.getSizeInBytes()+" differ.");return _}static generateECBytes(t,a){const l=t.length,h=new Int32Array(l+a);for(let m=0;m<l;m++)h[m]=t[m]&255;new Ll(Ze.QR_CODE_FIELD_256).encode(h,a);const f=new Uint8Array(a);for(let m=0;m<a;m++)f[m]=h[l+m];return f}static appendModeInfo(t,a){a.appendBits(t.getBits(),4)}static appendLengthInfo(t,a,l,h){const f=l.getCharacterCountBits(a);if(t>=1<<f)throw new gn(t+" is bigger than "+((1<<f)-1));h.appendBits(t,f)}static appendBytes(t,a,l,h){switch(a){case Et.NUMERIC:wn.appendNumericBytes(t,l);break;case Et.ALPHANUMERIC:wn.appendAlphanumericBytes(t,l);break;case Et.BYTE:wn.append8BitBytes(t,l,h);break;case Et.KANJI:wn.appendKanjiBytes(t,l);break;default:throw new gn("Invalid mode: "+a)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const a=wn.getDigit(t);return a>=0&&a<=9}static appendNumericBytes(t,a){const l=t.length;let h=0;for(;h<l;){const f=wn.getDigit(t.charAt(h));if(h+2<l){const m=wn.getDigit(t.charAt(h+1)),w=wn.getDigit(t.charAt(h+2));a.appendBits(f*100+m*10+w,10),h+=3}else if(h+1<l){const m=wn.getDigit(t.charAt(h+1));a.appendBits(f*10+m,7),h+=2}else a.appendBits(f,4),h++}}static appendAlphanumericBytes(t,a){const l=t.length;let h=0;for(;h<l;){const f=wn.getAlphanumericCode(t.charCodeAt(h));if(f===-1)throw new gn;if(h+1<l){const m=wn.getAlphanumericCode(t.charCodeAt(h+1));if(m===-1)throw new gn;a.appendBits(f*45+m,11),h+=2}else a.appendBits(f,6),h++}}static append8BitBytes(t,a,l){let h;try{h=oe.encode(t,l)}catch(f){throw new gn(f)}for(let f=0,m=h.length;f!==m;f++){const w=h[f];a.appendBits(w,8)}}static appendKanjiBytes(t,a){let l;try{l=oe.encode(t,ne.SJIS)}catch(f){throw new gn(f)}const h=l.length;for(let f=0;f<h;f+=2){const m=l[f]&255,w=l[f+1]&255,C=m<<8&4294967295|w;let _=-1;if(C>=33088&&C<=40956?_=C-33088:C>=57408&&C<=60351&&(_=C-49472),_===-1)throw new gn("Invalid byte sequence");const R=(_>>8)*192+(_&255);a.appendBits(R,13)}}static appendECI(t,a){a.appendBits(Et.ECI.getBits(),4),a.appendBits(t.getValue(),8)}}wn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),wn.DEFAULT_BYTE_MODE_ENCODING=ne.UTF8.getName();class Ti{write(t,a,l,h=null){if(t.length===0)throw new E("Found empty contents");if(a<0||l<0)throw new E("Requested dimensions are too small: "+a+"x"+l);let f=fn.L,m=Ti.QUIET_ZONE_SIZE;h!==null&&(h.get(er.ERROR_CORRECTION)!==void 0&&(f=fn.fromString(h.get(er.ERROR_CORRECTION).toString())),h.get(er.MARGIN)!==void 0&&(m=Number.parseInt(h.get(er.MARGIN).toString(),10)));const w=wn.encode(t,f,h);return this.renderResult(w,a,l,m)}writeToDom(t,a,l,h,f=null){typeof t=="string"&&(t=document.querySelector(t));const m=this.write(a,l,h,f);t&&t.appendChild(m)}renderResult(t,a,l,h){const f=t.getMatrix();if(f===null)throw new Me;const m=f.getWidth(),w=f.getHeight(),C=m+h*2,_=w+h*2,R=Math.max(a,C),M=Math.max(l,_),$=Math.min(Math.floor(R/C),Math.floor(M/_)),Q=Math.floor((R-m*$)/2),he=Math.floor((M-w*$)/2),me=this.createSVGElement(R,M);for(let ve=0,je=he;ve<w;ve++,je+=$)for(let Ge=0,Xe=Q;Ge<m;Ge++,Xe+=$)if(f.get(Ge,ve)===1){const ze=this.createSvgRectElement(Xe,je,$,$);me.appendChild(ze)}return me}createSVGElement(t,a){const l=document.createElementNS(Ti.SVG_NS,"svg");return l.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(t,a,l,h){const f=document.createElementNS(Ti.SVG_NS,"rect");return f.setAttributeNS(null,"x",t.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}Ti.QUIET_ZONE_SIZE=4,Ti.SVG_NS="http://www.w3.org/2000/svg";class ea{encode(t,a,l,h,f){if(t.length===0)throw new E("Found empty contents");if(a!==Y.QR_CODE)throw new E("Can only encode QR_CODE, but got "+a);if(l<0||h<0)throw new E(`Requested dimensions are too small: ${l}x${h}`);let m=fn.L,w=ea.QUIET_ZONE_SIZE;f!==null&&(f.get(er.ERROR_CORRECTION)!==void 0&&(m=fn.fromString(f.get(er.ERROR_CORRECTION).toString())),f.get(er.MARGIN)!==void 0&&(w=Number.parseInt(f.get(er.MARGIN).toString(),10)));const C=wn.encode(t,m,f);return ea.renderResult(C,l,h,w)}static renderResult(t,a,l,h){const f=t.getMatrix();if(f===null)throw new Me;const m=f.getWidth(),w=f.getHeight(),C=m+h*2,_=w+h*2,R=Math.max(a,C),M=Math.max(l,_),$=Math.min(Math.floor(R/C),Math.floor(M/_)),Q=Math.floor((R-m*$)/2),he=Math.floor((M-w*$)/2),me=new de(R,M);for(let ve=0,je=he;ve<w;ve++,je+=$)for(let Ge=0,Xe=Q;Ge<m;Ge++,Xe+=$)f.get(Ge,ve)===1&&me.setRegion(Xe,je,$,$);return me}}ea.QUIET_ZONE_SIZE=4;class Qu{encode(t,a,l,h,f){let m;switch(a){case Y.QR_CODE:m=new ea;break;default:throw new E("No encoder available for format "+a)}return m.encode(t,a,l,h,f)}}class Ts extends z{constructor(t,a,l,h,f,m,w,C){if(super(m,w),this.yuvData=t,this.dataWidth=a,this.dataHeight=l,this.left=h,this.top=f,h+m>a||f+w>l)throw new E("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(m,w)}getRow(t,a){if(t<0||t>=this.getHeight())throw new E("Requested row is outside the image: "+t);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(t+this.top)*this.dataWidth+this.left;return k.arraycopy(this.yuvData,h,a,0,l),a}getMatrix(){const t=this.getWidth(),a=this.getHeight();if(t===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=t*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return k.arraycopy(this.yuvData,f,h,0,l),h;for(let m=0;m<a;m++){const w=m*t;k.arraycopy(this.yuvData,f,h,w,t),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(t,a,l,h){return new Ts(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+a,l,h,!1)}renderThumbnail(){const t=this.getWidth()/Ts.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Ts.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(t*a),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<a;m++){const w=m*t;for(let C=0;C<t;C++){const _=h[f+C*Ts.THUMBNAIL_SCALE_FACTOR]&255;l[w+C]=4278190080|_*65793}f+=this.dataWidth*Ts.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Ts.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ts.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,a){const l=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<a;h++,f+=this.dataWidth){const m=f+t/2;for(let w=f,C=f+t-1;w<m;w++,C--){const _=l[w];l[w]=l[C],l[C]=_}}}invert(){return new ue(this)}}Ts.THUMBNAIL_SCALE_FACTOR=2;class $a extends z{constructor(t,a,l,h,f,m,w){if(super(a,l),this.dataWidth=h,this.dataHeight=f,this.left=m,this.top=w,t.BYTES_PER_ELEMENT===4){const C=a*l,_=new Uint8ClampedArray(C);for(let R=0;R<C;R++){const M=t[R],$=M>>16&255,Q=M>>7&510,he=M&255;_[R]=($+Q+he)/4&255}this.luminances=_}else this.luminances=t;if(h===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),w===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(t,a){if(t<0||t>=this.getHeight())throw new E("Requested row is outside the image: "+t);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(t+this.top)*this.dataWidth+this.left;return k.arraycopy(this.luminances,h,a,0,l),a}getMatrix(){const t=this.getWidth(),a=this.getHeight();if(t===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=t*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return k.arraycopy(this.luminances,f,h,0,l),h;for(let m=0;m<a;m++){const w=m*t;k.arraycopy(this.luminances,f,h,w,t),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(t,a,l,h){return new $a(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+t,this.top+a)}invert(){return new ue(this)}}class Uc extends ne{static forName(t){return this.getCharacterSetECIByName(t)}}class Bl{}Bl.ISO_8859_1=ne.ISO8859_1;class zc{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Fl{static singletonList(t){return[t]}static min(t,a){return t.sort(a)[0]}}class Ju{constructor(t){this.previous=t}getPrevious(){return this.previous}}class ta extends Ju{constructor(t,a,l){super(t),this.value=a,this.bitCount=l}appendTo(t,a){t.appendBits(this.value,this.bitCount)}add(t,a){return new ta(this,t,a)}addBinaryShift(t,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ta(this,t,a)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+B.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Ul extends ta{constructor(t,a,l){super(t,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(t,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):l===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(t,a){return new Ul(this,t,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function eh(D,t,a){return new Ul(D,t,a)}function Va(D,t,a){return new ta(D,t,a)}const th=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],di=0,na=1,yr=2,$c=3,fs=4,Vc=new ta(null,0,0),ko=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Wc(D){for(let t of D)U.fill(t,-1);return D[di][fs]=0,D[na][fs]=0,D[na][di]=28,D[$c][fs]=0,D[yr][fs]=0,D[yr][di]=15,D}const zl=Wc(U.createInt32Array(6,6));class _r{constructor(t,a,l,h){this.token=t,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,a){let l=this.bitCount,h=this.token;if(t!==this.mode){let m=ko[this.mode][t];h=Va(h,m&65535,m>>16),l+=m>>16}let f=t===yr?4:5;return h=Va(h,a,f),new _r(h,t,0,l+f)}shiftAndAppend(t,a){let l=this.token,h=this.mode===yr?4:5;return l=Va(l,zl[this.mode][t],h),l=Va(l,a,5),new _r(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(t){let a=this.token,l=this.mode,h=this.bitCount;if(this.mode===fs||this.mode===yr){let w=ko[l][di];a=Va(a,w&65535,w>>16),h+=w>>16,l=di}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new _r(a,l,this.binaryShiftByteCount+1,h+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(t+1)),m}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=eh(a,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new _r(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let a=this.bitCount+(ko[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?a+=_r.calculateBinaryShiftCost(t)-_r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(a+=10),a<=t.bitCount}toBitArray(t){let a=[];for(let h=this.endBinaryShift(t.length).token;h!==null;h=h.getPrevious())a.unshift(h);let l=new G;for(const h of a)h.appendTo(l,t);return l}toString(){return H.format("%s bits=%d bytes=%d",th[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}_r.INITIAL_STATE=new _r(Vc,di,0,0);function nh(D){const t=H.getCharCode(" "),a=H.getCharCode("."),l=H.getCharCode(",");D[di][t]=1;const h=H.getCharCode("Z"),f=H.getCharCode("A");for(let $=f;$<=h;$++)D[di][$]=$-f+2;D[na][t]=1;const m=H.getCharCode("z"),w=H.getCharCode("a");for(let $=w;$<=m;$++)D[na][$]=$-w+2;D[yr][t]=1;const C=H.getCharCode("9"),_=H.getCharCode("0");for(let $=_;$<=C;$++)D[yr][$]=$-_+2;D[yr][l]=12,D[yr][a]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let $=0;$<R.length;$++)D[$c][H.getCharCode(R[$])]=$;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let $=0;$<M.length;$++)H.getCharCode(M[$])>0&&(D[fs][H.getCharCode(M[$])]=$);return D}const $l=nh(U.createInt32Array(5,256));class Wa{constructor(t){this.text=t}encode(){const t=H.getCharCode(" "),a=H.getCharCode(`
`);let l=Fl.singletonList(_r.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,w=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case H.getCharCode("\r"):m=w===a?2:0;break;case H.getCharCode("."):m=w===t?3:0;break;case H.getCharCode(","):m=w===t?4:0;break;case H.getCharCode(":"):m=w===t?5:0;break;default:m=0}m>0?(l=Wa.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return Fl.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,a){const l=[];for(let h of t)this.updateStateForChar(h,a,l);return Wa.simplifyStates(l)}updateStateForChar(t,a,l){let h=this.text[a]&255,f=$l[t.getMode()][h]>0,m=null;for(let w=0;w<=fs;w++){let C=$l[w][h];if(C>0){if(m==null&&(m=t.endBinaryShift(a)),!f||w===t.getMode()||w===yr){const _=m.latchAndAppend(w,C);l.push(_)}if(!f&&zl[t.getMode()][w]>=0){const _=m.shiftAndAppend(w,C);l.push(_)}}}if(t.getBinaryShiftByteCount()>0||$l[t.getMode()][h]===0){let w=t.addBinaryShiftChar(a);l.push(w)}}static updateStateListForPair(t,a,l){const h=[];for(let f of t)this.updateStateForPair(f,a,l,h);return this.simplifyStates(h)}static updateStateForPair(t,a,l,h){let f=t.endBinaryShift(a);if(h.push(f.latchAndAppend(fs,l)),t.getMode()!==fs&&h.push(f.shiftAndAppend(fs,l)),l===3||l===4){let m=f.latchAndAppend(yr,16-l).latchAndAppend(yr,1);h.push(m)}if(t.getBinaryShiftByteCount()>0){let m=t.addBinaryShiftChar(a).addBinaryShiftChar(a+1);h.push(m)}}static simplifyStates(t){let a=[];for(const l of t){let h=!0;for(const f of a){if(f.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(f)&&(a=a.filter(m=>m!==f))}h&&a.push(l)}return a}}class tn{constructor(){}static encodeBytes(t){return tn.encode(t,tn.DEFAULT_EC_PERCENT,tn.DEFAULT_AZTEC_LAYERS)}static encode(t,a,l){let h=new Wa(t).encode(),f=B.truncDivision(h.getSize()*a,100)+11,m=h.getSize()+f,w,C,_,R,M;if(l!==tn.DEFAULT_AZTEC_LAYERS){if(w=l<0,C=Math.abs(l),C>(w?tn.MAX_NB_BITS_COMPACT:tn.MAX_NB_BITS))throw new E(H.format("Illegal value %s for layers",l));_=tn.totalBitsInLayer(C,w),R=tn.WORD_SIZE[C];let ze=_-_%R;if(M=tn.stuffBits(h,R),M.getSize()+f>ze)throw new E("Data to large for user specified layer");if(w&&M.getSize()>R*64)throw new E("Data to large for user specified layer")}else{R=0,M=null;for(let ze=0;;ze++){if(ze>tn.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(w=ze<=3,C=w?ze+1:ze,_=tn.totalBitsInLayer(C,w),m>_)continue;(M==null||R!==tn.WORD_SIZE[C])&&(R=tn.WORD_SIZE[C],M=tn.stuffBits(h,R));let Zt=_-_%R;if(!(w&&M.getSize()>R*64)&&M.getSize()+f<=Zt)break}}let $=tn.generateCheckWords(M,_,R),Q=M.getSize()/R,he=tn.generateModeMessage(w,C,Q),me=(w?11:14)+C*4,ve=new Int32Array(me),je;if(w){je=me;for(let ze=0;ze<ve.length;ze++)ve[ze]=ze}else{je=me+1+2*B.truncDivision(B.truncDivision(me,2)-1,15);let ze=B.truncDivision(me,2),Zt=B.truncDivision(je,2);for(let Ft=0;Ft<ze;Ft++){let Mr=Ft+B.truncDivision(Ft,15);ve[ze-Ft-1]=Zt-Mr-1,ve[ze+Ft]=Zt+Mr+1}}let Ge=new de(je);for(let ze=0,Zt=0;ze<C;ze++){let Ft=(C-ze)*4+(w?9:12);for(let Mr=0;Mr<Ft;Mr++){let ms=Mr*2;for(let tr=0;tr<2;tr++)$.get(Zt+ms+tr)&&Ge.set(ve[ze*2+tr],ve[ze*2+Mr]),$.get(Zt+Ft*2+ms+tr)&&Ge.set(ve[ze*2+Mr],ve[me-1-ze*2-tr]),$.get(Zt+Ft*4+ms+tr)&&Ge.set(ve[me-1-ze*2-tr],ve[me-1-ze*2-Mr]),$.get(Zt+Ft*6+ms+tr)&&Ge.set(ve[me-1-ze*2-Mr],ve[ze*2+tr])}Zt+=Ft*8}if(tn.drawModeMessage(Ge,w,je,he),w)tn.drawBullsEye(Ge,B.truncDivision(je,2),5);else{tn.drawBullsEye(Ge,B.truncDivision(je,2),7);for(let ze=0,Zt=0;ze<B.truncDivision(me,2)-1;ze+=15,Zt+=16)for(let Ft=B.truncDivision(je,2)&1;Ft<je;Ft+=2)Ge.set(B.truncDivision(je,2)-Zt,Ft),Ge.set(B.truncDivision(je,2)+Zt,Ft),Ge.set(Ft,B.truncDivision(je,2)-Zt),Ge.set(Ft,B.truncDivision(je,2)+Zt)}let Xe=new zc;return Xe.setCompact(w),Xe.setSize(je),Xe.setLayers(C),Xe.setCodeWords(Q),Xe.setMatrix(Ge),Xe}static drawBullsEye(t,a,l){for(let h=0;h<l;h+=2)for(let f=a-h;f<=a+h;f++)t.set(f,a-h),t.set(f,a+h),t.set(a-h,f),t.set(a+h,f);t.set(a-l,a-l),t.set(a-l+1,a-l),t.set(a-l,a-l+1),t.set(a+l,a-l),t.set(a+l,a-l+1),t.set(a+l,a+l-1)}static generateModeMessage(t,a,l){let h=new G;return t?(h.appendBits(a-1,2),h.appendBits(l-1,6),h=tn.generateCheckWords(h,28,4)):(h.appendBits(a-1,5),h.appendBits(l-1,11),h=tn.generateCheckWords(h,40,4)),h}static drawModeMessage(t,a,l,h){let f=B.truncDivision(l,2);if(a)for(let m=0;m<7;m++){let w=f-3+m;h.get(m)&&t.set(w,f-5),h.get(m+7)&&t.set(f+5,w),h.get(20-m)&&t.set(w,f+5),h.get(27-m)&&t.set(f-5,w)}else for(let m=0;m<10;m++){let w=f-5+m+B.truncDivision(m,5);h.get(m)&&t.set(w,f-7),h.get(m+10)&&t.set(f+7,w),h.get(29-m)&&t.set(w,f+7),h.get(39-m)&&t.set(f-7,w)}}static generateCheckWords(t,a,l){let h=t.getSize()/l,f=new Ll(tn.getGF(l)),m=B.truncDivision(a,l),w=tn.bitsToWords(t,l,m);f.encode(w,m-h);let C=a%l,_=new G;_.appendBits(0,C);for(const R of Array.from(w))_.appendBits(R,l);return _}static bitsToWords(t,a,l){let h=new Int32Array(l),f,m;for(f=0,m=t.getSize()/a;f<m;f++){let w=0;for(let C=0;C<a;C++)w|=t.get(f*a+C)?1<<a-C-1:0;h[f]=w}return h}static getGF(t){switch(t){case 4:return Ze.AZTEC_PARAM;case 6:return Ze.AZTEC_DATA_6;case 8:return Ze.AZTEC_DATA_8;case 10:return Ze.AZTEC_DATA_10;case 12:return Ze.AZTEC_DATA_12;default:throw new E("Unsupported word size "+t)}}static stuffBits(t,a){let l=new G,h=t.getSize(),f=(1<<a)-2;for(let m=0;m<h;m+=a){let w=0;for(let C=0;C<a;C++)(m+C>=h||t.get(m+C))&&(w|=1<<a-1-C);(w&f)===f?(l.appendBits(w&f,a),m--):(w&f)===0?(l.appendBits(w|1,a),m--):l.appendBits(w,a)}return l}static totalBitsInLayer(t,a){return((a?88:112)+16*t)*t}}tn.DEFAULT_EC_PERCENT=33,tn.DEFAULT_AZTEC_LAYERS=0,tn.MAX_NB_BITS=32,tn.MAX_NB_BITS_COMPACT=4,tn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ha{encode(t,a,l,h){return this.encodeWithHints(t,a,l,h,null)}encodeWithHints(t,a,l,h,f){let m=Bl.ISO_8859_1,w=tn.DEFAULT_EC_PERCENT,C=tn.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(er.CHARACTER_SET)&&(m=Uc.forName(f.get(er.CHARACTER_SET).toString())),f.has(er.ERROR_CORRECTION)&&(w=B.parseInt(f.get(er.ERROR_CORRECTION).toString())),f.has(er.AZTEC_LAYERS)&&(C=B.parseInt(f.get(er.AZTEC_LAYERS).toString()))),Ha.encodeLayers(t,a,l,h,m,w,C)}static encodeLayers(t,a,l,h,f,m,w){if(a!==Y.AZTEC)throw new E("Can only encode AZTEC, but got "+a);let C=tn.encode(H.getBytes(t,f),m,w);return Ha.renderResult(C,l,h)}static renderResult(t,a,l){let h=t.getMatrix();if(h==null)throw new Me;let f=h.getWidth(),m=h.getHeight(),w=Math.max(a,f),C=Math.max(l,m),_=Math.min(w/f,C/m),R=(w-f*_)/2,M=(C-m*_)/2,$=new de(w,C);for(let Q=0,he=M;Q<m;Q++,he+=_)for(let me=0,ve=R;me<f;me++,ve+=_)h.get(me,Q)&&$.setRegion(ve,he,_,_);return $}}n.AbstractExpandedDecoder=Ma,n.ArgumentException=S,n.ArithmeticException=ut,n.AztecCode=zc,n.AztecCodeReader=yn,n.AztecCodeWriter=Ha,n.AztecDecoder=Te,n.AztecDetector=Hn,n.AztecDetectorResult=Mt,n.AztecEncoder=tn,n.AztecHighLevelEncoder=Wa,n.AztecPoint=qt,n.BarcodeFormat=Y,n.Binarizer=O,n.BinaryBitmap=T,n.BitArray=G,n.BitMatrix=de,n.BitSource=us,n.BrowserAztecCodeReader=Ns,n.BrowserBarcodeReader=vt,n.BrowserCodeReader=Ie,n.BrowserDatamatrixCodeReader=Ku,n.BrowserMultiFormatReader=za,n.BrowserPDF417Reader=To,n.BrowserQRCodeReader=Fc,n.BrowserQRCodeSvgWriter=Ti,n.CharacterSetECI=ne,n.ChecksumException=I,n.Code128Reader=Je,n.Code39Reader=pn,n.DataMatrixDecodedBitStreamParser=cr,n.DataMatrixReader=qr,n.DecodeHintType=se,n.DecoderResult=De,n.DefaultGridSampler=it,n.DetectorResult=Pt,n.EAN13Reader=Kt,n.EncodeHintType=er,n.Exception=y,n.FormatException=V,n.GenericGF=Ze,n.GenericGFPoly=We,n.GlobalHistogramBinarizer=q,n.GridSampler=kr,n.GridSamplerInstance=Gt,n.HTMLCanvasElementLuminanceSource=be,n.HybridBinarizer=ie,n.ITFReader=en,n.IllegalArgumentException=E,n.IllegalStateException=Me,n.InvertedLuminanceSource=ue,n.LuminanceSource=z,n.MathUtils=Be,n.MultiFormatOneDReader=et,n.MultiFormatReader=Io,n.MultiFormatWriter=Qu,n.NotFoundException=X,n.OneDReader=vn,n.PDF417DecodedBitStreamParser=Re,n.PDF417DecoderErrorCorrection=Ol,n.PDF417Reader=fr,n.PDF417ResultMetadata=Ao,n.PerspectiveTransform=Vt,n.PlanarYUVLuminanceSource=Ts,n.QRCodeByteMatrix=Ro,n.QRCodeDataMask=Xt,n.QRCodeDecodedBitStreamParser=Sn,n.QRCodeDecoderErrorCorrectionLevel=fn,n.QRCodeDecoderFormatInformation=dr,n.QRCodeEncoder=wn,n.QRCodeEncoderQRCode=Ii,n.QRCodeMaskUtil=_n,n.QRCodeMatrixUtil=Nt,n.QRCodeMode=Et,n.QRCodeReader=Sr,n.QRCodeVersion=bt,n.QRCodeWriter=ea,n.RGBLuminanceSource=$a,n.RSS14Reader=qe,n.RSSExpandedReader=ge,n.ReaderException=Ji,n.ReedSolomonDecoder=at,n.ReedSolomonEncoder=Ll,n.ReedSolomonException=Ot,n.Result=Oe,n.ResultMetadataType=Ce,n.ResultPoint=Ue,n.StringUtils=H,n.UnsupportedOperationException=ce,n.VideoInputDevice=re,n.WhiteRectangleDetector=Yt,n.WriterException=gn,n.ZXingArrays=U,n.ZXingCharset=Uc,n.ZXingInteger=B,n.ZXingStandardCharsets=Bl,n.ZXingStringBuilder=W,n.ZXingStringEncoding=oe,n.ZXingSystem=k,n.createAbstractExpandedDecoder=J,Object.defineProperty(n,"__esModule",{value:!0})}))})(pc,pc.exports)),pc.exports}var On=Q8();const J8=Ac(On),eR=K0({__proto__:null,default:J8},[On]);var $x=(function(){function r(e,n,o){if(this.formatMap=new Map([[ct.QR_CODE,On.BarcodeFormat.QR_CODE],[ct.AZTEC,On.BarcodeFormat.AZTEC],[ct.CODABAR,On.BarcodeFormat.CODABAR],[ct.CODE_39,On.BarcodeFormat.CODE_39],[ct.CODE_93,On.BarcodeFormat.CODE_93],[ct.CODE_128,On.BarcodeFormat.CODE_128],[ct.DATA_MATRIX,On.BarcodeFormat.DATA_MATRIX],[ct.MAXICODE,On.BarcodeFormat.MAXICODE],[ct.ITF,On.BarcodeFormat.ITF],[ct.EAN_13,On.BarcodeFormat.EAN_13],[ct.EAN_8,On.BarcodeFormat.EAN_8],[ct.PDF_417,On.BarcodeFormat.PDF_417],[ct.RSS_14,On.BarcodeFormat.RSS_14],[ct.RSS_EXPANDED,On.BarcodeFormat.RSS_EXPANDED],[ct.UPC_A,On.BarcodeFormat.UPC_A],[ct.UPC_E,On.BarcodeFormat.UPC_E],[ct.UPC_EAN_EXTENSION,On.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!eR)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var d=this.createZXingFormats(e),u=new Map;u.set(On.DecodeHintType.POSSIBLE_FORMATS,d),u.set(On.DecodeHintType.TRY_HARDER,!1),this.hints=u}return r.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,d){try{o(n.decode(e))}catch(u){d(u)}})},r.prototype.decode=function(e){var n=new On.MultiFormatReader(this.verbose,this.hints),o=new On.HTMLCanvasElementLuminanceSource(e),d=new On.BinaryBitmap(new On.HybridBinarizer(o)),u=n.decode(d);return{text:u.text,format:K2.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,d){e.set(n,o)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var n=[],o=0,d=e;o<d.length;o++){var u=d[o];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),tR=function(r,e,n,o){function d(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function x(S){try{y(o.next(S))}catch(E){g(E)}}function v(S){try{y(o.throw(S))}catch(E){g(E)}}function y(S){S.done?u(S.value):d(S.value).then(x,v)}y((o=o.apply(r,e||[])).next())})},nR=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,d,u,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(y){return function(S){return v([y,S])}}function v(y){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(o=1,d&&(u=y[0]&2?d.return:y[0]?d.throw||((u=d.return)&&u.call(d),0):d.next)&&!(u=u.call(d,y[1])).done)return u;switch(d=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,d=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(S){y=[6,S],d=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Vx=(function(){function r(e,n,o){if(this.formatMap=new Map([[ct.QR_CODE,"qr_code"],[ct.AZTEC,"aztec"],[ct.CODABAR,"codabar"],[ct.CODE_39,"code_39"],[ct.CODE_93,"code_93"],[ct.CODE_128,"code_128"],[ct.DATA_MATRIX,"data_matrix"],[ct.ITF,"itf"],[ct.EAN_13,"ean_13"],[ct.EAN_8,"ean_8"],[ct.PDF_417,"pdf417"],[ct.UPC_A,"upc_a"],[ct.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var d=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(d),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return tR(this,void 0,void 0,function(){var n,o;return nR(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=d.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:K2.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,d=0,u=e;d<u.length;d++){var g=u[d],x=g.boundingBox.width*g.boundingBox.height;x>o&&(o=x,n=g)}if(!n)throw"No largest barcode found";return n},r.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,d=e;o<d.length;o++){var u=d[o];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,d){e.set(n,o)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),Wx=function(r,e,n,o){function d(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function x(S){try{y(o.next(S))}catch(E){g(E)}}function v(S){try{y(o.throw(S))}catch(E){g(E)}}function y(S){S.done?u(S.value):d(S.value).then(x,v)}y((o=o.apply(r,e||[])).next())})},Hx=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,d,u,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(y){return function(S){return v([y,S])}}function v(y){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(o=1,d&&(u=y[0]&2?d.return:y[0]?d.throw||((u=d.return)&&u.call(d),0):d.next)&&!(u=u.call(d,y[1])).done)return u;switch(d=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,d=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(S){y=[6,S],d=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},rR=(function(){function r(e,n,o,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&Vx.isSupported()?(this.primaryDecoder=new Vx(e,o,d),this.secondaryDecoder=new $x(e,o,d)):this.primaryDecoder=new $x(e,o,d)}return r.prototype.decodeAsync=function(e){return Wx(this,void 0,void 0,function(){var n;return Hx(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return Wx(this,void 0,void 0,function(){var n,o;return Hx(this,function(d){switch(d.label){case 0:n=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,d.sent()];case 3:if(o=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var d=o[n];e+=d}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),Fm=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(o[u]=d[u])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Su=function(r,e,n,o){function d(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function x(S){try{y(o.next(S))}catch(E){g(E)}}function v(S){try{y(o.throw(S))}catch(E){g(E)}}function y(S){S.done?u(S.value):d(S.value).then(x,v)}y((o=o.apply(r,e||[])).next())})},_u=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,d,u,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(y){return function(S){return v([y,S])}}function v(y){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(o=1,d&&(u=y[0]&2?d.return:y[0]?d.throw||((u=d.return)&&u.call(d),0):d.next)&&!(u=u.call(d,y[1])).done)return u;switch(d=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,d=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(S){y=[6,S],d=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Q2=(function(){function r(e,n){this.name=e,this.track=n}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},r})(),sR=(function(r){Fm(e,r);function e(n,o){return r.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var d={advanced:[o]};return this.track.applyConstraints(d)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Q2),iR=(function(r){Fm(e,r);function e(n){return r.call(this,"zoom",n)||this}return e})(sR),aR=(function(r){Fm(e,r);function e(n){return r.call(this,"torch",n)||this}return e})(Q2),oR=(function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new iR(this.track)},r.prototype.torchFeature=function(){return new aR(this.track)},r})(),lR=(function(){function r(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,d=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,d),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,n,o,d){return Su(this,void 0,void 0,function(){var u,g;return _u(this,function(x){switch(x.label){case 0:return u=new r(e,n,d),o.aspectRatio?(g={aspectRatio:o.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:x.sent(),x.label=2;case 2:return u.setupSurface(),[2,u]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return Su(this,void 0,void 0,function(){return _u(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var d=e.mediaStream.getVideoTracks(),u=d.length,g=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++g,g>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},r.prototype.getCapabilities=function(){return new oR(this.getFirstTrackOrFail())},r})(),cR=(function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,n,o){return Su(this,void 0,void 0,function(){return _u(this,function(d){return[2,lR.create(e,this.mediaStream,n,o)]})})},r.create=function(e){return Su(this,void 0,void 0,function(){var n,o;return _u(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=d.sent(),[2,new r(o)]}})})},r})(),Gx=function(r,e,n,o){function d(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function x(S){try{y(o.next(S))}catch(E){g(E)}}function v(S){try{y(o.throw(S))}catch(E){g(E)}}function y(S){S.done?u(S.value):d(S.value).then(x,v)}y((o=o.apply(r,e||[])).next())})},qx=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,d,u,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(y){return function(S){return v([y,S])}}function v(y){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(o=1,d&&(u=y[0]&2?d.return:y[0]?d.throw||((u=d.return)&&u.call(d),0):d.next)&&!(u=u.call(d,y[1])).done)return u;switch(d=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,d=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(S){y=[6,S],d=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},dR=(function(){function r(){}return r.failIfNotSupported=function(){return Gx(this,void 0,void 0,function(){return qx(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return Gx(this,void 0,void 0,function(){return qx(this,function(n){return[2,cR.create(e)]})})},r})(),uR=function(r,e,n,o){function d(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function x(S){try{y(o.next(S))}catch(E){g(E)}}function v(S){try{y(o.throw(S))}catch(E){g(E)}}function y(S){S.done?u(S.value):d(S.value).then(x,v)}y((o=o.apply(r,e||[])).next())})},hR=function(r,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,d,u,g;return g={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function x(y){return function(S){return v([y,S])}}function v(y){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,y[0]&&(n=0)),n;)try{if(o=1,d&&(u=y[0]&2?d.return:y[0]?d.throw||((u=d.return)&&u.call(d),0):d.next)&&!(u=u.call(d,y[1])).done)return u;switch(d=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,d=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){n.label=y[1];break}if(y[0]===6&&n.label<u[1]){n.label=u[1],u=y;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(y);break}u[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(r,n)}catch(S){y=[6,S],d=0}finally{o=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},fR=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=cl.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=cl.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return uR(this,void 0,void 0,function(){var e,n,o,d,u,g,x;return hR(this,function(v){switch(v.label){case 0:return e=function(y){for(var S=y.getVideoTracks(),E=0,T=S;E<T.length;E++){var I=T[E];I.enabled=!1,I.stop(),y.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=v.sent(),d=[],u=0,g=o;u<g.length;u++)x=g[u],x.kind==="videoinput"&&d.push({id:x.deviceId,label:x.label});return e(n),[2,d]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(u){for(var g=[],x=0,v=u;x<v.length;x++){var y=v[x];y.kind==="video"&&g.push({id:y.id,label:y.label})}e(g)},d=MediaStreamTrack;d.getSources(o)})},r})(),Kn;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(Kn||(Kn={}));var mR=(function(){function r(){this.state=Kn.NOT_STARTED,this.onGoingTransactionNewState=Kn.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===Kn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Kn.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===Kn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Kn.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Kn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case Kn.UNKNOWN:throw"Transition from unknown is not allowed";case Kn.NOT_STARTED:this.failIfNewStateIs(e,[Kn.PAUSED]);break;case Kn.SCANNING:break;case Kn.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,n){for(var o=0,d=n;o<d.length;o++){var u=d[o];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r})(),pR=(function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===Kn.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==Kn.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Kn.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===Kn.PAUSED},r})(),gR=(function(){function r(){}return r.create=function(){return new pR(new mR)},r})(),xR=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(o[u]=d[u])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),ws=(function(r){xR(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(X8),wR=(function(){function r(e,n){this.logger=n,this.fps=ws.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ws.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Z2.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!zi(this.qrbox)},r.create=function(e,n){return new r(e,n)},r})(),yR=(function(){function r(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new K8(this.verbose),this.qrcode=new rR(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=gR.create()}return r.prototype.start=function(e,n,o,d){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;d?g=d:g=this.verbose?this.logger.log:function(){};var x=wR.create(n,this.logger);this.clearElement();var v=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=v,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:ws.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var E=this,T=this.stateManagerProxy.startTransition(Kn.SCANNING);return new Promise(function(I,O){var k=y?x.videoConstraints:E.createVideoConstraints(e);if(!k){T.cancel(),O("videoConstraints should be defined");return}var P={};(!y||x.aspectRatio)&&(P.aspectRatio=x.aspectRatio);var L={onRenderSurfaceReady:function(U,B){E.setupUi(U,B,x),E.isScanning=!0,E.foreverScan(x,o,g)}};dR.failIfNotSupported().then(function(U){U.create(k).then(function(B){return B.render(u.element,P,L).then(function(G){E.renderedCamera=G,T.execute(),I(null)}).catch(function(G){T.cancel(),O(G)})}).catch(function(B){T.cancel(),O(cl.errorGettingUserMedia(B))})}).catch(function(U){T.cancel(),O(cl.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Kn.PAUSED),this.showPausedState(),(zi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Kn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Kn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var u=document.getElementById(ws.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),o(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),n.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},r.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(zi(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,u){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var g=new Image;g.onload=function(){var x=g.width,v=g.height,y=document.getElementById(o.elementId),S=y.clientWidth?y.clientWidth:ws.DEFAULT_WIDTH,E=Math.max(y.clientHeight?y.clientHeight:v,ws.FILE_SCAN_MIN_HEIGHT),T=o.computeCanvasDrawConfig(x,v,S,E);if(n){var I=o.createCanvasElement(S,E,"qr-canvas-visible");I.style.display="inline-block",y.appendChild(I);var O=I.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=S,O.canvas.height=E,O.drawImage(g,0,0,x,v,T.x,T.y,T.width,T.height)}var k=ws.FILE_SCAN_HIDDEN_CANVAS_PADDING,P=Math.max(g.width,T.width),L=Math.max(g.height,T.height),U=P+2*k,B=L+2*k,G=o.createCanvasElement(U,B);y.appendChild(G);var ee=G.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=U,ee.canvas.height=B,ee.drawImage(g,0,0,x,v,k,k,P,L);try{o.qrcode.decodeRobustlyAsync(G).then(function(se){d(Ux.createFromQrcodeResult(se))}).catch(u)}catch(se){u("QR code parse error, error = ".concat(se))}},g.onerror=u,g.onabort=u,g.onstalled=u,g.onsuspend=u,g.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return fR.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!Z2.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var n=[ct.QR_CODE,ct.AZTEC,ct.CODABAR,ct.CODE_39,ct.CODE_93,ct.CODE_128,ct.DATA_MATRIX,ct.MAXICODE,ct.ITF,ct.EAN_13,ct.EAN_8,ct.PDF_417,ct.RSS_14,ct.RSS_EXPANDED,ct.UPC_A,ct.UPC_E,ct.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],d=0,u=e.formatsToSupport;d<u.length;d++){var g=u[d];q8(g)?o.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(zi(e))return!0;if(!zi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(zi(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return zi(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,n,o){var d=this,u=o.qrbox;this.validateQrboxConfig(u);var g=this.toQrdimensions(e,n,u),x=function(y){if(y<ws.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ws.MIN_QR_BOX_SIZE,"px.")},v=function(y){return y>e&&(d.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=e),y};x(g.width),x(g.height),g.width=v(g.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(d){throw new Error("qrbox config was passed as a function but it failed with unknown error"+d)}return o},r.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var d=zi(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(d);var u=this.toQrdimensions(e,n,d);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=o.isShadedBoxEnabled()&&u.height<=n,x={x:0,y:0,width:e,height:n},v=g?this.getShadedRegionBounds(e,n,u):x,y=this.createCanvasElement(v.width,v.height),S={willReadFrequently:!0},E=y.getContext("2d",S);E.canvas.width=v.width,E.canvas.height=v.height,this.element.append(y),g&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=E,this.canvasElement=y},r.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=cl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},r.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(d){return e(d.text,Ux.createFromQrcodeResult(d)),o.possiblyUpdateShaders(!0),!0}).catch(function(d){o.possiblyUpdateShaders(!1);var u=cl.codeParseError(d);return n(u,Y8.createFrom(u)),!1})},r.prototype.foreverScan=function(e,n,o){var d=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),g=u.videoWidth/u.clientWidth,x=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*g,y=this.qrRegion.height*x,S=this.qrRegion.x*g,E=this.qrRegion.y*x;this.context.drawImage(u,S,E,v,y,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(e,n,o)},d.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(I){!I&&e.disableFlip!==!0?(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(n,o).finally(function(){T()})):T()}).catch(function(I){d.logger.logError("Error happend while scanning context",I),T()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",d={user:!0,environment:!0},u="exact",g=function(O){if(O in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var v=Object.keys(e)[0];if(v!==n&&v!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(v===n){var y=e.facingMode;if(typeof y=="string"){if(g(y))return{facingMode:y}}else if(typeof y=="object")if(u in y){if(g(y["".concat(u)]))return{facingMode:{exact:y["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var S=typeof y;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var E=e.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(u in E)return{deviceId:{exact:E["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var T=typeof E;throw"Invalid type of 'deviceId' = ".concat(T)}}}var I=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},r.prototype.computeCanvasDrawConfig=function(e,n,o,d){if(e<=o&&n<=d){var u=(o-e)/2,g=(d-n)/2;return{x:u,y:g,width:e,height:n}}else{var x=e,v=n;return e>o&&(n=o/e*n,e=o),n>d&&(e=d/n*e,n=d),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(v)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,d)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?ws.BORDER_SHADER_MATCH_COLOR:ws.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,n,o){var d=e,u=n,g=document.createElement("canvas");return g.style.width="".concat(d,"px"),g.style.height="".concat(u,"px"),g.style.display="none",g.id=zi(o)?"qr-canvas":o,g},r.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},r.prototype.possiblyInsertShadingElement=function(e,n,o,d){if(!(n-d.width<1||o-d.height<1)){var u=document.createElement("div");u.style.position="absolute";var g=(n-d.width)/2,x=(o-d.height)/2;if(u.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(ws.SHADED_REGION_ELEMENT_ID),n-d.width<11||o-d.height<11)this.hasBorderShaders=!1;else{var v=5,y=40;this.insertShaderBorders(u,y,v,-v,null,0,!0),this.insertShaderBorders(u,y,v,-v,null,0,!1),this.insertShaderBorders(u,y,v,null,-v,0,!0),this.insertShaderBorders(u,y,v,null,-v,0,!1),this.insertShaderBorders(u,v,y+v,-v,null,-v,!0),this.insertShaderBorders(u,v,y+v,null,-v,-v,!0),this.insertShaderBorders(u,v,y+v,-v,null,-v,!1),this.insertShaderBorders(u,v,y+v,null,-v,-v,!1),this.hasBorderShaders=!0}e.append(u)}},r.prototype.insertShaderBorders=function(e,n,o,d,u,g,x){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=ws.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(n,"px"),v.style.height="".concat(o,"px"),d!==null&&(v.style.top="".concat(d,"px")),u!==null&&(v.style.bottom="".concat(u,"px")),x?v.style.left="".concat(g,"px"):v.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),e.appendChild(v)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r})(),Xx;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Xx||(Xx={}));function vR({agendaId:r}){const[e,n]=A.useState(""),[o,d]=A.useState(!1),[u,g]=A.useState(!1),[x,v]=A.useState(!1),[y,S]=A.useState(null),[E,T]=A.useState(null),[I,O]=A.useState([]),[k,P]=A.useState([]),[L,U]=A.useState([]),[B,G]=A.useState(!0),[ee,se]=A.useState(!1),[V,te]=A.useState(!1),[ne,ce]=A.useState(!1),[oe,H]=A.useState(null),[W,de]=A.useState(!1),[X,q]=A.useState(""),[ie,z]=A.useState(new Date),[ue,be]=A.useState(!1),re=A.useRef(null);A.useEffect(()=>((async()=>{console.log("=".repeat(80)),console.log("[STANDALONE CHECK-IN] Page loaded for agenda ID:",r),console.log("[STANDALONE CHECK-IN] Initializing with strict event isolation..."),console.log("=".repeat(80)),await we(),await Ie()})(),()=>{We()}),[r]),A.useEffect(()=>{y&&Ie()},[y?.id]),A.useEffect(()=>{const Me=Te=>{console.log("[AUTO-REFRESH] Storage event detected:",Te.key),(Te.key==="event_participants"||Te.key==="event_agenda")&&(console.log("[AUTO-REFRESH] Data changed, refreshing with event scope..."),y?.eventId&&console.log("[SECURITY] Auto-refresh scoped to event:",y.eventId),Ie(),Te.key==="event_agenda"&&we())},at=Te=>{console.log("[AUTO-REFRESH] Custom participantsUpdated event detected"),y?.eventId&&console.log("[SECURITY] Custom event refresh scoped to event:",y.eventId),Ie()};window.addEventListener("storage",Me),window.addEventListener("participantsUpdated",at);const Z=setInterval(()=>{console.log("[AUTO-REFRESH] Polling for updates..."),y?.eventId&&console.log("[SECURITY] Poll refresh scoped to event:",y.eventId),Ie()},3e3);return()=>{window.removeEventListener("storage",Me),window.removeEventListener("participantsUpdated",at),clearInterval(Z)}},[y?.eventId]),A.useEffect(()=>{if(y&&I.length>0){const Me=I.filter(at=>at.attendance&&at.attendance.some(Z=>Z.agendaItem===y.title));U(Me)}},[y,I]);const we=async()=>{G(!0);try{console.log("[SECURITY] Fetching agenda item by ID:",r);const{data:Me,error:at}=await Le.from("agenda_items").select("*").eq("id",r).single();if(at||!Me){console.error("[SECURITY] Agenda item not found:",r),H("Agenda item not found");return}if(!Me.eventId){console.error("[SECURITY] CRITICAL: Agenda item missing eventId!",Me),H("Invalid agenda configuration - missing event association");return}console.log("[SECURITY] Agenda item loaded. Event ID:",Me.eventId);const Z={id:Me.id,eventId:Me.eventId,title:Me.title,description:Me.description,startTime:Me.startTime,endTime:Me.endTime,location:Me.location,createdAt:Me.createdAt,order:0};S(Z);const{data:Te,error:Be}=await Le.from("events").select("*").eq("id",Z.eventId).single();if(Te&&!Be){console.log("[SECURITY] Event details loaded:",Te.name);const Rt={id:Te.id,name:Te.name,startDate:Te.startDate,endDate:Te.endDate,location:Te.location,description:Te.description,createdAt:Te.createdAt,customFields:Te.customFields||[],branding:Te.branding};T(Rt)}else console.warn("[SECURITY] Event not found for eventId:",Z.eventId)}catch(Me){console.error("[SECURITY] Error fetching agenda:",Me),H("Failed to load agenda")}finally{G(!1)}},Ie=async()=>{try{if(!y){console.warn("[SECURITY] Cannot fetch participants - agenda not loaded yet");return}if(!y.eventId){console.error("[SECURITY] CRITICAL: Cannot fetch participants - agenda missing eventId!"),H("Security error: Invalid event configuration");return}console.log("[SECURITY] Fetching participants ONLY for event:",y.eventId);const{data:Me,error:at}=await Le.from("participants").select("*").eq("eventId",y.eventId);if(at)throw new Error(`Failed to fetch participants: ${at.message}`);const Z=Me||[];console.log("[SECURITY] Successfully filtered participants by eventId:",{eventId:y.eventId,participantCount:Z.length,agendaTitle:y.title});const Te=Z.filter(Rt=>Rt.eventId!==y.eventId);Te.length>0?console.error("[SECURITY] CRITICAL: Found participants from other events!",Te):console.log("[SECURITY]  All participants verified to belong to event:",y.eventId),O(Z),z(new Date);const Be=Z.filter(Rt=>Rt.attendance&&Rt.attendance.some(Ue=>Ue.agendaItem===y.title));console.log("[SECURITY] Checked-in count for this session:",Be.length),console.log("[SECURITY] Data isolation summary:",{eventId:y.eventId,eventName:E?.name||"Loading...",sessionTitle:y.title,totalParticipantsInEvent:Z.length,checkedInToThisSession:Be.length,dataIsolationVerified:Te.length===0}),console.log("=".repeat(80)),U(Be)}catch(Me){console.error("[SECURITY] Error fetching participants:",Me),H("Failed to load participants")}},Oe=async Me=>{if(!(!E||!y))try{let at=null,Z={size:"CR80",customWidth:100,customHeight:150,backgroundColor:"#ffffff",backgroundImageUrl:void 0,backgroundImageFit:"cover",logoUrl:void 0};if(E.badge_template){const Vt=E.badge_template;Z={size:Vt.size||"CR80",customWidth:Vt.customWidth,customHeight:Vt.customHeight,backgroundColor:Vt.backgroundColor||"#ffffff",backgroundImageUrl:Vt.backgroundImageUrl,backgroundImageFit:Vt.backgroundImageFit||"cover",logoUrl:Vt.logoUrl},at=Vt.components}else{const Vt=localStorage.getItem(`badge_canvas_${E.id}`);at=Vt?JSON.parse(Vt):null}const Te=await Bm.toDataURL(Me.id,{width:300,margin:1}),Be=window.open("","_blank");if(!Be){alert("Please allow popups to print badges");return}const Ue={CR80:{width:85.6,height:53.98},A6:{width:105,height:148},A7:{width:74,height:105},custom:{width:Z.customWidth||100,height:Z.customHeight||150}}[Z.size||"CR80"],Pt=Ue.width,Mt=Ue.height;let Yt="",kr="";if(at&&at.length>0){const Vt=Z.backgroundImageUrl?`background-image: url(${Z.backgroundImageUrl});
             background-size: ${Z.backgroundImageFit||"cover"};
             background-position: center;
             background-repeat: no-repeat;`:"";kr=`
          .badge {
            width: ${Pt}mm;
            height: ${Mt}mm;
            background-color: ${Z.backgroundColor};
            ${Vt}
            box-sizing: border-box;
            position: relative;
            border: 1px solid #ddd;
          }
          .badge-component {
            position: absolute;
            overflow: hidden;
          }
        `,at.filter(it=>it.enabled).forEach(it=>{const Gt=`
              left: ${it.x}%;
              top: ${it.y}%;
              width: ${it.width}%;
              height: ${it.height}%;
              font-size: ${it.fontSize||16}px;
              font-family: ${it.fontFamily||"sans-serif"};
              font-weight: ${it.fontWeight||"normal"};
              font-style: ${it.fontStyle||"normal"};
              text-align: ${it.textAlign||"left"};
              color: ${it.color||"#000000"};
              display: flex;
              align-items: center;
            `;if(it.type==="eventName")Yt+=`<div class="badge-component" style="${Gt}">${E.name}</div>`;else if(it.type==="field"&&it.fieldName){const qt=it.fieldName.startsWith("custom_")?Me.customData?.[it.fieldName]:Me[it.fieldName];Yt+=`
                <div class="badge-component" style="${Gt}">
                  <div style="width: 100%;">
                    <div style="opacity: 0.6; font-size: 0.7em;">${it.label}</div>
                    <div>${qt||"-"}</div>
                  </div>
                </div>
              `}else if(it.type==="qrcode")Yt+=`
                <div class="badge-component" style="${Gt} justify-content: center;">
                  <img src="${Te}" style="width: 100%; height: 100%; object-fit: contain;" />
                </div>
              `;else if(it.type==="logo"){const qt=Z.logoUrl||E.branding?.logoUrl;qt&&(Yt+=`
                  <div class="badge-component" style="${Gt} justify-content: center;">
                    <img src="${qt}" style="width: 100%; height: 100%; object-fit: contain;" />
                  </div>
                `)}else it.type==="customText"&&(Yt+=`<div class="badge-component" style="${Gt}">${it.customText||"Custom Text"}</div>`)})}else{const Vt={small:{title:"14px",text:"12px"},medium:{title:"18px",text:"14px"},large:{title:"24px",text:"18px"}},it={small:"60px",medium:"80px",large:"100px"};kr=`
          .badge {
            width: ${Pt}mm;
            height: ${Mt}mm;
            background-color: ${Z.backgroundColor};
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            // @ts-ignore - alignment property from legacy schema
            align-items: ${Z.alignment==="left"?"flex-start":Z.alignment==="right"?"flex-end":"center"};
            // @ts-ignore
            text-align: ${Z.alignment};
            border: 1px solid #ddd;
          }
        `,(Z.components||[]).filter(Gt=>Gt.enabled).sort((Gt,qt)=>Gt.order-qt.order).forEach(Gt=>{if(Gt.type==="eventName")Yt+=`<div style="font-size: ${Vt[Z.fontSize||"medium"].title}; font-weight: bold; margin: 8px 0;">${E.name}</div>`;else if(Gt.type==="field"&&Gt.fieldName){const qt=Gt.fieldName.startsWith("custom_")?Me.customData?.[Gt.fieldName]:Me[Gt.fieldName];Yt+=`
                <div style="margin: 8px 0;">
                  <div style="font-size: ${Vt[Z.fontSize||"medium"].text}; opacity: 0.7;">${Gt.label}</div>
                  <div style="font-size: ${Vt[Z.fontSize||"medium"].text};">${qt||"-"}</div>
                </div>
              `}else Gt.type==="qrcode"?Yt+=`<img src="${Te}" style="width: ${it[Z.qrCodeSize||"medium"]}; height: ${it[Z.qrCodeSize||"medium"]}; margin: 8px 0;" />`:Gt.type==="logo"&&Z.logoUrl&&(Yt+=`<img src="${Z.logoUrl}" style="max-width: 100px; max-height: 40px; object-fit: contain; margin: 8px 0;" />`)})}Be.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Badge - ${Me.name}</title>
            <style>
              @media print {
                @page {
                  size: ${Pt}mm ${Mt}mm;
                  margin: 0;
                }
                body {
                  margin: 0;
                  padding: 0;
                }
              }
              body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
              }
              ${kr}
            </style>
          </head>
          <body>
            <div class="badge">
              ${Yt}
            </div>
            <script>
              window.onload = () => {
                setTimeout(() => {
                  window.print();
                  window.close();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `),Be.document.close()}catch(at){console.error("Error printing badge:",at),alert("Failed to print badge")}},ye=()=>{if(!E)return;const Me=new URL(window.location.origin+window.location.pathname);Me.searchParams.set("designer",E.id),Me.searchParams.set("from",`checkin=${r}`),window.open(Me.toString(),"_blank","noopener")},Y=Me=>{if(n(Me),!Me.trim()){P([]);return}const at=Me.toLowerCase(),Z=I.filter(Te=>Te.name?.toLowerCase().includes(at)||Te.email?.toLowerCase().includes(at)||Te.company?.toLowerCase().includes(at));console.log("Search results:",Z),P(Z)},le=()=>{d(!0),n(""),P([])},Ce=()=>{v(!0),setTimeout(()=>Ye(),300)},De=()=>{We(),v(!1)},Ye=async()=>{if(ee){console.log("[SCANNER] Camera already active");return}console.log("[SCANNER] Starting camera...");try{re.current||(console.log("[SCANNER] Initializing Html5Qrcode"),re.current=new yR("qr-reader-standalone"));const Me={fps:10,qrbox:{width:250,height:250},aspectRatio:1};console.log("[SCANNER] Config:",Me),await re.current.start({facingMode:"environment"},Me,async at=>{console.log("[SCANNER] QR Code detected:",at),te(!0),await We(),setTimeout(async()=>{te(!1),await ut(at)},1500)},at=>{at&&!at.includes("NotFoundException")&&console.log("[SCANNER] Scan error:",at)}),se(!0),console.log("[SCANNER] Camera started successfully")}catch(Me){console.error("[SCANNER] Error starting camera:",Me),alert("Failed to start camera. Please check camera permissions and try again."),se(!1)}},We=async()=>{if(re.current){try{await re.current.getState()===2&&await re.current.stop()}catch(Me){console.error("Error stopping camera:",Me)}se(!1)}},ut=async Me=>{if(!y){console.error("[SECURITY] Cannot check in - agenda not loaded");return}if(!y.eventId){console.error("[SECURITY] CRITICAL: Cannot check in - agenda missing eventId!"),alert("Security error: Invalid event configuration");return}ce(!0);try{const at=Me.trim();console.log("[SECURITY] Attempting check-in for participant:",at),console.log("[SECURITY] Event context:",{eventId:y.eventId,agendaTitle:y.title,agendaId:y.id});const{data:Z,error:Te}=await Le.from("participants").select("*").eq("id",at).eq("eventId",y.eventId).single();if(Te||!Z)throw console.error("[SECURITY] Participant not found. Searched for ID:",at),console.log("[SECURITY] Available participant IDs in this event:",I.map(Ue=>Ue.id)),new Error(`Participant not found with ID: ${at}`);const Be=Z;if(console.log("[SECURITY] Found participant:",Be),Be.eventId!==y.eventId)throw console.error("[SECURITY] CRITICAL: Attempted cross-event check-in!",{participantEventId:Be.eventId,agendaEventId:y.eventId,participantId:at,participantName:Be.name}),new Error("Security violation: Participant does not belong to this event");if(console.log("[SECURITY] Security check passed - participant belongs to event:",y.eventId),Be.attendance?.some(Ue=>Ue.agendaItem===y.title))q(`${Be.name} is already checked in!`),de(!0);else{const Ue=[...Be.attendance||[],{agendaItem:y.title,timestamp:new Date().toISOString()}];console.log("[SECURITY] Recording attendance for participant in event:",y.eventId);const{error:Pt}=await Le.from("participants").update({attendance:Ue}).eq("id",at);if(Pt)throw new Error(`Failed to record attendance: ${Pt.message}`);q(` Check-in successful for ${Be.name}`),de(!0),ue&&setTimeout(()=>{Oe(Be)},500)}await Ie(),setTimeout(()=>{v(!1),d(!1)},1500)}catch(at){console.error("[LOCAL] Error recording attendance:",at),alert(at.message||"Failed to record attendance. Please try again.")}finally{ce(!1)}},Ze=Me=>Me?new Date(Me).toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",Ot=Me=>Me?new Date(Me).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"";return B?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-white",children:[s.jsx(Tr,{className:"h-12 w-12 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-lg",children:"Loading check-in page..."})]})}):oe||!y?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-400 via-red-500 to-red-600 flex items-center justify-center p-6",children:s.jsxs("div",{className:"text-center text-white max-w-md",children:[s.jsx(wi,{className:"h-16 w-16 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl mb-2",children:"Security Error"}),s.jsx("p",{className:"text-lg opacity-90 mb-4",children:oe||"Agenda not found"}),s.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-sm",children:s.jsx("p",{className:"opacity-90",children:"This check-in page requires proper event association. The session may have been deleted or is missing required configuration."})})]})}):y&&!y.eventId?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-400 via-orange-500 to-orange-600 flex items-center justify-center p-6",children:s.jsxs("div",{className:"text-center text-white max-w-md",children:[s.jsx(wi,{className:"h-16 w-16 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl mb-2",children:"Configuration Error"}),s.jsx("p",{className:"text-lg opacity-90 mb-4",children:"This session is not associated with any event"}),s.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4 text-sm",children:s.jsx("p",{className:"opacity-90",children:"Please contact the event administrator. This session needs to be properly configured with an event association before check-ins can be performed."})})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 p-6",children:[E&&s.jsx("div",{className:"max-w-2xl mx-auto mb-4",children:s.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-white border border-white/30",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"opacity-90",children:"Event:"}),s.jsx("span",{className:"font-semibold",children:E.name}),s.jsx("span",{className:"mx-2 opacity-50",children:""}),s.jsxs("span",{className:"text-xs opacity-75",children:["ID: ",E.id]})]})})}),s.jsxs("div",{className:"max-w-2xl mx-auto text-center text-white mb-12",children:[s.jsx("h1",{className:"text-4xl mb-4",children:y.title}),s.jsxs("p",{className:"text-lg opacity-90 mb-2",children:[Ze(y.startTime),y.endTime&&` - ${Ot(y.endTime)}`]}),y.location&&s.jsx("p",{className:"text-base opacity-80",children:y.location})]}),s.jsx("div",{className:"max-w-md mx-auto mb-6",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(HS,{className:"h-4 w-4 text-white"}),s.jsx(Pe,{htmlFor:"auto-print",className:"text-white text-sm",children:"Auto-Print Badge on Check-In"})]}),s.jsx(Qs,{id:"auto-print",checked:ue,onCheckedChange:be})]}),s.jsxs(Ae,{variant:"outline",size:"sm",onClick:ye,className:"w-full bg-white/10 hover:bg-white/20 text-white border-white/30",children:[s.jsx(hu,{className:"mr-2 h-4 w-4"}),"Design Badge Template"]})]})}),s.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[s.jsxs(Ae,{onClick:le,className:"w-full h-16 bg-gray-900 hover:bg-gray-800 text-white text-lg",size:"lg",children:[s.jsx(jc,{className:"mr-3 h-6 w-6"}),"Search"]}),s.jsxs(Ae,{onClick:Ce,className:"w-full h-16 bg-gray-900 hover:bg-gray-800 text-white text-lg",size:"lg",children:[s.jsx(Aw,{className:"mr-3 h-6 w-6"}),"QR Scan"]}),s.jsx("div",{className:"text-white text-center text-sm mt-6 space-y-2",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-4 py-3 border border-white/20",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full"}),s.jsx("div",{className:"opacity-75 text-xs",children:"Secure Event Scope Active"})]}),s.jsx("div",{className:"font-semibold",children:E?.name||"Loading..."}),s.jsxs("div",{className:"opacity-75 mt-2",children:["Total Registered: ",I.length," participants"]}),y?.eventId&&s.jsxs("div",{className:"text-xs opacity-50 mt-2 font-mono",children:["Event ID: ",y.eventId.substring(0,8),"..."]})]})}),s.jsxs(Ae,{onClick:()=>g(!0),variant:"outline",className:"w-full h-16 bg-white/10 hover:bg-white/20 text-white border-white/30 text-lg backdrop-blur-sm",size:"lg",children:[s.jsx($E,{className:"mr-3 h-6 w-6"}),"View Dashboard"]})]}),s.jsxs("div",{className:"max-w-2xl mx-auto mt-16 text-center text-white/70 text-sm space-y-2",children:[s.jsxs("p",{children:[" ",L.length," participants checked in"]}),s.jsxs("p",{className:"flex items-center justify-center gap-2 text-xs",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Auto-updating  Last updated: ",ie.toLocaleTimeString()]})]}),s.jsx(Pn,{open:o,onOpenChange:d,children:s.jsxs(Dn,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsx(Bn,{children:s.jsx(Fn,{children:"Search Participants"})}),s.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[s.jsx("div",{className:"flex gap-2",children:s.jsx(Ke,{placeholder:"Search by name, email, or company...",value:e,onChange:Me=>Y(Me.target.value),autoFocus:!0})}),s.jsx("div",{className:"flex-1 overflow-y-auto border rounded-lg",children:k.length>0?s.jsxs(go,{children:[s.jsx(xo,{children:s.jsxs(Qn,{children:[s.jsx(_t,{children:"Name"}),s.jsx(_t,{children:"Company"}),s.jsx(_t,{children:"Status"}),s.jsx(_t,{className:"text-right",children:"Action"})]})}),s.jsx(Aa,{children:k.map(Me=>{const at=Me.attendance?.some(Z=>Z.agendaItem===y.title);return s.jsxs(Qn,{children:[s.jsx(yt,{children:s.jsxs("div",{children:[s.jsx("div",{children:Me.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:Me.email})]})}),s.jsx(yt,{children:Me.company||"-"}),s.jsx(yt,{children:at?s.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[s.jsx(uo,{className:"h-4 w-4"}),"Checked In"]}):s.jsx("span",{className:"text-muted-foreground",children:"Not Checked In"})}),s.jsx(yt,{className:"text-right",children:!at&&s.jsx(Ae,{size:"sm",onClick:()=>ut(Me.id),disabled:ne,children:ne?s.jsx(Tr,{className:"h-4 w-4 animate-spin"}):"Check In"})})]},Me.id)})})]}):s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:e?s.jsxs("div",{children:[s.jsxs("p",{className:"mb-2",children:['No participants found matching "',e,'"']}),s.jsxs("p",{className:"text-sm",children:["Total participants: ",I.length]})]}):s.jsx("p",{children:"Start typing to search participants"})})})]})]})}),s.jsx(Pn,{open:x,onOpenChange:Me=>!Me&&De(),children:s.jsxs(Dn,{className:"max-w-lg",children:[s.jsx(Bn,{children:s.jsx(Fn,{children:"Scan QR Code"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{id:"qr-reader-standalone",className:`${ee?"block":"hidden"} rounded-lg overflow-hidden border-2 border-primary relative z-20`,style:{minHeight:"300px"}}),V&&s.jsx("div",{className:"absolute inset-0 bg-green-500/90 rounded-lg flex items-center justify-center z-50 animate-in fade-in",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 animate-in zoom-in duration-500",children:s.jsx(uo,{className:"w-16 h-16 text-green-500"})}),s.jsx("p",{className:"text-white text-xl",children:"QR Code Detected!"})]})}),ee&&!V&&s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-10",children:[s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64",children:s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-green-500 rounded-tl-lg"}),s.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-green-500 rounded-tr-lg"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-green-500 rounded-bl-lg"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-green-500 rounded-br-lg"})]})}),s.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:s.jsx("p",{className:"text-white bg-black/50 inline-block px-4 py-2 rounded-lg text-sm",children:"Position QR code within the frame"})})]}),!ee&&!V&&s.jsxs("div",{className:"h-64 flex flex-col items-center justify-center bg-muted rounded-lg gap-3 p-4",children:[s.jsx(n1,{className:"h-12 w-12 text-muted-foreground opacity-30"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Camera will start automatically"}),s.jsxs(Ae,{onClick:Ye,variant:"default",size:"sm",children:[s.jsx(n1,{className:"mr-2 h-4 w-4"}),"Start Camera Manually"]})]})]}),s.jsxs(Ae,{onClick:De,variant:"outline",className:"w-full",children:[s.jsx(po,{className:"mr-2 h-4 w-4"}),"Close"]})]})]})}),s.jsx(Pn,{open:u,onOpenChange:g,children:s.jsxs(Dn,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsx(Bn,{children:s.jsxs(Fn,{children:["Check-In Dashboard - ",y.title]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[E&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-blue-700",children:"Event:"}),s.jsx("span",{className:"font-semibold text-blue-900",children:E.name}),s.jsx("span",{className:"mx-2 text-blue-400",children:""}),s.jsx("span",{className:"text-xs text-blue-600",children:"Isolated Data View"})]})}),s.jsx("div",{className:"mb-4 p-4 bg-muted rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl mb-1",children:L.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Checked In"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl mb-1",children:I.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Registered (This Event)"})]})]})}),L.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(uo,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),s.jsx("p",{children:"No participants checked in yet"})]}):s.jsx("div",{className:"border rounded-lg",children:s.jsxs(go,{children:[s.jsx(xo,{children:s.jsxs(Qn,{children:[s.jsx(_t,{children:"Name"}),s.jsx(_t,{children:"Email"}),s.jsx(_t,{children:"Company"}),s.jsx(_t,{children:"Position"}),s.jsx(_t,{children:"Check-In Time"})]})}),s.jsx(Aa,{children:L.map(Me=>{const at=Me.attendance.find(Z=>Z.agendaItem===y.title);return s.jsxs(Qn,{children:[s.jsx(yt,{children:Me.name}),s.jsx(yt,{className:"text-sm",children:Me.email}),s.jsx(yt,{children:Me.company||"-"}),s.jsx(yt,{children:Me.position||"-"}),s.jsx(yt,{children:at&&s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(yc,{className:"h-3 w-3"}),new Date(at.timestamp).toLocaleTimeString()]})})]},Me.id)})})]})})]})]})}),s.jsx(Pn,{open:W,onOpenChange:de,children:s.jsx(Dn,{className:"max-w-md",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-in zoom-in duration-500",children:s.jsx(uo,{className:"w-12 h-12 text-green-600"})}),s.jsx("h3",{className:"text-2xl mb-2",children:"Check-In Successful!"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:X}),s.jsx(Ae,{onClick:()=>de(!1),className:"mt-6",size:"lg",children:"Close"})]})})}),s.jsx("style",{children:`
      #qr-reader-standalone video, 
      #qr-reader-standalone canvas {
        width: 100% !important;
        height: auto !important;
        object-fit: cover; /* This makes the video cover the box nicely */
        min-height: 300px; /* Match your container's min-height */
      }
    `})]})}function bR({eventId:r}){const[e,n]=A.useState(null),[o,d]=A.useState(null),[u,g]=A.useState({phone:!0,company:!0,position:!0,attendance:!0,registered:!0}),[x,v]=A.useState(!0),[y,S]=A.useState(!1),[E,T]=A.useState(null),[I,O]=A.useState(!1),[k,P]=A.useState({name:"",email:"",phone:"",company:"",position:"",customData:{}});A.useEffect(()=>{L()},[r]);const L=async()=>{v(!0);try{const{data:oe,error:H}=await Le.from("events").select("*").eq("id",r).single();if(H||!oe){T("Event not found. Please check the registration link."),v(!1);return}const W={id:oe.id,name:oe.name,startDate:oe.startDate,endDate:oe.endDate,location:oe.location,description:oe.description,createdAt:oe.createdAt,customFields:oe.customFields||[],branding:oe.branding};n(W);const de=oe.branding||{logoUrl:"",headerText:"",primaryColor:"#7C3AED",backgroundColor:"#FFFFFF",fontFamily:"sans-serif"};d(de);const X=oe.columnVisibility||{phone:!0,company:!0,position:!0,attendance:!0,registered:!0};g(X),console.log("[REGISTRATION] Loaded event:",W.name),console.log("[REGISTRATION] Branding settings:",de),console.log("[REGISTRATION] Email auto-send enabled?",de.autoSendConfirmation),console.log("[REGISTRATION] Template ID:",de.confirmationTemplateId),console.log("[REGISTRATION] Column visibility:",X),v(!1)}catch(oe){console.error("[REGISTRATION] Error loading event:",oe),T("Failed to load registration form. Please try again."),v(!1)}},U=(oe,H)=>{P(W=>({...W,[oe]:H}))},B=(oe,H)=>{P(W=>({...W,customData:{...W.customData,[oe]:H}}))},G=()=>{P({name:"",email:"",phone:"",company:"",position:"",customData:{}}),O(!1),T(null),window.scrollTo({top:0,behavior:"smooth"})},ee=()=>{if(!k.name.trim())return T("Please enter your name"),!1;if(!k.email.trim())return T("Please enter your email"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k.email))return T("Please enter a valid email address"),!1;if(e?.customFields){for(const H of e.customFields)if(H.required&&!k.customData[H.id])return T(`${H.label} is required`),!1}return!0},se=async oe=>{if(oe.preventDefault(),T(null),!!ee()){S(!0);try{console.log("[REGISTRATION]  Submitting form data:",{name:k.name,email:k.email,phone:k.phone,company:k.company,position:k.position,customData:k.customData,customDataKeys:Object.keys(k.customData),customDataValues:Object.values(k.customData)});const H=await T2({eventId:r,name:k.name,email:k.email,phone:k.phone,company:k.company,position:k.position,customData:k.customData});if(console.log("[REGISTRATION]  Participant created:",H),console.log("[REGISTRATION]  Participant customData from response:",H.customData),console.log("[REGISTRATION] Email settings check:",{autoSendEnabled:o?.autoSendConfirmation,templateId:o?.confirmationTemplateId,hasTemplate:!!o?.confirmationTemplateId}),o?.autoSendConfirmation&&o?.confirmationTemplateId){console.log("[REGISTRATION] Attempting to send confirmation email to:",k.email);try{console.log("[REGISTRATION]  Fetching template:",o.confirmationTemplateId);const{data:W,error:de}=await Le.from("email_templates").select("*").eq("id",o.confirmationTemplateId).single();if(de||!W)throw console.error("[REGISTRATION]  Failed to fetch template:",de),new Error(`Email template not found: ${o.confirmationTemplateId}`);console.log("[REGISTRATION]  Template loaded:",W.name);const X=W.subject.replace(/\{\{name\}\}/g,k.name).replace(/\{\{email\}\}/g,k.email);let q=W.body.replace(/\{\{name\}\}/g,k.name).replace(/\{\{email\}\}/g,k.email).replace(/\{\{participant_id\}\}/g,H.id),ie=W.attachments||[];console.log("[REGISTRATION] Template attachments:",ie),console.log("[REGISTRATION] Include QR code?",W.include_qr_code),console.log("[REGISTRATION] Participant QR URL:",H.qr_code_url),W.include_qr_code&&H.qr_code_url?(console.log("[REGISTRATION] Adding QR code to attachments"),ie=[...ie,H.qr_code_url]):W.include_qr_code&&!H.qr_code_url&&console.warn("[REGISTRATION]  QR code requested but not available for participant");const{data:z,error:ue}=await Le.from("participant_emails").insert({participant_id:H.id,template_id:W.id,template_name:W.name,subject:X,status:"pending"}).select().single();let be=z?.id;if(be){const ye=`<img src="https://xtrognfmzyzqhsfvtgne.supabase.co/functions/v1/track-email?id=${be}&pid=${H.id}" width="1" height="1" style="display:none;" alt="" />`;let Y=q;const le=/(https?:\/\/[^\s<>"]+)/gi;Y=Y.replace(le,Ce=>{const De=Ce.includes("?")?"&":"?";return`${Ce}${De}_track=${be}`}),Y=Y+ye,q=Y,console.log("[REGISTRATION]  Tracking pixel added to email")}const re={to:k.email,subject:X,html:q,participantId:H.id,templateId:W.id,attachments:ie};console.log("[REGISTRATION]  Email payload:",{to:re.to,subject:re.subject,participantId:re.participantId,templateId:re.templateId,attachmentsCount:ie.length,attachmentsList:ie});const{data:we,error:Ie}=await Le.functions.invoke("send-email",{body:re});if(be){const Oe=Ie?"failed":"sent";await Le.from("participant_emails").update({status:Oe,error_message:Ie?JSON.stringify(Ie):null}).eq("id",be),console.log("[REGISTRATION]  Email log updated to:",Oe)}Ie?(console.error("[REGISTRATION]  Email send error:",Ie),console.error("[REGISTRATION] Error details:",JSON.stringify(Ie,null,2))):(console.log("[REGISTRATION]  Confirmation email sent successfully to:",k.email),console.log("[REGISTRATION]  Email response:",we))}catch(W){console.error("[REGISTRATION]  Email exception:",W),console.error("[REGISTRATION] Exception details:",JSON.stringify(W,null,2))}}else console.log("[REGISTRATION]  Email not sent - auto-send disabled or template not configured"),console.log("[REGISTRATION] Debug info:",{autoSendConfirmation:o?.autoSendConfirmation,confirmationTemplateId:o?.confirmationTemplateId,brandingObject:o});O(!0)}catch(H){console.error("[REGISTRATION] Error submitting form:",H),T(H instanceof Error?H.message:"Failed to submit registration. Please try again.")}finally{S(!1)}}};if(x)return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",style:{backgroundColor:"#f0f9ff"},children:s.jsx(Wn,{className:"w-full max-w-2xl",children:s.jsx(Zn,{className:"py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Tr,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading registration form..."})]})})})});if(E&&!e)return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",style:{backgroundColor:"#f0f9ff"},children:s.jsx(Wn,{className:"w-full max-w-2xl",children:s.jsx(Zn,{className:"py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(wi,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),s.jsx("h2",{className:"text-2xl mb-2",children:"Registration Unavailable"}),s.jsx("p",{className:"text-muted-foreground",children:E})]})})})});const V=e?.customFields?.filter(oe=>oe.visible!==!1)?.sort((oe,H)=>oe.order-H.order)||[],te=()=>{if(!o?.logoSize)return"h-16";switch(o.logoSize){case"small":return"h-12";case"medium":return"h-16";case"large":return"h-24";default:return"h-16"}},ne=()=>{if(!o?.logoAlignment)return"justify-center";switch(o.logoAlignment){case"left":return"justify-start";case"center":return"justify-center";case"right":return"justify-end";default:return"justify-center"}},ce=()=>{if(!o?.fontFamily)return"font-sans";switch(o.fontFamily){case"sans-serif":return"font-sans";case"serif":return"font-serif";case"monospace":return"font-mono";default:return"font-sans"}};return s.jsxs("div",{className:`min-h-screen py-12 px-6 ${ce()}`,style:{backgroundColor:o?.backgroundColor||"#f0f9ff",color:o?.fontColor||"#1F2937",fontSize:o?.fontSize==="small"?"0.875rem":o?.fontSize==="large"?"1.125rem":"1rem"},children:[s.jsxs("div",{className:"mx-auto",style:{maxWidth:o?.formWidth==="narrow"?"400px":o?.formWidth==="wide"?"800px":"600px"},children:[s.jsx(Wn,{className:"mb-6 backdrop-blur-md bg-white/60 shadow-xl border border-white/20",children:s.jsxs(Vr,{className:"text-center",children:[o?.logoUrl&&s.jsx("div",{className:`flex ${ne()} mb-4`,children:s.jsx("img",{src:o.logoUrl,alt:"Event Logo",className:`${te()} object-contain`})}),o?.customHeader&&s.jsx("p",{className:"text-lg mb-4 font-medium",style:{color:o.primaryColor},children:o.customHeader}),s.jsx(Wr,{className:"text-4xl font-bold mb-6",children:e?.name}),(o?.showDate!==!1&&e?.startDate||o?.showLocation!==!1&&e?.location)&&s.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 mt-6 mb-6",children:[o?.showDate!==!1&&e?.startDate&&s.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-full backdrop-blur-sm shadow-sm",style:{backgroundColor:o?.primaryColor?`${o.primaryColor}15`:"rgba(124, 58, 237, 0.1)",border:`1px solid ${o?.primaryColor?`${o.primaryColor}30`:"rgba(124, 58, 237, 0.2)"}`},children:[s.jsx(xl,{className:"h-4 w-4",style:{color:o?.primaryColor||"#7C3AED"}}),s.jsx("span",{className:"text-sm font-medium",style:{color:o?.primaryColor||"#7C3AED"},children:new Date(e.startDate).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})})]}),o?.showLocation!==!1&&e?.location&&s.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 rounded-full backdrop-blur-md shadow-lg hover:shadow-xl transition-shadow duration-300",style:{backgroundColor:o?.primaryColor?`${o.primaryColor}12`:"rgba(124, 58, 237, 0.08)",border:`2px solid ${o?.primaryColor?`${o.primaryColor}40`:"rgba(124, 58, 237, 0.3)"}`},children:[s.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:o?.primaryColor?`${o.primaryColor}20`:"rgba(124, 58, 237, 0.15)"},children:s.jsx(am,{className:"h-5 w-5",style:{color:o?.primaryColor||"#7C3AED",strokeWidth:2.5}})}),s.jsx("span",{className:"text-base font-semibold tracking-wide",style:{color:o?.primaryColor||"#7C3AED",letterSpacing:"0.02em"},children:e.location})]})]}),o?.showDescription!==!1&&e?.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2 mb-4 max-w-2xl mx-auto",children:e.description})]})}),s.jsxs(Wn,{className:"backdrop-blur-md bg-white/60 shadow-xl border border-white/20",style:{borderRadius:o?.borderRadius==="none"?"0":o?.borderRadius==="small"?"4px":o?.borderRadius==="large"?"12px":"8px"},children:[s.jsxs(Vr,{children:[s.jsx(Wr,{children:"Register Now"}),s.jsx(Wi,{children:"Please fill out the form below to register"})]}),s.jsxs(Zn,{children:[s.jsx("style",{children:`
              /* Microsoft Forms-style transparent inputs */
              .registration-form input,
              .registration-form textarea,
              .registration-form select {
                background-color: rgba(255, 255, 255, 0.1) !important;
                backdrop-filter: blur(10px);
                border: none !important;
                border-bottom: 2px solid rgba(0, 0, 0, 0.2) !important;
                border-radius: 4px 4px 0 0 !important;
                transition: all 0.3s ease;
                padding: 12px 8px !important;
              }
              
              .registration-form input:hover,
              .registration-form textarea:hover,
              .registration-form select:hover {
                background-color: rgba(255, 255, 255, 0.15) !important;
                border-bottom-color: rgba(0, 0, 0, 0.3) !important;
              }
              
              .registration-form input:focus,
              .registration-form textarea:focus,
              .registration-form select:focus {
                background-color: rgba(255, 255, 255, 0.2) !important;
                border-bottom-color: ${o?.primaryColor||"#7C3AED"} !important;
                border-bottom-width: 3px !important;
                outline: none !important;
                box-shadow: none !important;
                ring: 0 !important;
              }
              
              .registration-form input::placeholder,
              .registration-form textarea::placeholder {
                color: rgba(0, 0, 0, 0.4);
              }
              
              .registration-form label {
                font-weight: 500;
                font-size: 0.875rem;
                color: ${o?.fontColor||"#1F2937"};
                margin-bottom: 4px;
              }
              
              .registration-form label:has(+ input[required])::after,
              .registration-form label:has(+ textarea[required])::after,
              .registration-form label:has(+ select[required])::after {
                content: ' *';
                color: ${o?.primaryColor||"#dc2626"};
              }
            `}),s.jsxs("form",{onSubmit:se,className:"space-y-6 registration-form",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"BASIC INFORMATION"}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"name",children:"Full Name"}),s.jsx(Ke,{id:"name",value:k.name,onChange:oe=>U("name",oe.target.value),placeholder:"Enter your full name",required:!0})]}),s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"email",children:"Email Address"}),s.jsx(Ke,{id:"email",type:"email",value:k.email,onChange:oe=>U("email",oe.target.value),placeholder:"your.email@example.com",required:!0})]}),u.phone&&s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"phone",children:"Phone Number"}),s.jsx(Ke,{id:"phone",type:"tel",value:k.phone,onChange:oe=>U("phone",oe.target.value),placeholder:"+1 (555) 000-0000"})]}),u.company&&s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"company",children:"Company"}),s.jsx(Ke,{id:"company",value:k.company,onChange:oe=>U("company",oe.target.value),placeholder:"Your company name"})]}),u.position&&s.jsxs("div",{children:[s.jsx(Pe,{htmlFor:"position",children:"Position/Title"}),s.jsx(Ke,{id:"position",value:k.position,onChange:oe=>U("position",oe.target.value),placeholder:"Your job title"})]})]}),V.length>0&&s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"ADDITIONAL INFORMATION"}),V.map(oe=>s.jsxs("div",{children:[s.jsxs(Pe,{htmlFor:oe.id,children:[oe.label," ",oe.required&&"*"]}),oe.type==="textarea"?s.jsx(Ci,{id:oe.id,value:k.customData[oe.id]||"",onChange:H=>B(oe.id,H.target.value),required:oe.required}):oe.type==="select"?s.jsxs("select",{id:oe.id,value:k.customData[oe.id]||"",onChange:H=>B(oe.id,H.target.value),required:oe.required,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[s.jsx("option",{value:"",children:"Select..."}),oe.options?.map(H=>s.jsx("option",{value:H,children:H},H))]}):s.jsx(Ke,{id:oe.id,type:oe.type,value:k.customData[oe.id]||"",onChange:H=>B(oe.id,H.target.value),required:oe.required})]},oe.id))]}),E&&s.jsxs("div",{className:"bg-destructive/10 text-destructive p-3 rounded-lg flex items-center gap-2",children:[s.jsx(wi,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:E})]}),s.jsx(Ae,{type:"submit",className:"w-full text-white",size:"lg",disabled:y,style:{backgroundColor:o?.buttonColor||o?.primaryColor,borderColor:o?.buttonColor||o?.primaryColor,borderRadius:o?.borderRadius==="none"?"0":o?.borderRadius==="small"?"4px":o?.borderRadius==="large"?"12px":"8px"},children:y?s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):o?.buttonText||"Complete Registration"})]})]})]}),s.jsx("p",{className:"text-center text-sm mt-6",style:{color:o?.footerColor||"#6B7280"},children:o?.footerText||"By registering, you agree to receive event-related communications."})]}),s.jsx(Pn,{open:I,onOpenChange:oe=>!oe&&G(),children:s.jsxs(Dn,{className:"sm:max-w-md",onInteractOutside:oe=>oe.preventDefault(),onEscapeKeyDown:G,children:[s.jsxs(Bn,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:o?.logoUrl&&s.jsx("img",{src:o.logoUrl,alt:"Event Logo",className:"h-12 object-contain"})}),s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{backgroundColor:o?.primaryColor?`${o.primaryColor}20`:"#dcfce7"},children:s.jsx(uo,{className:"h-10 w-10",style:{color:o?.primaryColor||"#16a34a"}})})}),s.jsx(Fn,{className:"text-2xl text-center",children:"Registration Successful!"}),s.jsx(Jr,{className:"text-center text-base pt-2",children:o?.successMessage?s.jsxs(s.Fragment,{children:[o.successMessage,s.jsx("br",{}),s.jsx("br",{}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Event: ",s.jsx("strong",{children:e?.name})]})]}):s.jsxs(s.Fragment,{children:["Thank you for registering for ",s.jsx("strong",{children:e?.name}),".",s.jsx("br",{}),s.jsx("br",{}),"You will receive an email shortly containing your QR code and further event details."]})})]}),s.jsx(Bs,{className:"sm:justify-center pt-4",children:s.jsx(Ae,{onClick:G,className:"w-full sm:w-auto",size:"lg",style:o?.primaryColor?{backgroundColor:o.primaryColor,borderColor:o.primaryColor}:void 0,children:"Register Another Participant"})})]})})]})}var ar=function(){return ar=Object.assign||function(r){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(r[d]=e[d])}return r},ar.apply(this,arguments)},Yx={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Kx={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},nu={width:"20px",height:"20px",position:"absolute",zIndex:1},CR={top:ar(ar({},Yx),{top:"-5px"}),right:ar(ar({},Kx),{left:void 0,right:"-5px"}),bottom:ar(ar({},Yx),{top:void 0,bottom:"-5px"}),left:ar(ar({},Kx),{left:"-5px"}),topRight:ar(ar({},nu),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:ar(ar({},nu),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:ar(ar({},nu),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:ar(ar({},nu),{left:"-10px",top:"-10px",cursor:"nw-resize"})},ER=A.memo(function(r){var e=r.onResizeStart,n=r.direction,o=r.children,d=r.replaceStyles,u=r.className,g=A.useCallback(function(y){e(y,n)},[e,n]),x=A.useCallback(function(y){e(y,n)},[e,n]),v=A.useMemo(function(){return ar(ar({position:"absolute",userSelect:"none"},CR[n]),d??{})},[d,n]);return s.jsx("div",{className:u||void 0,style:v,onMouseDown:g,onTouchStart:x,children:o})}),SR=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(o[u]=d[u])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),xi=function(){return xi=Object.assign||function(r){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(r[d]=e[d])}return r},xi.apply(this,arguments)},_R={width:"auto",height:"auto"},ru=function(r,e,n){return Math.max(Math.min(r,n),e)},Zx=function(r,e,n){var o=Math.round(r/e);return o*e+n*(o-1)},al=function(r,e){return new RegExp(r,"i").test(e)},su=function(r){return!!(r.touches&&r.touches.length)},NR=function(r){return!!((r.clientX||r.clientX===0)&&(r.clientY||r.clientY===0))},Qx=function(r,e,n){n===void 0&&(n=0);var o=e.reduce(function(u,g,x){return Math.abs(g-r)<Math.abs(e[u]-r)?x:u},0),d=Math.abs(e[o]-r);return n===0||d<n?e[o]:r},p0=function(r){return r=r.toString(),r==="auto"||r.endsWith("px")||r.endsWith("%")||r.endsWith("vh")||r.endsWith("vw")||r.endsWith("vmax")||r.endsWith("vmin")?r:"".concat(r,"px")},iu=function(r,e,n,o){if(r&&typeof r=="string"){if(r.endsWith("px"))return Number(r.replace("px",""));if(r.endsWith("%")){var d=Number(r.replace("%",""))/100;return e*d}if(r.endsWith("vw")){var d=Number(r.replace("vw",""))/100;return n*d}if(r.endsWith("vh")){var d=Number(r.replace("vh",""))/100;return o*d}}return r},AR=function(r,e,n,o,d,u,g){return o=iu(o,r.width,e,n),d=iu(d,r.height,e,n),u=iu(u,r.width,e,n),g=iu(g,r.height,e,n),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof d>"u"?void 0:Number(d),minWidth:typeof u>"u"?void 0:Number(u),minHeight:typeof g>"u"?void 0:Number(g)}},jR=function(r){return Array.isArray(r)?r:[r,r]},IR=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Jx="__resizable_base__",TR=(function(r){SR(e,r);function e(n){var o,d,u,g,x=r.call(this,n)||this;return x.ratio=1,x.resizable=null,x.parentLeft=0,x.parentTop=0,x.resizableLeft=0,x.resizableRight=0,x.resizableTop=0,x.resizableBottom=0,x.targetLeft=0,x.targetTop=0,x.delta={width:0,height:0},x.appendBase=function(){if(!x.resizable||!x.window)return null;var v=x.parentNode;if(!v)return null;var y=x.window.document.createElement("div");return y.style.width="100%",y.style.height="100%",y.style.position="absolute",y.style.transform="scale(0, 0)",y.style.left="0",y.style.flex="0 0 100%",y.classList?y.classList.add(Jx):y.className+=Jx,v.appendChild(y),y},x.removeBase=function(v){var y=x.parentNode;y&&y.removeChild(v)},x.state={isResizing:!1,width:(d=(o=x.propsSize)===null||o===void 0?void 0:o.width)!==null&&d!==void 0?d:"auto",height:(g=(u=x.propsSize)===null||u===void 0?void 0:u.height)!==null&&g!==void 0?g:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},x.onResizeStart=x.onResizeStart.bind(x),x.onMouseMove=x.onMouseMove.bind(x),x.onMouseUp=x.onMouseUp.bind(x),x}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||_R},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,o=0;if(this.resizable&&this.window){var d=this.resizable.offsetWidth,u=this.resizable.offsetHeight,g=this.resizable.style.position;g!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:d,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:u,this.resizable.style.position=g}return{width:n,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,o=this.props.size,d=function(x){var v;if(typeof n.state[x]>"u"||n.state[x]==="auto")return"auto";if(n.propsSize&&n.propsSize[x]&&(!((v=n.propsSize[x])===null||v===void 0)&&v.toString().endsWith("%"))){if(n.state[x].toString().endsWith("%"))return n.state[x].toString();var y=n.getParentSize(),S=Number(n.state[x].toString().replace("px","")),E=S/y[x]*100;return"".concat(E,"%")}return p0(n.state[x])},u=o&&typeof o.width<"u"&&!this.state.isResizing?p0(o.width):d("width"),g=o&&typeof o.height<"u"&&!this.state.isResizing?p0(o.height):d("height");return{width:u,height:g}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var o=!1,d=this.parentNode.style.flexWrap;d!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var u={width:n.offsetWidth,height:n.offsetHeight};return o&&(this.parentNode.style.flexWrap=d),this.removeBase(n),u},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,o){var d=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===n&&(typeof d>"u"||d==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,o){var d=this.props.boundsByDirection,u=this.state.direction,g=d&&al("left",u),x=d&&al("top",u),v,y;if(this.props.bounds==="parent"){var S=this.parentNode;S&&(v=g?this.resizableRight-this.parentLeft:S.offsetWidth+(this.parentLeft-this.resizableLeft),y=x?this.resizableBottom-this.parentTop:S.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(v=g?this.resizableRight:this.window.innerWidth-this.resizableLeft,y=x?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(v=g?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),y=x?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return v&&Number.isFinite(v)&&(n=n&&n<v?n:v),y&&Number.isFinite(y)&&(o=o&&o<y?o:y),{maxWidth:n,maxHeight:o}},e.prototype.calculateNewSizeFromDirection=function(n,o){var d=this.props.scale||1,u=jR(this.props.resizeRatio||1),g=u[0],x=u[1],v=this.state,y=v.direction,S=v.original,E=this.props,T=E.lockAspectRatio,I=E.lockAspectRatioExtraHeight,O=E.lockAspectRatioExtraWidth,k=S.width,P=S.height,L=I||0,U=O||0;return al("right",y)&&(k=S.width+(n-S.x)*g/d,T&&(P=(k-U)/this.ratio+L)),al("left",y)&&(k=S.width-(n-S.x)*g/d,T&&(P=(k-U)/this.ratio+L)),al("bottom",y)&&(P=S.height+(o-S.y)*x/d,T&&(k=(P-L)*this.ratio+U)),al("top",y)&&(P=S.height-(o-S.y)*x/d,T&&(k=(P-L)*this.ratio+U)),{newWidth:k,newHeight:P}},e.prototype.calculateNewSizeFromAspectRatio=function(n,o,d,u){var g=this.props,x=g.lockAspectRatio,v=g.lockAspectRatioExtraHeight,y=g.lockAspectRatioExtraWidth,S=typeof u.width>"u"?10:u.width,E=typeof d.width>"u"||d.width<0?n:d.width,T=typeof u.height>"u"?10:u.height,I=typeof d.height>"u"||d.height<0?o:d.height,O=v||0,k=y||0;if(x){var P=(T-O)*this.ratio+k,L=(I-O)*this.ratio+k,U=(S-k)/this.ratio+O,B=(E-k)/this.ratio+O,G=Math.max(S,P),ee=Math.min(E,L),se=Math.max(T,U),V=Math.min(I,B);n=ru(n,G,ee),o=ru(o,se,V)}else n=ru(n,S,E),o=ru(o,T,I);return{newWidth:n,newHeight:o}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var d=o.getBoundingClientRect();this.parentLeft=d.left*n,this.parentTop=d.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var u=this.props.bounds.getBoundingClientRect();this.targetLeft=u.left*n,this.targetTop=u.top*n}if(this.resizable){var g=this.resizable.getBoundingClientRect(),x=g.left,v=g.top,y=g.right,S=g.bottom;this.resizableLeft=x*n,this.resizableRight=y*n,this.resizableTop=v*n,this.resizableBottom=S*n}},e.prototype.onResizeStart=function(n,o){if(!(!this.resizable||!this.window)){var d=0,u=0;if(n.nativeEvent&&NR(n.nativeEvent)?(d=n.nativeEvent.clientX,u=n.nativeEvent.clientY):n.nativeEvent&&su(n.nativeEvent)&&(d=n.nativeEvent.touches[0].clientX,u=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var g=this.props.onResizeStart(n,o,this.resizable);if(g===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var x,v=this.window.getComputedStyle(this.resizable);if(v.flexBasis!=="auto"){var y=this.parentNode;if(y){var S=this.window.getComputedStyle(y).flexDirection;this.flexDir=S.startsWith("row")?"row":"column",x=v.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var E={original:{x:d,y:u,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:xi(xi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:o,flexBasis:x};this.setState(E)}},e.prototype.onMouseMove=function(n){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&su(n))try{n.preventDefault(),n.stopPropagation()}catch{}var d=this.props,u=d.maxWidth,g=d.maxHeight,x=d.minWidth,v=d.minHeight,y=su(n)?n.touches[0].clientX:n.clientX,S=su(n)?n.touches[0].clientY:n.clientY,E=this.state,T=E.direction,I=E.original,O=E.width,k=E.height,P=this.getParentSize(),L=AR(P,this.window.innerWidth,this.window.innerHeight,u,g,x,v);u=L.maxWidth,g=L.maxHeight,x=L.minWidth,v=L.minHeight;var U=this.calculateNewSizeFromDirection(y,S),B=U.newHeight,G=U.newWidth,ee=this.calculateNewMaxFromBoundary(u,g);this.props.snap&&this.props.snap.x&&(G=Qx(G,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(B=Qx(B,this.props.snap.y,this.props.snapGap));var se=this.calculateNewSizeFromAspectRatio(G,B,{width:ee.maxWidth,height:ee.maxHeight},{width:x,height:v});if(G=se.newWidth,B=se.newHeight,this.props.grid){var V=Zx(G,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),te=Zx(B,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),ne=this.props.snapGap||0,ce=ne===0||Math.abs(V-G)<=ne?V:G,oe=ne===0||Math.abs(te-B)<=ne?te:B;G=ce,B=oe}var H={width:G-I.width,height:B-I.height};if(this.delta=H,O&&typeof O=="string"){if(O.endsWith("%")){var W=G/P.width*100;G="".concat(W,"%")}else if(O.endsWith("vw")){var de=G/this.window.innerWidth*100;G="".concat(de,"vw")}else if(O.endsWith("vh")){var X=G/this.window.innerHeight*100;G="".concat(X,"vh")}}if(k&&typeof k=="string"){if(k.endsWith("%")){var W=B/P.height*100;B="".concat(W,"%")}else if(k.endsWith("vw")){var de=B/this.window.innerWidth*100;B="".concat(de,"vw")}else if(k.endsWith("vh")){var X=B/this.window.innerHeight*100;B="".concat(X,"vh")}}var q={width:this.createSizeForCssProperty(G,"width"),height:this.createSizeForCssProperty(B,"height")};this.flexDir==="row"?q.flexBasis=q.width:this.flexDir==="column"&&(q.flexBasis=q.height);var ie=this.state.width!==q.width,z=this.state.height!==q.height,ue=this.state.flexBasis!==q.flexBasis,be=ie||z||ue;be&&_l.flushSync(function(){o.setState(q)}),this.props.onResize&&be&&this.props.onResize(n,T,this.resizable,H)}},e.prototype.onMouseUp=function(n){var o,d,u=this.state,g=u.isResizing,x=u.direction;u.original,!(!g||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,x,this.resizable,this.delta),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(d=this.props.size.height)!==null&&d!==void 0?d:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:xi(xi({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var o,d;this.setState({width:(o=n.width)!==null&&o!==void 0?o:"auto",height:(d=n.height)!==null&&d!==void 0?d:"auto"})},e.prototype.renderResizer=function(){var n=this,o=this.props,d=o.enable,u=o.handleStyles,g=o.handleClasses,x=o.handleWrapperStyle,v=o.handleWrapperClass,y=o.handleComponent;if(!d)return null;var S=Object.keys(d).map(function(E){return d[E]!==!1?s.jsx(ER,{direction:E,onResizeStart:n.onResizeStart,replaceStyles:u&&u[E],className:g&&g[E],children:y&&y[E]?y[E]:null},E):null});return s.jsx("div",{className:v,style:x,children:S})},e.prototype.render=function(){var n=this,o=Object.keys(this.props).reduce(function(g,x){return IR.indexOf(x)!==-1||(g[x]=n.props[x]),g},{}),d=xi(xi(xi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(d.flexBasis=this.state.flexBasis);var u=this.props.as||"div";return s.jsxs(u,xi({style:d,className:this.props.className},o,{ref:function(g){g&&(n.resizable=g)},children:[this.state.isResizing&&s.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e})(A.PureComponent),Um="Radio",[RR,J2]=_s(Um),[kR,OR]=RR(Um),eb=A.forwardRef((r,e)=>{const{__scopeRadio:n,name:o,checked:d=!1,required:u,disabled:g,value:x="on",onCheck:v,form:y,...S}=r,[E,T]=A.useState(null),I=ln(e,P=>T(P)),O=A.useRef(!1),k=E?y||!!E.closest("form"):!0;return s.jsxs(kR,{scope:n,checked:d,disabled:g,children:[s.jsx(zt.button,{type:"button",role:"radio","aria-checked":d,"data-state":sb(d),"data-disabled":g?"":void 0,disabled:g,value:x,...S,ref:I,onClick:Ht(r.onClick,P=>{d||v?.(),k&&(O.current=P.isPropagationStopped(),O.current||P.stopPropagation())})}),k&&s.jsx(rb,{control:E,bubbles:!O.current,name:o,value:x,checked:d,required:u,disabled:g,form:y,style:{transform:"translateX(-100%)"}})]})});eb.displayName=Um;var tb="RadioIndicator",nb=A.forwardRef((r,e)=>{const{__scopeRadio:n,forceMount:o,...d}=r,u=OR(tb,n);return s.jsx(Oa,{present:o||u.checked,children:s.jsx(zt.span,{"data-state":sb(u.checked),"data-disabled":u.disabled?"":void 0,...d,ref:e})})});nb.displayName=tb;var PR="RadioBubbleInput",rb=A.forwardRef(({__scopeRadio:r,control:e,checked:n,bubbles:o=!0,...d},u)=>{const g=A.useRef(null),x=ln(g,u),v=Uu(n),y=Fu(e);return A.useEffect(()=>{const S=g.current;if(!S)return;const E=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(E,"checked").set;if(v!==n&&I){const O=new Event("click",{bubbles:o});I.call(S,n),S.dispatchEvent(O)}},[v,n,o]),s.jsx(zt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...d,tabIndex:-1,ref:x,style:{...d.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rb.displayName=PR;function sb(r){return r?"checked":"unchecked"}var DR=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Gu="RadioGroup",[MR]=_s(Gu,[Ru,J2]),ib=Ru(),ab=J2(),[LR,BR]=MR(Gu),ob=A.forwardRef((r,e)=>{const{__scopeRadioGroup:n,name:o,defaultValue:d,value:u,required:g=!1,disabled:x=!1,orientation:v,dir:y,loop:S=!0,onValueChange:E,...T}=r,I=ib(n),O=Tc(y),[k,P]=ni({prop:u,defaultProp:d??null,onChange:E,caller:Gu});return s.jsx(LR,{scope:n,name:o,required:g,disabled:x,value:k,onValueChange:P,children:s.jsx(_y,{asChild:!0,...I,orientation:v,dir:O,loop:S,children:s.jsx(zt.div,{role:"radiogroup","aria-required":g,"aria-orientation":v,"data-disabled":x?"":void 0,dir:O,...T,ref:e})})})});ob.displayName=Gu;var lb="RadioGroupItem",cb=A.forwardRef((r,e)=>{const{__scopeRadioGroup:n,disabled:o,...d}=r,u=BR(lb,n),g=u.disabled||o,x=ib(n),v=ab(n),y=A.useRef(null),S=ln(e,y),E=u.value===d.value,T=A.useRef(!1);return A.useEffect(()=>{const I=k=>{DR.includes(k.key)&&(T.current=!0)},O=()=>T.current=!1;return document.addEventListener("keydown",I),document.addEventListener("keyup",O),()=>{document.removeEventListener("keydown",I),document.removeEventListener("keyup",O)}},[]),s.jsx(Ny,{asChild:!0,...x,focusable:!g,active:E,children:s.jsx(eb,{disabled:g,required:u.required,checked:E,...v,...d,name:u.name,ref:S,onCheck:()=>u.onValueChange(d.value),onKeyDown:Ht(I=>{I.key==="Enter"&&I.preventDefault()}),onFocus:Ht(d.onFocus,()=>{T.current&&y.current?.click()})})})});cb.displayName=lb;var FR="RadioGroupIndicator",db=A.forwardRef((r,e)=>{const{__scopeRadioGroup:n,...o}=r,d=ab(n);return s.jsx(nb,{...d,...o,ref:e})});db.displayName=FR;var UR=ob,zR=cb,$R=db;function VR({className:r,...e}){return s.jsx(UR,{"data-slot":"radio-group",className:Tt("grid gap-3",r),...e})}function WR({className:r,...e}){return s.jsx(zR,{"data-slot":"radio-group-item",className:Tt("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...e,children:s.jsx($R,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:s.jsx(sS,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var qu="Collapsible",[HR,ub]=_s(qu),[GR,zm]=HR(qu),hb=A.forwardRef((r,e)=>{const{__scopeCollapsible:n,open:o,defaultOpen:d,disabled:u,onOpenChange:g,...x}=r,[v,y]=ni({prop:o,defaultProp:d??!1,onChange:g,caller:qu});return s.jsx(GR,{scope:n,disabled:u,contentId:vi(),open:v,onOpenToggle:A.useCallback(()=>y(S=>!S),[y]),children:s.jsx(zt.div,{"data-state":Vm(v),"data-disabled":u?"":void 0,...x,ref:e})})});hb.displayName=qu;var fb="CollapsibleTrigger",mb=A.forwardRef((r,e)=>{const{__scopeCollapsible:n,...o}=r,d=zm(fb,n);return s.jsx(zt.button,{type:"button","aria-controls":d.contentId,"aria-expanded":d.open||!1,"data-state":Vm(d.open),"data-disabled":d.disabled?"":void 0,disabled:d.disabled,...o,ref:e,onClick:Ht(r.onClick,d.onOpenToggle)})});mb.displayName=fb;var $m="CollapsibleContent",pb=A.forwardRef((r,e)=>{const{forceMount:n,...o}=r,d=zm($m,r.__scopeCollapsible);return s.jsx(Oa,{present:n||d.open,children:({present:u})=>s.jsx(qR,{...o,ref:e,present:u})})});pb.displayName=$m;var qR=A.forwardRef((r,e)=>{const{__scopeCollapsible:n,present:o,children:d,...u}=r,g=zm($m,n),[x,v]=A.useState(o),y=A.useRef(null),S=ln(e,y),E=A.useRef(0),T=E.current,I=A.useRef(0),O=I.current,k=g.open||x,P=A.useRef(k),L=A.useRef(void 0);return A.useEffect(()=>{const U=requestAnimationFrame(()=>P.current=!1);return()=>cancelAnimationFrame(U)},[]),Rr(()=>{const U=y.current;if(U){L.current=L.current||{transitionDuration:U.style.transitionDuration,animationName:U.style.animationName},U.style.transitionDuration="0s",U.style.animationName="none";const B=U.getBoundingClientRect();E.current=B.height,I.current=B.width,P.current||(U.style.transitionDuration=L.current.transitionDuration,U.style.animationName=L.current.animationName),v(o)}},[g.open,o]),s.jsx(zt.div,{"data-state":Vm(g.open),"data-disabled":g.disabled?"":void 0,id:g.contentId,hidden:!k,...u,ref:S,style:{"--radix-collapsible-content-height":T?`${T}px`:void 0,"--radix-collapsible-content-width":O?`${O}px`:void 0,...r.style},children:k&&d})});function Vm(r){return r?"open":"closed"}var XR=hb,YR=mb,KR=pb,ai="Accordion",ZR=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Wm,QR,JR]=xm(ai),[Xu]=_s(ai,[JR,ub]),Hm=ub(),gb=$e.forwardRef((r,e)=>{const{type:n,...o}=r,d=o,u=o;return s.jsx(Wm.Provider,{scope:r.__scopeAccordion,children:n==="multiple"?s.jsx(rk,{...u,ref:e}):s.jsx(nk,{...d,ref:e})})});gb.displayName=ai;var[xb,ek]=Xu(ai),[wb,tk]=Xu(ai,{collapsible:!1}),nk=$e.forwardRef((r,e)=>{const{value:n,defaultValue:o,onValueChange:d=()=>{},collapsible:u=!1,...g}=r,[x,v]=ni({prop:n,defaultProp:o??"",onChange:d,caller:ai});return s.jsx(xb,{scope:r.__scopeAccordion,value:$e.useMemo(()=>x?[x]:[],[x]),onItemOpen:v,onItemClose:$e.useCallback(()=>u&&v(""),[u,v]),children:s.jsx(wb,{scope:r.__scopeAccordion,collapsible:u,children:s.jsx(yb,{...g,ref:e})})})}),rk=$e.forwardRef((r,e)=>{const{value:n,defaultValue:o,onValueChange:d=()=>{},...u}=r,[g,x]=ni({prop:n,defaultProp:o??[],onChange:d,caller:ai}),v=$e.useCallback(S=>x((E=[])=>[...E,S]),[x]),y=$e.useCallback(S=>x((E=[])=>E.filter(T=>T!==S)),[x]);return s.jsx(xb,{scope:r.__scopeAccordion,value:g,onItemOpen:v,onItemClose:y,children:s.jsx(wb,{scope:r.__scopeAccordion,collapsible:!0,children:s.jsx(yb,{...u,ref:e})})})}),[sk,Yu]=Xu(ai),yb=$e.forwardRef((r,e)=>{const{__scopeAccordion:n,disabled:o,dir:d,orientation:u="vertical",...g}=r,x=$e.useRef(null),v=ln(x,e),y=QR(n),E=Tc(d)==="ltr",T=Ht(r.onKeyDown,I=>{if(!ZR.includes(I.key))return;const O=I.target,k=y().filter(te=>!te.ref.current?.disabled),P=k.findIndex(te=>te.ref.current===O),L=k.length;if(P===-1)return;I.preventDefault();let U=P;const B=0,G=L-1,ee=()=>{U=P+1,U>G&&(U=B)},se=()=>{U=P-1,U<B&&(U=G)};switch(I.key){case"Home":U=B;break;case"End":U=G;break;case"ArrowRight":u==="horizontal"&&(E?ee():se());break;case"ArrowDown":u==="vertical"&&ee();break;case"ArrowLeft":u==="horizontal"&&(E?se():ee());break;case"ArrowUp":u==="vertical"&&se();break}const V=U%L;k[V].ref.current?.focus()});return s.jsx(sk,{scope:n,disabled:o,direction:d,orientation:u,children:s.jsx(Wm.Slot,{scope:n,children:s.jsx(zt.div,{...g,"data-orientation":u,ref:v,onKeyDown:o?void 0:T})})})}),Nu="AccordionItem",[ik,Gm]=Xu(Nu),vb=$e.forwardRef((r,e)=>{const{__scopeAccordion:n,value:o,...d}=r,u=Yu(Nu,n),g=ek(Nu,n),x=Hm(n),v=vi(),y=o&&g.value.includes(o)||!1,S=u.disabled||r.disabled;return s.jsx(ik,{scope:n,open:y,disabled:S,triggerId:v,children:s.jsx(XR,{"data-orientation":u.orientation,"data-state":Nb(y),...x,...d,ref:e,disabled:S,open:y,onOpenChange:E=>{E?g.onItemOpen(o):g.onItemClose(o)}})})});vb.displayName=Nu;var bb="AccordionHeader",Cb=$e.forwardRef((r,e)=>{const{__scopeAccordion:n,...o}=r,d=Yu(ai,n),u=Gm(bb,n);return s.jsx(zt.h3,{"data-orientation":d.orientation,"data-state":Nb(u.open),"data-disabled":u.disabled?"":void 0,...o,ref:e})});Cb.displayName=bb;var Y0="AccordionTrigger",Eb=$e.forwardRef((r,e)=>{const{__scopeAccordion:n,...o}=r,d=Yu(ai,n),u=Gm(Y0,n),g=tk(Y0,n),x=Hm(n);return s.jsx(Wm.ItemSlot,{scope:n,children:s.jsx(YR,{"aria-disabled":u.open&&!g.collapsible||void 0,"data-orientation":d.orientation,id:u.triggerId,...x,...o,ref:e})})});Eb.displayName=Y0;var Sb="AccordionContent",_b=$e.forwardRef((r,e)=>{const{__scopeAccordion:n,...o}=r,d=Yu(ai,n),u=Gm(Sb,n),g=Hm(n);return s.jsx(KR,{role:"region","aria-labelledby":u.triggerId,"data-orientation":d.orientation,...g,...o,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...r.style}})});_b.displayName=Sb;function Nb(r){return r?"open":"closed"}var ak=gb,ok=vb,lk=Cb,ck=Eb,dk=_b;function Ab({...r}){return s.jsx(ak,{"data-slot":"accordion",...r})}function ml({className:r,...e}){return s.jsx(ok,{"data-slot":"accordion-item",className:Tt("border-b last:border-b-0",r),...e})}function pl({className:r,children:e,...n}){return s.jsx(lk,{className:"flex",children:s.jsxs(ck,{"data-slot":"accordion-trigger",className:Tt("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",r),...n,children:[e,s.jsx(sm,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function gl({className:r,children:e,...n}){return s.jsx(dk,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:s.jsx("div",{className:Tt("pt-0 pb-4",r),children:e})})}const uk={getAllEvents:()=>(console.warn("[STUB] getAllEvents - Not implemented, returning empty array"),[]),getEventById:r=>(console.warn("[STUB] getEventById - Not implemented"),null),getSelectedEventId:()=>(console.warn("[STUB] getSelectedEventId - Not implemented"),null),getAllParticipants:r=>(console.warn("[STUB] getAllParticipants - Not implemented"),[]),getParticipantsByEvent:r=>(console.warn("[STUB] getParticipantsByEvent - Not implemented"),[]),getParticipantById:r=>(console.warn("[STUB] getParticipantById - Not implemented"),null),saveParticipant:r=>{console.warn("[STUB] saveParticipant - Not implemented")},deleteParticipant:r=>{console.warn("[STUB] deleteParticipant - Not implemented")},generateParticipantId:()=>(console.warn("[STUB] generateParticipantId - Returning random ID"),"P_"+Math.random().toString(36).substr(2,9)),bulkImportParticipants:(r,e)=>(console.warn("[STUB] bulkImportParticipants - Not implemented"),{success:0,failed:r.length}),recordAttendance:(r,e)=>{console.warn("[STUB] recordAttendance - Not implemented")},getAllAgenda:r=>(console.warn("[STUB] getAllAgenda - Not implemented"),[]),getAgendaByEvent:r=>(console.warn("[STUB] getAgendaByEvent - Not implemented"),[]),saveAgendaItem:r=>{console.warn("[STUB] saveAgendaItem - Not implemented")},updateAgendaItem:(r,e)=>{console.warn("[STUB] updateAgendaItem - Not implemented")},deleteAgendaItem:r=>{console.warn("[STUB] deleteAgendaItem - Not implemented")},generateAgendaId:()=>(console.warn("[STUB] generateAgendaId - Returning random ID"),"A_"+Math.random().toString(36).substr(2,9)),addCustomField:(r,e)=>{console.warn("[STUB] addCustomField - Not implemented")},deleteCustomField:(r,e)=>{console.warn("[STUB] deleteCustomField - Not implemented")},reorderCustomFields:(r,e)=>{console.warn("[STUB] reorderCustomFields - Not implemented")},generateCustomFieldId:()=>(console.warn("[STUB] generateCustomFieldId - Returning random ID"),"CF_"+Math.random().toString(36).substr(2,9)),getColumnVisibility:r=>(console.warn("[STUB] getColumnVisibility - Returning defaults"),{phone:!0,company:!0,position:!0,attendance:!0,registered:!0}),updateColumnVisibility:(r,e)=>{console.warn("[STUB] updateColumnVisibility - Not implemented")},getBrandingSettings:r=>(console.warn("[STUB] getBrandingSettings - Returning defaults"),{logoSize:"medium",logoAlignment:"left",primaryColor:"#7C3AED",backgroundColor:"#FFFFFF",fontFamily:"sans-serif"}),updateBrandingSettings:(r,e)=>{console.warn("[STUB] updateBrandingSettings - Not implemented")},getBadgeSettings:r=>(console.warn("[STUB] getBadgeSettings - Returning defaults"),{showQR:!0,showAttendance:!0,backgroundColor:"#FFFFFF",textColor:"#000000",accentColor:"#7C3AED"}),updateBadgeSettings:(r,e)=>{console.warn("[STUB] updateBadgeSettings - Not implemented")}},ew={CR80:{width:85.6,height:53.98,label:"CR80 (Credit Card)"},A6:{width:105,height:148,label:"A6"},A7:{width:74,height:105,label:"A7"},custom:{width:100,height:150,label:"Custom Size"}},tw=3.5,cu=r=>{if(!r)return"#000000";const e=r.trim().toLowerCase();return e==="#fff"||e==="#ffffff"||e==="white"?"#000000":r};function hk({eventId:r,onClose:e}){return s.jsx(fk,{eventId:r,onClose:e})}function fk({eventId:r,onClose:e}){const[n,o]=A.useState(null),[d,u]=A.useState(null),[g,x]=A.useState([]),[v,y]=A.useState([]),[S,E]=A.useState(null),[T,I]=A.useState(!1),[O,k]=A.useState(!1),[P,L]=A.useState(!1),[U,B]=A.useState(1),G=()=>{e?e():window.history.back()};A.useEffect(()=>{r&&(se(),te())},[r]);const ee=ye=>({...ye,fontSize:ye.fontSize??16,fontFamily:ye.fontFamily??"sans-serif",fontWeight:ye.fontWeight??"normal",fontStyle:ye.fontStyle??"normal",textAlign:ye.textAlign??"center",color:cu(ye.color)}),se=()=>{const ye=uk.getBadgeSettings(r),Y={...ye,backgroundColor:ye.backgroundColor};o(Y);const le=localStorage.getItem(`badge_canvas_${r}`);if(le)try{const Ce=JSON.parse(le);y(Ce.map(De=>ee(De)))}catch(Ce){console.error("Error loading canvas layout:",Ce),V(Y)}else V(Y)},V=ye=>{if(ye.components){const Y=ye.components.map((le,Ce)=>({...le,x:10,y:10+Ce*15,width:le.type==="qrcode"?25:80,height:le.type==="qrcode"?25:10,fontSize:16,fontFamily:"sans-serif",fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#000000"})).map(ee);y(Y)}},te=async()=>{try{let ye=Le.from("events").select("*").eq("id",r);const{data:Y,error:le}=await ye.single();if(le){console.warn("Event not found by ID, searching by legacy ID..."),console.error("Error loading event:",le);return}if(Y){const Ce={id:Y.id,name:Y.name,description:Y.description,startDate:Y.start_date,endDate:Y.end_date,location:Y.location,customFields:Y.custom_fields||[],branding:Y.branding||{}};u(Ce);const De=[{name:"name",label:"Name"},{name:"email",label:"Email"},{name:"phone",label:"Phone"},{name:"company",label:"Company"},{name:"position",label:"Position"}],Ye=(Y.custom_fields||[]).map(We=>({name:We.id,label:We.label}));if(x([...De,...Ye]),Y.badge_template){const We=Y.badge_template;o({size:We.size||"CR80",customWidth:We.customWidth||100,customHeight:We.customHeight||150,backgroundColor:We.backgroundColor||"#f3f4f6",backgroundImageUrl:We.backgroundImageUrl||"",backgroundImageFit:We.backgroundImageFit||"cover",logoUrl:We.logoUrl||"",showQR:!0,showAttendance:!1,textColor:"#000000",accentColor:"#000000",components:[]}),We.components&&y(We.components.map(ut=>ee(ut)))}}}catch(ye){console.error("Error loading event from Supabase:",ye)}},ne=async()=>{if(n){I(!0);try{const ye={size:n.size||"CR80",customWidth:n.customWidth,customHeight:n.customHeight,backgroundColor:n.backgroundColor,backgroundImageUrl:n.backgroundImageUrl,backgroundImageFit:n.backgroundImageFit,logoUrl:n.logoUrl,components:v},{error:Y}=await Le.from("events").update({badge_template:ye}).eq("id",r);if(Y)throw new Error(`Failed to save badge template: ${Y.message}`);localStorage.setItem(`badge_canvas_${r}`,JSON.stringify(v)),k(!0),setTimeout(()=>{k(!1),e?.()},1500)}catch(ye){console.error("Error saving badge settings:",ye),alert("Failed to save badge settings: "+(ye instanceof Error?ye.message:"Unknown error"))}finally{I(!1)}}},ce=ye=>{n&&o({...n,...ye})},oe=(ye,Y,le,Ce,De)=>{if(!we||!Ie){console.warn("Canvas dimensions not ready; skipping component add.");return}const Ye=Y??we/2,We=le??Ie/2,ut=ye==="qrcode"?25:60,Ze=ye==="qrcode"?25:12,Ot=Math.max(0,Math.min(100-ut,Ye/we*100)),Me=Math.max(0,Math.min(100-Ze,We/Ie*100)),at={id:Date.now().toString(),type:ye,fieldName:Ce,label:De||ye,enabled:!0,order:v.length,x:Ot,y:Me,width:ut,height:Ze,fontSize:16,fontFamily:"sans-serif",fontWeight:"normal",fontStyle:"normal",textAlign:"center",color:"#000000"},Z=ee(at);y(Te=>[...Te,Z]),E(Z.id)},H=(ye,Y)=>{y(le=>le.map(Ce=>Ce.id===ye?{...Ce,...Y}:Ce))},W=(ye,Y,le)=>{oe(ye,we/2,Ie/2,Y,le)},de=ye=>Math.min(2,Math.max(.5,ye)),X=ye=>{const Y=parseFloat(de(ye).toFixed(2));B(Y)},q=ye=>{X(U+ye)},ie=ye=>{y(Y=>Y.filter(le=>le.id!==ye)),S===ye&&E(null)},z=async ye=>{const Y=ye.target.files?.[0];if(Y){if(!Y.type.startsWith("image/")){alert("Please upload an image file (PNG or JPG)");return}if(Y.size>5*1024*1024){alert("Image must be smaller than 5MB");return}L(!0);try{const le=new FileReader;le.onload=()=>{const Ce=le.result;ce({backgroundImageUrl:Ce})},le.readAsDataURL(Y)}catch(le){console.error("Error uploading background image:",le),alert("Failed to upload image: "+(le.message||"Unknown error"))}finally{L(!1)}}};if(!n||!d)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600 font-medium",children:"Loading Badge Designer..."})]})});const ue=ew[n.size||"CR80"],be=n.size==="custom"?n.customWidth||100:ue.width,re=n.size==="custom"?n.customHeight||100:ue.height,we=be*tw,Ie=re*tw,Oe=v.find(ye=>ye.id===S);return s.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[s.jsxs("header",{className:"flex-shrink-0 px-8 py-5 bg-gradient-to-r from-white to-purple-50 border-b border-purple-200 flex items-center justify-between shadow-sm",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-purple-800 bg-clip-text text-transparent",children:"Badge Designer"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.name})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ae,{onClick:G,variant:"outline",className:"px-6 h-10 border-gray-300 text-gray-700 hover:bg-gray-100",children:"Cancel"}),s.jsx(Ae,{onClick:ne,disabled:T,className:"px-8 h-10 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white border-none font-semibold shadow-lg hover:shadow-xl transition-all",children:T?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Saving"]}):O?s.jsxs(s.Fragment,{children:[s.jsx(uo,{className:"mr-2 h-5 w-5"}),"Saved!"]}):s.jsxs(s.Fragment,{children:[s.jsx(jw,{className:"mr-2 h-5 w-5"}),"Save Template"]})})]})]}),s.jsx("main",{className:"flex-1 min-h-0 px-6 py-6 overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100",children:s.jsxs("div",{className:"mx-auto flex h-full min-h-0 gap-4",children:[s.jsxs("section",{className:"w-64 flex-shrink-0 flex flex-col overflow-hidden rounded-xl border border-purple-200 bg-white shadow-md hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200",children:s.jsx("h3",{className:"text-sm font-bold text-purple-900 uppercase tracking-wider",children:" Controls"})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s.jsxs(Ab,{type:"multiple",defaultValue:["size","palette"],className:"w-full",children:[s.jsxs(ml,{value:"size",className:"border border-purple-100 rounded-lg hover:border-purple-300 transition-colors",children:[s.jsx(pl,{className:"px-3 py-2 text-sm font-semibold text-purple-900 hover:bg-purple-50",children:"Badge Size"}),s.jsx(gl,{className:"px-3 pt-2 pb-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(VR,{value:n.size,onValueChange:ye=>ce({size:ye}),className:"space-y-2",children:Object.entries(ew).map(([ye,{label:Y}])=>s.jsxs("label",{htmlFor:`size-${ye}`,className:"flex items-center gap-2 rounded-md px-2 py-1.5 text-sm text-gray-700 hover:bg-purple-50 cursor-pointer",children:[s.jsx(WR,{value:ye,id:`size-${ye}`}),s.jsx("span",{children:Y})]},ye))}),n.size==="custom"&&s.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-medium text-gray-600",children:"Width (mm)"}),s.jsx(Ke,{type:"number",value:n.customWidth||100,onChange:ye=>ce({customWidth:parseInt(ye.target.value)}),className:"h-8 text-xs"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-medium text-gray-600",children:"Height (mm)"}),s.jsx(Ke,{type:"number",value:n.customHeight||150,onChange:ye=>ce({customHeight:parseInt(ye.target.value)}),className:"h-8 text-xs"})]})]}),s.jsxs("div",{className:"text-xs text-purple-700 bg-purple-50 rounded px-2 py-1.5 font-medium",children:[be.toFixed(1),"mm  ",re.toFixed(1),"mm"]})]})})]}),s.jsxs(ml,{value:"palette",className:"border border-purple-100 rounded-lg mt-2 hover:border-purple-300 transition-colors",children:[s.jsx(pl,{className:"px-3 py-2 text-sm font-semibold text-purple-900 hover:bg-purple-50",children:" Component Palette"}),s.jsx(gl,{className:"px-3 pt-2 pb-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(hc,{type:"eventName",label:"Event Name",onAdd:W,children:[s.jsx(_f,{className:"h-4 w-4 mr-2 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Event Name"})]}),s.jsxs(hc,{type:"qrcode",label:"QR Code",onAdd:W,children:[s.jsx(Aw,{className:"h-4 w-4 mr-2 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium",children:"QR Code"})]}),s.jsxs(hc,{type:"logo",label:"Event Logo",onAdd:W,children:[s.jsx(wS,{className:"h-4 w-4 mr-2 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Event Logo"})]}),s.jsx("div",{className:"border-t border-purple-100 my-2"}),s.jsx("div",{className:"text-xs font-bold text-purple-700 uppercase tracking-wider my-2",children:" Participant Fields"}),g.map(ye=>s.jsxs(hc,{type:"field",fieldName:ye.name,label:ye.label,onAdd:W,children:[s.jsx(_f,{className:"h-4 w-4 mr-2 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium",children:ye.label})]},ye.name)),s.jsx("div",{className:"border-t border-purple-100 my-2"}),s.jsxs(hc,{type:"customText",label:"Custom Text",onAdd:W,children:[s.jsx(_f,{className:"h-4 w-4 mr-2 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Custom Text"})]})]})})]}),s.jsxs(ml,{value:"background",className:"border border-purple-100 rounded-lg mt-2 hover:border-purple-300 transition-colors",children:[s.jsx(pl,{className:"px-3 py-2 text-sm font-semibold text-purple-900 hover:bg-purple-50",children:" Background"}),s.jsx(gl,{className:"px-3 pt-2 pb-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-bold text-purple-700",children:"Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"color",value:n.backgroundColor,onChange:ye=>ce({backgroundColor:ye.target.value}),className:"w-10 h-8 p-1 rounded border-2 border-purple-300"}),s.jsx(Ke,{type:"text",value:n.backgroundColor,onChange:ye=>ce({backgroundColor:ye.target.value}),placeholder:"#ffffff",className:"h-8 text-xs flex-1 border-purple-200 focus:border-purple-500"})]})]}),s.jsx("div",{className:"border-t border-purple-100 pt-2"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-bold text-purple-700",children:"Image"}),s.jsxs(Ae,{variant:"outline",size:"sm",disabled:P,className:"h-8 text-xs w-full border-purple-300 text-purple-700 hover:bg-purple-50",onClick:()=>document.getElementById("bg-file-input")?.click(),children:[s.jsx(yl,{className:"h-3 w-3 mr-1"}),P?"Uploading":"Upload"]}),s.jsx("input",{id:"bg-file-input",type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:z,className:"hidden"})]}),n.backgroundImageUrl&&s.jsx(Ae,{variant:"outline",size:"sm",onClick:()=>ce({backgroundImageUrl:"",backgroundImageFit:"cover"}),className:"h-8 text-xs w-full text-red-600 border-red-200 hover:bg-red-50",children:"Remove Image"})]})})]})]})})]}),s.jsxs("section",{className:"flex-1 min-h-0 flex flex-col overflow-hidden rounded-xl border border-purple-200 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200 flex items-center justify-between",children:[s.jsx("h2",{className:"text-sm font-bold text-purple-900 uppercase tracking-wider",children:" Canvas Preview"}),s.jsxs("div",{className:"flex items-center gap-2 bg-purple-100 rounded-full px-2 py-1 border border-purple-200",children:[s.jsx(Ae,{type:"button",size:"sm",variant:"ghost",onClick:()=>q(-.1),className:"h-6 w-6 p-0 text-purple-700 hover:bg-purple-200",children:s.jsx(PS,{className:"h-3 w-3"})}),s.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.05",value:U,onChange:ye=>X(parseFloat(ye.target.value)),className:"w-24 accent-purple-600 h-2 rounded-full"}),s.jsx(Ae,{type:"button",size:"sm",variant:"ghost",onClick:()=>q(.1),className:"h-6 w-6 p-0 text-purple-700 hover:bg-purple-200",children:s.jsx(cs,{className:"h-3 w-3"})}),s.jsxs("span",{className:"text-xs font-bold w-10 text-center text-purple-900",children:[Math.round(U*100),"%"]})]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto bg-gradient-to-b from-purple-50 to-purple-100 p-6",children:s.jsx("div",{className:"relative transform transition-transform duration-200 ease-out shadow-2xl rounded-lg",style:{transform:`scale(${U})`,transformOrigin:"center"},children:s.jsx(mk,{width:we,height:Ie,backgroundColor:n.backgroundColor,backgroundImageUrl:n.backgroundImageUrl,backgroundImageFit:n.backgroundImageFit,components:v,selectedComponentId:S,onComponentSelect:E,onComponentMove:(ye,Y,le)=>H(ye,{x:Y,y:le}),onComponentResize:(ye,Y,le)=>H(ye,{width:Y,height:le}),event:d})})}),s.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-purple-100 border-t border-purple-200",children:s.jsxs("span",{className:"text-xs text-purple-900 font-bold",children:["Size: ",be.toFixed(1),"mm  ",re.toFixed(1),"mm"]})})]}),s.jsxs("section",{className:"w-64 flex-shrink-0 flex flex-col overflow-hidden rounded-xl border border-purple-200 bg-white shadow-lg hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200",children:s.jsx("h3",{className:"text-sm font-bold text-purple-900 uppercase tracking-wider",children:" Component Settings"})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:Oe?s.jsx(gk,{component:Oe,onUpdate:ye=>H(Oe.id,ye),onDelete:()=>ie(Oe.id),logoUrl:n.logoUrl,onLogoUrlChange:ye=>ce({logoUrl:ye})}):s.jsx("div",{className:"h-full flex items-center justify-center text-center",children:s.jsxs("div",{children:[s.jsx(LS,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Select a component on canvas to edit"})]})})})]})]})})]})}function hc({type:r,fieldName:e,label:n,onAdd:o,children:d}){return s.jsx("button",{type:"button",onClick:()=>o(r,e,n),className:"w-full flex items-center px-3 py-2 bg-gradient-to-r from-purple-50 to-transparent border border-purple-200 rounded-lg hover:from-purple-100 hover:to-purple-50 hover:border-purple-400 hover:shadow-sm transition-all text-left text-sm font-semibold text-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-1 active:scale-95",children:d})}function mk({width:r,height:e,backgroundColor:n,backgroundImageUrl:o,backgroundImageFit:d="cover",components:u,selectedComponentId:g,onComponentSelect:x,onComponentMove:v,onComponentResize:y,event:S}){const E=A.useRef(null),T={width:`${r}px`,height:`${e}px`,backgroundColor:n};o&&(T.backgroundImage=`url(${o})`,T.backgroundSize=d,T.backgroundPosition="center",T.backgroundRepeat="no-repeat");const I={backgroundSize:"10px 10px",backgroundImage:"linear-gradient(to right, rgba(124, 58, 237, 0.2) 1px, transparent 1px), linear-gradient(to bottom, rgba(124, 58, 237, 0.2) 1px, transparent 1px)",opacity:.5},O=r/2,k=e/2;return s.jsxs("div",{ref:E,"data-badge-canvas":"true",className:"relative border-2 border-gray-400 shadow-2xl transition-all rounded-lg overflow-hidden bg-white cursor-default",style:T,onClick:P=>{P.stopPropagation(),x(null)},children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none",style:I,"aria-hidden":"true"}),s.jsx("div",{className:"absolute pointer-events-none",style:{left:0,top:`${k/e*100}%`,width:"100%",height:"1px",backgroundColor:"rgba(200, 100, 255, 0.3)",borderTop:"1px dashed rgba(124, 58, 237, 0.4)"},"aria-hidden":"true"}),s.jsx("div",{className:"absolute pointer-events-none",style:{left:`${O/r*100}%`,top:0,width:"1px",height:"100%",backgroundColor:"rgba(200, 100, 255, 0.3)",borderLeft:"1px dashed rgba(124, 58, 237, 0.4)"},"aria-hidden":"true"}),u.map(P=>s.jsx(pk,{component:P,isSelected:g===P.id,canvasWidth:r,canvasHeight:e,onSelect:()=>x(P.id),onMove:v,onResize:y,event:S},P.id)),u.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx(cs,{className:"h-10 w-10 mx-auto mb-3 opacity-30"}),s.jsx("p",{className:"text-sm font-medium",children:"Click components to add them"}),s.jsx("p",{className:"text-xs mt-1 opacity-70",children:"They will appear centered on the badge"})]})})]})}function pk({component:r,isSelected:e,canvasWidth:n,canvasHeight:o,onSelect:d,onMove:u,onResize:g,event:x}){const[v,y]=A.useState(""),[S,E]=A.useState(!1),[T,I]=A.useState({x:0,y:0}),O=A.useRef(null);A.useEffect(()=>{r.type==="qrcode"&&Bm.toDataURL("SAMPLE-QR-CODE",{width:200,margin:1}).then(y)},[r.type]);const k=U=>{U.target.closest(".resize-handle")||(U.stopPropagation(),E(!0),I({x:U.clientX-r.x/100*n,y:U.clientY-r.y/100*o}))};A.useEffect(()=>{if(!S)return;const U=G=>{const ee=(G.clientX-T.x)/n*100,se=(G.clientY-T.y)/o*100;u(r.id,Math.max(0,Math.min(100-r.width,ee)),Math.max(0,Math.min(100-r.height,se)))},B=()=>{E(!1)};return document.addEventListener("mousemove",U),document.addEventListener("mouseup",B),()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",B)}},[S,T,n,o,r.id,r.width,r.height,u]);const P=(U,B,G,ee)=>{const se=G.offsetWidth/n*100,V=G.offsetHeight/o*100;g(r.id,Math.min(100,se),Math.min(100,V))},L=()=>r.type==="eventName"?s.jsx("div",{className:"w-full h-full flex items-center justify-center overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:cu(r.color)},children:r.customText&&r.customText.trim().length>0?r.customText:x.name}):r.type==="field"?s.jsxs("div",{className:"w-full h-full overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:cu(r.color)},children:[s.jsx("div",{className:"opacity-60 text-xs",children:r.label}),s.jsxs("div",{children:["Sample ",r.label]})]}):r.type==="qrcode"&&v?s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("img",{src:v,alt:"QR Code",className:"w-full h-full object-contain"})}):r.type==="logo"&&x.branding?.logoUrl?s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx("img",{src:x.branding.logoUrl,alt:"Logo",className:"w-full h-full object-contain"})}):r.type==="customText"?s.jsx("div",{className:"w-full h-full flex items-center overflow-hidden",style:{fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStyle:r.fontStyle,textAlign:r.textAlign,color:cu(r.color)},children:r.customText||"Custom Text"}):null;return s.jsx(TR,{size:{width:`${r.width}%`,height:`${r.height}%`},onResizeStop:P,enable:{top:e,right:e,bottom:e,left:e,topRight:e,bottomRight:e,bottomLeft:e,topLeft:e},minWidth:"5%",minHeight:"3%",maxWidth:"100%",maxHeight:"100%",style:{position:"absolute",left:`${r.x}%`,top:`${r.y}%`,cursor:S?"grabbing":"grab"},className:`${e?"ring-2 ring-purple-500 ring-offset-2 shadow-lg":"hover:ring-1 hover:ring-purple-300"}`,handleClasses:{top:"resize-handle",right:"resize-handle",bottom:"resize-handle",left:"resize-handle",topRight:"resize-handle",bottomRight:"resize-handle",bottomLeft:"resize-handle",topLeft:"resize-handle"},children:s.jsxs("div",{ref:O,"data-component-id":r.id,className:"w-full h-full relative",onMouseDown:k,onClick:U=>{U.stopPropagation(),d()},children:[L(),e&&s.jsx("div",{className:"absolute -top-7 left-0 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-3 py-1 rounded-md text-xs whitespace-nowrap pointer-events-none shadow-md font-medium",children:r.label||r.type})]})})}function gk({component:r,onUpdate:e,onDelete:n,logoUrl:o,onLogoUrlChange:d}){const u=["field","eventName","customText"].includes(r.type),g=[...u?["text"]:[],"position",...r.type==="logo"?["logo"]:[]];return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between border-b bg-gradient-to-r from-purple-50 to-blue-50 px-4 py-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Component Settings"}),s.jsx(Ae,{variant:"ghost",size:"sm",onClick:n,className:"h-7 w-7 p-0 text-rose-500 hover:bg-rose-50 hover:text-rose-600",children:s.jsx(Ta,{className:"h-3.5 w-3.5"})})]}),s.jsxs("div",{className:"px-4 py-4 space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs text-slate-500 uppercase tracking-wide",children:"Component Type"}),s.jsx("p",{className:"text-sm font-semibold text-purple-700",children:r.label||r.type})]}),s.jsxs(Ab,{type:"multiple",defaultValue:g,className:"flex flex-col gap-3",children:[u&&s.jsxs(ml,{value:"text",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[s.jsx(pl,{className:"px-3 text-sm font-semibold text-slate-700",children:"Text & Formatting"}),s.jsxs(gl,{className:"px-3 max-h-\\[calc(100vh-360px)\\] overflow-y-auto space-y-4",children:[(r.type==="customText"||r.type==="eventName")&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:r.type==="eventName"?"Display Text Override":"Text Content"}),s.jsx(Ke,{value:r.customText||"",onChange:x=>e({customText:x.target.value}),placeholder:r.type==="eventName"?"Leave blank to use event name":"Enter custom text",className:"h-9 text-sm"}),r.type==="eventName"&&s.jsx("p",{className:"text-[11px] text-slate-500",children:"Leaving this empty will display the event name automatically."})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Font Size"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{type:"number",value:r.fontSize||16,onChange:x=>e({fontSize:parseInt(x.target.value)}),min:8,max:72,className:"h-9 text-sm"}),s.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"px"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Font Family"}),s.jsxs(Kr,{value:r.fontFamily||"sans-serif",onValueChange:x=>e({fontFamily:x}),children:[s.jsx(Qr,{className:"h-9 text-sm",children:s.jsx(Zr,{})}),s.jsxs(ls,{children:[s.jsx(Ut,{value:"sans-serif",children:"Sans Serif"}),s.jsx(Ut,{value:"serif",children:"Serif"}),s.jsx(Ut,{value:"monospace",children:"Monospace"}),s.jsx(Ut,{value:"Arial",children:"Arial"}),s.jsx(Ut,{value:"Times New Roman",children:"Times New Roman"}),s.jsx(Ut,{value:"Courier New",children:"Courier New"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Style"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ae,{variant:r.fontWeight==="bold"?"default":"outline",size:"sm",onClick:()=>e({fontWeight:r.fontWeight==="bold"?"normal":"bold"}),className:`h-9 flex-1 ${r.fontWeight==="bold"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:s.jsx(y0,{className:"h-3.5 w-3.5"})}),s.jsx(Ae,{variant:r.fontStyle==="italic"?"default":"outline",size:"sm",onClick:()=>e({fontStyle:r.fontStyle==="italic"?"normal":"italic"}),className:`h-9 flex-1 ${r.fontStyle==="italic"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:s.jsx(v0,{className:"h-3.5 w-3.5"})})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Alignment"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ae,{variant:r.textAlign==="left"?"default":"outline",size:"sm",onClick:()=>e({textAlign:"left"}),className:`h-9 flex-1 ${r.textAlign==="left"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:s.jsx(jE,{className:"h-3.5 w-3.5"})}),s.jsx(Ae,{variant:r.textAlign==="center"?"default":"outline",size:"sm",onClick:()=>e({textAlign:"center"}),className:`h-9 flex-1 ${r.textAlign==="center"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:s.jsx(NE,{className:"h-3.5 w-3.5"})}),s.jsx(Ae,{variant:r.textAlign==="right"?"default":"outline",size:"sm",onClick:()=>e({textAlign:"right"}),className:`h-9 flex-1 ${r.textAlign==="right"?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":""}`,children:s.jsx(TE,{className:"h-3.5 w-3.5"})})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Text Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ke,{type:"color",value:r.color||"#1f2937",onChange:x=>e({color:x.target.value}),className:"w-12 h-9 p-1 rounded-lg border border-slate-200"}),s.jsx(Ke,{type:"text",value:r.color||"#1f2937",onChange:x=>e({color:x.target.value}),placeholder:"#1f2937",className:"h-9 text-sm flex-1"})]})]})]})]}),s.jsxs(ml,{value:"position",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[s.jsx(pl,{className:"px-3 text-sm font-semibold text-slate-700",children:"Position & Size"}),s.jsxs(gl,{className:"px-3 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Position X (%)"}),s.jsx(Ke,{type:"number",value:r.x.toFixed(1),onChange:x=>e({x:parseFloat(x.target.value)}),min:0,max:100,className:"h-9 text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Position Y (%)"}),s.jsx(Ke,{type:"number",value:r.y.toFixed(1),onChange:x=>e({y:parseFloat(x.target.value)}),min:0,max:100,className:"h-9 text-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Width (%)"}),s.jsx(Ke,{type:"number",value:r.width.toFixed(1),onChange:x=>e({width:parseFloat(x.target.value)}),min:5,max:100,className:"h-9 text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Height (%)"}),s.jsx(Ke,{type:"number",value:r.height.toFixed(1),onChange:x=>e({height:parseFloat(x.target.value)}),min:3,max:100,className:"h-9 text-sm"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-t pt-3",children:[s.jsx(Qs,{checked:r.enabled,onCheckedChange:x=>e({enabled:x})}),s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Show on badge"})]})]})]}),r.type==="logo"&&s.jsxs(ml,{value:"logo",className:"border border-slate-200 border-b-0 rounded-xl bg-white shadow-inner",children:[s.jsx(pl,{className:"px-3 text-sm font-semibold text-slate-700",children:"Logo Options"}),s.jsxs(gl,{className:"px-3 space-y-2",children:[s.jsx(Pe,{className:"text-xs font-semibold text-slate-600",children:"Logo URL"}),s.jsx(Ke,{type:"url",value:o||"",onChange:x=>d(x.target.value),placeholder:"https://example.com/logo.png",className:"h-9 text-sm"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Or set in Event Branding settings."})]})]})]})]})]})}var xk=(r,e,n,o,d,u,g,x)=>{let v=document.documentElement,y=["light","dark"];function S(I){(Array.isArray(r)?r:[r]).forEach(O=>{let k=O==="class",P=k&&u?d.map(L=>u[L]||L):d;k?(v.classList.remove(...P),v.classList.add(u&&u[I]?u[I]:I)):v.setAttribute(O,I)}),E(I)}function E(I){x&&y.includes(I)&&(v.style.colorScheme=I)}function T(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(o)S(o);else try{let I=localStorage.getItem(e)||n,O=g&&I==="system"?T():I;S(O)}catch{}},wk=A.createContext(void 0),yk={setTheme:r=>{},themes:[]},vk=()=>{var r;return(r=A.useContext(wk))!=null?r:yk};A.memo(({forcedTheme:r,storageKey:e,attribute:n,enableSystem:o,enableColorScheme:d,defaultTheme:u,value:g,themes:x,nonce:v,scriptProps:y})=>{let S=JSON.stringify([n,e,u,r,x,g,o,d]).slice(1,-1);return A.createElement("script",{...y,suppressHydrationWarning:!0,nonce:typeof window>"u"?v:"",dangerouslySetInnerHTML:{__html:`(${xk.toString()})(${S})`}})});const bk=({...r})=>{const{theme:e="system"}=vk();return s.jsx(c8,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...r})};function Ck(){const[r,e]=A.useState(null),[n,o]=A.useState(null),[d,u]=A.useState(!0),[g,x]=A.useState(null),[v,y]=A.useState(null),[S,E]=A.useState(null);A.useEffect(()=>{const P=new URLSearchParams(window.location.search),L=window.location.hash,U=P.get("designer");if(U){E(U),u(!1);return}const B=L.match(/^#\/designer\/(.+)$/);if(B&&B[1]){E(B[1]),u(!1);return}else U||E(null);const G=P.get("checkin");if(G){x(G),u(!1);return}const ee=P.get("register");if(ee){y(ee),u(!1);return}const se=L.match(/^#\/register\/(.+)$/);if(se&&se[1]){y(se[1]),u(!1);return}const V=P.get("event");V&&o(V),(async()=>{try{const{data:{session:ce}}=await Le.auth.getSession();ce?.access_token&&e(ce.access_token)}catch(ce){console.error("Error checking session:",ce)}finally{u(!1)}})();const ne=()=>{const ce=window.location.hash,oe=ce.match(/^#\/register\/(.+)$/),H=ce.match(/^#\/designer\/(.+)$/);oe&&oe[1]?(y(oe[1]),E(null)):H&&H[1]?(E(H[1]),y(null),x(null)):!ce||ce==="#/"||ce==="#"?(y(null),E(null)):(!ce||ce==="#/"||ce==="#")&&y(null)};return window.addEventListener("hashchange",ne),()=>window.removeEventListener("hashchange",ne)},[]);const T=P=>{e(P)},I=()=>{e(null),o(null);const P=new URL(window.location.href);P.searchParams.delete("event"),window.history.pushState({},"",P)},O=P=>{o(P);const L=new URL(window.location.href);L.searchParams.set("event",P),window.history.pushState({},"",L)},k=()=>{o(null);const P=new URL(window.location.href);P.searchParams.delete("event"),window.history.pushState({},"",P)};return d?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})}):g?s.jsx(vR,{agendaId:g}):v?s.jsx(bR,{eventId:v}):S?s.jsx(hk,{eventId:S,onClose:()=>{const P=new URL(window.location.href),L=P.searchParams.get("from");if(L&&L.startsWith("checkin=")){const U=L.replace("checkin=",""),B=new URL(window.location.origin+window.location.pathname);B.searchParams.set("checkin",U),window.location.replace(B.toString())}else if(L&&L.startsWith("admin=")){const U=new URL(window.location.origin+window.location.pathname);U.searchParams.set("event",S),U.searchParams.set("tab","branding"),window.location.replace(U.toString())}else P.searchParams.delete("designer"),P.searchParams.delete("from"),window.location.replace(P.origin+P.pathname)}}):r?n?s.jsx(H8,{eventId:n,accessToken:r,onLogout:I,onBackToEvents:k}):s.jsx(G8,{onEventSelected:O,onLogout:I}):s.jsxs(s.Fragment,{children:[s.jsx(T3,{onAuthenticated:T}),s.jsx(bk,{position:"top-right",richColors:!0})]})}AC.createRoot(document.getElementById("root")).render(s.jsx(Ck,{}));
